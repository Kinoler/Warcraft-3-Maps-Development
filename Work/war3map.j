//W3x2lni Data: 2021-01-05 18:35:54.215
globals
hashtable MH=InitHashtable()
integer array MU
boolean array MZ
hashtable M1=InitHashtable()
integer array Mz
integer M0=0
hashtable Mx=InitHashtable()
integer array Mv
integer Mw=1
hashtable Mt=InitHashtable()
integer array Mr
integer Ms=0
string M4="Q}W{9zx/.2q]J[0Z?X>4_IYRO5c,yL8e=rpoD:C<VM6~TEPU`1Bn+3uvitNb!a'@A;#Sl$ms%kjfG^gh&K7*Fw(Hd)-"
integer M2=5
trigger M8=CreateTrigger()
trigger NB=CreateTrigger()
trigger array M9
trigger array NC
unit array ND
trigger NE
boolean array NP
unit Ni
hashtable No=InitHashtable()
integer array Nv
trigger NQ=CreateTrigger()
integer OH
boolean array OR
integer array OI
integer array OK
integer array OZ
real OP
real OQ
integer array Oa
integer OS=$41314136
trigger OL
trigger OM
trigger ON
trigger OO
trigger PI
boolean Ob=true
integer OJ=4
unit array PG
string PH
string PF="Q}W{9zx/.2q]J[0Z?X>4_IYRO5c,yL8e=rpoD:C<VM6~TEPU`1Bn+3uvitNb!a'@A;#Sl$ms%kjfG^gh&K7*Fw(Hd)-"
string array Ou
unit Wu=null
integer array QK
unit Wk=null
location Wl=null
integer QL=0
real QM=0
group QN=null
integer QO=0
integer QP=0
quest array YW
location array Yz
integer QQ=0
integer array QR
unit array Wi
location array ZU
boolean QS=false
integer QT=0
integer QU=0
real QV=0
real QW=0
real QX=0
real QY=0
boolean QZ=false
integer Qa=0
integer Qb=0
real Qc=0
real Qd=0
string Qe
boolean Qf=false
player array h0
boolean Qg=false
real array Qh
boolean Qi=false
integer array Qj
integer Qk=0
real Ql=0
timer Qm=null
integer array Qn
integer array Qo
integer array Qp
boolean Qq=false
boolean Qr=false
unit array h1
integer array Qs
real array Qt
integer array Qu
integer array Qv
integer Qw=0
integer array Qx
real array Qy
real array Qz
integer array Q0
real array Q1
boolean array Q2
integer array Q3
integer array Q4
integer Q5=0
real array Q6
boolean array Q7
integer array Q8
unit array h2
integer array Q9
integer RB=0
real array RC
boolean array RD
integer array RE
timer array RF
integer array RG
integer array RH
integer array RI
integer RJ=0
integer RK=0
integer RL=0
integer array RM
real array RN
integer array RO
integer array RP
integer array RQ
integer array RR
unit Wt=null
location Wv=null
location Ww=null
location Wz=null
integer array RS
integer array RT
integer array RU
real array RV
real array RW
real array RX
unit array WF
location array WG
unit array XD
group array RY
unit array WH
boolean array RZ
timer Ra=null
location array XF
location array W7
integer array Rb
button array Xr
texttag array Z0
string array Rc
group Rd=null
timer Re=null
group Rf=null
timer Rg=null
group Rh=null
integer Ri=0
integer Rj=0
timer Rk=null
integer Rl=0
integer Rm=0
real Rn=0
integer Ro=0
real Rp=0
unit array VT
unit array NM
multiboard Pd=null
integer array Rq
integer array Rr
integer array Rs
real array Rt
unit array WU
location array WT
real array Ru
real Rv=0
real array Rw
integer Rx=0
real array Ry
integer array Rz
real array R0
group array R1
boolean array R2
unit array XQ
location array XR
timer R3=null
integer XT=0
location XU=null
group R4=null
integer R5=0
unit array XV
location array XW
real array R6
integer R7=0
boolean array R8
timer R9=null
integer XY=0
integer MM=0
integer array SB
integer SC=0
location array YU
real SD=0
location array fo
location array fp
unit array fq
location array fw
unit array fx
location array fy
integer array SE
integer SF=0
integer array SG
integer SH=0
integer array SI
boolean array SJ
group SK=null
real array SL
real array SM
effect array Uu
boolean array SN
integer array SO
unit array MV
integer SP=0
timer SQ=null
unit array Xo
integer SR=0
integer SS=0
group ST=null
integer SU=0
group array SV
integer SW=0
unit array Wh
boolean array SX
timer SY=null
integer array SZ
boolean Sa=false
integer Sb=0
integer Sc=0
location V2=null
string array Sd
integer Se=0
location Wa=null
integer Sf=0
real array Sg
integer Sh=0
integer Si=0
unit fM=null
location array fO
unit array fP
integer array Sj
location array fT
location array fU
integer Sk=0
integer Sl=0
integer Sm=0
integer Sn=0
integer So=0
integer Sp=0
integer Sq=0
integer array Sr
unit gM=null
integer array Ss
location V1=null
boolean array St
integer Su=0
integer Sv=0
boolean array Sw
integer array Sx
boolean array Sy
location array Wc
unit array Wd
location array We
integer array Sz
boolean array S0
integer S1=0
unit array Nd
boolean array S2
integer S3=0
boolean array S4
boolean array S5
integer S6=0
group array S7
timer array S8
integer array S9
timer TB=null
timer TC=null
group TD=null
integer TE=0
boolean array TF
integer array TG
integer TH=0
integer TI=0
integer TJ=0
integer array TK
integer array NK
integer array NL
integer TL=0
location array b5
integer array TM
integer array TN
integer array TO
integer array TP
boolean TQ=false
integer TR=0
unit array gP
location array gQ
real array Nh
real array N1
real array TS
real array Ne
real array Ng
integer array TT
integer array TU
unit array WQ
integer TV=0
location array WR
group array TW
boolean array Nj
integer array TX
integer array TY
integer TZ=0
integer array Ta
integer Tb=0
integer array Tc
integer array Td
integer array Te
integer array Tf
unit ds=null
integer Tg=0
boolean array Th
integer array Ti
effect array WO
location Ud=null
group Tj=null
integer Tk=0
integer array Tl
integer array Tm
location array Xl
group array Tn
integer array To
integer Tp=0
group Tq=null
group Tr=null
group array Ts
unit array W2
unit array W1
integer Tt=0
boolean array Tu
real array Tv
integer Tw=0
integer Tx=0
unit W4=null
timer array Ty
boolean array Tz
location array WM
unit array WK
group array T0
integer T1=0
integer array T2
integer T3=0
boolean array T4
integer T5=0
boolean array T6
integer array T7
integer T8=0
integer array T9
timer UB=null
integer UC=0
integer UD=0
integer UE=0
integer UF=0
integer array UG
string UH
integer array UI
integer array UJ
integer array UK
integer array UL
integer array UM
integer array UN
integer array UO
multiboard array OE
group array UP
dialog UQ=null
integer array UR
integer array US
rect H=null
rect I=null
rect J=null
rect K=null
rect L=null
rect M=null
rect N=null
rect O=null
rect P=null
rect Q=null
rect R=null
rect S=null
rect T=null
rect U=null
rect V=null
rect W=null
rect X=null
rect Y=null
rect Z=null
rect a=null
rect b=null
rect c=null
rect d=null
rect e=null
rect f=null
rect g=null
rect h=null
rect i=null
rect j=null
rect k=null
rect l=null
rect m=null
rect n=null
rect o=null
rect p=null
rect q=null
rect r=null
rect s=null
rect t=null
rect u=null
rect v=null
rect w=null
rect x=null
rect y=null
rect z=null
rect BB=null
rect BC=null
rect BD=null
rect BE=null
rect BF=null
rect BG=null
rect BH=null
rect BI=null
rect BJ=null
rect BK=null
rect BL=null
rect BM=null
rect BN=null
rect BO=null
rect BP=null
rect BQ=null
rect BR=null
rect BS=null
rect BT=null
rect BU=null
rect BV=null
rect BW=null
rect BX=null
rect BY=null
rect BZ=null
rect Ba=null
rect Bb=null
rect Bc=null
rect Bd=null
rect Be=null
rect Bf=null
rect Bg=null
rect Bh=null
rect Bi=null
rect Bj=null
rect Bk=null
rect Bl=null
rect Bm=null
rect Bn=null
rect Bo=null
rect Bp=null
rect Bq=null
rect Br=null
rect Bs=null
rect Bt=null
rect Bu=null
rect Bv=null
rect Bw=null
rect Bx=null
rect By=null
rect Bz=null
rect B0=null
rect B1=null
rect B2=null
rect B3=null
rect B4=null
rect B5=null
rect B6=null
rect B7=null
rect B8=null
rect B9=null
rect CB=null
rect CC=null
rect CD=null
rect CE=null
rect CF=null
rect CG=null
rect CH=null
rect CI=null
rect CJ=null
rect CK=null
rect CL=null
rect CM=null
rect CN=null
rect CO=null
rect CP=null
rect CQ=null
rect CR=null
rect CS=null
rect CT=null
rect CU=null
rect CV=null
rect CW=null
rect CX=null
rect CY=null
rect CZ=null
rect Ca=null
rect Cb=null
rect Cc=null
rect Cd=null
rect Ce=null
rect Cf=null
rect Cg=null
rect Ch=null
rect Ci=null
rect Cj=null
rect Ck=null
rect Cl=null
rect Cm=null
rect Cn=null
rect Co=null
rect Cp=null
rect Cq=null
rect Cr=null
rect Cs=null
rect Ct=null
rect Cu=null
rect Cv=null
rect Cw=null
rect Cx=null
rect Cy=null
rect Cz=null
rect C0=null
rect C1=null
rect C2=null
rect C3=null
rect C4=null
rect C5=null
rect C6=null
rect C7=null
rect C8=null
rect C9=null
rect DB=null
rect DC=null
rect DD=null
rect DE=null
rect DF=null
rect DG=null
rect DH=null
rect DI=null
rect DJ=null
rect DK=null
rect DL=null
rect DM=null
rect DN=null
rect DO=null
rect DP=null
rect DQ=null
rect DR=null
rect DS=null
rect DT=null
rect DU=null
rect DV=null
rect DW=null
rect DX=null
rect DY=null
rect DZ=null
rect Da=null
rect Db=null
rect Dc=null
rect Dd=null
rect De=null
rect Df=null
rect Dg=null
rect Dh=null
rect Di=null
rect Dj=null
rect Dk=null
rect Dl=null
rect Dm=null
rect Dn=null
rect Do=null
rect Dp=null
rect Dq=null
rect Dr=null
rect Ds=null
rect Dt=null
rect Du=null
rect Dv=null
rect Dw=null
rect Dx=null
rect Dy=null
rect Dz=null
rect D0=null
rect D1=null
rect D2=null
rect D3=null
rect D4=null
rect D5=null
rect D6=null
rect D7=null
rect D8=null
rect D9=null
rect EB=null
rect EC=null
rect ED=null
rect EE=null
rect EF=null
rect EG=null
rect EH=null
rect EI=null
rect EJ=null
rect EK=null
rect EL=null
rect EM=null
rect EN=null
rect EO=null
rect EP=null
rect EQ=null
rect ER=null
rect ES=null
rect ET=null
rect EU=null
rect EV=null
rect EW=null
rect EX=null
rect EY=null
rect EZ=null
rect Ea=null
rect Eb=null
rect Ec=null
rect Ed=null
rect Ee=null
rect Ef=null
rect Eg=null
rect Eh=null
rect Ei=null
rect Ej=null
rect Ek=null
rect El=null
rect Em=null
rect En=null
rect Eo=null
rect Ep=null
rect Eq=null
rect Er=null
rect Es=null
rect Et=null
rect Eu=null
rect Ev=null
rect Ew=null
rect Ex=null
rect Ey=null
rect Ez=null
rect E0=null
rect E1=null
rect E2=null
rect E3=null
rect E4=null
rect E5=null
rect E6=null
rect E7=null
rect E8=null
rect E9=null
rect FB=null
rect FC=null
rect FD=null
rect FE=null
rect FF=null
rect FG=null
rect FH=null
rect FI=null
rect FJ=null
rect FK=null
rect FL=null
rect FM=null
rect FN=null
rect FO=null
rect FP=null
rect FQ=null
rect FR=null
rect FS=null
rect FT=null
rect FU=null
rect FV=null
rect FW=null
rect FX=null
rect FY=null
rect FZ=null
rect Fa=null
rect Fb=null
rect Fc=null
rect Fd=null
rect Fe=null
rect Ff=null
rect Fg=null
rect Fh=null
rect Fi=null
rect Fj=null
rect Fk=null
rect Fl=null
rect Fm=null
rect Fn=null
rect Fo=null
rect Fp=null
rect Fq=null
rect Fr=null
rect Fs=null
rect Ft=null
rect Fu=null
rect Fv=null
rect Fw=null
rect Fx=null
rect Fy=null
rect Fz=null
rect F0=null
rect F1=null
rect F2=null
rect F3=null
rect F4=null
rect F5=null
rect F6=null
rect F7=null
rect F8=null
rect F9=null
rect GB=null
rect GC=null
rect GD=null
rect GE=null
rect GF=null
rect GG=null
rect GH=null
rect GI=null
rect GJ=null
rect GK=null
rect GL=null
rect GM=null
rect GN=null
rect GO=null
rect GP=null
rect GQ=null
rect GR=null
rect GS=null
rect GT=null
rect GU=null
rect GV=null
rect GW=null
rect GX=null
rect GY=null
rect GZ=null
rect Ga=null
rect Gb=null
rect Gc=null
rect Gd=null
rect Ge=null
rect Gf=null
rect Gg=null
rect Gh=null
rect Gi=null
rect Gj=null
rect Gk=null
rect Gl=null
rect Gm=null
rect Gn=null
rect Go=null
rect Gp=null
rect Gq=null
rect Gr=null
rect Gs=null
rect Gt=null
rect Gu=null
rect Gv=null
rect Gw=null
rect Gx=null
rect Gy=null
rect Gz=null
rect G0=null
rect G1=null
rect G2=null
rect G3=null
camerasetup G4=null
camerasetup G5=null
camerasetup G6=null
camerasetup G7=null
camerasetup G8=null
camerasetup G9=null
sound C=null
sound D=null
sound E=null
sound F=null
sound G=null
trigger PK=null
trigger Uc=null
trigger VC=null
trigger V0=null
trigger WD=null
trigger WE=null
trigger WI=null
trigger WJ=null
trigger WL=null
trigger WN=null
trigger WP=null
trigger WS=null
trigger WV=null
trigger WW=null
trigger WX=null
trigger WY=null
trigger WZ=null
trigger Wb=null
trigger Wf=null
trigger Wg=null
trigger Wj=null
trigger Wm=null
trigger Wn=null
trigger Wo=null
trigger Wp=null
trigger Wr=null
trigger Ws=null
trigger Wx=null
trigger Wy=null
trigger W0=null
trigger W3=null
trigger W5=null
trigger W6=null
trigger W8=null
trigger W9=null
trigger XB=null
trigger XC=null
trigger XE=null
trigger XG=null
trigger XH=null
trigger XI=null
trigger XJ=null
trigger XK=null
trigger XL=null
trigger XN=null
trigger XO=null
trigger XP=null
trigger XS=null
trigger XX=null
trigger XZ=null
trigger Xa=null
trigger Xb=null
trigger Xc=null
trigger Xd=null
trigger Xh=null
trigger Xi=null
trigger Xj=null
trigger Xk=null
trigger Xm=null
trigger Xu=null
trigger X1=null
trigger YD=null
trigger YE=null
trigger YF=null
trigger YN=null
trigger YQ=null
trigger YR=null
trigger YS=null
trigger YT=null
trigger YV=null
trigger YX=null
trigger YY=null
trigger YZ=null
trigger Ya=null
trigger Yb=null
trigger Yc=null
trigger Yd=null
trigger Ye=null
trigger Yf=null
trigger Yg=null
trigger Yh=null
trigger Yj=null
trigger Yi=null
trigger Yk=null
trigger Yl=null
trigger Ym=null
trigger Vh=null
trigger Yn=null
trigger Yo=null
trigger Vg=null
trigger Yp=null
trigger Yq=null
trigger Yr=null
trigger Ys=null
trigger Yt=null
trigger Yu=null
trigger Yv=null
trigger Yw=null
trigger Yy=null
trigger Yx=null
trigger Y0=null
trigger Y1=null
trigger Y2=null
trigger Y3=null
trigger Y4=null
trigger Y5=null
trigger Y6=null
trigger Y7=null
trigger Y8=null
trigger Y9=null
trigger ZB=null
trigger ZC=null
trigger ZD=null
trigger ZE=null
trigger ZF=null
trigger ZG=null
trigger ZH=null
trigger ZI=null
trigger ZJ=null
trigger ZK=null
trigger ZL=null
trigger ZM=null
trigger ZN=null
trigger ZO=null
trigger ZP=null
trigger ZQ=null
trigger ZR=null
trigger ZS=null
trigger ZT=null
trigger ZV=null
trigger ZW=null
trigger ZX=null
trigger ZY=null
trigger ZZ=null
trigger Za=null
trigger Zd=null
trigger Zb=null
trigger Zc=null
trigger Ze=null
trigger Zf=null
trigger Zg=null
trigger Zh=null
trigger Zi=null
trigger Zj=null
trigger Zk=null
trigger Zl=null
trigger Zm=null
trigger Zn=null
trigger Zo=null
trigger Zr=null
trigger Zs=null
trigger Zt=null
trigger Zu=null
trigger Zv=null
trigger Zw=null
trigger Zx=null
trigger Zy=null
trigger Zz=null
trigger Z5=null
trigger Z4=null
trigger Z3=null
trigger Z2=null
trigger Z1=null
trigger Z6=null
trigger Z7=null
trigger Z8=null
trigger Z9=null
trigger aB=null
trigger aC=null
trigger aD=null
trigger aE=null
trigger aF=null
trigger aG=null
trigger aH=null
trigger aI=null
trigger aJ=null
trigger aK=null
trigger aL=null
trigger aM=null
trigger aN=null
trigger aO=null
trigger aP=null
trigger aQ=null
trigger aR=null
trigger aS=null
trigger aT=null
trigger aU=null
trigger aV=null
trigger aW=null
trigger aX=null
trigger aY=null
trigger aZ=null
trigger aa=null
trigger ab=null
trigger ac=null
trigger ad=null
trigger ae=null
trigger af=null
trigger ag=null
trigger ai=null
trigger aj=null
trigger ak=null
trigger al=null
trigger am=null
trigger an=null
trigger ap=null
trigger ao=null
trigger aq=null
trigger Vk=null
trigger ar=null
trigger as=null
trigger at=null
trigger au=null
trigger aw=null
trigger av=null
trigger ay=null
trigger ah=null
trigger az=null
trigger a0=null
trigger a1=null
trigger a2=null
trigger a3=null
trigger a4=null
trigger a5=null
trigger a6=null
trigger a7=null
trigger a8=null
trigger bB=null
trigger a9=null
trigger bC=null
trigger bD=null
trigger bE=null
trigger bF=null
trigger bG=null
trigger bH=null
trigger bI=null
trigger bJ=null
trigger bK=null
trigger Vl=null
trigger bL=null
trigger bM=null
trigger bN=null
trigger bO=null
trigger bP=null
trigger bQ=null
trigger bR=null
trigger bS=null
trigger bT=null
trigger bU=null
trigger bV=null
trigger bW=null
trigger bX=null
trigger bY=null
trigger ba=null
trigger bZ=null
trigger bb=null
trigger bc=null
trigger be=null
trigger bd=null
trigger bf=null
trigger bg=null
trigger bh=null
trigger bi=null
trigger bj=null
trigger bk=null
trigger bl=null
trigger bm=null
trigger bn=null
trigger bo=null
trigger bp=null
trigger br=null
trigger bq=null
trigger bs=null
trigger bt=null
trigger bu=null
trigger bv=null
trigger bw=null
trigger bx=null
trigger by=null
trigger bz=null
trigger b0=null
trigger b4=null
trigger b1=null
trigger b2=null
trigger b3=null
trigger b6=null
trigger b7=null
trigger b8=null
trigger b9=null
trigger cB=null
trigger cC=null
trigger cD=null
trigger cE=null
trigger cF=null
trigger cG=null
trigger cH=null
trigger cI=null
trigger cJ=null
trigger cK=null
trigger cL=null
trigger cM=null
trigger cN=null
trigger cO=null
trigger cP=null
trigger cQ=null
trigger cR=null
trigger cS=null
trigger cT=null
trigger cU=null
trigger cV=null
trigger cW=null
trigger cX=null
trigger cY=null
trigger cZ=null
trigger ca=null
trigger cb=null
trigger cc=null
trigger cd=null
trigger ce=null
trigger cf=null
trigger cg=null
trigger ch=null
trigger ci=null
trigger cj=null
trigger ck=null
trigger cl=null
trigger cm=null
trigger cn=null
trigger co=null
trigger cp=null
trigger cq=null
trigger cr=null
trigger cs=null
trigger ct=null
trigger cu=null
trigger cv=null
trigger cw=null
trigger cx=null
trigger cy=null
trigger c0=null
trigger c1=null
trigger c2=null
trigger c3=null
trigger c4=null
trigger c5=null
trigger c6=null
trigger c7=null
trigger c8=null
trigger c9=null
trigger dB=null
trigger dC=null
trigger dD=null
trigger U1=null
trigger dF=null
trigger Ut=null
trigger dG=null
trigger dH=null
trigger dI=null
trigger dM=null
trigger dN=null
trigger dO=null
trigger dP=null
trigger dQ=null
trigger dR=null
trigger dS=null
trigger dT=null
trigger dU=null
trigger dV=null
trigger dW=null
trigger dX=null
trigger dY=null
trigger da=null
trigger db=null
trigger dc=null
trigger de=null
trigger df=null
trigger dg=null
trigger dh=null
trigger di=null
trigger dj=null
trigger dk=null
trigger dl=null
trigger dm=null
trigger dn=null
trigger do=null
trigger Us=null
trigger dp=null
trigger dq=null
trigger dr=null
trigger dt=null
trigger du=null
trigger Uz=null
trigger dv=null
trigger dx=null
trigger dy=null
trigger d0=null
trigger d1=null
trigger eY=null
trigger eZ=null
trigger ea=null
trigger eb=null
trigger ec=null
trigger ed=null
trigger ee=null
trigger ef=null
trigger eg=null
trigger eh=null
trigger ei=null
trigger ej=null
trigger ek=null
trigger el=null
trigger em=null
trigger en=null
trigger eo=null
trigger ep=null
trigger eq=null
trigger Up=null
trigger U0=null
trigger er=null
trigger es=null
trigger et=null
trigger eu=null
trigger ev=null
trigger ew=null
trigger ex=null
trigger ey=null
trigger ez=null
trigger e0=null
trigger e1=null
trigger e2=null
trigger e3=null
trigger e4=null
trigger e5=null
trigger e6=null
trigger e8=null
trigger e9=null
trigger fB=null
trigger fC=null
trigger fD=null
trigger fE=null
trigger fF=null
trigger fG=null
trigger fH=null
trigger fI=null
trigger fK=null
trigger fL=null
trigger fJ=null
trigger fN=null
trigger fQ=null
trigger fR=null
trigger fS=null
trigger fV=null
trigger fW=null
trigger fX=null
trigger fY=null
trigger fZ=null
trigger jF=null
trigger fb=null
trigger fc=null
trigger hr=null
trigger hv=null
trigger hu=null
trigger fn=null
trigger fr=null
trigger fs=null
trigger ft=null
trigger fu=null
trigger fv=null
trigger fz=null
trigger f0=null
trigger eJ=null
trigger f1=null
trigger f2=null
trigger f3=null
trigger f4=null
trigger f5=null
trigger gC=null
trigger f6=null
trigger f7=null
trigger gB=null
trigger f8=null
trigger f9=null
trigger eI=null
trigger Uw=null
trigger gE=null
trigger hQ=null
trigger eQ=null
trigger eU=null
trigger eR=null
trigger eV=null
trigger gH=null
trigger gI=null
trigger gJ=null
trigger gK=null
trigger hw=null
trigger gL=null
trigger gN=null
trigger gO=null
trigger gR=null
trigger gV=null
trigger gW=null
trigger gX=null
trigger gY=null
trigger gZ=null
trigger ga=null
trigger gb=null
trigger gc=null
trigger d6=null
trigger gd=null
trigger ge=null
trigger gf=null
trigger d7=null
trigger gg=null
trigger gh=null
trigger d8=null
trigger gi=null
trigger gj=null
trigger gk=null
trigger gm=null
trigger gp=null
trigger gq=null
trigger gt=null
trigger gu=null
trigger d3=null
trigger hE=null
trigger hK=null
trigger hN=null
trigger hO=null
trigger hP=null
trigger eW=null
trigger eX=null
trigger eH=null
trigger eO=null
trigger eT=null
trigger eF=null
trigger eL=null
trigger eN=null
trigger eD=null
trigger eB=null
trigger d5=null
trigger hU=null
trigger hV=null
trigger hW=null
trigger hX=null
trigger hY=null
trigger hZ=null
trigger ha=null
trigger hb=null
trigger U2=null
trigger U4=null
trigger U3=null
trigger hc=null
trigger hd=null
trigger he=null
trigger hf=null
trigger hg=null
trigger hh=null
trigger hi=null
trigger Uv=null
trigger Uj=null
trigger Ux=null
trigger hj=null
trigger Uy=null
trigger hk=null
trigger hl=null
trigger hm=null
trigger hn=null
trigger ho=null
trigger Vi=null
trigger Vj=null
trigger Ui=null
trigger hp=null
trigger Zp=null
trigger Zq=null
trigger eG=null
trigger eP=null
trigger eS=null
trigger eE=null
trigger eK=null
trigger eM=null
trigger eC=null
trigger d9=null
trigger d4=null
trigger jG=null
trigger hz=null
trigger jH=null
trigger jI=null
trigger h3=null
trigger iT=null
trigger iU=null
trigger iV=null
trigger Um=null
trigger Ul=null
trigger Uk=null
trigger Ur=null
trigger Uq=null
trigger Uo=null
trigger Un=null
trigger iW=null
trigger jJ=null
trigger ik=null
trigger il=null
trigger im=null
trigger in=null
trigger io=null
trigger ip=null
trigger iq=null
trigger VU=null
trigger VY=null
trigger VV=null
trigger VW=null
trigger VX=null
trigger dd=null
trigger ir=null
trigger is=null
trigger it=null
trigger iv=null
trigger i1=null
trigger i2=null
trigger i3=null
trigger i4=null
trigger i5=null
trigger ax=null
trigger i6=null
trigger i7=null
trigger i8=null
trigger i9=null
trigger jB=null
trigger jC=null
trigger jD=null
unit JT=null
unit IF=null
unit Kl=null
unit KW=null
unit KV=null
unit KU=null
unit KT=null
unit Ie=null
unit Ke=null
unit LC=null
unit Kb=null
unit KS=null
unit KR=null
unit Kv=null
unit Ia=null
unit K3=null
unit If=null
unit KJ=null
unit IZ=null
unit Jf=null
unit KM=null
unit Kq=null
unit KL=null
unit KK=null
unit K4=null
unit Hy=null
unit IY=null
unit I1=null
unit I2=null
unit Ig=null
unit KX=null
unit Kj=null
unit LP=null
unit K9=null
unit H4=null
unit Li=null
unit H9=null
unit IC=null
unit IP=null
unit Jh=null
unit Km=null
unit Ip=null
unit Ka=null
unit JS=null
unit IB=null
unit Lu=null
unit Jp=null
unit L6=null
unit Ic=null
unit Kw=null
unit Ii=null
unit Ij=null
unit Kg=null
unit Il=null
unit H8=null
unit JR=null
unit K7=null
unit KZ=null
unit IN=null
unit H3=null
unit ID=null
unit IL=null
unit Ki=null
unit Kp=null
unit K6=null
unit H1=null
unit IM=null
unit H0=null
unit In=null
unit Im=null
unit Ls=null
unit Iu=null
unit Kf=null
unit H2=null
unit K5=null
unit IR=null
unit IQ=null
unit KB=null
unit LH=null
unit LI=null
unit Iy=null
unit Ih=null
unit Lm=null
unit Jr=null
unit H6=null
unit Jw=null
unit Iw=null
unit KC=null
unit Jk=null
unit LJ=null
unit JQ=null
unit LM=null
unit LL=null
unit Id=null
unit Ky=null
unit L8=null
unit LF=null
unit Io=null
unit J6=null
unit KO=null
unit LQ=null
unit I5=null
unit LN=null
unit LO=null
unit Kh=null
unit LS=null
unit KI=null
unit KF=null
unit I3=null
unit Kx=null
unit K0=null
unit LD=null
unit Ju=null
unit Jm=null
unit Lf=null
unit H5=null
unit LV=null
unit IE=null
unit II=null
unit K1=null
unit LX=null
unit Hz=null
unit IG=null
unit IH=null
unit Lh=null
unit Lg=null
unit Le=null
unit JP=null
unit JO=null
unit Ko=null
unit LU=null
unit Ks=null
unit Kc=null
unit Lk=null
unit Lj=null
unit IO=null
unit Ld=null
unit Lc=null
unit Lb=null
unit La=null
unit LZ=null
unit Kt=null
unit Hx=null
unit LW=null
unit LT=null
unit Ji=null
unit LY=null
unit JN=null
unit JM=null
unit JL=null
unit JK=null
unit JJ=null
unit JI=null
unit JH=null
unit JG=null
unit JE=null
unit JD=null
unit JC=null
unit JB=null
unit It=null
unit Is=null
unit J9=null
unit LB=null
unit Jn=null
unit Lo=null
unit Iv=null
unit Jg=null
unit Lv=null
unit Jl=null
unit Kz=null
unit KG=null
unit Ik=null
unit Ln=null
unit L1=null
unit Iq=null
unit H7=null
unit K8=null
unit LG=null
unit I9=null
unit I8=null
unit Lr=null
unit JV=null
unit LK=null
unit JU=null
unit Je=null
unit J5=null
unit J4=null
unit J3=null
unit J2=null
unit J1=null
unit KD=null
unit J0=null
unit Jz=null
unit Jy=null
unit Jx=null
unit L0=null
unit Ix=null
unit Js=null
unit Kn=null
unit KN=null
unit IS=null
unit Lw=null
unit Lp=null
unit Kk=null
unit L2=null
unit L4=null
unit Jc=null
unit KP=null
unit Jq=null
unit L7=null
unit JW=null
unit IK=null
unit IJ=null
unit Kd=null
unit I6=null
unit Jj=null
unit Jo=null
unit Lx=null
unit Ly=null
unit Lz=null
unit L3=null
unit L5=null
unit I0=null
unit J8=null
unit JX=null
unit J7=null
unit Kr=null
unit Iz=null
unit I7=null
unit LR=null
unit Lq=null
unit Lt=null
unit KQ=null
unit Ll=null
unit Jd=null
unit Ir=null
unit KY=null
unit L9=null
unit JZ=null
unit JY=null
unit K2=null
unit Ja=null
unit KE=null
unit KH=null
unit Jv=null
unit IX=null
unit IT=null
unit IV=null
unit IU=null
unit IW=null
unit Ku=null
unit Jt=null
unit Ib=null
unit JF=null
unit Jb=null
unit LE=null
destructable HT=null
destructable HV=null
destructable HW=null
destructable Hn=null
destructable Hu=null
destructable Hm=null
destructable Hl=null
destructable Hk=null
destructable HU=null
destructable HK=null
destructable HL=null
destructable HZ=null
destructable Hb=null
destructable Ho=null
destructable HH=null
destructable Ha=null
destructable HX=null
destructable HI=null
destructable Ht=null
destructable Hq=null
destructable Hc=null
destructable HJ=null
destructable HP=null
destructable HN=null
destructable HR=null
destructable HM=null
destructable HS=null
destructable HQ=null
destructable HO=null
destructable HD=null
destructable Hp=null
destructable HB=null
destructable HC=null
destructable HF=null
destructable HE=null
destructable Hs=null
destructable HG=null
destructable Hj=null
destructable Hr=null
destructable HY=null
trigger jE=null
real Oi=7.12
string array VP
boolean array Vy
boolean array iz
integer array go
integer array d2
integer VQ
string array hJ
integer array hG
real array dE
hashtable dJ=InitHashtable()
integer Nw
effect array V6
hashtable PR=InitHashtable()
hashtable Nr=InitHashtable()
unit Ps
hashtable fd=InitHashtable()
integer array fi
integer array fa
boolean array VS
integer array hC
string V7
hashtable YM=InitHashtable()
integer array Xp
dialog array Xq
integer Xy
integer Xz
string array OG
boolean NG=true
timer Pp=CreateTimer()
dialog Po=DialogCreate()
string PJ="1234567890AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz-_)(/."
integer N6
string array OF
string array PT
boolean array Pr
integer array Pq
location Pt
unit YI
unit array Ub
unit array Ny
integer array Nz
unit array Vf
integer array N0
hashtable Ve=InitHashtable()
hashtable NZ=InitHashtable()
integer Na
integer array Md
trigger gT=CreateTrigger()
trigger hx=CreateTrigger()
image array gw
integer array gU
string array g1
group array V3
group array V4
integer array Pu
string array MR
integer MS
hashtable B7b=InitHashtable()
string array Pk
integer Vv
integer Vx
string Vw
integer Pl
hashtable ff=InitHashtable()
unit array gS
hashtable gv=InitHashtable()
hashtable gn=InitHashtable()
integer g5=0
integer array g6
real array g7
integer QB=0
integer array QC
integer array QD
string array QF
multiboard ic
item QJ
integer Mn=0
integer Mp=0
integer array Mo
integer array MO
integer array MP
integer array MJ
real array MK
integer array ML
string array Mj
integer array Mk
sound array Ml
integer array Mm
endglobals
native UnitAlive takes unit id returns boolean
function jK takes nothing returns integer
local integer Mf=Mn
if Mf!=0 then
set Mn=Mo[Mf]
else
set Mp=Mp+1
set Mf=Mp
endif
if Mf>80 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: BossLoot")
return 0
endif
set MP[Mf]=(Mf-1)*100
set ML[Mf]=(Mf-1)*100
set Mk[Mf]=(Mf-1)*100
set Mm[Mf]=(Mf-1)*100
set MJ[Mf]=-1
set Mo[Mf]=-1
return Mf
endfunction
function jL takes item MQ returns nothing
call TriggerSleepAction(.1)
set MR[MS]=GetItemName(MQ)
set MS=MS+1
endfunction
function jM takes integer Mc returns integer
local integer Mf=jK()
call SaveInteger(MH,Mc,0,Mf)
return Mf
endfunction
function jN takes integer Mf,integer Mc,integer Mg,string Mh,sound Mi returns integer
set MJ[Mf]=MJ[Mf]+1
set MO[MP[Mf]+MJ[Mf]]=Mc
set MK[ML[Mf]+MJ[Mf]]=Mg
set Mj[Mk[Mf]+MJ[Mf]]=Mh
set Ml[Mm[Mf]+MJ[Mf]]=Mi
return Mf
endfunction
function jO takes nothing returns nothing
local unit MD=GetTriggerUnit()
local integer MC
local integer ME=GetUnitTypeId(MD)
local real MF=GetUnitX(MD)
local real MG=GetUnitY(MD)
local item MN
local integer MI
if HaveSavedInteger(MH,ME,0) and not IsUnitIllusion(MD) and GetOwningPlayer(MD)==Player(11) then
set MI=LoadInteger(MH,ME,0)
set MC=0
loop
exitwhen MC>MJ[MI]
if GetRandomInt(0,100)<=(MK[ML[MI]+MC]*MM + 20) then
set MN=CreateItem(MO[MP[MI]+MC],MF,MG)
call jL(MN)
endif
set MC=MC+1
endloop
endif
set MD=null
set MN=null
endfunction
function jP takes nothing returns nothing
local integer MC
local trigger MB=CreateTrigger()
set MC=0
loop
exitwhen MC>=bj_MAX_PLAYER_SLOTS
call TriggerRegisterPlayerUnitEvent(MB,Player(MC),EVENT_PLAYER_UNIT_DEATH,null)
set MC=MC+1
endloop
call TriggerAddAction(MB,function jO)
set MB=null
endfunction
function jQ takes player Hv returns nothing
if MU[GetPlayerId(Hv)]>=300 and MU[GetPlayerId(Hv)]!=302 then
if MV[GetPlayerId(Hv)]!=null then
call BJDebugMsg("|c00ffff00"+GetPlayerName(Hv)+"|r находится в |c00ff0000афк режиме|r! Шанс дропа понижен.")
set MM=MM-1
endif
endif
endfunction
function jR takes nothing returns nothing
local integer MC=0
loop
exitwhen MC>7
if GetPlayerSlotState(Player(MC))==PLAYER_SLOT_STATE_PLAYING and MZ[MC]!=true then
if MU[MC]<300 and UnitAlive(MV[GetPlayerId(Player(MC))]) then
call SetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496432,GetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496432)+1)
if GetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496432)>=59 then
call SetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496432,1)
if GetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496433)>=1 then
call SetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496433,GetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496433)+1)
else
call UnitAddAbility(MV[GetPlayerId(Player(MC))],$41496433)
endif
if GetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496433)>=23 then
call SetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496433,1)
if GetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496434)>=1 then
call SetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496434,GetUnitAbilityLevel(MV[GetPlayerId(Player(MC))],$41496434)+1)
else
call UnitAddAbility(MV[GetPlayerId(Player(MC))],$41496434)
endif
endif
endif
endif
else
set MU[MC]=0
endif
set MC=MC+1
endloop
endfunction
function jS takes nothing returns nothing
local integer MC=0
loop
exitwhen MC>7
if GetPlayerSlotState(Player(MC))==PLAYER_SLOT_STATE_PLAYING and MZ[MC]!=true then
set MU[MC]=0
if MU[MC]==300 then
call jQ(Player(MC))
if MU[MC]>=300 then
set MU[MC]=302
endif
endif
else
set MU[MC]=0
endif
set MC=MC+1
endloop
endfunction
function jT takes nothing returns nothing
if MU[GetPlayerId(GetTriggerPlayer())]>=300 then
call BJDebugMsg("|c00ffff00"+GetPlayerName(GetTriggerPlayer())+"|r вышел из |c0000ff00афк режима|r! Шанс дропа вернулся в норму.")
if MV[GetPlayerId(GetTriggerPlayer())]!=null then
if MM>=4 and GetPlayerName(Player(8))=="TCoM" then
set MM=4
else
set MM=MM+1
endif
endif
set MU[GetPlayerId(GetTriggerPlayer())]=0
elseif MU[GetPlayerId(GetTriggerPlayer())]>0 then
set MU[GetPlayerId(GetTriggerPlayer())]=0
endif
endfunction
function jU takes nothing returns nothing
if GetIssuedOrderId()==851973 then
return
endif
if MU[GetPlayerId(GetTriggerPlayer())]>=300 then
call BJDebugMsg("|c00ffff00"+GetPlayerName(GetTriggerPlayer())+"|r вышел из афк режима! Шанс дропа вернулся в норму.")
if MV[GetPlayerId(GetTriggerPlayer())]!=null then
if MM>=4 and GetPlayerName(Player(8))=="TCoM" then
set MM=4
else
set MM=MM+1
endif
endif
set MU[GetPlayerId(GetTriggerPlayer())]=0
elseif MU[GetPlayerId(GetOwningPlayer(GetOrderedUnit()))]>0 then
set MU[GetPlayerId(GetOwningPlayer(GetOrderedUnit()))]=0
endif
endfunction
function jV takes trigger MX returns nothing
local integer MC=0
loop
exitwhen MC>7
call TriggerRegisterPlayerEvent(MX,Player(MC),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerChatEvent(MX,Player(MC),"",false)
call TriggerRegisterPlayerUnitEvent(MX,Player(MC),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(MX,Player(MC),EVENT_PLAYER_UNIT_DESELECTED,null)
call TriggerRegisterPlayerEvent(MX,Player(MC),EVENT_PLAYER_ARROW_LEFT_DOWN)
call TriggerRegisterPlayerEvent(MX,Player(MC),EVENT_PLAYER_ARROW_RIGHT_DOWN)
call TriggerRegisterPlayerEvent(MX,Player(MC),EVENT_PLAYER_ARROW_DOWN_DOWN)
call TriggerRegisterPlayerEvent(MX,Player(MC),EVENT_PLAYER_ARROW_UP_DOWN)
call TriggerRegisterPlayerEvent(MX,Player(MC),EVENT_PLAYER_ARROW_LEFT_UP)
call TriggerRegisterPlayerEvent(MX,Player(MC),EVENT_PLAYER_ARROW_RIGHT_UP)
call TriggerRegisterPlayerEvent(MX,Player(MC),EVENT_PLAYER_ARROW_DOWN_UP)
call TriggerRegisterPlayerEvent(MX,Player(MC),EVENT_PLAYER_ARROW_UP_UP)
set MC=MC+1
endloop
endfunction
function jW takes nothing returns nothing
local trigger MT=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(MT,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterAnyUnitEventBJ(MT,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterAnyUnitEventBJ(MT,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddAction(MT,function jU)
set MT=null
endfunction
function jX takes nothing returns nothing
local trigger MW=CreateTrigger()
call jV(MW)
call TriggerAddAction(MW,function jT)
set MW=null
endfunction
function jY takes nothing returns nothing
local trigger MY=CreateTrigger()
call TriggerRegisterTimerEvent(MY,1.,true)
call TriggerAddAction(MY,function jS)
set MY=null
set MY=CreateTrigger()
call TriggerRegisterTimerEvent(MY,60,true)
call TriggerAddAction(MY,function jR)
set MY=null
endfunction
function jZ takes nothing returns nothing
local player Mb=GetTriggerPlayer()
local integer Mc=GetPlayerId(Mb)
local unit Hw
local location Me
if MV[Mc]==null and Md[Mc]!=0 then
set Me=Location(-15600,2440)
set Hw=CreateUnitAtLoc(Mb,Md[Mc],Me,0)
if GetLocalPlayer()==Mb then
call PanCameraToTimed(GetLocationX(Me),GetLocationY(Me),0)
call ClearSelection()
call SelectUnit(Hw,true)
endif
set Md[Mc]=0
call RemoveLocation(Me)
set Me=null
endif
set Mb=null
set Hw=null
endfunction
function ja takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local player Mb=GetTriggerPlayer()
local integer Mc=GetPlayerId(Mb)
if MV[Mc]==null then
if GetUnitTypeId(Hw)==$48303646 then
set Md[Mc]=$48303356
elseif GetUnitTypeId(Hw)==$48303635 then
set Md[Mc]=$48303344
elseif GetUnitTypeId(Hw)==$4F30304F then
set Md[Mc]=$4F303034
elseif GetUnitTypeId(Hw)==$48303636 then
set Md[Mc]=$48303550
elseif GetUnitTypeId(Hw)==$48303648 then
set Md[Mc]=$48303036
elseif GetUnitTypeId(Hw)==$48303649 then
set Md[Mc]=$48303031
elseif GetUnitTypeId(Hw)==$48303644 then
set Md[Mc]=$48303058
elseif GetUnitTypeId(Hw)==$48303637 then
set Md[Mc]=$48303147
elseif GetUnitTypeId(Hw)==$4830354E then
set Md[Mc]=$48303437
elseif GetUnitTypeId(Hw)==$48303638 then
set Md[Mc]=$48303534
elseif GetUnitTypeId(Hw)==$48303639 then
set Md[Mc]=$48303032
elseif GetUnitTypeId(Hw)==$55303132 then
set Md[Mc]=$5530304B
elseif GetUnitTypeId(Hw)==$48303743 then
set Md[Mc]=$48303030
elseif GetUnitTypeId(Hw)==$4F30304D then
set Md[Mc]=$4F303032
elseif GetUnitTypeId(Hw)==$48303641 then
set Md[Mc]=$48303443
elseif GetUnitTypeId(Hw)==$48303642 then
set Md[Mc]=$48303046
elseif GetUnitTypeId(Hw)==$4F30304E then
set Md[Mc]=$4F303036
elseif GetUnitTypeId(Hw)==$48303643 then
set Md[Mc]=$48303131
elseif GetUnitTypeId(Hw)==$4830364A then
set Md[Mc]=$48303353
elseif GetUnitTypeId(Hw)==$48303645 then
set Md[Mc]=$48303034
elseif GetUnitTypeId(Hw)==$4830364B then
set Md[Mc]=$4830304C
elseif GetUnitTypeId(Hw)==$45303131 then
set Md[Mc]=$45303057
elseif GetUnitTypeId(Hw)==$4830364C then
set Md[Mc]=$4830314B
elseif GetUnitTypeId(Hw)==$4F303050 then
set Md[Mc]=$4F303030
elseif GetUnitTypeId(Hw)==$4830364D then
set Md[Mc]=$48303259
elseif GetUnitTypeId(Hw)==$45303132 then
set Md[Mc]=$45303033
elseif GetUnitTypeId(Hw)==$48303647 then
set Md[Mc]=$48303033
elseif GetUnitTypeId(Hw)==$4830344A then
set Md[Mc]=$4830354D
elseif GetUnitTypeId(Hw)==$4F30304C then
set Md[Mc]=$4F303049
endif
endif
set Mb=null
set Hw=null
endfunction
function jb takes nothing returns nothing
local integer MC=0
local trigger Ma
call jW()
call jX()
call jY()
set Ma=CreateTrigger()
loop
call TriggerRegisterPlayerUnitEvent(Ma,Player(MC),EVENT_PLAYER_UNIT_SELECTED,null)
set MC=MC+1
exitwhen MC>7
endloop
call TriggerAddAction(Ma,function ja)
set Ma=null
set Ma=CreateTrigger()
set MC=0
loop
call TriggerRegisterPlayerEvent(Ma,Player(MC),EVENT_PLAYER_END_CINEMATIC)
set MC=MC+1
exitwhen MC>7
endloop
call TriggerAddAction(Ma,function jZ)
set Ma=null
endfunction
function jc takes nothing returns nothing
call jN(jN(jN(jM($6E303339),$636E6F62,20,null,null),$72687468,0,null,null),$72617439,0,null,null)
call jN(jN(jN(jN(jM($6E303048),$49304A36,15,"Вам выпал |c0000ff00Элемент леса|r",C),$49303434,50,null,null),$49303433,50,null,null),$49303432,50,null,null)
call jN(jN(jM($75303030),$49303436,50,null,null),$49303435,50,null,null)
call jN(jN(jM($6830344F),$49305437,10,"Вам выпала |c00ffff00Часть корабля|r",C),$706E766C,20,"Вам выпал |c0000ffffАктиватор Сета Айса|r",C)
call jN(jN(jN(jN(jN(jN(jN(jN(jM($65303049),$49304230,20,null,null),$49304231,20,null,null),$4930415A,20,null,null),$49304159,20,null,null),$49304158,20,null,null),$49304157,20,null,null),$49304441,2,"Вам выпала |c00007f00Эссенция леса|r",C),$72656A32,4,"Вам выпал |c00ffff00Курьер|r",C)
call jN(jN(jN(jM($68303035),$49303430,50,null,null),$4930335A,50,null,null),$49303431,50,null,null)
call jN(jN(jM($6E30324E),$49304A34,15,"Вам выпал |c00ff7f00Элемент пауков|r",C),$49305055,100,null,null)
call jN(jN(jN(jN(jN(jN(jN(jN(jN(jM($6E303548),$49305234,5,"Вам выпало |c0000ff00Ядовитое Жало|r",C),$49303845,2,"Вам выпал |c00ffff00Эскиз Руны|r",C),$49305855,3,"Вам выпал |c00ff00ffКурьер Арахнид|r",C),$6B67616C,20,null,null),$62726167,20,null,null),$69776272,20,null,null),$656E766C,20,null,null),$676F626D,20,null,null),$74656C73,20,null,null)
call jN(jN(jN(jN(jN(jM($6E303539),$49304930,5,"Вам выпала |c007d7d7dГнилая Туша|r",C),$49304853,10,"Вам выпала |c00ffff00Вспышка Ярости|r",C),$49304856,10,"Вам выпала |c00ffff00Полет Мысли|r",C),$49304858,10,"Вам выпала |c00ffff00Яркость|r",C),$72617433,10,"Вам выпало |c00ff0000Броня мрази|r",C)
call jN(jN(jN(jM($6830324F),$49304545,12,"Вам выпал |c00ff0000Феникс|r",C),$49304547,12,"Вам выпал |c00ffff00Только во снах|r",C),$49304546,12,"Вам выпала |c00ff9696Душевная Боль|r",C)
call jN(jM($68303332),$4930454F,10,"Вам выпал |c00ffff00Древний пергамент|r",C)
call jN(jN(jN(jN(jM($6E303356),$696E6673,20,null,null),$6D6E7374,20,null,null),$70676865,20,null,null),$49305256,2,"Вам выпал |c006969ffОсколок Льда|r",C)
call jN(jN(jN(jM($6E303352),$776F6D73,20,"Вам выпал |c00ffff00Свиток ловкости|r",C),$776C7364,20,"Вам выпал |c00ffff00Свиток силы|r",C),$77736873,20,"Вам выпал |c00ffff00Свиток разума|r",C)
call jN(jN(jM($6E30374A),$49305239,7,"Вам выпал |c007d7d7dКаменный элемент|r",C),$6B336D33,2,"Вам выпала |c007d7d7dЭссенция камня|r",C)
call jN(jN(jM($6E303749),$49305238,7,"Вам выпала |c007d7d7dКрепкая шкура|r",C),$736F7266,2,"Вам выпала |c004E2A04Эссенция земли|r",C)
call jN(jN(jM($6E303433),$49304239,7,"Вам выпало |c00ffff00Яйцо Саламандры|r",C),$676F7072,2,"Вам выпала |c00ffff00Эссенция моря|r",C)
call jN(jN(jM($75303049),$676F6D6E,7,"Вам выпала |c00ff00ffСущность Детерока|r",C),$49305257,2,"Вам выпала |c007d7d7dЭссенция тьмы|r",C)
call jN(jN(jN(jM($6E303537),$49304939,10,"Вам выпала |c00ffff00Ахилеска|r",C),$61727368,10,"Вам выпало |c00ff0000Затмение|r",C),$64746862,2,"Вам выпала |c006969ffЭссенция ракообразного|r",C)
call jN(jN(jM($7530304C),$49304A33,10,"Вам выпал |c00ffff00Элемент зверя|r",C),$49304F4B,20,"Вам выпала |c007d7d7dКость Мертвеца|r",C)
call jN(jN(jM($7530304A),$49304F4C,15,"Вам выпали |c007d7d7dКлыки|r",C),$49304150,15,"Вам выпала |c00ff00ffЧастица Тьмы|r",C)
call jN(jM($6E303250),$49303241,8,"Вам выпал |c00ff7f00Шлем сосредоточения|r",C)
call jN(jN(jM($6E303334),$49303242,3,"Вам выпал |c00ff00ffЭлемент демона|r",C),$4930485A,5,"Вам выпал |c00ffff00Ничтожный Свиток|r",C)
call jN(jN(jN(jN(jM($6E303555),$49304C33,7,"Вам выпала |c00ff9696Душа Галлахана|r",C),$49303158,1,"Вам выпал |c00ff0000Осколок Руны|r",C),$7468646D,3,"Вам выпал |c00ff00ffЗародыш пламени|r",C),$49305858,3,"Вам выпал |c0000ffffКурьер Галлаханчик|r",C)
call jN(jN(jN(jN(jM($6E303553),$49304C34,7,"Вам выпала |c000000ffДуша Мора|r",C),$49303459,1,"Вам выпал |c006969ffОсколок Руны|r",C),$616E6667,3,"Вам выпала |c00ff7f00Астральная искра|r",C),$49305859,3,"Вам выпал |c00ff00ffКурьер Мини-Мор|r",C)
call jN(jN(jN(jN(jM($6E303554),$49304C35,7,"Вам выпала |c0000ffffДуша Крушителя|r",C),$49303156,1,"Вам выпал |c0000ff00Осколок Руны|r",C),$626C6261,3,"Вам выпала |c00ff7f00Нестабильная сущность|r",C),$4930585A,3,"Вам выпал |c00ff00ffКурьер Крушитель|r",C)
call jN(jN(jN(jN(jN(jN(jN(jM($68303045),$49304244,10,"Вам выпала |c00ffff00Меткость|r",C),$49304245,10,"Вам выпало |c00ffff00Копье лунного Света|r",C),$49304248,10,"Вам выпала |c00ffff00Накидка Эльфов|r",C),$49304246,10,"Вам выпал |c00ffff00Череп Покойника|r",C),$49304247,10,"Вам выпал |c00ffff00Посох Смертника|r",C),$49304249,10,"Вам выпал |c00ffff00Эликсир Выносливости|r",C),$66726867,4,"Вам выпал |c00ff00ffКурьер|r",C)
call jN(jN(jN(jM($6E303456),$49304658,10,"Вам выпала |c00ff9696Карта Сокровищ|r",C),$49304656,10,"Вам выпал |c00ffff00Ящик Золота|r",C),$49304657,10,"Вам выпала |c0000ffffРуна Лихорадки|r",C)
call jN(jN(jN(jM($68303233),$4930424A,10,"Вам выпала |c00ff0000Книга Силы|r",C),$4930424B,10,"Вам выпала |c0000ff00Книга Ловкости|r",C),$4930424C,10,"Вам выпала |c000000ffКнига Разума|r",C)
call jN(jN(jN(jN(jN(jN(jM($6E303445),$49304232,10,"Вам выпала |c00ff7f00Власть Порчи|r",C),$49304235,10,"Вам выпала |c00ff7f00Власть Тьмы|r",C),$49304237,10,"Вам выпала |c00ff7f00Похищение Жизни|r",C),$49304236,10,"Вам выпала |c00ff7f00Похищение Маны|r",C),$49304233,10,"Вам выпала |c00ff7f00Чумная Энергия|r",C),$49304234,10,"Вам выпала |c00ff7f00Темная Сила|r",C)
call jN(jN(jN(jN(jN(jN(jN(jM($6E30354B),$49305235,8,"Вам выпало |c00ff00ffКопыто Кентавра|r",C),$6B336D32,15,null,null),$676C736B,15,null,null),$74686C65,15,null,null),$64706865,15,null,null),$616D7263,15,null,null),$70616D73,15,null,null)
call jN(jN(jN(jM($6E687963),$49303833,7,"Вам выпала |c00ff00ffГолова Тиллы|r",C),$4930314B,7,"Вам выпал |c00ff7f00Черепаший Панцирь|r",C),$4930314D,2,"Вам выпал |c0000ffffАктиватор Сета Костей|r",C)
call jN(jN(jN(jN(jN(jM($75303054),$49303451,15,"Вам выпал |c00ff00ffЭлемент сосредоточения|r",C),$49304831,15,"Вам выпала |c007d7d7dСмертельная сущность|r",C),$73747761,10,"Вам выпала |c00ff6969Гнилая кисть|r",C),$6B796768,2,"Вам выпала |c00ff00ffСломанная коса|r",C),$49304850,15,"Вам выпала |c00ff00ffКусочек смерти|r",C)
call jN(jN(jM($6E303654),$7372746C,10,"Вам выпал |c0000ff00Купель жизни|r",C),$6772736C,10,"Вам выпал |c0000ff00Элементальный слиток|r",C)
call jN(jN(jN(jN(jN(jM($6E303754),$736F756C,7,"Вам выпала |c007d7d7dСтальная корона|r",C),$6573617A,7,"Вам выпал |c00ff9696Перстень из камня|r",C),$7363686C,7,"Вам выпал |c00ff7f00Адамантовый амулет|r",C),$49305930,3,"Вам выпал |c00ff00ffКурьер Лен-Кур|r",C),$49305453,2,"Эска песка",C)
call jN(jM($6E303630),$49305856,5,"Вам выпал |c00ff00ffКурьер Джек-малютка|r",C)
call jN(jM($6E303844),$49305857,5,"Вам выпал |c00ff00ffКурьер Асмо в миниатюре|r",C)
call jN(jN(jN(jN(jM($6E6D6764),$49305042,10,"Вам выпала |c00ff00ffДуша Морина|r",C),$746D7363,20,null,null),$6173626C,20,null,null),$67736F75,20,null,null)
call jN(jN(jN(jN(jM($6E303231),$49303535,10,"Вам выпал |c006969ffКапюшончик|r",C),$49303533,10,"Вам выпал |c006969ffЩиток повиновения|r",C),$49303534,10,"Вам выпала |c006969ffШляпа пирата|r",C),$49304130,100,null,C)
call jN(jM($75303052),$49305258,2,"Вам выпала |c007d7d7dЭссенция Темного Всадника|r",C)
call jN(jN(jM($6E303530),$49305056,50,null,null),$49304753,2,"Вам выпал |c00ff7f00Бронзовый дракон|r",C)
call jN(jN(jN(jM($6E303338),$49303458,10,"Вам выпал |c00ff7f00Элемент Мощи|r",C),$49305043,10,"Вам выпала |c00ff7f00Чума|r",C),$72617466,3,"Вам выпала |c00ff7f00Эссенция пучины|r",C)
call jN(jN(jN(jN(jN(jN(jN(jM($68303548),$64757374,4,"Вам выпал |c00ff00ffКурьер|r",C),$4930534E,50,null,null),$4930535A,7,null,null),$49305354,7,null,null),$49305431,7,null,null),$49305358,7,null,null),$49305356,7,null,null)
call jN(jN(jN(jN(jN(jN(jM($6E303353),$6C676468,10,null,null),$6F646566,10,null,null),$6576746C,10,null,null),$70727674,10,null,null),$72616731,10,null,null),$62737064,10,null,null)
call jN(jN(jN(jM($6E303051),$49303444,100,null,null),$49303445,100,null,null),$49303446,100,null,null)
endfunction
function jd takes nothing returns integer
return M0
endfunction
function je takes integer Mq returns nothing
set Mr[Ms]=Mq
call SaveInteger(Mt,0,Mq,Ms)
set Ms=Ms+1
endfunction
function jf takes integer My returns nothing
set Mz[M0]=My
call SaveInteger(M1,0,My,M0)
set M0=M0+1
endfunction
function jg takes integer Mu returns nothing
set Mv[Mw]=Mu
call SaveInteger(Mx,0,Mu,Mw)
set Mw=Mw+1
endfunction
function jh takes integer Mq returns integer
if HaveSavedInteger(Mt,0,Mq) then
return LoadInteger(Mt,0,Mq)
else
return -1
endif
endfunction
function ji takes integer Mc returns integer
if Mc<Ms then
return Mr[Mc]
else
return -1
endif
endfunction
function jj takes integer Mu returns integer
if HaveSavedInteger(Mx,0,Mu) then
return LoadInteger(Mx,0,Mu)
else
return 0
endif
endfunction
function jk takes integer Mc returns integer
if Mc<Mw then
return Mv[Mc]
else
return 0
endif
endfunction
function jl takes integer Mc returns integer
if Mc<M0 then
return Mz[Mc]
else
return -1
endif
endfunction
function jm takes nothing returns nothing
call je($48303058)
call je($48303046)
call je($48303032)
call je($48303034)
call je($48303033)
call je($4830304C)
call je($48303036)
call je($48303031)
call je($4F303032)
call je($45303043)
call je($4F303030)
call je($45303033)
call je($48303131)
call je($48303147)
call je($4F303034)
call je($4F303036)
call je($5530304B)
call je($48303259)
call je($48303344)
call je($48303356)
call je($4830314B)
call je($48303443)
call je($48303449)
call je($48303353)
call je($4530304B)
call je($4F30304A)
call je($45303057)
call je($48303532)
call je($4F303049)
call je($48303534)
call je($4830344A)
call je($55303130)
call je($48303030)
call je($48303752)
call je($48303547)
call je($55303131)
call je($4830354D)
call je($48303550)
call je($55303130)
call je($4F30304C)
call je($48303437)
call je($4830364E)
call je($4830364F)
call je($48303650)
call je($4F303051)
call je($45303133)
call je($48303651)
call je($48303652)
call je($48303653)
call je($48303654)
call je($48303655)
call je($48303656)
call je($48303657)
call je($55303133)
call je($4F303052)
call je($48303659)
call je($48303730)
call je($48303733)
call je($48303734)
call je($4F303053)
call je($48303735)
call je($48303736)
call je($4F303054)
call je($45303055)
call je($48303738)
call je($48303737)
call je($6E303133)
call je($6E303349)
call je($6E30334B)
call je($6E303348)
call je($6E30334C)
call je($6E30334A)
call je($6E303354)
call je($6E303443)
call je($6E303444)
call je($6E30344A)
call je($6E30344B)
call je($6E303449)
call je($6E303450)
call je($6E303451)
call je($6E303452)
call je($6E303453)
call je($6E303531)
call je($6E303532)
call je($6E303533)
call je($6E303551)
call je($6E303558)
call je($6E303631)
call je($6E303632)
call je($6E30364B)
call je($6E30364F)
call je($6E303741)
call je($6E303742)
call je($6E303743)
call je($6E303744)
call je($6E303745)
call je($6E303746)
call je($6E303747)
call je($6E303748)
call je($6E303752)
call je($6E303830)
call je($6E303831)
call je($6E303832)
call je($6E303833)
call je($6E303834)
call je($6E303835)
call je($30303030)
call je($6E303849)
call je($6E30384B)
call je($6E30384D)
call je($6E30384F)
call je($6E303850)
call je($6E30384E)
call je($6E303852)
call je($6E303853)
call je($6E303851)
call je($6E303854)
call je($48303744)
call je($48303748)
call je($48303749)
call je($4830374B)
call je($4F303055)
call je($4830374F)
endfunction
function jn takes nothing returns nothing
call jf($41314330)
call jf($41314335)
call jf($41314341)
call jf($41314332)
call jf($41305A50)
call jf($41305A59)
call jf($41305A5A)
call jf($41305235)
call jf($41305138)
call jf($41313032)
call jf($41313033)
call jf($41313034)
call jf($41313035)
call jf($41305A51)
call jf($41305A52)
call jf($41305A53)
call jf($41305444)
call jf($41305052)
call jf($41305A56)
call jf($41305A57)
call jf($41305A58)
call jf($41313036)
call jf($41313037)
call jf($41313038)
call jf($41313039)
call jf($41313041)
call jf($41313042)
call jf($41313043)
call jf($41305557)
call jf($41305247)
call jf($31313131)
call jf($4130545A)
call jf($41313059)
call jf($41313058)
call jf($41313357)
call jf($41304B54)
call jf($41304B4E)
call jf($41304B51)
call jf($41304C4E)
call jf($41304C4B)
call jf($41313733)
call jf($41313433)
call jf($41304D42)
call jf($41305A4C)
call jf($41305A4B)
call jf($41305A4A)
call jf($41305035)
call jf($4131354C)
call jf($41305556)
call jf($41314149)
call jf($4131414A)
call jf($41314154)
call jf($41314153)
call jf($41305333)
call jf($41305334)
call jf($41305335)
call jf($41305336)
call jf($41314430)
call jf($41314431)
call jf($41314450)
call jf($41314451)
call jf($41314452)
call jf($4131424E)
call jf($41313141)
call jf($41496432)
call jf($41496433)
call jf($41496434)
call jf($41313234)
call jf($41313247)
call jf($41304D44)
call jf($41304D4A)
call jf($41314254)
call jf($41304635)
call jf($41305045)
call jf($41305046)
call jf($41303944)
call jf($41304739)
call jf($41313747)
call jf($41313746)
call jf($41313745)
call jf($41313954)
call jf($41377475)
call jf($41387475)
call jf($41397475)
call jf($41307475)
call jf($41313175)
call jf($41313275)
call jf($41313375)
endfunction
function jo takes nothing returns nothing
call jg($72617439)
call jg($6C656467)
call jg($6863756E)
call jg($70656E72)
call jg($77617264)
call jg($73707368)
call jg($706D6E61)
call jg($62656C76)
call jg($72617463)
call jg($72617436)
call jg($726C6966)
call jg($72646532)
call jg($72646531)
call jg($72646533)
call jg($636E6F62)
call jg($6763656C)
call jg($636C7364)
call jg($7373696C)
call jg($7374656C)
call jg($62677374)
call jg($6C687374)
call jg($72687468)
call jg($73626368)
call jg($72696E31)
call jg($7277697A)
call jg($6D636F75)
call jg($636C666D)
call jg($63697269)
call jg($77696C64)
call jg($72737431)
call jg($776E6575)
call jg($7370726E)
call jg($62726163)
call jg($73656872)
call jg($6473756D)
call jg($49303441)
call jg($4930355A)
call jg($49303436)
call jg($49305833)
call jg($4930335A)
call jg($4930314B)
call jg($4930314A)
call jg($49303435)
call jg($49303158)
call jg($49305831)
call jg($49305834)
call jg($49305842)
call jg($49305845)
call jg($49305844)
call jg($49305843)
call jg($49305839)
call jg($49305841)
call jg($49305836)
call jg($49305838)
call jg($49305837)
call jg($49305835)
call jg($49305832)
call jg($49305830)
call jg($4930575A)
call jg($49305758)
call jg($49305759)
call jg($49303155)
call jg($49303151)
call jg($49303231)
call jg($49303145)
call jg($49303149)
call jg($49303439)
call jg($49303139)
call jg($49303153)
call jg($49303430)
call jg($4930315A)
call jg($49303234)
call jg($49303152)
call jg($49303230)
call jg($49303432)
call jg($49303235)
call jg($49303434)
call jg($49303143)
call jg($49303554)
call jg($49303148)
call jg($49303438)
call jg($49303142)
call jg($4930314F)
call jg($49303150)
call jg($49303437)
call jg($4930314E)
call jg($49303157)
call jg($49303431)
call jg($49303156)
call jg($49303233)
call jg($4930314D)
call jg($49303146)
call jg($4930314C)
call jg($49303433)
call jg($49303141)
call jg($49303154)
call jg($49303159)
call jg($49303550)
call jg($49303144)
call jg($49303232)
call jg($49303147)
call jg($49303247)
call jg($49304142)
call jg($49304141)
call jg($49303556)
call jg($49303643)
call jg($4930324B)
call jg($49303455)
call jg($4930324A)
call jg($49303236)
call jg($49303245)
call jg($49303246)
call jg($49303244)
call jg($49303641)
call jg($49303445)
call jg($49303452)
call jg($49303248)
call jg($49303242)
call jg($49304145)
call jg($49304144)
call jg($49303249)
call jg($49303454)
call jg($4930345A)
call jg($49303444)
call jg($49303243)
call jg($49304147)
call jg($49304146)
call jg($49303754)
call jg($49303755)
call jg($4930324F)
call jg($49303237)
call jg($49303239)
call jg($49303238)
call jg($49303638)
call jg($49303456)
call jg($49303633)
call jg($49303631)
call jg($4930324C)
call jg($49303457)
call jg($49303458)
call jg($49303446)
call jg($49303459)
call jg($49303758)
call jg($49303759)
call jg($49303448)
call jg($49303250)
call jg($49303449)
call jg($49303756)
call jg($49303757)
call jg($49303447)
call jg($49303451)
call jg($4930324E)
call jg($49303453)
call jg($49303241)
call jg($4930324D)
call jg($49303847)
call jg($4930384A)
call jg($4930375A)
call jg($49303845)
call jg($49303838)
call jg($49303853)
call jg($49303530)
call jg($49303535)
call jg($49303848)
call jg($49303852)
call jg($49303835)
call jg($49303849)
call jg($49303832)
call jg($49303837)
call jg($49303850)
call jg($4930384C)
call jg($4930384F)
call jg($49303532)
call jg($49303834)
call jg($4930384E)
call jg($49303836)
call jg($49303842)
call jg($49303839)
call jg($49303851)
call jg($4930384D)
call jg($49303831)
call jg($4930384B)
call jg($49303833)
call jg($49303531)
call jg($49303830)
call jg($49303843)
call jg($49303846)
call jg($49303841)
call jg($49303534)
call jg($49303533)
call jg($49303844)
call jg($49303559)
call jg($49303555)
call jg($49303553)
call jg($49303632)
call jg($49303630)
call jg($4930354F)
call jg($49303642)
call jg($49303639)
call jg($49303637)
call jg($49303635)
call jg($49303558)
call jg($49303544)
call jg($49304143)
call jg($49303032)
call jg($49303033)
call jg($49303034)
call jg($49303036)
call jg($49303442)
call jg($49303443)
call jg($49303335)
call jg($49303334)
call jg($49303347)
call jg($4930334A)
call jg($49303349)
call jg($49303339)
call jg($49303331)
call jg($49303338)
call jg($49303342)
call jg($49303345)
call jg($49303341)
call jg($49303337)
call jg($49303346)
call jg($49303336)
call jg($49303344)
call jg($49303348)
call jg($49303343)
call jg($49303333)
call jg($49303332)
call jg($49303259)
call jg($49303330)
call jg($49303634)
call jg($49303557)
call jg($49303645)
call jg($4930354C)
call jg($49303655)
call jg($49303738)
call jg($49303749)
call jg($49303948)
call jg($49303950)
call jg($4930364A)
call jg($49303656)
call jg($49303739)
call jg($4930374A)
call jg($49303949)
call jg($49303951)
call jg($49303733)
call jg($4930364E)
call jg($49303741)
call jg($4930374B)
call jg($4930394A)
call jg($49303952)
call jg($49304133)
call jg($49304134)
call jg($49304135)
call jg($49304136)
call jg($49304137)
call jg($49304138)
call jg($49303649)
call jg($49303657)
call jg($49303742)
call jg($4930374C)
call jg($4930394B)
call jg($49303953)
call jg($4930364B)
call jg($49303658)
call jg($49303743)
call jg($4930374D)
call jg($4930394C)
call jg($49303954)
call jg($4930364C)
call jg($49303659)
call jg($49303744)
call jg($4930374E)
call jg($4930394D)
call jg($49303955)
call jg($4930364F)
call jg($4930365A)
call jg($49303745)
call jg($4930374F)
call jg($4930394E)
call jg($49303956)
call jg($4930364D)
call jg($49303730)
call jg($49303746)
call jg($49303750)
call jg($4930394F)
call jg($49303957)
call jg($49303947)
call jg($49303945)
call jg($49303946)
call jg($49303943)
call jg($49303944)
call jg($49303539)
call jg($49303543)
call jg($49303545)
call jg($49303942)
call jg($49303544)
call jg($49303938)
call jg($49303541)
call jg($4930334C)
call jg($4930334B)
call jg($49303537)
call jg($49303350)
call jg($49303538)
call jg($49303941)
call jg($49303937)
call jg($49303536)
call jg($49303542)
call jg($49303546)
call jg($4930334D)
call jg($49303353)
call jg($49303352)
call jg($4930334F)
call jg($49303355)
call jg($49303939)
call jg($49303351)
call jg($4930334E)
call jg($49303354)
call jg($49303549)
call jg($49303548)
call jg($49303547)
call jg($62737064)
call jg($6F646566)
call jg($6576746C)
call jg($70727674)
call jg($6C676468)
call jg($72616731)
call jg($61666163)
call jg($6B70696E)
call jg($63727973)
call jg($616A656E)
call jg($77737764)
call jg($77687764)
call jg($776F6D73)
call jg($706E7675)
call jg($66677267)
call jg($72656A33)
call jg($686C7374)
call jg($706F6D6E)
call jg($776C7364)
call jg($77736873)
call jg($77637963)
call jg($77696C6C)
call jg($49303751)
call jg($6D6E7374)
call jg($49303359)
call jg($49303551)
call jg($49303752)
call jg($49303358)
call jg($4930354E)
call jg($4930354D)
call jg($49303552)
call jg($6667736B)
call jg($73686172)
call jg($66676668)
call jg($73726573)
call jg($73727263)
call jg($696E6673)
call jg($616E6B68)
call jg($73616E64)
call jg($73726F72)
call jg($66676467)
call jg($746F7477)
call jg($70676865)
call jg($70726573)
call jg($70676D61)
call jg($70646976)
call jg($66677264)
call jg($6C6D6272)
call jg($676F6D6E)
call jg($67666F72)
call jg($67757669)
call jg($74706F77)
call jg($74646578)
call jg($74647832)
call jg($74696E32)
call jg($74657870)
call jg($74737472)
call jg($74737432)
call jg($6D616E68)
call jg($72726531)
call jg($4930414F)
call jg($4930414D)
call jg($4930414E)
call jg($49303636)
call jg($49304155)
call jg($49304153)
call jg($49304151)
call jg($49304154)
call jg($49304156)
call jg($49304152)
call jg($49304150)
call jg($6876616C)
call jg($72646973)
call jg($72737064)
call jg($72776174)
call jg($7273706C)
call jg($72726532)
call jg($72686533)
call jg($726D6132)
call jg($72686531)
call jg($72726573)
call jg($72737073)
call jg($72686532)
call jg($726D616E)
call jg($72726562)
call jg($72617466)
call jg($746B6E6F)
call jg($64657363)
call jg($72646534)
call jg($636B6E67)
call jg($6D6F6474)
call jg($6F66726F)
call jg($736E6567)
call jg($706D616E)
call jg($70696E76)
call jg($70636C72)
call jg($74736374)
call jg($74636173)
call jg($6D6F6F6E)
call jg($73696C6B)
call jg($70686561)
call jg($7373616E)
call jg($68736C76)
call jg($73747770)
call jg($7370726F)
call jg($73686561)
call jg($736D616E)
call jg($73726567)
call jg($73686173)
call jg($74677268)
call jg($74726574)
call jg($776E6567)
call jg($726E6563)
call jg($6D637269)
call jg($736B756C)
call jg($76616D70)
call jg($706C636C)
call jg($776F6C67)
call jg($6D67746B)
call jg($646B6677)
call jg($6D6F7274)
call jg($676F6C64)
call jg($49304352)
call jg($49304338)
call jg($49304341)
call jg($49304343)
call jg($49304337)
call jg($49304351)
call jg($49304350)
call jg($4930434F)
call jg($49304339)
call jg($49304336)
call jg($49304342)
call jg($4930434D)
call jg($4930434C)
call jg($4930434E)
call jg($49304248)
call jg($49304331)
call jg($49304330)
call jg($49304232)
call jg($49304235)
call jg($4930424B)
call jg($49304244)
call jg($49304258)
call jg($49304257)
call jg($49304237)
call jg($49304236)
call jg($49304234)
call jg($49304233)
call jg($49304230)
call jg($49304239)
call jg($49303130)
call jg($4930305A)
call jg($49303053)
call jg($49303051)
call jg($4930395A)
call jg($49304252)
call jg($49304251)
call jg($4930425A)
call jg($49304259)
call jg($49304150)
call jg($49304246)
call jg($49304333)
call jg($49304332)
call jg($49304157)
call jg($4930424A)
call jg($49304254)
call jg($49304253)
call jg($4930434B)
call jg($49304231)
call jg($49304255)
call jg($49304256)
call jg($49304245)
call jg($4930424F)
call jg($49304250)
call jg($4930415A)
call jg($49304345)
call jg($49304349)
call jg($49304346)
call jg($4930434A)
call jg($49304347)
call jg($49304348)
call jg($49303737)
call jg($49304334)
call jg($49304335)
call jg($49304247)
call jg($4930424D)
call jg($4930424E)
call jg($49304249)
call jg($49304159)
call jg($49303748)
call jg($49304241)
call jg($49304242)
call jg($49304243)
call jg($49304437)
call jg($49304438)
call jg($49304439)
call jg($49304441)
call jg($4930424C)
call jg($49304358)
call jg($49304442)
call jg($49304446)
call jg($49304445)
call jg($49304458)
call jg($49304457)
call jg($49304353)
call jg($49304431)
call jg($49304448)
call jg($49304447)
call jg($4930445A)
call jg($49304459)
call jg($49304355)
call jg($49304432)
call jg($4930444A)
call jg($49304449)
call jg($49304531)
call jg($49304530)
call jg($49304359)
call jg($49304444)
call jg($4930444C)
call jg($4930444B)
call jg($49304533)
call jg($49304532)
call jg($49304430)
call jg($49304435)
call jg($4930444E)
call jg($4930444D)
call jg($49304535)
call jg($49304534)
call jg($4930435A)
call jg($49304434)
call jg($49304450)
call jg($4930444F)
call jg($49304537)
call jg($49304536)
call jg($49304354)
call jg($49304436)
call jg($49304452)
call jg($49304451)
call jg($49304539)
call jg($49304538)
call jg($49304356)
call jg($49304433)
call jg($49304454)
call jg($49304453)
call jg($49304542)
call jg($49304541)
call jg($49304357)
call jg($49304443)
call jg($49304456)
call jg($49304455)
call jg($49304544)
call jg($49304543)
call jg($49304158)
call jg($49304545)
call jg($49304546)
call jg($49304547)
call jg($49304548)
call jg($49304549)
call jg($4930454A)
call jg($4930454B)
call jg($4930454C)
call jg($4930454D)
call jg($4930454E)
call jg($4930474B)
call jg($49304750)
call jg($49304751)
call jg($4930474C)
call jg($49304755)
call jg($49304754)
call jg($49304756)
call jg($49304758)
call jg($4930474F)
call jg($49304757)
call jg($49304832)
call jg($49304830)
call jg($49304759)
call jg($4930475A)
call jg($49304831)
call jg($49304458)
call jg($49304457)
call jg($49304633)
call jg($49304457)
call jg($4930464C)
call jg($49304643)
call jg($49304741)
call jg($49304659)
call jg($4930445A)
call jg($49304459)
call jg($4930464D)
call jg($49304644)
call jg($49304742)
call jg($4930465A)
call jg($49304531)
call jg($49304530)
call jg($4930464E)
call jg($49304645)
call jg($49304743)
call jg($49304730)
call jg($49304737)
call jg($49304658)
call jg($49304533)
call jg($49304532)
call jg($4930464F)
call jg($49304646)
call jg($49304744)
call jg($49304731)
call jg($49304535)
call jg($49304534)
call jg($49304650)
call jg($49304647)
call jg($49304745)
call jg($49304732)
call jg($49304537)
call jg($49304536)
call jg($49304651)
call jg($49304648)
call jg($49304746)
call jg($49304733)
call jg($49304657)
call jg($49304539)
call jg($49304538)
call jg($49304652)
call jg($49304649)
call jg($49304747)
call jg($49304734)
call jg($49304542)
call jg($49304541)
call jg($49304653)
call jg($4930464A)
call jg($49304748)
call jg($49304735)
call jg($49304544)
call jg($49304543)
call jg($49304654)
call jg($4930464B)
call jg($49304749)
call jg($49304736)
call jg($49304249)
call jg($49304159)
call jg($49304656)
call jg($49303646)
call jg($4930454F)
call jg($49304655)
call jg($4930474D)
call jg($4930474E)
call jg($49304738)
call jg($49304551)
call jg($49304552)
call jg($49304553)
call jg($49304550)
call jg($49304953)
call jg($49304954)
call jg($49304955)
call jg($49304956)
call jg($4930494F)
call jg($49304950)
call jg($4930494D)
call jg($4930494E)
call jg($49304951)
call jg($49304952)
call jg($49304948)
call jg($4930494B)
call jg($49304949)
call jg($4930494C)
call jg($49304947)
call jg($4930494A)
call jg($49304849)
call jg($4930484A)
call jg($4930484B)
call jg($4930484C)
call jg($4930484D)
call jg($4930484E)
call jg($4930484F)
call jg($49304939)
call jg($49304937)
call jg($49304938)
call jg($49304853)
call jg($49304854)
call jg($49304855)
call jg($49304943)
call jg($49304944)
call jg($49304942)
call jg($49304945)
call jg($49304941)
call jg($49304946)
call jg($49304856)
call jg($49304857)
call jg($49304852)
call jg($49304931)
call jg($49304932)
call jg($49304933)
call jg($49304934)
call jg($49303650)
call jg($49304936)
call jg($49304858)
call jg($49304859)
call jg($49304851)
call jg($49304836)
call jg($49304838)
call jg($49304837)
call jg($49304835)
call jg($49304930)
call jg($49304850)
call jg($49304957)
call jg($4930485A)
call jg($49304739)
call jg($49304A32)
call jg($49304A33)
call jg($49304A34)
call jg($49304A35)
call jg($49304A36)
call jg($49304A37)
call jg($49304A38)
call jg($49304A39)
call jg($49304A41)
call jg($49304A42)
call jg($49304A43)
call jg($49304A44)
call jg($49304A4F)
call jg($49304A56)
call jg($49304B38)
call jg($49304A57)
call jg($49304B39)
call jg($49304A58)
call jg($49304B43)
call jg($49304A59)
call jg($49304B44)
call jg($49304A5A)
call jg($49304B30)
call jg($49304B31)
call jg($49304B32)
call jg($49304B33)
call jg($49304B34)
call jg($49304B35)
call jg($49304B36)
call jg($49304B41)
call jg($49304B37)
call jg($49304B45)
call jg($49304B42)
call jg($49304A52)
call jg($49304B46)
call jg($49304B47)
call jg($49304B54)
call jg($49304B55)
call jg($49304B52)
call jg($49304B53)
call jg($49304B4E)
call jg($49304B4F)
call jg($49304B48)
call jg($49304B4A)
call jg($49304B49)
call jg($49304B50)
call jg($49304B4C)
call jg($49304B4B)
call jg($49304B4D)
call jg($49304B51)
call jg($49304B56)
call jg($49304C41)
call jg($49304C38)
call jg($49304C43)
call jg($49304C37)
call jg($49304C42)
call jg($49304C39)
call jg($49304C36)
call jg($49304C32)
call jg($49304C33)
call jg($49304C34)
call jg($49304C35)
call jg($49304C46)
call jg($49304C47)
call jg($49304C48)
call jg($49304C49)
call jg($49304C4A)
call jg($49304C4B)
call jg($49304C4D)
call jg($49304C4C)
call jg($49304D48)
call jg($49304D49)
call jg($49304D4A)
call jg($49304D4B)
call jg($49304D4C)
call jg($49304D4D)
call jg($49304D4E)
call jg($49304D4F)
call jg($49304D51)
call jg($49304D52)
call jg($49304D53)
call jg($49304D54)
call jg($49304D55)
call jg($49304D56)
call jg($49304D57)
call jg($49304D58)
call jg($49304D59)
call jg($49304D5A)
call jg($49304E30)
call jg($49304E31)
call jg($49304E32)
call jg($49304E33)
call jg($49304E34)
call jg($49304E35)
call jg($49304E36)
call jg($49304E37)
call jg($49304E38)
call jg($49304E39)
call jg($49304E41)
call jg($49304E42)
call jg($49304D47)
call jg($49303049)
call jg($4930304C)
call jg($49304E45)
call jg($49304739)
call jg($49304E43)
call jg($49304E44)
call jg($49304E46)
call jg($49304E47)
call jg($49304E48)
call jg($49304E4A)
call jg($49304E49)
call jg($49304E53)
call jg($49304E56)
call jg($49304E55)
call jg($49304E54)
call jg($49304E4E)
call jg($49304E51)
call jg($49304E58)
call jg($49304E4B)
call jg($49304E4C)
call jg($49304E4F)
call jg($49304E52)
call jg($49304E57)
call jg($49304E59)
call jg($49304E50)
call jg($49304E4D)
call jg($49304E5A)
call jg($49304F44)
call jg($49304F45)
call jg($49304F42)
call jg($49304F36)
call jg($49304F37)
call jg($49304F38)
call jg($49304F39)
call jg($49304F41)
call jg($49304F43)
call jg($49304F30)
call jg($49304F31)
call jg($49304F32)
call jg($49304F33)
call jg($49304F49)
call jg($49304F48)
call jg($49304F34)
call jg($49304F35)
call jg($49304F46)
call jg($49304F47)
call jg($49304F4B)
call jg($49304F4C)
call jg($49304F53)
call jg($49304F54)
call jg($49304F4D)
call jg($49304F4E)
call jg($49304F4F)
call jg($49304F50)
call jg($49304F56)
call jg($49304F55)
call jg($49304F51)
call jg($49304F52)
call jg($49304F58)
call jg($49304F57)
call jg($49304F59)
call jg($49304F5A)
call jg($49305030)
call jg($49305031)
call jg($49305032)
call jg($49305033)
call jg($49305034)
call jg($49305035)
call jg($49305036)
call jg($49305037)
call jg($49305038)
call jg($49305039)
call jg($49305041)
call jg($49305042)
call jg($49305043)
call jg($49305044)
call jg($49305045)
call jg($49305046)
call jg($49305047)
call jg($49305048)
call jg($49305049)
call jg($4930504A)
call jg($49305056)
call jg($49305055)
call jg($49305057)
call jg($49305058)
call jg($4930505A)
call jg($49305059)
call jg($49305131)
call jg($49305130)
call jg($49305132)
call jg($49305133)
call jg($49305138)
call jg($49305139)
call jg($49305141)
call jg($49305142)
call jg($49305143)
call jg($49305144)
call jg($49305134)
call jg($49305135)
call jg($49305136)
call jg($49305137)
call jg($49305145)
call jg($49305146)
call jg($49305147)
call jg($49305148)
call jg($49305149)
call jg($4930514A)
call jg($4930514B)
call jg($4930514D)
call jg($4930514C)
call jg($4930514F)
call jg($49305152)
call jg($49305153)
call jg($49305154)
call jg($49305155)
call jg($49305156)
call jg($49305157)
call jg($49305158)
call jg($49305159)
call jg($4930515A)
call jg($49305230)
call jg($49305231)
call jg($49305232)
call jg($49305233)
call jg($49305234)
call jg($49305235)
call jg($49305239)
call jg($49305238)
call jg($49305246)
call jg($49305243)
call jg($49305244)
call jg($49305241)
call jg($49305242)
call jg($49305245)
call jg($49305247)
call jg($49305248)
call jg($656E6773)
call jg($73687764)
call jg($49305249)
call jg($4930524C)
call jg($4930524A)
call jg($4930524B)
call jg($49304256)
call jg($49305252)
call jg($4930524E)
call jg($49305251)
call jg($49305250)
call jg($4930524F)
call jg($49305256)
call jg($49305257)
call jg($49305258)
call jg($49305259)
call jg($4930525A)
call jg($49305330)
call jg($49305331)
call jg($49305332)
call jg($49305333)
call jg($49305334)
call jg($49305335)
call jg($49305336)
call jg($49305337)
call jg($49305338)
call jg($49305339)
call jg($49305341)
call jg($49305342)
call jg($49305343)
call jg($49305344)
call jg($49305347)
call jg($49305346)
call jg($49305345)
call jg($4930534A)
call jg($49305349)
call jg($4930534D)
call jg($4930534C)
call jg($4930534B)
call jg($4930534F)
call jg($4930534E)
call jg($49305350)
call jg($49305351)
call jg($49305352)
call jg($49305353)
call jg($4930535A)
call jg($49305430)
call jg($49305355)
call jg($49305354)
call jg($49305431)
call jg($49305432)
call jg($49305359)
call jg($49305358)
call jg($49305356)
call jg($49305357)
call jg($49305433)
call jg($49305434)
call jg($49305435)
call jg($49305436)
call jg($49305437)
call jg($49305438)
call jg($49305439)
call jg($676F7072)
call jg($6B336D33)
call jg($6B796768)
call jg($64746862)
call jg($736B7274)
call jg($6B79626C)
call jg($6B796D6E)
call jg($6B336D31)
call jg($77746C67)
call jg($70686C74)
call jg($736F7266)
call jg($49305441)
call jg($49305442)
call jg($49305443)
call jg($49305444)
call jg($49305445)
call jg($49305446)
call jg($49305447)
call jg($49305448)
call jg($49305449)
call jg($676D6672)
call jg($4930544A)
call jg($4930544E)
call jg($4930544C)
call jg($4930544D)
call jg($4930544B)
call jg($49305532)
call jg($49305533)
call jg($49305534)
call jg($49305535)
call jg($49305536)
call jg($49305537)
call jg($49305538)
call jg($49305539)
call jg($49305541)
call jg($49305542)
call jg($49305543)
call jg($49305544)
call jg($49305545)
call jg($49305546)
call jg($49305548)
call jg($49305547)
call jg($49305551)
call jg($49305552)
call jg($49305554)
call jg($49305553)
call jg($4930554F)
call jg($49305550)
call jg($49304A51)
call jg($49303257)
call jg($49303251)
call jg($49303253)
call jg($49303858)
call jg($49303255)
call jg($4930344F)
call jg($49305531)
call jg($49303859)
call jg($49304A50)
call jg($49303254)
call jg($49303256)
call jg($49303450)
call jg($49303258)
call jg($49305638)
call jg($49305639)
call jg($49305630)
call jg($49305631)
call jg($49305632)
call jg($49305633)
call jg($49305634)
call jg($49305635)
call jg($49305636)
call jg($49305637)
call jg($4930555A)
call jg($49305559)
call jg($49305555)
call jg($49305556)
call jg($49305557)
call jg($49305558)
call jg($63686573)
call jg($6A706E74)
call jg($627A6266)
call jg($627A6265)
call jg($636E686E)
call jg($73636C70)
call jg($617A6872)
call jg($6B79736E)
call jg($6B74726D)
call jg($4930564A)
call jg($4930564B)
call jg($49305651)
call jg($49305650)
call jg($4930564F)
call jg($4930564E)
call jg($49305656)
call jg($49305653)
call jg($49305654)
call jg($49305655)
call jg($49305658)
call jg($49305659)
call jg($49305657)
call jg($49305656)
call jg($4930565A)
call jg($49305734)
call jg($49305734)
call jg($49305735)
call jg($49305736)
call jg($49305737)
call jg($49305738)
call jg($49305739)
call jg($49305734)
call jg($49305741)
call jg($49305742)
call jg($49305743)
call jg($49305744)
call jg($49305746)
call jg($49305745)
call jg($49305747)
call jg($49305748)
call jg($49305749)
call jg($4930574A)
call jg($4930574B)
call jg($4930574C)
call jg($4930574D)
call jg($4930574E)
call jg($4930574F)
call jg($49305750)
call jg($49305751)
call jg($49305752)
call jg($49305753)
call jg($706E766C)
call jg($6B336D32)
call jg($676C736B)
call jg($74686C65)
call jg($64706865)
call jg($616D7263)
call jg($70616D73)
call jg($61727368)
call jg($73747761)
call jg($72617433)
call jg($4930584C)
call jg($4930584D)
call jg($4930584A)
call jg($4930584B)
call jg($6B67616C)
call jg($62726167)
call jg($69776272)
call jg($656E766C)
call jg($676F626D)
call jg($74656C73)
call jg($7468646D)
call jg($7372746C)
call jg($626C6261)
call jg($616E6667)
call jg($736F756C)
call jg($6573617A)
call jg($7363686C)
call jg($726F7473)
call jg($73747067)
call jg($7368656E)
call jg($70737064)
call jg($736B7368)
call jg($666C6167)
call jg($4930584F)
call jg($49305850)
call jg($49305851)
call jg($49305852)
call jg($49305853)
call jg($49305854)
call jg($49305846)
call jg($49305855)
call jg($49305856)
call jg($49305857)
call jg($49305858)
call jg($49305859)
call jg($4930585A)
call jg($49305930)
call jg($49305956)
call jg($49305957)
call jg($49305958)
call jg($49305955)
call jg($49305941)
call jg($49305954)
call jg($4930595A)
call jg($49305959)
call jg($49305A30)
call jg($49305A31)
call jg($49305939)
call jg($49305A32)
call jg($49305A37)
call jg($49305A36)
call jg($49305A34)
call jg($49305A33)
call jg($49305938)
call jg($49305A35)
call jg($49305932)
call jg($49305933)
call jg($49305934)
call jg($49305935)
call jg($49305936)
call jg($49305931)
call jg($49305A38)
call jg($49305A39)
call jg($49305A41)
call jg($49305A42)
call jg($49305A43)
call jg($49305A44)
call jg($49305A45)
call jg($49305A46)
call jg($49305A47)
call jg($49305A48)
call jg($49305A49)
call jg($49305A4A)
call jg($49305A4B)
call jg($49305A4C)
call jg($49305A4D)
call jg($49305A50)
call jg($49305A4F)
call jg($49305A4E)
call jg($75666C67)
call jg($6E666C67)
call jg($6F666C67)
call jg($62747374)
call jg($7462736D)
call jg($746C756D)
call jg($49305A51)
call jg($49305A52)
call jg($4930594C)
call jg($49305947)
call jg($49305949)
call jg($49305946)
call jg($49305948)
call jg($4930594A)
call jg($4930594B)
call jg($4930594D)
call jg($4930594E)
call jg($49305942)
call jg($49305944)
call jg($4930594F)
call jg($49305950)
call jg($49305956)
call jg($49305957)
call jg($49305A5A)
call jg($49313030)
call jg($49305951)
call jg($49305952)
call jg($49305A59)
call jg($49305A58)
call jg($49313031)
call jg($49305937)
call jg($49305953)
call jg($49305945)
call jg($74666172)
call jg($64747362)
call jg($746D7363)
call jg($67656D74)
call jg($6173626C)
call jg($7462616B)
call jg($67736F75)
call jg($49313039)
call jg($49313038)
call jg($49304630)
call jg($49304642)
call jg($4930455A)
call jg($49304641)
call jg($49304631)
call jg($49304639)
call jg($49304559)
call jg($49304638)
call jg($49304558)
call jg($49304637)
call jg($49304632)
call jg($49304636)
call jg($49304557)
call jg($49304635)
call jg($49304556)
call jg($49304634)
call jg($49304555)
call jg($49304633)
call jg($74626172)
call jg($49313049)
call jg($4931304A)
call jg($4931304C)
call jg($4931304B)
call jg($4931304D)
call jg($4931304E)
call jg($4931304F)
call jg($49313050)
call jg($49304752)
call jg($49305A56)
call jg($49305A57)
call jg($49304A54)
call jg($6772736C)
call jg($73626F6B)
call jg($73686377)
call jg($72616D34)
call jg($49305050)
call jg($4930554A)
call jg($49305053)
call jg($49313051)
call jg($49304C5A)
call jg($49304D34)
call jg($49305348)
call jg($49304C58)
call jg($49304554)
call jg($49304D37)
call jg($49304834)
call jg($49304D35)
call jg($49305054)
call jg($49304D38)
call jg($49305847)
call jg($49304C59)
call jg($49303048)
call jg($49304958)
call jg($49313054)
call jg($72646530)
call jg($6C6E726E)
call jg($726E7370)
call jg($6A64726E)
call jg($63726474)
call jg($6B6C6D6D)
call jg($7664646C)
call jg($66726764)
call jg($64727068)
call jg($6D6C7374)
call jg($73726264)
call jg($6E737069)
call jg($72656A31)
call jg($49313148)
call jg($49313146)
call jg($49313144)
call jg($49313142)
call jg($49313139)
call jg($49313137)
call jg($49313135)
call jg($49313133)
call jg($49313131)
call jg($4931305A)
call jg($49313058)
call jg($49313056)
call jg($49313147)
call jg($49313145)
call jg($49313143)
call jg($49313141)
call jg($49313138)
call jg($49313136)
call jg($49313134)
call jg($49313132)
call jg($49313130)
call jg($49313059)
call jg($49313057)
call jg($49313055)
call jg($6667756E)
call jg($4930504F)
call jg($49305051)
call jg($49305052)
call jg($73747265)
call jg($6C757265)
call jg($72756D70)
call jg($73666F67)
call jg($73707265)
call jg($49305453)
call jg($6D6E7366)
call jg($61786173)
call jg($49313150)
call jg($49313154)
call jg($49313152)
call jg($49313157)
call jg($49313156)
call jg($49313153)
call jg($49313155)
call jg($4931314C)
call jg($49313151)
call jg($4931314D)
call jg($4931314E)
call jg($4931314F)
call jg($49313158)
endfunction
function jp takes nothing returns nothing
call jm()
call jo()
call jn()
endfunction
function jq takes string M7,integer MC returns string
return SubString(M7,MC,MC+1)
endfunction
function jr takes integer M3 returns nothing
local string M6=""
local integer M5=StringLength(M4)
local integer MC=0
loop
exitwhen not (MC+M3<M5)
set M6=M6+jq(M4,MC+M3)
set MC=MC+1
endloop
loop
exitwhen not (MC<M5)
set M6=M6+jq(M4,MC+M3-M5)
set MC=MC+1
endloop
set M4=M6
endfunction
function js takes nothing returns nothing
set M2=2
call BJDebugMsg("11")
call jr(M2)
endfunction
function jt takes integer MF,integer MG returns integer
return MF-MG*(MF/MG)
endfunction
function ju takes string M7 returns integer
local integer MC=0
local integer M5=StringLength(M4)
loop
exitwhen not (MC<M5)
if M7==jq(M4,MC) then
return MC
endif
set MC=MC+1
endloop
return MC
endfunction
function jv takes integer MF,integer Of,string Nb returns string
local integer MC=0
local string Oh=""
local integer Og=StringLength(Nb)
loop
exitwhen not (MC<Of)
set MC=MC+1
set Oh=Oh+jq(Nb,jt(MF,Og))
set MF=MF/Og
endloop
return Oh
endfunction
function jw takes integer MF,integer Of returns string
return jv(MF,Of,M4)
endfunction
function jx takes string MF,string Nb returns integer
local integer MC=0
local integer Oh=0
local integer O0=1
local integer Og=StringLength(Nb)
loop
exitwhen not (MC<StringLength(MF))
set Oh=Oh+O0*ju(jq(MF,MC))
set O0=O0*Og
set MC=MC+1
endloop
return Oh
endfunction
function jy takes string MF returns integer
return jx(MF,M4)
endfunction
function jz takes nothing returns nothing
local trigger He
if GetUnitState(KT,UNIT_STATE_LIFE)>225 then
set M2=11
call jr(M2)
else
call jr(M2)
endif
set He=CreateTrigger()
call TriggerRegisterPlayerChatEvent(He,Player(0),"-1232132132321321",false)
call TriggerAddAction(He,function js)
set He=null
endfunction
function j4 takes nothing returns nothing
local integer MC=0
loop
exitwhen MC==8192 or M9[MC]==null
if TriggerEvaluate(M9[MC]) then
call TriggerExecute(M9[MC])
endif
set MC=MC+1
endloop
endfunction
function j5 takes nothing returns nothing
local integer MC=0
loop
exitwhen MC==8192 or NC[MC]==null
if TriggerEvaluate(NC[MC]) then
call TriggerExecute(NC[MC])
endif
set MC=MC+1
endloop
endfunction
function j6 takes nothing returns nothing
call TriggerAddAction(M8,function j4)
call TriggerAddAction(NB,function j5)
endfunction
function j7 takes unit Hw,item MQ,integer NH,integer NI,integer NJ returns nothing
if GetItemTypeId(MQ)==NH then
call SetItemUserData(MQ,GetPlayerId(GetOwningPlayer(Hw))+1)
if NI>0 then
set NK[GetPlayerId(GetOwningPlayer(Hw))+1]=NK[GetPlayerId(GetOwningPlayer(Hw))+1]-NI
endif
if NJ>0 then
set NL[GetPlayerId(GetOwningPlayer(Hw))+1]=NL[GetPlayerId(GetOwningPlayer(Hw))+1]-NJ
endif
endif
endfunction
function j8 takes nothing returns nothing
local unit Hw=GetBuyingUnit()
local unit NF=GetTriggerUnit()
local item MQ=GetSoldItem()
local location Hv
set NG=false
call SetItemUserData(MQ,GetPlayerId(GetOwningPlayer(GetBuyingUnit()))+1)
if GetItemTypeId(MQ)==$49305733 then
call CreateUnitAtLoc(GetOwningPlayer(Hw),$68646573,Location(5809,3450),0)
endif
call j7(Hw,MQ,$49305733,30000,0)
call j7(Hw,MQ,$4930584E,150000,6000)
call j7(Hw,MQ,$4930375A,300000,0)
call j7(Hw,MQ,$49305535,0,6000)
call j7(Hw,MQ,$49305533,0,6000)
call j7(Hw,MQ,$49305539,0,6000)
call j7(Hw,MQ,$49305537,0,6000)
call j7(Hw,MQ,$49305542,0,6000)
call j7(Hw,MQ,$49305546,0,6000)
call j7(Hw,MQ,$49305548,0,6000)
call j7(Hw,MQ,$49305547,0,6000)
call j7(Hw,MQ,$49305630,0,6000)
call j7(Hw,MQ,$49305632,0,6000)
call j7(Hw,MQ,$49305636,0,6000)
call j7(Hw,MQ,$49305634,0,6000)
call j7(Hw,MQ,$49305559,0,6000)
call j7(Hw,MQ,$49305556,0,6000)
call j7(Hw,MQ,$49305557,0,6000)
call j7(Hw,MQ,$49305A45,0,6000)
call j7(Hw,MQ,$49304E45,0,6000)
call j7(Hw,MQ,$49304D50,0,6000)
call j7(Hw,MQ,$4930375A,0,6000)
call j7(Hw,MQ,$49305944,0,6000)
call j7(Hw,MQ,$49305950,0,6000)
call j7(Hw,MQ,$49305A57,0,6000)
call j7(Hw,MQ,$49305A5A,0,6000)
call j7(Hw,MQ,$49305952,0,6000)
call j7(Hw,MQ,$49305A58,0,6000)
call j7(Hw,MQ,$49305937,0,6000)
call j7(Hw,MQ,$49305945,0,6000)
call j7(Hw,MQ,$4930594E,0,6000)
call j7(Hw,MQ,$4930594B,0,6000)
call j7(Hw,MQ,$49305949,0,6000)
call j7(Hw,MQ,$49305948,0,6000)
call j7(Hw,MQ,$4930594C,0,6000)
call j7(Hw,MQ,$49304E56,2400,30)
call j7(Hw,MQ,$49304E54,2400,30)
call j7(Hw,MQ,$49304E58,2400,30)
call j7(Hw,MQ,$49304E57,2400,30)
call j7(Hw,MQ,$49304E59,2400,30)
call j7(Hw,MQ,$49304836,0,1500)
call j7(Hw,MQ,$49304838,0,1500)
call j7(Hw,MQ,$49304837,0,1500)
call j7(Hw,MQ,$49304835,0,1500)
call j7(Hw,MQ,$49304F58,0,1500)
call j7(Hw,MQ,$49304F57,0,1500)
call j7(Hw,MQ,$49304955,0,1500)
call j7(Hw,MQ,$49304956,0,1500)
call j7(Hw,MQ,$49304833,0,1500)
call j7(Hw,MQ,$49303458,0,1500)
call j7(Hw,MQ,$49303453,0,1500)
call j7(Hw,MQ,$4930324B,0,1500)
call j7(Hw,MQ,$49303154,0,1500)
call j7(Hw,MQ,$49304950,48000,1200)
call j7(Hw,MQ,$4930494E,48000,1200)
call j7(Hw,MQ,$49304946,48000,1200)
call j7(Hw,MQ,$49304945,48000,1200)
call j7(Hw,MQ,$49305030,48000,1200)
call j7(Hw,MQ,$49304B47,48000,1200)
call j7(Hw,MQ,$49305049,48000,1200)
call j7(Hw,MQ,$49305032,48000,1200)
call j7(Hw,MQ,$49305036,48000,1200)
call j7(Hw,MQ,$49305034,48000,1200)
call j7(Hw,MQ,$49305242,48000,1200)
call j7(Hw,MQ,$49305246,48000,1200)
call j7(Hw,MQ,$726F7473,48000,1200)
call j7(Hw,MQ,$70737064,48000,1200)
call j7(Hw,MQ,$73747067,48000,1200)
call j7(Hw,MQ,$736B7368,48000,1200)
call j7(Hw,MQ,$49305244,48000,1200)
call j7(Hw,MQ,$49305047,48000,1200)
call j7(Hw,MQ,$7368656E,48000,1200)
call j7(Hw,MQ,$49305045,48000,1200)
call j7(Hw,MQ,$49304932,48000,1200)
call j7(Hw,MQ,$4930434F,48000,1200)
call j7(Hw,MQ,$666C6167,48000,1200)
call j7(Hw,MQ,$49304350,48000,1200)
call j7(Hw,MQ,$49304351,48000,1200)
call j7(Hw,MQ,$49304934,48000,1200)
call j7(Hw,MQ,$49304936,48000,1200)
call j7(Hw,MQ,$49304938,48000,1200)
call j7(Hw,MQ,$49304952,48000,1200)
call j7(Hw,MQ,$49304944,48000,1200)
call j7(Hw,MQ,$4931304B,48000,1200)
call j7(Hw,MQ,$4931304A,48000,1200)
call j7(Hw,MQ,$49304849,6000,90)
call j7(Hw,MQ,$49305145,6000,90)
call j7(Hw,MQ,$49304C46,6000,90)
call j7(Hw,MQ,$49304548,6000,90)
call j7(Hw,MQ,$49303558,6000,90)
call j7(Hw,MQ,$4930364C,6000,90)
call j7(Hw,MQ,$4930354C,6000,90)
call j7(Hw,MQ,$746B6E6F,6000,90)
call j7(Hw,MQ,$4930364B,6000,90)
call j7(Hw,MQ,$4930364D,6000,90)
call j7(Hw,MQ,$4930364F,6000,90)
call j7(Hw,MQ,$49304A37,6000,90)
call j7(Hw,MQ,$49305A47,6000,90)
call j7(Hw,MQ,$49304D48,6000,90)
call j7(Hw,MQ,$49304F42,6000,90)
call j7(Hw,MQ,$49303649,6000,90)
call j7(Hw,MQ,$49304F31,6000,90)
call j7(Hw,MQ,$49304F33,6000,90)
call j7(Hw,MQ,$49304F48,6000,90)
call j7(Hw,MQ,$49304F35,6000,90)
call j7(Hw,MQ,$73626368,6000,90)
call j7(Hw,MQ,$74696E32,6000,90)
call j7(Hw,MQ,$4930364A,6000,90)
call j7(Hw,MQ,$706D6E61,6000,90)
call j7(Hw,MQ,$77617264,6000,90)
call j7(Hw,MQ,$6A706E74,6000,90)
call j7(Hw,MQ,$4930304B,6000,90)
call j7(Hw,MQ,$49304133,6000,90)
call j7(Hw,MQ,$49303032,6000,90)
call j7(Hw,MQ,$49304F47,6000,90)
call j7(Hw,MQ,$72617436,6000,90)
call j7(Hw,MQ,$49305441,6000,90)
call j7(Hw,MQ,$61666163,6000,90)
call j7(Hw,MQ,$49303733,6000,90)
call j7(Hw,MQ,$49305932,6000,90)
call j7(Hw,MQ,$706D616E,6000,90)
call j7(Hw,MQ,$72646973,6000,90)
call j7(Hw,MQ,$72686531,6000,90)
call j7(Hw,MQ,$6763656C,6000,90)
call j7(Hw,MQ,$49304E4E,750,0)
call j7(Hw,MQ,$49304E4B,750,0)
call j7(Hw,MQ,$49304E4C,750,0)
call j7(Hw,MQ,$49304E4F,750,0)
call j7(Hw,MQ,$49304E4D,750,0)
call j7(Hw,MQ,$49304D45,90000,3600)
call j7(Hw,MQ,$4930564C,90000,3600)
call j7(Hw,MQ,$49304D47,1500,15)
call j7(Hw,MQ,$49304D32,60000,1500)
call j7(Hw,MQ,$49305A51,60000,150)
call j7(Hw,MQ,$49304C38,105000,6000)
call j7(Hw,MQ,$49305038,105000,6000)
call j7(Hw,MQ,$49304C43,105000,6000)
call j7(Hw,MQ,$49305041,105000,6000)
call j7(Hw,MQ,$49304C39,105000,6000)
call j7(Hw,MQ,$4931304E,105000,6000)
call j7(Hw,MQ,$49304B51,225000,1800)
call j7(Hw,MQ,$49304B48,0,1050)
call j7(Hw,MQ,$49304B4A,0,1050)
call j7(Hw,MQ,$49304B49,0,1050)
call j7(Hw,MQ,$49304A53,45000,1500)
call j7(Hw,MQ,$49304A49,45000,1800)
call j7(Hw,MQ,$4930564D,45000,1800)
call j7(Hw,MQ,$49304A46,105000,3000)
call j7(Hw,MQ,$49304A47,105000,3000)
call j7(Hw,MQ,$49304A48,105000,3000)
call j7(Hw,MQ,$49304A45,105000,3000)
call j7(Hw,MQ,$49305848,105000,3000)
call j7(Hw,MQ,$49305849,105000,3000)
call j7(Hw,MQ,$49303947,0,600)
call j7(Hw,MQ,$49303945,0,600)
call j7(Hw,MQ,$49303946,0,600)
call j7(Hw,MQ,$49303944,0,600)
call j7(Hw,MQ,$49303943,0,600)
call j7(Hw,MQ,$49303545,0,450)
call j7(Hw,MQ,$49303544,0,450)
call j7(Hw,MQ,$49303543,0,450)
call j7(Hw,MQ,$49303546,0,450)
call j7(Hw,MQ,$49303938,0,450)
call j7(Hw,MQ,$49303941,0,450)
call j7(Hw,MQ,$49303942,0,450)
call j7(Hw,MQ,$49303937,0,450)
call j7(Hw,MQ,$49303939,0,450)
call j7(Hw,MQ,$49303542,0,450)
call j7(Hw,MQ,$49303353,0,375)
call j7(Hw,MQ,$49303352,0,375)
call j7(Hw,MQ,$49303354,0,375)
call j7(Hw,MQ,$49303539,0,375)
call j7(Hw,MQ,$49303537,0,375)
call j7(Hw,MQ,$49303541,0,375)
call j7(Hw,MQ,$49303538,0,375)
call j7(Hw,MQ,$49303536,0,375)
call j7(Hw,MQ,$49303456,0,375)
call j7(Hw,MQ,$4930334C,0,300)
call j7(Hw,MQ,$4930334B,0,300)
call j7(Hw,MQ,$4930334D,0,300)
call j7(Hw,MQ,$4930534B,0,300)
call j7(Hw,MQ,$49303355,0,300)
call j7(Hw,MQ,$49303351,0,300)
call j7(Hw,MQ,$4930334E,0,300)
call j7(Hw,MQ,$49303350,0,300)
call j7(Hw,MQ,$4930334F,0,300)
call j7(Hw,MQ,$49303345,0,225)
call j7(Hw,MQ,$49303344,0,225)
call j7(Hw,MQ,$49303343,0,225)
call j7(Hw,MQ,$49303347,0,225)
call j7(Hw,MQ,$49303349,0,225)
call j7(Hw,MQ,$49303346,0,225)
call j7(Hw,MQ,$4930334A,0,225)
call j7(Hw,MQ,$49303348,0,225)
call j7(Hw,MQ,$49305349,0,225)
call j7(Hw,MQ,$49303335,0,150)
call j7(Hw,MQ,$49303334,0,150)
call j7(Hw,MQ,$49303336,0,150)
call j7(Hw,MQ,$49303339,0,150)
call j7(Hw,MQ,$49303342,0,150)
call j7(Hw,MQ,$49303338,0,150)
call j7(Hw,MQ,$49303337,0,150)
call j7(Hw,MQ,$49303341,0,150)
call j7(Hw,MQ,$49305345,0,150)
call j7(Hw,MQ,$49303331,0,75)
call j7(Hw,MQ,$49303333,0,75)
call j7(Hw,MQ,$49303332,0,75)
call j7(Hw,MQ,$49303259,0,75)
call j7(Hw,MQ,$49303330,0,75)
call j7(Hw,MQ,$4930494C,27000,600)
call j7(Hw,MQ,$4930494A,27000,600)
call j7(Hw,MQ,$4930494B,27000,600)
call j7(Hw,MQ,$4930545A,27000,600)
call j7(Hw,MQ,$49305459,27000,600)
call j7(Hw,MQ,$49305458,27000,600)
call j7(Hw,MQ,$49303358,150,0)
call j7(Hw,MQ,$4930354E,150,0)
call j7(Hw,MQ,$49303359,300,0)
call j7(Hw,MQ,$49303551,300,0)
call j7(Hw,MQ,$49305253,300,0)
call j7(Hw,MQ,$4930354D,450,0)
call j7(Hw,MQ,$49303552,450,0)
call j7(Hw,MQ,$49303752,1500,0)
call j7(Hw,MQ,$49303751,1500,0)
call j7(Hw,MQ,$49305254,1500,0)
call j7(Hw,MQ,$616A656E,2700,60)
call j7(Hw,MQ,$49304146,2700,60)
call j7(Hw,MQ,$49304141,2700,60)
call j7(Hw,MQ,$49304144,2700,60)
call j7(Hw,MQ,$6B70696E,2250,45)
call j7(Hw,MQ,$49303549,2250,45)
call j7(Hw,MQ,$7370726E,2250,45)
call j7(Hw,MQ,$49303548,3000,60)
call j7(Hw,MQ,$49304250,3000,60)
call j7(Hw,MQ,$4930424E,3000,60)
call j7(Hw,MQ,$49304A35,3000,60)
call j7(Hw,MQ,$776E6575,3000,60)
call j7(Hw,MQ,$49303635,9000,150)
call j7(Hw,MQ,$49304F54,9000,150)
call j7(Hw,MQ,$49304F4E,9000,150)
call j7(Hw,MQ,$49304F50,9000,150)
call j7(Hw,MQ,$49304F56,9000,150)
call j7(Hw,MQ,$49304F52,9000,150)
call j7(Hw,MQ,$49305138,9000,150)
call j7(Hw,MQ,$49305141,9000,150)
call j7(Hw,MQ,$49305144,9000,150)
call j7(Hw,MQ,$49305137,9000,150)
call j7(Hw,MQ,$49305135,9000,150)
call j7(Hw,MQ,$49303455,9000,150)
call j7(Hw,MQ,$77687764,9000,150)
call j7(Hw,MQ,$49303644,12000,180)
call j7(Hw,MQ,$4930434A,12000,180)
call j7(Hw,MQ,$49304349,12000,180)
call j7(Hw,MQ,$49304348,12000,180)
call j7(Hw,MQ,$49304257,12000,180)
call j7(Hw,MQ,$49304256,12000,180)
call j7(Hw,MQ,$49305451,12000,180)
call j7(Hw,MQ,$49305450,12000,180)
call j7(Hw,MQ,$49305452,12000,180)
call j7(Hw,MQ,$49303847,12000,180)
call j7(Hw,MQ,$6876616C,12000,180)
call j7(Hw,MQ,$49304153,30000,360)
call j7(Hw,MQ,$49304151,30000,360)
call j7(Hw,MQ,$49304155,30000,360)
call j7(Hw,MQ,$4930345A,30000,360)
call j7(Hw,MQ,$49303830,30000,360)
call j7(Hw,MQ,$49304956,30000,360)
call j7(Hw,MQ,$49305436,30000,360)
call j7(Hw,MQ,$49303243,30000,360)
call j7(Hw,MQ,$49305255,3000,0)
call j7(Hw,MQ,$49303547,4500,75)
call j7(Hw,MQ,$49304251,4500,75)
call j7(Hw,MQ,$49304954,4500,75)
call j7(Hw,MQ,$72737431,4500,75)
call j7(Hw,MQ,$49304253,7500,90)
call j7(Hw,MQ,$77737764,7500,90)
call j7(Hw,MQ,$49303755,1800,30)
call j7(Hw,MQ,$49303759,1800,30)
call j7(Hw,MQ,$49303757,1800,30)
call j7(Hw,MQ,$49305434,1800,30)
call j7(Hw,MQ,$77696C64,1800,30)
call j7(Hw,MQ,$73656872,1800,30)
call j7(Hw,MQ,$49304259,16500,150)
call j7(Hw,MQ,$49303453,16500,150)
call j7(Hw,MQ,$4930324B,16500,150)
call j7(Hw,MQ,$49303154,16500,150)
call j7(Hw,MQ,$49303449,16500,150)
call j7(Hw,MQ,$49304335,21000,240)
call j7(Hw,MQ,$49304332,21000,240)
call j7(Hw,MQ,$49304330,21000,240)
call j7(Hw,MQ,$49304341,42000,600)
call j7(Hw,MQ,$49304343,42000,600)
call j7(Hw,MQ,$49304337,42000,600)
call j7(Hw,MQ,$49305846,42000,600)
call j7(Hw,MQ,$49313041,7500,0)
call j7(Hw,MQ,$49313047,7500,0)
call j7(Hw,MQ,$49313044,7500,0)
call j7(Hw,MQ,$49313045,7500,0)
call j7(Hw,MQ,$49313046,7500,0)
call j7(Hw,MQ,$49313043,7500,0)
call j7(Hw,MQ,$49313042,7500,0)
call j7(Hw,MQ,$49305941,6000,90)
call j7(Hw,MQ,$49304C59,15000,150)
call j7(Hw,MQ,$49305957,15000,150)
call j7(Hw,MQ,$49304C58,15000,150)
call j7(Hw,MQ,$49304834,24000,240)
call j7(Hw,MQ,$49305331,24000,240)
call j7(Hw,MQ,$4930525A,24000,240)
call j7(Hw,MQ,$49304D38,24000,240)
call j7(Hw,MQ,$49303048,24000,240)
call j7(Hw,MQ,$49305A30,24000,240)
call j7(Hw,MQ,$49313051,30000,300)
call j7(Hw,MQ,$49305933,30000,300)
call j7(Hw,MQ,$49305A41,30000,300)
call j7(Hw,MQ,$49305A37,30000,300)
call j7(Hw,MQ,$49305A43,30000,300)
call j7(Hw,MQ,$49305A42,30000,300)
call j7(Hw,MQ,$49305348,30000,300)
call j7(Hw,MQ,$49304554,30000,300)
call j7(Hw,MQ,$49304D37,30000,300)
call j7(Hw,MQ,$4930554A,30000,300)
call j7(Hw,MQ,$49305054,30000,300)
call j7(Hw,MQ,$49305959,30000,300)
call j7(Hw,MQ,$72646530,6000,60)
call j7(Hw,MQ,$73687273,0,300)
call j7(Hw,MQ,$49313148,45000,450)
call j7(Hw,MQ,$49313146,45000,450)
call j7(Hw,MQ,$49313144,45000,450)
call j7(Hw,MQ,$49313142,45000,450)
call j7(Hw,MQ,$49313139,45000,450)
call j7(Hw,MQ,$49313137,45000,450)
call j7(Hw,MQ,$49313135,45000,450)
call j7(Hw,MQ,$49313133,45000,450)
call j7(Hw,MQ,$49313131,45000,450)
call j7(Hw,MQ,$4931305A,45000,450)
call j7(Hw,MQ,$49313058,45000,450)
call j7(Hw,MQ,$49313056,45000,450)
call j7(Hw,MQ,$4931304F,105000,6000)
call j7(Hw,MQ,$49303930,0,300)
if GetUnitTypeId(NF)==$6E30365A then
set NL[GetPlayerId(GetOwningPlayer(Hw))+1]=NL[GetPlayerId(GetOwningPlayer(Hw))+1]-1950
elseif GetUnitTypeId(NF)==$6E303659 then
set NL[GetPlayerId(GetOwningPlayer(Hw))+1]=NL[GetPlayerId(GetOwningPlayer(Hw))+1]-1650
elseif GetUnitTypeId(NF)==$6E303658 then
set NL[GetPlayerId(GetOwningPlayer(Hw))+1]=NL[GetPlayerId(GetOwningPlayer(Hw))+1]-1350
elseif GetUnitTypeId(NF)==$6E303657 then
set NL[GetPlayerId(GetOwningPlayer(Hw))+1]=NL[GetPlayerId(GetOwningPlayer(Hw))+1]-1050
elseif GetUnitTypeId(NF)==$6E303656 then
set NL[GetPlayerId(GetOwningPlayer(Hw))+1]=NL[GetPlayerId(GetOwningPlayer(Hw))+1]-750
elseif GetUnitTypeId(NF)==$6E303655 then
set NL[GetPlayerId(GetOwningPlayer(Hw))+1]=NL[GetPlayerId(GetOwningPlayer(Hw))+1]-450
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303847 then
set Hv=Location(10850.,5012.)
call SetUnitPositionLoc(MV[GetPlayerId(GetOwningPlayer(Hw))],Hv)
call SetUnitPositionLoc(NM[GetConvertedPlayerId(GetOwningPlayer(Hw))*2],Hv)
elseif GetUnitTypeId(GetTriggerUnit())==$6E303650 then
set Hv=Location(1376.,11950.)
call SetUnitPositionLoc(MV[GetPlayerId(GetOwningPlayer(Hw))],Hv)
call SetUnitPositionLoc(NM[GetConvertedPlayerId(GetOwningPlayer(Hw))*2],Hv)
elseif GetUnitTypeId(NF)==$6E30354D or GetUnitTypeId(NF)==$6E303837 then
set Hv=Location(11000,-7850)
call SetUnitPositionLoc(MV[GetPlayerId(GetOwningPlayer(Hw))],Hv)
call SetUnitPositionLoc(NM[GetConvertedPlayerId(GetOwningPlayer(Hw))*2],Hv)
elseif GetUnitTypeId(NF)==$6E30365A or GetUnitTypeId(NF)==$6E303336 or GetUnitTypeId(NF)==$6E303337 then
set Hv=Location(7450,-2190)
call SetUnitPositionLoc(MV[GetPlayerId(GetOwningPlayer(Hw))],Hv)
call SetUnitPositionLoc(NM[GetConvertedPlayerId(GetOwningPlayer(Hw))*2],Hv)
elseif GetUnitTypeId(NF)==$6E303659 or GetUnitTypeId(NF)==$6E303238 or GetUnitTypeId(NF)==$6E303239 then
set Hv=Location(-8070,15170)
call SetUnitPositionLoc(MV[GetPlayerId(GetOwningPlayer(Hw))],Hv)
call SetUnitPositionLoc(NM[GetConvertedPlayerId(GetOwningPlayer(Hw))*2],Hv)
elseif GetUnitTypeId(NF)==$6E303658 or GetUnitTypeId(NF)==$6E303149 or GetUnitTypeId(NF)==$6E30314A then
set Hv=Location(-8970,7888)
call SetUnitPositionLoc(MV[GetPlayerId(GetOwningPlayer(Hw))],Hv)
call SetUnitPositionLoc(NM[GetConvertedPlayerId(GetOwningPlayer(Hw))*2],Hv)
elseif GetUnitTypeId(NF)==$6E303657 or GetUnitTypeId(NF)==$6E303147 or GetUnitTypeId(NF)==$6E303148 then
set Hv=Location(-236,-9377)
call SetUnitPositionLoc(MV[GetPlayerId(GetOwningPlayer(Hw))],Hv)
call SetUnitPositionLoc(NM[GetConvertedPlayerId(GetOwningPlayer(Hw))*2],Hv)
elseif GetUnitTypeId(NF)==$6E303146 or GetUnitTypeId(NF)==$6E303656 or GetUnitTypeId(NF)==$6E303145 then
set Hv=Location(-4222.,-9051.)
call SetUnitPositionLoc(MV[GetPlayerId(GetOwningPlayer(Hw))],Hv)
call SetUnitPositionLoc(NM[GetConvertedPlayerId(GetOwningPlayer(Hw))*2],Hv)
elseif GetUnitTypeId(NF)==$6E303144 or GetUnitTypeId(NF)==$6E303655 or GetUnitTypeId(NF)==$6E303143 then
set Hv=Location(-15680,-8340)
call SetUnitPositionLoc(MV[GetPlayerId(GetOwningPlayer(Hw))],Hv)
call SetUnitPositionLoc(NM[GetConvertedPlayerId(GetOwningPlayer(Hw))*2],Hv)
endif
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(GetLocationX(Hv),GetLocationY(Hv),0)
call ClearSelection()
call SelectUnit(Hw,true)
endif
call RemoveLocation(Hv)
set Hv=null
set NG=true
set NF=null
set MQ=null
set Hw=null
endfunction
function j9 takes nothing returns nothing
local item MQ=GetSoldItem()
local unit Hw=GetBuyingUnit()
local player Hv=GetOwningPlayer(Hw)
if GetItemTypeId(MQ)==$49303736 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[0],true)
endif
elseif GetItemTypeId(MQ)==$49303030 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[2],true)
endif
elseif GetItemTypeId(MQ)==$49303035 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[3],true)
endif
elseif GetItemTypeId(MQ)==$49303031 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[4],true)
endif
elseif GetItemTypeId(MQ)==$49313033 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[5],true)
endif
elseif GetItemTypeId(MQ)==$49313034 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[6],true)
endif
elseif GetItemTypeId(MQ)==$49313035 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[7],true)
endif
elseif GetItemTypeId(MQ)==$49313037 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[8],true)
endif
elseif GetItemTypeId(MQ)==$49313036 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[9],true)
endif
elseif GetItemTypeId(MQ)==$49313052 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[10],true)
endif
elseif GetItemTypeId(MQ)==$49313053 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[11],true)
endif
elseif GetItemTypeId(MQ)==$49313149 then
if GetLocalPlayer()==Hv then
call ClearSelection()
call SelectUnit(ND[12],true)
endif
endif
set Hw=null
set MQ=null
endfunction
function kB takes nothing returns nothing
if GetLocalPlayer()==GetTriggerPlayer() then
call ClearSelection()
call PanCameraToTimed(-15590,1057,0)
call SelectUnit(ND[0],true)
endif
endfunction
function kC takes nothing returns nothing
local unit Me
if NP[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]!=true then
set NP[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
set Me=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),$48303657,Location(-13660,1040),0)
call TriggerRegisterUnitEvent(NE,Me,EVENT_UNIT_SELECTED)
set Me=null
endif
endfunction
function kD takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer MC
local item MQ
local integer NH
if GetSpellAbilityId()==$41303035 then
set MC=0
set NG=false
loop
set MQ=UnitItemInSlot(Hw,MC)
set NH=GetItemTypeId(MQ)
call RemoveItem(MQ)
set MQ=UnitAddItemByIdSwapped(NH,MV[GetPlayerId(GetOwningPlayer(Hw))])
call SetItemUserData(MQ,GetPlayerId(GetOwningPlayer(Hw))+1)
set MC=MC+1
exitwhen MC>=6
endloop
set NG=true
endif
set MQ=null
set Hw=null
endfunction
function kE takes nothing returns nothing
local trigger He
local region NN
local rect NO
set ND[0]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303434,Location(-15590,1057),0)
set ND[2]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E30314D,Location(-15590,1057),0)
set ND[3]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303358,Location(-15590,1057),0)
set ND[4]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303359,Location(-15590,1057),0)
set ND[5]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$4F303037,Location(-15590,1057),0)
set ND[6]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303241,Location(-15590,1057),0)
set ND[7]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6830354F,Location(-15590,1057),0)
set ND[8]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E636870,Location(-15590,1057),0)
set ND[9]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303432,Location(-15590,1057),0)
set ND[10]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6830374C,Location(-15590,1057),0)
set ND[11]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6830374D,Location(-15590,1057),0)
set ND[12]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6830374E,Location(-15590,1057),0)
set NE=CreateTrigger()
call TriggerAddAction(NE,function kB)
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(He,function j9)
call TriggerAddAction(He,function j8)
set He=null
set He=CreateTrigger()
set NN=CreateRegion()
set NO=GR
call RegionAddRect(NN,NO)
call TriggerRegisterEnterRegion(He,NN,null)
call TriggerAddAction(He,function kC)
set He=null
set NO=null
set NN=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function kD)
set He=null
endfunction
function kF takes unit NR,unit Hw,string M7,real NU,integer NV,integer NW,integer NX,real Nu returns nothing
local texttag NY
set NY=CreateTextTag()
call SetTextTagText(NY,M7,NU)
call SetTextTagPosUnit(NY,NR,Nu)
call SetTextTagColor(NY,NV,NW,NX,255)
call SetTextTagVelocity(NY,0,.03)
call SetTextTagVisibility(NY,GetLocalPlayer()==GetOwningPlayer(Hw))
call SetTextTagFadepoint(NY,1)
call SetTextTagLifespan(NY,2)
call SetTextTagPermanent(NY,false)
call SetTextTagSuspended(NY,false)
endfunction
function kG takes nothing returns nothing
call KillUnit(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),10))
call RemoveUnit(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),10))
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),10)
endfunction
function kH takes unit Hw,real MC returns nothing
local timer He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),10,Hw)
call TimerStart(He,MC,false,function kG)
set He=null
endfunction
function kI takes unit Nf,unit Hw,integer MC returns nothing
call UnitDamageTarget(Nf,Hw,MC,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function kJ takes unit Nf,unit Hw,integer MC returns nothing
call UnitDamageTarget(Nf,Hw,MC,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function kK takes unit Nf,unit Hw,integer MC returns nothing
call UnitDamageTarget(Nf,Hw,MC,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function kL takes nothing returns nothing
local unit Nx=GetEnumUnit()
call kJ(Ni,Nx,Nw)
set Nx=null
endfunction
function kN takes nothing returns nothing
local unit Nx=GetEnumUnit()
call kI(Ni,Nx,Nw)
set Nx=null
endfunction
function kO takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(0))==false then
if IsUnitIllusion(GetFilterUnit())==false then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
endif
return false
endfunction
function kP takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
return false
endfunction
function kQ takes nothing returns nothing
local unit Hw=GetEnumUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Ni))+1
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)+I2R(GetHeroInt(Ni,true))*Ng[Mc]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",Hw,"overhead"))
set Hw=null
endfunction
function kR takes unit NS,unit NR returns nothing
local integer MC=GetHeroStr(NS,true)*GetUnitAbilityLevel(NS,$41305550)*2
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local real NU=I2R(MC)*Nh[Mc+1]
local group Nb
local location Hv
local boolexpr Nc
call kI(NS,NR,R2I(NU))
set Nb=CreateGroup()
set Hv=GetUnitLoc(NS)
set Nc=Condition(function kO)
call GroupEnumUnitsInRangeOfLoc(Nb,Hv,400,Nc)
set NS=Ni
call ForGroup(Nb,function kQ)
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
endfunction
function kS takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==$6E303651 then
return true
endif
return false
endfunction
function kT takes unit NS,unit NR returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(NS))+1
local group Nb=CreateGroup()
local boolexpr Nc=Condition(function kS)
local integer MC
local real NT
local string M7=""
call GroupEnumUnitsOfPlayer(Nb,GetOwningPlayer(NS),Nc)
set MC=CountUnitsInGroup(Nb)
set NT=I2R((150+GetHeroAgi(NS,true)/20*MC)*GetUnitAbilityLevel(NS,$41305554))*Ne[Mc]
call kJ(NS,NR,R2I(NT))
if GetOwningPlayer(NS)==GetLocalPlayer() then
set M7="Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(M7,NR,"chest"))
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
set Nc=null
set Nb=null
endfunction
function kU takes unit NS,unit NR returns nothing
local location Hv=GetUnitLoc(NR)
local unit Hw=CreateUnitAtLoc(GetOwningPlayer(NS),$68303358,Hv,0)
local string M7=""
call kH(Hw,3)
if GetOwningPlayer(NS)==GetLocalPlayer() then
set M7="war3mapImported\\Firey.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(M7,Hv))
call RemoveLocation(Hv)
set Hv=null
set Hw=null
endfunction
function kV takes unit NS,unit NR returns nothing
local real Me
local integer Np
local real Nq
local string Ns
local location Nt
if GetUnitLifePercent(NR)<=90 then
set Me=100-GetUnitLifePercent(NR)
set Np=GetUnitAbilityLevel(NS,$4130524D)*((GetHeroAgi(NS,true)+GetHeroInt(NS,true))/40+50)
set Nq=I2R(Np)*(Me/10)*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Nq))
if GetUnitAbilityLevel(NS,$4130524B)>=1 and GetRandomInt(1,10)==1 then
call kU(NS,NR)
endif
endif
if GetUnitTypeId(NS)==$48303749 and GetUnitAbilityLevel(NS,$42303434)>=1 then
set Ns=""
if GetOwningPlayer(NS)==GetLocalPlayer() then
set Ns="war3mapImported\\Scythe Sweep.mdx"
endif
set Nt=GetUnitLoc(NS)
call DestroyEffect(AddSpecialEffectLoc(Ns,Nt))
call RemoveLocation(Nt)
set Nt=null
endif
endfunction
function kW takes unit NS,unit NR returns nothing
local integer Me
local real Np
local real Nq
if GetUnitAbilityLevel(NS,$41303950)>=1 then
if GetUnitAbilityLevel(NS,$41313651)>=1 then
if GetRandomInt(1,100)<=GetUnitAbilityLevel(NS,$41313651)*3 then
set Me=50*GetUnitAbilityLevel(NS,$4130394F)+R2I(GetUnitState(NS,UNIT_STATE_MAX_LIFE)/10)
set Np=I2R(Me)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Np)*4)
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)-GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.022)
call kF(NR,NS,"+"+I2S(R2I(Np)*4),.022,255,100,100,-10)
set Nq=I2R(GetHeroStr(NS,true)/3*GetUnitAbilityLevel(NS,$41313651))
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)+Nq)
call kF(NS,NS,"|c00ff0000Multicast x4!|r "+"|c0000ff00+"+I2S(R2I(Nq)),.022,255,255,255,10)
elseif GetRandomInt(1,100)<=GetUnitAbilityLevel(NS,$41313651)*6 then
set Me=50*GetUnitAbilityLevel(NS,$4130394F)+R2I(GetUnitState(NS,UNIT_STATE_MAX_LIFE)/10)
set Np=I2R(Me)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Np)*3)
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)-GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.022)
call kF(NR,NS,"+"+I2S(R2I(Np)*3),.022,255,100,100,-10)
set Nq=I2R(GetHeroStr(NS,true)/3*GetUnitAbilityLevel(NS,$41313651))
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)+Nq)
call kF(NS,NS,"|c00ff0000Multicast x3!|r "+"|c0000ff00+"+I2S(R2I(Nq)),.022,255,255,255,10)
elseif GetRandomInt(1,100)<=GetUnitAbilityLevel(NS,$41313651)*9 then
set Me=50*GetUnitAbilityLevel(NS,$4130394F)+R2I(GetUnitState(NS,UNIT_STATE_MAX_LIFE)/10)
set Np=I2R(Me)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Np)*2)
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)-GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.022)
call kF(NR,NS,"+"+I2S(R2I(Np)*2),.022,255,100,100,-10)
set Nq=I2R(GetHeroStr(NS,true)/3*GetUnitAbilityLevel(NS,$41313651))
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)+Nq)
call kF(NS,NS,"|c00ff0000Multicast x2!|r "+"|c0000ff00+"+I2S(R2I(Nq)),.022,255,255,255,10)
else
set Me=50*GetUnitAbilityLevel(NS,$4130394F)+R2I(GetUnitState(NS,UNIT_STATE_MAX_LIFE)/10)
set Np=I2R(Me)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Np))
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)-GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.022)
call kF(NR,NS,"+"+I2S(R2I(Np)),.022,255,100,100,-10)
endif
else
set Me=50*GetUnitAbilityLevel(NS,$4130394F)+R2I(GetUnitState(NS,UNIT_STATE_MAX_LIFE)/10)
set Np=I2R(Me)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Np))
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)-GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.022)
call kF(NR,NS,"+"+I2S(R2I(Np)),.022,255,100,100,-10)
endif
elseif GetUnitAbilityLevel(NS,$4130394F)>=1 then
if GetUnitAbilityLevel(NS,$41313651)>=1 then
if GetRandomInt(1,100)<=GetUnitAbilityLevel(NS,$41313651)*3 then
set Me=750+R2I(GetUnitState(NS,UNIT_STATE_MAX_LIFE)/7)
set Np=I2R(Me)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Np)*4)
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)-GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.022)
call kF(NR,NS,"+"+I2S(R2I(Np)*4),.022,255,100,100,-10)
set Nq=I2R(GetHeroStr(NS,true)/3*GetUnitAbilityLevel(NS,$41313651))
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)+Nq)
call kF(NS,NS,"|c00ff0000Multicast x4!|r "+"|c0000ff00+"+I2S(R2I(Nq)),.022,255,255,255,10)
elseif GetRandomInt(1,100)<=GetUnitAbilityLevel(NS,$41313651)*6 then
set Me=750+R2I(GetUnitState(NS,UNIT_STATE_MAX_LIFE)/7)
set Np=I2R(Me)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Np)*3)
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)-GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.022)
call kF(NR,NS,"+"+I2S(R2I(Np)*3),.022,255,100,100,-10)
set Nq=I2R(GetHeroStr(NS,true)/3*GetUnitAbilityLevel(NS,$41313651))
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)+Nq)
call kF(NS,NS,"|c00ff0000Multicast x3!|r "+"|c0000ff00+"+I2S(R2I(Nq)),.022,255,255,255,10)
elseif GetRandomInt(1,100)<=GetUnitAbilityLevel(NS,$41313651)*9 then
set Me=750+R2I(GetUnitState(NS,UNIT_STATE_MAX_LIFE)/7)
set Np=I2R(Me)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Np)*2)
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)-GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.022)
call kF(NR,NS,"+"+I2S(R2I(Np)*2),.022,255,100,100,-10)
set Nq=I2R(GetHeroStr(NS,true)/3*GetUnitAbilityLevel(NS,$41313651))
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)+Nq)
call kF(NS,NS,"|c00ff0000Multicast x2!|r "+"|c0000ff00+"+I2S(R2I(Nq)),.022,255,255,255,10)
else
set Me=750+R2I(GetUnitState(NS,UNIT_STATE_MAX_LIFE)/7)
set Np=I2R(Me)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Np))
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)-GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.022)
call kF(NR,NS,"+"+I2S(R2I(Np)),.022,255,100,100,-10)
endif
else
set Me=750+R2I(GetUnitState(NS,UNIT_STATE_MAX_LIFE)/7)
set Np=I2R(Me)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(Np))
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)-GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.022)
call kF(NR,NS,"+"+I2S(R2I(Np)),.022,255,100,100,-10)
endif
endif
endfunction
function kX takes unit NS,unit NR returns nothing
local integer Nk=(100+GetHeroAgi(NS,true)/7)*GetUnitAbilityLevel(NS,$41305947)
local real NT=I2R(Nk)*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(NT))
endfunction
function kY takes nothing returns nothing
call DestroyLightning(LoadLightningHandle(No,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(No,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function kZ takes location Hv,location Nl,string Nm returns nothing
local lightning Nn=AddLightning(Nm,true,GetLocationX(Hv),GetLocationY(Hv),GetLocationX(Nl),GetLocationY(Nl))
local timer He=CreateTimer()
call SaveLightningHandle(No,GetHandleId(He),1,Nn)
call TimerStart(He,.5,false,function kY)
set He=null
set Nn=null
endfunction
function ka takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv=GetUnitLoc(Ni)
local location Nl=GetUnitLoc(Hw)
local integer Nk
local real NT
local string M7=""
if GetOwningPlayer(Ni)==GetLocalPlayer() then
set M7="Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(M7,Hw,"overhead"))
if GetUnitAbilityLevel(Ni,$41305939)>=1 then
set Nk=(70+GetHeroAgi(Ni,true)/5)*GetUnitAbilityLevel(Ni,$41305939)
set NT=I2R(Nk)*Ne[GetPlayerId(GetOwningPlayer(Ni))+1]
call kJ(Ni,Hw,R2I(NT))
elseif GetUnitAbilityLevel(Ni,$41305958)>=1 then
set Nk=700+GetHeroAgi(Ni,true)*7/2
set NT=I2R(Nk)*Ne[GetPlayerId(GetOwningPlayer(Ni))+1]
call kJ(Ni,Hw,R2I(NT))
endif
call kZ(Hv,Nl,"GRNL")
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
set Hw=null
endfunction
function kb takes unit NS,unit NR returns nothing
local location Hv=GetUnitLoc(NR)
local group Nb=CreateGroup()
local boolexpr Nc=Condition(function kP)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),400,Nc)
set Ni=NS
call ForGroup(Nb,function ka)
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
endfunction
function kc takes unit NS,unit NR returns nothing
local integer Nk
local real NT
if GetUnitAbilityLevel(NS,$41313631)>=1 then
set Nk=(200+GetHeroStr(NS,true)/2)*GetUnitAbilityLevel(NS,$41305350)
set NT=I2R(Nk)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kI(NS,NR,R2I(NT))
elseif GetUnitAbilityLevel(NS,$41313638)>=1 then
set Nk=800+GetHeroStr(NS,true)*2
set NT=I2R(Nk)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
call kI(NS,NR,R2I(NT))
endif
endfunction
function kd takes unit NS,unit NR returns nothing
local integer Nk
local real NT
local location Me
local group Np
local boolexpr Nq
local string Ns
set Nv[GetPlayerId(GetOwningPlayer(NS))]=Nv[GetPlayerId(GetOwningPlayer(NS))]+1
if GetUnitAbilityLevel(NS,$41303833)>=1 then
set Nk=(200+GetHeroAgi(NS,true)/3)*GetUnitAbilityLevel(NS,$41303833)
set NT=I2R(Nk)*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
if GetUnitAbilityLevel(NS,$42303856)>=1 then
set NT=NT*2
endif
if Nv[GetPlayerId(GetOwningPlayer(NS))]>=3 then
set Nv[GetPlayerId(GetOwningPlayer(NS))]=0
set NT=NT*2
set Me=GetUnitLoc(NR)
set Np=CreateGroup()
set Nq=Condition(function kP)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),400,Nq)
set Ns=""
if GetOwningPlayer(NS)==GetLocalPlayer() then
set Ns="war3mapImported\\Energy Release.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Ns,Me))
set Ni=NS
set Nw=R2I(NT)
call ForGroup(Np,function kL)
call DestroyBoolExpr(Nq)
call DestroyGroup(Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
set Np=null
else
call kJ(NS,NR,R2I(NT))
endif
elseif GetUnitAbilityLevel(NS,$41303834)>=1 then
set Nk=1000+GetHeroAgi(NS,true)*3
set NT=I2R(Nk)*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
if GetUnitAbilityLevel(NS,$42303856)>=1 then
set NT=NT*2
endif
if Nv[GetPlayerId(GetOwningPlayer(NS))]>=3 then
set Nv[GetPlayerId(GetOwningPlayer(NS))]=0
set NT=NT*2
set Me=GetUnitLoc(NR)
set Np=CreateGroup()
set Nq=Condition(function kP)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),400,Nq)
set Ns=""
if GetOwningPlayer(NS)==GetLocalPlayer() then
set Ns="war3mapImported\\Energy Release.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Ns,Me))
set Ni=NS
set Nw=R2I(NT)
call ForGroup(Np,function kL)
call DestroyBoolExpr(Nq)
call DestroyGroup(Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
set Np=null
else
call kJ(NS,NR,R2I(NT))
endif
endif
endfunction
function ke takes nothing returns nothing
local unit Hw=GetEnumUnit()
local string Me
if GetUnitAbilityLevel(Hw,$42303042)<=0 then
set Me=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Me="Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(Me,Hw,"origin"))
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+I2R(Nw))
endif
set Hw=null
endfunction
function kf takes unit NS,unit NR returns nothing
local integer NT=R2I(I2R(GetHeroStr(NS,true)*2*GetUnitAbilityLevel(NS,$41305550))*Nh[GetPlayerId(GetOwningPlayer(NS))+1])
local string M7=""
local location Hv
local group Nb
local boolexpr Nc
call kI(NS,NR,NT)
if GetOwningPlayer(NS)==GetLocalPlayer() then
set M7="Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(M7,NR,"origin"))
set Hv=GetUnitLoc(NR)
set Nb=CreateGroup()
set Nc=Condition(function kO)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),400,Nc)
set Nw=R2I(I2R(GetHeroInt(NS,true))*Ng[GetPlayerId(GetOwningPlayer(NS))+1])
call ForGroup(Nb,function ke)
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
endfunction
function kg takes unit NS,unit NR returns nothing
local real NT
if GetUnitAbilityLevel(NS,$42303042)<=0 then
if N6==11 then
set NT=I2R(450+GetHeroStr(NS,true)/4)*Ng[GetPlayerId(GetOwningPlayer(NS))+1]
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)+NT)
elseif N6<=10 then
set NT=I2R(30*N6+GetHeroStr(NS,true)/5)*Ng[GetPlayerId(GetOwningPlayer(NS))+1]
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)+NT)
endif
endif
endfunction
function kh takes unit NS,unit NR returns nothing
local real NT
if GetUnitAbilityLevel(NS,$41305037)>=1 then
set NT=I2R(50*GetUnitAbilityLevel(NS,$41305037)+GetHeroAgi(NS,true))*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
else
set NT=I2R(500+GetHeroAgi(NS,true)*3/2)*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
endif
call kJ(NS,NR,R2I(NT))
endfunction
function ki takes unit NS,unit NR returns nothing
local real NT
local location Hv=GetUnitLoc(NR)
local unit Hw=CreateUnitAtLoc(Player(0),$68303739,Hv,0)
call UnitAddAbility(Hw,$41304546)
call kH(Hw,1)
if GetUnitAbilityLevel(NR,$42303543)>=1 then
set NT=I2R((GetHeroAgi(NS,true)+150)*GetUnitAbilityLevel(NS,$41305047))*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
set NT=NT*3/2
call UnitRemoveAbility(NR,$42303543)
call kF(NR,NS,"Damage!",.023,255,0,0,1)
else
call IssueTargetOrder(Hw,"cripple",NR)
set NT=I2R((GetHeroAgi(NS,true)+150)*GetUnitAbilityLevel(NS,$41305047))*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
call kF(NR,NS,"Debuff!",.023,255,0,255,1)
endif
call kJ(NS,NR,R2I(NT))
call RemoveLocation(Hv)
set Hv=null
set Hw=null
endfunction
function kj takes unit NS,unit NR returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local real NT
local location Me
local unit Np
if Ny[Mc]==NR then
set Nz[Mc]=Nz[Mc]+1
set NT=I2R(50*GetUnitAbilityLevel(NS,$41313347)*Nz[Mc]+GetHeroAgi(NS,true)/10*Nz[Mc])*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
call kJ(NS,NR,R2I(NT))
if Nz[Mc]>=5 then
set Nz[Mc]=0
set Me=GetUnitLoc(NR)
set Np=CreateUnitAtLoc(GetOwningPlayer(NS),$6E303651,Me,0)
call kH(Np,4)
call RemoveLocation(Me)
set Me=null
set Np=null
if GetUnitAbilityLevel(NS,$41303853)>=1 then
set Me=GetUnitLoc(NS)
set Np=CreateUnitAtLoc(GetOwningPlayer(NS),$6E303651,Me,0)
call kH(Np,4)
call RemoveLocation(Me)
set Me=null
set Np=null
endif
endif
else
set Ny[Mc]=NR
set Nz[Mc]=0
endif
endfunction
function kk takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call UnitRemoveAbility(Hw,$41313838)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41313839,true)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hw=null
endfunction
function kl takes unit NS,unit NR returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local real NT
local location Me
local group Np
local boolexpr Nq
local string Ns
local timer Nt
set Nz[Mc+10]=Nz[Mc+10]+1
if Nz[Mc+10]==7 then
set Nz[Mc+10]=0
set NT=I2R(150*GetUnitAbilityLevel(NS,$41313839)+GetHeroAgi(NS,true)*8)*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
set Me=GetUnitLoc(NR)
set Np=CreateGroup()
set Nq=Condition(function kP)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),400,Nq)
set Ns=""
if GetOwningPlayer(NS)==GetLocalPlayer() then
set Ns="war3mapImported\\Blink Blue Caster.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Ns,Me))
set Ni=NS
set Nw=R2I(NT)
call ForGroup(Np,function kL)
call DestroyBoolExpr(Nq)
call DestroyGroup(Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
set Np=null
call SetPlayerAbilityAvailable(GetOwningPlayer(NS),$41313839,false)
call UnitAddAbility(NS,$41313838)
set Nt=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(Nt),0,NS)
call TimerStart(Nt,2.5,false,function kk)
set Nt=null
endif
endfunction
function km takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$4130574D)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function kn takes nothing returns nothing
local unit NS=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local real Me
local location Np
local group Nq
local boolexpr Ns
local string Nt
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>0 then
set Me=I2R(70*GetUnitAbilityLevel(NS,$4130574C)+GetHeroAgi(NS,true)*2)*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
set Np=GetUnitLoc(NR)
set Nq=CreateGroup()
set Ns=Condition(function kP)
call GroupEnumUnitsInRange(Nq,GetLocationX(Np),GetLocationY(Np),200,Ns)
set Nt=""
if GetOwningPlayer(NS)==GetLocalPlayer() then
set Nt="Abilities\\Weapons\\Bolt\\BoltImpact.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(Nt,NR,"overhead"))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",Np))
set Ni=NS
set Nw=R2I(Me)
call ForGroup(Nq,function kL)
call DestroyBoolExpr(Ns)
call DestroyGroup(Nq)
call RemoveLocation(Np)
set Np=null
set Ns=null
set Nq=null
else
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set NS=null
set NR=null
endfunction
function ko takes unit NS,unit NR returns nothing
local timer He
call UnitAddAbility(NR,$4130574D)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,NR)
call TimerStart(He,6,false,function km)
set He=null
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,NS)
call SaveUnitHandle(Nr,GetHandleId(He),1,NR)
call SaveInteger(Nr,GetHandleId(He),2,4)
call TimerStart(He,1,true,function kn)
set He=null
endfunction
function kp takes nothing returns nothing
local unit Nx=GetEnumUnit()
if GetUnitAbilityLevel(Nx,$42303851)>=1 then
call kK(Ni,Nx,Nw*2)
set Nx=null
else
call kK(Ni,Nx,Nw)
set Nx=null
endif
set Nx=null
endfunction
function kq takes unit NS,unit NR returns nothing
local real NT=I2R(GetHeroInt(NS,true))+GetUnitState(NS,UNIT_STATE_MANA)/10*N1[GetPlayerId(GetOwningPlayer(NS))+1]
local location Hv
local group Nb
local boolexpr Nc
local string M7=""
call SetUnitState(NS,UNIT_STATE_MANA,GetUnitState(NS,UNIT_STATE_MANA)-GetUnitState(NS,UNIT_STATE_MAX_MANA)*.03)
set Hv=GetUnitLoc(NR)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Grin Curse.mdx",Hv))
set Nb=CreateGroup()
set Nc=Condition(function kP)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),200,Nc)
if GetOwningPlayer(NS)==GetLocalPlayer() then
set M7="war3mapImported\\Culling Slash Purple.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(M7,Hv))
set Ni=NS
set Nw=R2I(NT)
call ForGroup(Nb,function kp)
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
endfunction
function kr takes nothing returns nothing
local unit Nx=GetEnumUnit()
if GetUnitAbilityLevel(Nx,$42303157)>=1 then
call kK(Ni,Nx,Nw*2)
set Nx=null
else
call kK(Ni,Nx,Nw)
set Nx=null
endif
set Nx=null
endfunction
function ks takes unit NS,unit NR returns nothing
local real NT
local location Hv
local string M7=""
local group Nb
local boolexpr Nc
if GetUnitAbilityLevel(NS,$41304338)>=1 then
set NT=I2R(GetHeroAgi(NS,true)*2)+GetUnitAbilityLevel(NS,$41304338)*200*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
else
set NT=I2R(GetHeroAgi(NS,true)*3+800)*Ne[GetPlayerId(GetOwningPlayer(NS))+1]
endif
set Hv=GetUnitLoc(NR)
if GetOwningPlayer(NS)==GetLocalPlayer() then
set M7="war3mapImported\\AquaSpike.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(M7,Hv))
set Nb=CreateGroup()
set Nc=Condition(function kP)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),300,Nc)
set Ni=NS
set Nw=R2I(NT)
call ForGroup(Nb,function kr)
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
endfunction
function kt takes unit NS,unit NR returns nothing
local real NT=GetUnitState(NS,UNIT_STATE_MANA)*.1*N1[GetPlayerId(GetOwningPlayer(NS))+1]
set Nw=R2I(NT)+GetUnitAbilityLevel(NS,$41304253)*300
call kK(NS,NR,Nw)
endfunction
function ku takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$41305842)
call SetUnitVertexColor(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),255,255,255,255)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function kv takes unit NS,unit NR returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local real Me
local location Hv
local group Nb
local boolexpr Nc
local string M7=""
local timer Np
if GetUnitAbilityLevel(NS,$41304236)>=1 then
set Me=I2R(300*GetUnitAbilityLevel(NS,$41304236)+GetHeroStr(NS,true)*2)*Nh[Mc+1]
set Nw=R2I(Me)+GetHeroStr(NS,true)/7*GetUnitAbilityLevel(NS,$41304B57)
else
set Me=I2R(2000+GetHeroStr(NS,true)*3)*Nh[Mc+1]
set Nw=R2I(Me)+GetHeroStr(NS,true)/6*GetUnitAbilityLevel(NS,$41304B57)
endif
set Hv=GetUnitLoc(NR)
set Nb=CreateGroup()
set Nc=Condition(function kP)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),300,Nc)
if GetOwningPlayer(NS)==GetLocalPlayer() then
set M7="war3mapImported\\Culling Slash II Red.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(M7,Hv))
call DestroyEffect(AddSpecialEffectLoc(M7,Hv))
call DestroyEffect(AddSpecialEffectLoc(M7,Hv))
set Ni=NS
call ForGroup(Nb,function kL)
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
if GetUnitAbilityLevel(NS,$41305842)==0 then
set N0[Mc+10]=N0[Mc+10]+1
if N0[Mc+10]>=3 then
set N0[Mc+10]=0
call UnitAddAbility(NS,$41305842)
call SetPlayerAbilityAvailable(GetOwningPlayer(NS),$41305842,false)
call SetUnitVertexColor(NS,255,0,0,150)
set Np=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(Np),0,NS)
call TimerStart(Np,5,false,function ku)
set Np=null
endif
endif
endfunction
function kw takes unit NS,unit NR returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local real NT
if GetUnitAbilityLevel(NS,$41313436)==0 then
set NT=I2R(250*GetUnitAbilityLevel(NS,$41314152)+GetHeroStr(NS,true)/2)*Nh[Mc+1]
if GetUnitAbilityLevel(NS,$4130584B)>=1 then
call UnitDamageTarget(NS,NR,NT+NT/5,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(NS,NR,NT,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
else
set NT=I2R(150*GetUnitAbilityLevel(NS,$41314152)+GetHeroStr(NS,true)/3)*Ng[Mc+1]
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_LIFE)+NT)
endif
endfunction
function kx takes unit NS,unit NR returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local real NT
local location Hv
local string Me
local group Np
local boolexpr Nq
local unit Ns
set Ni=NS
if GetUnitAbilityLevel(NS,$41313436)==0 then
set NT=I2R(150*GetUnitAbilityLevel(NS,$4131314A)+GetHeroStr(NS,true)*3)*Nh[Mc+1]
if GetUnitAbilityLevel(NS,$4130584B)>=1 then
if GetUnitAbilityLevel(NS,$41313148)>=1 then
set Nw=R2I(NT)*3/2
else
set Nw=R2I(NT)*2
endif
else
set Nw=R2I(NT)
endif
set Hv=GetUnitLoc(NR)
set Me=""
if GetOwningPlayer(NS)==GetLocalPlayer() then
if GetUnitTypeId(NS)==$48303738 then
set Me="war3mapImported\\Ephemeral Slash Red.mdx"
else
set Me="war3mapImported\\Coup de Grace.mdx"
endif
endif
call DestroyEffect(AddSpecialEffectTarget(Me,NS,"chest"))
set Np=CreateGroup()
set Nq=Condition(function kP)
call GroupEnumUnitsInRange(Np,GetLocationX(Hv),GetLocationY(Hv),400,Nq)
call ForGroup(Np,function kL)
call DestroyBoolExpr(Nq)
call DestroyGroup(Np)
call RemoveLocation(Hv)
set Hv=null
set Nq=null
set Np=null
elseif GetUnitAbilityLevel(NS,$41313436)>=1 then
set NT=I2R(150*GetUnitAbilityLevel(NS,$4131314B)+GetHeroStr(NS,true)*3/2)*Nh[Mc+1]
if GetUnitAbilityLevel(NS,$4130584B)>=1 then
if GetUnitAbilityLevel(NS,$41313148)>=1 then
set Nw=R2I(NT)*3/2
else
set Nw=R2I(NT)*2
endif
else
set Nw=R2I(NT)
endif
call UnitDamageTarget(Ni,NR,I2R(Nw),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Hv=GetUnitLoc(NR)
set Me=""
if GetOwningPlayer(NS)==GetLocalPlayer() then
if GetUnitTypeId(NS)==$48303738 then
set Me="war3mapImported\\Ephemeral Slash Purple.mdx"
else
set Me="war3mapImported\\Coup de Grace Purple.mdx"
endif
endif
call DestroyEffect(AddSpecialEffectTarget(Me,NS,"chest"))
set Ns=CreateUnitAtLoc(Player(Mc),$68303739,Hv,0)
call UnitAddAbility(Ns,$41313143)
call IssueTargetOrder(Ns,"frostnova",NR)
call kH(Ns,1)
set Ns=null
endif
set Hv=null
endfunction
function ky takes unit NS,unit NR returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local real NT
local location Hv=GetUnitLoc(NS)
local location Nl=GetUnitLoc(NR)
if GetUnitAbilityLevel(NS,$41305233)>=1 then
set NT=(I2R(GetHeroAgi(NS,true)*5)+DistanceBetweenPoints(Hv,Nl)*I2R(GetUnitAbilityLevel(NS,$41305233)))*Ne[Mc+1]
call UnitDamageTarget(NS,NR,NT,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call kF(NS,NS,"+"+I2S(R2I(NT)),.025,0,255,255,255)
else
set NT=(I2R(GetHeroAgi(NS,true)*7)+DistanceBetweenPoints(Hv,Nl)*5)*Ne[Mc+1]
call UnitDamageTarget(NS,NR,NT,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call kF(NS,NS,"+"+I2S(R2I(NT)),.025,0,255,255,255)
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
endfunction
function kz takes unit NS,unit NR returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local real NT
local location Hv=GetUnitLoc(NR)
local string M7=""
local group Nb
local boolexpr Nc
set Ni=NS
if GetUnitAbilityLevel(NS,$41305830)>=1 then
set NT=I2R(400*GetUnitAbilityLevel(NS,$41305830)+GetHeroAgi(NS,true)*3/2)*Ne[Mc+1]
else
set NT=I2R(6500+GetHeroAgi(NS,true)*3)*Ne[Mc+1]
endif
set Nw=R2I(NT)
if GetOwningPlayer(NS)==GetLocalPlayer() then
set M7="Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(M7,Hv))
set Nb=CreateGroup()
set Nc=Condition(function kP)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),300,Nc)
call ForGroup(Nb,function kL)
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
call RemoveLocation(Hv)
set Hv=null
endfunction
function k0 takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$41304C51)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function k1 takes unit NS,unit NR returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local real NT=I2R(GetHeroAgi(NS,true)/5*GetUnitAbilityLevel(NS,$4130304E))*Ne[Mc+1]
local timer Me
call UnitDamageTarget(NS,NR,NT,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if GetRandomInt(1,10)==1 and GetUnitAbilityLevel(NR,$41304C51)==0 then
call kF(NR,NS,"Умри!",.025,255,100,10,0)
if GetUnitState(NR,UNIT_STATE_LIFE)>.405 then
call UnitAddAbility(NR,$41304C51)
call SetUnitAbilityLevel(NR,$41304C51,GetUnitAbilityLevel(NS,$4130304E))
set Me=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(Me),0,NR)
call TimerStart(Me,5,false,function k0)
set Me=null
endif
endif
endfunction
function k2 takes unit NS,unit NR returns nothing
local real NT
if GetUnitAbilityLevel(NR,$41313542)!=11 then
set NT=I2R(70*GetUnitAbilityLevel(NR,$41313542)+(GetHeroStr(NS,true)+GetHeroAgi(NS,true)+GetHeroInt(NS,true))/10)
call UnitDamageTarget(NS,NR,NT,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
set NT=I2R(30*GetUnitAbilityLevel(NR,$41313542))
call SetUnitState(NS,UNIT_STATE_MANA,GetUnitState(NS,UNIT_STATE_MANA)+(NT+GetUnitState(NS,UNIT_STATE_MAX_MANA)/50))
else
set NT=I2R(700+(GetHeroStr(NS,true)+GetHeroAgi(NS,true)+GetHeroInt(NS,true))/7)
call UnitDamageTarget(NS,NR,NT,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call SetUnitState(NS,UNIT_STATE_MANA,GetUnitState(NS,UNIT_STATE_MANA)+(400+GetUnitState(NS,UNIT_STATE_MAX_MANA)/50))
endif
endfunction
function k3 takes unit NS,unit NR returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local real Me
local location Np
local string Nq
local group Ns
local boolexpr Nt
if GetUnitState(NS,UNIT_STATE_MANA)>=GetUnitState(NS,UNIT_STATE_MAX_MANA)/20 then
set N0[Mc]=N0[Mc]+1
if N0[Mc]==5 then
set N0[Mc]=0
set Me=GetUnitState(NS,UNIT_STATE_MAX_LIFE)*.05*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
set Nw=R2I(Me)+GetUnitAbilityLevel(NS,$41304653)*150
set Ni=NS
set Np=GetUnitLoc(NS)
set Nq=""
if GetOwningPlayer(NS)==GetLocalPlayer() then
set Nq="war3mapImported\\Flamestrike Starfire II.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Nq,NS,"origin"))
set Ns=CreateGroup()
set Nt=Condition(function kP)
call GroupEnumUnitsInRange(Ns,GetLocationX(Np),GetLocationY(Np),300,Nt)
call ForGroup(Ns,function kN)
call DestroyBoolExpr(Nt)
call DestroyGroup(Ns)
call RemoveLocation(Np)
set Np=null
set Nt=null
set Ns=null
endif
else
set N0[Mc]=0
call IssueImmediateOrder(NS,"unimmolation")
endif
endfunction
function k4 takes unit NS,unit NR returns nothing
local real NT=I2R(100*GetUnitAbilityLevel(NS,$41305038)+(GetHeroStr(NS,true)+GetHeroAgi(NS,true)+GetHeroInt(NS,true))/4)
call UnitDamageTarget(NS,NR,NT,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function k5 takes unit NS,unit NR returns nothing
local real NT=I2R(GetHeroStr(NS,true)+1000)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
set Nw=R2I(NT)
call kJ(NS,NR,Nw)
endfunction
function k6 takes unit NS,unit NR returns nothing
local real NT=I2R(GetHeroStr(NS,true)*7)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
set Nw=R2I(NT)
call kJ(NS,NR,Nw)
call UnitRemoveAbility(NR,$42303342)
endfunction
function k7 takes unit NS,unit NR returns nothing
local location Hv=GetUnitLoc(NS)
local location Nl=GetUnitLoc(NR)
local real Me
local string Np
if DistanceBetweenPoints(Hv,Nl)<=200 then
set Me=I2R(GetHeroStr(NS,true)+GetHeroAgi(NS,true)+GetHeroInt(NS,true))
set Nw=R2I(Me)
call kJ(NS,NR,Nw)
set Np=""
if GetOwningPlayer(NS)==GetLocalPlayer() then
set Np="Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(Np,Nl))
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
endfunction
function k8 takes unit Nf,unit Hw,integer MC returns nothing
call UnitDamageTarget(Nf,Hw,MC,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function k9 takes unit Nf,unit Hw,integer MC returns nothing
call UnitDamageTarget(Nf,Hw,MC,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function lB takes unit Nf,unit Hw,integer MC returns nothing
call UnitDamageTarget(Nf,Hw,MC,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function lC takes unit N2,integer N3 returns integer
local integer N4
local item N5
set N4=0
loop
set N5=UnitItemInSlot(N2,N4)
if N5!=null and GetItemTypeId(N5)==N3 then
set N5=null
set N5=null
return N4+1
endif
set N4=N4+1
exitwhen N4>=bj_MAX_INVENTORY
endloop
set N5=null
return 0
endfunction
function lD takes unit N2,integer N3 returns boolean
return lC(N2,N3)>0
endfunction
function lE takes unit NR,unit Hw,string M7,real NU,integer NV,integer NW,integer NX returns nothing
local texttag NY
set NY=CreateTextTag()
call SetTextTagText(NY,M7,NU)
call SetTextTagPosUnit(NY,NR,50)
call SetTextTagColor(NY,NV,NW,NX,255)
call SetTextTagVelocity(NY,0,.03)
call SetTextTagVisibility(NY,GetLocalPlayer()==GetOwningPlayer(Hw))
call SetTextTagFadepoint(NY,1)
call SetTextTagLifespan(NY,2)
call SetTextTagPermanent(NY,false)
call SetTextTagSuspended(NY,false)
endfunction
function lF takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
return false
endfunction
function lG takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true then
if IsUnitIllusion(GetFilterUnit())==false then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
endif
return false
endfunction
function lH takes nothing returns nothing
local location Hv=GetUnitLoc(K9)
local group Nb=CreateGroup()
local boolexpr Nc=Condition(function lG)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),1500,Nc)
call DestroyBoolExpr(Nc)
if CountUnitsInGroup(Nb)==0 then
call UnitRemoveAbility(K9,$41304545)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
if GetUnitAbilityLevel(K9,$41304545)>=1 then
set Na=Na+1
else
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function lI takes nothing returns nothing
local unit NR=GetTriggerUnit()
local unit NS=GetEventDamageSource()
local real NT=GetEventDamage()
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local integer MC
local real N7
local timer Me
local integer Np
local location Nq
local real Ns
local real Nt
if NT>=5 and GetUnitAbilityLevel(MV[Mc],$41313059)>=1 then
call lE(NR,NS,"-"+I2S(R2I(NT)),.02,255,100,100)
endif
if GetOwningPlayer(NR)==Player(11) then
call SaveInteger(NZ,GetHandleId(NR),1,LoadInteger(NZ,GetHandleId(NR),1)+R2I(NT))
call SaveInteger(NZ,GetHandleId(NR),2+Mc,LoadInteger(NZ,GetHandleId(NR),2+Mc)+R2I(NT))
endif
if GetUnitTypeId(NR)==$6830304F then
if GetUnitState(NR,UNIT_STATE_LIFE)<=50000 then
call SetUnitState(NR,UNIT_STATE_LIFE,$5F5E0FF)
call UnitRemoveAbility(NR,$41304545)
call DisplayTextToPlayer(Player(Mc),0,0,"|c00ffff00Время боя|r: "+I2S(Na)+"сек.")
call DisplayTextToPlayer(Player(Mc),0,0,"|c00ff9696Средний ДПС|r: "+I2S(R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE))/Na)+" урона/сек.")
endif
if GetUnitAbilityLevel(NR,$41304545)==0 then
call lE(NS,NS,"Бой начался!",.03,255,100,100)
set Na=0
call UnitAddAbility(NR,$41304545)
set Me=CreateTimer()
call TimerStart(Me,1,true,function lH)
set Me=null
endif
endif
if GetUnitAbilityLevel(NR,$42505345)>0 then
call UnitRemoveAbility(NR,$42505345)
endif
if GetUnitState(NR,UNIT_STATE_LIFE)>.405 then
if IsUnitType(NS,UNIT_TYPE_HERO) then
if GetUnitAbilityLevel(NS,$41305336)>=1 then
call IssueImmediateOrder(Nd[Mc+1],"starfall")
elseif GetUnitAbilityLevel(NS,$41314154)>=1 then
call IssueImmediateOrder(Nd[Mc+1],"waterelemental")
call IssueTargetOrder(Nd[Mc+1],"thunderbolt",NR)
endif
if GetUnitAbilityLevel(NR,$42303030)>0 or GetUnitAbilityLevel(NR,$42303031)>0 then
call UnitRemoveAbility(NR,$42303030)
call UnitRemoveAbility(NR,$42303031)
if GetUnitAbilityLevel(NS,$41305554)>=1 and GetRandomInt(1,7)==1 then
call kT(NS,NR)
elseif GetUnitAbilityLevel(NR,$42303545)>0 then
call SetUnitState(NS,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(NS,UNIT_STATE_LIFE)+I2R(GetHeroStr(NS,true))/3*Ng[Mc+1]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl",NS,"overhead"))
elseif GetUnitAbilityLevel(NS,$42303546)>0 and GetUnitTypeId(NS)==$48303443 and GetRandomInt(1,12)==1 then
call kR(NS,NR)
elseif GetUnitAbilityLevel(NS,$41305947)>=1 then
if Nj[Mc+1]==true and GetUnitState(NS,UNIT_STATE_MANA)>=5+GetUnitAbilityLevel(NS,$41305947) then
call kX(NS,NR)
endif
if GetUnitAbilityLevel(NS,$41305939)>=1 or GetUnitAbilityLevel(NS,$41305958)>=1 then
if GetRandomInt(1,10)==1 then
call kb(NS,NR)
endif
endif
elseif GetUnitAbilityLevel(NS,$4130524D)>=1 then
call kV(NS,NR)
elseif GetUnitAbilityLevel(NS,$41305350)>=1 or GetUnitAbilityLevel(NS,$41305351)>=1 then
call kc(NS,NR)
elseif GetUnitAbilityLevel(NS,$41303950)>=1 or GetUnitAbilityLevel(NS,$4130394F)>=1 then
if Nj[Mc+1]==true and GetUnitStatePercent(NS,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)>2 then
call kW(NS,NR)
endif
elseif GetUnitAbilityLevel(NS,$41303833)>=1 or GetUnitAbilityLevel(NS,$41303834)>=1 then
if GetRandomInt(1,5)==1 then
call kd(NS,NR)
endif
elseif GetUnitAbilityLevel(NS,$41305550)>=1 then
if GetRandomInt(1,10)==1 then
call kf(NS,NR)
endif
elseif GetUnitAbilityLevel(NS,$41305037)>=1 or GetUnitAbilityLevel(NS,$41305145)>=1 then
if GetUnitAbilityLevel(NS,$42303349)>=1 then
call kh(NS,NR)
endif
if GetUnitAbilityLevel(NS,$41305047)>=1 and GetRandomInt(1,10)==1 then
call ki(NS,NR)
endif
elseif GetUnitTypeId(NS)==$48303437 then
if GetUnitAbilityLevel(NS,$41313347)>=1 then
call kj(NS,NR)
endif
if GetUnitAbilityLevel(NS,$41313839)>=1 and GetUnitAbilityLevel(NS,$41313838)==0 then
call kl(NS,NR)
endif
elseif GetUnitAbilityLevel(NS,$4130574C)>=1 then
if GetUnitAbilityLevel(NR,$4130574D)!=1 then
call UnitAddAbility(NR,$4130574D)
call ko(NS,NR)
endif
if GetUnitAbilityLevel(NS,$41304338)>=1 or GetUnitAbilityLevel(NS,$41304551)>=1 then
if GetRandomInt(1,7)==1 then
call ks(NS,NR)
endif
endif
elseif GetUnitAbilityLevel(NS,$41305845)>=1 then
if GetUnitAbilityLevel(NS,$42303059)>=1 then
set N0[Mc]=N0[Mc]+1
if N0[Mc]==4 then
set N0[Mc]=0
call kq(NS,NR)
endif
endif
if GetUnitAbilityLevel(NS,$41304C4E)>=1 and GetUnitAbilityLevel(NR,$41304C4E)>=1 then
call kt(NS,NR)
endif
elseif GetUnitAbilityLevel(NS,$41304B57)>=1 then
set N0[Mc]=N0[Mc]+1
if N0[Mc]==6 then
set N0[Mc]=0
if GetUnitAbilityLevel(NS,$41304B57)<15 then
call SetUnitAbilityLevel(NS,$41304B57,GetUnitAbilityLevel(NS,$41304B57)+1)
call lE(NS,NS,"Аррр ("+I2S(GetUnitAbilityLevel(NS,$41304B57))+")",.022,255,100,0)
endif
endif
if GetUnitAbilityLevel(NS,$41304236)>=1 or GetUnitAbilityLevel(NS,$41304544)>=1 then
if GetRandomInt(1,5)==1 then
call kv(NS,NR)
endif
endif
if GetRandomInt(1,5)==1 then
if lD(NS,$49304D54) or lD(NS,$49305741) then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Reapers Claws Orange.mdx",NS,"chest"))
call UnitDamageTarget(NS,NR,I2R(GetHeroStr(NS,true))*4,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif lD(NS,$49304B39) or lD(NS,$6D67746B) or lD(NS,$72726531) or lD(NS,$6D616E68) then
call UnitDamageTarget(NS,NR,I2R(GetHeroStr(NS,true))*2,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Reapers Claws Orange.mdx",NS,"chest"))
endif
endif
elseif GetUnitAbilityLevel(NS,$4131314B)>=1 or GetUnitAbilityLevel(NS,$4131314A)>=1 then
if GetRandomInt(1,5)==1 then
call kx(NS,NR)
endif
if GetUnitAbilityLevel(NR,$42303733)>=1 then
call kw(NS,NR)
endif
elseif GetUnitAbilityLevel(NS,$41305830)>=1 or GetUnitAbilityLevel(NS,$41305831)>=1 then
if GetRandomInt(1,5)==1 then
call kz(NS,NR)
endif
if GetUnitAbilityLevel(NS,$41305349)>=1 and GetRandomInt(1,5)==1 then
call ky(NS,NR)
endif
if GetUnitAbilityLevel(NS,$4130304E)>=1 then
call k1(NS,NR)
endif
elseif GetUnitAbilityLevel(NS,$41304653)>=1 and GetUnitAbilityLevel(NS,$42303741)>=1 then
call k3(NS,NR)
elseif GetUnitAbilityLevel(NS,$41304D4D)>=1 then
if GetUnitAbilityLevel(NR,$42303342)>=1 then
call k6(NS,NR)
endif
if GetUnitAbilityLevel(NR,$42303748)>=1 then
call k5(NS,NR)
endif
if GetRandomInt(1,7)==1 then
if lD(NS,$73747770) or lD(NS,$49304B30) or lD(NS,$49303951) or lD(NS,$49303949) then
call lB(NS,NR,GetHeroStr(NS,true)*2)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Reapers Claws Blue.mdx",NS,"chest"))
elseif lD(NS,$49304D5A) or lD(NS,$49305747) then
call lB(NS,NR,GetHeroStr(NS,true)*4)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Reapers Claws Blue.mdx",NS,"chest"))
endif
endif
endif
if GetUnitAbilityLevel(NS,$41313155)>=1 and GetUnitAbilityLevel(NS,$41313436)==0 and GetRandomInt(1,7)==1 then
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-NT)
endif
if GetUnitAbilityLevel(NR,$42303041)>0 then
call kg(NS,NR)
endif
if GetUnitAbilityLevel(NR,$41313542)>0 and GetRandomInt(1,4)==1 then
call k2(NS,NR)
endif
if GetUnitAbilityLevel(NS,$41305038)>0 then
call k4(NS,NR)
endif
if GetUnitAbilityLevel(NS,$41304837)>0 then
call UnitDamageTarget(NS,NR,I2R(GetHeroStr(NS,true)),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
if lD(NS,$73747265) and GetRandomInt(1,5)==1 then
call k7(NS,NR)
endif
if lD(NS,$49304C37) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NS,NR,I2R(GetHeroInt(NS,true)/2),true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call SetUnitState(NS,UNIT_STATE_MANA,GetUnitState(NS,UNIT_STATE_MANA)+70)
elseif lD(NS,$49305037) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NS,NR,I2R(GetHeroStr(NS,true)),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif lD(NS,$49304C42) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NS,NR,I2R(GetHeroAgi(NS,true)),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif lD(NS,$49305541) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NS,NR,I2R(GetHeroAgi(NS,true)*3/2),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif lD(NS,$49305538) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NS,NR,I2R(GetHeroStr(NS,true)*3/2),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif lD(NS,$49305536) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NS,NR,I2R(GetHeroInt(NS,true)),true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call SetUnitState(NS,UNIT_STATE_MANA,GetUnitState(NS,UNIT_STATE_MANA)+100)
endif
endif
endif
if GetUnitTypeId(NS)==$68303452 then
call lB(MV[Mc],NR,R2I(I2R(GetUnitAbilityLevel(MV[Mc],$41305939))*(I2R(GetHeroAgi(MV[Mc],true))*.2)*Ne[Mc+1]))
call lB(MV[Mc],NR,R2I(I2R(GetHeroAgi(MV[Mc],true)*3)*Ne[Mc+1]))
elseif GetUnitTypeId(NS)==$75303038 then
set N7=I2R(GetHeroAgi(MV[Mc],true)*2+50)*Ne[Mc+1]
call lB(MV[Mc],NR,R2I(N7))
elseif GetUnitTypeId(NS)==$68303237 then
call k8(MV[Mc],NR,GetHeroInt(MV[Mc],true)/2)
elseif GetUnitTypeId(NS)==$7530304E then
call k8(MV[Mc],NR,R2I(I2R(100*GetUnitAbilityLevel(MV[Mc],$41314432)+GetHeroInt(MV[Mc],true)*3)*N1[Mc+1]))
elseif GetUnitTypeId(NS)==$68303258 then
if GetUnitAbilityLevel(MV[Mc],$41304D59)>=1 then
call k8(MV[Mc],NR,R2I(I2R(GetHeroInt(MV[Mc],true))*6.5*N1[Mc+1]))
elseif GetUnitAbilityLevel(MV[Mc],$41304D53)>=1 then
set Np=GetUnitAbilityLevel(MV[Mc],$41304D53)*R2I(I2R(GetHeroInt(MV[Mc],true))*.7*N1[Mc+1])
call k8(MV[Mc],NR,Np)
endif
elseif GetUnitTypeId(NS)==$68303136 then
if GetUnitAbilityLevel(NS,$41305139)>=1 then
call k8(MV[Mc],NR,R2I(I2R(GetUnitAbilityLevel(MV[Mc],$41314237)*(GetHeroInt(MV[Mc],true)/10))*N1[Mc+1]))
call k8(MV[Mc],NR,R2I(I2R(GetUnitAbilityLevel(MV[Mc],$41314237)*100)*N1[Mc+1]))
endif
elseif GetUnitTypeId(NS)==$6E30354A then
set MC=(GetHeroStr(MV[Mc],true)+GetHeroAgi(MV[Mc],true)+GetHeroInt(MV[Mc],true))/2
call lB(MV[Mc],NR,MC)
call IssueImmediateOrder(NS,"howlofterror")
if GetRandomInt(1,10)==1 then
call lB(MV[Mc],NR,MC*GetUnitAbilityLevel(MV[Mc],$41305333))
endif
elseif GetUnitTypeId(NS)==$65303136 then
set MC=GetHeroStr(MV[Mc],true)+GetHeroAgi(MV[Mc],true)+GetHeroInt(MV[Mc],true)
call k8(MV[Mc],NR,MC*2/5)
set Nq=GetUnitLoc(NR)
call IssuePointOrderLoc(NS,"breathoffire",Nq)
call IssuePointOrderLoc(NS,"rainoffire",Nq)
call RemoveLocation(Nq)
set Nq=null
elseif GetUnitTypeId(NS)==$68303044 then
set MC=GetHeroStr(MV[Mc],true)+GetHeroAgi(MV[Mc],true)+GetHeroInt(MV[Mc],true)
call k8(MV[Mc],NR,MC/2)
elseif GetUnitTypeId(NS)==$65303050 then
set MC=(GetHeroStr(MV[Mc],true)+GetHeroAgi(MV[Mc],true)+GetHeroInt(MV[Mc],true))*2
call k8(MV[Mc],NR,MC*GetUnitAbilityLevel(MV[Mc],$41305336))
elseif GetUnitTypeId(NS)==$6F303044 then
set MC=GetHeroStr(MV[Mc],true)+GetHeroAgi(MV[Mc],true)+GetHeroInt(MV[Mc],true)
call k9(MV[Mc],NR,MC/2)
call IssueTargetOrder(NS,"curse",NR)
elseif GetUnitTypeId(GetEventDamageSource())==$6E303549 then
set MC=(GetHeroStr(MV[Mc],true)+GetHeroAgi(MV[Mc],true)+GetHeroInt(MV[Mc],true))/2
call lB(MV[Mc],NR,MC)
call IssueTargetOrder(NS,"thunderbolt",NR)
if GetRandomInt(1,10)==1 then
call lB(MV[Mc],NR,MC*GetUnitAbilityLevel(MV[Mc],$41305335))
endif
elseif GetUnitTypeId(NS)==$68303358 then
set MC=(GetHeroAgi(MV[Mc],true)+GetHeroInt(MV[Mc],true))/10*GetUnitAbilityLevel(MV[Mc],$4130524B)
call lB(MV[Mc],NR,R2I(I2R(MC)*Ne[Mc+1]))
elseif GetUnitTypeId(NS)==$6830335A or GetUnitTypeId(NS)==$6830374A then
set MC=(GetHeroAgi(MV[Mc],true)+GetHeroInt(MV[Mc],true))*GetUnitAbilityLevel(MV[Mc],$41304657)
call lB(MV[Mc],NR,R2I(I2R(MC)*Ne[Mc+1]))
elseif GetUnitTypeId(NS)==$6E303651 then
set MC=GetHeroAgi(MV[Mc],true)/2
call lB(MV[Mc],NR,R2I(I2R(MC)*Ne[Mc+1]))
elseif GetUnitTypeId(NS)==$68303355 then
set MC=GetHeroStr(MV[Mc],true)/3*GetUnitAbilityLevel(MV[Mc],$4130304F)
call lB(MV[Mc],NR,R2I(I2R(MC)*Nh[Mc+1]))
elseif GetUnitTypeId(NS)==$6E30364A and GetUnitAbilityLevel(NR,$42303931)>=1 then
set MC=GetHeroStr(MV[Mc],true)/2
call lB(MV[Mc],NR,R2I(I2R(MC)*Nh[Mc+1]))
call lE(NR,MV[Mc],"+"+I2S(R2I(I2R(MC)*Nh[Mc+1])),.02,0,100,255)
elseif GetUnitTypeId(NS)==$6E303647 then
set Ns=GetUnitState(MV[Mc],UNIT_STATE_MANA)/10*N1[GetPlayerId(GetOwningPlayer(MV[Mc]))+1]
set Nt=I2R(GetUnitAbilityLevel(MV[Mc],$4131364E)*50+GetHeroInt(MV[Mc],true)/2)*N1[GetPlayerId(GetOwningPlayer(MV[Mc]))+1]
call k8(MV[Mc],NR,R2I(Ns+Nt))
call SetUnitState(MV[Mc],UNIT_STATE_MANA,GetUnitState(MV[Mc],UNIT_STATE_MANA)+GetUnitState(MV[Mc],UNIT_STATE_MAX_MANA)*.03)
call lE(NR,MV[Mc],"|c007d7d7d+"+I2S(R2I(Ns+Nt)),.022,255,255,255)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Blink Teal Caster.mdx",MV[Mc],"origin"))
endif
endif
set NR=null
set NS=null
endfunction
function lJ takes unit Hw returns nothing
if not HaveSavedInteger(NZ,GetHandleId(Hw),0) then
call SaveInteger(NZ,GetHandleId(Hw),0,0)
call TriggerRegisterUnitEvent(NQ,Hw,EVENT_UNIT_DAMAGED)
endif
endfunction
function lK takes nothing returns nothing
call RemoveUnit(LoadUnitHandle(NZ,GetHandleId(GetExpiredTimer()),0))
call RemoveSavedInteger(NZ,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function lL takes unit Hw returns nothing
local integer MC=0
set MS=0
loop
set MR[MC]=""
set MC=MC+1
exitwhen MC>11
endloop
call TriggerSleepAction(2)
call MultiboardSetItemValueBJ(OE[10],2,1,GetUnitName(Hw))
call MultiboardSetItemValueBJ(OE[10],2,2,I2S(LoadInteger(NZ,GetHandleId(Hw),1)))
call MultiboardSetItemValueBJ(OE[10],3,2,"100%")
set MC=0
loop
if LoadInteger(NZ,GetHandleId(Hw),2+MC)>0 then
call MultiboardSetItemWidthBJ(OE[10],1,4+MC,8.)
call MultiboardSetItemWidthBJ(OE[10],2,4+MC,8.)
call MultiboardSetItemStyleBJ(OE[10],2,4+MC,true,true)
call MultiboardSetItemIconBJ(OE[10],2,4+MC,"war3mapImported\\BTNDamage.blp")
call MultiboardSetItemValueBJ(OE[10],1,4+MC,OF[MC]+OG[MC])
call MultiboardSetItemValueBJ(OE[10],2,4+MC,I2S(LoadInteger(NZ,GetHandleId(Hw),2+MC)))
call MultiboardSetItemValueBJ(OE[10],3,4+MC,I2S(100*LoadInteger(NZ,GetHandleId(Hw),2+MC)/LoadInteger(NZ,GetHandleId(Hw),1))+"%")
else
call MultiboardSetItemStyleBJ(OE[10],2,4+MC,false,false)
call MultiboardSetItemValueBJ(OE[10],1,4+MC," ")
call MultiboardSetItemValueBJ(OE[10],2,4+MC," ")
call MultiboardSetItemValueBJ(OE[10],3,4+MC," ")
endif
call RemoveSavedInteger(NZ,GetHandleId(Hw),2+MC)
set MC=MC+1
exitwhen MC==8
endloop
set MC=0
loop
call MultiboardSetItemWidthBJ(OE[10],1,13+MC,20.)
call MultiboardSetItemValueBJ(OE[10],1,13+MC,MR[MC])
set MC=MC+1
exitwhen MC>11
endloop
endfunction
function lM takes unit Hw returns nothing
local timer Me
if HaveSavedInteger(NZ,GetHandleId(Hw),0) then
if GetOwningPlayer(Hw)==Player(11) then
call lL(Hw)
endif
call RemoveSavedInteger(NZ,GetHandleId(Hw),0)
set Me=CreateTimer()
call SaveUnitHandle(NZ,GetHandleId(Me),0,Hw)
call TimerStart(Me,3,false,function lK)
set Me=null
endif
endfunction
function lN takes unit Hw returns nothing
call lM(Hw)
endfunction
function lO takes nothing returns nothing
local unit Hw=GetTriggerUnit()
call lN(Hw)
set Hw=null
endfunction
function lP takes nothing returns nothing
local unit Hw=GetTriggerUnit()
if IsUnitEnemy(Hw,Player(0))==true then
if GetUnitAbilityLevel(Hw,$416C6F63)==0 then
call lJ(Hw)
endif
endif
set Hw=null
endfunction
function lQ takes nothing returns nothing
local unit Hw=GetEnumUnit()
call lJ(Hw)
set Hw=null
endfunction
function lR takes nothing returns nothing
local trigger N8
local region N9
local group OB
local boolexpr OC
local trigger OD
local timer He
set NQ=CreateTrigger()
call TriggerAddAction(NQ,function lI)
set N8=CreateTrigger()
set N9=CreateRegion()
call RegionAddRect(N9,GetPlayableMapRect())
call TriggerRegisterEnterRegion(N8,N9,null)
call TriggerAddAction(N8,function lP)
set OB=CreateGroup()
set OC=Condition(function lF)
call GroupEnumUnitsInRect(OB,GetPlayableMapRect(),OC)
call DestroyBoolExpr(OC)
call ForGroup(OB,function lQ)
call DestroyGroup(OB)
set OC=null
set OB=null
set N8=null
set OD=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(OD,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(OD,function lO)
set OD=null
set He=CreateTimer()
set OH=GetHandleId(He)
if OH!=$10347E then
endif
set He=null
set N9=null
endfunction
function lS takes player Hv returns unit
return MV[GetPlayerId(Hv)]
endfunction
function lT takes player Hv returns unit
return NM[2+2*GetPlayerId(Hv)]
endfunction
function lU takes player Hv,unit Hw returns nothing
set MV[GetPlayerId(Hv)]=Hw
endfunction
function lV takes player Hv,unit Hw returns nothing
set NM[2+2*GetPlayerId(Hv)]=Hw
endfunction
function lW takes string Oj,integer Ok returns string
local integer Ol=StringHash(Oj)
if Ol<0 then
set Ol=Ol*-1
endif
return jw(Ol,Ok)
endfunction
function lX takes unit NS,integer Ok returns string
return jw(jh(GetUnitTypeId(NS)),Ok)
endfunction
function lY takes unit OT,integer Ok returns string
return jw(jh(GetUnitTypeId(OT)),Ok)
endfunction
function lZ takes nothing returns nothing
local integer MC=0
local integer Me
loop
exitwhen not (MC<8)
set OI[MC]=0
set Me=0
loop
exitwhen not (Me<6*OJ)
set OK[6*OJ*MC+Me]=0
set Me=Me+1
endloop
set MC=MC+1
endloop
endfunction
function la takes string M7 returns string
local string Oh=""
set Oh=Oh+jw(IAbsBJ(StringHash(M7)),4)
return Oh
endfunction
function lb takes integer OU,integer OV,integer OW returns integer
return OK[6*OJ*OU+6*OV+OW]
endfunction
function lc takes integer OU,integer OV,integer OW returns integer
return OZ[6*OJ*OU+6*OV+OW]
endfunction
function ld takes integer OU,integer OV,integer OW,integer OX returns nothing
set OK[6*OJ*OU+6*OV+OW]=OX
endfunction
function le takes integer OU,integer OV,integer OW,integer OY returns nothing
set OZ[6*OJ*OU+6*OV+OW]=OY
endfunction
function lf takes item MC returns integer
if MC!=null then
return GetItemTypeId(MC)
endif
return 0
endfunction
function lg takes player Hv,unit NS,unit OT,string Oc returns nothing
local integer OU=GetPlayerId(Hv)
local string Od=OG[GetPlayerId(Hv)]
local string Oe=""
local string Op="Сохранение прошло |c001EFF00успешно.|r"
local integer MC=0
local integer Me
local integer NI
local integer NJ
local string Om=""
local integer Np
local integer Oo
local integer On
local string Nq
set Oe=Oe+jw(R2I(1000*Oi),4)
set Oe=Oe+lW(Od,6)
set Oe=Oe+lX(NS,2)
set Oe=Oe+jw(GetHeroLevel(NS),2)
set Oe=Oe+lY(OT,2)
loop
exitwhen not (MC<6)
set Me=lf(UnitItemInSlot(NS,MC))
set Oe=Oe+jw(jj(Me),2)
set MC=MC+1
endloop
set MC=0
loop
exitwhen not (MC<6)
call ld(OU,OI[OU],MC,lf(UnitItemInSlot(OT,MC)))
set MC=MC+1
endloop
set MC=0
loop
exitwhen not (MC<OJ)
set Me=0
loop
exitwhen not (Me<6)
set Oe=Oe+jw(jj(lb(OU,MC,Me)),2)
set Me=Me+1
endloop
set MC=MC+1
endloop
set NI=NK[GetPlayerId(Hv)+1]/3
set NJ=NL[GetPlayerId(Hv)+1]/3
set Oe=Oe+jw(NI,4)
set Oe=Oe+jw(NJ,4)
set MC=0
loop
exitwhen not (MC<jd())
set Me=jl(MC)
set Np=GetUnitAbilityLevel(NS,Me)
set Om=Om+jw(Np,1)
set MC=MC+1
endloop
set Oe=Oe+la(Oe)
set Om=Om+la(Oe)+la(Om)
set On=StringLength(Oc)
if GetLocalPlayer()==Hv then
set Nq=Od+" "+GetUnitName(NS)+" lvl "+I2S(GetHeroLevel(NS))
call PreloadGenClear()
call Preload("\n\r\nPassword 1:\n-Load1 "+Oe+"\n")
call Preload("\n\r\nPassword 2:\n-Load2 "+Om+"\n")
call Preload("Золото: "+I2S(GetPlayerState(Hv,PLAYER_STATE_RESOURCE_GOLD)))
call Preload("Кровавые Метки: "+I2S(GetPlayerState(Hv,PLAYER_STATE_RESOURCE_LUMBER)))
call Preload("Наигранное время: "+I2S(GetUnitAbilityLevel(MV[GetPlayerId(Hv)],$41496432))+" минут "+I2S(GetUnitAbilityLevel(MV[GetPlayerId(Hv)],$41496433))+" часов "+I2S(GetUnitAbilityLevel(MV[GetPlayerId(Hv)],$41496434))+" дней")
call Preload("Курьер: "+GetUnitName(NM[2+2*GetPlayerId(Hv)]))
call Preload("Предметы героя:")
set Oo=0
loop
if GetItemName(UnitItemInSlot(MV[GetPlayerId(Hv)],Oo))!=null then
call Preload(I2S(Oo+1)+": "+GetItemName(UnitItemInSlot(MV[GetPlayerId(Hv)],Oo)))
endif
set Oo=Oo+1
exitwhen Oo>5
endloop
call Preload("Предметы курьера:")
set Me=0
loop
set Oo=0
loop
if OK[6*OJ*GetPlayerId(Hv)+6*Me+Oo]>0 then
call Preload(I2S(Oo+1)+": "+GetObjectName(OK[6*OJ*GetPlayerId(Hv)+6*Me+Oo]))
endif
set Oo=Oo+1
exitwhen Oo>5
endloop
set Me=Me+1
exitwhen Me==4
endloop
call PreloadGenEnd("TCoM_ORPG\\"+GetUnitName(NS)+"\\"+Nq+".txt")
if SubString(Oc,0,4)=="-exs" and On>5 then
call PreloadGenClear()
set Nq=SubString(Oc,5,On)
call Preload("\")\ncall SetPlayerName(Player(14),\""+Oe+"\")\n//")
call Preload("\")\ncall SetPlayerName(Player(15),\""+Om+"\")\n//")
call PreloadGenEnd("TCoM_ORPG\\autosave\\"+Nq+".txt")
endif
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,15,Op)
endif
endfunction
function lh takes player Hv,string Oc returns nothing
call lg(Hv,lS(Hv),lT(Hv),Oc)
endfunction
function li takes nothing returns nothing
local string Oc
if not Ob then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,15,"Нельзя сохраняться, пока не закончилась загрузка персонажа")
return
endif
set Oc=GetEventPlayerChatString()
call lh(GetTriggerPlayer(),Oc)
endfunction
function lj takes string O4 returns nothing
local integer OU=GetPlayerId(GetTriggerPlayer())
local string Oe=Ou[OU]
local integer O5=ji(jy(SubString(Oe,0,2)))
local integer O6=jy(SubString(Oe,2,4))
local unit NS=CreateUnit(GetTriggerPlayer(),O5,OP,OQ,0.)
local integer MC=0
local integer Me
local integer O7
local unit OT
local integer Np
local integer OV=0
local string Nq
local integer O8
local integer O9
local integer PB
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",OP,OQ))
loop
exitwhen not (MC<jd())
set Me=jy(jq(O4,MC))
if Me>0 then
call UnitAddAbility(NS,jl(MC))
call SetUnitAbilityLevel(NS,jl(MC),Me)
endif
set MC=MC+1
endloop
call SetHeroLevel(NS,O6,false)
set O7=ji(jy(SubString(Oe,4,6)))
set OT=CreateUnit(GetTriggerPlayer(),O7,OP,OQ,0.)
call UnitAddAbility(OT,$41314136)
call lU(GetTriggerPlayer(),NS)
call lV(GetTriggerPlayer(),OT)
set MC=0
loop
exitwhen not (MC<6)
set Me=jy(SubString(Oe,6+2*MC,8+2*MC))
set Np=jk(Me)
if Np!=0 then
set NG=false
call UnitAddItemToSlotById(NS,Np,MC)
set NG=true
endif
set MC=MC+1
endloop
loop
exitwhen not (OV<OJ)
set MC=0
loop
exitwhen not (MC<6)
set Nq=SubString(Oe,18+12*OV+2*MC,20+12*OV+2*MC)
call ld(OU,OV,MC,jk(jy(Nq)))
set MC=MC+1
endloop
set OV=OV+1
endloop
set MC=0
loop
exitwhen not (MC<6)
set Me=lb(OU,OI[OU],MC)
if Me!=0 then
set NG=false
call UnitAddItemToSlotById(OT,Me,MC)
set NG=true
endif
set MC=MC+1
endloop
set O8=20+12*(OJ-1)+10
set O9=jy(SubString(Oe,O8,O8+4))
set PB=jy(SubString(Oe,O8+4,O8+8))
call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD,O9)
call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_LUMBER,PB)
if GetTriggerPlayer()==GetLocalPlayer() then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,15,"|c001EFF00Успешная|r загрузка!")
call PanCameraToTimed(OP,OQ,0.)
endif
set OT=null
set NS=null
endfunction
function lk takes string M7 returns nothing
local integer PD=StringLength(M7)
local integer PE=1
local integer MC
loop
exitwhen PE>PD
set MC=1
loop
if SubString(M7,PE-1,PE)==SubString(PF,MC-1,MC) then
call ClearSelection()
call SelectUnit(PG[MC],true)
set MC=90
endif
exitwhen MC==90
set MC=MC+1
endloop
set PE=PE+1
endloop
call BJDebugMsg("A "+PH)
endfunction
function ll takes nothing returns nothing
set PH=PH+SubString(PF,GetUnitUserData(GetTriggerUnit())-1,GetUnitUserData(GetTriggerUnit()))
endfunction
function lm takes nothing returns nothing
local string PC=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))
if GetLocalPlayer()==GetTriggerPlayer() then
call Preloader("TCoM_ORPG\\autosave\\"+PC+".txt")
call TriggerSleepAction(1)
call lk(GetPlayerName(Player(14)))
endif
endfunction
function ln takes nothing returns nothing
local integer M5
local string Oe
local string Oq
local integer Os
local integer Ot
local integer Me
local integer Np
local string Nq
local string Ns
local string Nt
local string Ov
local string Ow
local string Ox
local string Oy
local integer Oz
local group O1
local boolean O2
local unit O3
if OR[GetPlayerId(GetTriggerPlayer())] then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Загружаться можно только |c00FF0000один|r раз!")
return
endif
set M5=StringLength(GetEventPlayerChatString())
set Oe=SubString(GetEventPlayerChatString(),7,M5)
set Oq=SubString(GetEventPlayerChatString(),0,6)
if Oq=="-Load1" then
set Os=4+6+2+2+2+(1+OJ)*6*2+4+4+4
else
if Oq=="-Load2" then
set Os=jd()*1+8
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Неизвестная команда |c00FF0000 "+Oq+"|r")
endif
endif
if StringLength(Oe)>Os then
if GetLocalPlayer()==GetTriggerPlayer() then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,15,"Сейв код слишком |c00FF0000длинный|r. Длина сейв кода |c00FF0000всегда равна "+I2S(Os))
endif
return
endif
if StringLength(Oe)<Os then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Сейв код слишком |c00FF0000короткий|r. Длина сейв кода |c00FF0000всегда равна "+I2S(Os))
return
endif
set Ot=GetPlayerId(GetTriggerPlayer())
if Oq=="-Load1" then
set Ou[Ot]=Oe
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Введите второй загрузочный код! |c00ffff00-Load2 *******")
endif
if Oq=="-Load2" then
set Me=StringLength(Ou[Ot])
set Np=StringLength(Oe)
set Nq=SubString(Ou[Ot],Me-4,Me)
set Ns=SubString(Oe,Np-4,Np)
set Nt=SubString(Oe,Np-8,Np-4)
set Ou[Ot]=SubString(Ou[Ot],0,Me-4)
set Ov=SubString(Oe,0,Np-8)
set Ow=la(Ou[Ot])
set Ox=la(Ov)
set Oy=la(Ou[Ot]+Ow)
if Ow!=Nq or Ox!=Ns or Oy!=Nt then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Ваш сейв код |c00FF0000не прошел проверку подлинности|r.")
return
endif
set Oz=jy(SubString(Ou[Ot],0,4))
if Oz>R2I(1000*Oi) then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Этот сейв код |c00FF0000был создан в более новой версии "+R2SW(Oz/1000.,3,2)+"|r")
return
endif
if SubString(Ou[Ot],4,10)!=lW(GetPlayerName(GetTriggerPlayer()),6) then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Этот сейв код принадлежит |c00FF0000не вам|r")
return
endif
set O1=GetUnitsOfPlayerAll(GetTriggerPlayer())
set O2=false
loop
exitwhen not not O2
set O3=FirstOfGroup(O1)
if O3==null then
set O2=true
else
call GroupRemoveUnit(O1,O3)
endif
endloop
set Ou[Ot]=SubString(Ou[Ot],10,Me)
call lj(Ov)
set OR[GetPlayerId(GetTriggerPlayer())]=true
endif
set O3=null
set O1=null
endfunction
function lo takes nothing returns nothing
local unit OT=GetSpellAbilityUnit()
local integer OU=GetPlayerId(GetOwningPlayer(OT))
local integer MC=0
local item Me
local integer Np
local integer Nq
loop
exitwhen not (MC<6)
call ld(OU,OI[OU],MC,lf(UnitItemInSlot(OT,MC)))
call le(OU,OI[OU],MC,GetItemCharges(UnitItemInSlot(OT,MC)))
set Me=UnitRemoveItemFromSlot(OT,MC)
call RemoveItem(Me)
set MC=MC+1
endloop
call UnitRemoveAbility(OT,Oa[OI[OU]])
set OI[OU]=OI[OU]+1
if OI[OU]==OJ then
set OI[OU]=0
endif
set MC=0
loop
exitwhen not (MC<6)
set Np=lb(OU,OI[OU],MC)
set Nq=lc(OU,OI[OU],MC)
if Np!=0 then
set NG=false
call UnitAddItemToSlotById(OT,Np,MC)
call SetItemCharges(UnitItemInSlot(OT,MC),Nq)
set NG=true
endif
set MC=MC+1
endloop
set Me=null
set OT=null
endfunction
function lp takes nothing returns nothing
local integer My=GetSpellAbilityId()
if My==OS then
call lo()
endif
endfunction
function lq takes nothing returns nothing
local integer MC=0
call lZ()
set OL=CreateTrigger()
set OM=CreateTrigger()
set ON=CreateTrigger()
set OO=CreateTrigger()
set OP=GetRectCenterX(GR)
set OQ=GetRectCenterY(GR)
loop
exitwhen not (MC<8)
call TriggerRegisterPlayerUnitEvent(OL,Player(MC),EVENT_PLAYER_UNIT_SPELL_CAST,null)
call TriggerRegisterPlayerChatEvent(OM,Player(MC),"-Save",false)
call TriggerRegisterPlayerChatEvent(OM,Player(MC),"-ыфму",false)
call TriggerRegisterPlayerChatEvent(OM,Player(MC),"-exs",false)
call TriggerRegisterPlayerChatEvent(ON,Player(MC),"-Load",false)
call TriggerRegisterPlayerChatEvent(OO,Player(MC),"-exl",false)
set OR[MC]=false
set MC=MC+1
endloop
call TriggerAddAction(OL,function lp)
call TriggerAddAction(OM,function li)
call TriggerAddAction(ON,function ln)
call TriggerAddAction(OO,function lm)
set PI=CreateTrigger()
set MC=1
loop
set PG[MC]=CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE),$68303536,22230,-24300,0)
call SetUnitUserData(PG[MC],MC)
call TriggerRegisterUnitEvent(PI,PG[MC],EVENT_UNIT_SELECTED)
set MC=MC+1
exitwhen MC==StringLength(PJ)
endloop
call TriggerAddAction(PI,function ll)
endfunction
function lr takes nothing returns nothing
local integer MC=0
set MC=0
loop
exitwhen MC>1
set QK[MC]=0
set MC=MC+1
endloop
set QL=0
set QM=0
set QN=CreateGroup()
set QO=0
set QP=0
set QQ=0
set MC=0
loop
exitwhen MC>1
set QR[MC]=0
set MC=MC+1
endloop
set QS=false
set QT=0
set QU=0
set QV=0
set QW=0
set QX=0
set QY=0
set QZ=false
set Qa=0
set Qb=0
set Qc=0
set Qd=0
set Qe=""
set Qf=false
set Qg=false
set MC=0
loop
exitwhen MC>1
set Qh[MC]=0
set MC=MC+1
endloop
set Qi=false
set MC=0
loop
exitwhen MC>1
set Qj[MC]=0
set MC=MC+1
endloop
set Qk=0
set Ql=0
set Qm=CreateTimer()
set MC=0
loop
exitwhen MC>1
set Qn[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Qo[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Qp[MC]=0
set MC=MC+1
endloop
set Qq=false
set Qr=false
set MC=0
loop
exitwhen MC>1
set Qs[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Qt[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Qu[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Qv[MC]=0
set MC=MC+1
endloop
set Qw=0
set MC=0
loop
exitwhen MC>1
set Qx[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Qy[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Qz[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Q0[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Q1[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Q2[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Q3[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Q4[MC]=0
set MC=MC+1
endloop
set Q5=0
set MC=0
loop
exitwhen MC>1
set Q6[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Q7[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Q8[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Q9[MC]=0
set MC=MC+1
endloop
set RB=0
set MC=0
loop
exitwhen MC>1
set RC[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RD[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RE[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RF[MC]=CreateTimer()
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RG[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RH[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RI[MC]=0
set MC=MC+1
endloop
set RJ=0
set RK=0
set RL=0
set MC=0
loop
exitwhen MC>1
set RM[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RN[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RO[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RP[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RQ[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RR[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RS[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RT[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RU[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RV[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RW[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RX[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RY[MC]=CreateGroup()
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set RZ[MC]=false
set MC=MC+1
endloop
set Ra=CreateTimer()
set MC=0
loop
exitwhen MC>1
set Rb[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Rc[MC]="да"
set MC=MC+1
endloop
set Rd=CreateGroup()
set Re=CreateTimer()
set Rf=CreateGroup()
set Rg=CreateTimer()
set Rh=CreateGroup()
set Ri=0
set Rj=0
set Rk=CreateTimer()
set Rl=0
set Rm=0
set Rn=0
set Ro=0
set Rp=0
set MC=0
loop
exitwhen MC>1
set Rq[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Rr[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Rs[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Rt[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Ru[MC]=0
set MC=MC+1
endloop
set Rv=0
set MC=0
loop
exitwhen MC>1
set Rw[MC]=0
set MC=MC+1
endloop
set Rx=0
set MC=0
loop
exitwhen MC>1
set Ry[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Rz[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set R0[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set R1[MC]=CreateGroup()
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set R2[MC]=false
set MC=MC+1
endloop
set R3=CreateTimer()
set R4=CreateGroup()
set R5=0
set MC=0
loop
exitwhen MC>1
set R6[MC]=0
set MC=MC+1
endloop
set R7=0
set MC=0
loop
exitwhen MC>1
set R8[MC]=false
set MC=MC+1
endloop
set R9=CreateTimer()
set MM=0
set MC=0
loop
exitwhen MC>1
set SB[MC]=0
set MC=MC+1
endloop
set SC=0
set SD=0
set MC=0
loop
exitwhen MC>1
set SE[MC]=0
set MC=MC+1
endloop
set SF=0
set MC=0
loop
exitwhen MC>1
set SG[MC]=0
set MC=MC+1
endloop
set SH=0
set MC=0
loop
exitwhen MC>1
set SI[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set SJ[MC]=false
set MC=MC+1
endloop
set SK=CreateGroup()
set MC=0
loop
exitwhen MC>1
set SL[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set SM[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set SN[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set SO[MC]=0
set MC=MC+1
endloop
set SP=0
set SQ=CreateTimer()
set SR=0
set SS=0
set ST=CreateGroup()
set SU=0
set MC=0
loop
exitwhen MC>1
set SV[MC]=CreateGroup()
set MC=MC+1
endloop
set SW=0
set MC=0
loop
exitwhen MC>1
set SX[MC]=false
set MC=MC+1
endloop
set SY=CreateTimer()
set MC=0
loop
exitwhen MC>1
set SZ[MC]=0
set MC=MC+1
endloop
set Sa=false
set Sb=0
set Sc=0
set MC=0
loop
exitwhen MC>1
set Sd[MC]=""
set MC=MC+1
endloop
set Se=0
set Sf=0
set MC=0
loop
exitwhen MC>1
set Sg[MC]=0
set MC=MC+1
endloop
set Sh=0
set Si=0
set MC=0
loop
exitwhen MC>1
set Sj[MC]=0
set MC=MC+1
endloop
set Sk=0
set Sl=0
set Sm=0
set Sn=0
set So=0
set Sp=0
set Sq=0
set MC=0
loop
exitwhen MC>1
set Sr[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Ss[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set St[MC]=false
set MC=MC+1
endloop
set Su=0
set Sv=0
set MC=0
loop
exitwhen MC>1
set Sw[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Sx[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Sy[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Sz[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set S0[MC]=false
set MC=MC+1
endloop
set S1=0
set MC=0
loop
exitwhen MC>1
set S2[MC]=false
set MC=MC+1
endloop
set S3=0
set MC=0
loop
exitwhen MC>1
set S4[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set S5[MC]=false
set MC=MC+1
endloop
set S6=0
set MC=0
loop
exitwhen MC>1
set S7[MC]=CreateGroup()
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set S8[MC]=CreateTimer()
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set S9[MC]=0
set MC=MC+1
endloop
set TB=CreateTimer()
set TC=CreateTimer()
set TD=CreateGroup()
set TE=0
set MC=0
loop
exitwhen MC>1
set TF[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set TG[MC]=0
set MC=MC+1
endloop
set TH=0
set TI=0
set TJ=0
set MC=0
loop
exitwhen MC>1
set TK[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set NK[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set NL[MC]=0
set MC=MC+1
endloop
set TL=0
set MC=0
loop
exitwhen MC>1
set TM[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set TN[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set TO[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set TP[MC]=0
set MC=MC+1
endloop
set TQ=false
set TR=0
set MC=0
loop
exitwhen MC>1
set Nh[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set N1[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set TS[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Ne[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Ng[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set TT[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set TU[MC]=0
set MC=MC+1
endloop
set TV=0
set MC=0
loop
exitwhen MC>1
set TW[MC]=CreateGroup()
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Nj[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set TX[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set TY[MC]=0
set MC=MC+1
endloop
set TZ=0
set MC=0
loop
exitwhen MC>1
set Ta[MC]=0
set MC=MC+1
endloop
set Tb=0
set MC=0
loop
exitwhen MC>1
set Tc[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Td[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Te[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Tf[MC]=0
set MC=MC+1
endloop
set Tg=0
set MC=0
loop
exitwhen MC>1
set Th[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Ti[MC]=0
set MC=MC+1
endloop
set Tj=CreateGroup()
set Tk=0
set MC=0
loop
exitwhen MC>1
set Tl[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Tm[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Tn[MC]=CreateGroup()
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set To[MC]=0
set MC=MC+1
endloop
set Tp=0
set Tq=CreateGroup()
set Tr=CreateGroup()
set MC=0
loop
exitwhen MC>1
set Ts[MC]=CreateGroup()
set MC=MC+1
endloop
set Tt=0
set MC=0
loop
exitwhen MC>1
set Tu[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Tv[MC]=0
set MC=MC+1
endloop
set Tw=0
set Tx=0
set MC=0
loop
exitwhen MC>1
set Ty[MC]=CreateTimer()
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set Tz[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set T0[MC]=CreateGroup()
set MC=MC+1
endloop
set T1=0
set MC=0
loop
exitwhen MC>1
set T2[MC]=0
set MC=MC+1
endloop
set T3=0
set MC=0
loop
exitwhen MC>1
set T4[MC]=false
set MC=MC+1
endloop
set T5=0
set MC=0
loop
exitwhen MC>1
set T6[MC]=false
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set T7[MC]=0
set MC=MC+1
endloop
set T8=0
set MC=0
loop
exitwhen MC>1
set T9[MC]=0
set MC=MC+1
endloop
set UB=CreateTimer()
set UC=0
set UD=0
set UE=0
set UF=0
set MC=0
loop
exitwhen MC>1
set UG[MC]=0
set MC=MC+1
endloop
set UH=""
set MC=0
loop
exitwhen MC>1
set UI[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set UJ[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set UK[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set UL[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set UM[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set UN[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set UO[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>8
set UP[MC]=CreateGroup()
set MC=MC+1
endloop
set UQ=DialogCreate()
set MC=0
loop
exitwhen MC>1
set UR[MC]=0
set MC=MC+1
endloop
set MC=0
loop
exitwhen MC>1
set US[MC]=0
set MC=MC+1
endloop
endfunction
function lt takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304839,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function lu takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304839,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function lv takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304959,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function lw takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304959,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function lx takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($4930495A,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function ly takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($4930495A,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function lz takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304A30,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function l0 takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304A30,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function l1 takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304A31,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function l2 takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304A31,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function l3 takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304839,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function l4 takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($4930384D,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($4930384B,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($4930384C,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function l5 takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304759,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function l6 takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49303044,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function l7 takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304B57,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function l8 takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49303935,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function l9 takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304757,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49304754,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49304755,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mB takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304D33,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mC takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($4930344D,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49303531,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49303532,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49303530,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mD takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($4930344E,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mE takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49303857,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($4930384E,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49303850,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($4930384F,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mF takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49303852,80)
call RandomDistAddItem(-1,20)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49303853,80)
call RandomDistAddItem(-1,20)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49303936,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mG takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49305732,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mH takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304150,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49304F4C,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mI takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304244,50)
call RandomDistAddItem($49304245,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49304248,50)
call RandomDistAddItem($49304246,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49304247,50)
call RandomDistAddItem($49304249,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mJ takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304232,50)
call RandomDistAddItem($49304235,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49304237,50)
call RandomDistAddItem($49304236,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49304234,50)
call RandomDistAddItem($49304233,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mK takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304D30,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mL takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304D46,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mM takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49304839,50)
call RandomDistAddItem(-1,50)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mN takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49303737,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mO takes nothing returns nothing
local widget Hf=null
local unit Hg=null
local integer Hi=0
local boolean Hh=true
set Hf=bj_lastDyingWidget
if Hf==null then
set Hg=GetTriggerUnit()
endif
if Hg!=null then
set Hh=not IsUnitHidden(Hg)
if Hh and GetChangingUnit()!=null then
set Hh=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hh then
call RandomDistReset()
call RandomDistAddItem($49305132,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49305132,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
call RandomDistReset()
call RandomDistAddItem($49305132,100)
set Hi=RandomDistChoose()
if Hg!=null then
call UnitDropItem(Hg,Hi)
else
call WidgetDropItem(Hf,Hi)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set Hg=null
set Hf=null
endfunction
function mP takes nothing returns nothing
set C=CreateSound("war3mapImported\\pole_letter_correct.mp3",false,false,false,10,10,"")
call SetSoundDuration(C,1257)
call SetSoundChannel(C,0)
call SetSoundVolume(C,127)
call SetSoundPitch(C,1.)
set D=CreateSound("war3mapImported\\v1lat_-_JEto_nenormalno_jeto_nechestno_66392426.mp3",false,false,false,10,10,"")
call SetSoundDuration(D,5806)
call SetSoundChannel(D,0)
call SetSoundVolume(D,127)
call SetSoundPitch(D,1.)
set E=CreateSound("war3mapImported\\-_Eto._Prosto._Nechto._(Gybka.com).mp3",false,false,false,10,10,"")
call SetSoundDuration(E,5466)
call SetSoundChannel(E,0)
call SetSoundVolume(E,127)
call SetSoundPitch(E,1.)
set F=CreateSound("war3mapImported\\Dota_2_-_Ajj-ajj-ajj-ajj-ajj_chto_sejjchas_proizoshlo_67488059.mp3",false,false,false,10,10,"")
call SetSoundDuration(F,5043)
call SetSoundChannel(F,0)
call SetSoundVolume(F,127)
call SetSoundPitch(F,1.)
set G=CreateSound("war3mapImported\\Lakad Matataaag! - NORMALIN NORMALIN!! (www.hotplayer.ru).mp3",false,false,false,10,10,"")
call SetSoundDuration(G,5649)
call SetSoundChannel(G,0)
call SetSoundVolume(G,127)
call SetSoundPitch(G,1.)
endfunction
function mQ takes nothing returns nothing
local destructable Hd
local trigger He
set HB=CreateDestructable($41546731,-13568.,-15232.,270.,.9,0)
set HC=CreateDestructable($41546733,-12928.,-16064.,0.,.9,0)
set HD=CreateDestructable($41546733,-12160.,-16064.,0.,.9,0)
set HE=CreateDestructable($41547472,-13312.,-9600.,270.,1.732,0)
set HF=CreateDestructable($41547472,-13248.,-9472.,270.,1.739,4)
set HG=CreateDestructable($41547472,-12480.,-15744.,270.,1.61,4)
set HH=CreateDestructable($41547472,-13376.,-9472.,270.,1.72,4)
set HI=CreateDestructable($42303035,11264.,5376.,3.593,1.5,0)
set HJ=CreateDestructable($42303037,-11712.,2496.,270.,1.,0)
set HK=CreateDestructable($42303037,3200.,-23616.,270.,1.,0)
set HL=CreateDestructable($42303037,3328.,-23616.,270.,1.,0)
set HM=CreateDestructable($42303037,-11904.,2688.,270.,1.,0)
set HN=CreateDestructable($42303037,-11776.,2624.,270.,1.,0)
set HO=CreateDestructable($42303037,-12160.,2688.,270.,1.,0)
set HP=CreateDestructable($42303037,-12096.,2560.,270.,1.,0)
set HQ=CreateDestructable($42303037,-12032.,2688.,270.,1.,0)
set HR=CreateDestructable($42303037,-11840.,2496.,270.,1.,0)
set HS=CreateDestructable($42303037,-11968.,2560.,270.,1.,0)
set HT=CreateDestructable($42303038,-4096.,-12352.,270.,1.,0)
set HU=CreateDestructable($42303038,-4160.,-12480.,270.,1.,0)
set HV=CreateDestructable($42303038,-4096.,-11968.,270.,1.,0)
set HW=CreateDestructable($42303038,-4096.,-12224.,270.,1.,0)
set HX=CreateDestructable($42303038,-4096.,-12096.,270.,1.,0)
set HY=CreateDestructable($42303041,-768.,-14144.,0.,.9,0)
set HZ=CreateDestructable($42303041,-1280.,-14144.,0.,.9,0)
set Ha=CreateDestructable($44546735,-5312.,14592.,270.,1.3,0)
set Hb=CreateDestructable($44546735,23616.,4224.,270.,1.3,0)
set Hc=CreateDestructable($44546C76,-2208.,13792.,297.,1.03,0)
set Hd=CreateDestructable($4C546273,-13536.,-10272.,306.,1.142,0)
set He=CreateTrigger()
call TriggerRegisterDeathEvent(He,Hd)
call TriggerAddAction(He,function SaveDyingWidget)
call TriggerAddAction(He,function mO)
set Hd=CreateDestructable($4C546273,1568.,7840.,306.,1.142,0)
set He=CreateTrigger()
call TriggerRegisterDeathEvent(He,Hd)
call TriggerAddAction(He,function SaveDyingWidget)
call TriggerAddAction(He,function mN)
set Hj=CreateDestructable($4C546731,6976.,4736.,270.,.9,0)
set Hk=CreateDestructable($59546663,-1408.,-14016.,270.,1.,0)
set Hl=CreateDestructable($59546663,-1408.,-14144.,270.,1.,0)
set Hm=CreateDestructable($59546663,-1408.,-14272.,270.,1.,0)
set Hn=CreateDestructable($59546663,-3328.,-12096.,270.,1.,0)
set Ho=CreateDestructable($59546663,-3328.,-12224.,270.,1.,0)
set Hp=CreateDestructable($5A546436,2304.,4608.,0.,.9,0)
set Hq=CreateDestructable($5A546438,512.,12160.,180.,.9,0)
set Hr=CreateDestructable($5A546733,2368.,11968.,0.,.9,0)
set Hs=CreateDestructable($5A547463,2144.,4320.,270.,1.632,0)
set Ht=CreateDestructable($5A547477,-6912.,9856.,270.,1.452,3)
set Hu=CreateDestructable($5A547477,-3456.,-12160.,270.,1.467,2)
set He=null
set Hd=null
endfunction
function mR takes nothing returns nothing
call CreateItem($4930504B,-13872.1,-9909.1)
call CreateItem($4930504B,-12062.4,-10396.)
call CreateItem($4930504C,-4126.3,-4776.3)
call CreateItem($4930504C,2391.7,-4311.9)
call CreateItem($4930504C,-3995.5,-4958.4)
call CreateItem($4930504D,-5211.6,2536.6)
call CreateItem($4930504D,-232.6,6624.6)
call CreateItem($4930504E,1453.9,-4071.5)
call CreateItem($4930504E,5420.8,6497.7)
call CreateItem($4930504E,-10328.4,450.8)
call CreateItem($4930504E,4832.2,-7845.8)
call CreateItem($4930504E,7858.,146.)
call CreateItem($4930504E,-14420.9,-10342.5)
call CreateItem($4930504E,17207.8,10714.1)
call CreateItem($4930514E,-11021.9,-9241.7)
call CreateItem($4930514E,1939.7,12944.6)
call CreateItem($4930514E,-5396.4,8138.4)
call CreateItem($4930514E,2219.7,11621.6)
call CreateItem($4930514E,-11751.,6534.2)
call CreateItem($4930514E,2134.4,-4371.5)
call CreateItem($4930514E,-9238.2,12964.9)
call CreateItem($4930514E,-9320.1,14447.)
call CreateItem($4930514E,-16079.2,7568.6)
call CreateItem($4930514E,-10254.3,11477.9)
call CreateItem($4930514E,-7264.3,2946.2)
call CreateItem($4930514E,-2271.1,13969.7)
call CreateItem($4930514E,-10011.6,-7442.5)
call CreateItem($4930514E,-14405.2,-11928.1)
call CreateItem($4930514E,-12572.7,-12527.2)
call CreateItem($4930514E,-15670.9,-9628.8)
call CreateItem($4930514E,-10444.4,286.)
call CreateItem($4930514E,-5427.6,-5791.)
call CreateItem($4930514E,-9440.5,-4670.3)
call CreateItem($4930514E,-3047.8,-11264.3)
call CreateItem($4930514E,-4131.6,12771.9)
call CreateItem($4930514E,-12989.9,-8667.4)
call CreateItem($4930514E,-8986.1,-13453.)
call CreateItem($4930514E,5035.8,1057.2)
call CreateItem($4930514E,1928.9,3420.7)
call CreateItem($4930514E,3821.9,4947.2)
call CreateItem($4930514E,-2945.4,3815.4)
call CreateItem($4930514E,1159.4,-9890.6)
call CreateItem($4930514E,-676.3,-380.2)
call CreateItem($4930514E,2718.5,-3146.4)
call CreateItem($6863756E,-5962.9,629.9)
call CreateItem($6863756E,-14870.2,-3097.9)
call CreateItem($6863756E,-13507.6,-8022.6)
call CreateItem($6863756E,-8136.2,2306.7)
call CreateItem($6863756E,-10448.5,-6278.4)
call CreateItem($6863756E,-6653.,-4491.2)
call CreateItem($6863756E,-6553.2,-2065.9)
call CreateItem($6863756E,-9566.9,-5239.3)
call CreateItem($77637963,-4633.3,-8660.2)
call CreateItem($77637963,-7849.5,-10829.3)
call CreateItem($77637963,-7326.6,-14333.4)
call CreateItem($77637963,-10889.9,-14213.3)
call CreateItem($77637963,-12384.6,-11594.4)
call CreateItem($77637963,-4333.2,-11870.)
call CreateItem($77637963,-8747.3,-8340.5)
call CreateItem($77637963,-11926.1,-9304.5)
endfunction
function mS takes nothing returns nothing
local player Hv=Player(0)
local unit Hw
set KI=CreateUnit(Hv,$68303452,8817.7,-23161.3,264.589)
set Hw=CreateUnit(Hv,$68303042,-16024.7,15545.2,90.211)
set Hw=null
endfunction
function mT takes nothing returns nothing
local player Hv=Player(1)
local unit Hw
set Hw=CreateUnit(Hv,$68303042,-15963.7,15611.1,90.21)
set Hw=null
endfunction
function mU takes nothing returns nothing
local player Hv=Player(2)
local unit Hw
set Hw=CreateUnit(Hv,$68303042,-15924.4,15596.6,90.21)
set Hw=null
endfunction
function mV takes nothing returns nothing
local player Hv=Player(3)
local unit Hw
set Hw=CreateUnit(Hv,$68303042,-15898.5,15570.1,90.21)
set Hw=null
endfunction
function mW takes nothing returns nothing
local player Hv=Player(4)
local unit Hw
set Hw=CreateUnit(Hv,$68303042,-15910.3,15523.6,90.21)
set Hw=null
endfunction
function mX takes nothing returns nothing
local player Hv=Player(5)
local unit Hw
set Hw=CreateUnit(Hv,$68303042,-15953.8,15496.,90.21)
set Hw=null
endfunction
function mY takes nothing returns nothing
local player Hv=Player(6)
local unit Hw
set Hw=CreateUnit(Hv,$68303042,-16007.3,15596.6,90.21)
set Hw=CreateUnit(Hv,$68303042,-16008.6,15499.9,90.21)
set Hw=null
endfunction
function mZ takes nothing returns nothing
local player Hv=Player(8)
local unit Hw
set Hw=CreateUnit(Hv,$6E666F68,-13696.,1024.,270.)
set Hw=CreateUnit(Hv,$68626C61,-15872.,-960.,270.)
set Hw=CreateUnit(Hv,$6E677772,-11424.,480.,270.)
set Hw=CreateUnit(Hv,$6E656635,-11104.,544.,270.)
set IM=CreateUnit(Hv,$68626C61,6784.,-1664.,270.)
set IN=CreateUnit(Hv,$6E303333,8064.,-1952.,270.)
set Hw=CreateUnit(Hv,$6F777477,17984.,2112.,270.)
set Hw=CreateUnit(Hv,$6F777477,18624.,2112.,270.)
set Hw=CreateUnit(Hv,$6F777477,18688.,1216.,270.)
set Hw=CreateUnit(Hv,$6F666F72,18144.,1312.,270.)
set Hw=CreateUnit(Hv,$6E656635,-11872.,-1056.,270.)
set Hw=CreateUnit(Hv,$6E656631,-11040.,-96.,270.)
set Hw=CreateUnit(Hv,$6E65666D,-12896.,2720.,270.)
set Hw=null
endfunction
function ma takes nothing returns nothing
local player Hv=Player(8)
local unit Hw
local real I4
set KJ=CreateUnit(Hv,$456B6565,-11707.,193.,252.11)
call SetUnitState(KJ,UNIT_STATE_MANA,54)
set Hw=CreateUnit(Hv,$48303635,-16187.1,14558.9,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41305037)
call SelectHeroSkill(Hw,$41305037)
call SelectHeroSkill(Hw,$41305037)
call SelectHeroSkill(Hw,$41305037)
call SelectHeroSkill(Hw,$41305037)
call SelectHeroSkill(Hw,$41305037)
call SelectHeroSkill(Hw,$41305037)
call SelectHeroSkill(Hw,$41305037)
call SelectHeroSkill(Hw,$41305037)
call SelectHeroSkill(Hw,$41305037)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305048)
call SelectHeroSkill(Hw,$41305048)
call SelectHeroSkill(Hw,$41305048)
call SelectHeroSkill(Hw,$41305048)
call SelectHeroSkill(Hw,$41305048)
call SelectHeroSkill(Hw,$41305048)
call SelectHeroSkill(Hw,$41305048)
call SelectHeroSkill(Hw,$41305048)
call SelectHeroSkill(Hw,$41305048)
call SelectHeroSkill(Hw,$41305048)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305047)
call SelectHeroSkill(Hw,$41305047)
call SelectHeroSkill(Hw,$41305047)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305339)
call SelectHeroSkill(Hw,$41305339)
call SelectHeroSkill(Hw,$41305339)
call SelectHeroSkill(Hw,$41305339)
call SelectHeroSkill(Hw,$41305339)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130505A)
call SelectHeroSkill(Hw,$4130505A)
call SelectHeroSkill(Hw,$4130505A)
call SelectHeroSkill(Hw,$4130505A)
call SelectHeroSkill(Hw,$4130505A)
call SelectHeroSkill(Hw,$4130505A)
call SelectHeroSkill(Hw,$4130505A)
call SelectHeroSkill(Hw,$4130505A)
call SelectHeroSkill(Hw,$4130505A)
call SelectHeroSkill(Hw,$4130505A)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305743,0)
set Hw=CreateUnit(Hv,$68777432,-14491.,457.5,308.85)
set KK=CreateUnit(Hv,$6E73716F,-11128.3,756.7,125.83)
call SetUnitState(KK,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$48303636,-16046.9,14797.4,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41313653)
call SelectHeroSkill(Hw,$41313653)
call SelectHeroSkill(Hw,$41313653)
call SelectHeroSkill(Hw,$41313653)
call SelectHeroSkill(Hw,$41313653)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call IssueImmediateOrder(Hw,"")
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4131364F)
call SelectHeroSkill(Hw,$4131364F)
call SelectHeroSkill(Hw,$4131364F)
call SelectHeroSkill(Hw,$4131364F)
call SelectHeroSkill(Hw,$4131364F)
call SelectHeroSkill(Hw,$4131364F)
call SelectHeroSkill(Hw,$4131364F)
call SelectHeroSkill(Hw,$4131364F)
call SelectHeroSkill(Hw,$4131364F)
call SelectHeroSkill(Hw,$4131364F)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313651)
call SelectHeroSkill(Hw,$41313651)
call SelectHeroSkill(Hw,$41313651)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130394F)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304142)
call SelectHeroSkill(Hw,$41304142)
call SelectHeroSkill(Hw,$41304142)
call SelectHeroSkill(Hw,$41304142)
call SelectHeroSkill(Hw,$41304142)
call SelectHeroSkill(Hw,$41304142)
call SelectHeroSkill(Hw,$41304142)
call SelectHeroSkill(Hw,$41304142)
call SelectHeroSkill(Hw,$41304142)
call SelectHeroSkill(Hw,$41304142)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303950)
call SelectHeroSkill(Hw,$41303950)
call SelectHeroSkill(Hw,$41303950)
call SelectHeroSkill(Hw,$41303950)
call SelectHeroSkill(Hw,$41303950)
call SelectHeroSkill(Hw,$41303950)
call SelectHeroSkill(Hw,$41303950)
call SelectHeroSkill(Hw,$41303950)
call SelectHeroSkill(Hw,$41303950)
call SelectHeroSkill(Hw,$41303950)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305750,0)
set Hw=CreateUnit(Hv,$68777432,-14170.5,190.6,102.862)
set Hw=CreateUnit(Hv,$48303637,-15901.7,14807.6,270.)
call SetHeroLevel(Hw,50,false)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304348)
call SelectHeroSkill(Hw,$41304348)
call SelectHeroSkill(Hw,$41304348)
call SelectHeroSkill(Hw,$41304348)
call SelectHeroSkill(Hw,$41304348)
call SelectHeroSkill(Hw,$41304348)
call SelectHeroSkill(Hw,$41304348)
call SelectHeroSkill(Hw,$41304348)
call SelectHeroSkill(Hw,$41304348)
call SelectHeroSkill(Hw,$41304348)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304342)
call SelectHeroSkill(Hw,$41304342)
call SelectHeroSkill(Hw,$41304342)
call SelectHeroSkill(Hw,$41304342)
call SelectHeroSkill(Hw,$41304342)
call SelectHeroSkill(Hw,$41304342)
call SelectHeroSkill(Hw,$41304342)
call SelectHeroSkill(Hw,$41304342)
call SelectHeroSkill(Hw,$41304342)
call SelectHeroSkill(Hw,$41304342)
call IssueImmediateOrder(Hw,"")
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304653)
call SelectHeroSkill(Hw,$41304653)
call SelectHeroSkill(Hw,$41304653)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4131334D)
call SelectHeroSkill(Hw,$4131334D)
call SelectHeroSkill(Hw,$4131334D)
call SelectHeroSkill(Hw,$4131334D)
call SelectHeroSkill(Hw,$4131334D)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4131334C)
call SelectHeroSkill(Hw,$4131334C)
call SelectHeroSkill(Hw,$4131334C)
call SelectHeroSkill(Hw,$4131334C)
call SelectHeroSkill(Hw,$4131334C)
call SelectHeroSkill(Hw,$4131334C)
call SelectHeroSkill(Hw,$4131334C)
call SelectHeroSkill(Hw,$4131334C)
call SelectHeroSkill(Hw,$4131334C)
call SelectHeroSkill(Hw,$4131334C)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305752,0)
set Hw=CreateUnit(Hv,$4830354E,-16038.,14541.1,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41304C57)
call SelectHeroSkill(Hw,$41304C57)
call SelectHeroSkill(Hw,$41304C57)
call SelectHeroSkill(Hw,$41304C57)
call SelectHeroSkill(Hw,$41304C57)
call SelectHeroSkill(Hw,$41304C57)
call SelectHeroSkill(Hw,$41304C57)
call SelectHeroSkill(Hw,$41304C57)
call SelectHeroSkill(Hw,$41304C57)
call SelectHeroSkill(Hw,$41304C57)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49313039,0)
set Hw=CreateUnit(Hv,$48303638,-16180.1,14804.6,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41313155)
call SelectHeroSkill(Hw,$41313155)
call SelectHeroSkill(Hw,$41313155)
call SelectHeroSkill(Hw,$41313155)
call SelectHeroSkill(Hw,$41313155)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313142)
call SelectHeroSkill(Hw,$41313142)
call SelectHeroSkill(Hw,$41313142)
call SelectHeroSkill(Hw,$41313142)
call SelectHeroSkill(Hw,$41313142)
call SelectHeroSkill(Hw,$41313142)
call SelectHeroSkill(Hw,$41313142)
call SelectHeroSkill(Hw,$41313142)
call SelectHeroSkill(Hw,$41313142)
call SelectHeroSkill(Hw,$41313142)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313147)
call SelectHeroSkill(Hw,$41313147)
call SelectHeroSkill(Hw,$41313147)
call SelectHeroSkill(Hw,$41313147)
call SelectHeroSkill(Hw,$41313147)
call SelectHeroSkill(Hw,$41313147)
call SelectHeroSkill(Hw,$41313147)
call SelectHeroSkill(Hw,$41313147)
call SelectHeroSkill(Hw,$41313147)
call SelectHeroSkill(Hw,$41313147)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313148)
call SelectHeroSkill(Hw,$41313148)
call SelectHeroSkill(Hw,$41313148)
call SelectHeroSkill(Hw,$41313148)
call SelectHeroSkill(Hw,$41313148)
call SelectHeroSkill(Hw,$41313148)
call SelectHeroSkill(Hw,$41313148)
call SelectHeroSkill(Hw,$41313148)
call SelectHeroSkill(Hw,$41313148)
call SelectHeroSkill(Hw,$41313148)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41314152)
call SelectHeroSkill(Hw,$41314152)
call SelectHeroSkill(Hw,$41314152)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304539)
call SelectHeroSkill(Hw,$41304539)
call SelectHeroSkill(Hw,$41304539)
call SelectHeroSkill(Hw,$41304539)
call SelectHeroSkill(Hw,$41304539)
call SelectHeroSkill(Hw,$41304539)
call SelectHeroSkill(Hw,$41304539)
call SelectHeroSkill(Hw,$41304539)
call SelectHeroSkill(Hw,$41304539)
call SelectHeroSkill(Hw,$41304539)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305734,0)
set KL=CreateUnit(Hv,$686B6E69,-15764.2,-1546.6,60.807)
set Hw=CreateUnit(Hv,$48303639,-15741.6,14803.4,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$4130304A)
call SelectHeroSkill(Hw,$4130304A)
call SelectHeroSkill(Hw,$4130304A)
call SelectHeroSkill(Hw,$4130304A)
call SelectHeroSkill(Hw,$4130304A)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130304F)
call SelectHeroSkill(Hw,$4130304F)
call SelectHeroSkill(Hw,$4130304F)
call SelectHeroSkill(Hw,$4130304F)
call SelectHeroSkill(Hw,$4130304F)
call SelectHeroSkill(Hw,$4130304F)
call SelectHeroSkill(Hw,$4130304F)
call SelectHeroSkill(Hw,$4130304F)
call SelectHeroSkill(Hw,$4130304F)
call SelectHeroSkill(Hw,$4130304F)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303036)
call SelectHeroSkill(Hw,$41303036)
call SelectHeroSkill(Hw,$41303036)
call SelectHeroSkill(Hw,$41303036)
call SelectHeroSkill(Hw,$41303036)
call SelectHeroSkill(Hw,$41303036)
call SelectHeroSkill(Hw,$41303036)
call SelectHeroSkill(Hw,$41303036)
call SelectHeroSkill(Hw,$41303036)
call SelectHeroSkill(Hw,$41303036)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303456)
call SelectHeroSkill(Hw,$41303456)
call SelectHeroSkill(Hw,$41303456)
call SelectHeroSkill(Hw,$41303456)
call SelectHeroSkill(Hw,$41303456)
call SelectHeroSkill(Hw,$41303456)
call SelectHeroSkill(Hw,$41303456)
call SelectHeroSkill(Hw,$41303456)
call SelectHeroSkill(Hw,$41303456)
call SelectHeroSkill(Hw,$41303456)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304753)
call SelectHeroSkill(Hw,$41304753)
call SelectHeroSkill(Hw,$41304753)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305747,0)
set Hw=CreateUnit(Hv,$68777432,-11389.4,-1016.4,102.862)
set Hw=CreateUnit(Hv,$68777432,-12307.,-831.3,306.719)
set Hw=CreateUnit(Hv,$68777432,-11685.1,-818.9,235.48)
set Hw=CreateUnit(Hv,$686D7072,-12075.3,-847.4,64.6)
set Hw=CreateUnit(Hv,$686D7072,-11182.9,-560.,176.17)
set Hw=CreateUnit(Hv,$686D7072,-13465.5,-391.3,328.646)
set KM=CreateUnit(Hv,$6E676972,-12326.5,839.5,242.12)
set Hw=CreateUnit(Hv,$6E686566,-13091.6,314.3,133.44)
set KN=CreateUnit(Hv,$6E766C6B,-13176.3,218.7,92.694)
set Hw=CreateUnit(Hv,$6E766C6B,-13673.7,2312.8,228.314)
set Hw=CreateUnit(Hv,$6E766C6B,-13732.9,2234.5,114.634)
set Hw=CreateUnit(Hv,$6F30304B,-11417.3,2036.3,236.003)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set KO=CreateUnit(Hv,$6530304F,6388.5,1178.2,271.402)
set I4=GetUnitState(KO,UNIT_STATE_LIFE)
call SetUnitState(KO,UNIT_STATE_LIFE,.01*I4)
set KP=CreateUnit(Hv,$6E766C6B,-13828.2,2230.8,70.387)
set KQ=CreateUnit(Hv,$6E766C32,-13854.6,2318.2,321.842)
set Hw=CreateUnit(Hv,$48303641,-15588.1,14810.1,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41305551)
call SelectHeroSkill(Hw,$41305551)
call SelectHeroSkill(Hw,$41305551)
call SelectHeroSkill(Hw,$41305551)
call SelectHeroSkill(Hw,$41305551)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130554F)
call SelectHeroSkill(Hw,$4130554F)
call SelectHeroSkill(Hw,$4130554F)
call SelectHeroSkill(Hw,$4130554F)
call SelectHeroSkill(Hw,$4130554F)
call SelectHeroSkill(Hw,$4130554F)
call SelectHeroSkill(Hw,$4130554F)
call SelectHeroSkill(Hw,$4130554F)
call SelectHeroSkill(Hw,$4130554F)
call SelectHeroSkill(Hw,$4130554F)
call IssueImmediateOrder(Hw,"")
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130554C)
call SelectHeroSkill(Hw,$4130554C)
call SelectHeroSkill(Hw,$4130554C)
call SelectHeroSkill(Hw,$4130554C)
call SelectHeroSkill(Hw,$4130554C)
call SelectHeroSkill(Hw,$4130554C)
call SelectHeroSkill(Hw,$4130554C)
call SelectHeroSkill(Hw,$4130554C)
call SelectHeroSkill(Hw,$4130554C)
call SelectHeroSkill(Hw,$4130554C)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305550)
call SelectHeroSkill(Hw,$41305550)
call SelectHeroSkill(Hw,$41305550)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313955)
call SelectHeroSkill(Hw,$41313955)
call SelectHeroSkill(Hw,$41313955)
call SelectHeroSkill(Hw,$41313955)
call SelectHeroSkill(Hw,$41313955)
call SelectHeroSkill(Hw,$41313955)
call SelectHeroSkill(Hw,$41313955)
call SelectHeroSkill(Hw,$41313955)
call SelectHeroSkill(Hw,$41313955)
call SelectHeroSkill(Hw,$41313955)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305753,0)
set Hw=CreateUnit(Hv,$6868646C,-15162.8,-1553.2,236.41)
set Hw=CreateUnit(Hv,$6868646C,-14989.,-1555.4,236.41)
set KR=CreateUnit(Hv,$6E76696C,-14690.8,-1121.7,151.621)
set KS=CreateUnit(Hv,$6E766C77,-14718.8,-1017.,193.183)
set Hw=CreateUnit(Hv,$48303642,-15457.8,14804.1,270.)
call SetHeroLevel(Hw,50,false)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303649)
call SelectHeroSkill(Hw,$41303649)
call SelectHeroSkill(Hw,$41303649)
call SelectHeroSkill(Hw,$41303649)
call SelectHeroSkill(Hw,$41303649)
call SelectHeroSkill(Hw,$41303649)
call SelectHeroSkill(Hw,$41303649)
call SelectHeroSkill(Hw,$41303649)
call SelectHeroSkill(Hw,$41303649)
call SelectHeroSkill(Hw,$41303649)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130364B)
call SelectHeroSkill(Hw,$4130364B)
call SelectHeroSkill(Hw,$4130364B)
call SelectHeroSkill(Hw,$4130364B)
call SelectHeroSkill(Hw,$4130364B)
call SelectHeroSkill(Hw,$4130364B)
call SelectHeroSkill(Hw,$4130364B)
call SelectHeroSkill(Hw,$4130364B)
call SelectHeroSkill(Hw,$4130364B)
call SelectHeroSkill(Hw,$4130364B)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130364A)
call SelectHeroSkill(Hw,$4130364A)
call SelectHeroSkill(Hw,$4130364A)
call SelectHeroSkill(Hw,$4130364A)
call SelectHeroSkill(Hw,$4130364A)
call SelectHeroSkill(Hw,$4130364A)
call SelectHeroSkill(Hw,$4130364A)
call SelectHeroSkill(Hw,$4130364A)
call SelectHeroSkill(Hw,$4130364A)
call SelectHeroSkill(Hw,$4130364A)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304C32)
call SelectHeroSkill(Hw,$41304C32)
call SelectHeroSkill(Hw,$41304C32)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303842)
call SelectHeroSkill(Hw,$41303842)
call SelectHeroSkill(Hw,$41303842)
call SelectHeroSkill(Hw,$41303842)
call SelectHeroSkill(Hw,$41303842)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304B48)
call SelectHeroSkill(Hw,$41304B48)
call SelectHeroSkill(Hw,$41304B48)
call SelectHeroSkill(Hw,$41304B48)
call SelectHeroSkill(Hw,$41304B48)
call SelectHeroSkill(Hw,$41304B48)
call SelectHeroSkill(Hw,$41304B48)
call SelectHeroSkill(Hw,$41304B48)
call SelectHeroSkill(Hw,$41304B48)
call SelectHeroSkill(Hw,$41304B48)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$4930574D,0)
set KT=CreateUnit(Hv,$4F726578,-12987.4,-848.,54.469)
call SetUnitState(KT,UNIT_STATE_MANA,0)
set KU=CreateUnit(Hv,$6E677A34,-13258.6,-859.9,93.754)
set KV=CreateUnit(Hv,$6E677A34,-12744.5,-843.2,98.91)
set Hw=CreateUnit(Hv,$48303643,-15321.8,14788.9,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41304236)
call SelectHeroSkill(Hw,$41304236)
call SelectHeroSkill(Hw,$41304236)
call SelectHeroSkill(Hw,$41304236)
call SelectHeroSkill(Hw,$41304236)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130454A)
call SelectHeroSkill(Hw,$4130454A)
call SelectHeroSkill(Hw,$4130454A)
call SelectHeroSkill(Hw,$4130454A)
call SelectHeroSkill(Hw,$4130454A)
call SelectHeroSkill(Hw,$4130454A)
call SelectHeroSkill(Hw,$4130454A)
call SelectHeroSkill(Hw,$4130454A)
call SelectHeroSkill(Hw,$4130454A)
call SelectHeroSkill(Hw,$4130454A)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305549)
call SelectHeroSkill(Hw,$41305549)
call SelectHeroSkill(Hw,$41305549)
call SelectHeroSkill(Hw,$41305549)
call SelectHeroSkill(Hw,$41305549)
call SelectHeroSkill(Hw,$41305549)
call SelectHeroSkill(Hw,$41305549)
call SelectHeroSkill(Hw,$41305549)
call SelectHeroSkill(Hw,$41305549)
call SelectHeroSkill(Hw,$41305549)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303855)
call SelectHeroSkill(Hw,$41303855)
call SelectHeroSkill(Hw,$41303855)
call SelectHeroSkill(Hw,$41303855)
call SelectHeroSkill(Hw,$41303855)
call SelectHeroSkill(Hw,$41303855)
call SelectHeroSkill(Hw,$41303855)
call SelectHeroSkill(Hw,$41303855)
call SelectHeroSkill(Hw,$41303855)
call SelectHeroSkill(Hw,$41303855)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305638)
call SelectHeroSkill(Hw,$41305638)
call SelectHeroSkill(Hw,$41305638)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305741,0)
set KW=CreateUnit(Hv,$48616D67,-11254.7,-781.5,132.047)
call SetUnitState(KW,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$48303644,-15193.,14778.5,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41303943)
call SelectHeroSkill(Hw,$41303943)
call SelectHeroSkill(Hw,$41303943)
call SelectHeroSkill(Hw,$41303943)
call SelectHeroSkill(Hw,$41303943)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303934)
call SelectHeroSkill(Hw,$41303934)
call SelectHeroSkill(Hw,$41303934)
call SelectHeroSkill(Hw,$41303934)
call SelectHeroSkill(Hw,$41303934)
call SelectHeroSkill(Hw,$41303934)
call SelectHeroSkill(Hw,$41303934)
call SelectHeroSkill(Hw,$41303934)
call SelectHeroSkill(Hw,$41303934)
call SelectHeroSkill(Hw,$41303934)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303935)
call SelectHeroSkill(Hw,$41303935)
call SelectHeroSkill(Hw,$41303935)
call SelectHeroSkill(Hw,$41303935)
call SelectHeroSkill(Hw,$41303935)
call SelectHeroSkill(Hw,$41303935)
call SelectHeroSkill(Hw,$41303935)
call SelectHeroSkill(Hw,$41303935)
call SelectHeroSkill(Hw,$41303935)
call SelectHeroSkill(Hw,$41303935)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313348)
call SelectHeroSkill(Hw,$41313348)
call SelectHeroSkill(Hw,$41313348)
call SelectHeroSkill(Hw,$41313348)
call SelectHeroSkill(Hw,$41313348)
call SelectHeroSkill(Hw,$41313348)
call SelectHeroSkill(Hw,$41313348)
call SelectHeroSkill(Hw,$41313348)
call SelectHeroSkill(Hw,$41313348)
call SelectHeroSkill(Hw,$41313348)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305350)
call SelectHeroSkill(Hw,$41305350)
call SelectHeroSkill(Hw,$41305350)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303330)
call SelectHeroSkill(Hw,$41303330)
call SelectHeroSkill(Hw,$41303330)
call SelectHeroSkill(Hw,$41303330)
call SelectHeroSkill(Hw,$41303330)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305742,0)
set Hw=CreateUnit(Hv,$48303645,-15481.9,14324.4,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$4130345A)
call SelectHeroSkill(Hw,$4130345A)
call SelectHeroSkill(Hw,$4130345A)
call SelectHeroSkill(Hw,$4130345A)
call SelectHeroSkill(Hw,$4130345A)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303454)
call SelectHeroSkill(Hw,$41303454)
call SelectHeroSkill(Hw,$41303454)
call SelectHeroSkill(Hw,$41303454)
call SelectHeroSkill(Hw,$41303454)
call SelectHeroSkill(Hw,$41303454)
call SelectHeroSkill(Hw,$41303454)
call SelectHeroSkill(Hw,$41303454)
call SelectHeroSkill(Hw,$41303454)
call SelectHeroSkill(Hw,$41303454)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313333)
call SelectHeroSkill(Hw,$41313333)
call SelectHeroSkill(Hw,$41313333)
call SelectHeroSkill(Hw,$41313333)
call SelectHeroSkill(Hw,$41313333)
call SelectHeroSkill(Hw,$41313333)
call SelectHeroSkill(Hw,$41313333)
call SelectHeroSkill(Hw,$41313333)
call SelectHeroSkill(Hw,$41313333)
call SelectHeroSkill(Hw,$41313333)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303933)
call SelectHeroSkill(Hw,$41303933)
call SelectHeroSkill(Hw,$41303933)
call SelectHeroSkill(Hw,$41303933)
call SelectHeroSkill(Hw,$41303933)
call SelectHeroSkill(Hw,$41303933)
call SelectHeroSkill(Hw,$41303933)
call SelectHeroSkill(Hw,$41303933)
call SelectHeroSkill(Hw,$41303933)
call SelectHeroSkill(Hw,$41303933)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313336)
call SelectHeroSkill(Hw,$41313336)
call SelectHeroSkill(Hw,$41313336)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305737,0)
set Hw=CreateUnit(Hv,$68686573,-15587.1,-1617.5,76.84)
set KX=CreateUnit(Hv,$6E726F67,-12400.2,2319.,294.515)
set Hw=CreateUnit(Hv,$48303646,-15896.8,14548.9,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41303451)
call SelectHeroSkill(Hw,$41303451)
call SelectHeroSkill(Hw,$41303451)
call SelectHeroSkill(Hw,$41303451)
call SelectHeroSkill(Hw,$41303451)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130524A)
call SelectHeroSkill(Hw,$4130524A)
call SelectHeroSkill(Hw,$4130524A)
call SelectHeroSkill(Hw,$4130524A)
call SelectHeroSkill(Hw,$4130524A)
call SelectHeroSkill(Hw,$4130524A)
call SelectHeroSkill(Hw,$4130524A)
call SelectHeroSkill(Hw,$4130524A)
call SelectHeroSkill(Hw,$4130524A)
call SelectHeroSkill(Hw,$4130524A)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130524B)
call SelectHeroSkill(Hw,$4130524B)
call SelectHeroSkill(Hw,$4130524B)
call SelectHeroSkill(Hw,$4130524B)
call SelectHeroSkill(Hw,$4130524B)
call SelectHeroSkill(Hw,$4130524B)
call SelectHeroSkill(Hw,$4130524B)
call SelectHeroSkill(Hw,$4130524B)
call SelectHeroSkill(Hw,$4130524B)
call SelectHeroSkill(Hw,$4130524B)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130524C)
call SelectHeroSkill(Hw,$4130524C)
call SelectHeroSkill(Hw,$4130524C)
call SelectHeroSkill(Hw,$4130524C)
call SelectHeroSkill(Hw,$4130524C)
call SelectHeroSkill(Hw,$4130524C)
call SelectHeroSkill(Hw,$4130524C)
call SelectHeroSkill(Hw,$4130524C)
call SelectHeroSkill(Hw,$4130524C)
call SelectHeroSkill(Hw,$4130524C)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304657)
call SelectHeroSkill(Hw,$41304657)
call SelectHeroSkill(Hw,$41304657)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305751,0)
set Hw=CreateUnit(Hv,$48303647,-15055.2,14765.7,270.)
call SetHeroLevel(Hw,50,false)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
call SelectHeroSkill(Hw,$41303046)
call SelectHeroSkill(Hw,$41303046)
call SelectHeroSkill(Hw,$41303046)
call SelectHeroSkill(Hw,$41303046)
call SelectHeroSkill(Hw,$41303046)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303047)
call SelectHeroSkill(Hw,$41303047)
call SelectHeroSkill(Hw,$41303047)
call SelectHeroSkill(Hw,$41303047)
call SelectHeroSkill(Hw,$41303047)
call SelectHeroSkill(Hw,$41303047)
call SelectHeroSkill(Hw,$41303047)
call SelectHeroSkill(Hw,$41303047)
call SelectHeroSkill(Hw,$41303047)
call SelectHeroSkill(Hw,$41303047)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303045)
call SelectHeroSkill(Hw,$41303045)
call SelectHeroSkill(Hw,$41303045)
call SelectHeroSkill(Hw,$41303045)
call SelectHeroSkill(Hw,$41303045)
call SelectHeroSkill(Hw,$41303045)
call SelectHeroSkill(Hw,$41303045)
call SelectHeroSkill(Hw,$41303045)
call SelectHeroSkill(Hw,$41303045)
call SelectHeroSkill(Hw,$41303045)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$53303057)
call SelectHeroSkill(Hw,$53303057)
call SelectHeroSkill(Hw,$53303057)
call SelectHeroSkill(Hw,$53303057)
call SelectHeroSkill(Hw,$53303057)
call SelectHeroSkill(Hw,$53303057)
call SelectHeroSkill(Hw,$53303057)
call SelectHeroSkill(Hw,$53303057)
call SelectHeroSkill(Hw,$53303057)
call SelectHeroSkill(Hw,$53303057)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313044)
call SelectHeroSkill(Hw,$41313044)
call SelectHeroSkill(Hw,$41313044)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$4930574A,0)
set Hw=CreateUnit(Hv,$48303648,-16044.7,14350.1,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$4131324F)
call SelectHeroSkill(Hw,$4131324F)
call SelectHeroSkill(Hw,$4131324F)
call SelectHeroSkill(Hw,$4131324F)
call SelectHeroSkill(Hw,$4131324F)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305432)
call SelectHeroSkill(Hw,$41305432)
call SelectHeroSkill(Hw,$41305432)
call SelectHeroSkill(Hw,$41305432)
call SelectHeroSkill(Hw,$41305432)
call SelectHeroSkill(Hw,$41305432)
call SelectHeroSkill(Hw,$41305432)
call SelectHeroSkill(Hw,$41305432)
call SelectHeroSkill(Hw,$41305432)
call SelectHeroSkill(Hw,$41305432)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313751)
call SelectHeroSkill(Hw,$41313751)
call SelectHeroSkill(Hw,$41313751)
call SelectHeroSkill(Hw,$41313751)
call SelectHeroSkill(Hw,$41313751)
call SelectHeroSkill(Hw,$41313751)
call SelectHeroSkill(Hw,$41313751)
call SelectHeroSkill(Hw,$41313751)
call SelectHeroSkill(Hw,$41313751)
call SelectHeroSkill(Hw,$41313751)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$53303052)
call SelectHeroSkill(Hw,$53303052)
call SelectHeroSkill(Hw,$53303052)
call SelectHeroSkill(Hw,$53303052)
call SelectHeroSkill(Hw,$53303052)
call SelectHeroSkill(Hw,$53303052)
call SelectHeroSkill(Hw,$53303052)
call SelectHeroSkill(Hw,$53303052)
call SelectHeroSkill(Hw,$53303052)
call SelectHeroSkill(Hw,$53303052)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130344E)
call SelectHeroSkill(Hw,$4130344E)
call SelectHeroSkill(Hw,$4130344E)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305748,0)
set Hw=CreateUnit(Hv,$68686573,-15836.1,-1298.6,356.15)
set Hw=CreateUnit(Hv,$48303649,-15903.1,14345.6,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41303146)
call SelectHeroSkill(Hw,$41303146)
call SelectHeroSkill(Hw,$41303146)
call SelectHeroSkill(Hw,$41303146)
call SelectHeroSkill(Hw,$41303146)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305236)
call SelectHeroSkill(Hw,$41305236)
call SelectHeroSkill(Hw,$41305236)
call SelectHeroSkill(Hw,$41305236)
call SelectHeroSkill(Hw,$41305236)
call SelectHeroSkill(Hw,$41305236)
call SelectHeroSkill(Hw,$41305236)
call SelectHeroSkill(Hw,$41305236)
call SelectHeroSkill(Hw,$41305236)
call SelectHeroSkill(Hw,$41305236)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303032)
call SelectHeroSkill(Hw,$41303032)
call SelectHeroSkill(Hw,$41303032)
call SelectHeroSkill(Hw,$41303032)
call SelectHeroSkill(Hw,$41303032)
call SelectHeroSkill(Hw,$41303032)
call SelectHeroSkill(Hw,$41303032)
call SelectHeroSkill(Hw,$41303032)
call SelectHeroSkill(Hw,$41303032)
call SelectHeroSkill(Hw,$41303032)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303030)
call SelectHeroSkill(Hw,$41303030)
call SelectHeroSkill(Hw,$41303030)
call SelectHeroSkill(Hw,$41303030)
call SelectHeroSkill(Hw,$41303030)
call SelectHeroSkill(Hw,$41303030)
call SelectHeroSkill(Hw,$41303030)
call SelectHeroSkill(Hw,$41303030)
call SelectHeroSkill(Hw,$41303030)
call SelectHeroSkill(Hw,$41303030)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304144)
call SelectHeroSkill(Hw,$41304144)
call SelectHeroSkill(Hw,$41304144)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304C54)
call SelectHeroSkill(Hw,$41304C54)
call SelectHeroSkill(Hw,$41304C54)
call SelectHeroSkill(Hw,$41304C54)
call SelectHeroSkill(Hw,$41304C54)
call SelectHeroSkill(Hw,$41304C54)
call SelectHeroSkill(Hw,$41304C54)
call SelectHeroSkill(Hw,$41304C54)
call SelectHeroSkill(Hw,$41304C54)
call SelectHeroSkill(Hw,$41304C54)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305744,0)
set Hw=CreateUnit(Hv,$4830364A,-15762.7,14551.,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41305951)
call SelectHeroSkill(Hw,$41305951)
call SelectHeroSkill(Hw,$41305951)
call SelectHeroSkill(Hw,$41305951)
call SelectHeroSkill(Hw,$41305951)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305939)
call SelectHeroSkill(Hw,$41305939)
call SelectHeroSkill(Hw,$41305939)
call SelectHeroSkill(Hw,$41305939)
call SelectHeroSkill(Hw,$41305939)
call SelectHeroSkill(Hw,$41305939)
call SelectHeroSkill(Hw,$41305939)
call SelectHeroSkill(Hw,$41305939)
call SelectHeroSkill(Hw,$41305939)
call SelectHeroSkill(Hw,$41305939)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305946)
call SelectHeroSkill(Hw,$41305946)
call SelectHeroSkill(Hw,$41305946)
call SelectHeroSkill(Hw,$41305946)
call SelectHeroSkill(Hw,$41305946)
call SelectHeroSkill(Hw,$41305946)
call SelectHeroSkill(Hw,$41305946)
call SelectHeroSkill(Hw,$41305946)
call SelectHeroSkill(Hw,$41305946)
call SelectHeroSkill(Hw,$41305946)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130595A)
call SelectHeroSkill(Hw,$4130595A)
call SelectHeroSkill(Hw,$4130595A)
call SelectHeroSkill(Hw,$4130595A)
call SelectHeroSkill(Hw,$4130595A)
call SelectHeroSkill(Hw,$4130595A)
call SelectHeroSkill(Hw,$4130595A)
call SelectHeroSkill(Hw,$4130595A)
call SelectHeroSkill(Hw,$4130595A)
call SelectHeroSkill(Hw,$4130595A)
call IssueImmediateOrder(Hw,"innerfireoff")
call SelectHeroSkill(Hw,$4130594A)
call SelectHeroSkill(Hw,$4130594A)
call SelectHeroSkill(Hw,$4130594A)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305739,0)
set Hw=CreateUnit(Hv,$4830364B,-15602.3,14550.1,270.)
call SetHeroLevel(Hw,50,false)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313942)
call SelectHeroSkill(Hw,$41313942)
call SelectHeroSkill(Hw,$41313942)
call SelectHeroSkill(Hw,$41313942)
call SelectHeroSkill(Hw,$41313942)
call SelectHeroSkill(Hw,$41313942)
call SelectHeroSkill(Hw,$41313942)
call SelectHeroSkill(Hw,$41313942)
call SelectHeroSkill(Hw,$41313942)
call SelectHeroSkill(Hw,$41313942)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303832)
call SelectHeroSkill(Hw,$41303832)
call SelectHeroSkill(Hw,$41303832)
call SelectHeroSkill(Hw,$41303832)
call SelectHeroSkill(Hw,$41303832)
call SelectHeroSkill(Hw,$41303832)
call SelectHeroSkill(Hw,$41303832)
call SelectHeroSkill(Hw,$41303832)
call SelectHeroSkill(Hw,$41303832)
call SelectHeroSkill(Hw,$41303832)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$53303036)
call SelectHeroSkill(Hw,$53303036)
call SelectHeroSkill(Hw,$53303036)
call SelectHeroSkill(Hw,$53303036)
call SelectHeroSkill(Hw,$53303036)
call SelectHeroSkill(Hw,$53303036)
call SelectHeroSkill(Hw,$53303036)
call SelectHeroSkill(Hw,$53303036)
call SelectHeroSkill(Hw,$53303036)
call SelectHeroSkill(Hw,$53303036)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303833)
call SelectHeroSkill(Hw,$41303833)
call SelectHeroSkill(Hw,$41303833)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304354)
call SelectHeroSkill(Hw,$41304354)
call SelectHeroSkill(Hw,$41304354)
call SelectHeroSkill(Hw,$41304354)
call SelectHeroSkill(Hw,$41304354)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305749,0)
set KY=CreateUnit(Hv,$6E62656C,-14890.5,-1455.8,120.924)
call SetUnitState(KY,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$48303743,-15763.2,14339.2,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41314353)
call SelectHeroSkill(Hw,$41314353)
call SelectHeroSkill(Hw,$41314353)
call SelectHeroSkill(Hw,$41314353)
call SelectHeroSkill(Hw,$41314353)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41314354)
call SelectHeroSkill(Hw,$41314354)
call SelectHeroSkill(Hw,$41314354)
call SelectHeroSkill(Hw,$41314354)
call SelectHeroSkill(Hw,$41314354)
call SelectHeroSkill(Hw,$41314354)
call SelectHeroSkill(Hw,$41314354)
call SelectHeroSkill(Hw,$41314354)
call SelectHeroSkill(Hw,$41314354)
call SelectHeroSkill(Hw,$41314354)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41314241)
call SelectHeroSkill(Hw,$41314241)
call SelectHeroSkill(Hw,$41314241)
call SelectHeroSkill(Hw,$41314241)
call SelectHeroSkill(Hw,$41314241)
call SelectHeroSkill(Hw,$41314241)
call SelectHeroSkill(Hw,$41314241)
call SelectHeroSkill(Hw,$41314241)
call SelectHeroSkill(Hw,$41314241)
call SelectHeroSkill(Hw,$41314241)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41314242)
call SelectHeroSkill(Hw,$41314242)
call SelectHeroSkill(Hw,$41314242)
call SelectHeroSkill(Hw,$41314242)
call SelectHeroSkill(Hw,$41314242)
call SelectHeroSkill(Hw,$41314242)
call SelectHeroSkill(Hw,$41314242)
call SelectHeroSkill(Hw,$41314242)
call SelectHeroSkill(Hw,$41314242)
call SelectHeroSkill(Hw,$41314242)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41314352)
call SelectHeroSkill(Hw,$41314352)
call SelectHeroSkill(Hw,$41314352)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305A50,0)
set Hw=CreateUnit(Hv,$6E766C32,5120.7,2465.5,160.469)
set Hw=CreateUnit(Hv,$4F30304D,-15617.8,14344.,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$5330304C)
call SelectHeroSkill(Hw,$5330304C)
call SelectHeroSkill(Hw,$5330304C)
call SelectHeroSkill(Hw,$5330304C)
call SelectHeroSkill(Hw,$5330304C)
call IssueImmediateOrder(Hw,"")
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304153)
call SelectHeroSkill(Hw,$41304153)
call SelectHeroSkill(Hw,$41304153)
call SelectHeroSkill(Hw,$41304153)
call SelectHeroSkill(Hw,$41304153)
call SelectHeroSkill(Hw,$41304153)
call SelectHeroSkill(Hw,$41304153)
call SelectHeroSkill(Hw,$41304153)
call SelectHeroSkill(Hw,$41304153)
call SelectHeroSkill(Hw,$41304153)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130385A)
call SelectHeroSkill(Hw,$4130385A)
call SelectHeroSkill(Hw,$4130385A)
call SelectHeroSkill(Hw,$4130385A)
call SelectHeroSkill(Hw,$4130385A)
call SelectHeroSkill(Hw,$4130385A)
call SelectHeroSkill(Hw,$4130385A)
call SelectHeroSkill(Hw,$4130385A)
call SelectHeroSkill(Hw,$4130385A)
call SelectHeroSkill(Hw,$4130385A)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130584C)
call SelectHeroSkill(Hw,$4130584C)
call SelectHeroSkill(Hw,$4130584C)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313132)
call SelectHeroSkill(Hw,$41313132)
call SelectHeroSkill(Hw,$41313132)
call SelectHeroSkill(Hw,$41313132)
call SelectHeroSkill(Hw,$41313132)
call SelectHeroSkill(Hw,$41313132)
call SelectHeroSkill(Hw,$41313132)
call SelectHeroSkill(Hw,$41313132)
call SelectHeroSkill(Hw,$41313132)
call SelectHeroSkill(Hw,$41313132)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305746,0)
set Hw=CreateUnit(Hv,$6E766C32,5047.2,2347.8,87.56)
set Hw=CreateUnit(Hv,$4F30304E,-16178.7,14366.3,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41313239)
call SelectHeroSkill(Hw,$41313239)
call SelectHeroSkill(Hw,$41313239)
call SelectHeroSkill(Hw,$41313239)
call SelectHeroSkill(Hw,$41313239)
call IssueImmediateOrder(Hw,"")
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313238)
call SelectHeroSkill(Hw,$41313238)
call SelectHeroSkill(Hw,$41313238)
call SelectHeroSkill(Hw,$41313238)
call SelectHeroSkill(Hw,$41313238)
call SelectHeroSkill(Hw,$41313238)
call SelectHeroSkill(Hw,$41313238)
call SelectHeroSkill(Hw,$41313238)
call SelectHeroSkill(Hw,$41313238)
call SelectHeroSkill(Hw,$41313238)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303859)
call SelectHeroSkill(Hw,$41303859)
call SelectHeroSkill(Hw,$41303859)
call SelectHeroSkill(Hw,$41303859)
call SelectHeroSkill(Hw,$41303859)
call SelectHeroSkill(Hw,$41303859)
call SelectHeroSkill(Hw,$41303859)
call SelectHeroSkill(Hw,$41303859)
call SelectHeroSkill(Hw,$41303859)
call SelectHeroSkill(Hw,$41303859)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304435)
call SelectHeroSkill(Hw,$41304435)
call SelectHeroSkill(Hw,$41304435)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313056)
call SelectHeroSkill(Hw,$41313056)
call SelectHeroSkill(Hw,$41313056)
call SelectHeroSkill(Hw,$41313056)
call SelectHeroSkill(Hw,$41313056)
call SelectHeroSkill(Hw,$41313056)
call SelectHeroSkill(Hw,$41313056)
call SelectHeroSkill(Hw,$41313056)
call SelectHeroSkill(Hw,$41313056)
call SelectHeroSkill(Hw,$41313056)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305738,0)
set Hw=CreateUnit(Hv,$4F30304F,-15471.8,14545.5,270.)
call SetHeroLevel(Hw,50,false)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
call SelectHeroSkill(Hw,$41304258)
call SelectHeroSkill(Hw,$41304258)
call SelectHeroSkill(Hw,$41304258)
call SelectHeroSkill(Hw,$41304258)
call SelectHeroSkill(Hw,$41304258)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130574C)
call SelectHeroSkill(Hw,$4130574C)
call SelectHeroSkill(Hw,$4130574C)
call SelectHeroSkill(Hw,$4130574C)
call SelectHeroSkill(Hw,$4130574C)
call SelectHeroSkill(Hw,$4130574C)
call SelectHeroSkill(Hw,$4130574C)
call SelectHeroSkill(Hw,$4130574C)
call SelectHeroSkill(Hw,$4130574C)
call SelectHeroSkill(Hw,$4130574C)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304344)
call SelectHeroSkill(Hw,$41304344)
call SelectHeroSkill(Hw,$41304344)
call SelectHeroSkill(Hw,$41304344)
call SelectHeroSkill(Hw,$41304344)
call SelectHeroSkill(Hw,$41304344)
call SelectHeroSkill(Hw,$41304344)
call SelectHeroSkill(Hw,$41304344)
call SelectHeroSkill(Hw,$41304344)
call SelectHeroSkill(Hw,$41304344)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304338)
call SelectHeroSkill(Hw,$41304338)
call SelectHeroSkill(Hw,$41304338)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305458)
call SelectHeroSkill(Hw,$41305458)
call SelectHeroSkill(Hw,$41305458)
call SelectHeroSkill(Hw,$41305458)
call SelectHeroSkill(Hw,$41305458)
call SelectHeroSkill(Hw,$41305458)
call SelectHeroSkill(Hw,$41305458)
call SelectHeroSkill(Hw,$41305458)
call SelectHeroSkill(Hw,$41305458)
call SelectHeroSkill(Hw,$41305458)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305736,0)
set KZ=CreateUnit(Hv,$4867616D,7756.2,1162.,220.455)
call SetUnitState(KZ,UNIT_STATE_MANA,57)
set Hw=CreateUnit(Hv,$55303132,-15326.9,14518.5,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41313244)
call SelectHeroSkill(Hw,$41313244)
call SelectHeroSkill(Hw,$41313244)
call SelectHeroSkill(Hw,$41313244)
call SelectHeroSkill(Hw,$41313244)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304E56)
call SelectHeroSkill(Hw,$41304E56)
call SelectHeroSkill(Hw,$41304E56)
call SelectHeroSkill(Hw,$41304E56)
call SelectHeroSkill(Hw,$41304E56)
call SelectHeroSkill(Hw,$41304E56)
call SelectHeroSkill(Hw,$41304E56)
call SelectHeroSkill(Hw,$41304E56)
call SelectHeroSkill(Hw,$41304E56)
call SelectHeroSkill(Hw,$41304E56)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130435A)
call SelectHeroSkill(Hw,$4130435A)
call SelectHeroSkill(Hw,$4130435A)
call SelectHeroSkill(Hw,$4130435A)
call SelectHeroSkill(Hw,$4130435A)
call SelectHeroSkill(Hw,$4130435A)
call SelectHeroSkill(Hw,$4130435A)
call SelectHeroSkill(Hw,$4130435A)
call SelectHeroSkill(Hw,$4130435A)
call SelectHeroSkill(Hw,$4130435A)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41314434)
call SelectHeroSkill(Hw,$41314434)
call SelectHeroSkill(Hw,$41314434)
call SelectHeroSkill(Hw,$41314434)
call SelectHeroSkill(Hw,$41314434)
call SelectHeroSkill(Hw,$41314434)
call SelectHeroSkill(Hw,$41314434)
call SelectHeroSkill(Hw,$41314434)
call SelectHeroSkill(Hw,$41314434)
call SelectHeroSkill(Hw,$41314434)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304359)
call SelectHeroSkill(Hw,$41304359)
call SelectHeroSkill(Hw,$41304359)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$4930574F,0)
set Hw=CreateUnit(Hv,$45303131,-15339.6,14318.7,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41303849)
call SelectHeroSkill(Hw,$41303849)
call SelectHeroSkill(Hw,$41303849)
call SelectHeroSkill(Hw,$41303849)
call SelectHeroSkill(Hw,$41303849)
call SelectHeroSkill(Hw,$41303849)
call SelectHeroSkill(Hw,$41303849)
call SelectHeroSkill(Hw,$41303849)
call SelectHeroSkill(Hw,$41303849)
call SelectHeroSkill(Hw,$41303849)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313956)
call SelectHeroSkill(Hw,$41313956)
call SelectHeroSkill(Hw,$41313956)
call SelectHeroSkill(Hw,$41313956)
call SelectHeroSkill(Hw,$41313956)
call SelectHeroSkill(Hw,$41313956)
call SelectHeroSkill(Hw,$41313956)
call SelectHeroSkill(Hw,$41313956)
call SelectHeroSkill(Hw,$41313956)
call SelectHeroSkill(Hw,$41313956)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303852)
call SelectHeroSkill(Hw,$41303852)
call SelectHeroSkill(Hw,$41303852)
call SelectHeroSkill(Hw,$41303852)
call SelectHeroSkill(Hw,$41303852)
call SelectHeroSkill(Hw,$41303852)
call SelectHeroSkill(Hw,$41303852)
call SelectHeroSkill(Hw,$41303852)
call SelectHeroSkill(Hw,$41303852)
call SelectHeroSkill(Hw,$41303852)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313137)
call SelectHeroSkill(Hw,$41313137)
call SelectHeroSkill(Hw,$41313137)
call IssueImmediateOrder(Hw,"")
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313959)
call SelectHeroSkill(Hw,$41313959)
call SelectHeroSkill(Hw,$41313959)
call SelectHeroSkill(Hw,$41313959)
call SelectHeroSkill(Hw,$41313959)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305735,0)
set Hw=CreateUnit(Hv,$4830364C,-15217.,14313.9,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$4130544C)
call SelectHeroSkill(Hw,$4130544C)
call SelectHeroSkill(Hw,$4130544C)
call SelectHeroSkill(Hw,$4130544C)
call SelectHeroSkill(Hw,$4130544C)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305448)
call SelectHeroSkill(Hw,$41305448)
call SelectHeroSkill(Hw,$41305448)
call SelectHeroSkill(Hw,$41305448)
call SelectHeroSkill(Hw,$41305448)
call SelectHeroSkill(Hw,$41305448)
call SelectHeroSkill(Hw,$41305448)
call SelectHeroSkill(Hw,$41305448)
call SelectHeroSkill(Hw,$41305448)
call SelectHeroSkill(Hw,$41305448)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305449)
call SelectHeroSkill(Hw,$41305449)
call SelectHeroSkill(Hw,$41305449)
call SelectHeroSkill(Hw,$41305449)
call SelectHeroSkill(Hw,$41305449)
call SelectHeroSkill(Hw,$41305449)
call SelectHeroSkill(Hw,$41305449)
call SelectHeroSkill(Hw,$41305449)
call SelectHeroSkill(Hw,$41305449)
call SelectHeroSkill(Hw,$41305449)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130544A)
call SelectHeroSkill(Hw,$4130544A)
call SelectHeroSkill(Hw,$4130544A)
call SelectHeroSkill(Hw,$4130544A)
call SelectHeroSkill(Hw,$4130544A)
call SelectHeroSkill(Hw,$4130544A)
call SelectHeroSkill(Hw,$4130544A)
call SelectHeroSkill(Hw,$4130544A)
call SelectHeroSkill(Hw,$4130544A)
call SelectHeroSkill(Hw,$4130544A)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130544B)
call SelectHeroSkill(Hw,$4130544B)
call SelectHeroSkill(Hw,$4130544B)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$4930574E,0)
set Hw=CreateUnit(Hv,$4F303050,-15213.5,14498.,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41303053)
call SelectHeroSkill(Hw,$41303053)
call SelectHeroSkill(Hw,$41303053)
call SelectHeroSkill(Hw,$41303053)
call SelectHeroSkill(Hw,$41303053)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303049)
call SelectHeroSkill(Hw,$41303049)
call SelectHeroSkill(Hw,$41303049)
call SelectHeroSkill(Hw,$41303049)
call SelectHeroSkill(Hw,$41303049)
call SelectHeroSkill(Hw,$41303049)
call SelectHeroSkill(Hw,$41303049)
call SelectHeroSkill(Hw,$41303049)
call SelectHeroSkill(Hw,$41303049)
call SelectHeroSkill(Hw,$41303049)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303052)
call SelectHeroSkill(Hw,$41303052)
call SelectHeroSkill(Hw,$41303052)
call SelectHeroSkill(Hw,$41303052)
call SelectHeroSkill(Hw,$41303052)
call SelectHeroSkill(Hw,$41303052)
call SelectHeroSkill(Hw,$41303052)
call SelectHeroSkill(Hw,$41303052)
call SelectHeroSkill(Hw,$41303052)
call SelectHeroSkill(Hw,$41303052)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304459)
call SelectHeroSkill(Hw,$41304459)
call SelectHeroSkill(Hw,$41304459)
call SelectHeroSkill(Hw,$41304459)
call SelectHeroSkill(Hw,$41304459)
call SelectHeroSkill(Hw,$41304459)
call SelectHeroSkill(Hw,$41304459)
call SelectHeroSkill(Hw,$41304459)
call SelectHeroSkill(Hw,$41304459)
call SelectHeroSkill(Hw,$41304459)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4130344F)
call SelectHeroSkill(Hw,$4130344F)
call SelectHeroSkill(Hw,$4130344F)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303457)
call SelectHeroSkill(Hw,$41303457)
call SelectHeroSkill(Hw,$41303457)
call SelectHeroSkill(Hw,$41303457)
call SelectHeroSkill(Hw,$41303457)
call SelectHeroSkill(Hw,$41303457)
call SelectHeroSkill(Hw,$41303457)
call SelectHeroSkill(Hw,$41303457)
call SelectHeroSkill(Hw,$41303457)
call SelectHeroSkill(Hw,$41303457)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$4930574B,0)
set Hw=CreateUnit(Hv,$4F303045,6716.1,1152.2,272.37)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$68706561,5454.9,-1642.1,41.52)
set Ka=CreateUnit(Hv,$68706561,5553.4,-1369.3,280.962)
set Kb=CreateUnit(Hv,$6E686561,5833.6,1345.7,212.218)
set Hw=CreateUnit(Hv,$68726468,7948.4,1183.4,8.355)
set Hw=CreateUnit(Hv,$68726468,7920.2,1002.6,7.648)
set Hw=CreateUnit(Hv,$68726468,7923.9,798.3,5.72)
set Kc=CreateUnit(Hv,$6E30384C,5643.8,49.8,118.68)
set Hw=CreateUnit(Hv,$4830364D,-15074.2,14309.3,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$41304D53)
call SelectHeroSkill(Hw,$41304D53)
call SelectHeroSkill(Hw,$41304D53)
call SelectHeroSkill(Hw,$41304D53)
call SelectHeroSkill(Hw,$41304D53)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303954)
call SelectHeroSkill(Hw,$41303954)
call SelectHeroSkill(Hw,$41303954)
call SelectHeroSkill(Hw,$41303954)
call SelectHeroSkill(Hw,$41303954)
call SelectHeroSkill(Hw,$41303954)
call SelectHeroSkill(Hw,$41303954)
call SelectHeroSkill(Hw,$41303954)
call SelectHeroSkill(Hw,$41303954)
call SelectHeroSkill(Hw,$41303954)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304D50)
call SelectHeroSkill(Hw,$41304D50)
call SelectHeroSkill(Hw,$41304D50)
call SelectHeroSkill(Hw,$41304D50)
call SelectHeroSkill(Hw,$41304D50)
call SelectHeroSkill(Hw,$41304D50)
call SelectHeroSkill(Hw,$41304D50)
call SelectHeroSkill(Hw,$41304D50)
call SelectHeroSkill(Hw,$41304D50)
call SelectHeroSkill(Hw,$41304D50)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41304D51)
call SelectHeroSkill(Hw,$41304D51)
call SelectHeroSkill(Hw,$41304D51)
call SelectHeroSkill(Hw,$41304D51)
call SelectHeroSkill(Hw,$41304D51)
call SelectHeroSkill(Hw,$41304D51)
call SelectHeroSkill(Hw,$41304D51)
call SelectHeroSkill(Hw,$41304D51)
call SelectHeroSkill(Hw,$41304D51)
call SelectHeroSkill(Hw,$41304D51)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303042)
call SelectHeroSkill(Hw,$41303042)
call SelectHeroSkill(Hw,$41303042)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305745,0)
set Hw=CreateUnit(Hv,$6E766C32,7077.7,-1748.6,87.56)
set Hw=CreateUnit(Hv,$6E656372,7029.8,1170.2,240.33)
set Hw=CreateUnit(Hv,$6E656372,7398.,1330.3,289.81)
set Hw=CreateUnit(Hv,$6E736865,7062.7,1275.3,105.32)
set Hw=CreateUnit(Hv,$6E736865,7293.5,1248.,107.07)
set Hw=CreateUnit(Hv,$6E656368,7181.3,1271.6,80.3)
set Hw=CreateUnit(Hv,$6E656368,7393.7,1174.4,333.71)
set Kd=CreateUnit(Hv,$4864676F,5548.8,-2220.2,41.453)
call SetUnitState(Kd,UNIT_STATE_MANA,0)
set Ke=CreateUnit(Hv,$486C6772,5457.7,-1999.6,355.651)
call SetUnitState(Ke,UNIT_STATE_MANA,0)
set Kf=CreateUnit(Hv,$6E6B6F6C,7981.3,-198.2,245.79)
set Hw=CreateUnit(Hv,$6E686566,-15064.8,2388.2,342.217)
set Kg=CreateUnit(Hv,$6E636731,-4105.6,12649.,154.128)
set Hw=CreateUnit(Hv,$4F30304C,-15496.5,14085.,270.)
call SetHeroLevel(Hw,50,false)
call UnitAddItemToSlotById(Hw,$6D6C7374,0)
set Hw=CreateUnit(Hv,$45303132,-15067.3,14492.8,270.)
call SetHeroLevel(Hw,50,false)
call SelectHeroSkill(Hw,$4130304E)
call SelectHeroSkill(Hw,$4130304E)
call SelectHeroSkill(Hw,$4130304E)
call SelectHeroSkill(Hw,$4130304E)
call SelectHeroSkill(Hw,$4130304E)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41303039)
call SelectHeroSkill(Hw,$41303039)
call SelectHeroSkill(Hw,$41303039)
call SelectHeroSkill(Hw,$41303039)
call SelectHeroSkill(Hw,$41303039)
call SelectHeroSkill(Hw,$41303039)
call SelectHeroSkill(Hw,$41303039)
call SelectHeroSkill(Hw,$41303039)
call SelectHeroSkill(Hw,$41303039)
call SelectHeroSkill(Hw,$41303039)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305830)
call SelectHeroSkill(Hw,$41305830)
call SelectHeroSkill(Hw,$41305830)
call SelectHeroSkill(Hw,$41305830)
call SelectHeroSkill(Hw,$41305830)
call SelectHeroSkill(Hw,$41305830)
call SelectHeroSkill(Hw,$41305830)
call SelectHeroSkill(Hw,$41305830)
call SelectHeroSkill(Hw,$41305830)
call SelectHeroSkill(Hw,$41305830)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305233)
call SelectHeroSkill(Hw,$41305233)
call SelectHeroSkill(Hw,$41305233)
call SelectHeroSkill(Hw,$41305233)
call SelectHeroSkill(Hw,$41305233)
call SelectHeroSkill(Hw,$41305233)
call SelectHeroSkill(Hw,$41305233)
call SelectHeroSkill(Hw,$41305233)
call SelectHeroSkill(Hw,$41305233)
call SelectHeroSkill(Hw,$41305233)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305A54)
call SelectHeroSkill(Hw,$41305A54)
call SelectHeroSkill(Hw,$41305A54)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$4930574C,0)
set Kh=CreateUnit(Hv,$48303635,-15623.,13554.4,270.)
call SetHeroLevel(Kh,50,false)
call SelectHeroSkill(Kh,$41305037)
call SelectHeroSkill(Kh,$41305037)
call SelectHeroSkill(Kh,$41305037)
call SelectHeroSkill(Kh,$41305037)
call SelectHeroSkill(Kh,$41305037)
call SelectHeroSkill(Kh,$41305037)
call SelectHeroSkill(Kh,$41305037)
call SelectHeroSkill(Kh,$41305037)
call SelectHeroSkill(Kh,$41305037)
call SelectHeroSkill(Kh,$41305037)
call IssueImmediateOrder(Kh,"")
call SelectHeroSkill(Kh,$41305048)
call SelectHeroSkill(Kh,$41305048)
call SelectHeroSkill(Kh,$41305048)
call SelectHeroSkill(Kh,$41305048)
call SelectHeroSkill(Kh,$41305048)
call SelectHeroSkill(Kh,$41305048)
call SelectHeroSkill(Kh,$41305048)
call SelectHeroSkill(Kh,$41305048)
call SelectHeroSkill(Kh,$41305048)
call SelectHeroSkill(Kh,$41305048)
call IssueImmediateOrder(Kh,"")
call SelectHeroSkill(Kh,$41305047)
call SelectHeroSkill(Kh,$41305047)
call SelectHeroSkill(Kh,$41305047)
call IssueImmediateOrder(Kh,"")
call SelectHeroSkill(Kh,$41305339)
call SelectHeroSkill(Kh,$41305339)
call SelectHeroSkill(Kh,$41305339)
call SelectHeroSkill(Kh,$41305339)
call SelectHeroSkill(Kh,$41305339)
call IssueImmediateOrder(Kh,"")
call SelectHeroSkill(Kh,$4130505A)
call SelectHeroSkill(Kh,$4130505A)
call SelectHeroSkill(Kh,$4130505A)
call SelectHeroSkill(Kh,$4130505A)
call SelectHeroSkill(Kh,$4130505A)
call SelectHeroSkill(Kh,$4130505A)
call SelectHeroSkill(Kh,$4130505A)
call SelectHeroSkill(Kh,$4130505A)
call SelectHeroSkill(Kh,$4130505A)
call SelectHeroSkill(Kh,$4130505A)
call IssueImmediateOrder(Kh,"")
set Ki=CreateUnit(Hv,$6E73676E,-4954.1,13173.3,306.063)
set Kj=CreateUnit(Hv,$6E686566,-14943.6,2301.1,163.756)
set Hw=CreateUnit(Hv,$4830344A,-15665.5,14119.3,229.79)
call SetHeroLevel(Hw,50,false)
call SetUnitState(Hw,UNIT_STATE_MANA,193)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call SelectHeroSkill(Hw,$41304253)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305732)
call SelectHeroSkill(Hw,$41305732)
call SelectHeroSkill(Hw,$41305732)
call SelectHeroSkill(Hw,$41305732)
call SelectHeroSkill(Hw,$41305732)
call SelectHeroSkill(Hw,$41305732)
call SelectHeroSkill(Hw,$41305732)
call SelectHeroSkill(Hw,$41305732)
call SelectHeroSkill(Hw,$41305732)
call SelectHeroSkill(Hw,$41305732)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41305734)
call SelectHeroSkill(Hw,$41305734)
call SelectHeroSkill(Hw,$41305734)
call SelectHeroSkill(Hw,$41305734)
call SelectHeroSkill(Hw,$41305734)
call SelectHeroSkill(Hw,$41305734)
call SelectHeroSkill(Hw,$41305734)
call SelectHeroSkill(Hw,$41305734)
call SelectHeroSkill(Hw,$41305734)
call SelectHeroSkill(Hw,$41305734)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call SelectHeroSkill(Hw,$4131364E)
call IssueImmediateOrder(Hw,"")
call SelectHeroSkill(Hw,$41313657)
call SelectHeroSkill(Hw,$41313657)
call SelectHeroSkill(Hw,$41313657)
call IssueImmediateOrder(Hw,"")
call UnitAddItemToSlotById(Hw,$49305A44,0)
set Kk=CreateUnit(Hv,$68303052,4334.4,15498.,303.27)
set Kl=CreateUnit(Hv,$6E647268,-4234.7,13236.5,256.905)
call SetUnitState(Kl,UNIT_STATE_MANA,0)
set Km=CreateUnit(Hv,$6F726169,7791.8,-2014.8,270.44)
set Kn=CreateUnit(Hv,$4F626C61,17994.4,1752.2,354.314)
call SetUnitState(Kn,UNIT_STATE_MANA,0)
set Ko=CreateUnit(Hv,$6E686566,-15057.3,2274.5,72.137)
set Hw=CreateUnit(Hv,$6F657965,18044.6,1952.1,30.916)
set Hw=CreateUnit(Hv,$6F657965,18809.9,1174.6,348.288)
set Kp=CreateUnit(Hv,$4E616C63,7549.9,-1514.4,241.33)
call SetUnitState(Kp,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6F746F74,17993.3,2384.3,259.773)
set Hw=CreateUnit(Hv,$6F746F74,18604.2,2400.4,263.026)
set Hw=CreateUnit(Hv,$6F746272,17947.9,1967.7,303.603)
set Hw=CreateUnit(Hv,$6F777976,18325.5,1214.7,72.5)
set Kq=CreateUnit(Hv,$6F746175,18500.3,1216.5,85.134)
set Kr=CreateUnit(Hv,$6F636174,18043.5,1548.8,26.788)
set Ks=CreateUnit(Hv,$6E766C6B,-14320.4,192.3,70.387)
set Kt=CreateUnit(Hv,$6E766C6B,-14436.,298.1,20.491)
set Hw=CreateUnit(Hv,$6E76696C,-13086.3,1630.3,341.174)
set Hw=CreateUnit(Hv,$68303543,6971.5,-2616.5,45.)
set Ku=CreateUnit(Hv,$6830344D,-15872.9,-150.4,0.)
set Hw=CreateUnit(Hv,$6E65677A,-14786.8,1324.1,138.81)
set Kv=CreateUnit(Hv,$6E65677A,6986.5,-1509.3,283.09)
set Hw=null
endfunction
function mb takes nothing returns nothing
local player Hv=Player(9)
local unit Hw
set Hw=CreateUnit(Hv,$6F303038,14758.2,7120.3,283.536)
set Hw=null
endfunction
function mc takes nothing returns nothing
local player Hv=Player(10)
local unit Hw
local trigger He
set Hw=CreateUnit(Hv,$6E30305A,-2846.4,8432.7,159.36)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-2499.2,8386.4,31.05)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-3018.7,7946.2,144.6)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-3098.9,8272.8,57.58)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303033,-2759.8,8219.4,9.65)
set Hw=CreateUnit(Hv,$75303033,-2698.9,7988.,264.61)
set Hw=CreateUnit(Hv,$6E303059,-2324.7,8239.4,292.07)
set Hw=CreateUnit(Hv,$6E303059,-2348.,7992.8,179.62)
set Hw=CreateUnit(Hv,$6E30305A,-2512.9,7934.3,159.36)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303059,-15760.6,8360.7,269.01)
set Hw=CreateUnit(Hv,$6E303059,-15809.3,8125.7,221.81)
set Hw=CreateUnit(Hv,$6E303059,-14453.2,7265.,254.66)
set Hw=CreateUnit(Hv,$6E30305A,-15640.6,8230.7,292.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-15648.,8067.2,14.66)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-14675.1,7243.4,256.43)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-14434.3,7461.3,15.27)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-14604.4,7383.5,296.71)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-14831.9,7358.6,16.03)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-14551.,7588.1,123.2)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-15660.4,7907.5,359.33)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-15423.8,8117.7,56.16)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-15548.7,8433.2,8.34)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303059,-15391.9,8296.3,221.81)
set Hw=CreateUnit(Hv,$6E303059,-14765.2,7529.1,221.81)
set Hw=CreateUnit(Hv,$6E30305A,-15469.3,7911.5,14.66)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-14480.1,7727.5,14.66)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303034,-1198.5,8167.2,165.02)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lx)
set Hw=CreateUnit(Hv,$75303035,-15722.2,7407.,39.05)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l5)
set He=null
set Hw=null
endfunction
function md takes nothing returns nothing
local player Hv=Player(11)
local unit Hw
set Hw=CreateUnit(Hv,$757A6731,23072.,3680.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,3680.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,3488.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,3296.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,3104.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,2912.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,2720.,270.)
set IO=CreateUnit(Hv,$68303132,-15360.,15680.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,2528.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,2336.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,2144.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,1952.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,1760.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,1568.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,1376.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,1184.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,992.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,800.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,608.,270.)
set Hw=CreateUnit(Hv,$757A6731,23072.,416.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,416.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,3488.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,3296.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,3104.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,2912.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,2720.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,2528.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,2336.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,2144.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,1952.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,1760.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,1568.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,1376.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,1184.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,992.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,800.,270.)
set Hw=CreateUnit(Hv,$757A6731,24160.,608.,270.)
set Hw=null
endfunction
function me takes nothing returns nothing
local player Hv=Player(11)
local unit Hw
local trigger He
set Kw=CreateUnit(Hv,$6E303334,12283.5,-6243.4,160.04)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Kw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Kw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l8)
set Kx=CreateUnit(Hv,$6E30304F,3543.4,-22496.3,91.91)
set Hw=CreateUnit(Hv,$6E303048,-10127.6,-6524.,129.59)
set Ky=CreateUnit(Hv,$6E303844,18543.5,-23248.4,270.)
set Kz=CreateUnit(Hv,$6E303630,5866.6,12273.9,270.)
set K0=CreateUnit(Hv,$6E303339,-12149.,-23486.8,261.69)
set K1=CreateUnit(Hv,$6E303433,-4943.9,-23378.8,270.53)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,K1,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,K1,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lx)
set K2=CreateUnit(Hv,$6E303654,11020.6,7711.7,265.129)
set K3=CreateUnit(Hv,$6E30304A,1339.5,-23724.1,90.)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,K3,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,K3,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l3)
set K4=CreateUnit(Hv,$75303030,-14072.8,-13566.7,188.94)
set K5=CreateUnit(Hv,$6E303539,-7793.9,-21483.9,268.33)
set K6=CreateUnit(Hv,$6E303231,1760.4,11982.5,170.1)
set K7=CreateUnit(Hv,$6E303052,6375.4,-23624.8,90.72)
call SetUnitState(K7,UNIT_STATE_MANA,0)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,K7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,K7,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function ly)
set K8=CreateUnit(Hv,$6E687963,13554.6,3300.7,261.47)
set K9=CreateUnit(Hv,$6830304F,5238.7,15484.2,236.454)
call SetUnitState(K9,UNIT_STATE_MANA,0)
set LB=CreateUnit(Hv,$75303054,-5712.,-21067.3,267.344)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LB,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LB,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l1)
set LC=CreateUnit(Hv,$6E303130,8817.6,-23721.1,273.62)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LC,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LC,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function ly)
set LD=CreateUnit(Hv,$6E303353,3586.9,-23250.1,93.57)
set LE=CreateUnit(Hv,$68303141,-5153.,15685.1,264.65)
set LF=CreateUnit(Hv,$6E30324F,7747.4,5912.8,331.22)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LF,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LF,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mF)
set LG=CreateUnit(Hv,$6E303749,-2914.,-23456.,270.)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LG,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LG,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l0)
set LH=CreateUnit(Hv,$6E30374A,-843.7,-23465.6,270.)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LH,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LH,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l0)
set LI=CreateUnit(Hv,$6E303230,-9520.2,12939.8,194.95)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LI,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LI,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mC)
set LJ=CreateUnit(Hv,$6E303232,11513.7,-23412.,270.)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LJ,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LJ,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l0)
set LK=CreateUnit(Hv,$68303454,-406.8,15827.9,145.97)
set LL=CreateUnit(Hv,$68303250,-6128.5,9753.6,273.69)
set Hw=CreateUnit(Hv,$6E303252,5891.1,-7610.1,92.954)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l4)
set LM=CreateUnit(Hv,$6E303250,15721.5,2624.4,247.66)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LM,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LM,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mE)
set LN=CreateUnit(Hv,$6E303254,-13566.6,-15053.6,80.43)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LN,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LN,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lt)
set LO=CreateUnit(Hv,$6E303255,-13577.1,-16082.2,118.38)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LO,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LO,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lt)
set LP=CreateUnit(Hv,$6E303256,-12341.4,-16059.8,185.07)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LP,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LP,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lt)
set LQ=CreateUnit(Hv,$6E303257,-11370.4,-16224.9,175.89)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LQ,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LQ,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lu)
set LR=CreateUnit(Hv,$6E303552,7011.3,4587.9,281.39)
set LS=CreateUnit(Hv,$6E303331,14080.3,-23260.4,270.)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LS,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LS,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l2)
set Hw=CreateUnit(Hv,$68303051,4250.2,14862.4,359.64)
set Hw=CreateUnit(Hv,$756D7477,13119.5,-6594.3,154.442)
set LT=CreateUnit(Hv,$6E303445,3963.9,2185.2,182.15)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LT,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LT,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mJ)
set LU=CreateUnit(Hv,$65303049,-16036.,-16176.2,47.715)
set LV=CreateUnit(Hv,$6E303356,-8593.6,-23446.8,264.9)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LV,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LV,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lw)
set LW=CreateUnit(Hv,$68303045,-14077.3,10471.2,270.07)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LW,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LW,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mI)
set LX=CreateUnit(Hv,$75303049,-6676.3,-23462.4,278.84)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LX,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LX,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lx)
set LY=CreateUnit(Hv,$68303233,-9952.1,-20405.5,265.23)
call SetUnitColor(LY,ConvertPlayerColor(0))
set LZ=CreateUnit(Hv,$6E303057,440.6,3618.9,136.52)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LZ,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,LZ,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lv)
set La=CreateUnit(Hv,$6E303051,-2432.6,-11311.,94.775)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,La,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,La,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lu)
set Lb=CreateUnit(Hv,$6E30324E,-9102.,-12183.7,127.927)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lb,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lb,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lt)
set Lc=CreateUnit(Hv,$6E30304B,-9782.6,-14875.3,329.89)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lc,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lc,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lt)
set Ld=CreateUnit(Hv,$6E30304C,-10361.3,-11843.7,263.08)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Ld,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Ld,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lt)
set Le=CreateUnit(Hv,$6E30304E,-6187.9,-11113.6,269.39)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Le,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Le,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lt)
set Lf=CreateUnit(Hv,$6E303352,-10453.3,-23376.9,268.47)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lf,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lf,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lw)
set Lg=CreateUnit(Hv,$6E30304D,-3858.1,-10399.8,194.766)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lg,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lg,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lt)
set Lh=CreateUnit(Hv,$68303035,-5129.5,-2821.6,199.55)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lh,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lh,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lt)
set Li=CreateUnit(Hv,$6E303338,8701.4,7853.3,273.471)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Li,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Li,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function ly)
set Lj=CreateUnit(Hv,$7530304C,-15740.,10261.2,273.62)
set Lk=CreateUnit(Hv,$7530304A,-15742.4,12319.4,273.43)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lk,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lk,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mH)
set Ll=CreateUnit(Hv,$6E303754,21404.3,2659.6,267.62)
set Hw=CreateUnit(Hv,$6830334A,-5673.2,-10672.3,103.03)
set Lm=CreateUnit(Hv,$6E30354B,7999.1,12016.1,247.58)
set Ln=CreateUnit(Hv,$6830324F,-15162.4,-23518.2,269.68)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Ln,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Ln,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l2)
set Lo=CreateUnit(Hv,$6F303047,-12364.2,-15126.7,152.87)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lo,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lo,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mL)
set Lp=CreateUnit(Hv,$6530304C,-6530.2,1962.6,228.719)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lp,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lp,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mM)
set Lq=CreateUnit(Hv,$6E303553,6672.1,9510.5,269.12)
set Lr=CreateUnit(Hv,$75303050,-15775.6,-10392.1,38.1)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lr,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lr,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lw)
set Hw=CreateUnit(Hv,$6E303530,593.4,-4878.2,272.068)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lu)
set Ls=CreateUnit(Hv,$75303052,-11053.,4300.7,353.638)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Ls,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Ls,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l9)
set Lt=CreateUnit(Hv,$6E303554,9521.5,9700.5,270.)
set Lu=CreateUnit(Hv,$6E303555,4298.2,9599.9,319.36)
set Lv=CreateUnit(Hv,$68303548,439.2,-14014.1,185.05)
set Hw=CreateUnit(Hv,$68303537,7556.8,12151.5,0.)
set Hw=CreateUnit(Hv,$68303537,8469.7,12191.8,0.)
set Hw=CreateUnit(Hv,$68303537,7585.6,11334.8,0.)
set Lw=CreateUnit(Hv,$6E303456,-12384.2,-21066.6,266.68)
set Lx=CreateUnit(Hv,$6E676831,17782.7,9472.3,61.16)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lx,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lx,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lx)
set Ly=CreateUnit(Hv,$6E6D6764,23971.7,15117.4,299.3)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Ly,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Ly,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function lz)
set Lz=CreateUnit(Hv,$6E667065,19713.3,14894.,241.75)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Lz,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Lz,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function ly)
set L0=CreateUnit(Hv,$6E303547,16108.7,-23110.5,268.66)
set L1=CreateUnit(Hv,$6E303548,-15476.5,-19064.1,270.)
set L2=CreateUnit(Hv,$6830334E,-15545.1,-15232.1,289.86)
set L3=CreateUnit(Hv,$6830334B,-1044.1,7963.1,262.2)
set L4=CreateUnit(Hv,$6830334C,4621.8,-2571.5,340.78)
set L5=CreateUnit(Hv,$6830334D,1424.3,13225.2,26.02)
set L6=CreateUnit(Hv,$6E303537,-2312.3,15463.5,265.94)
set Hw=CreateUnit(Hv,$68303537,8394.4,11311.9,0.)
set L7=CreateUnit(Hv,$75303055,-15243.2,-21167.2,265.405)
set L8=CreateUnit(Hv,$6830344F,2813.3,-9571.1,186.13)
set Hw=CreateUnit(Hv,$6E303757,23885.9,3593.1,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,23857.2,3374.6,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,23972.5,3744.3,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303756,23728.8,3612.,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,23475.9,3067.8,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,23447.1,2849.2,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,23562.4,3218.9,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303756,23318.8,3086.6,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,23860.1,2671.3,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,23831.4,2452.8,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,23946.7,2822.5,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303756,23703.,2690.1,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,23524.1,2044.2,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,23495.3,1825.6,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,23610.6,2195.3,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303756,23366.9,2063.,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,23849.7,1432.4,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,23820.9,1213.9,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,23936.2,1583.6,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303756,23692.5,1451.2,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,23456.9,986.5,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,23428.2,768.,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,23543.5,1137.7,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303756,23299.8,1005.3,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,23385.1,3483.4,51.798)
set Hw=CreateUnit(Hv,$6E303755,23781.8,3047.2,51.798)
set Hw=CreateUnit(Hv,$6E303755,23439.1,2465.2,51.798)
set Hw=CreateUnit(Hv,$6E303755,23832.4,1944.1,51.798)
set Hw=CreateUnit(Hv,$6E303755,23386.2,1451.5,51.798)
set Hw=CreateUnit(Hv,$6E303755,23775.9,843.7,51.798)
set L9=CreateUnit(Hv,$7567686F,23612.2,368.7,91.03)
set He=null
set Hw=null
endfunction
function mf takes nothing returns nothing
local player Hv=Player(PLAYER_NEUTRAL_AGGRESSIVE)
local unit Hw
set Hw=CreateUnit(Hv,$6E667231,-9728.,576.,270.)
set Hw=CreateUnit(Hv,$6E666830,-4800.,-2112.,270.)
set Hw=CreateUnit(Hv,$6E667231,-9472.,-3072.,270.)
set Hw=CreateUnit(Hv,$6E686E73,-6720.,-12544.,270.)
set Hw=CreateUnit(Hv,$6E686E73,-6784.,-9152.,270.)
set Hw=CreateUnit(Hv,$6E646368,-3776.,-9088.,270.)
set Hw=CreateUnit(Hv,$757A6967,-11488.,4768.,270.)
set Hw=CreateUnit(Hv,$757A6967,-10400.,3296.,270.)
set Hw=CreateUnit(Hv,$757A6967,-6880.,3168.,270.)
set Hw=null
endfunction
function mg takes nothing returns nothing
local player Hv=Player(PLAYER_NEUTRAL_AGGRESSIVE)
local unit Hw
local trigger He
set Hw=CreateUnit(Hv,$6F737031,-7777.5,2330.4,243.06)
set Hw=CreateUnit(Hv,$6E303030,-6404.5,26.6,107.89)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-8735.4,-1406.3,85.75)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-7218.1,-3564.2,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-9267.6,-3385.1,97.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$65666F6E,-14672.,-3404.3,225.22)
set Hw=CreateUnit(Hv,$65666F6E,-12378.8,-5045.8,225.22)
set Hw=CreateUnit(Hv,$6F737031,-7407.9,-3347.3,294.87)
set Hw=CreateUnit(Hv,$6F737031,-9126.8,-3244.2,294.87)
set Hw=CreateUnit(Hv,$6F737031,-6235.,-4386.1,263.39)
set Hw=CreateUnit(Hv,$6F737031,-6245.6,-3057.4,152.53)
set Hw=CreateUnit(Hv,$6F737031,-5906.3,-2061.7,347.62)
set Hw=CreateUnit(Hv,$6F737031,-7153.3,-1266.1,243.06)
set Hw=CreateUnit(Hv,$6F737031,-8954.9,-1349.,172.91)
set Hw=CreateUnit(Hv,$6F737031,-9672.5,138.,222.15)
set Hw=CreateUnit(Hv,$65666F6E,-7587.2,2234.1,323.26)
set Hw=CreateUnit(Hv,$6E303030,-7498.9,-828.7,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$65666F6E,-7571.1,797.1,323.26)
set Hw=CreateUnit(Hv,$65666F6E,-9490.9,484.3,353.74)
set Hw=CreateUnit(Hv,$65666F6E,-7017.9,-1374.5,147.4)
set Hw=CreateUnit(Hv,$65666F6E,-5647.5,-430.2,113.12)
set Hw=CreateUnit(Hv,$65666F6E,-5746.7,-2050.2,25.49)
set Hw=CreateUnit(Hv,$65666F6E,-6147.3,-4513.8,80.24)
set Hw=CreateUnit(Hv,$65666F6E,-7431.6,-5062.2,77.34)
set Hw=CreateUnit(Hv,$65666F6E,-9150.6,-3550.2,23.45)
set Hw=CreateUnit(Hv,$65666F6E,-11415.1,-3507.9,165.14)
set Hw=CreateUnit(Hv,$65666F6E,-14676.4,-3974.5,225.22)
set Hw=CreateUnit(Hv,$65666F6E,-12957.4,-5998.,294.03)
set Hw=CreateUnit(Hv,$65666F6E,-12737.9,-6902.8,101.06)
set Hw=CreateUnit(Hv,$65666F6E,-10672.,-6021.9,173.61)
set Hw=CreateUnit(Hv,$6E646572,-8593.3,142.1,284.98)
set Hw=CreateUnit(Hv,$6E656372,-6006.,-3857.,95.28)
set Hw=CreateUnit(Hv,$6E726163,-13251.9,-5743.7,313.42)
set Hw=CreateUnit(Hv,$6E726163,-14491.3,-3575.6,266.71)
set Hw=CreateUnit(Hv,$6E726163,-10020.8,1744.,185.29)
set Hw=CreateUnit(Hv,$6F737031,-5684.3,-1111.3,243.06)
set Hw=CreateUnit(Hv,$6F737733,-12736.5,-5918.6,112.16)
set Hw=CreateUnit(Hv,$6F737733,-14518.5,-3834.3,112.16)
set Hw=CreateUnit(Hv,$6F737733,-14764.5,-3476.8,112.16)
set Hw=CreateUnit(Hv,$6F737733,-10794.2,-6287.2,112.16)
set Hw=CreateUnit(Hv,$6F737733,-12428.9,-6761.1,112.16)
set Hw=CreateUnit(Hv,$6F737733,-12215.9,-4990.2,112.16)
set Hw=CreateUnit(Hv,$6F737031,-14103.6,-7975.1,172.91)
set Hw=CreateUnit(Hv,$6F737733,-15736.6,-7226.5,24.93)
set Hw=CreateUnit(Hv,$6F737733,-13376.4,-8487.3,112.16)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l6)
set Hw=CreateUnit(Hv,$6F737031,-15624.1,-5631.4,172.91)
set Hw=CreateUnit(Hv,$6F737031,-14555.4,-6203.4,172.91)
set Hw=CreateUnit(Hv,$6E73626D,-14287.7,-10794.7,232.38)
set Hw=CreateUnit(Hv,$6E677277,-8511.8,-6832.9,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-10319.1,-8478.4,37.12)
set Hw=CreateUnit(Hv,$6E303044,-10456.,-11323.4,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-10268.4,-14540.5,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,100)
set Hw=CreateUnit(Hv,$6E303044,-7642.1,-13261.6,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-4067.,-10030.8,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-8912.1,-8819.4,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-8899.2,-11400.5,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-11312.5,-14504.5,311.48)
set Hw=CreateUnit(Hv,$6E303045,-4799.5,-11496.2,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303046,-5895.,-14194.3,180.43)
set Hw=CreateUnit(Hv,$6E303046,-5070.9,-11479.5,180.43)
set Hw=CreateUnit(Hv,$6E303046,-4140.9,-9305.3,180.43)
set Hw=CreateUnit(Hv,$6E303046,-6694.5,-11133.6,180.43)
set Hw=CreateUnit(Hv,$6E303046,-10389.6,-9799.6,180.43)
set Hw=CreateUnit(Hv,$6E303046,-11466.9,-13543.6,180.43)
set Hw=CreateUnit(Hv,$6E303046,-7663.1,-13644.8,180.43)
set Hw=CreateUnit(Hv,$6E303046,-7122.6,-9284.6,180.43)
set Hw=CreateUnit(Hv,$6E73626D,-6738.7,-9469.7,232.38)
set Hw=CreateUnit(Hv,$6E303343,3129.5,5491.5,77.181)
set Hw=CreateUnit(Hv,$6E677277,-7601.6,-7255.,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E627A6B,-490.7,-5501.2,233.31)
set Hw=CreateUnit(Hv,$6E677277,-6204.4,-7641.6,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E726472,-1592.,1518.6,204.062)
set Hw=CreateUnit(Hv,$6E61646B,-2064.5,-5763.8,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-2989.2,-3996.7,251.89)
set Hw=CreateUnit(Hv,$6E73626D,-12163.2,-11246.5,232.38)
set Hw=CreateUnit(Hv,$6E73626D,-10606.6,-13480.3,232.38)
set Hw=CreateUnit(Hv,$6E73626D,-8721.4,-14623.,232.38)
set Hw=CreateUnit(Hv,$6E73626D,-8831.6,-10260.2,232.38)
set Hw=CreateUnit(Hv,$6E73626D,-5544.5,-13986.4,232.38)
set Hw=CreateUnit(Hv,$6E303046,-6101.,-12709.5,180.43)
set Hw=CreateUnit(Hv,$6E303045,-11883.6,-10939.6,311.48)
set Hw=CreateUnit(Hv,$6E303044,-11486.9,-9300.2,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-5112.9,-7352.2,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-4917.5,-6524.8,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-4867.2,-4671.3,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-4084.2,-7714.1,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E61646B,-3504.8,-5553.,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-1834.4,-4437.9,169.916)
set Hw=CreateUnit(Hv,$6E61646B,-2064.5,-5763.8,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-2721.1,-7306.6,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-2669.7,-8339.6,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-1421.5,-7621.,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-897.8,-7710.6,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-583.1,-8814.9,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-473.,-9407.6,251.89)
set Hw=CreateUnit(Hv,$6E627A6B,-6.,-6679.9,233.31)
set Hw=CreateUnit(Hv,$6E627A6B,1123.4,-8409.4,233.31)
set Hw=CreateUnit(Hv,$6E627A6B,1393.3,-8803.1,233.31)
set Hw=CreateUnit(Hv,$6E627A6B,1905.6,-7218.8,233.31)
set Hw=CreateUnit(Hv,$6E627A6B,2265.6,-7107.,233.31)
set IP=CreateUnit(Hv,$68303448,6119.1,-9988.6,0.)
set IQ=CreateUnit(Hv,$68303448,6606.1,-11325.8,90.)
set Hw=CreateUnit(Hv,$6E627A6B,1132.3,-6663.6,233.31)
set Hw=CreateUnit(Hv,$6E303047,3368.3,-2876.8,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-4517.9,-6472.2,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,3113.5,-2961.,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,3685.2,-1512.3,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,2244.,-1519.5,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,1562.8,-3377.5,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,-16.5,-3499.6,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,335.2,-1644.4,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,605.9,-1670.,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,359.6,-219.3,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E61646B,-3338.8,-4048.1,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-2014.7,-8815.8,251.89)
set Hw=CreateUnit(Hv,$6E303047,-575.,865.3,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E726472,-2234.1,-2741.,34.28)
set Hw=CreateUnit(Hv,$6E303047,1151.7,1569.5,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,1016.,1190.5,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,1820.2,-34.3,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,2238.7,224.6,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E726472,-3323.2,340.,34.28)
set Hw=CreateUnit(Hv,$6E726472,-3910.4,-1207.9,350.578)
set Hw=CreateUnit(Hv,$6E726472,-1504.7,-3108.6,278.335)
set Hw=CreateUnit(Hv,$6F737031,-4657.,-2295.2,152.53)
set Hw=CreateUnit(Hv,$6E747267,-3016.6,2335.3,177.18)
set Hw=CreateUnit(Hv,$75303033,-9023.2,4336.1,181.39)
set Hw=CreateUnit(Hv,$6E726472,-701.5,-2586.,237.521)
set Hw=CreateUnit(Hv,$6E726472,-3289.6,-2524.6,93.619)
set Hw=CreateUnit(Hv,$6E30324D,8545.9,-3270.8,334.9)
set Hw=CreateUnit(Hv,$6E30324D,10097.3,-4865.,334.9)
set Hw=CreateUnit(Hv,$6E30324D,8190.3,-5750.9,334.9)
set Hw=CreateUnit(Hv,$6E726472,-2433.5,-1942.5,133.136)
set Hw=CreateUnit(Hv,$6E30324D,10694.1,-6274.9,88.43)
set Hw=CreateUnit(Hv,$6E30324D,6346.4,-3643.3,334.9)
set Hw=CreateUnit(Hv,$6E30324A,10275.7,-2551.6,101.96)
set Hw=CreateUnit(Hv,$6E30324A,9049.3,-2480.9,101.96)
set Hw=CreateUnit(Hv,$6E30324A,9405.5,-3864.3,101.96)
set Hw=CreateUnit(Hv,$6E726472,-2149.1,-41.,263.281)
set Hw=CreateUnit(Hv,$6E30324A,10903.4,-3904.6,101.96)
set Hw=CreateUnit(Hv,$6E30324A,10667.8,-4136.6,101.96)
set Hw=CreateUnit(Hv,$6E726472,-1511.9,-38.9,171.774)
set Hw=CreateUnit(Hv,$6E30324A,10199.2,-6195.7,101.96)
set Hw=CreateUnit(Hv,$6E747267,-4779.8,2321.2,177.18)
set Hw=CreateUnit(Hv,$6E676772,-3657.5,3244.8,203.77)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E6A6762,-4730.1,1303.1,227.67)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E737277,-4545.1,1291.2,296.18)
set Hw=CreateUnit(Hv,$6E737277,-3402.2,4901.4,296.18)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E737277,-879.3,6362.5,296.18)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E737277,-580.4,4320.5,296.18)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E6A6762,-3192.4,4736.7,227.67)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E6A6762,-1985.6,5180.8,227.67)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E6A6762,300.,5821.,227.67)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E6A6762,-818.1,4037.2,227.67)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E747267,-3560.6,6459.9,177.18)
set Hw=CreateUnit(Hv,$6E747267,-1207.3,6479.,177.18)
set Hw=CreateUnit(Hv,$6E747267,-1469.9,4941.5,177.18)
set Hw=CreateUnit(Hv,$6E676772,-3210.,6431.5,203.77)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E676772,503.1,5603.4,203.77)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E747267,-1410.9,2702.,177.18)
set Hw=CreateUnit(Hv,$6E6A6762,-1215.3,2742.5,227.67)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E737277,-2184.6,3657.3,296.18)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-8859.4,5667.5,263.658)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-7746.6,3343.4,80.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-12663.8,7523.2,80.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-10559.8,5722.7,80.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-6902.5,5612.7,80.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-5588.7,7918.,80.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-9688.5,7946.5,80.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303059,-7786.8,4374.8,97.59)
set Hw=CreateUnit(Hv,$6E30305A,-9959.4,3125.4,263.658)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303059,-11696.1,5515.2,97.59)
set Hw=CreateUnit(Hv,$6E303059,-8298.7,7950.1,97.59)
set Hw=CreateUnit(Hv,$6E303058,-6304.5,4448.1,46.21)
set Hw=CreateUnit(Hv,$6E303058,-10733.3,6717.2,46.21)
set Hw=CreateUnit(Hv,$6E303058,-12656.5,5542.8,46.21)
set Hw=CreateUnit(Hv,$6E303058,-8143.7,7868.8,46.21)
set Hw=CreateUnit(Hv,$6E303058,-9178.2,6459.8,46.21)
set Hw=CreateUnit(Hv,$6E303058,-5082.3,5672.8,46.21)
set Hw=CreateUnit(Hv,$75303033,-10985.8,6562.7,181.39)
set Hw=CreateUnit(Hv,$75303033,-12906.5,5948.6,181.39)
set Hw=CreateUnit(Hv,$75303033,-9637.9,8051.7,181.39)
set Hw=CreateUnit(Hv,$75303033,-8821.7,6676.9,181.39)
set Hw=CreateUnit(Hv,$75303033,-6802.7,6661.2,181.39)
set Hw=CreateUnit(Hv,$75303033,-5327.,7530.2,181.39)
set Hw=CreateUnit(Hv,$6E30305A,-7304.3,5571.4,263.658)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-5429.5,5959.3,263.658)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-11415.,7300.2,263.658)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-12770.8,6966.2,263.658)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-6686.3,7673.5,263.658)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30305A,-8939.5,4064.4,263.658)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303248,8310.9,5216.9,274.788)
set Hw=CreateUnit(Hv,$6F737733,-15294.9,-7334.5,64.64)
set Hw=CreateUnit(Hv,$6E303158,-4003.,10938.7,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303157,-8317.9,11070.8,31.938)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-5396.6,10617.6,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-5540.7,10596.1,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-7714.,11837.4,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-9163.7,15304.7,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-6439.4,12848.9,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,523.4,10360.1,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-485.9,13508.6,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,2005.5,13290.,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-5259.6,10627.9,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-7484.8,11880.,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E73626D,-13720.,-12207.7,50.065)
set Hw=CreateUnit(Hv,$6E30315A,-12384.,12574.5,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-9173.7,15140.1,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-9043.8,15422.7,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-6527.3,13199.,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E726472,-1912.1,-731.7,194.871)
set Hw=CreateUnit(Hv,$6E30315A,328.9,8938.3,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-2593.9,9966.4,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303156,-8850.4,9955.8,326.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303156,-11395.,10777.5,326.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303156,-8923.3,14441.4,326.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-6550.6,11271.2,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-13850.7,-10691.6,311.48)
set Hw=CreateUnit(Hv,$6E303156,-360.1,9577.1,326.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303156,509.3,8894.7,326.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303156,2163.6,10403.9,326.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-8175.7,10247.2,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-10595.7,9709.9,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-12200.2,11245.7,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-7939.3,15435.,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-1442.1,13691.9,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-1404.5,13474.6,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-1835.2,10222.1,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-229.3,11398.,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,2252.9,10176.5,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303157,-11149.8,10563.1,31.938)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,-3181.3,13126.4,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303157,-1235.7,10090.5,31.938)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303157,729.,10467.5,31.938)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303157,1543.2,9363.9,31.938)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303157,65.2,14385.3,31.938)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303157,2182.3,13369.6,31.938)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-14099.1,-12002.,69.056)
set Hw=CreateUnit(Hv,$6E303158,1755.1,9201.6,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,1884.6,15505.3,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,2045.6,15546.1,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,2204.8,15579.8,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,1261.1,13950.7,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,2200.3,14612.,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-4202.1,10999.6,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303156,-2804.1,11497.8,326.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,-3025.4,13135.7,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-5484.7,12001.3,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303159,-5524.6,11875.4,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,-2665.5,11745.2,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30324A,7137.7,-6015.8,101.96)
set Hw=CreateUnit(Hv,$6E30324A,7177.7,-6219.6,101.96)
set Hw=CreateUnit(Hv,$6E30324A,5985.9,-5747.6,101.96)
set Hw=CreateUnit(Hv,$6E30324A,5097.1,-3708.,101.96)
set Hw=CreateUnit(Hv,$6E30324A,6869.5,-4456.6,101.96)
set Hw=CreateUnit(Hv,$6E30324A,6872.3,-3708.5,101.96)
set Hw=CreateUnit(Hv,$6E30324A,8023.9,-3926.1,101.96)
set Hw=CreateUnit(Hv,$6E30324A,8834.3,-4598.4,101.96)
set Hw=CreateUnit(Hv,$6E30324B,8836.4,858.3,22.304)
set Hw=CreateUnit(Hv,$6E303248,11869.9,1060.1,274.79)
set Hw=CreateUnit(Hv,$6E30324C,13474.4,489.,270.55)
set Hw=CreateUnit(Hv,$6E30324D,8741.2,-1590.8,334.9)
set Hw=CreateUnit(Hv,$6E30324B,10370.9,2686.4,273.41)
set Hw=CreateUnit(Hv,$6E30324B,12570.4,761.2,273.41)
set Hw=CreateUnit(Hv,$6E303248,10594.2,5426.5,274.788)
set Hw=CreateUnit(Hv,$6E30324B,7664.1,4143.5,273.41)
set Hw=CreateUnit(Hv,$6E303248,12370.6,5088.,274.788)
set Hw=CreateUnit(Hv,$6E303248,12151.,4896.2,274.788)
set Hw=CreateUnit(Hv,$6E303248,12171.2,3602.8,274.788)
set Hw=CreateUnit(Hv,$6E303248,13599.1,2360.2,274.788)
set Hw=CreateUnit(Hv,$6E303248,12289.,2003.,274.788)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303248,11375.6,2858.7,274.788)
set Hw=CreateUnit(Hv,$6E303248,10278.6,3717.4,274.788)
set Hw=CreateUnit(Hv,$6E303248,9384.1,2435.5,274.788)
set Hw=CreateUnit(Hv,$6E303248,9393.2,884.8,274.788)
set Hw=CreateUnit(Hv,$6E303248,10753.8,1759.,274.788)
set Hw=CreateUnit(Hv,$6E303248,8749.,4235.8,274.788)
set Hw=CreateUnit(Hv,$6E303248,7475.5,3317.5,274.788)
set Hw=CreateUnit(Hv,$6E303248,7669.7,2810.4,274.788)
set Hw=CreateUnit(Hv,$6E30324C,12786.3,-2218.4,318.814)
set Hw=CreateUnit(Hv,$6E30324C,15418.2,-690.5,246.853)
set Hw=CreateUnit(Hv,$6E30324C,14197.8,-3294.3,314.847)
set Hw=CreateUnit(Hv,$6E30324C,14513.9,-2392.5,52.5)
set Hw=CreateUnit(Hv,$6E30324C,12628.4,-4603.3,54.953)
set Hw=CreateUnit(Hv,$6E303249,14984.2,906.9,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,14214.1,188.2,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,15841.7,.8,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set IR=CreateUnit(Hv,$68303448,5264.8,-9253.8,0.)
set Hw=CreateUnit(Hv,$6E303249,16246.8,-1327.7,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,15450.9,-2378.1,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,13635.3,-2341.4,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,15530.9,-3644.1,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,15452.3,-3946.5,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,15125.2,-5681.,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,11981.5,-446.5,175.52)
set Hw=CreateUnit(Hv,$6E303249,15276.5,-5734.4,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,14243.4,-5261.7,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,14176.4,-4782.9,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,12913.7,-4392.5,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,12883.9,-3299.2,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30324A,11627.7,-2126.7,180.758)
set Hw=CreateUnit(Hv,$6E303344,1933.9,3165.4,322.437)
set Hw=CreateUnit(Hv,$6E303345,4006.5,5701.4,290.202)
set Hw=CreateUnit(Hv,$6E303344,1887.5,6971.8,322.437)
set Hw=CreateUnit(Hv,$6E303344,3484.2,7766.5,322.437)
set Hw=CreateUnit(Hv,$6E303344,5273.4,7055.3,231.614)
set Hw=CreateUnit(Hv,$6E303345,2890.9,8078.7,290.202)
set Hw=CreateUnit(Hv,$6E303345,-131.3,8151.3,290.202)
set Hw=CreateUnit(Hv,$6E303346,2624.,3813.4,7.031)
set Hw=CreateUnit(Hv,$6E303346,1122.7,7783.4,7.031)
set Hw=CreateUnit(Hv,$6E303343,3772.3,6805.1,276.625)
set Hw=CreateUnit(Hv,$6E303343,4494.3,4777.2,77.181)
set Hw=CreateUnit(Hv,$6E303346,4983.2,7214.4,209.747)
set IS=CreateUnit(Hv,$68303043,-15968.6,15557.3,344.23)
set Hw=CreateUnit(Hv,$6F737733,-14895.6,-7181.,345.831)
set Hw=CreateUnit(Hv,$6F737733,-14617.8,-6284.5,220.748)
set Hw=CreateUnit(Hv,$6F737733,-15763.7,-5627.1,288.924)
set Hw=CreateUnit(Hv,$6F737733,-14963.8,-8543.,112.16)
set Hw=CreateUnit(Hv,$6F737733,-15303.8,-8094.3,312.858)
set Hw=CreateUnit(Hv,$6E303030,-8632.9,1692.6,147.2)
set Hw=CreateUnit(Hv,$6E303044,-14030.1,-12315.7,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-11996.,-10677.6,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30324C,15599.,542.7,212.225)
set Hw=CreateUnit(Hv,$68303446,4448.5,-9088.5,129.082)
set Hw=CreateUnit(Hv,$68303446,4925.3,-9064.6,129.082)
set Hw=CreateUnit(Hv,$6E303044,-14133.,-10520.,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303046,-14065.7,-11298.6,180.43)
set Hw=CreateUnit(Hv,$68303446,4946.2,-9486.4,129.082)
set Hw=CreateUnit(Hv,$68303446,4445.3,-9472.3,129.082)
set Hw=CreateUnit(Hv,$68303446,4030.5,-9492.,129.082)
set Hw=CreateUnit(Hv,$65666F6E,-8650.3,1505.2,323.26)
set Hw=CreateUnit(Hv,$6E303030,-7234.2,-687.,249.957)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$65666F6E,-5660.2,-1000.2,323.26)
set Hw=CreateUnit(Hv,$65666F6E,-6261.7,-2654.2,323.26)
set Hw=CreateUnit(Hv,$65666F6E,-9100.8,-5338.,323.26)
set Hw=CreateUnit(Hv,$65666F6E,-15809.1,-5920.7,323.26)
set Hw=CreateUnit(Hv,$65666F6E,-14629.3,-7337.5,323.26)
set Hw=CreateUnit(Hv,$6E303030,-6308.7,-4570.6,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-7649.3,-5121.5,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-11199.9,-3385.,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-12575.3,-5224.5,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-13860.2,-8087.4,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-14721.1,-6089.8,223.599)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-7073.5,-908.5,180.875)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-7265.1,774.,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-9500.9,171.4,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-4755.8,-2378.7,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6F737031,-5683.1,-255.1,152.53)
set Hw=CreateUnit(Hv,$6F737031,-7532.4,-5058.3,152.53)
set Hw=CreateUnit(Hv,$6F737031,-11255.3,-3702.8,152.53)
set Hw=CreateUnit(Hv,$6F737031,-11005.,-5954.6,152.53)
set Hw=CreateUnit(Hv,$6F737031,-12196.3,-5186.8,152.53)
set Hw=CreateUnit(Hv,$6F737031,-15155.9,-3865.3,152.53)
set Hw=CreateUnit(Hv,$6E303045,-10358.8,-8544.5,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-11672.6,-9634.6,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-9001.3,-11922.6,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-11848.6,-12622.,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-9061.5,-8869.9,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-10736.1,-14354.2,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-8861.2,-14420.1,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E73626D,-6902.3,-11559.3,232.38)
set Hw=CreateUnit(Hv,$6E303045,-5830.6,-13953.3,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-5922.1,-12475.3,311.48)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303046,-10486.3,-11095.1,180.43)
set Hw=CreateUnit(Hv,$6E303046,-8930.1,-9282.9,180.43)
set Hw=CreateUnit(Hv,$6E303046,-4341.5,-10311.5,180.43)
set Hw=CreateUnit(Hv,$6E303044,-4277.7,-9259.1,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-5849.3,-9993.7,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-6917.2,-9334.1,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-7124.6,-11409.,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-5743.3,-14221.2,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-8546.7,-14481.7,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-9632.,-13484.,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303044,-11437.2,-12503.1,37.12)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E73626D,-10073.6,-9796.2,232.38)
set Hw=CreateUnit(Hv,$6E73626D,-7400.2,-13641.2,232.38)
set Hw=CreateUnit(Hv,$6E73626D,-5750.9,-12544.4,232.38)
set Hw=CreateUnit(Hv,$6E73626D,-4907.6,-11692.9,232.38)
set Hw=CreateUnit(Hv,$6E73626D,-4379.6,-9931.7,232.38)
set Hw=CreateUnit(Hv,$6E73626D,-4556.2,-8961.2,232.38)
set Hw=CreateUnit(Hv,$6E73626D,-5654.8,-9858.8,232.38)
set Hw=CreateUnit(Hv,$6E677277,-6323.6,-7360.7,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-6339.1,-7540.3,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-5895.,-6675.9,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-5602.8,-5937.,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-5672.,-6130.5,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-4805.4,-7917.4,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-5039.8,-7886.6,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-4705.9,-6294.7,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-4860.4,-4955.9,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-4374.4,-4892.4,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E677277,-3945.9,-7847.6,176.17)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E61646B,-2321.3,-7748.6,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-3226.4,-5728.,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-2323.1,-5842.,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-2796.5,-3762.4,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-3976.9,-3815.2,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-1145.2,-8158.6,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-2189.,-9506.4,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-2628.5,-10577.1,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-2401.4,-10545.,251.89)
set Hw=CreateUnit(Hv,$6E61646B,-1104.2,-9473.2,251.89)
set Hw=CreateUnit(Hv,$6E627A6B,249.3,-6610.9,233.31)
set Hw=CreateUnit(Hv,$6E627A6B,1356.7,-6466.,233.31)
set Hw=CreateUnit(Hv,$6E627A6B,2109.2,-7267.6,233.31)
set Hw=CreateUnit(Hv,$6F737733,-15523.2,-8573.7,46.461)
set Hw=CreateUnit(Hv,$6E627A6B,604.1,-7642.5,233.31)
set Hw=CreateUnit(Hv,$6E726472,-3625.4,-2225.,91.952)
set Hw=CreateUnit(Hv,$6E726472,-3712.1,-1020.9,303.589)
set Hw=CreateUnit(Hv,$6E726472,-3584.6,431.2,34.28)
set Hw=CreateUnit(Hv,$6E726472,-1588.2,1279.5,168.546)
set Hw=CreateUnit(Hv,$6E73626D,-7817.9,-12272.1,314.592)
set Hw=CreateUnit(Hv,$6E303047,-621.8,637.9,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,66.4,1834.7,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,313.2,2116.,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303045,-7004.1,-12340.5,229.901)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,1338.2,1277.3,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,1986.1,265.,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,2170.6,-57.2,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,2584.3,-1502.7,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,1559.3,-2936.4,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,2235.6,-2789.,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,731.,-3963.,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,207.9,-3121.5,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,244.1,-400.,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303047,160.5,-88.8,312.31)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646D,22384.2,12441.1,336.994)
set Hw=CreateUnit(Hv,$6E6A6762,-4730.1,1303.1,227.67)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E6A6762,-3697.1,3648.3,227.67)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E6A6762,-961.9,6492.,227.67)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E737277,-3265.7,6174.,296.18)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E737277,-1794.5,4898.3,296.18)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E737277,515.4,5995.,296.18)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E676772,-1046.2,6246.4,203.77)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E676772,-485.,4018.4,203.77)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E676772,-1968.2,3413.5,203.77)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E626473,21735.,12313.8,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303343,166.2,7975.8,77.181)
set Hw=CreateUnit(Hv,$6E303343,2105.8,3501.2,77.181)
set Hw=CreateUnit(Hv,$6E62646F,22132.6,12273.6,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303343,3906.6,3880.9,77.181)
set Hw=CreateUnit(Hv,$6E62646D,20673.1,12465.3,336.994)
set Hw=CreateUnit(Hv,$6E303346,3485.2,6880.8,209.747)
set Hw=CreateUnit(Hv,$6E626473,20863.6,12143.9,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303346,1948.6,6702.6,209.747)
set Hw=CreateUnit(Hv,$6E303346,3768.1,5452.,209.747)
set Hw=CreateUnit(Hv,$6E303344,4690.5,4984.1,231.614)
set Hw=CreateUnit(Hv,$6E303344,3721.6,3679.3,231.614)
set Hw=CreateUnit(Hv,$6E303058,-9089.4,4091.6,46.21)
set Hw=CreateUnit(Hv,$6E62646F,20421.5,12297.8,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646D,20684.1,10832.4,336.994)
set Hw=CreateUnit(Hv,$6E303058,-12869.4,7244.7,46.21)
set Hw=CreateUnit(Hv,$6E626473,20874.7,10511.,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303058,-6977.4,6833.3,46.21)
set Hw=CreateUnit(Hv,$6E303058,-9832.6,8002.6,46.21)
set Hw=CreateUnit(Hv,$75303032,-8090.6,8051.3,80.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646F,20432.5,10664.9,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-9036.3,5359.7,80.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-12611.6,5820.7,80.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$75303032,-5287.6,5729.4,80.06)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303059,-5532.,7617.1,97.59)
set Hw=CreateUnit(Hv,$6E303059,-6562.7,7574.3,97.59)
set Hw=CreateUnit(Hv,$6E303059,-9072.1,6783.7,97.59)
set Hw=CreateUnit(Hv,$6E303059,-7343.,3186.,97.59)
set Hw=CreateUnit(Hv,$6E303059,-10512.1,5490.9,97.59)
set Hw=CreateUnit(Hv,$6E62646D,19763.5,9967.9,336.994)
set Hw=CreateUnit(Hv,$6E303159,-8964.1,14318.8,188.015)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-11027.1,12403.6,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-11332.2,12477.,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-12341.7,12372.9,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E626473,19954.1,9646.6,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30315A,-11284.,10739.3,130.489)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$68303446,3930.3,-9615.8,129.082)
set Hw=CreateUnit(Hv,$6E62646F,19511.9,9800.4,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303157,-152.4,11855.5,31.938)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646D,19113.1,10542.6,336.994)
set Hw=CreateUnit(Hv,$6E303157,2195.9,14255.8,31.938)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,1392.,13684.3,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,665.4,8830.7,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,365.3,10345.9,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,-7595.4,12011.8,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,2999.3,14369.2,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303158,-9666.9,10189.,277.446)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-11966.,11337.5,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E626473,19303.6,10221.3,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-8775.6,14336.9,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-7812.3,15169.2,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-2947.1,10654.7,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,-2327.6,10409.8,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,92.9,12270.,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,2942.,14004.,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303155,1512.3,9126.8,5.208)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344C,10360.3,1882.1,240.696)
set Hw=CreateUnit(Hv,$6E30344D,12632.6,-360.4,320.811)
set Hw=CreateUnit(Hv,$6E62646F,18861.5,10375.1,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646D,19172.5,9791.1,336.994)
set Hw=CreateUnit(Hv,$6E30344E,10079.5,-2779.2,223.007)
set Hw=CreateUnit(Hv,$6E30344E,10468.9,-2782.7,223.007)
set Hw=CreateUnit(Hv,$6E30344E,11281.4,-3008.4,223.007)
set Hw=CreateUnit(Hv,$6E30344E,10910.1,-4221.2,223.007)
set Hw=CreateUnit(Hv,$6E30344E,9571.9,-3572.4,223.007)
set Hw=CreateUnit(Hv,$6E626473,19363.,9469.8,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646F,18920.9,9623.6,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646D,17864.6,11440.9,336.994)
set Hw=CreateUnit(Hv,$6E30344E,8869.2,-2227.1,223.007)
set Hw=CreateUnit(Hv,$6E626473,18055.2,11119.6,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646F,17613.,11273.4,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344E,8290.8,-3584.5,223.007)
set Hw=CreateUnit(Hv,$6E30344E,8580.9,-4836.8,223.007)
set Hw=CreateUnit(Hv,$6E30344E,6866.1,-4098.2,223.007)
set Hw=CreateUnit(Hv,$6E62646D,17786.2,12392.5,336.994)
set Hw=CreateUnit(Hv,$6E30344E,6292.5,-3852.2,223.007)
set Hw=CreateUnit(Hv,$6E30344E,5287.,-3703.,223.007)
set Hw=CreateUnit(Hv,$6E30344E,5174.5,-3518.2,223.007)
set Hw=CreateUnit(Hv,$6E30344E,5873.1,-6004.2,223.007)
set Hw=CreateUnit(Hv,$6E30344E,5905.5,-6243.2,223.007)
set Hw=CreateUnit(Hv,$6E30344E,6352.9,-5977.6,223.007)
set Hw=CreateUnit(Hv,$6E30344E,7004.5,-5290.,223.007)
set Hw=CreateUnit(Hv,$6E626473,17976.7,12071.2,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344E,7964.,-5659.6,223.007)
set Hw=CreateUnit(Hv,$6E30344E,7435.1,-6315.,223.007)
set Hw=CreateUnit(Hv,$6E30344E,8608.5,-6557.1,223.007)
set Hw=CreateUnit(Hv,$6E62646F,17534.6,12225.,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344E,10474.5,-6194.9,223.007)
set Hw=CreateUnit(Hv,$6E62646D,17996.3,13102.6,336.994)
set Hw=CreateUnit(Hv,$6E30344E,10064.8,-5477.3,223.007)
set Hw=CreateUnit(Hv,$6E30344E,11056.6,-5407.9,223.007)
set Hw=CreateUnit(Hv,$6E30344D,14564.8,428.6,320.811)
set Hw=CreateUnit(Hv,$6E30344D,14944.7,1171.3,320.811)
set Hw=CreateUnit(Hv,$6E626473,18186.9,12781.3,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344D,12571.6,-739.3,172.67)
set Hw=CreateUnit(Hv,$6E30344D,15828.6,302.,320.811)
set Hw=CreateUnit(Hv,$6E62646F,17744.7,12935.1,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646D,19407.8,13028.5,336.994)
set Hw=CreateUnit(Hv,$6E30344D,16052.1,-1557.,320.811)
set Hw=CreateUnit(Hv,$6E30344D,15784.5,-210.2,320.811)
set Hw=CreateUnit(Hv,$6E30344D,15294.9,-2215.,320.811)
set Hw=CreateUnit(Hv,$6E30344D,14444.9,-1634.1,320.811)
set Hw=CreateUnit(Hv,$6E30344D,15140.4,-3774.2,320.811)
set Hw=CreateUnit(Hv,$6E626473,19598.3,12707.2,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344D,13939.6,-5087.9,320.811)
set Hw=CreateUnit(Hv,$6E30344D,15435.8,-5859.2,320.811)
set Hw=CreateUnit(Hv,$6E62646F,19156.2,12861.,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344D,13157.5,-4396.4,320.811)
set Hw=CreateUnit(Hv,$6E30344D,12774.1,-4237.1,320.811)
set Hw=CreateUnit(Hv,$6E62646D,18576.7,14697.1,336.994)
set Hw=CreateUnit(Hv,$6E30344D,12564.7,-3519.7,320.811)
set Hw=CreateUnit(Hv,$6E626473,18767.2,14375.7,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344D,13615.5,-2638.,320.811)
set Hw=CreateUnit(Hv,$6E62646F,18325.1,14529.5,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344C,9047.7,1167.1,240.696)
set Hw=CreateUnit(Hv,$6E62646D,18775.3,15275.3,336.994)
set Hw=CreateUnit(Hv,$6E30344C,9699.2,2460.9,240.696)
set Hw=CreateUnit(Hv,$6E626473,18965.9,14953.9,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344C,11717.6,3292.3,240.696)
set Hw=CreateUnit(Hv,$6E30344C,9699.2,2460.9,240.696)
set Hw=CreateUnit(Hv,$6E30344C,12328.5,1179.7,240.696)
set Hw=CreateUnit(Hv,$68303446,4021.,-10383.9,129.082)
set Hw=CreateUnit(Hv,$6E62646F,18523.7,15107.8,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344C,12581.5,2578.5,240.696)
set Hw=CreateUnit(Hv,$6E30344C,12581.5,2578.5,240.696)
set Hw=CreateUnit(Hv,$6E30344C,12804.,4260.3,240.696)
set Hw=CreateUnit(Hv,$6E30344C,11833.6,5269.2,240.696)
set Hw=CreateUnit(Hv,$6E30344C,10585.6,4854.7,240.696)
set Hw=CreateUnit(Hv,$6E62646D,23847.6,13618.4,336.994)
set Hw=CreateUnit(Hv,$6E30344C,9822.2,3570.3,240.696)
set Hw=CreateUnit(Hv,$6E30344C,8819.2,3260.,240.696)
set Hw=CreateUnit(Hv,$6E30344C,7718.8,3624.8,240.696)
set Hw=CreateUnit(Hv,$6E30344C,8739.4,5199.9,240.696)
set Hw=CreateUnit(Hv,$6E626473,24038.1,13297.,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646F,23596.,13450.9,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E626473,24014.,13930.2,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646F,23571.9,14084.,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E626473,23628.7,13975.,196.54)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E62646F,23186.5,14128.9,123.04)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$68303446,4273.4,-10622.7,129.082)
set Hw=CreateUnit(Hv,$68303446,4604.8,-10346.9,129.082)
set Hw=CreateUnit(Hv,$68303446,4780.7,-9996.7,129.082)
set Hw=CreateUnit(Hv,$68303446,4991.6,-10636.7,129.082)
set Hw=CreateUnit(Hv,$68303446,4835.5,-11011.1,129.082)
set Hw=CreateUnit(Hv,$68303446,4707.2,-11618.6,129.082)
set Hw=CreateUnit(Hv,$68303446,4281.2,-11637.1,129.082)
set Hw=CreateUnit(Hv,$68303446,4206.4,-11094.6,129.082)
set Hw=CreateUnit(Hv,$68303446,3857.6,-11035.7,129.082)
set Hw=CreateUnit(Hv,$68303446,3823.4,-11983.4,129.082)
set Hw=CreateUnit(Hv,$68303446,3860.5,-12149.6,129.082)
set Hw=CreateUnit(Hv,$68303446,4332.4,-12146.4,129.082)
set Hw=CreateUnit(Hv,$68303446,4874.2,-12163.5,129.082)
set Hw=CreateUnit(Hv,$68303446,5344.7,-12146.5,129.082)
set Hw=CreateUnit(Hv,$68303446,6418.4,-12163.5,129.082)
set Hw=CreateUnit(Hv,$68303446,6013.6,-11715.1,129.082)
set Hw=CreateUnit(Hv,$68303446,5301.5,-11640.7,129.082)
set Hw=CreateUnit(Hv,$68303446,5283.6,-11394.8,129.082)
set Hw=CreateUnit(Hv,$68303446,5640.2,-11285.9,129.082)
set IT=CreateUnit(Hv,$68303447,4978.4,-8930.,78.1)
set IU=CreateUnit(Hv,$68303447,5524.1,-8975.8,78.1)
set IV=CreateUnit(Hv,$68303447,3889.6,-11586.2,78.1)
set IW=CreateUnit(Hv,$68303447,6365.6,-9045.7,78.1)
set IX=CreateUnit(Hv,$68303447,3981.2,-10003.1,78.1)
set Hw=CreateUnit(Hv,$68303446,6014.2,-12016.1,129.082)
set Hw=CreateUnit(Hv,$68303446,7035.1,-11985.2,129.082)
set Hw=CreateUnit(Hv,$68303446,7041.7,-11281.1,129.082)
set Hw=CreateUnit(Hv,$68303446,6881.2,-12174.8,129.082)
set Hw=CreateUnit(Hv,$6E627A6B,3489.,-6581.3,233.31)
set Hw=CreateUnit(Hv,$68303446,7012.5,-11084.3,129.082)
set Hw=CreateUnit(Hv,$68303446,6296.,-10989.5,129.082)
set Hw=CreateUnit(Hv,$68303446,6168.1,-10809.7,129.082)
set Hw=CreateUnit(Hv,$68303446,5580.,-10711.4,129.082)
set Hw=CreateUnit(Hv,$68303446,5488.7,-10120.9,129.082)
set Hw=CreateUnit(Hv,$68303446,5492.1,-9593.7,129.082)
set Hw=CreateUnit(Hv,$68303446,5673.8,-9080.,129.082)
set Hw=CreateUnit(Hv,$68303446,5868.2,-9517.7,129.082)
set Hw=CreateUnit(Hv,$68303446,5841.7,-10070.2,129.082)
set Hw=CreateUnit(Hv,$68303446,6012.,-10379.7,129.082)
set Hw=CreateUnit(Hv,$68303446,6475.3,-10396.1,129.082)
set Hw=CreateUnit(Hv,$68303446,6707.1,-10376.1,129.082)
set Hw=CreateUnit(Hv,$68303446,7044.3,-10303.4,129.082)
set Hw=CreateUnit(Hv,$68303446,6775.6,-9999.8,129.082)
set Hw=CreateUnit(Hv,$68303446,6392.9,-9761.9,129.082)
set Hw=CreateUnit(Hv,$68303446,6386.2,-9307.6,129.082)
set Hw=CreateUnit(Hv,$6E627A6B,3096.5,-6336.,233.31)
set Hw=CreateUnit(Hv,$6E627A6B,2685.5,-7956.4,233.31)
set Hw=CreateUnit(Hv,$6E627A6B,3231.5,-7281.8,233.31)
set Hw=CreateUnit(Hv,$6E30324C,13834.5,-6000.7,54.953)
set Hw=CreateUnit(Hv,$6E303249,13827.6,-874.3,175.52)
set Hw=CreateUnit(Hv,$6E303249,14501.2,-1447.7,175.52)
set Hw=CreateUnit(Hv,$6E303249,14630.7,-1411.6,175.52)
set Hw=CreateUnit(Hv,$6E303249,16041.,-1213.1,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,15362.1,-2665.1,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,15000.,-3521.8,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303249,14772.6,-3857.5,175.52)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E30344D,15508.9,-5605.1,320.811)
set Hw=CreateUnit(Hv,$6E303756,23553.9,4896.9,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-7428.,-1120.5,69.993)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,23797.6,5029.3,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,23682.3,4659.6,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,23711.,4878.1,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,23210.2,4768.3,51.798)
set Hw=CreateUnit(Hv,$6E303756,22048.6,4985.3,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,22292.3,5117.6,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,22177.,4747.9,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,22205.8,4966.5,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,21705.,4856.7,51.798)
set Hw=CreateUnit(Hv,$6E303756,20569.,5047.,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,20812.7,5179.3,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,20697.4,4809.6,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,20726.2,5028.1,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,20225.3,4918.4,51.798)
set Hw=CreateUnit(Hv,$6E303756,19705.8,3804.3,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,19362.2,3675.7,51.798)
set Hw=CreateUnit(Hv,$6E303756,18364.6,3791.4,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,18366.5,4058.5,265.573)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,18039.9,4011.6,317.811)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,18521.7,3772.6,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,18020.9,3662.8,51.798)
set Hw=CreateUnit(Hv,$6E303756,17979.9,4690.1,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,18223.6,4822.4,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,18108.3,4452.7,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,18137.,4671.3,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,17636.2,4561.5,51.798)
set Hw=CreateUnit(Hv,$6E303756,18358.4,5540.1,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,18602.1,5672.4,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,18486.8,5302.7,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,18515.6,5521.2,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,18014.8,5411.4,51.798)
set Hw=CreateUnit(Hv,$6E303756,18561.3,7210.8,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,18805.,7343.1,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,18689.7,6973.4,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,18718.4,7191.9,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,18217.6,7082.2,51.798)
set Hw=CreateUnit(Hv,$6E303756,19421.6,6259.5,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,19665.3,6391.8,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,19550.,6022.1,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,19578.8,6240.6,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,19078.,6130.8,51.798)
set Hw=CreateUnit(Hv,$6E303756,19862.4,7004.,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,20106.1,7136.4,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,19990.8,6766.7,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,20019.5,6985.2,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,19518.7,6875.4,51.798)
set Hw=CreateUnit(Hv,$6E303756,21011.5,7186.5,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,21255.2,7318.9,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,21139.9,6949.2,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,21168.6,7167.7,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,20667.8,7057.9,51.798)
set Hw=CreateUnit(Hv,$6E303756,22795.8,8415.1,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-8074.8,-155.2,85.75)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6F737031,-8294.3,-97.9,172.91)
set Hw=CreateUnit(Hv,$65666F6E,-7312.,621.,147.4)
set Hw=CreateUnit(Hv,$6E303759,23039.4,8547.4,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,22924.1,8177.7,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,22952.9,8396.2,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,22452.1,8286.4,51.798)
set Hw=CreateUnit(Hv,$6E303756,23603.9,7814.9,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,23847.6,7947.3,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,23732.3,7577.6,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,23761.1,7796.1,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-15526.2,-5781.3,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,23260.3,7686.3,51.798)
set Hw=CreateUnit(Hv,$6E303756,22833.9,6713.,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,23077.6,6845.3,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,22962.3,6475.6,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-9182.,-5047.5,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-8825.8,-5072.2,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-8840.7,-5453.2,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303030,-9251.9,-5468.6,349.19)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,22991.1,6694.1,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,22490.3,6584.4,51.798)
set Hw=CreateUnit(Hv,$6E303756,21656.1,6052.4,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,21899.7,6184.7,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,21784.5,5815.,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,21813.2,6033.5,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,21312.4,5923.8,51.798)
set Hw=CreateUnit(Hv,$6E303756,19220.9,4642.8,183.3)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,19464.6,4775.1,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,19349.3,4405.4,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303757,19378.,4624.,183.97)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,18877.2,4514.2,51.798)
set Hw=CreateUnit(Hv,$6E303755,18217.6,7082.2,51.798)
set Hw=CreateUnit(Hv,$6E303755,17791.2,6965.,303.038)
set Hw=CreateUnit(Hv,$6E303756,18010.5,7540.2,292.514)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,20064.5,5565.5,278.082)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,18689.7,6973.4,79.907)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,21491.5,7894.8,0.)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,21851.9,7591.8,165.27)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,23567.,8598.5,249.666)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303755,22490.3,6584.4,51.798)
set Hw=CreateUnit(Hv,$6E303755,22811.4,7324.6,314.081)
set Hw=CreateUnit(Hv,$6E303758,22532.4,5827.2,137.779)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303758,23728.4,5759.6,244.893)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set Hw=CreateUnit(Hv,$6E303759,22700.7,4570.2,65.272)
call SetUnitState(Hw,UNIT_STATE_MANA,0)
set He=null
set Hw=null
endfunction
function mh takes nothing returns nothing
local player Hv=Player(PLAYER_NEUTRAL_PASSIVE)
local unit Hw
set Hw=CreateUnit(Hv,$6E667232,-7168.,-4800.,270.)
set Hx=CreateUnit(Hv,$6E303447,-4928.,-23648.,270.)
set Hw=CreateUnit(Hv,$6E6D6831,-12768.,-10272.,270.)
set Hw=CreateUnit(Hv,$6E686E73,-12288.,-10496.,270.)
set Hw=CreateUnit(Hv,$6E686E73,-9600.,-13248.,270.)
set Hw=CreateUnit(Hv,$6E637432,-5408.,-10976.,270.)
set Hy=CreateUnit(Hv,$6E667633,-15968.,1760.,270.)
set Hz=CreateUnit(Hv,$6E303436,-13184.,-12352.,270.)
set Hw=CreateUnit(Hv,$65736879,6048.,2912.,270.)
set Hw=CreateUnit(Hv,$6E676E69,-10272.,7904.,270.)
set H0=CreateUnit(Hv,$6E303134,-15808.,-8032.,270.)
set Hw=CreateUnit(Hv,$6E646830,9792.,-2304.,270.)
set Hw=CreateUnit(Hv,$6E646831,8640.,-5568.,270.)
set Hw=CreateUnit(Hv,$6E646831,5568.,-6144.,270.)
set Hw=CreateUnit(Hv,$6E646368,4864.,-4672.,270.)
set Hw=CreateUnit(Hv,$6E646368,7424.,-4864.,270.)
set H1=CreateUnit(Hv,$6E303136,-4160.,-8800.,270.)
set H2=CreateUnit(Hv,$6E657432,6592.,0.,270.)
set Hw=CreateUnit(Hv,$6E30384A,6144.,-576.,270.)
set H3=CreateUnit(Hv,$6E303138,128.,-9120.,270.)
set H4=CreateUnit(Hv,$6E303142,-9216.,8224.,270.)
set H5=CreateUnit(Hv,$6E303355,-10432.,-23648.,270.)
set H6=CreateUnit(Hv,$6E303237,-7616.,15392.,270.)
set H7=CreateUnit(Hv,$6E30374B,-2880.,-23648.,270.)
set Hw=CreateUnit(Hv,$6861726D,-13632.,-10048.,270.)
set Hw=CreateUnit(Hv,$686C756D,-14176.,-10016.,270.)
set H8=CreateUnit(Hv,$6E303149,8512.,-23840.,270.)
set H9=CreateUnit(Hv,$6E30314A,9088.,-23776.,270.)
set IB=CreateUnit(Hv,$6E303341,-12160.,-23712.,270.)
set IC=CreateUnit(Hv,$6E303238,11264.,-22880.,270.)
set ID=CreateUnit(Hv,$6E303239,11776.,-22944.,270.)
set IE=CreateUnit(Hv,$6E303357,-8576.,-23776.,270.)
set IF=CreateUnit(Hv,$6E303253,-13184.,-12320.,270.)
set IG=CreateUnit(Hv,$6E303438,-13184.,-12352.,270.)
set IH=CreateUnit(Hv,$6E303437,-13184.,-12352.,270.)
set Hw=CreateUnit(Hv,$6E746830,24000.,15424.,270.)
set Hw=CreateUnit(Hv,$6E746831,19936.,15392.,270.)
set Hw=CreateUnit(Hv,$6E746830,21504.,11200.,270.)
set Hw=CreateUnit(Hv,$6E746830,22528.,12672.,270.)
set Hw=CreateUnit(Hv,$6E746830,22272.,12736.,270.)
set II=CreateUnit(Hv,$6E303431,-6656.,-23648.,270.)
set IJ=CreateUnit(Hv,$6E303658,8768.,-23456.,270.)
set IK=CreateUnit(Hv,$6E303659,11520.,-23072.,270.)
set IL=CreateUnit(Hv,$6E30374C,-832.,-23584.,270.)
set Hw=null
endfunction
function mi takes nothing returns nothing
local player Hv=Player(PLAYER_NEUTRAL_PASSIVE)
local unit Hw
local trigger He
local real I4
set IY=CreateUnit(Hv,$65686970,-12570.2,-12518.6,154.54)
set IZ=CreateUnit(Hv,$65646F63,-5535.6,-11164.7,305.65)
set Ia=CreateUnit(Hv,$6E766C6B,-14196.8,-2973.5,317.4)
set Hw=CreateUnit(Hv,$6E646572,-10158.,-3539.,266.11)
set Hw=CreateUnit(Hv,$6E646572,-5149.1,-2334.5,12.09)
set Hw=CreateUnit(Hv,$6E656372,-7717.2,-4764.,222.94)
set Hw=CreateUnit(Hv,$6E656372,-10924.3,-5595.7,240.68)
set Hw=CreateUnit(Hv,$6E726163,-15770.4,-5716.1,291.86)
set Ib=CreateUnit(Hv,$6E30334D,-14287.3,14624.3,357.72)
call SetUnitState(Ib,UNIT_STATE_MANA,0)
set Ic=CreateUnit(Hv,$6E6D726D,-12602.2,-10181.,106.76)
set Id=CreateUnit(Hv,$65303134,10089.7,5400.,323.632)
set Ie=CreateUnit(Hv,$68777433,-3827.1,-3621.2,312.331)
set If=CreateUnit(Hv,$686D696C,-12535.8,-9142.6,268.6)
set Ig=CreateUnit(Hv,$6E766B32,-14093.5,-2907.1,232.18)
set Ih=CreateUnit(Hv,$6E6A6B73,-13836.4,-10023.1,311.74)
set Hw=CreateUnit(Hv,$6E736E6F,-2123.4,-9816.4,9.668)
set Hw=CreateUnit(Hv,$6E736E6F,-1239.6,-7784.1,132.455)
set Hw=CreateUnit(Hv,$6E736E6F,-2657.3,-7740.3,177.116)
set Hw=CreateUnit(Hv,$6E736E6F,-3496.2,-3852.3,29.4)
set Ii=CreateUnit(Hv,$6E647470,-9911.9,-7442.9,266.82)
set Ij=CreateUnit(Hv,$4E706C68,3565.9,-4487.3,266.67)
call SetUnitState(Ij,UNIT_STATE_MANA,0)
set Ik=CreateUnit(Hv,$6E636867,-13142.1,-9528.4,335.95)
set Il=CreateUnit(Hv,$68737074,4109.9,-4947.1,200.)
call SetUnitState(Il,UNIT_STATE_MANA,0)
set Im=CreateUnit(Hv,$6E303056,1253.3,4131.6,51.29)
set In=CreateUnit(Hv,$65303037,-4119.5,301.3,316.83)
set Io=CreateUnit(Hv,$6E66746B,-6494.,3014.7,49.41)
set Ip=CreateUnit(Hv,$75736864,-4778.3,7643.4,139.77)
set Iq=CreateUnit(Hv,$68776174,9966.7,4154.5,237.03)
set Ir=CreateUnit(Hv,$6E303753,13700.3,4771.6,177.195)
set Is=CreateUnit(Hv,$68303133,-7165.2,-2221.7,.85)
set It=CreateUnit(Hv,$68303133,-7895.1,-2152.6,120.)
set Hw=CreateUnit(Hv,$6E646F67,7893.4,-2004.,254.05)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function l7)
set Hw=CreateUnit(Hv,$6F73706D,14958.1,7127.5,291.3)
set Iu=CreateUnit(Hv,$65737076,-12628.3,9261.8,46.27)
set Hw=CreateUnit(Hv,$6E6D7065,14747.3,6801.4,14.39)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mG)
set Iv=CreateUnit(Hv,$45776172,17474.5,15260.1,323.766)
call SetUnitState(Iv,UNIT_STATE_MANA,45)
set Iw=CreateUnit(Hv,$68303554,-13071.5,14338.7,174.81)
set Hw=CreateUnit(Hv,$6E303841,23361.2,13163.1,180.)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mB)
set Hw=CreateUnit(Hv,$68677972,4478.1,-2632.8,279.24)
set Ix=CreateUnit(Hv,$6E303557,-11451.6,-27.3,224.483)
set Iy=CreateUnit(Hv,$6F776172,1169.2,15624.,322.41)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Iy,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Iy,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mD)
set Iz=CreateUnit(Hv,$6E6D7972,-1717.5,11731.3,165.57)
set Hw=CreateUnit(Hv,$6E303857,23943.4,-1149.9,183.038)
set Hw=CreateUnit(Hv,$6E706E77,13918.6,1562.5,180.38)
set I0=CreateUnit(Hv,$68646877,-6136.1,1355.8,256.3)
call SetUnitState(I0,UNIT_STATE_MANA,0)
set I1=CreateUnit(Hv,$65647279,-16000.4,-6947.4,345.5)
set I2=CreateUnit(Hv,$65303042,-15998.7,-6757.7,135.4)
set I3=CreateUnit(Hv,$756B7467,-10126.7,7750.9,51.13)
set I4=GetUnitState(I3,UNIT_STATE_LIFE)
call SetUnitState(I3,UNIT_STATE_LIFE,.01*I4)
set I5=CreateUnit(Hv,$6E666F76,-804.7,1956.,337.21)
set I6=CreateUnit(Hv,$6E303534,-13509.,-11612.8,241.31)
set Hw=CreateUnit(Hv,$6E68656D,-13995.8,-9977.4,228.58)
set I7=CreateUnit(Hv,$75303058,6833.9,4576.9,267.97)
set I8=CreateUnit(Hv,$65646F74,-15877.3,-2995.2,293.106)
call SetUnitState(I8,UNIT_STATE_MANA,0)
set I9=CreateUnit(Hv,$6F677275,-9514.4,15582.2,276.751)
set JB=CreateUnit(Hv,$68303133,-11046.1,-6932.1,203.105)
set JC=CreateUnit(Hv,$68303133,-9152.3,-6573.7,.85)
set JD=CreateUnit(Hv,$68303133,-5270.8,-10643.8,343.638)
set JE=CreateUnit(Hv,$68303133,-11660.8,-14893.2,64.29)
set JF=CreateUnit(Hv,$65303044,-14315.3,14305.6,357.7)
set JG=CreateUnit(Hv,$68303133,-2898.5,-8867.8,54.322)
set JH=CreateUnit(Hv,$68303133,1504.9,-8976.9,128.794)
set JI=CreateUnit(Hv,$68303133,771.2,-4697.8,264.65)
set JJ=CreateUnit(Hv,$68303133,-1318.6,1591.,179.091)
set JK=CreateUnit(Hv,$68303133,-1007.4,2642.9,156.8)
set JL=CreateUnit(Hv,$68303133,-2320.,5800.9,45.91)
set JM=CreateUnit(Hv,$68303133,3409.4,7490.8,79.12)
set JN=CreateUnit(Hv,$68303133,-47.6,7598.7,47.54)
set JO=CreateUnit(Hv,$68303133,-6235.2,6280.3,74.85)
set JP=CreateUnit(Hv,$68303133,-6497.4,2876.6,103.96)
set JQ=CreateUnit(Hv,$68303133,-4996.3,9709.,281.82)
set JR=CreateUnit(Hv,$68303133,-9249.3,13064.1,231.93)
set JS=CreateUnit(Hv,$68303133,1030.4,8612.8,120.7)
set JT=CreateUnit(Hv,$68303133,6568.9,301.5,87.3)
set JU=CreateUnit(Hv,$4F666172,21542.4,8664.,321.13)
call SetHeroLevel(JU,52,false)
call SetUnitState(JU,UNIT_STATE_MANA,57)
call SelectHeroSkill(JU,$414F636C)
call SelectHeroSkill(JU,$414F636C)
call SelectHeroSkill(JU,$414F636C)
call SelectHeroSkill(JU,$414F6673)
call SelectHeroSkill(JU,$414F6673)
call SelectHeroSkill(JU,$414F6673)
call SelectHeroSkill(JU,$414F7366)
call SelectHeroSkill(JU,$414F7366)
call SelectHeroSkill(JU,$414F7366)
call SelectHeroSkill(JU,$414F6571)
set JV=CreateUnit(Hv,$4F746368,24094.9,5563.3,185.37)
call SetHeroLevel(JV,52,false)
call SetUnitState(JV,UNIT_STATE_MANA,42)
call SelectHeroSkill(JV,$414F7368)
call SelectHeroSkill(JV,$414F7368)
call SelectHeroSkill(JV,$414F7368)
call SelectHeroSkill(JV,$414F7773)
call SelectHeroSkill(JV,$414F7773)
call SelectHeroSkill(JV,$414F7773)
call SelectHeroSkill(JV,$414F6165)
call SelectHeroSkill(JV,$414F6165)
call SelectHeroSkill(JV,$414F6165)
call SelectHeroSkill(JV,$414F7265)
set JW=CreateUnit(Hv,$65303051,10942.1,-8564.9,34.883)
set JX=CreateUnit(Hv,$6E303536,-11236.6,-16135.7,180.42)
set Hw=CreateUnit(Hv,$6E30355A,7189.3,-1674.6,202.06)
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(He,Hw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(He,function mK)
set JY=CreateUnit(Hv,$6E303636,15767.9,-4427.8,126.35)
set JZ=CreateUnit(Hv,$65303054,3337.5,11958.9,180.)
set Ja=CreateUnit(Hv,$68303439,24466.3,-24475.2,51.121)
set Jb=CreateUnit(Hv,$6E30334F,-14305.2,14966.4,358.28)
set Jc=CreateUnit(Hv,$656D7467,14834.2,-5282.,248.87)
set Jd=CreateUnit(Hv,$6830354C,-1525.9,-14146.,185.2)
set Je=CreateUnit(Hv,$6E303350,-14274.5,15311.1,331.69)
set Jf=CreateUnit(Hv,$6E303351,-13947.8,15473.2,274.11)
set Jg=CreateUnit(Hv,$68303343,-8997.3,-6439.2,328.69)
set Jh=CreateUnit(Hv,$6E766B32,-13031.7,674.7,145.348)
set Ji=CreateUnit(Hv,$75303048,-13638.7,15478.9,269.96)
set Jj=CreateUnit(Hv,$68303056,-13352.9,15471.2,268.2)
set Jk=CreateUnit(Hv,$456D6F6F,-3027.6,13862.5,357.67)
call SetUnitState(Jk,UNIT_STATE_MANA,45)
set Hw=CreateUnit(Hv,$65687072,-3070.7,14020.5,293.6)
set Jl=CreateUnit(Hv,$4F736864,17520.9,5543.8,0.)
call SetHeroLevel(Jl,52,false)
call SetUnitState(Jl,UNIT_STATE_MANA,51)
call SelectHeroSkill(Jl,$414F6877)
call SelectHeroSkill(Jl,$414F6877)
call SelectHeroSkill(Jl,$414F6877)
call SelectHeroSkill(Jl,$414F7664)
set Jm=CreateUnit(Hv,$68303059,-13049.,14573.6,180.)
call SetUnitState(Jm,UNIT_STATE_MANA,0)
set Jn=CreateUnit(Hv,$68303345,7993.3,13405.2,78.4)
set Jo=CreateUnit(Hv,$68303345,10213.8,13479.6,78.4)
set Jp=CreateUnit(Hv,$68303345,13431.6,13343.,78.4)
set Jq=CreateUnit(Hv,$6E746B77,21548.3,10977.6,222.97)
set Jr=CreateUnit(Hv,$6830305A,-13035.5,15214.4,180.)
call SetUnitState(Jr,UNIT_STATE_MANA,0)
set Js=CreateUnit(Hv,$65303053,16086.,-23674.9,101.78)
set Jt=CreateUnit(Hv,$68303130,-13045.4,14863.5,180.)
call SetUnitState(Jt,UNIT_STATE_MANA,0)
set Ju=CreateUnit(Hv,$68303048,-15684.7,-154.8,203.8)
set Jv=CreateUnit(Hv,$6F303048,9772.7,-2599.3,325.96)
set Jw=CreateUnit(Hv,$6830344E,3903.9,-7811.7,138.13)
set Jx=CreateUnit(Hv,$68303455,5180.9,7252.,114.55)
call SetUnitColor(Jx,ConvertPlayerColor(9))
set Jy=CreateUnit(Hv,$68303455,3146.8,8262.3,114.55)
call SetUnitColor(Jy,ConvertPlayerColor(9))
set Jz=CreateUnit(Hv,$68303455,3644.7,5322.4,114.55)
call SetUnitColor(Jz,ConvertPlayerColor(9))
set J0=CreateUnit(Hv,$68303455,-214.2,8391.6,114.55)
call SetUnitColor(J0,ConvertPlayerColor(9))
set J1=CreateUnit(Hv,$68303456,-7399.1,-2781.3,227.06)
set J2=CreateUnit(Hv,$68303456,-8014.5,-11989.1,346.3)
set J3=CreateUnit(Hv,$68303456,-5685.2,-5606.,241.68)
set J4=CreateUnit(Hv,$68303456,-1647.3,1105.4,150.41)
set J5=CreateUnit(Hv,$68303456,-601.2,5549.8,181.6)
set J6=CreateUnit(Hv,$75303031,-12997.5,6266.2,312.58)
set J7=CreateUnit(Hv,$6E636B73,-11643.,592.,100.035)
call SetUnitState(J7,UNIT_STATE_MANA,0)
set J8=CreateUnit(Hv,$6E303738,23705.8,12123.4,291.26)
set J9=CreateUnit(Hv,$6E303739,1101.3,-11686.7,64.52)
set KB=CreateUnit(Hv,$6E303535,-15981.8,7225.3,35.39)
set KC=CreateUnit(Hv,$6F73686D,17572.,7250.7,329.63)
set KD=CreateUnit(Hv,$6E676832,-10132.7,11561.8,22.62)
set KE=CreateUnit(Hv,$68303632,5217.3,11305.9,45.)
set KF=CreateUnit(Hv,$68303632,6564.8,11284.4,135.)
set KG=CreateUnit(Hv,$68303632,6545.3,12584.9,225.)
set KH=CreateUnit(Hv,$68303632,5220.7,12564.,315.)
set He=null
set Hw=null
endfunction
function mj takes nothing returns nothing
call mZ()
call md()
endfunction
function mk takes nothing returns nothing
call mS()
call mT()
call mU()
call mV()
call mW()
call mX()
call mY()
call ma()
call mb()
call mc()
call me()
endfunction
function ml takes nothing returns nothing
call mf()
call mh()
call mj()
call mg()
call mi()
call mk()
endfunction
function mm takes nothing returns nothing
set H=Rect(-6080.,-4384.,-5952.,-4288.)
set I=Rect(-15712.,15168.,-15680.,15200.)
set J=Rect(2688.,-23552.,4480.,-21536.)
set K=Rect(-8064.,-1952.,-7936.,-1824.)
set L=Rect(-5824.,-224.,-5760.,-32.)
set M=Rect(-5184.,-3072.,-5024.,-2944.)
set N=Rect(-14336.,-3200.,-13824.,-2784.)
set O=Rect(-15872.,-5408.,-15648.,-5248.)
set P=Rect(-15712.,-5728.,-15616.,-5664.)
set Q=Rect(-16128.,-13664.,-15904.,-13504.)
set R=Rect(-15680.,-13600.,-15584.,-13536.)
set S=Rect(-7808.,2208.,-7616.,2368.)
set T=Rect(-13120.,-6976.,-12832.,-6688.)
set U=Rect(-9696.,-4928.,-9344.,-4576.)
set V=Rect(-9792.,-448.,-9568.,-224.)
set W=Rect(-5568.,-1600.,-5280.,-1344.)
set X=Rect(-8096.,2176.,-7840.,2432.)
set Y=Rect(-14272.,8320.,-14176.,8416.)
set Z=Rect(-6240.,-11328.,-6016.,-11040.)
set a=Rect(3072.,-23008.,4064.,-22048.)
set b=Rect(-4000.,-8960.,-3904.,-8864.)
set c=Rect(-10112.,-7744.,-9760.,-7424.)
set d=Rect(-15072.,-1664.,-14656.,-1280.)
set e=Rect(-1184.,-2496.,-960.,-2368.)
set f=Rect(-128.,-8896.,64.,-8768.)
set g=Rect(-6688.,-6432.,-6496.,-6240.)
set h=Rect(-2944.,-11328.,-1824.,-11072.)
set i=Rect(5952.,-24256.,6848.,-23008.)
set j=Rect(160.,-5312.,960.,-4640.)
set k=Rect(928.,-5312.,960.,-5280.)
set l=Rect(64.,-9408.,160.,-9312.)
set m=Rect(-3904.,-3808.,-3616.,-3552.)
set n=Rect(448.,3936.,864.,4224.)
set o=Rect(-4224.,0.,-3680.,416.)
set p=Rect(1152.,4096.,1536.,4448.)
set q=Rect(416.,3520.,512.,3648.)
set r=Rect(-14048.,8416.,-13984.,8480.)
set s=Rect(-13056.,7744.,-12992.,7808.)
set t=Rect(-12928.,7552.,-12864.,7616.)
set u=Rect(-4320.,8640.,-4256.,8704.)
set v=Rect(-4064.,8512.,-4000.,8576.)
set w=Rect(-4896.,7808.,-4832.,7840.)
set x=Rect(8064.,-24384.,9568.,-23072.)
set y=Rect(-9024.,8032.,-8896.,8160.)
set z=Rect(-15552.,992.,-14656.,2368.)
set BB=Rect(-13856.,1888.,-13632.,2112.)
set BC=Rect(128.,-5312.,192.,-5280.)
set BD=Rect(5696.,-24256.,7104.,-23008.)
set BE=Rect(-5632.,8992.,-5504.,9056.)
set BF=Rect(-11008.,-24224.,-10880.,-24096.)
set BG=Rect(-13280.,2528.,-13024.,2656.)
set BH=Rect(-13216.,2176.,-13088.,2368.)
set BI=Rect(-10688.,-4672.,-10464.,-4544.)
set BJ=Rect(2656.,-4256.,2816.,-4128.)
set BK=Rect(-5056.,4288.,-4928.,4416.)
set BL=Rect(-11936.,-8608.,-10400.,-7520.)
set BM=Rect(-8992.,-7520.,-8160.,-6848.)
set BN=Rect(-3488.,1568.,-2624.,1952.)
set BO=Rect(-10752.,-24096.,-10112.,-23456.)
set BP=Rect(-11840.,-7392.,-11712.,-7264.)
set BQ=Rect(-9216.,-7712.,-9088.,-7584.)
set BR=Rect(-2880.,1120.,-2784.,1216.)
set BS=Rect(8384.,-24128.,9280.,-23360.)
set BT=Rect(-5408.,12768.,-5184.,12992.)
set BU=Rect(-8960.,15584.,-8896.,15648.)
set BV=Rect(-8896.,14208.,-8832.,14272.)
set BW=Rect(-6400.,13600.,-6336.,13664.)
set BX=Rect(-6272.,12704.,-6176.,12800.)
set BY=Rect(-4416.,10976.,-4352.,11008.)
set BZ=Rect(-2496.,9920.,-2432.,9952.)
set Ba=Rect(960.,8640.,1024.,8672.)
set Bb=Rect(800.,10592.,864.,10624.)
set Bc=Rect(-416.,12352.,-384.,12416.)
set Bd=Rect(544.,15008.,608.,15072.)
set Be=Rect(2560.,14688.,2592.,14720.)
set Bf=Rect(-7616.,9824.,-7584.,9856.)
set Bg=Rect(-12256.,10240.,-12160.,10304.)
set Bh=Rect(-12448.,12640.,-12384.,12704.)
set Bi=Rect(-7616.,9824.,-7072.,10432.)
set Bj=Rect(-7264.,10240.,-7072.,10432.)
set Bk=Rect(224.,11904.,416.,12448.)
set Bl=Rect(-7584.,15168.,-7424.,15296.)
set Bm=Rect(-7840.,15136.,-7776.,15200.)
set Bn=Rect(-14272.,-5376.,-14144.,-5248.)
set Bo=Rect(-6016.,-14592.,-5792.,-14368.)
set Bp=Rect(544.,-4864.,672.,-4768.)
set Bq=Rect(-14400.,-5696.,-13792.,-4768.)
set Br=Rect(-13824.,-5728.,-13792.,-5696.)
set Bs=Rect(-13824.,-4928.,-13792.,-4864.)
set Bt=Rect(-6368.,-14784.,-5216.,-14016.)
set Bu=Rect(-5280.,-14048.,-5216.,-14016.)
set Bv=Rect(-6368.,-14048.,-6304.,-14016.)
set Bw=Rect(-16128.,-7136.,-15552.,-6752.)
set Bx=Rect(-9280.,-5664.,-9152.,-5536.)
set By=Rect(-13216.,-12512.,-13088.,-12384.)
set Bz=Rect(-13216.,-12256.,-13184.,-12224.)
set B0=Rect(-5632.,-11424.,-5312.,-11136.)
set B1=Rect(-12224.,-12864.,-12160.,-12800.)
set B2=Rect(-928.,1664.,-448.,2112.)
set B3=Rect(-13664.,-14528.,-13472.,-14336.)
set B4=Rect(-13600.,-14720.,-13568.,-14688.)
set B5=Rect(-10304.,-7584.,-10176.,-7456.)
set B6=Rect(-10304.,-7840.,-10240.,-7776.)
set B7=Rect(13248.,-24544.,14944.,-22848.)
set B8=Rect(8000.,-2208.,8128.,-2112.)
set B9=Rect(7808.,-2336.,7872.,-2272.)
set CB=Rect(7616.,-2272.,7968.,-1920.)
set CC=Rect(5408.,-1472.,5440.,-1440.)
set CD=Rect(5504.,-1600.,5760.,-1376.)
set CE=Rect(14624.,2144.,14688.,2208.)
set CF=Rect(15168.,-288.,15200.,-224.)
set CG=Rect(16160.,-1120.,16256.,-1056.)
set CH=Rect(14368.,-3008.,14464.,-2944.)
set CI=Rect(15520.,-5152.,15584.,-5088.)
set CJ=Rect(13952.,-6112.,14016.,-6080.)
set CK=Rect(12960.,-4544.,13024.,-4512.)
set CL=Rect(-10208.,7648.,-9824.,7968.)
set CM=Rect(7488.,4960.,8800.,6208.)
set CN=Rect(4864.,-7872.,7104.,-6464.)
set CO=Rect(5664.,992.,5888.,1344.)
set CP=Rect(11200.,5152.,11584.,5440.)
set CQ=Rect(10464.,-608.,10592.,-544.)
set CR=Rect(7648.,-608.,7712.,-544.)
set CS=Rect(10112.,224.,11520.,320.)
set CT=Rect(11296.,-1024.,11648.,192.)
set CU=Rect(10112.,-1216.,11392.,-1120.)
set CV=Rect(-12704.,-24288.,-12576.,-24192.)
set CW=Rect(5088.,192.,5216.,352.)
set CX=Rect(-10560.,12256.,-9056.,13568.)
set CY=Rect(384.,11552.,2112.,12512.)
set CZ=Rect(-14464.,2688.,-14048.,2752.)
set Ca=Rect(-8928.,-24000.,-8192.,-23456.)
set Cb=Rect(-9120.,-24096.,-9024.,-24000.)
set Cc=Rect(-7296.,-24288.,-7168.,-24160.)
set Cd=Rect(-7040.,-24224.,-6304.,-23616.)
set Ce=Rect(8768.,-23808.,8928.,-23680.)
set Cf=Rect(-15008.,-15328.,-14880.,-15168.)
set Cg=Rect(-16192.,-16288.,-16000.,-16128.)
set Ch=Rect(13856.,-24032.,14304.,-23552.)
set Ci=Rect(14784.,-5312.,14912.,-5216.)
set Cj=Rect(14688.,-5600.,14784.,-5536.)
set Ck=Rect(-11520.,5888.,-11360.,5952.)
set Cl=Rect(-6496.,5888.,-6368.,5984.)
set Cm=Rect(1664.,2880.,2080.,3264.)
set Cn=Rect(2688.,2080.,2880.,2304.)
set Co=Rect(3136.,1696.,3264.,2656.)
set Cp=Rect(4000.,2048.,4192.,2240.)
set Cq=Rect(-14144.,9600.,-14016.,9632.)
set Cr=Rect(-12032.,2944.,-11904.,3040.)
set Cs=Rect(-14848.,9312.,-13376.,10752.)
set Ct=Rect(-5248.,-24192.,-4576.,-23712.)
set Cu=Rect(-5536.,-24288.,-5440.,-24192.)
set Cv=Rect(-10336.,-21632.,-9408.,-20672.)
set Cw=Rect(-1760.,-1024.,-1536.,-736.)
set Cx=Rect(-9952.,-21536.,-9824.,-21472.)
set Cy=Rect(7232.,-1824.,7552.,-1536.)
set Cz=Rect(-7264.,-2368.,-6944.,-2048.)
set C0=Rect(-8128.,-2240.,-7776.,-1952.)
set C1=Rect(-11264.,-7104.,-10912.,-6816.)
set C2=Rect(-5344.,-10784.,-5088.,-10400.)
set C3=Rect(-11808.,-15008.,-11456.,-14656.)
set C4=Rect(-9248.,-6720.,-8864.,-6400.)
set C5=Rect(-3008.,-9024.,-2688.,-8704.)
set C6=Rect(1088.,-9216.,1632.,-8576.)
set C7=Rect(480.,-4928.,928.,-4576.)
set C8=Rect(-1568.,1376.,-1248.,1728.)
set C9=Rect(-1248.,2496.,-864.,2912.)
set DB=Rect(-2464.,5664.,-2048.,6112.)
set DC=Rect(3264.,7328.,3616.,7776.)
set DD=Rect(-224.,7488.,288.,7872.)
set DE=Rect(-6496.,6080.,-6016.,6560.)
set DF=Rect(-6752.,2784.,-6208.,3232.)
set DG=Rect(-5152.,9536.,-4736.,9888.)
set DH=Rect(-9472.,12832.,-9056.,13312.)
set DI=Rect(800.,8480.,1216.,8896.)
set DJ=Rect(6368.,160.,6816.,512.)
set DK=Rect(6112.,-24256.,6720.,-23200.)
set DL=Rect(-10720.,-22112.,-9024.,-20128.)
set DM=Rect(-14112.,-9440.,-13920.,-9312.)
set DN=Rect(-15264.,-24064.,-15072.,-24000.)
set DO=Rect(-12416.,-24224.,-11904.,-23808.)
set DP=Rect(-15840.,-24128.,-14496.,-22944.)
set DQ=Rect(-15264.,-23616.,-15040.,-23424.)
set DR=Rect(-13760.,14176.,-13664.,14240.)
set DS=Rect(-15744.,-192.,-15616.,-96.)
set DT=Rect(8192.,4960.,9536.,6272.)
set DU=Rect(-14720.,13984.,-12608.,16288.)
set DV=Rect(-13280.,-2592.,-13120.,-2368.)
set DW=Rect(-12960.,-21984.,-12096.,-20928.)
set DX=Rect(-12576.,-21856.,-12480.,-21824.)
set DY=Rect(-13088.,-20960.,-12928.,-20864.)
set DZ=Rect(-12096.,-20992.,-11936.,-20832.)
set Da=Rect(-13984.,-10304.,-13824.,-10144.)
set Db=Rect(-14240.,-10592.,-13472.,-9824.)
set Dc=Rect(-15360.,-10016.,-15072.,-9664.)
set Dd=Rect(-16224.,-10112.,-15904.,-9824.)
set De=Rect(-14784.,-10208.,-14528.,-9920.)
set Df=Rect(-16000.,-11264.,-15712.,-11008.)
set Dg=Rect(-16256.,-10752.,-15968.,-10464.)
set Dh=Rect(-9152.,-6720.,-8672.,-6272.)
set Di=Rect(10432.,-24544.,12640.,-22304.)
set Dj=Rect(10656.,-24192.,12320.,-22720.)
set Dk=Rect(-11360.,-2176.,-10976.,-1824.)
set Dl=Rect(1696.,5472.,1920.,5696.)
set Dm=Rect(23392.,10144.,23616.,10400.)
set Dn=Rect(19936.,15072.,20096.,15296.)
set Do=Rect(23680.,12960.,23936.,13056.)
set Dp=Rect(24128.,15072.,24320.,15232.)
set Dq=Rect(13408.,12800.,13504.,12832.)
set Dr=Rect(13408.,13024.,13504.,13088.)
set Ds=Rect(12800.,14496.,14144.,15456.)
set Dt=Rect(9568.,14624.,10880.,15296.)
set Du=Rect(10176.,13248.,10304.,13312.)
set Dv=Rect(10048.,12992.,10144.,13024.)
set Dw=Rect(7488.,14880.,8608.,15776.)
set Dx=Rect(7936.,13120.,8096.,13184.)
set Dy=Rect(8128.,12896.,8192.,12960.)
set Dz=Rect(-13760.,-11776.,-13440.,-11488.)
set D0=Rect(-5504.,9408.,-5120.,9760.)
set D1=Rect(-11616.,-16288.,-11200.,-15936.)
set D2=Rect(-2816.,14720.,-1856.,15744.)
set D3=Rect(-6304.,1056.,-5952.,1440.)
set D4=Rect(11104.,-8608.,11232.,-8512.)
set D5=Rect(10880.,-7904.,11040.,-7808.)
set D6=Rect(15648.,-24480.,16608.,-22752.)
set D7=Rect(-15584.,-21696.,-14784.,-20896.)
set D8=Rect(-16064.,-20896.,-15808.,-20704.)
set D9=Rect(-14592.,-20896.,-14368.,-20640.)
set EB=Rect(-16128.,-21984.,-15872.,-21760.)
set EC=Rect(-14528.,-21984.,-14272.,-21760.)
set ED=Rect(15616.,-22400.,16608.,-21504.)
set EE=Rect(9216.,-5568.,9408.,-5408.)
set EF=Rect(8896.,-6272.,9792.,-5312.)
set EG=Rect(-2272.,11488.,-1600.,12064.)
set EH=Rect(-4576.,11424.,-3520.,12480.)
set EI=Rect(5792.,7936.,5952.,8096.)
set EJ=Rect(6336.,7936.,6496.,8096.)
set EK=Rect(8704.,8896.,10240.,10368.)
set EL=Rect(9120.,-5728.,9536.,-5408.)
set EM=Rect(-11424.,-2304.,-11296.,-1600.)
set EN=Rect(-16320.,9216.,-15296.,10528.)
set EO=Rect(-16352.,11168.,-15136.,12608.)
set EP=Rect(2880.,11744.,3008.,11872.)
set EQ=Rect(2912.,12160.,3040.,12288.)
set ER=Rect(3328.,12352.,3456.,12480.)
set ES=Rect(3712.,12192.,3840.,12320.)
set ET=Rect(3776.,11712.,3904.,11840.)
set EU=Rect(3520.,11392.,3648.,11520.)
set EV=Rect(3104.,11392.,3232.,11520.)
set EW=Rect(-7872.,7872.,-7744.,8000.)
set EX=Rect(2240.,11840.,2336.,12096.)
set EY=Rect(11168.,-6592.,12800.,-5184.)
set EZ=Rect(2400.,10752.,4192.,13344.)
set Ea=Rect(13696.,4608.,13792.,4960.)
set Eb=Rect(15488.,-4736.,16000.,-4224.)
set Ec=Rect(14976.,-4448.,15840.,-3456.)
set Ed=Rect(-15968.,-19808.,-14880.,-18688.)
set Ee=Rect(-12640.,-15904.,-12352.,-15808.)
set Ef=Rect(-15488.,-19040.,-15360.,-18784.)
set Eg=Rect(4864.,-9024.,5120.,-8992.)
set Eh=Rect(4864.,-11008.,5120.,-10944.)
set Ei=Rect(5376.,-9088.,5632.,-8960.)
set Ej=Rect(5376.,-12256.,5632.,-12160.)
set Ek=Rect(6272.,-9056.,6528.,-8960.)
set El=Rect(6272.,-11200.,6528.,-11104.)
set Em=Rect(3712.,-11776.,3904.,-11520.)
set En=Rect(7008.,-11776.,7136.,-11520.)
set Eo=Rect(7008.,-10112.,7168.,-9856.)
set Ep=Rect(3840.,-10112.,4000.,-9856.)
set Eq=Rect(3808.,-9216.,4032.,-8960.)
set Er=Rect(6784.,-9312.,7072.,-9120.)
set Es=Rect(9600.,-2848.,10016.,-2432.)
set Et=Rect(3680.,-12384.,7200.,-8768.)
set Eu=Rect(-14720.,640.,-14560.,800.)
set Ev=Rect(4768.,13888.,4864.,13984.)
set Ew=Rect(5184.,-4672.,5280.,-4576.)
set Ex=Rect(-2880.,14624.,-2656.,14848.)
set Ey=Rect(3680.,9088.,4864.,10240.)
set Ez=Rect(8192.,-10400.,9152.,-10112.)
set E0=Rect(-15872.,-288.,-15520.,32.)
set E1=Rect(1664.,-10144.,1728.,-9472.)
set E2=Rect(3584.,-7936.,4000.,-7488.)
set E3=Rect(-352.,7808.,224.,8352.)
set E4=Rect(2720.,7744.,3392.,8320.)
set E5=Rect(4704.,6752.,5376.,7424.)
set E6=Rect(-800.,5376.,-480.,5760.)
set E7=Rect(-5888.,-5824.,-5504.,-5440.)
set E8=Rect(-8192.,-12192.,-7808.,-11808.)
set E9=Rect(-7584.,-3040.,-7200.,-2656.)
set FB=Rect(-13152.,5856.,-12576.,6560.)
set FC=Rect(-14176.,14048.,-13216.,15296.)
set FD=Rect(3200.,4896.,4224.,5824.)
set FE=Rect(6496.,3744.,7680.,4928.)
set FF=Rect(1824.,10656.,1920.,10784.)
set FG=Rect(8160.,6976.,9248.,8096.)
set FH=Rect(6176.,9088.,7296.,10240.)
set FI=Rect(-13152.,-22208.,-11840.,-20640.)
set FJ=Rect(-16160.,-22176.,-14240.,-20576.)
set FK=Rect(-16000.,-24320.,-14336.,-22816.)
set FL=Rect(10400.,6336.,11872.,8224.)
set FM=Rect(-15744.,-12160.,-15648.,-12096.)
set FN=Rect(-15456.,-12160.,-15360.,-12096.)
set FO=Rect(-15456.,-12480.,-15360.,-12416.)
set FP=Rect(-15040.,-12352.,-14944.,-12256.)
set FQ=Rect(10528.,7968.,11552.,8032.)
set FR=Rect(23552.,11744.,23968.,12256.)
set FS=Rect(23904.,11808.,24064.,11968.)
set FT=Rect(-14304.,14016.,-13120.,15392.)
set FU=Rect(6880.,7936.,7008.,8096.)
set FV=Rect(-2112.,928.,-1568.,1376.)
set FW=Rect(4960.,11104.,6816.,12928.)
set FX=Rect(7456.,11200.,8544.,12256.)
set FY=Rect(-3392.,-24096.,-3264.,-24000.)
set FZ=Rect(-3520.,-24416.,-2240.,-23264.)
set Fa=Rect(-1440.,-24160.,-1312.,-24064.)
set Fb=Rect(-928.,-23808.,-832.,-23744.)
set Fc=Rect(-3360.,-23456.,-3264.,-23360.)
set Fd=Rect(-1536.,-24320.,-96.,-23136.)
set Fe=Rect(-11456.,3200.,-10048.,4864.)
set Ff=Rect(-11520.,-704.,-11264.,-512.)
set Fg=Rect(-5088.,7616.,-5024.,7680.)
set Fh=Rect(-12544.,9024.,-12160.,9376.)
set Fi=Rect(-1888.,-14368.,-1440.,-13888.)
set Fj=Rect(-3680.,-12320.,-3168.,-12000.)
set Fk=Rect(-672.,-14656.,416.,-13536.)
set Fl=Rect(-1568.,-14400.,-1344.,-13856.)
set Fm=Rect(14400.,1760.,16288.,3584.)
set Fn=Rect(-864.,-14976.,704.,-13216.)
set Fo=Rect(288.,-14240.,480.,-14016.)
set Fp=Rect(-16096.,7104.,-15616.,7552.)
set Fq=Rect(3712.,9568.,3808.,9760.)
set Fr=Rect(4768.,9568.,4864.,9760.)
set Fs=Rect(16128.,32.,16224.,128.)
set Ft=Rect(-9248.,-3936.,-9120.,-3872.)
set Fu=Rect(-10368.,928.,-9952.,1984.)
set Fv=Rect(-10272.,11392.,-9792.,11776.)
set Fw=Rect(11296.,9344.,11424.,9568.)
set Fx=Rect(11712.,9344.,12320.,9600.)
set Fy=Rect(11616.,10560.,12352.,10816.)
set Fz=Rect(11264.,10592.,11392.,10816.)
set F0=Rect(15808.,-24192.,16416.,-23104.)
set F1=Rect(-4832.,5728.,-4704.,5856.)
set F2=Rect(1856.,12928.,2080.,13024.)
set F3=Rect(-2720.,-8960.,-2624.,-8832.)
set F4=Rect(4192.,3520.,4384.,3584.)
set F5=Rect(-992.,15264.,192.,15968.)
set F6=Rect(-6624.,9408.,-5792.,10272.)
set F7=Rect(23040.,10176.,23232.,10368.)
set F8=Rect(1056.,15264.,1472.,15712.)
set F9=Rect(22592.,5120.,22976.,5504.)
set GB=Rect(23616.,6688.,24096.,7072.)
set GC=Rect(19808.,7488.,20128.,7840.)
set GD=Rect(17536.,6560.,17824.,6880.)
set GE=Rect(19168.,4768.,19584.,5152.)
set GF=Rect(12928.,-6624.,13152.,-6528.)
set GG=Rect(-11872.,640.,-11680.,832.)
set GH=Rect(4384.,-2816.,4608.,-2496.)
set GI=Rect(-1536.,-12736.,160.,-11424.)
set GJ=Rect(17984.,-24320.,19104.,-21920.)
set GK=Rect(10240.,5376.,10336.,5472.)
set GL=Rect(12800.,2400.,14272.,4064.)
set GM=Rect(4992.,4160.,5120.,4224.)
set GN=Rect(14880.,6208.,15136.,6240.)
set GO=Rect(17920.,1696.,18944.,2304.)
set GP=Rect(-15936.,-8416.,-15840.,-8352.)
set GQ=Rect(13536.,4576.,13696.,4960.)
set GR=Rect(-16000.,1888.,-15136.,2656.)
set GS=Rect(23520.,4800.,23840.,5152.)
set GT=Rect(19168.,1440.,19360.,1568.)
set GU=Rect(6688.,4352.,7296.,4672.)
set GV=Rect(17888.,1184.,19552.,2784.)
set GW=Rect(20608.,1792.,22272.,3456.)
set GX=Rect(20128.,1248.,22784.,3840.)
set GY=Rect(17632.,7264.,17792.,7456.)
set GZ=Rect(-864.,-6624.,-736.,-6464.)
set Ga=Rect(3296.,11904.,3392.,12000.)
set Gb=Rect(832.,-24128.,1888.,-23296.)
set Gc=Rect(800.,-24160.,1952.,-23136.)
set Gd=Rect(640.,-24384.,2048.,-22976.)
set Ge=Rect(4544.,-24448.,4832.,-24160.)
set Gf=Rect(8736.,-24256.,8864.,-24128.)
set Gg=Rect(-15744.,-12480.,-15648.,-12416.)
set Gh=Rect(-14112.,1024.,-13312.,1664.)
set Gi=Rect(3584.,-4896.,4320.,-4256.)
set Gj=Rect(5856.,-864.,6432.,-288.)
set Gk=Rect(-4224.,11712.,-3808.,12160.)
set Gl=Rect(-4416.,-12352.,-4224.,-12032.)
set Gm=Rect(-12768.,-2944.,-12448.,-2720.)
set Gn=Rect(1536.,-4768.,1856.,-4416.)
set Go=Rect(22816.,480.,24416.,3904.)
set Gp=Rect(-7424.,1280.,-5984.,2400.)
set Gq=Rect(-14560.,-4416.,-14272.,-4256.)
set Gr=Rect(21280.,10592.,21504.,10784.)
set Gs=Rect(16032.,-24288.,16160.,-24224.)
set Gt=Rect(2560.,1312.,4288.,2784.)
set Gu=Rect(-6080.,14624.,-4288.,16032.)
set Gv=Rect(-2880.,14048.,-1920.,14112.)
set Gw=Rect(15744.,-5536.,16096.,-5088.)
set Gx=Rect(-8352.,-22688.,-7136.,-21248.)
set Gy=Rect(-7808.,-22496.,-7744.,-22464.)
set Gz=Rect(-6272.,-22432.,-5056.,-20800.)
set G0=Rect(-10816.,3360.,-10496.,3424.)
set G1=Rect(21184.,-160.,22592.,1152.)
set G2=Rect(-15232.,3968.,-15072.,4160.)
set G3=Rect(-11200.,-448.,-10976.,-256.)
endfunction
function mn takes nothing returns nothing
set G4=CreateCameraSetup()
call CameraSetupSetField(G4,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_ROTATION,322.,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_ANGLE_OF_ATTACK,320.,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_TARGET_DISTANCE,933.,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_FARZ,4989.,0.)
call CameraSetupSetDestPosition(G4,-10604.4,-1483.9,0.)
set G5=CreateCameraSetup()
call CameraSetupSetField(G5,CAMERA_FIELD_ZOFFSET,14.,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_ROTATION,87.6,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_ANGLE_OF_ATTACK,336.6,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_TARGET_DISTANCE,930.6,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_ROLL,355.,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_FIELD_OF_VIEW,71.,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_FARZ,5000.,0.)
call CameraSetupSetDestPosition(G5,1613.5,5142.5,0.)
set G6=CreateCameraSetup()
call CameraSetupSetField(G6,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_ROTATION,128.3,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_ANGLE_OF_ATTACK,340.6,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_TARGET_DISTANCE,1006.,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_FARZ,5000.,0.)
call CameraSetupSetDestPosition(G6,5303.4,911.9,0.)
set G7=CreateCameraSetup()
call CameraSetupSetField(G7,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_ROTATION,110.2,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_ANGLE_OF_ATTACK,344.2,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_TARGET_DISTANCE,1296.5,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_FARZ,5000.,0.)
call CameraSetupSetDestPosition(G7,9327.2,-5481.9,0.)
set G8=CreateCameraSetup()
call CameraSetupSetField(G8,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(G8,CAMERA_FIELD_ROTATION,269.5,0.)
call CameraSetupSetField(G8,CAMERA_FIELD_ANGLE_OF_ATTACK,340.5,0.)
call CameraSetupSetField(G8,CAMERA_FIELD_TARGET_DISTANCE,716.,0.)
call CameraSetupSetField(G8,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(G8,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(G8,CAMERA_FIELD_FARZ,10000.,0.)
call CameraSetupSetDestPosition(G8,10296.8,-24309.8,0.)
set G9=CreateCameraSetup()
call CameraSetupSetField(G9,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(G9,CAMERA_FIELD_ROTATION,347.6,0.)
call CameraSetupSetField(G9,CAMERA_FIELD_ANGLE_OF_ATTACK,308.1,0.)
call CameraSetupSetField(G9,CAMERA_FIELD_TARGET_DISTANCE,1650.,0.)
call CameraSetupSetField(G9,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(G9,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(G9,CAMERA_FIELD_FARZ,5000.,0.)
call CameraSetupSetDestPosition(G9,-11063.3,-1316.2,0.)
endfunction
function mo takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true then
if IsUnitIllusion(GetFilterUnit())==false then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
endif
return false
endfunction
function mp takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(0))==false then
if IsUnitIllusion(GetFilterUnit())==false then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
endif
return false
endfunction
function mq takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
return false
endfunction
function mr takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(11))==true then
if UnitAlive(GetFilterUnit()) then
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_MAGIC_IMMUNE)==false then
if GetUnitAbilityLevel(GetFilterUnit(),$41304641)==0 then
return true
endif
endif
endif
endif
return false
endfunction
function ms takes unit Nf,unit Hw,integer MC returns nothing
call UnitDamageTarget(Nf,Hw,MC,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function mt takes unit Nf,unit Hw,integer MC returns nothing
call UnitDamageTarget(Nf,Hw,MC,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function mu takes unit Nf,unit Hw,integer MC returns nothing
call UnitDamageTarget(Nf,Hw,MC,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function mv takes unit Nf,integer MC returns nothing
local integer NU=R2I(GetUnitState(Nf,UNIT_STATE_MAX_LIFE)-GetUnitState(Nf,UNIT_STATE_LIFE))
local string Me
local texttag Np
if NU>0 then
set Np=CreateTextTag()
if NU>MC then
set Me="+"+I2S(R2I(MC))
else
set Me="+"+I2S(R2I(NU))
endif
call SetTextTagText(Np,Me,.021)
call SetTextTagPosUnit(Np,Nf,0)
call SetTextTagColor(Np,0,255,0,255)
call SetTextTagVelocity(Np,0,.03)
if GetUnitTypeId(Nf)==$68303052 then
call SetTextTagVisibility(Np,true)
else
if GetUnitAbilityLevel(Nf,$41313059)>=1 then
call SetTextTagVisibility(Np,GetLocalPlayer()==GetOwningPlayer(Nf))
else
call SetTextTagVisibility(Np,false)
endif
endif
call SetTextTagFadepoint(Np,1)
call SetTextTagLifespan(Np,2)
call SetTextTagPermanent(Np,false)
call SetTextTagSuspended(Np,false)
set Np=null
endif
call SetUnitState(Nf,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Nf,UNIT_STATE_LIFE)+MC))
endfunction
function mw takes unit Nf,integer MC returns nothing
call SetUnitState(Nf,UNIT_STATE_MANA,RMaxBJ(0,GetUnitState(Nf,UNIT_STATE_MANA)+MC))
endfunction
function mx takes nothing returns nothing
local unit Hw=GetEnumUnit()
call mv(Hw,Nw)
set Hw=null
endfunction
function my takes nothing returns nothing
local unit Hw=GetEnumUnit()
call mw(Hw,Nw)
set Hw=null
endfunction
function mz takes unit Nf,unit Hw,integer MC returns nothing
call UnitDamageTarget(Nf,Hw,MC,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function m0 takes nothing returns nothing
local unit Nx=GetEnumUnit()
call mz(Ps,Nx,Nw)
set Nx=null
endfunction
function m1 takes nothing returns nothing
local unit Nx=GetEnumUnit()
call mt(Ps,Nx,Nw)
set Nx=null
endfunction
function m2 takes nothing returns nothing
local unit Nx=GetEnumUnit()
call mu(Ps,Nx,Nw)
set Nx=null
endfunction
function m3 takes nothing returns nothing
local unit Nx=GetEnumUnit()
call ms(Ps,Nx,Nw)
set Nx=null
endfunction
function m4 takes nothing returns nothing
call KillUnit(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),10))
call RemoveUnit(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),10))
set Pu[GetPlayerId(GetOwningPlayer(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),10)))]=0
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),10)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function m5 takes unit Hw,real MC returns nothing
local timer He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),10,Hw)
call TimerStart(He,MC,false,function m4)
set He=null
endfunction
function m6 takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local integer UZ
local integer MC
local integer UX
local integer Ua
local integer Pf
local integer UY
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(GetExpiredTimer()),1))
set UZ=10000*GetUnitAbilityLevel(Hw,$41304456)+1000*GetUnitAbilityLevel(Hw,$4131394B)+100*GetUnitAbilityLevel(Hw,$4131394A)+10*GetUnitAbilityLevel(Hw,$41313949)+GetUnitAbilityLevel(Hw,$41305545)
set MC=LoadInteger(PR,GetHandleId(GetExpiredTimer()),2)
call UnitRemoveAbility(Hw,$4131394B)
call UnitRemoveAbility(Hw,$4131394A)
call UnitRemoveAbility(Hw,$41313949)
call UnitRemoveAbility(Hw,$41305545)
call UnitRemoveAbility(Hw,$41304456)
call UnitRemoveAbility(Hw,$41313757)
set UX=UZ-MC
if UX>0 then
loop
if UX>=10000 then
call UnitAddAbility(Hw,$41304456)
call SetUnitAbilityLevel(Hw,$41304456,UX/10000)
set UX=UX-10000*GetUnitAbilityLevel(Hw,$41304456)
else
if UX>=1000 then
call UnitAddAbility(Hw,$4131394B)
call SetUnitAbilityLevel(Hw,$4131394B,UX/1000)
set UX=UX-1000*GetUnitAbilityLevel(Hw,$4131394B)
else
if UX>=100 then
call UnitAddAbility(Hw,$4131394A)
call SetUnitAbilityLevel(Hw,$4131394A,UX/100)
set UX=UX-100*GetUnitAbilityLevel(Hw,$4131394A)
else
if UX>=10 then
call UnitAddAbility(Hw,$41313949)
call SetUnitAbilityLevel(Hw,$41313949,UX/10)
set UX=UX-10*GetUnitAbilityLevel(Hw,$41313949)
else
if UX>=1 then
call UnitAddAbility(Hw,$41305545)
call SetUnitAbilityLevel(Hw,$41305545,UX/1)
set UX=UX-1*GetUnitAbilityLevel(Hw,$41305545)
endif
endif
endif
endif
endif
exitwhen UX==0
endloop
endif
set Ua=1000*GetUnitAbilityLevel(Hw,$4131345A)+100*GetUnitAbilityLevel(Hw,$4131394F)+10*GetUnitAbilityLevel(Hw,$4131394E)+1*GetUnitAbilityLevel(Hw,$4131394D)
set Pf=LoadInteger(PR,GetHandleId(GetExpiredTimer()),3)
call UnitRemoveAbility(Hw,$4131394F)
call UnitRemoveAbility(Hw,$4131394E)
call UnitRemoveAbility(Hw,$4131394D)
call UnitRemoveAbility(Hw,$4131345A)
set UY=Ua-Pf
if UY>0 then
loop
if UY>=1000 then
call UnitAddAbility(Hw,$4131345A)
call SetUnitAbilityLevel(Hw,$4131345A,UY/1000)
set UY=UY-1000*GetUnitAbilityLevel(Hw,$4131345A)
else
if UY>=100 then
call UnitAddAbility(Hw,$4131394F)
call SetUnitAbilityLevel(Hw,$4131394F,UY/100)
set UY=UY-100*GetUnitAbilityLevel(Hw,$4131394F)
else
if UY>=10 then
call UnitAddAbility(Hw,$4131394E)
call SetUnitAbilityLevel(Hw,$4131394E,UY/10)
set UY=UY-10*GetUnitAbilityLevel(Hw,$4131394E)
else
if UY>=1 then
call UnitAddAbility(Hw,$4131394D)
call SetUnitAbilityLevel(Hw,$4131394D,UY/1)
set UY=UY-1*GetUnitAbilityLevel(Hw,$4131394D)
endif
endif
endif
endif
exitwhen UY==0
endloop
endif
call FlushChildHashtable(PR,GetHandleId(GetExpiredTimer()))
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hw=null
endfunction
function m7 takes integer iZ,integer ia,string ib returns multiboard
local multiboard PU=CreateMultiboard()
call MultiboardSetRowCount(PU,ia)
call MultiboardSetColumnCount(PU,iZ)
call MultiboardSetTitleText(PU,ib)
call MultiboardDisplay(PU,true)
set ic=PU
set PU=null
return ic
endfunction
function m8 takes multiboard PU,integer PV,integer PW,real id returns nothing
local integer Pa=0
local integer Pb=0
local integer PY=MultiboardGetRowCount(PU)
local integer PZ=MultiboardGetColumnCount(PU)
local multiboarditem Pc
loop
set Pa=Pa+1
exitwhen Pa>PY
if PW==0 or PW==Pa then
set Pb=0
loop
set Pb=Pb+1
exitwhen Pb>PZ
if PV==0 or PV==Pb then
set Pc=MultiboardGetItem(PU,Pa-1,Pb-1)
call MultiboardSetItemWidth(Pc,id/100.)
call MultiboardReleaseItem(Pc)
endif
endloop
endif
endloop
set Pc=null
endfunction
function m9 takes multiboard PU,integer PV,integer PW,string ie returns nothing
local integer Pa=0
local integer Pb=0
local integer PY=MultiboardGetRowCount(PU)
local integer PZ=MultiboardGetColumnCount(PU)
local multiboarditem Pc
loop
set Pa=Pa+1
exitwhen Pa>PY
if PW==0 or PW==Pa then
set Pb=0
loop
set Pb=Pb+1
exitwhen Pb>PZ
if PV==0 or PV==Pb then
set Pc=MultiboardGetItem(PU,Pa-1,Pb-1)
call MultiboardSetItemIcon(Pc,ie)
call MultiboardReleaseItem(Pc)
endif
endloop
endif
endloop
set Pc=null
endfunction
function nB takes multiboard PU,integer PV,integer PW,boolean ig,boolean ih returns nothing
local integer Pa=0
local integer Pb=0
local integer PY=MultiboardGetRowCount(PU)
local integer PZ=MultiboardGetColumnCount(PU)
local multiboarditem Pc
loop
set Pa=Pa+1
exitwhen Pa>PY
if PW==0 or PW==Pa then
set Pb=0
loop
set Pb=Pb+1
exitwhen Pb>PZ
if PV==0 or PV==Pb then
set Pc=MultiboardGetItem(PU,Pa-1,Pb-1)
call MultiboardSetItemStyle(Pc,ig,ih)
call MultiboardReleaseItem(Pc)
endif
endloop
endif
endloop
set Pc=null
endfunction
function nC takes multiboard PU,integer PV,integer PW,string PX returns nothing
local integer Pa=0
local integer Pb=0
local integer PY=MultiboardGetRowCount(PU)
local integer PZ=MultiboardGetColumnCount(PU)
local multiboarditem Pc
loop
set Pa=Pa+1
exitwhen Pa>PY
if PW==0 or PW==Pa then
set Pb=0
loop
set Pb=Pb+1
exitwhen Pb>PZ
if PV==0 or PV==Pb then
set Pc=MultiboardGetItem(PU,Pa-1,Pb-1)
call MultiboardSetItemValue(Pc,PX)
call MultiboardReleaseItem(Pc)
endif
endloop
endif
endloop
set Pc=null
endfunction
function nD takes real Pv,real Pw,real Py,real Pz returns real
return bj_RADTODEG*Atan2(Pz-Pw,Py-Pv)
endfunction
function nG takes unit N2,integer N3 returns integer
local integer N4
local item N5
set N4=0
loop
set N5=UnitItemInSlot(N2,N4)
if N5!=null and GetItemTypeId(N5)==N3 then
set N5=null
set N5=null
return N4+1
endif
set N4=N4+1
exitwhen N4>=bj_MAX_INVENTORY
endloop
set N5=null
return 0
endfunction
function nH takes unit N2,integer N3 returns boolean
return nG(N2,N3)>0
endfunction
function nI takes unit N2,integer N3 returns item
local integer N4=nG(N2,N3)
if N4==0 then
return null
else
return UnitItemInSlot(N2,N4-1)
endif
endfunction
function nJ takes integer N3,unit QI returns item
local location Hv=GetUnitLoc(QI)
local item MC=CreateItem(N3,GetLocationX(Hv),GetLocationY(Hv))
call UnitAddItem(QI,MC)
call RemoveLocation(Hv)
set Hv=null
set QJ=MC
set MC=null
return QJ
endfunction
function nK takes real NU returns real
local real Px=GetRectMinX(bj_mapInitialPlayableArea)+50
if NU<Px then
return Px
endif
set Px=GetRectMaxX(bj_mapInitialPlayableArea)-50
if NU>Px then
return Px
endif
return NU
endfunction
function nL takes real NU returns real
local real Px=GetRectMinY(bj_mapInitialPlayableArea)+50
if NU<Px then
return Px
endif
set Px=GetRectMaxY(bj_mapInitialPlayableArea)-50
if NU>Px then
return Px
endif
return NU
endfunction
function nM takes location P0,location P1 returns real
local real P2=GetLocationX(P1)-GetLocationX(P0)
local real P3=GetLocationY(P1)-GetLocationY(P0)
return SquareRoot(P2*P2+P3*P3)
endfunction
function nN takes location Vq,real Vr,real Vs returns location
local real MF=GetLocationX(Vq)+Vr*Cos(Vs*bj_DEGTORAD)
local real MG=GetLocationY(Vq)+Vr*Sin(Vs*bj_DEGTORAD)
return Location(MF,MG)
endfunction
function nO takes player Hv returns nothing
if GetLocalPlayer()==Hv then
call ClearTextMessages()
endif
endfunction
function nP takes unit Hw returns nothing
local player Hv=GetOwningPlayer(Hw)
local integer Mc=GetPlayerId(Hv)
local integer MC=GetUnitAbilityLevel(Hw,$41313247)+GetUnitAbilityLevel(Hw,$41314335)+GetUnitAbilityLevel(Hw,$41313234)+GetUnitAbilityLevel(Hw,$41313357)+GetUnitAbilityLevel(Hw,$41314341)+GetUnitAbilityLevel(Hw,$41314330)+GetUnitAbilityLevel(Hw,$41314332)
local string PQ
if GetUnitAbilityLevel(Hw,$41313357)>=1 then
if MC>=5 and MC<10 then
set PQ="war3mapImported\\BlackWingVR.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=10 and MC<15 then
set PQ="war3mapImported\\TranquilityAuraRed.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=15 and MC<20 then
set PQ="war3mapImported\\Chaos Wings.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=20 and MC<25 then
set PQ="war3mapImported\\Windwalk Blood.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=25 and MC<30 then
set PQ="war3mapImported\\307.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
endif
elseif GetUnitAbilityLevel(Hw,$41314330)>=1 then
if MC>=5 and MC<10 then
set PQ="war3mapImported\\YY.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=10 and MC<15 then
set PQ="war3mapImported\\TranquilityAuraGreen+Yellow.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=15 and MC<20 then
set PQ="war3mapImported\\Nature Wings.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=20 and MC<25 then
set PQ="war3mapImported\\Windwalk Necro Soul.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=25 and MC<30 then
set PQ="war3mapImported\\111.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
endif
elseif GetUnitAbilityLevel(Hw,$41314332)>=1 then
if MC>=5 and MC<10 then
set PQ="war3mapImported\\Phoenix Wing.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=10 and MC<15 then
set PQ="war3mapImported\\TranquilityAuraYellow.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=15 and MC<20 then
set PQ="war3mapImported\\Divine Wings.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=20 and MC<25 then
set PQ="war3mapImported\\Windwalk Fire.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=25 and MC<30 then
set PQ="war3mapImported\\scbmcyq.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
endif
elseif GetUnitAbilityLevel(Hw,$41314341)>=1 then
if MC>=5 and MC<10 then
set PQ="war3mapImported\\Purple Abyss Wing.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=10 and MC<15 then
set PQ="war3mapImported\\TranquilityAuraBlue.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=15 and MC<20 then
set PQ="war3mapImported\\Cosmic Wings.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=20 and MC<25 then
set PQ="war3mapImported\\Windwalk.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=25 and MC<30 then
set PQ="war3mapImported\\23143532.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
endif
elseif GetUnitAbilityLevel(Hw,$41313234)>=1 then
if MC>=5 and MC<10 then
set PQ="war3mapImported\\Another Divinity Attachment.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=10 and MC<15 then
set PQ="war3mapImported\\TranquilityAuraGreen.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=15 and MC<20 then
set PQ="war3mapImported\\Nature Wings.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=20 and MC<25 then
set PQ="war3mapImported\\Windwalk Necro Soul.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=25 and MC<30 then
set PQ="war3mapImported\\wing30.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
endif
elseif GetUnitAbilityLevel(Hw,$41313247)>=1 then
if MC>=5 and MC<10 then
set PQ="war3mapImported\\YH5.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=10 and MC<15 then
set PQ="war3mapImported\\TranquilityAuraWhite.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=15 and MC<20 then
set PQ="war3mapImported\\Chaos Wings.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=20 and MC<25 then
set PQ="war3mapImported\\Windwalk Blood.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=25 and MC<30 then
set PQ="war3mapImported\\02.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
endif
elseif GetUnitAbilityLevel(Hw,$41314335)>=1 then
if MC>=5 and MC<10 then
set PQ="war3mapImported\\DHYY.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=10 and MC<15 then
set PQ="war3mapImported\\TranquilityAuraPurple.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=15 and MC<20 then
set PQ="war3mapImported\\Void Wings.mdl"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
elseif MC>=20 and MC<25 then
set PQ="war3mapImported\\Windwalk Blue Soul.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"origin"))
elseif MC>=25 and MC<30 then
set PQ="war3mapImported\\jd-chibian1.mdx"
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(Hw),0))
call RemoveSavedHandle(PR,GetHandleId(Hw),0)
call SaveEffectHandle(PR,GetHandleId(Hw),0,AddSpecialEffectTarget(PQ,Hw,"chest"))
endif
endif
endfunction
function nQ takes unit Hw,integer PN,integer PO,boolean PP returns nothing
local player Hv=GetOwningPlayer(Hw)
local integer Mc=GetPlayerId(Hv)
local string M7
local string PS
call nP(Hw)
if PN==$41313357 then
call UnitAddAbility(MV[Mc],$41313357)
call UnitAddAbility(MV[Mc],$41304434)
call UnitAddAbility(MV[Mc],$41304D36)
call UnitAddAbility(MV[Mc],$41304836)
call UnitAddAbility(MV[Mc],$41304838)
elseif PN==$41314330 then
call UnitAddAbility(MV[Mc],$41314330)
call UnitAddAbility(MV[Mc],$41304D37)
call UnitAddAbility(MV[Mc],$41304D36)
call UnitAddAbility(MV[Mc],$41304836)
call UnitAddAbility(MV[Mc],$41304841)
call UnitAddAbility(MV[Mc],$41304737)
elseif PN==$41314332 then
call UnitAddAbility(MV[Mc],$41314332)
call UnitAddAbility(MV[Mc],$41304645)
call UnitAddAbility(MV[Mc],$41304D36)
call UnitAddAbility(MV[Mc],$41304836)
call UnitAddAbility(MV[Mc],$41304838)
call UnitAddAbility(MV[Mc],$41304739)
elseif PN==$41314341 then
call UnitAddAbility(MV[Mc],$41314341)
call UnitAddAbility(MV[Mc],$41304438)
call UnitAddAbility(MV[Mc],$41304D36)
call UnitAddAbility(MV[Mc],$41304739)
call UnitAddAbility(MV[Mc],$41304841)
elseif PN==$41313234 then
call UnitAddAbility(MV[Mc],$41313234)
call UnitAddAbility(MV[Mc],$41304549)
call UnitAddAbility(MV[Mc],$41304D36)
call UnitAddAbility(MV[Mc],$41304841)
call UnitAddAbility(MV[Mc],$41304739)
call UnitAddAbility(MV[Mc],$41304737)
elseif PN==$41313247 then
call UnitAddAbility(MV[Mc],$41313247)
call UnitAddAbility(MV[Mc],$41304557)
call UnitAddAbility(MV[Mc],$41304D36)
call UnitAddAbility(MV[Mc],$41304841)
call UnitAddAbility(MV[Mc],$41304737)
call UnitAddAbility(MV[Mc],$41304739)
elseif PN==$41314335 then
call UnitAddAbility(MV[Mc],$41314335)
call UnitAddAbility(MV[Mc],$53303039)
call UnitAddAbility(MV[Mc],$41304841)
call UnitAddAbility(MV[Mc],$41304836)
call UnitAddAbility(MV[Mc],$41304838)
endif
call SetUnitAbilityLevel(Hw,$41304434,PO)
call SetUnitAbilityLevel(Hw,$41313357,PO)
call SetUnitAbilityLevel(Hw,$41304D37,PO)
call SetUnitAbilityLevel(Hw,$41314330,PO)
call SetUnitAbilityLevel(Hw,$41304645,PO)
call SetUnitAbilityLevel(Hw,$41314332,PO)
call SetUnitAbilityLevel(Hw,$41304438,PO)
call SetUnitAbilityLevel(Hw,$41314341,PO)
call SetUnitAbilityLevel(Hw,$41304549,PO)
call SetUnitAbilityLevel(Hw,$41313234,PO)
call SetUnitAbilityLevel(Hw,$41304557,PO)
call SetUnitAbilityLevel(Hw,$41313247,PO)
call SetUnitAbilityLevel(Hw,$53303039,PO)
call SetUnitAbilityLevel(Hw,$41314335,PO)
call SetUnitAbilityLevel(Hw,$41304D36,PO)
call SetUnitAbilityLevel(Hw,$41304838,PO)
call SetUnitAbilityLevel(Hw,$41304841,PO)
call SetUnitAbilityLevel(Hw,$41304739,PO)
call SetUnitAbilityLevel(Hw,$41304836,PO)
call SetUnitAbilityLevel(Hw,$41304737,PO)
call SetPlayerAbilityAvailable(GetOwningPlayer(MV[Mc]),PN,false)
if PP==true then
call SetHeroStr(Hw,GetHeroStr(Hw,false)+17,false)
call SetHeroAgi(Hw,GetHeroAgi(Hw,false)+17,false)
call SetHeroInt(Hw,GetHeroInt(Hw,false)+17,false)
else
call SetHeroStr(Hw,GetHeroStr(Hw,false)+PO*17,false)
call SetHeroAgi(Hw,GetHeroAgi(Hw,false)+PO*17,false)
call SetHeroInt(Hw,GetHeroInt(Hw,false)+PO*17,false)
endif
if PO<=5 then
set M7="|c00FF80C0"
elseif PO>5 and PO<=10 then
set M7="|c008080C0"
elseif PO>10 and PO<=15 then
set M7="|c00ffff00"
elseif PO>15 and PO<=20 then
set M7="|cFF0080FF"
elseif PO>20 and PO<=25 then
set M7="|c00FF00FF"
elseif PO>25 and PO<=30 then
set M7="|c0000FF00"
endif
if GetUnitAbilityLevel(Hw,$41313357)>=1 then
set PS=M7+"[Безумец]|r"+"("+I2S(PO)+"|r) "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
call nC(Pd,6,Mc+2,M7+"[Безумец]|r("+I2S(PO)+"|r) ")
elseif GetUnitAbilityLevel(Hw,$41314330)>=1 then
set PS=M7+"[Авантюрист]|r"+"("+I2S(PO)+"|r) "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
call nC(Pd,6,Mc+2,M7+"[Авантюрист]|r("+I2S(PO)+"|r) ")
elseif GetUnitAbilityLevel(Hw,$41314332)>=1 then
set PS=M7+"[Аристократ]|r"+"("+I2S(PO)+"|r) "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
call nC(Pd,6,Mc+2,M7+"[Аристократ]|r("+I2S(PO)+"|r) ")
elseif GetUnitAbilityLevel(Hw,$41314341)>=1 then
set PS=M7+"[Бессмертный]|r"+"("+I2S(PO)+"|r) "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
call nC(Pd,6,Mc+2,M7+"[Бессмертный]|r("+I2S(PO)+"|r) ")
elseif GetUnitAbilityLevel(Hw,$41313234)>=1 then
set PS=M7+"[Верующий]|r"+"("+I2S(PO)+"|r) "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
call nC(Pd,6,Mc+2,M7+"[Верующий]|r("+I2S(PO)+"|r) ")
elseif GetUnitAbilityLevel(Hw,$41313247)>=1 then
set PS=M7+"[Грешник]|r"+"("+I2S(PO)+"|r) "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
call nC(Pd,6,Mc+2,M7+"[Грешник]|r("+I2S(PO)+"|r) ")
elseif GetUnitAbilityLevel(Hw,$41314335)>=1 then
set PS=M7+"[Губитель]|r"+"("+I2S(PO)+"|r) "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
call nC(Pd,6,Mc+2,M7+"[Губитель]|r("+I2S(PO)+"|r) ")
endif
if OG[Mc]=="M.U.D.R.I.K" then
set PS="|c0000ff00[Адский]|r "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
elseif OG[Mc]=="1Natsu" then
if GetUnitTypeId(Hw)==$55303133 then
set PS="|c00ff00ff[Всадник]|r "+"|c00ff00ff"+OG[Mc]
else
set PS="|c00ffff00[Падшая]|r "+"|c00ffff00"+OG[Mc]
endif
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
elseif OG[Mc]=="Jeka_Pycckuu" then
set PS="|c00fa0505[NoComments]|r "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
elseif OG[Mc]=="LTz.V" then
set PS="|c00fd88f5[Зайка]|r "+"|c00fd88f5"+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
elseif OG[Mc]=="as.36rus" then
set PS="|c00000000[Жнец]|r "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
elseif OG[Mc]=="TCoM-_-ORPG" then
set PS="|c00ff0000[Black Master]|r "+"|c00ff0000"+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
elseif OG[Mc]=="Gra2us" then
set PS="|c00ff0000[Всадник]|r "+OF[Mc]+OG[Mc]
set PT[Mc]=PS
if GetUnitAbilityLevel(Hw,$41303944)>=1 then
call SetPlayerName(Player(Mc),PS)
endif
endif
endfunction
function nR takes unit Hw,integer Pe,integer Pf,integer Pg,integer Ph,integer Pi,integer Pj returns nothing
local player Hv=GetOwningPlayer(Hw)
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,"|c00008000Трофей улучшен!")
call RemoveItem(nI(Hw,Pe))
call RemoveItem(nI(Hw,Pf))
call RemoveItem(nI(Hw,Pg))
call RemoveItem(nI(Hw,Ph))
call RemoveItem(nI(Hw,Pi))
call RemoveItem(nI(Hw,Pj))
endfunction
function nS takes unit Hw returns nothing
local player Hv=GetOwningPlayer(Hw)
local unit PM=NM[2+2*GetPlayerId(Hv)]
local integer PL=GetUnitAbilityLevel(Hw,$41313247)+GetUnitAbilityLevel(Hw,$41314335)+GetUnitAbilityLevel(Hw,$41313234)+GetUnitAbilityLevel(Hw,$41313357)+GetUnitAbilityLevel(Hw,$41314341)+GetUnitAbilityLevel(Hw,$41314330)+GetUnitAbilityLevel(Hw,$41314332)
if PL==1 then
if nH(PM,$49304157) and nH(PM,$49304230) and nH(PM,$49304231) and nH(PM,$4930415A) and nH(PM,$49304159) and nH(PM,$49304158) then
call nQ(Hw,0,2,true)
call nR(PM,$49304157,$49304230,$49304231,$4930415A,$49304159,$49304158)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[1])
endif
elseif PL==2 then
if nH(PM,$49303334) and nH(PM,$49303335) and nH(PM,$49303336) and nH(PM,$49305345) and nH(PM,$49304441) then
call nQ(Hw,0,3,true)
call nR(PM,$49303334,$49303335,$49303336,$49305345,$49304441,0)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[2])
endif
elseif PL==3 then
if nH(PM,$49305133) and nH(PM,$4930474F) and nH(PM,$49304751) and nH(PM,$49304750) and nH(PM,$49304752) then
call nQ(Hw,0,4,true)
call nR(PM,$49305133,$4930474F,$49304751,$49304750,$49304752,0)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[3])
endif
elseif PL==4 then
if nH(PM,$6C676468) and nH(PM,$6F646566) and nH(PM,$6576746C) and nH(PM,$70727674) and nH(PM,$72616731) and nH(PM,$62737064) then
call nR(PM,$6F646566,$6C676468,$6576746C,$70727674,$72616731,$62737064)
call nQ(Hw,0,5,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[4])
endif
elseif PL==5 then
if nH(PM,$49303345) and nH(PM,$49303344) and nH(PM,$49303343) and nH(PM,$49305349) and nH(PM,$49305256) then
call nR(PM,$49303345,$49303344,$49303343,$49305349,$49305256,0)
call nQ(Hw,0,6,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[5])
endif
elseif PL==6 then
if nH(PM,$49305437) and nH(PM,$4930534A) and nH(PM,$4930534C) then
call nR(PM,$49305437,$4930534A,$4930534C,0,0,0)
call nQ(Hw,0,7,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[6])
endif
elseif PL==7 then
if nH(PM,$49304234) and nH(PM,$49304233) and nH(PM,$49304232) and nH(PM,$49304235) and nH(PM,$49304237) and nH(PM,$49304236) then
call nR(PM,$49304234,$49304233,$49304236,$49304237,$49304232,$49304235)
call nQ(Hw,0,8,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[7])
endif
elseif PL==8 then
if nH(PM,$4930334C) and nH(PM,$4930334B) and nH(PM,$4930334D) and nH(PM,$4930534B) and nH(PM,$49305257) then
call nR(PM,$4930334C,$4930334B,$4930334D,$4930534B,$49305257,0)
call nQ(Hw,0,9,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[8])
endif
elseif PL==9 then
if nH(PM,$49303354) and nH(PM,$49303352) and nH(PM,$49303353) and nH(PM,$49303456) and nH(PM,$49305258) then
call nR(PM,$49303354,$49303352,$49303353,$49303456,$49305258,0)
call nQ(Hw,0,10,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[9])
endif
elseif PL==10 then
if nH(PM,$49303159) and nH(PM,$4930384A) and nH(PM,$49303157) and nH(PM,$49303843) and nH(PM,$49303230) then
call nR(PM,$49303159,$4930384A,$49303157,$49303843,$49303230,0)
call nQ(Hw,0,11,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[10])
endif
elseif PL==11 then
if nH(PM,$72617466) and nH(PM,$49303543) and nH(PM,$49303545) and nH(PM,$49303544) and nH(PM,$49303546) and nH(PM,$49303542) then
call nR(PM,$72617466,$49303543,$49303545,$49303544,$49303546,$49303542)
call nQ(Hw,0,12,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[11])
endif
elseif PL==12 then
if nH(PM,$49304244) and nH(PM,$49304245) and nH(PM,$49304248) and nH(PM,$49304246) and nH(PM,$49304247) and nH(PM,$49304249) then
call nR(PM,$49304245,$49304244,$49304248,$49304246,$49304247,$49304249)
call nQ(Hw,0,13,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[12])
endif
elseif PL==13 then
if nH(PM,$49313038) and nH(PM,$676F7072) then
call nR(PM,$49313038,$676F7072,0,0,0,0)
call nQ(Hw,0,14,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[13])
endif
elseif PL==14 then
if nH(PM,$736F7266) and nH(PM,$49303944) and nH(PM,$49303943) and nH(PM,$49303946) and nH(PM,$49303945) and nH(PM,$49303947) then
call nR(PM,$736F7266,$49303944,$49303947,$49303945,$49303946,$49303943)
call nQ(Hw,0,15,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[14])
endif
elseif PL==15 then
if nH(PM,$6B336D33) and nH(PM,$4930424C) and nH(PM,$4930424B) and nH(PM,$4930424A) then
call nR(PM,$6B336D33,$4930424C,$4930424B,$4930424A,0,0)
call nQ(Hw,0,16,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[15])
endif
elseif PL==16 then
if nH(PM,$6B796768) and nH(PM,$49304658) and nH(PM,$49304657) and nH(PM,$49304656) then
call nR(PM,$6B796768,$49304658,$49304657,$49304656,0,0)
call nQ(Hw,0,17,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[16])
endif
elseif PL==17 then
if nH(PM,$64746862) and nH(PM,$49304546) and nH(PM,$49304547) and nH(PM,$49304545) then
call nR(PM,$64746862,$49304546,$49304547,$49304545,0,0)
call nQ(Hw,0,18,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[17])
endif
elseif PL==18 then
if nH(PM,$49304855) and nH(PM,$49304852) and nH(PM,$49304851) and nH(PM,$72617433) and nH(PM,$49304930) then
call nR(PM,$49304855,$49304852,$49304851,$72617433,$49304930,0)
call nQ(Hw,0,19,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[18])
endif
elseif PL==19 then
if nH(PM,$74666172) and nH(PM,$736B7274) and nH(PM,$74626172) then
call nR(PM,$74666172,$736B7274,$74626172,0,0,0)
call nQ(Hw,0,20,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[19])
endif
elseif PL==20 then
if nH(PM,$49305351) and nH(PM,$49305350) and nH(PM,$49305352) then
call nR(PM,$49305351,$49305350,$49305352,0,0,0)
call nQ(Hw,0,21,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[20])
endif
elseif PL==21 then
if nH(PM,$72756D70) and nH(PM,$73747265) and nH(PM,$4930594C) then
call nR(PM,$72756D70,$73747265,$4930594C,0,0,0)
call nQ(Hw,0,22,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[21])
endif
elseif PL==22 then
if nH(PM,$72616D34) and nH(PM,$6C757265) and nH(PM,$73666F67) and nH(PM,$4930594D) then
call nR(PM,$72616D34,$6C757265,$73666F67,$4930594D,0,0)
call nQ(Hw,0,23,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[22])
endif
elseif PL==23 then
if nH(PM,$73686377) and nH(PM,$70686C74) and nH(PM,$6D6E7366) and nH(PM,$61786173) then
call nR(PM,$73686377,$70686C74,$6D6E7366,$61786173,0,0)
call nQ(Hw,0,24,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[23])
endif
elseif PL==24 then
if nH(PM,$49305543) and nH(PM,$49305545) and nH(PM,$49305544) and nH(PM,$49305453) then
call nR(PM,$49305543,$49305545,$49305544,$49305453,0,0)
call nQ(Hw,0,25,true)
else
call nO(Hv)
call DisplayTextToPlayer(Hv,.5,0,Pk[24])
endif
endif
set PM=null
endfunction
function nT takes nothing returns nothing
local unit Hw=GetBuyingUnit()
local item MQ=GetSoldItem()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local integer PL=GetUnitAbilityLevel(MV[Mc],$41313247)+GetUnitAbilityLevel(MV[Mc],$41314335)+GetUnitAbilityLevel(MV[Mc],$41313234)+GetUnitAbilityLevel(MV[Mc],$41313357)+GetUnitAbilityLevel(MV[Mc],$41314341)+GetUnitAbilityLevel(MV[Mc],$41314330)+GetUnitAbilityLevel(MV[Mc],$41314332)
if GetItemTypeId(MQ)==$49313048 then
call nS(MV[Mc])
elseif GetItemTypeId(MQ)==$49313046 and PL==0 then
call nQ(Hw,$41313357,1,true)
elseif GetItemTypeId(MQ)==$49313041 and PL==0 then
call nQ(Hw,$41314330,1,true)
elseif GetItemTypeId(MQ)==$49313047 and PL==0 then
call nQ(Hw,$41314332,1,true)
elseif GetItemTypeId(MQ)==$49313044 and PL==0 then
call nQ(Hw,$41314341,1,true)
elseif GetItemTypeId(MQ)==$49313043 and PL==0 then
call nQ(Hw,$41313234,1,true)
elseif GetItemTypeId(MQ)==$49313042 and PL==0 then
call nQ(Hw,$41313247,1,true)
elseif GetItemTypeId(MQ)==$49313045 and PL==0 then
call nQ(Hw,$41314335,1,true)
endif
set MQ=null
set Hw=null
endfunction
function nU takes nothing returns nothing
set PK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(PK,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(PK,function nT)
set Pk[1]="|c000080FFДля улучшения трофея требуется|r:\n        -Ядовитая кольчуга\n        -Том из прошлого\n        -Рукавица Великих\n        -Ярость\n        -Дыхание огня\n        -Дыхание льда\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[2]="|c000080FFДля улучшения трофея требуется|r:\n        -Ботинки\n        -Броня природы\n        -Посох Фауны\n        -Топаз\n        -Эссенция леса\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[3]="|c000080FFДля улучшения трофея требуется|r:\n        -Новогодняя шапка\n        -Паразит\n        -Зловещий щит\n        -Порча\n        -Клык вампира\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[4]="|c000080FFДля улучшения трофея требуется|r:\n        -Сфера огня\n        -Дикий червь\n        -Талисман защиты\n        -Талисман здоровья\n        -Хрустальный шар\n        -Шлем доблести\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[5]="|c000080FFДля улучшения трофея требуется|r:\n        -Обувь чародея\n        -Рунный топор\n        -Прзрачные когти\n        -Опал\n        -Осколок Льда\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[6]="|c000080FFДля улучшения трофея требуется|r:\n        -Часть корабля\n        -Кубик(опал)\n        -Кровавая диадема(изумруд)\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[7]="|c000080FFДля улучшения трофея требуется|r:\n        -Власть порчи\n        -Власть тьмы\n        -Похищение жизни\n        -Похищение маны\n        -Темная сила\n        -Чумная энергия\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[8]="|c000080FFДля улучшения трофея требуется|r:\n        -Кольчуга темного пламени\n        -Каратель\n        -Посох дракона\n        -Изумруд\n        -Эссенция тьмы\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[9]="|c000080FFДля улучшения трофея требуется|r:\n        -Шиповник\n        -Рыцарский нагрудник\n        -Режущий плоть\n        -Эмеральд\n        -Эссенция Темного Всадника\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[10]="|c000080FFДля улучшения трофея требуется|r:\n        -Зеленый череп\n        -Красный череп\n        -Темный череп\n        -Пурпурный череп\n        -Синий череп\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[11]="|c000080FFДля улучшения трофея требуется|r:\n        -Блокирующий Смерть\n        -Обувь повиновения\n        -Броня Кая\n        -Головной убор Наг\n        -Ожерелье медузы\n        -Эссенция пучины\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[12]="|c000080FFДля улучшения трофея требуется|r:\n        -Меткость\n        -Копье лунного света\n        -Накидка эльфов\n        -Череп покойника\n        -Посох смертника\n        -Эликсир выносливости\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[13]="|c000080FFДля улучшения трофея требуется|r:\n        -Ход конём\n        -Эссенция моря\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[14]="|c000080FFДля улучшения трофея требуется|r:\n        -Золотой\n        -Посох тёмных\n        -Черепки\n        -Шлем повелителя\n        -Элемент разбойника\n        -Эссенция земли\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[15]="|c000080FFДля улучшения трофея требуется|r:\n        -Книга Силы\n        -Книга Ловкости\n        -Книга разума\n        -Эссенция камня\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[16]="|c000080FFДля улучшения трофея требуется|r:\n        -Карта сокровищ\n        -Руна лихорадки\n        -Ящик золота\n        -Сломанная коса\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[17]="|c000080FFДля улучшения трофея требуется|r:\n        -Феникс\n        -Только во снах\n        -Душевная боль\n        -Эссенция крабообразного\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[18]="|c000080FFДля улучшения трофея требуется|r:\n        -Броня Мрази\n        -Гнилая туша\n        -Яркость(3)\n        -Полет мысли(3)\n        -Вспышка ярости(3)\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[19]="|c000080FFДля улучшения трофея требуется|r:\n        -Темный Гримуар\n        -Сюрикен\n        -Звездопад\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[20]="|c000080FFДля улучшения трофея требуется|r:\n        -Сущность воина(п.о)\n        -Сущность вора(п.о)\n        -Сущность мага(п.о)\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[21]="|c000080FFДля улучшения трофея требуется|r:\n        -Оберег возмездия\n        -Рассекатель\n        -Яблоко с улыбкой\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[22]="|c000080FFДля улучшения трофея требуется|r:\n        -Проклятый вихрь\n        -Сфера покаяния\n        -Якорь\n        -Магический оберег(Э.С)\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[23]="|c000080FFДля улучшения трофея требуется|r:\n        -курьер Маркиз\n        -курьер Кай\n        -Спи, мой хороший, спи\n        -Проклятый оберег(Э.С)\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pk[24]="|c000080FFДля улучшения трофея требуется|r:\n        -Эссенция песка\n        -Ядовитая руна Силы\n        -Ядовитая руна Ловкости\n        -Ядовитая руна Разума\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
endfunction
function nV takes nothing returns nothing
local unit Nx=GetEnumUnit()
local location Hv=GetUnitLoc(Nx)
local unit NR=CreateUnitAtLoc(Player(0),$68303739,Hv,0)
call m5(NR,1)
call UnitAddAbility(NR,Vv)
call SetUnitAbilityLevel(NR,Vv,Vx)
call IssueTargetOrder(NR,Vw,Nx)
call RemoveLocation(Hv)
set NR=null
set Nx=null
set Hv=null
endfunction
function nW takes group Nb,integer M7,integer Vt,string Vu returns nothing
set Vv=M7
set Vw=Vu
set Vx=Vt
call ForGroup(Nb,function nV)
endfunction
function nX takes unit Hw,string M7,real NU,integer NV,integer NW,integer NX returns nothing
local texttag NY=CreateTextTag()
call SetTextTagText(NY,M7,NU)
call SetTextTagPosUnit(NY,Hw,50)
call SetTextTagColor(NY,NV,NW,NX,255)
call SetTextTagVelocity(NY,0,.03)
call SetTextTagVisibility(NY,GetLocalPlayer()==GetOwningPlayer(Hw))
call SetTextTagFadepoint(NY,1)
call SetTextTagLifespan(NY,2)
call SetTextTagPermanent(NY,false)
call SetTextTagSuspended(NY,false)
endfunction
function nY takes unit Hw,unit Nx,string M7 returns nothing
local texttag NY=CreateTextTag()
call SetTextTagText(NY,"+"+M7,.023)
call SetTextTagPosUnit(NY,Hw,50)
call SetTextTagColor(NY,0,255,0,255)
call SetTextTagVelocity(NY,0,.03)
call SetTextTagVisibility(NY,GetLocalPlayer()==GetOwningPlayer(Nx))
call SetTextTagFadepoint(NY,1)
call SetTextTagLifespan(NY,2)
call SetTextTagPermanent(NY,false)
call SetTextTagSuspended(NY,false)
endfunction
function nZ takes unit NR,unit Hw,string M7,real NU,integer NV,integer NW,integer NX,real Nu returns nothing
local texttag NY=CreateTextTag()
call SetTextTagText(NY,M7,NU)
call SetTextTagPosUnit(NY,NR,Nu)
call SetTextTagColor(NY,NV,NW,NX,255)
call SetTextTagVelocity(NY,0,.03)
call SetTextTagVisibility(NY,GetLocalPlayer()==GetOwningPlayer(Hw))
call SetTextTagFadepoint(NY,1)
call SetTextTagLifespan(NY,2)
call SetTextTagPermanent(NY,false)
call SetTextTagSuspended(NY,false)
endfunction
function na takes unit Hw,string M7,real NU,integer NV,integer NW,integer NX returns nothing
local texttag NY=CreateTextTag()
call SetTextTagText(NY,M7,NU)
call SetTextTagPosUnit(NY,Hw,50)
call SetTextTagColor(NY,NV,NW,NX,255)
call SetTextTagVelocity(NY,0,.03)
call SetTextTagFadepoint(NY,1)
call SetTextTagLifespan(NY,2)
call SetTextTagPermanent(NY,false)
call SetTextTagSuspended(NY,false)
endfunction
function nb takes unit Hw,real M7,real Nf,real NU,real g4,real Nn,integer Hv,string hH,integer Mh,integer hI,integer MC returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))+1
set Nh[Mc]=Nh[Mc]+M7
set UI[Mc]=UI[Mc]+R2I(M7*100)
set Ng[Mc]=Ng[Mc]+Nf
set UM[Mc]=UM[Mc]+R2I(Nf*100)
set Ne[Mc]=Ne[Mc]+NU
set UJ[Mc]=UJ[Mc]+R2I(NU*100)
set N1[Mc]=N1[Mc]+g4
set UK[Mc]=UK[Mc]+R2I(g4*100)
set TS[Mc]=TS[Mc]+Nn
set UL[Mc]=UL[Mc]+R2I(Nn*100)
set UO[Mc]=UO[Mc]+Hv
set hJ[Mc]=hH
call SetHeroStr(MV[Mc-1],GetHeroStr(MV[Mc-1],false)+Mh,false)
call SetHeroAgi(MV[Mc-1],GetHeroAgi(MV[Mc-1],false)+hI,false)
call SetHeroInt(MV[Mc-1],GetHeroInt(MV[Mc-1],false)+MC,false)
call UnitAddAbility(MV[Mc-1],$41304648)
endfunction
function nc takes unit Hw,integer MC returns nothing
local integer UZ=10000*GetUnitAbilityLevel(Hw,$41304456)+1000*GetUnitAbilityLevel(Hw,$4131394B)+100*GetUnitAbilityLevel(Hw,$4131394A)+10*GetUnitAbilityLevel(Hw,$41313949)+GetUnitAbilityLevel(Hw,$41305545)
local integer UX=UZ+MC
call UnitRemoveAbility(Hw,$4131394B)
call UnitRemoveAbility(Hw,$4131394A)
call UnitRemoveAbility(Hw,$41313949)
call UnitRemoveAbility(Hw,$41305545)
call UnitRemoveAbility(Hw,$41304456)
call UnitRemoveAbility(Hw,$4131424F)
loop
if UX>=10000 then
call UnitAddAbility(Hw,$41304456)
call SetUnitAbilityLevel(Hw,$41304456,UX/10000)
set UX=UX-10000*GetUnitAbilityLevel(Hw,$41304456)
else
if UX>=1000 then
call UnitAddAbility(Hw,$4131394B)
call SetUnitAbilityLevel(Hw,$4131394B,UX/1000)
set UX=UX-1000*GetUnitAbilityLevel(Hw,$4131394B)
else
if UX>=100 then
call UnitAddAbility(Hw,$4131394A)
call SetUnitAbilityLevel(Hw,$4131394A,UX/100)
set UX=UX-100*GetUnitAbilityLevel(Hw,$4131394A)
else
if UX>=10 then
call UnitAddAbility(Hw,$41313949)
call SetUnitAbilityLevel(Hw,$41313949,UX/10)
set UX=UX-10*GetUnitAbilityLevel(Hw,$41313949)
else
if UX>=1 then
call UnitAddAbility(Hw,$41305545)
call SetUnitAbilityLevel(Hw,$41305545,UX/1)
set UX=UX-1*GetUnitAbilityLevel(Hw,$41305545)
endif
endif
endif
endif
endif
exitwhen UX==0
endloop
endfunction
function nd takes unit UU,integer UW returns nothing
loop
if UW>=10000 then
call UnitAddAbility(UU,$4131394C)
call SetUnitAbilityLevel(UU,$4131394C,6)
call UnitRemoveAbility(UU,$4131394C)
set UW=UW-10000
else
if UW>=1000 then
call UnitAddAbility(UU,$4131394C)
call SetUnitAbilityLevel(UU,$4131394C,5)
call UnitRemoveAbility(UU,$4131394C)
set UW=UW-1000
else
if UW>=100 then
call UnitAddAbility(UU,$4131394C)
call SetUnitAbilityLevel(UU,$4131394C,4)
call UnitRemoveAbility(UU,$4131394C)
set UW=UW-100
else
if UW>=10 then
call UnitAddAbility(UU,$4131394C)
call SetUnitAbilityLevel(UU,$4131394C,3)
call UnitRemoveAbility(UU,$4131394C)
set UW=UW-10
else
if UW>=1 then
call UnitAddAbility(UU,$4131394C)
call SetUnitAbilityLevel(UU,$4131394C,2)
call UnitRemoveAbility(UU,$4131394C)
set UW=UW-1
endif
endif
endif
endif
endif
exitwhen UW==0
endloop
endfunction
function ne takes unit Hw,integer MC returns nothing
local integer Ua=1000*GetUnitAbilityLevel(Hw,$4131345A)+100*GetUnitAbilityLevel(Hw,$4131394F)+10*GetUnitAbilityLevel(Hw,$4131394E)+GetUnitAbilityLevel(Hw,$4131394D)
local integer UY=Ua+MC
call UnitRemoveAbility(Hw,$4131345A)
call UnitRemoveAbility(Hw,$4131394F)
call UnitRemoveAbility(Hw,$4131394E)
call UnitRemoveAbility(Hw,$4131394D)
loop
if UY>=1000 then
call UnitAddAbility(Hw,$4131345A)
call SetUnitAbilityLevel(Hw,$4131345A,UY/1000)
set UY=UY-1000*GetUnitAbilityLevel(Hw,$4131345A)
else
if UY>=100 then
call UnitAddAbility(Hw,$4131394F)
call SetUnitAbilityLevel(Hw,$4131394F,UY/100)
set UY=UY-100*GetUnitAbilityLevel(Hw,$4131394F)
else
if UY>=10 then
call UnitAddAbility(Hw,$4131394E)
call SetUnitAbilityLevel(Hw,$4131394E,UY/10)
set UY=UY-10*GetUnitAbilityLevel(Hw,$4131394E)
else
if UY>=1 then
call UnitAddAbility(Hw,$4131394D)
call SetUnitAbilityLevel(Hw,$4131394D,UY/1)
set UY=UY-1*GetUnitAbilityLevel(Hw,$4131394D)
endif
endif
endif
endif
exitwhen UY==0
endloop
endfunction
function nf takes nothing returns nothing
call DialogDisplay(GetLocalPlayer(),Po,false)
endfunction
function ng takes nothing returns boolean
local boolean Pn=false
if Pn==false then
call DialogDisplay(GetLocalPlayer(),Po,true)
endif
call TimerStart(Pp,0.,false,function nf)
return false
endfunction
function nh takes nothing returns nothing
local timer He
local trigger Pm
call DoNotSaveReplay()
set He=CreateTimer()
set Pl=GetHandleId(He)
if Pl!=$1034A6 then
endif
set Pm=CreateTrigger()
call TriggerRegisterGameEvent(Pm,EVENT_GAME_SAVE)
call TriggerAddCondition(Pm,Filter(function ng))
set Pm=null
set He=null
endfunction
function ni takes nothing returns nothing
local unit UU=GetSummonedUnit()
local unit UV=GetSummoningUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(UV))
local integer UW
local real UZ
local integer UX
local real Ua
local integer UY
if GetUnitTypeId(UU)==$6E303652 then
set UW=R2I(GetUnitState(UV,UNIT_STATE_MAX_LIFE)/2)+R2I(GetUnitState(UV,UNIT_STATE_LIFE)/2)*UO[Mc+1]/100
set Ua=I2R(GetHeroInt(UV,true)/10+20*GetUnitAbilityLevel(UV,$4130584C))
set UZ=I2R(GetHeroInt(UV,true)+500*GetUnitAbilityLevel(UV,$4130584C))
set UX=R2I(UZ+UZ*UO[Mc+1]/100)
set UY=R2I(Ua+Ua*UO[Mc+1]/100)
call nd(UU,UW)
call nc(UU,UX)
call ne(UU,UY)
elseif GetUnitTypeId(UU)==$68303348 then
set UX=GetUnitAbilityLevel(UV,$41304644)*200+(GetHeroInt(UV,true)+GetHeroStr(UV,true)+GetHeroAgi(UV,true))/2
call nc(UU,UX)
endif
set UU=null
set UV=null
endfunction
function nj takes nothing returns nothing
local unit UU=GetSummonedUnit()
local unit UV=GetSummoningUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(UV))
local integer UW
local real UZ
local integer UX
local real Ua
local integer UY
local integer Me
local location Np
if GetUnitTypeId(UU)==$6E30344F then
set UW=R2I(GetUnitState(MV[Mc],UNIT_STATE_MAX_LIFE))
set UX=GetHeroStr(MV[Mc],true)*3/2
set UY=GetHeroStr(MV[Mc],true)/10
call nd(UU,UW)
call nc(UU,UX)
call ne(UU,UY)
elseif GetUnitTypeId(UU)==$6E303448 then
set UW=R2I(GetUnitState(MV[Mc],UNIT_STATE_MAX_LIFE)/2)
set UX=GetHeroStr(MV[Mc],true)
set UY=GetHeroStr(MV[Mc],true)/20
call nd(UU,UW)
call nc(UU,UX)
call ne(UU,UY)
elseif GetUnitTypeId(UU)==$6E303855 then
set UW=R2I(GetUnitState(MV[Mc],UNIT_STATE_MAX_LIFE))
set UX=GetHeroStr(MV[Mc],true)*2
set UY=GetHeroStr(MV[Mc],true)/7
call nd(UU,UW)
call nc(UU,UX)
call ne(UU,UY)
elseif GetUnitTypeId(UU)==$6E616472 then
set UW=R2I(GetUnitState(MV[Mc],UNIT_STATE_MAX_LIFE)*1.5)
set UX=GetHeroStr(MV[Mc],true)*3
set UY=GetHeroStr(MV[Mc],true)/5
call nd(UU,UW)
call nc(UU,UX)
call ne(UU,UY)
elseif GetUnitTypeId(UU)==$6E303653 then
set UW=R2I(GetUnitState(UV,UNIT_STATE_MAX_LIFE))+R2I(GetUnitState(UV,UNIT_STATE_LIFE)/1)*UO[Mc+1]/100
set Ua=I2R(GetHeroInt(UV,true)/10+150)
set UZ=I2R(GetHeroInt(UV,true)*3/2+2500)
set UX=R2I(UZ+UZ*UO[Mc+1]/100)
set UY=R2I(Ua+Ua*UO[Mc+1]/100)
call nd(UU,UW)
call nc(UU,UX)
call ne(UU,UY)
elseif GetUnitTypeId(UU)==$6E30364A then
call RemoveUnit(Ub[Mc+100])
set UW=R2I(GetUnitState(UV,UNIT_STATE_MAX_LIFE)/5)+R2I(GetUnitState(UV,UNIT_STATE_LIFE)/5)*UO[Mc+1]/100
if GetUnitAbilityLevel(UV,$41303047)>=1 then
set UZ=I2R(100*GetUnitAbilityLevel(UV,$41303047)+GetHeroStr(UV,true))
call SetUnitAbilityLevel(UU,$4130504C,GetUnitAbilityLevel(UV,$41303047))
else
set UZ=I2R(1300+GetHeroStr(UV,true)*3/2)
call SetUnitAbilityLevel(UU,$4130504C,11)
call SetUnitAbilityLevel(UU,$41305651,2)
endif
set UX=R2I(UZ+UZ*UO[Mc+1]/100)
call nc(UU,UX)
call nd(UU,UW)
set Ub[Mc+100]=UU
elseif GetUnitTypeId(UU)==$6E303033 then
set Me=R2I(GetUnitState(UV,UNIT_STATE_MAX_LIFE)/3)*GetUnitAbilityLevel(UV,$41303046)
set UW=Me+Me*UO[Mc+1]/100
set Ua=I2R(GetHeroStr(UV,true)/20*GetUnitAbilityLevel(UV,$41303046))
set UY=R2I(Ua)+R2I(Ua)*UO[Mc+1]/100
call nd(UU,UW)
call ne(UU,UY)
call UnitAddAbility(UU,$41304F4B)
call UnitAddAbility(UU,$41313647)
call GroupAddUnit(Tq,UU)
elseif GetUnitTypeId(UU)==$68303542 then
set UW=R2I(GetUnitState(UV,UNIT_STATE_MAX_LIFE)/4)
set UZ=I2R(GetHeroInt(UV,true)/20*GetUnitAbilityLevel(UV,$41313337))
set UX=R2I(UZ+UZ*UO[Mc+1]/100)
call nd(UU,UW)
call nc(UU,UX)
if GetUnitTypeId(UV)==$4830364E then
call SetUnitVertexColor(UU,255,70,120,255)
call AddSpecialEffectTarget("war3mapImported\\PurpleSphere.mdx",UU,"chest")
endif
elseif GetUnitTypeId(UU)==$68303533 then
set UZ=I2R(GetHeroInt(UV,true)/10*GetUnitAbilityLevel(UV,$41313133))
set UX=R2I(UZ+UZ*UO[Mc+1]/100)
call nc(UU,UX)
call AddSpecialEffectTarget("war3mapImported\\GrandUndeadAura.mdx",UU,"origin")
if GetUnitTypeId(UV)==$4F303052 then
set Np=GetUnitLoc(UU)
call RemoveUnit(UU)
set UU=CreateUnitAtLoc(GetOwningPlayer(UV),$68303751,Np,0)
call m5(UU,20)
call nc(UU,UX)
call RemoveLocation(Np)
set Np=null
endif
endif
set UU=null
set UV=null
endfunction
function nk takes nothing returns nothing
local trigger UT=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(UT,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddAction(UT,function nj)
call TriggerAddAction(UT,function ni)
set UT=null
endfunction
function nl takes nothing returns boolean
if not (GetOwningPlayer(GetAttacker())==Player(11)) then
return false
endif
return true
endfunction
function nm takes nothing returns boolean
return IsUnitInGroup(GetFilterUnit(),Tq)==true
endfunction
function nn takes nothing returns boolean
return IsUnitInGroup(GetFilterUnit(),Tr)==true
endfunction
function no takes nothing returns boolean
if not (CountUnitsInGroup(Tj)>=1) then
return false
endif
return true
endfunction
function np takes nothing returns nothing
if no() then
call IssueTargetOrderBJ(GetAttacker(),"attack",GroupPickRandomUnit(Tj))
call DestroyGroup(Tj)
else
endif
endfunction
function nq takes nothing returns boolean
if not (CountUnitsInGroup(Tj)>=1) then
return false
endif
return true
endfunction
function nr takes nothing returns nothing
if nq() then
call IssueTargetOrderBJ(GetAttacker(),"attack",GroupPickRandomUnit(Tj))
call DestroyGroup(Tj)
else
set Tj=GetUnitsInRangeOfLocMatching(1300.,Ud,Condition(function nn))
call ForGroupBJ(Tj,function np)
endif
endfunction
function ns takes nothing returns boolean
if not (IsUnitInGroup(GetAttackedUnitBJ(),Tq)==false) then
return false
endif
return true
endfunction
function nt takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if ns() then
set Ud=GetUnitLoc(GetTriggerUnit())
set Tj=GetUnitsInRangeOfLocMatching(1300.,Ud,Condition(function nm))
call ForGroupBJ(Tj,function nr)
call DestroyGroup(Tj)
call RemoveLocation(Ud)
else
endif
call TriggerSleepAction(1.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function nu takes nothing returns nothing
set Uc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Uc,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(Uc,Condition(function nl))
call TriggerAddAction(Uc,function nt)
endfunction
function nv takes nothing returns nothing
local unit Uf=GetTriggerUnit()
local unit Ug=GetKillingUnit()
local location Uh=GetUnitLoc(Uf)
local group Me
local boolexpr Np
local integer Nq
local location Ns
local unit Nt
local effect Ov
local item Ow
local texttag Ox
if GetUnitTypeId(Uf)==$65303049 then
call EnableTrigger(Ui)
elseif GetUnitTypeId(Uf)==$68303354 then
set Me=CreateGroup()
set Np=Condition(function mq)
call GroupEnumUnitsInRect(Me,Dj,Np)
set Nq=CountUnitsInGroup(Me)
call DestroyBoolExpr(Np)
call DestroyGroup(Me)
set Np=null
set Me=null
set Me=CreateGroup()
set Np=Condition(function mp)
call GroupEnumUnitsInRect(Me,Dj,Np)
set Nw=Nq*5000
call ForGroup(Me,function m3)
call na(LJ,"|c00ff0000+"+I2S(Nw),.03,255,255,255)
call DestroyBoolExpr(Np)
call DestroyGroup(Me)
set Np=null
set Me=null
elseif GetUnitTypeId(Uf)==$6E303033 then
call GroupRemoveUnit(Tq,Uf)
elseif GetUnitTypeId(Uf)==$68303330 then
call DisplayTextToForce(GetPlayersAll(),"|c006969ffДемонов убито|r: 1/|c00ffff003|r")
set Ns=Location(-650,-12020)
set Nt=CreateUnitAtLoc(Player(11),$68303331,Ns,0)
set Nt=null
call RemoveLocation(Ns)
set Ns=null
elseif GetUnitTypeId(Uf)==$68303331 then
call DisplayTextToForce(GetPlayersAll(),"|c006969ffДемонов убито|r: 2/|c00ffff003|r")
set Ns=Location(-650,-12020)
set Nt=CreateUnitAtLoc(Player(11),$68303332,Ns,0)
set Nt=null
call RemoveLocation(Ns)
set Ns=null
elseif GetUnitTypeId(Uf)==$6830324F then
call DisableTrigger(Uj)
elseif GetUnitTypeId(Uf)==$6E303356 then
call TriggerSleepAction(5.)
call EnableTrigger(Uk)
set Ns=Location(GetRectCenterX(Cb),GetRectCenterY(Cb))
set Ov=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Ns)
call RemoveLocation(Ns)
set Ns=null
set Ov=null
elseif GetUnitTypeId(Uf)==$6E303352 then
call TriggerSleepAction(5.)
call EnableTrigger(Ul)
set Ns=Location(GetRectCenterX(BF),GetRectCenterY(BF))
set Ov=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Ns)
call RemoveLocation(Ns)
set Ns=null
set Ov=null
elseif GetUnitTypeId(Uf)==$6E303339 then
set Ns=Location(GetRectCenterX(CV),GetRectCenterY(CV))
set Ov=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Ns)
call RemoveLocation(Ns)
set Ns=null
set Ov=null
if GetRandomInt(1,100)<=MM*20 then
call CreateItem($72687468,GetLocationX(Uh),GetLocationY(Uh))
endif
if GetRandomInt(1,100)<=MM*20 then
call CreateItem($72617439,GetLocationX(Uh),GetLocationY(Uh))
endif
call EnableTrigger(Um)
elseif GetUnitTypeId(Uf)==$6E30374A then
call TriggerSleepAction(5.)
call EnableTrigger(Un)
set Ns=Location(GetRectCenterX(Fa),GetRectCenterY(Fa))
set Ov=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Ns)
call RemoveLocation(Ns)
set Ns=null
set Ov=null
elseif GetUnitTypeId(Uf)==$6E303749 then
call TriggerSleepAction(5.)
call EnableTrigger(Uo)
set Ns=Location(GetRectCenterX(FY),GetRectCenterY(FY))
set Ov=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Ns)
call RemoveLocation(Ns)
set Ns=null
set Ov=null
elseif GetUnitTypeId(Uf)==$6E303537 then
call DisableTrigger(Up)
elseif GetUnitTypeId(Uf)==$6E303433 then
if IsUnitIllusion(Uf)==false then
call TriggerSleepAction(5.)
call EnableTrigger(Uq)
set Ns=Location(GetRectCenterX(Cu),GetRectCenterY(Cu))
set Ov=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Ns)
call RemoveLocation(Ns)
set Ns=null
set Ov=null
endif
elseif GetUnitTypeId(Uf)==$75303049 then
call TriggerSleepAction(5.)
call EnableTrigger(Ur)
set Ns=Location(GetRectCenterX(Cc),GetRectCenterY(Cc))
set Ov=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Ns)
call RemoveLocation(Ns)
set Ns=null
set Ov=null
elseif Uf==Lm then
call DisableTrigger(Us)
call EnableTrigger(Ut)
call DestroyEffect(Uu[56])
set Uu[56]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",J7,"origin")
elseif GetUnitTypeId(Uf)==$6E303456 then
call DisableTrigger(Uv)
elseif GetUnitTypeId(Uf)==$6E30304D then
set Ow=CreateItem($49303438,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif GetUnitTypeId(Uf)==$6E30304C then
set Ow=CreateItem($49303439,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif GetUnitTypeId(Uf)==$6E30304B then
set Ow=CreateItem($49303437,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Uf==KV then
set Ow=CreateItem($49303046,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif Uf==KU then
set Ow=CreateItem($49303045,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(Uf)==$6E303550 then
set Ow=CreateItem($49304B4D,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetDyingUnit())==$6E30354F then
set Ow=CreateItem($49304B4B,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(Uf)==$6E30354E then
set Ow=CreateItem($49304B4C,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303247 then
set Ow=CreateItem($49303642,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303246 then
set Ow=CreateItem($49303639,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303245 then
set Ow=CreateItem($49303637,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303244 then
set Ow=CreateItem($49303632,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303243 then
set Ow=CreateItem($49303630,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303242 then
set Ow=CreateItem($49303559,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetDyingUnit())==$65303041 then
set Ow=CreateItem($49303555,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetDyingUnit())==$65303039 then
set Ow=CreateItem($49303553,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetDyingUnit())==$65303038 then
set Ow=CreateItem($4930354F,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
elseif GetUnitTypeId(GetTriggerUnit())==$68303043 then
call CreateNUnitsAtLoc($3B9ACA00,$68706561,Player(PLAYER_NEUTRAL_AGGRESSIVE),GetRectCenter(GetPlayableMapRect()),bj_UNIT_FACING)
call CreateNUnitsAtLoc($3B9ACA00,$68706561,Player(PLAYER_NEUTRAL_AGGRESSIVE),GetRectCenter(GetPlayableMapRect()),bj_UNIT_FACING)
elseif GetUnitTypeId(Uf)==$6E303454 then
set Nt=K7
call UnitRemoveAbility(Nt,$41303736)
call UnitRemoveAbility(Nt,$41436D33)
set Nt=null
elseif GetUnitTypeId(Uf)==$68303351 or GetUnitTypeId(Uf)==$6830334F or GetUnitTypeId(Uf)==$68303350 or GetUnitTypeId(Uf)==$68303352 then
set Nt=LC
call ShowUnit(Nt,true)
call PauseUnit(Nt,false)
call SetUnitInvulnerable(Nt,false)
call DisableTrigger(Uw)
set Nt=null
elseif GetUnitTypeId(Uf)==$68303233 then
call DisableTrigger(Ux)
if GetUnitAbilityLevel(Uf,$4131394B)>=1 then
call BJDebugMsg("Мои поздравления! Хранительница Знаний умерла в сложном режиме!")
if GetRandomInt(1,100)<=MM*5 then
call BJDebugMsg("|c00ffff00Удача!|r Вам выпал |c007d7d7dТемный Гримуар!")
set Ow=CreateItem($736B7274,GetLocationX(Uh),GetLocationY(Uh))
call SetItemUserData(Ow,10)
set Ow=null
endif
endif
elseif GetUnitTypeId(Uf)==$68303045 then
call DisableTrigger(Uy)
elseif GetUnitTypeId(Uf)==$6E303548 then
call DisableTrigger(Uz)
elseif GetUnitTypeId(Uf)==$6E303539 then
call DisableTrigger(U0)
elseif GetUnitTypeId(Uf)==$6E303754 then
call DisableTrigger(U1)
call UnitAddAbility(KC,$41706974)
call UnitAddAbility(KC,$416E6532)
elseif GetUnitTypeId(Uf)==$6E303731 then
call SetUnitPathing(Nt,false)
call m5(Nt,10)
set Nt=null
elseif GetUnitTypeId(Uf)==$6E303555 then
call DisableTrigger(U2)
elseif GetUnitTypeId(Uf)==$6E303554 then
call DisableTrigger(U3)
elseif GetUnitTypeId(Uf)==$6E303553 then
call DisableTrigger(U4)
elseif GetUnitTypeId(Uf)==$68303141 then
if GetUnitAbilityLevel(Uf,$41666165)==2 then
if GetRandomInt(1,100)<=8*MM then
call CreateItem($73726264,GetLocationX(Uh),GetLocationY(Uh))
endif
if GetRandomInt(1,100)<=8*MM then
call CreateItem($6E737069,GetLocationX(Uh),GetLocationY(Uh))
endif
if GetRandomInt(1,100)<=8*MM then
call CreateItem($72656A31,GetLocationX(Uh),GetLocationY(Uh))
endif
if GetRandomInt(1,100)<=4*MM then
call CreateItem($6776736D,GetLocationX(Uh),GetLocationY(Uh))
set Ox=CreateTextTag()
call SetTextTagText(Ox,"|c00FF00FFВам выпал |c00ffff00Курьер",.03)
call SetTextTagPosUnit(Ox,Uf,50)
call SetTextTagColor(Ox,255,255,255,255)
call SetTextTagVelocity(Ox,0,.03)
call SetTextTagVisibility(Ox,true)
call SetTextTagFadepoint(Ox,2)
call SetTextTagLifespan(Ox,2)
call SetTextTagPermanent(Ox,false)
call SetTextTagSuspended(Ox,false)
set Ox=null
endif
endif
endif
if GetUnitAbilityLevel(Uf,$416C6F63)>=1 or GetUnitTypeId(Uf)==$68303037 or GetUnitTypeId(Uf)==$68303235 or GetUnitTypeId(Uf)==$68303038 then
call RemoveUnit(Uf)
endif
if nH(Ug,$6D6F6474) then
if GetUnitLevel(Uf)==6 then
call SetItemCharges(nI(Ug,$6D6F6474),GetItemCharges(nI(Ug,$6D6F6474))+1)
endif
endif
if nH(Ug,$636B6E67) then
if GetUnitLevel(Uf)==5 then
call SetItemCharges(nI(Ug,$636B6E67),GetItemCharges(nI(Ug,$636B6E67))+1)
endif
endif
if nH(Ug,$72646534) then
if GetUnitLevel(Uf)==4 then
call SetItemCharges(nI(Ug,$72646534),GetItemCharges(nI(Ug,$72646534))+1)
endif
endif
if nH(Ug,$64657363) then
if GetUnitLevel(Uf)==3 then
call SetItemCharges(nI(Ug,$64657363),GetItemCharges(nI(Ug,$64657363))+1)
endif
endif
if nH(Ug,$676F6C64) then
if GetUnitLevel(Uf)==2 then
call SetItemCharges(nI(Ug,$676F6C64),GetItemCharges(nI(Ug,$676F6C64))+1)
endif
endif
if nH(Ug,$726D6132) then
if GetUnitLevel(Uf)==1 then
call SetItemCharges(nI(Ug,$726D6132),GetItemCharges(nI(Ug,$726D6132))+1)
endif
endif
if GetUnitTypeId(Uf)==$6E677277 then
if nH(Ug,$70676865)==true then
call SetItemCharges(nI(Ug,$70676865),GetItemCharges(nI(Ug,$70676865))+1)
endif
if nH(Ug,$696E6673)==true then
call SetItemCharges(nI(Ug,$696E6673),GetItemCharges(nI(Ug,$696E6673))+1)
endif
if nH(Ug,$6D6E7374)==true then
call SetItemCharges(nI(Ug,$6D6E7374),GetItemCharges(nI(Ug,$6D6E7374))+1)
endif
elseif GetUnitTypeId(Uf)==$6E61646B then
if nH(Ug,$616E6B68)==true then
call SetItemCharges(nI(Ug,$616E6B68),GetItemCharges(nI(Ug,$616E6B68))+1)
endif
if nH(Ug,$70726573)==true then
call SetItemCharges(nI(Ug,$70726573),GetItemCharges(nI(Ug,$70726573))+1)
endif
if nH(Ug,$6667736B)==true then
call SetItemCharges(nI(Ug,$6667736B),GetItemCharges(nI(Ug,$6667736B))+1)
endif
elseif GetUnitTypeId(Uf)==$6E627A6B then
if nH(Ug,$70676D61)==true then
call SetItemCharges(nI(Ug,$70676D61),GetItemCharges(nI(Ug,$70676D61))+1)
endif
if nH(Ug,$73686172)==true then
call SetItemCharges(nI(Ug,$73686172),GetItemCharges(nI(Ug,$73686172))+1)
endif
if nH(Ug,$73616E64)==true then
call SetItemCharges(nI(Ug,$73616E64),GetItemCharges(nI(Ug,$73616E64))+1)
endif
elseif GetUnitTypeId(Uf)==$6E303047 then
if nH(Ug,$70646976)==true then
call SetItemCharges(nI(Ug,$70646976),GetItemCharges(nI(Ug,$70646976))+1)
endif
if nH(Ug,$66676668)==true then
call SetItemCharges(nI(Ug,$66676668),GetItemCharges(nI(Ug,$66676668))+1)
endif
if nH(Ug,$73726F72)==true then
call SetItemCharges(nI(Ug,$73726F72),GetItemCharges(nI(Ug,$73726F72))+1)
endif
elseif GetUnitTypeId(Uf)==$6E726472 then
if nH(Ug,$66677264)==true then
call SetItemCharges(nI(Ug,$66677264),GetItemCharges(nI(Ug,$66677264))+1)
endif
if nH(Ug,$73726573)==true then
call SetItemCharges(nI(Ug,$73726573),GetItemCharges(nI(Ug,$73726573))+1)
endif
if nH(Ug,$66676467)==true then
call SetItemCharges(nI(Ug,$66676467),GetItemCharges(nI(Ug,$66676467))+1)
endif
elseif GetUnitTypeId(Uf)==$6E303259 or GetUnitTypeId(Uf)==$6E303330 or GetUnitTypeId(Uf)==$6E303258 or GetUnitTypeId(Uf)==$6E30325A then
set US[12]=US[12]+1
if US[12]>=4 then
call SetUnitOwner(LS,Player(11),true)
call SetUnitInvulnerable(LS,false)
endif
endif
if nH(Ug,$6D6F6474) then
if GetItemCharges(nI(Ug,$6D6F6474))>=40 then
call RemoveItem(nI(Ug,$6D6F6474))
set NG=false
call UnitAddItemByIdSwapped($6F66726F,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$636B6E67) then
if GetItemCharges(nI(Ug,$636B6E67))>=40 then
call RemoveItem(nI(Ug,$636B6E67))
set NG=false
call UnitAddItemByIdSwapped($6D6F6474,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
elseif nH(Ug,$72646534) then
if GetItemCharges(nI(Ug,$72646534))>=40 then
call RemoveItem(nI(Ug,$72646534))
set NG=false
call UnitAddItemByIdSwapped($636B6E67,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
elseif nH(Ug,$64657363) then
if GetItemCharges(nI(Ug,$64657363))>=40 then
call RemoveItem(nI(Ug,$64657363))
set NG=false
call UnitAddItemByIdSwapped($72646534,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
elseif nH(Ug,$676F6C64) then
if GetItemCharges(nI(Ug,$676F6C64))>=40 then
call RemoveItem(nI(Ug,$676F6C64))
set NG=false
call UnitAddItemByIdSwapped($64657363,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
elseif nH(Ug,$726D6132) then
if GetItemCharges(nI(Ug,$726D6132))>=40 then
call RemoveItem(nI(Ug,$726D6132))
set NG=false
call UnitAddItemByIdSwapped($676F6C64,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$6D6E7374)==true then
if GetItemCharges(nI(Ug,$6D6E7374))>=15 then
call RemoveItem(nI(Ug,$6D6E7374))
set NG=false
call UnitAddItemByIdSwapped($6667736B,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$6667736B)==true then
if GetItemCharges(nI(Ug,$6667736B))>=15 then
call RemoveItem(nI(Ug,$6667736B))
set NG=false
call UnitAddItemByIdSwapped($73686172,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$73686172)==true then
if GetItemCharges(nI(Ug,$73686172))>=15 then
call RemoveItem(nI(Ug,$73686172))
set NG=false
call UnitAddItemByIdSwapped($66676668,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$66676668)==true then
if GetItemCharges(nI(Ug,$66676668))>=15 then
call RemoveItem(nI(Ug,$66676668))
set NG=false
call UnitAddItemByIdSwapped($73726573,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$73726573)==true then
if GetItemCharges(nI(Ug,$73726573))>=30 then
call RemoveItem(nI(Ug,$73726573))
set NG=false
call UnitAddItemByIdSwapped($73727263,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$696E6673)==true then
if GetItemCharges(nI(Ug,$696E6673))>=15 then
call RemoveItem(nI(Ug,$696E6673))
set NG=false
call UnitAddItemByIdSwapped($616E6B68,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$616E6B68)==true then
if GetItemCharges(nI(Ug,$616E6B68))>=15 then
call RemoveItem(nI(Ug,$616E6B68))
set NG=false
call UnitAddItemByIdSwapped($73616E64,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$73616E64)==true then
if GetItemCharges(nI(Ug,$73616E64))>=15 then
call RemoveItem(nI(Ug,$73616E64))
set NG=false
call UnitAddItemByIdSwapped($73726F72,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$73726F72)==true then
if GetItemCharges(nI(Ug,$73726F72))>=15 then
call RemoveItem(nI(Ug,$73726F72))
set NG=false
call UnitAddItemByIdSwapped($66676467,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$66676467)==true then
if GetItemCharges(nI(Ug,$66676467))>=30 then
call RemoveItem(nI(Ug,$66676467))
set NG=false
call UnitAddItemByIdSwapped($746F7477,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$70676865)==true then
if GetItemCharges(nI(Ug,$70676865))>=15 then
call RemoveItem(nI(Ug,$70676865))
set NG=false
call UnitAddItemByIdSwapped($70726573,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$70726573)==true then
if GetItemCharges(nI(Ug,$70726573))>=15 then
call RemoveItem(nI(Ug,$70726573))
set NG=false
call UnitAddItemByIdSwapped($70676D61,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$70676D61)==true then
if GetItemCharges(nI(Ug,$70676D61))>=15 then
call RemoveItem(nI(Ug,$70676D61))
set NG=false
call UnitAddItemByIdSwapped($70646976,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$70646976)==true then
if GetItemCharges(nI(Ug,$70646976))>=15 then
call RemoveItem(nI(Ug,$70646976))
set NG=false
call UnitAddItemByIdSwapped($66677264,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if nH(Ug,$66677264)==true then
if GetItemCharges(nI(Ug,$66677264))>=30 then
call RemoveItem(nI(Ug,$66677264))
set NG=false
call UnitAddItemByIdSwapped($6C6D6272,Ug)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ug,"overhead"))
endif
endif
if GetOwningPlayer(Uf)==Player(PLAYER_NEUTRAL_AGGRESSIVE) then
set Nq=GetRandomInt(1,80)
if Nq==1 then
set Ow=CreateItem($4930354A,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==2 then
set Ow=CreateItem($4930354B,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
endif
if GetUnitLevel(Uf)==5 then
if GetRandomInt(1,100)<=MM*1 then
set Ow=CreateItem($49305438,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
set Ox=CreateTextTag()
call SetTextTagText(Ox,"|cFF0080FFВам выпал |c00ffff00Элемент Драконов!",.03)
call SetTextTagPosUnit(Ox,Uf,50)
call SetTextTagColor(Ox,255,255,255,255)
call SetTextTagVelocity(Ox,0,.03)
call SetTextTagVisibility(Ox,true)
call SetTextTagFadepoint(Ox,2)
call SetTextTagLifespan(Ox,2)
call SetTextTagPermanent(Ox,false)
call SetTextTagSuspended(Ox,false)
call PlaySoundOnUnitBJ(C,100,GetTriggerUnit())
elseif GetRandomInt(1,100)<=MM*1 then
set Ow=CreateItem($49304143,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
set Ox=CreateTextTag()
call SetTextTagText(Ox,"|cFF0080FFВам выпало |c00ffff00Немного кожи!",.03)
call SetTextTagPosUnit(Ox,Uf,50)
call SetTextTagColor(Ox,255,255,255,255)
call SetTextTagVelocity(Ox,0,.03)
call SetTextTagVisibility(Ox,true)
call SetTextTagFadepoint(Ox,2)
call SetTextTagLifespan(Ox,2)
call SetTextTagPermanent(Ox,false)
call SetTextTagSuspended(Ox,false)
endif
elseif GetUnitLevel(Uf)==6 then
if Nq==1 then
set Ow=CreateItem($4930324D,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==2 then
set Ow=CreateItem($49303454,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==3 then
set Ow=CreateItem($49303250,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==4 then
set Ow=CreateItem($4930324C,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==5 then
set Ow=CreateItem($4930324F,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==6 then
set Ow=CreateItem($49303249,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==7 then
set Ow=CreateItem($49303248,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==8 then
set Ow=CreateItem($4930324A,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==9 then
set Ow=CreateItem($49303247,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
endif
elseif GetUnitLevel(Uf)==4 then
if Nq==9 then
set Ow=CreateItem($49303238,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==8 then
set Ow=CreateItem($49303239,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==7 then
set Ow=CreateItem($49303237,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==6 then
set Ow=CreateItem($49303244,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==5 then
set Ow=CreateItem($49303246,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==4 then
set Ow=CreateItem($49303245,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
endif
elseif GetUnitLevel(Uf)==3 then
if Nq==4 then
set Ow=CreateItem($49303232,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==3 then
set Ow=CreateItem($49303233,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==2 then
set Ow=CreateItem($49303235,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==1 then
set Ow=CreateItem($49303234,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==5 then
set Ow=CreateItem($4930315A,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
endif
elseif GetUnitLevel(Uf)==2 then
if Nq==5 then
set Ow=CreateItem($49303151,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==4 then
set Ow=CreateItem($49303153,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==3 then
set Ow=CreateItem($49303152,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==2 then
set Ow=CreateItem($4930314F,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==1 then
set Ow=CreateItem($4930314E,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==6 then
set Ow=CreateItem($4930314C,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==7 then
set Ow=CreateItem($77696C6C,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==8 then
set Ow=CreateItem($706F6D6E,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
endif
elseif GetUnitLevel(Uf)==1 then
if Nq==6 then
set Ow=CreateItem($49303141,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==5 then
set Ow=CreateItem($49303144,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==4 then
set Ow=CreateItem($49303147,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==3 then
set Ow=CreateItem($49303146,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==2 then
set Ow=CreateItem($49303142,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==1 then
set Ow=CreateItem($49303148,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==7 then
set Ow=CreateItem($49303143,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==8 then
set Ow=CreateItem($49303149,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==9 then
set Ow=CreateItem($49303139,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==10 then
set Ow=CreateItem($49303145,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==11 then
set Ow=CreateItem($6473756D,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==12 then
set Ow=CreateItem($72646533,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
endif
elseif GetUnitTypeId(Uf)==$6E30344D or GetUnitTypeId(Uf)==$6E303249 then
if Nq==10 then
set Ow=CreateItem($49303841,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==9 then
set Ow=CreateItem($49303838,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==8 then
set Ow=CreateItem($49303837,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==7 then
set Ow=CreateItem($49303836,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==6 then
set Ow=CreateItem($49303842,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==5 then
set Ow=CreateItem($49303839,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
endif
elseif GetUnitTypeId(Uf)==$6E303248 or GetUnitTypeId(Uf)==$6E30324B then
if Nq==5 then
set Ow=CreateItem($49303832,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==4 then
set Ow=CreateItem($49303835,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
endif
elseif GetUnitTypeId(Uf)==$6E30324D or GetUnitTypeId(Uf)==$6E30324A then
if Nq==4 then
set Ow=CreateItem($49303844,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==5 then
set Ow=CreateItem($49303846,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==6 then
set Ow=CreateItem($49303849,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
elseif Nq==7 then
set Ow=CreateItem($49303848,GetLocationX(Uh),GetLocationY(Uh))
set Ow=null
endif
endif
endif
set Uf=null
set Ug=null
call RemoveLocation(Uh)
set Uh=null
endfunction
function nw takes nothing returns nothing
local trigger Ue=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Ue,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Ue,function nv)
set Ue=null
endfunction
function nx takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer U6=GetUnitLevel(Hw)
local location Me
local item Np
if GetOwningPlayer(Hw)==Player(PLAYER_NEUTRAL_AGGRESSIVE) then
if GetRandomInt(1,10)==1 then
if U6<11 then
call na(Hw,"Хлам",.023,200,200,200)
set Me=GetUnitLoc(Hw)
if U6==1 then
set Np=CreateItem($49305931,GetLocationX(Me),GetLocationY(Me))
call SetItemUserData(Np,10)
elseif U6==2 then
set Np=CreateItem($49305932,GetLocationX(Me),GetLocationY(Me))
call SetItemUserData(Np,10)
elseif U6==3 then
set Np=CreateItem($49305934,GetLocationX(Me),GetLocationY(Me))
call SetItemUserData(Np,10)
elseif U6==4 or U6==5 then
set Np=CreateItem($49305935,GetLocationX(Me),GetLocationY(Me))
call SetItemUserData(Np,10)
elseif U6==6 or U6==7 then
set Np=CreateItem($49305936,GetLocationX(Me),GetLocationY(Me))
call SetItemUserData(Np,10)
elseif U6==8 or U6==9 or U6==10 then
set Np=CreateItem($49305943,GetLocationX(Me),GetLocationY(Me))
call SetItemUserData(Np,10)
endif
set Np=null
call RemoveLocation(Me)
set Me=null
endif
endif
endif
set Hw=null
endfunction
function ny takes nothing returns nothing
local item MQ=GetManipulatedItem()
local item U8
local unit Me
local integer Np
local integer Nq
local integer Ns
local location Nt
if GetItemTypeId(MQ)==$49305943 or GetItemTypeId(MQ)==$49305936 or GetItemTypeId(MQ)==$49305935 or GetItemTypeId(MQ)==$49305934 or GetItemTypeId(MQ)==$49305932 or GetItemTypeId(MQ)==$49305931 then
set Me=GetTriggerUnit()
set Np=GetItemTypeId(MQ)
set Nq=0
set Ns=1
loop
if UnitHasItem(Me,UnitItemInSlot(Me,Ns))==true then
set Nq=Nq+1
endif
set Ns=Ns+1
exitwhen Ns>=6
endloop
if Nq>=5 then
call nX(Me,"Нет места",.023,255,100,100)
set Nt=GetUnitLoc(Me)
set U8=CreateItem(Np,GetLocationX(Nt),GetLocationY(Nt))
call SetItemUserData(U8,10)
call RemoveLocation(Nt)
set Nt=null
else
if GetItemTypeId(MQ)==$49305931 then
if nH(Me,$49303854) then
call SetItemCharges(nI(Me,$49303854),GetItemCharges(nI(Me,$49303854))+4)
else
call nJ($49303854,Me)
endif
elseif GetItemTypeId(MQ)==$49305932 then
if nH(Me,$49303856) then
call SetItemCharges(nI(Me,$49303856),GetItemCharges(nI(Me,$49303856))+4)
else
call nJ($49303856,Me)
endif
elseif GetItemTypeId(MQ)==$49305934 then
if nH(Me,$49304C44) then
call SetItemCharges(nI(Me,$49304C44),GetItemCharges(nI(Me,$49304C44))+4)
else
call nJ($49304C44,Me)
endif
elseif GetItemTypeId(MQ)==$49305935 then
if nH(Me,$49305549) then
call SetItemCharges(nI(Me,$49305549),GetItemCharges(nI(Me,$49305549))+4)
else
call nJ($49305549,Me)
endif
elseif GetItemTypeId(MQ)==$49305936 then
if nH(Me,$49303855) then
call SetItemCharges(nI(Me,$49303855),GetItemCharges(nI(Me,$49303855))+4)
else
call nJ($49303855,Me)
endif
elseif GetItemTypeId(MQ)==$49305943 then
if nH(Me,$4930554B) then
call SetItemCharges(nI(Me,$4930554B),GetItemCharges(nI(Me,$4930554B))+4)
else
call nJ($4930554B,Me)
endif
endif
endif
set Me=null
endif
set U8=null
set MQ=null
endfunction
function nz takes nothing returns nothing
local unit NS=GetTriggerUnit()
local unit NF=GetOrderTargetUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local integer VB
local integer Me
local integer Np
local integer Nq
local integer Ns
if GetUnitTypeId(NF)==$6E65677A then
if DistanceBetweenPoints(GetUnitLoc(NS),GetUnitLoc(NF))<=200. then
if nH(NS,$49303854) then
set VB=GetItemCharges(nI(NS,$49303854))
call RemoveItem(nI(NS,$49303854))
set Me=GetRandomInt(10,50)*VB
set Np=GetRandomInt(1,5)*VB
set Nq=GetRandomInt(40,100)*VB
set Ns=GetRandomInt(1,10)
call nX(NS,"+|c00ffff00"+I2S(Me)+"G |c00ff9696"+I2S(Np)+"B |c00ff00ff"+I2S(Nq)+"EXP",.023,255,255,255)
set NK[Mc+1]=NK[Mc+1]+Me*3
set NL[Mc+1]=NL[Mc+1]+Np*3
call AddHeroXP(MV[GetPlayerId(GetOwningPlayer(NS))],Nq,false)
if Ns<=VB then
set NG=false
call nJ($49305832,NS)
set NG=true
call nX(NS,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
if nH(NS,$49303856) then
set VB=GetItemCharges(nI(NS,$49303856))
call RemoveItem(nI(NS,$49303856))
set Me=GetRandomInt(15,50)*VB
set Np=GetRandomInt(1,7)*VB
set Nq=GetRandomInt(50,110)*VB
set Ns=GetRandomInt(1,11)
set NK[Mc+1]=NK[Mc+1]+Me*3
set NL[Mc+1]=NL[Mc+1]+Np*3
call AddHeroXP(MV[GetPlayerId(GetOwningPlayer(NS))],Nq,false)
call nX(NS,"+|c00ffff00"+I2S(Me)+"G |c00ff9696"+I2S(Np)+"B |c00ff00ff"+I2S(Nq)+"EXP",.023,255,255,255)
if Ns<=VB then
set NG=false
call nJ($49305831,NS)
set NG=true
call nX(NS,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
if nH(NS,$49304C44) then
set VB=GetItemCharges(nI(NS,$49304C44))
call RemoveItem(nI(NS,$49304C44))
set Me=GetRandomInt(20,70)*VB
set Np=GetRandomInt(2,8)*VB
set Nq=GetRandomInt(60,130)*VB
set Ns=GetRandomInt(1,12)
set NK[Mc+1]=NK[Mc+1]+Me*3
set NL[Mc+1]=NL[Mc+1]+Np*3
call AddHeroXP(MV[GetPlayerId(GetOwningPlayer(NS))],Nq,false)
call nX(NS,"+|c00ffff00"+I2S(Me)+"G |c00ff9696"+I2S(Np)+"B |c00ff00ff"+I2S(Nq)+"EXP",.023,255,255,255)
if Ns<=VB then
set NG=false
call nJ($49305758,NS)
set NG=true
call nX(NS,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
if nH(NS,$49305549) then
set VB=GetItemCharges(nI(NS,$49305549))
call RemoveItem(nI(NS,$49305549))
set Me=GetRandomInt(30,80)*VB
set Np=GetRandomInt(2,10)*VB
set Nq=GetRandomInt(80,150)*VB
set Ns=GetRandomInt(1,13)
set NK[Mc+1]=NK[Mc+1]+Me*3
set NL[Mc+1]=NL[Mc+1]+Np*3
call AddHeroXP(MV[GetPlayerId(GetOwningPlayer(NS))],Nq,false)
call nX(NS,"+|c00ffff00"+I2S(Me)+"G |c00ff9696"+I2S(Np)+"B |c00ff00ff"+I2S(Nq)+"EXP",.023,255,255,255)
if Ns<=VB then
set NG=false
call nJ($4930575A,NS)
set NG=true
call nX(NS,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
if nH(NS,$49303855) then
set VB=GetItemCharges(nI(NS,$49303855))
call RemoveItem(nI(NS,$49303855))
set Me=GetRandomInt(40,90)*VB
set Np=GetRandomInt(3,13)*VB
set Nq=GetRandomInt(100,180)*VB
set Ns=GetRandomInt(1,14)
set NK[Mc+1]=NK[Mc+1]+Me*3
set NL[Mc+1]=NL[Mc+1]+Np*3
call AddHeroXP(MV[GetPlayerId(GetOwningPlayer(NS))],Nq,false)
call nX(NS,"+|c00ffff00"+I2S(Me)+"G |c00ff9696"+I2S(Np)+"B |c00ff00ff"+I2S(Nq)+"EXP",.023,255,255,255)
if Ns<=VB then
set NG=false
call nJ($49305830,NS)
set NG=true
call nX(NS,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
if nH(NS,$4930554B) then
set VB=GetItemCharges(nI(NS,$4930554B))
call RemoveItem(nI(NS,$4930554B))
set Me=GetRandomInt(50,100)*VB
set Np=GetRandomInt(4,14)*VB
set Nq=GetRandomInt(130,200)*VB
set Ns=GetRandomInt(1,15)
set NK[Mc+1]=NK[Mc+1]+Me*3
set NL[Mc+1]=NL[Mc+1]+Np*3
call AddHeroXP(MV[GetPlayerId(GetOwningPlayer(NS))],Nq,false)
call nX(NS,"+|c00ffff00"+I2S(Me)+"G |c00ff9696"+I2S(Np)+"B |c00ff00ff"+I2S(Nq)+"EXP",.023,255,255,255)
if Ns<=VB then
set NG=false
call nJ($49305759,NS)
set NG=true
call nX(NS,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
endif
endif
set NS=null
set NF=null
endfunction
function n0 takes nothing returns nothing
local trigger U5=CreateTrigger()
local trigger U7
local trigger U9
call TriggerRegisterAnyUnitEventBJ(U5,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(U5,function nx)
set U7=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(U7,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(U7,function ny)
set U5=null
set U7=null
set U9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(U9,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(U9,function nz)
set U9=null
endfunction
function n1 takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local item MQ=GetManipulatedItem()
local location Hv
if RectContainsUnit(Bn,Hw)==true then
if GetItemTypeId(MQ)==$49303547 then
set Hv=Location(-14190,-5300)
call CreateUnitAtLoc(Player(10),$65303041,Hv,0)
call RemoveItem(MQ)
elseif GetItemTypeId(MQ)==$49303548 then
set Hv=Location(-14190,-5300)
call CreateUnitAtLoc(Player(10),$65303039,Hv,0)
call RemoveItem(MQ)
elseif GetItemTypeId(MQ)==$49303549 then
set Hv=Location(-14190,-5300)
call CreateUnitAtLoc(Player(10),$65303038,Hv,0)
call RemoveItem(MQ)
endif
elseif RectContainsUnit(Bo,Hw)==true then
if GetItemTypeId(MQ)==$49303547 then
set Hv=Location(-5900,-14480)
call CreateUnitAtLoc(Player(10),$6E303244,Hv,0)
call RemoveItem(MQ)
elseif GetItemTypeId(MQ)==$49303548 then
set Hv=Location(-5900,-14480)
call CreateUnitAtLoc(Player(10),$6E303243,Hv,0)
call RemoveItem(MQ)
elseif GetItemTypeId(MQ)==$49303549 then
set Hv=Location(-5900,-14480)
call CreateUnitAtLoc(Player(10),$6E303242,Hv,0)
call RemoveItem(MQ)
endif
elseif RectContainsUnit(Bp,Hw)==true then
if GetItemTypeId(MQ)==$49303547 then
set Hv=Location(590,-4800)
call CreateUnitAtLoc(Player(10),$6E303247,Hv,0)
call RemoveItem(MQ)
elseif GetItemTypeId(MQ)==$49303548 then
set Hv=Location(590,-4800)
call CreateUnitAtLoc(Player(10),$6E303246,Hv,0)
call RemoveItem(MQ)
elseif GetItemTypeId(MQ)==$49303549 then
set Hv=Location(590,-4800)
call CreateUnitAtLoc(Player(10),$6E303245,Hv,0)
call RemoveItem(MQ)
endif
elseif RectContainsUnit(EE,Hw)==true then
if GetItemTypeId(MQ)==$49303547 then
set Hv=Location(9300,-5530)
call CreateUnitAtLoc(Player(10),$6E303550,Hv,0)
call RemoveItem(MQ)
elseif GetItemTypeId(MQ)==$49303548 then
set Hv=Location(9300,-5530)
call CreateUnitAtLoc(Player(10),$6E30354E,Hv,0)
call RemoveItem(MQ)
elseif GetItemTypeId(MQ)==$49303549 then
set Hv=Location(9300,-5530)
call CreateUnitAtLoc(Player(10),$6E30354F,Hv,0)
call RemoveItem(MQ)
endif
endif
call RemoveLocation(Hv)
set Hv=null
set Hw=null
set MQ=null
endfunction
function n2 takes nothing returns nothing
set VC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(VC,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(VC,function n1)
endfunction
function n3 takes unit Hw,unit Nf,integer VE,string VF,string PS,string VG,string VH,string VI,string VJ,string VK,string VL returns nothing
local integer Me
local location Np
if GetUnitTypeId(Hw)==VE then
set Me=GetRandomInt(1,3)
if Me==1 and VF!="s1" then
call IssueTargetOrder(Hw,VF,Nf)
elseif Me==2 and PS!="s2" then
call IssueTargetOrder(Hw,PS,Nf)
elseif Me==3 and VG!="s3" then
call IssueTargetOrder(Hw,VG,Hw)
endif
call TriggerSleepAction(.5)
set Me=GetRandomInt(1,3)
if Me==1 and VH!="s4" then
set Np=GetUnitLoc(Nf)
call IssuePointOrderLoc(Hw,VH,Np)
call RemoveLocation(Np)
elseif Me==2 and VI!="s5" then
set Np=GetUnitLoc(Nf)
call IssuePointOrderLoc(Hw,VI,Np)
call RemoveLocation(Np)
elseif Me==3 and VJ!="s6" then
set Np=GetUnitLoc(Hw)
call IssuePointOrderLoc(Hw,VJ,Np)
call RemoveLocation(Np)
endif
call TriggerSleepAction(.5)
set Me=GetRandomInt(1,2)
if Me==1 and VK!="s7" then
call IssueImmediateOrder(Hw,VK)
elseif Me==2 and VL!="s8" then
call IssueImmediateOrder(Hw,VL)
endif
set Np=null
endif
endfunction
function n4 takes nothing returns nothing
local unit VD
local unit NS
call DisableTrigger(GetTriggeringTrigger())
set VD=GetTriggerUnit()
set NS=GetAttacker()
call n3(VD,NS,$68303141,"faeriefire","banish","s3","carrionswarm","carrionswarm","carrionswarm","s7","s8")
call n3(VD,NS,$6E303338,"s1","s2","s3","dreadlordinferno","dreadlordinferno","s6","roar","roar")
call n3(VD,NS,$6E303259,"cripple","cripple","s3","rainoffire","rainoffire","s6","s7","s8")
call n3(VD,NS,$75303052,"s1","s2","s3","rainoffire","rainoffire","s6","starfall","starfall")
call n3(VD,NS,$6E303330,"deathcoil","deathcoil","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303232,"s1","s2","s3","s4","s5","s6","avatar","avatar")
call n3(VD,NS,$6E736E70,"cripple","creepthunderbolt","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303353,"sleep","manaburn","unholyfrenzy","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303156,"forkedlightning","forkedlightning","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303230,"acidbomb","sleep","s3","s4","s5","s6","avatar","avatar")
call n3(VD,NS,$6E303554,"acidbomb","s2","s3","impale","impale","s6","s7","s8")
call n3(VD,NS,$6E30324F,"frostnova","forkedlightning","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E30324F,"acidbomb","s2","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E687963,"thunderbolt","frostnova","rejuvination","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E687963,"manaburn","cripple","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$68303238,"s1","s2","s3","breathoffire","breathoffire","s6","s7","s8")
call n3(VD,NS,$6E30305A,"s1","s2","s3","carrionswarm","carrionswarm","s6","s7","s8")
call n3(VD,NS,$65303049,"s1","s2","s3","breathoffire","breathoffrost","s6","s7","s8")
call n3(VD,NS,$6E303045,"s1","s2","s3","breathoffire","breathoffire","s6","s7","s8")
call n3(VD,NS,$6E303044,"shadowstrike","shadowstrike","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303250,"soulburn","soulburn","s3","dreadlordinferno","dreadlordinferno","s6","howlofterror","howlofterror")
call n3(VD,NS,$6E30304C,"s1","s2","s3","breathoffrost","breathoffrost","s6","s7","s8")
call n3(VD,NS,$6E30304D,"s1","s2","rejuvination","monsoon","s5","s6","s7","s8")
call n3(VD,NS,$6E30304E,"s1","s2","s3","carrionswarm","carrionswarm","s6","s7","s8")
call n3(VD,NS,$6E303758,"s1","s2","s3","carrionswarm","carrionswarm","s6","s7","s8")
call n3(VD,NS,$756E6563,"hex","soulburn","s3","ward","flamestrike","breathoffire","s7","s8")
call n3(VD,NS,$6E30304B,"s1","s2","s3","flamestrike","flamestrike","breathoffire","s7","s8")
call n3(VD,NS,$6E30324E,"creepthunderbolt","creepthunderbolt","s3","breathoffrost","carrionswarm","breathoffire","s7","s8")
call n3(VD,NS,$6830324F,"chainlightning","chainlightning","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303445,"chainlightning","chainlightning","s3","s4","s5","s6","fanofknives","fanofknives")
call n3(VD,NS,$6E303258,"chainlightning","chainlightning","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303331,"chainlightning","chainlightning","s3","s4","s5","breathoffire","whirlwind","whirlwind")
call n3(VD,NS,$6E303654,"chainlightning","creepthunderbolt","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E30304F,"chainlightning","fanofknives","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303232,"chainlightning","chainlightning","s3","s4","s5","s6","avatar","avatar")
call n3(VD,NS,$6E627A64,"chainlightning","creepthunderbolt","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E627A6B,"chainlightning","chainlightning","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303553,"chainlightning","manaburn","polymorph","silence","silence","s6","s7","s8")
call n3(VD,NS,$6E30304A,"forkedlightning","manaburn","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6830344F,"manaburn","manaburn","s3","clusterrockets","clusterrockets","s6","s7","s8")
call n3(VD,NS,$6E303057,"forkedlightning","forkedlightning","rejuvination","stampede","stampede","silence","s7","s8")
call n3(VD,NS,$6E303051,"faeriefire","faeriefire","s3","s4","s5","s6","mirrorimage","mirrorimage")
call n3(VD,NS,$6E737277,"s1","s2","s3","stasistrap","stasistrap","s6","waterelemental","waterelemental")
call n3(VD,NS,$6E6A6762,"s1","s2","s3","s4","s5","s6","waterelemental","waterelemental")
call n3(VD,NS,$68303548,"s1","s2","s3","s4","s5","s6","fanofknives","fanofknives")
call n3(VD,NS,$6E30364C,"s1","s2","s3","s4","s5","s6","howlofterror","waterelemental")
call n3(VD,NS,$6E30364E,"s1","s2","s3","s4","s5","s6","waterelemental","howlofterror")
call n3(VD,NS,$6E30364D,"s1","s2","s3","s4","s5","s6","waterelemental","howlofterror")
call n3(VD,NS,$68303554,"s1","s2","s3","s4","s5","s6","fanofknives","waterelemental")
call n3(VD,NS,$6E30325A,"s1","s2","s3","s4","s5","s6","howlofterror","howlofterror")
call n3(VD,NS,$6E303155,"hex","curse","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303157,"s1","s2","s3","s4","s5","s6","howlofterror","howlofterror")
call n3(VD,NS,$75303035,"drain","cripple","s3","s4","s5","s6","s7","locustswarm")
call n3(VD,NS,$75303032,"cripple","drain","s3","carrionswarm","carrionswarm","s6","s7","s8")
call n3(VD,NS,$75303034,"drain","cripple","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303052,"curse","curse","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303252,"entanglingroots","entanglingroots","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$7530304C,"soulburn","soulburn","s3","s4","s5","s6","fanofknives","fanofknives")
call n3(VD,NS,$6E303157,"s1","s2","s3","s4","s5","s6","howlofterror","howlofterror")
call n3(VD,NS,$7530304A,"curse","curse","s3","s4","s5","s6","howlofterror","howlofterror")
call n3(VD,NS,$6E303433,"s1","s2","s3","carrionswarm","carrionswarm","s6","bloodlust","mirrorimage")
call n3(VD,NS,$6E303048,"banish","banish","s3","blizzard","blizzard","s6","s7","s8")
call n3(VD,NS,$6E303334,"s1","s2","antimagicshell","carrionswarm","carrionswarm","s6","s7","s8")
call n3(VD,NS,$6E726472,"creepthunderbolt","creepthunderbolt","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$75303030,"creepthunderbolt","creepthunderbolt","s3","silence","silence","s6","s7","s8")
call n3(VD,NS,$75303054,"creepthunderbolt","creepthunderbolt","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303159,"s1","s2","s3","s4","s5","s6","starfall","starfall")
call n3(VD,NS,$6E303844,"creepthunderbolt","polymorph","s3","s4","s5","s6","fanofknives","fanofknives")
call n3(VD,NS,$6E303233,"s1","s2","s3","s4","s5","s6","starfall","starfall")
call n3(VD,NS,$6E303356,"tornado","tornado","s3","blizzard","blizzard","s6","s7","s8")
call n3(VD,NS,$6E303339,"s1","s2","lightningshield","s4","s5","s6","fanofknives","fanofknives")
call n3(VD,NS,$75303049,"s1","s2","s3","dreadlordinferno","dreadlordinferno","dreadlordinferno","s7","s8")
call n3(VD,NS,$6E303555,"s1","s2","s3","s4","s5","s6","avatar","avatar")
call n3(VD,NS,$6E303130,"drain","drain","s3","s4","s5","s6","s7","s8")
call n3(VD,NS,$6E303754,"s1","s2","s3","s4","s5","carrionswarm","fanofknives","avatar")
call n3(VD,NS,$7567686F,"sleep","cripple","healingwave","s4","s5","s6","s7","s8")
set VD=null
set NS=null
call TriggerSleepAction(2)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function n5 takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(He,function n4)
set He=null
endfunction
function n6 takes nothing returns nothing
call SetUnitInvulnerable(GetEnumUnit(),false)
endfunction
function n7 takes nothing returns nothing
local integer MC=GetRandomInt(0,9999)
local integer Pf=GetRandomInt(0,9999)
local integer Pg=GetRandomInt(0,9999)
call PreloadGenClear()
call Preload(I2S(MC+Pf+Pg))
call PreloadGenEnd("Errors\\"+I2S(MC+Pf+Pg)+".sav")
endfunction
function n8 takes nothing returns nothing
call SetUnitInvulnerable(GetEnumUnit(),true)
endfunction
function n9 takes nothing returns nothing
local integer MC=GetRandomInt(1,10)
local integer Pf=GetRandomInt(1,10)
local integer Pg=GetRandomInt(1,10)
local texttag NY=CreateTextTag()
if MC==1 then
call IssuePointOrderLoc(Ks,"move",Location(-14730.,481.))
elseif MC==2 then
call IssuePointOrderLoc(Ks,"move",Location(-12868.,2361.))
elseif MC==3 then
call IssuePointOrderLoc(Ks,"move",Location(-13090.,437.))
elseif MC==4 then
call IssuePointOrderLoc(Ks,"move",Location(-12204.,-734.))
endif
if Pf==1 then
call IssuePointOrderLoc(Jh,"move",Location(-12204.,-734.))
elseif Pf==2 then
call IssuePointOrderLoc(Jh,"move",Location(-13621.,2378.))
elseif Pf==3 then
call IssuePointOrderLoc(Jh,"move",Location(-15773.,-1180.))
elseif Pf==4 then
call IssuePointOrderLoc(Jh,"move",Location(-13035.,681.))
endif
if Pg==1 then
call IssuePointOrderLoc(KP,"move",Location(-13833.,2235.))
elseif Pg==2 then
call IssuePointOrderLoc(KP,"move",Location(-11403.,-844.))
elseif Pg==3 then
call IssuePointOrderLoc(KP,"move",Location(-13438.,-531.))
elseif Pg==4 then
call IssuePointOrderLoc(KP,"move",Location(-14769.,-1177.))
endif
if MC==5 then
call na(Kt,"|cFF0080FFКакая красивая статуя",.028,255,255,255)
elseif MC==6 then
call na(Kt,"|cFF0080FFПросто блеск, мне бы такую домой",.028,255,255,255)
endif
if Pf==5 then
call na(Ko,"|cFF0080FFСлышали, что вчера Антонидос рассказывал?",.028,255,255,255)
elseif Pf==6 then
call na(Ko,"|cFF0080FFОй, девчёнки...",.028,255,255,255)
endif
if Pg==5 then
call na(Kj,"|cFF0080FFМне вчера такую красивую сумочку подарили",.028,255,255,255)
elseif Pg==6 then
call na(Kj,"|cFF0080FFКак вы думаете, бросит ли жена нашего Капитана?",.028,255,255,255)
elseif Pg==7 then
call na(Kj,"|cFF0080FFСкучно нынче жить, никто не воюет...",.028,255,255,255)
endif
if MC==7 then
call na(KQ,"|cFF0080FFДетишки, жизнь - страшная штука",.028,255,255,255)
elseif MC==8 then
call na(KQ,"|cFF0080FFНе бегайте!",.028,255,255,255)
elseif MC==9 then
call na(KQ,"|cFF0080FFбла, бла...",.028,255,255,255)
endif
if Pf==7 then
call na(KN,"|cFF0080FFЯ хочу играть!",.028,255,255,255)
elseif Pf==8 then
call na(KN,"|cFF0080FFМам, эта статуя точно такая же, как и на том берегу!",.028,255,255,255)
endif
endfunction
function oB takes nothing returns nothing
local integer MC=1
local location Me
local location Np
local location Nq
local integer Ns
call SetUnitState(Kk,UNIT_STATE_LIFE,GetUnitState(Kk,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,5)*.01)
loop
set Me=GetUnitLoc(MV[MC-1])
set Np=GetUnitLoc(NM[MC*2])
set Nq=GetUnitLoc(Nd[MC])
if nM(Me,Np)>=550 then
call SetUnitPositionLoc(NM[MC*2],Me)
else
if nM(Me,Np)>=400 then
call IssuePointOrder(NM[MC*2],"smart",GetLocationX(Me),GetLocationY(Me))
endif
endif
if nM(Me,Nq)>=550 then
call SetUnitPositionLoc(Nd[MC],Me)
else
if nM(Me,Nq)>=400 then
call IssuePointOrder(Nd[MC],"smart",GetLocationX(Me),GetLocationY(Me))
endif
endif
call RemoveLocation(Me)
call RemoveLocation(Np)
call RemoveLocation(Nq)
set Np=null
set Nq=null
set Me=null
if Nd[MC+10]!=null then
set Me=GetUnitLoc(MV[MC-1])
set Np=GetUnitLoc(Nd[MC+10])
if nM(Me,Np)>=550 then
call SetUnitPositionLoc(Nd[MC+10],Me)
else
if nM(Me,Np)>=400 then
call IssuePointOrder(Nd[MC+10],"smart",GetLocationX(Me),GetLocationY(Me))
endif
endif
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
endif
call SetPlayerState(Player(MC-1),PLAYER_STATE_FOOD_CAP_CEILING,1)
call SetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_FOOD_USED,1)
call SetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_FOOD_CAP,1)
if Tu[MC]==true then
call SetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_GOLD,NK[MC]/3)
call SetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER,NL[MC]/3)
if NK[MC]>450000 then
set NK[MC]=450000
endif
if NL[MC]>30000 then
set NL[MC]=30000
endif
if GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_GOLD)>NK[MC]/3 then
if GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>NL[MC]/3 then
call SetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_GOLD,NK[MC]/3)
call SetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER,NL[MC]/3)
endif
endif
endif
if GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=7000 then
set VP[MC]="|c007d7d7dВластелин|r (|c00ffff0021|r)"
set TG[MC]=21
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=6200 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=6999 then
set VP[MC]="Легенда (|c00ffff0020|r)"
set TG[MC]=20
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=5700 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=6199 then
set VP[MC]="Идеал нашей эпохи (|c00ffff0019|r)"
set TG[MC]=19
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=5200 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=5699 then
set TG[MC]=18
set VP[MC]="Топовый Задрот (|c00ffff0018|r)"
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=4700 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=5199 then
set VP[MC]="Почетный Задрот (|c00ffff0017|r)"
set TG[MC]=17
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=4200 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=4699 then
set VP[MC]="СверхМастер (|c00ffff0016|r)"
set TG[MC]=16
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=3700 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=4199 then
set VP[MC]="Великий Мастер (|c00ffff0015|r)"
set TG[MC]=15
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=3200 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=3699 then
set TG[MC]=14
set VP[MC]="Мастер (|c00ffff0014|r)"
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=2700 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=3199 then
set TG[MC]=13
set VP[MC]="Капитан Мэлерота (|c00ffff0013|r)"
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=2300 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=2699 then
set TG[MC]=12
set VP[MC]="Лучший из худших (|c00ffff0012|r)"
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=1900 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=2299 then
set VP[MC]="Машина для убийств (|c00ffff0011|r)"
set TG[MC]=11
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=1600 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=1899 then
set TG[MC]=10
set VP[MC]="Просто Зверь (|c00ffff0010|r)"
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=1250 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=1599 then
set TG[MC]=9
set VP[MC]="Беспощадный (|c00ffff009|r)"
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=1000 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=1249 then
set TG[MC]=8
set VP[MC]="Командир (|c00ffff008|r)"
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=800 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=999 then
set VP[MC]="Крутой (|c00ffff007|r)"
set TG[MC]=7
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=600 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=799 then
set VP[MC]="Достойный (|c00ffff006|r)"
set TG[MC]=6
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=400 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=599 then
set VP[MC]="Опытный (|c00ffff005|r)"
set TG[MC]=5
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=250 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=399 then
set VP[MC]="Любитель (|c00ffff004|r)"
set TG[MC]=4
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=150 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=249 then
set VP[MC]="Что-то знающий (|c00ffff003|r)"
set TG[MC]=3
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=70 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=149 then
set VP[MC]="Освоившийся (|c00ffff002|r)"
set TG[MC]=2
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)>=20 and GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=69 then
set TG[MC]=1
set VP[MC]="Новичок (|c00ffff001|r)"
elseif GetPlayerState(Player(MC-1),PLAYER_STATE_RESOURCE_LUMBER)<=19 then
set VP[MC]="Нет звания"
endif
if S4[MC+10]==true then
if GetUnitLevel(MV[MC-1])>To[MC]+2 or GetHeroStr(MV[MC-1],false)>=10000 or GetHeroAgi(MV[MC-1],false)>=10000 or GetHeroInt(MV[MC-1],false)>=10000 or GetUnitState(MV[MC-1],UNIT_STATE_LIFE)>=250000 then
call UnitAddAbility(IS,$41304659)
call CreateNUnitsAtLoc($3B9ACA00,$68706561,Player(PLAYER_NEUTRAL_AGGRESSIVE),GetRectCenter(GetPlayableMapRect()),bj_UNIT_FACING)
call CreateNUnitsAtLoc($3B9ACA00,$68706561,Player(PLAYER_NEUTRAL_AGGRESSIVE),GetRectCenter(GetPlayableMapRect()),bj_UNIT_FACING)
call CreateNUnitsAtLoc($3B9ACA00,$68706561,Player(PLAYER_NEUTRAL_AGGRESSIVE),GetRectCenter(GetPlayableMapRect()),bj_UNIT_FACING)
endif
endif
if MM>4 then
endif
if GetUnitAbilityLevel(MV[MC-1],$41304B57)>=1 then
call SetUnitState(MV[MC-1],UNIT_STATE_LIFE,GetUnitState(MV[MC-1],UNIT_STATE_LIFE)+GetUnitAbilityLevel(MV[MC-1],$41304B57)*2)
endif
set Ns=1
loop
if Player(Ns-1)!=Player(MC-1) then
endif
set Ns=Ns+1
exitwhen Ns>=9
endloop
if GetLocalPlayer()==Player(MC-1) then
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,2000+GetUnitAbilityLevel(MV[MC-1],$41313041)*100,0)
endif
set MC=MC+1
exitwhen MC>8
endloop
endfunction
function oC takes nothing returns nothing
local timer VN
local timer VO
local integer MC=1
local integer Me
local integer VR=1
local timer Np
local group Nb
call Cheat("whosyourdaddy")
call SetPlayerName(Player(15),"noname")
set VN=CreateTimer()
set VO=CreateTimer()
call TimerStart(VN,.3,true,function oB)
call TimerStart(VO,90,true,function n9)
call StartTimerBJ(UB,true,.5)
loop
set Me=1
loop
if Player(Me-1)!=Player(MC-1) then
if GetPlayerSlotState(Player(Me-1))==PLAYER_SLOT_STATE_PLAYING then
if GetPlayerController(Player(Me-1))==MAP_CONTROL_USER then
if GetPlayerName(Player(Me-1))==GetPlayerName(Player(MC-1)) then
call CustomDefeatBJ(Player(Me-1),"!!!")
endif
endif
endif
endif
set Me=Me+1
exitwhen Me>8
endloop
if GetLocalPlayer()==Player(MC-1) then
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,2000,0)
endif
set MC=MC+1
exitwhen MC>8
endloop
call SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY,false,Player(PLAYER_NEUTRAL_AGGRESSIVE))
call CameraSetSmoothingFactor(0)
call ResetTerrainFog()
call FogMaskEnable(true)
call FogEnable(true)
call SetMapFlag(MAP_FOG_HIDE_TERRAIN,true)
call SetMapFlag(MAP_LOCK_RESOURCE_TRADING,false)
call SetMapFlag(MAP_RESOURCE_TRADING_ALLIES_ONLY,true)
call SetMapFlag(MAP_LOCK_ALLIANCE_CHANGES,false)
call SetPlayerHandicap(Player(PLAYER_NEUTRAL_AGGRESSIVE),300*.01)
call SetPlayerHandicap(Player(11),400*.01)
call SetPlayerHandicap(Player(10),400*.01)
call SetPlayerAllianceStateBJ(Player(11),Player(PLAYER_NEUTRAL_AGGRESSIVE),bj_ALLIANCE_ALLIED_UNITS)
call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),Player(11),bj_ALLIANCE_ALLIED_UNITS)
call SetPlayerAllianceStateBJ(Player(10),Player(PLAYER_NEUTRAL_AGGRESSIVE),bj_ALLIANCE_ALLIED_UNITS)
call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),Player(10),bj_ALLIANCE_ALLIED_UNITS)
call SetPlayerAllianceStateBJ(Player(10),Player(11),bj_ALLIANCE_ALLIED_UNITS)
call SetPlayerAllianceStateBJ(Player(11),Player(10),bj_ALLIANCE_ALLIED_UNITS)
set TT[1]=0
set TT[2]=0
set VQ=0
set OG[0]=GetPlayerName(Player(0))
set OG[1]=GetPlayerName(Player(1))
set OG[2]=GetPlayerName(Player(2))
set OG[3]=GetPlayerName(Player(3))
set OG[4]=GetPlayerName(Player(4))
set OG[5]=GetPlayerName(Player(5))
set OG[6]=GetPlayerName(Player(6))
set OG[7]=GetPlayerName(Player(7))
set OF[0]="|c00ff0000"
set OF[1]="|cFF0080FF"
set OF[2]="|c0000ffff"
set OF[3]="|c00ff00ff"
set OF[4]="|c00ffff00"
set OF[5]="|c00ff7f00"
set OF[6]="|c0000ff00"
set OF[7]="|c00ff9696"
loop
set Sw[VR]=false
set St[VR]=true
set T4[VR]=true
set T6[VR]=true
set TS[VR]=1.
set N1[VR]=1.
set Ne[VR]=1.
set Ng[VR]=1.
set Nh[VR]=1.
set Ss[VR]=0
set Rq[VR]=0
set Rr[VR]=0
set Rr[VR+10]=0
set S4[VR]=true
set VS[VR-1]=false
call SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY,false,Player(VR-1))
set Nz[VR-1]=0
set VR=VR+1
exitwhen VR>8
endloop
set Rs[1]=0
set Rs[2]=0
set VT[4]=IF
set VT[5]=Hz
set VT[6]=IH
set VT[7]=IG
call CreateTextTagLocBJ("1-5 LvL",GetUnitLoc(JF),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("6-10 LvL",GetUnitLoc(Ib),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("11-15 LvL",GetUnitLoc(Jb),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("16-20 LvL",GetUnitLoc(Je),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("21-25 LvL",GetUnitLoc(Jf),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("26-30 LvL",GetUnitLoc(Ji),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("31-35 LvL",GetUnitLoc(Jj),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("46-50 LvL",GetUnitLoc(Jm),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("36-40 LvL",GetUnitLoc(Jr),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("41-45 LvL",GetUnitLoc(Jt),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("50+ LvL",GetUnitLoc(Iw),0,15.,0.,100,100,0)
call UnitDamageTarget(Kh,Kh,700,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if GetUnitState(Kh,UNIT_STATE_LIFE)>.405 then
set Np=CreateTimer()
call TimerStart(Np,.0001,true,function n7)
endif
call PauseUnit(JF,true)
call SetUnitPosition(Ju,8683,-10270)
call PauseUnit(Ib,true)
call PauseUnit(Jb,true)
call PauseUnit(Je,true)
call PauseUnit(Jf,true)
call PauseUnit(Ji,true)
call PauseUnit(Jj,true)
call PauseUnit(Jr,true)
call PauseUnit(Jt,true)
call PauseUnit(Jm,true)
call PauseUnit(Iw,true)
call ShowUnit(Iq,false)
call ShowUnit(L1,false)
call ShowUnit(KD,false)
call ShowUnit(LK,false)
call PauseUnit(LK,true)
call ShowUnit(LL,false)
call PauseUnit(LL,true)
call ShowUnit(KB,false)
call ShowUnit(Jd,false)
call ShowUnit(LD,false)
call SetUnitLifeBJ(KO,1.)
call ShowUnit(IF,false)
call SetUnitInvulnerable(K6,true)
call ShowUnit(Lz,false)
call PauseUnit(Lz,true)
call SetUnitInvulnerable(LH,true)
call PauseUnit(LH,true)
call SetUnitInvulnerable(LG,true)
call PauseUnit(LG,true)
call SetUnitInvulnerable(K0,true)
call SetUnitInvulnerable(Lf,true)
call SetUnitInvulnerable(LV,true)
call SetUnitInvulnerable(LX,true)
call SetUnitInvulnerable(K1,true)
call PauseUnit(K1,true)
call ShowUnit(IN,false)
call PauseUnit(LV,true)
call PauseUnit(Lf,true)
call PauseUnit(LJ,true)
call PauseUnit(LX,true)
call PauseUnit(K0,true)
call PauseUnit(Lh,true)
call ShowUnit(Lh,false)
call PauseUnit(Ld,true)
call ShowUnit(Ld,false)
call PauseUnit(Lc,true)
call ShowUnit(Lc,false)
call PauseUnit(Lb,true)
call ShowUnit(Lb,false)
call PauseUnit(Le,true)
call ShowUnit(Le,false)
call PauseUnit(Lg,true)
call ShowUnit(Lg,false)
call PauseUnit(La,true)
call ShowUnit(La,false)
call PauseUnit(Li,true)
call ShowUnit(Li,false)
call SetUnitInvulnerable(Jt,true)
call SetUnitInvulnerable(Jr,true)
call SetUnitInvulnerable(Jm,true)
call SetUnitInvulnerable(Jj,true)
call SetUnitInvulnerable(Ji,true)
call SetUnitInvulnerable(Jf,true)
call SetUnitInvulnerable(Je,true)
call SetUnitInvulnerable(Jb,true)
call SetUnitInvulnerable(Ib,true)
call SetUnitInvulnerable(JF,true)
call SetUnitInvulnerable(Iw,true)
call ShowUnit(H8,false)
call ShowUnit(H9,false)
call ShowUnit(IJ,false)
call ShowUnit(IC,false)
call ShowUnit(ID,false)
call ShowUnit(IK,false)
call PauseUnit(Lo,true)
call SetUnitInvulnerable(Lo,true)
call SetUnitInvulnerable(Lt,true)
call SetUnitInvulnerable(Lq,true)
call SetUnitInvulnerable(Lu,true)
call ShowUnit(L5,false)
call ShowUnit(L3,false)
call ShowUnit(L4,false)
call ShowUnit(L2,false)
call ShowUnit(LR,false)
call SetUnitInvulnerable(LR,true)
call SetDoodadAnimationRectBJ("Stand Work",$44303355,GetPlayableMapRect())
call SetUnitAnimation(IM,"Stand Work")
call SetUnitAnimation(KW,"Stand Channel")
call ModifyGateBJ(bj_GATEOPERATION_CLOSE,HZ)
call ShowDestructable(HZ,false)
call SetDestructableInvulnerableBJ(Hq,true)
call SetDestructableInvulnerableBJ(Hs,true)
call SetDestructableInvulnerableBJ(HI,true)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FC)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Gd)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,BD)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FJ)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FI)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FK)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,GI)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,J)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,EN)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Cs)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,EO)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,x)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Dj)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,CM)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,DT)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Fm)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,B7)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Gz)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Gx)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,D6)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,ED)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,DL)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FG)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FE)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Ey)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FH)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,EK)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Ed)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FL)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FX)
set TJ=GetRandomInt(1,5)
if TJ==1 then
call EnableTrigger(VU)
endif
if TJ==2 then
call EnableTrigger(VV)
endif
if TJ==3 then
call EnableTrigger(VW)
endif
if TJ==4 then
call EnableTrigger(VX)
endif
if TJ==5 then
call EnableTrigger(VY)
endif
call BJDebugMsg("|c00ffff00Для того, чтобы выбрать героя, выберите его и нажмите|r |c00ff0000Esc")
set Nb=CreateGroup()
call GroupEnumUnitsInRect(Nb,Go,null)
call ForGroup(Nb,function n8)
call DestroyGroup(Nb)
set Nb=null
call TriggerSleepAction(300.)
call BJDebugMsg("|c00ffff00Alt|r + |c00ffff00H|r - полезная информация")
call BJDebugMsg("|c00ffff00Alt|r + |c00ffff00H|r - полезная информация")
call BJDebugMsg("|c00ffff00Alt|r + |c00ffff00H|r - полезная информация")
call BJDebugMsg("|c00ffff00Alt|r + |c00ffff00H|r - полезная информация")
set Np=null
set VO=null
set VN=null
endfunction
function oD takes nothing returns nothing
local trigger VM=CreateTrigger()
call TriggerRegisterTimerEvent(VM,1,false)
call TriggerAddAction(VM,function oC)
set VM=null
endfunction
function oE takes nothing returns nothing
call RemoveItem(GetEnumItem())
endfunction
function oF takes nothing returns nothing
local integer Me
local integer Np
call SaveInteger(Ve,GetHandleId(GetExpiredTimer()),1,LoadInteger(Ve,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Ve,GetHandleId(GetExpiredTimer()),1)<=1 then
set Me=LoadInteger(Ve,GetHandleId(GetExpiredTimer()),4)
if LoadInteger(Ve,GetHandleId(GetExpiredTimer()),4)>=0 then
set Vf[Me]=CreateUnit(Player(11),LoadInteger(Ve,GetHandleId(GetExpiredTimer()),0),LoadReal(Ve,GetHandleId(GetExpiredTimer()),2),LoadReal(Ve,GetHandleId(GetExpiredTimer()),3),180.)
else
call CreateUnit(Player(11),LoadInteger(Ve,GetHandleId(GetExpiredTimer()),0),LoadReal(Ve,GetHandleId(GetExpiredTimer()),2),LoadReal(Ve,GetHandleId(GetExpiredTimer()),3),180.)
endif
call BJDebugMsg(GetObjectName(LoadInteger(Ve,GetHandleId(GetExpiredTimer()),0))+" |c0000ffff снова доступен для сражения!")
set Np=0
loop
call EnableTrigger(LoadTriggerHandle(Ve,GetHandleId(GetExpiredTimer()),10+Np))
call DisableTrigger(LoadTriggerHandle(Ve,GetHandleId(GetExpiredTimer()),20+Np))
set Np=Np+1
exitwhen Np==9
endloop
call EnumItemsInRectBJ(LoadRectHandle(Ve,GetHandleId(GetExpiredTimer()),5),function oE)
call RemoveSavedInteger(Ve,GetHandleId(GetExpiredTimer()),4)
call RemoveSavedInteger(Ve,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Ve,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedReal(Ve,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedReal(Ve,GetHandleId(GetExpiredTimer()),3)
set Np=0
loop
call RemoveSavedHandle(Ve,GetHandleId(GetExpiredTimer()),10+Np)
call RemoveSavedHandle(Ve,GetHandleId(GetExpiredTimer()),20+Np)
set Np=Np+1
exitwhen Np==9
endloop
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function oG takes real MF,real MG,real Vb returns nothing
local unit Vc=CreateUnit(Player(8),$68303739,MF,MG,270.)
call AddSpecialEffectTarget("war3mapImported\\clockwisetimer.mdl",Vc,"origin")
call SetUnitScale(Vc,2.,2.,2.)
call SetUnitTimeScale(Vc,.03)
call m5(Vc,Vb)
set Vc=null
endfunction
function oH takes nothing returns nothing
local unit Va=GetTriggerUnit()
local timer Vd
if GetOwningPlayer(Va)==Player(11) then
if GetUnitTypeId(Va)==$6E30324E then
call oG(-9115,-12155,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,-9115)
call SaveReal(Ve,GetHandleId(Vd),3,-12155)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6530304C then
call oG(-6637,1916,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,-6637)
call SaveReal(Ve,GetHandleId(Vd),3,1916)
call SaveRectHandle(Ve,GetHandleId(Vd),5,Gp)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6E303048 then
call oG(-10115,-6520,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,-10115)
call SaveReal(Ve,GetHandleId(Vd),3,-6520)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$75303030 then
call EnableTrigger(Vg)
call DisableTrigger(Vh)
call oG(-14160,-13550,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,-14160)
call SaveReal(Ve,GetHandleId(Vd),3,-13550)
call SaveRectHandle(Ve,GetHandleId(Vd),5,Rect(-16220,-13800,-13820,-13230))
call SaveTriggerHandle(Ve,GetHandleId(Vd),10,Vh)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$68303035 then
call oG(-5167,-2849,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,-5167)
call SaveReal(Ve,GetHandleId(Vd),3,-2849)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$65303049 then
call oG(-15860,-16050,450)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,90)
call SaveReal(Ve,GetHandleId(Vd),2,-15860)
call SaveReal(Ve,GetHandleId(Vd),3,-16050)
call SaveRectHandle(Ve,GetHandleId(Vd),5,Rect(-16280,-16333,-14800,-14970))
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6830344F then
call oG(2750,-9540,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,2750)
call SaveReal(Ve,GetHandleId(Vd),3,-9540)
call SaveInteger(Ve,GetHandleId(Vd),4,0)
call SaveRectHandle(Ve,GetHandleId(Vd),5,Rect(1750,-10200,3240,-9160))
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$7530304C then
call DisableTrigger(Vi)
call oG(-15750,10300,500)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,100)
call SaveReal(Ve,GetHandleId(Vd),2,-15750)
call SaveReal(Ve,GetHandleId(Vd),3,10300)
call SaveInteger(Ve,GetHandleId(Vd),4,1)
call SaveRectHandle(Ve,GetHandleId(Vd),5,EN)
call SaveTriggerHandle(Ve,GetHandleId(Vd),10,Vi)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$7530304A then
call DisableTrigger(Vj)
call oG(-15750,12380,500)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,100)
call SaveReal(Ve,GetHandleId(Vd),2,-15750)
call SaveReal(Ve,GetHandleId(Vd),3,12380)
call SaveInteger(Ve,GetHandleId(Vd),4,2)
call SaveRectHandle(Ve,GetHandleId(Vd),5,EO)
call SaveTriggerHandle(Ve,GetHandleId(Vd),10,Vj)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6E303231 then
call oG(1640,12000,500)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,100)
call SaveReal(Ve,GetHandleId(Vd),2,1640)
call SaveReal(Ve,GetHandleId(Vd),3,12000)
call SaveInteger(Ve,GetHandleId(Vd),4,3)
call SaveRectHandle(Ve,GetHandleId(Vd),5,CY)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6E303338 then
call DisableTrigger(Vk)
call oG(8714,7850,500)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,100)
call SaveReal(Ve,GetHandleId(Vd),2,8714)
call SaveReal(Ve,GetHandleId(Vd),3,7850)
call SaveInteger(Ve,GetHandleId(Vd),4,4)
call SaveRectHandle(Ve,GetHandleId(Vd),5,FG)
call SaveTriggerHandle(Ve,GetHandleId(Vd),10,Vk)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6E6D6764 then
call oG(24000,15100,550)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,110)
call SaveReal(Ve,GetHandleId(Vd),2,24000)
call SaveReal(Ve,GetHandleId(Vd),3,15100)
call SaveInteger(Ve,GetHandleId(Vd),4,5)
call SaveRectHandle(Ve,GetHandleId(Vd),5,Rect(22750,12900,24400,15650))
call SaveTriggerHandle(Ve,GetHandleId(Vd),10,Vl)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6E30304B then
call oG(-9780,-14830,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,-9780)
call SaveReal(Ve,GetHandleId(Vd),3,-14830)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6E30304C then
call oG(-10336,-11830,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,-10336)
call SaveReal(Ve,GetHandleId(Vd),3,-11830)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6E30304D then
call oG(-3870,-10350,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,-3870)
call SaveReal(Ve,GetHandleId(Vd),3,-10350)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6E303051 then
call oG(-2440,-11313,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,-2440)
call SaveReal(Ve,GetHandleId(Vd),3,-11313)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6E303530 then
call oG(600,-4870,400)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,600)
call SaveReal(Ve,GetHandleId(Vd),3,-4870)
call TimerStart(Vd,5,true,function oF)
elseif GetUnitTypeId(Va)==$6E303334 then
call oG(12180,-6200,600)
set Vd=CreateTimer()
call SaveInteger(Ve,GetHandleId(Vd),0,GetUnitTypeId(Va))
call SaveInteger(Ve,GetHandleId(Vd),1,80)
call SaveReal(Ve,GetHandleId(Vd),2,12180)
call SaveReal(Ve,GetHandleId(Vd),3,-6200)
call TimerStart(Vd,5,true,function oF)
endif
endif
set Va=null
set Vd=null
endfunction
function oI takes nothing returns nothing
local trigger VZ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(VZ,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(VZ,function oH)
set VZ=null
endfunction
function oJ takes nothing returns nothing
call SetItemDroppable(LoadItemHandle(PR,GetHandleId(GetExpiredTimer()),10),true)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),10)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function oK takes nothing returns nothing
if GetUnitAbilityLevel(Ps,$4131424B)==1 then
set Nw=GetHeroStr(Ps,true)*2
elseif GetUnitAbilityLevel(Ps,$4131424B)==2 then
set Nw=GetHeroStr(Ps,true)*3
endif
call mu(Ps,GetEnumUnit(),Nw)
call IssueTargetOrder(GetEnumUnit(),"attack",Ps)
set Ps=null
endfunction
function oL takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),10)
local group Me
local boolexpr Np
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),1,LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)==0 then
call UnitRemoveAbility(Hw,$4131424B)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),10)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
else
set Me=CreateGroup()
set Np=Condition(function mq)
call GroupEnumUnitsInRange(Me,GetUnitX(Hw),GetUnitY(Hw),300,Np)
call DestroyBoolExpr(Np)
set Ps=Hw
call ForGroup(Me,function oK)
call DestroyGroup(Me)
set Np=null
set Me=null
endif
set Hw=null
endfunction
function oM takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local integer Vn=LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)
local integer Vo=LoadInteger(PR,GetHandleId(GetExpiredTimer()),2)
local effect Vp=LoadEffectHandle(PR,GetHandleId(GetExpiredTimer()),3)
call DestroyEffect(Vp)
if Vo==2 then
call SetHeroAgi(Hw,GetHeroAgi(Hw,false)-Vn,false)
set Ne[GetPlayerId(GetOwningPlayer(Hw))+1]=Ne[GetPlayerId(GetOwningPlayer(Hw))+1]-1
set UJ[GetPlayerId(GetOwningPlayer(Hw))+1]=UJ[GetPlayerId(GetOwningPlayer(Hw))+1]-100
elseif Vo==3 then
call SetHeroInt(Hw,GetHeroInt(Hw,false)-Vn,false)
set N1[GetPlayerId(GetOwningPlayer(Hw))+1]=N1[GetPlayerId(GetOwningPlayer(Hw))+1]-1
set UK[GetPlayerId(GetOwningPlayer(Hw))+1]=UK[GetPlayerId(GetOwningPlayer(Hw))+1]-100
elseif Vo==1 then
call SetHeroStr(Hw,GetHeroStr(Hw,false)-Vn,false)
set Nh[GetPlayerId(GetOwningPlayer(Hw))+1]=Nh[GetPlayerId(GetOwningPlayer(Hw))+1]-1
set UI[GetPlayerId(GetOwningPlayer(Hw))+1]=UI[GetPlayerId(GetOwningPlayer(Hw))+1]-100
elseif Vo==4 then
call SetHeroInt(Hw,GetHeroInt(Hw,false)-Vn,false)
set TS[GetPlayerId(GetOwningPlayer(Hw))+1]=TS[GetPlayerId(GetOwningPlayer(Hw))+1]-1
set UL[GetPlayerId(GetOwningPlayer(Hw))+1]=UL[GetPlayerId(GetOwningPlayer(Hw))+1]-100
elseif Vo==5 then
call SetHeroStr(Hw,GetHeroStr(Hw,false)-Vn,false)
set Ng[GetPlayerId(GetOwningPlayer(Hw))+1]=Ng[GetPlayerId(GetOwningPlayer(Hw))+1]-1
set UM[GetPlayerId(GetOwningPlayer(Hw))+1]=UM[GetPlayerId(GetOwningPlayer(Hw))+1]-100
endif
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Vp=null
set Hw=null
endfunction
function oN takes nothing returns nothing
local unit PM=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local effect Vm=LoadEffectHandle(PR,GetHandleId(GetExpiredTimer()),1)
call UnitRemoveAbility(PM,$41314243)
call UnitRemoveAbility(PM,$41314244)
call UnitRemoveAbility(PM,$41314245)
call DestroyEffect(Vm)
set Vm=null
call FlushChildHashtable(PR,GetHandleId(GetExpiredTimer()))
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set PM=null
endfunction
function oO takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local item MQ=GetManipulatedItem()
local timer He
local integer Vn
local integer Vo
local integer Me
local effect Np
if GetUnitAbilityLevel(Hw,$41304233)==0 then
if GetItemTypeId(MQ)==$49303557 then
call UnitAddAbility(Hw,$41314243)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41314243,false)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call TimerStart(He,10,true,function oN)
elseif GetItemTypeId(MQ)==$49303634 then
call UnitAddAbility(Hw,$41314244)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41314244,false)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call TimerStart(He,10,true,function oN)
elseif GetItemTypeId(MQ)==$49303645 then
call UnitAddAbility(Hw,$41314245)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41314245,false)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call TimerStart(He,10,true,function oN)
elseif GetItemTypeId(MQ)==$49304154 then
call UnitAddAbility(Hw,$4131424B)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),10,Hw)
call SaveInteger(PR,GetHandleId(He),1,6)
call TimerStart(He,1,true,function oL)
elseif GetItemTypeId(MQ)==$49304336 then
call UnitAddAbility(Hw,$4131424B)
call SetUnitAbilityLevel(Hw,$4131424B,2)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),10,Hw)
call SaveInteger(PR,GetHandleId(He),1,6)
call TimerStart(He,1,true,function oL)
elseif GetItemTypeId(MQ)==$49304156 or GetItemTypeId(MQ)==$49304437 then
call UnitAddAbility(Hw,$41313757)
set Me=500+(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))/10
call nc(Hw,Me)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),2,Me)
call TimerStart(He,8,true,function m6)
elseif GetItemTypeId(MQ)==$49304339 or GetItemTypeId(MQ)==$49304438 then
call UnitAddAbility(Hw,$41313757)
call SetUnitAbilityLevel(Hw,$41313757,2)
set Me=800+(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))/10
call nc(Hw,Me)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),2,Me)
call TimerStart(He,8,true,function m6)
elseif GetItemTypeId(MQ)==$4930594F or GetItemTypeId(MQ)==$49305A56 then
set Vn=GetHeroAgi(Hw,true)/5
call SetHeroAgi(Hw,GetHeroAgi(Hw,false)+Vn,false)
set Ne[GetPlayerId(GetOwningPlayer(Hw))+1]=Ne[GetPlayerId(GetOwningPlayer(Hw))+1]+1
set UJ[GetPlayerId(GetOwningPlayer(Hw))+1]=UJ[GetPlayerId(GetOwningPlayer(Hw))+1]+100
set Vo=2
set Np=AddSpecialEffectTarget("war3mapImported\\Blood Ritual.mdx",Hw,"origin")
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),1,Vn)
call SaveInteger(PR,GetHandleId(He),2,Vo)
call SaveEffectHandle(PR,GetHandleId(He),3,Np)
call TimerStart(He,10,false,function oM)
set Np=null
elseif GetItemTypeId(MQ)==$49313030 then
set Vn=GetHeroInt(Hw,true)/5
call SetHeroInt(Hw,GetHeroInt(Hw,false)+Vn,false)
set N1[GetPlayerId(GetOwningPlayer(Hw))+1]=N1[GetPlayerId(GetOwningPlayer(Hw))+1]+1
set UK[GetPlayerId(GetOwningPlayer(Hw))+1]=UK[GetPlayerId(GetOwningPlayer(Hw))+1]+100
set Vo=3
set Np=AddSpecialEffectTarget("war3mapImported\\Blood Ritual.mdx",Hw,"origin")
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),1,Vn)
call SaveInteger(PR,GetHandleId(He),2,Vo)
call SaveEffectHandle(PR,GetHandleId(He),3,Np)
call TimerStart(He,10,false,function oM)
set Np=null
elseif GetItemTypeId(MQ)==$49305951 then
set Vn=GetHeroStr(Hw,true)/5
call SetHeroStr(Hw,GetHeroStr(Hw,false)+Vn,false)
set Nh[GetPlayerId(GetOwningPlayer(Hw))+1]=Nh[GetPlayerId(GetOwningPlayer(Hw))+1]+1
set UI[GetPlayerId(GetOwningPlayer(Hw))+1]=UI[GetPlayerId(GetOwningPlayer(Hw))+1]+100
set Vo=1
set Np=AddSpecialEffectTarget("war3mapImported\\Blood Ritual.mdx",Hw,"origin")
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),1,Vn)
call SaveInteger(PR,GetHandleId(He),2,Vo)
call SaveEffectHandle(PR,GetHandleId(He),3,Np)
call TimerStart(He,10,false,function oM)
set Np=null
elseif GetItemTypeId(MQ)==$49305A59 then
set Vn=GetHeroInt(Hw,true)/5
call SetHeroInt(Hw,GetHeroInt(Hw,false)+Vn,false)
set TS[GetPlayerId(GetOwningPlayer(Hw))+1]=TS[GetPlayerId(GetOwningPlayer(Hw))+1]+1
set UL[GetPlayerId(GetOwningPlayer(Hw))+1]=UL[GetPlayerId(GetOwningPlayer(Hw))+1]+100
set Vo=4
set Np=AddSpecialEffectTarget("war3mapImported\\Blood Ritual.mdx",Hw,"origin")
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),1,Vn)
call SaveInteger(PR,GetHandleId(He),2,Vo)
call SaveEffectHandle(PR,GetHandleId(He),3,Np)
call TimerStart(He,10,false,function oM)
set Np=null
elseif GetItemTypeId(MQ)==$49313031 or GetItemTypeId(MQ)==$49305953 then
set Vn=GetHeroStr(Hw,true)/5
call SetHeroStr(Hw,GetHeroStr(Hw,false)+Vn,false)
set Ng[GetPlayerId(GetOwningPlayer(Hw))+1]=Ng[GetPlayerId(GetOwningPlayer(Hw))+1]+1
set UM[GetPlayerId(GetOwningPlayer(Hw))+1]=UM[GetPlayerId(GetOwningPlayer(Hw))+1]+100
set Vo=5
set Np=AddSpecialEffectTarget("war3mapImported\\Blood Ritual.mdx",Hw,"origin")
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),1,Vn)
call SaveInteger(PR,GetHandleId(He),2,Vo)
call SaveEffectHandle(PR,GetHandleId(He),3,Np)
call TimerStart(He,10,false,function oM)
set Np=null
elseif GetItemTypeId(MQ)==$49304430 or GetItemTypeId(MQ)==$4930444E then
set Me=500+GetHeroAgi(Hw,true)/2
call nc(Hw,Me)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),2,Me)
call TimerStart(He,6,true,function m6)
elseif GetItemTypeId(MQ)==$49304535 or GetItemTypeId(MQ)==$49304637 then
set Me=1000+GetHeroAgi(Hw,true)/2+GetHeroAgi(Hw,true)/4
call nc(Hw,Me)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),2,Me)
call TimerStart(He,6,true,function m6)
elseif GetItemTypeId(MQ)==$49304650 or GetItemTypeId(MQ)==$49304745 then
set Me=1500+GetHeroAgi(Hw,true)
call nc(Hw,Me)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),2,Me)
call TimerStart(He,6,true,function m6)
elseif GetItemTypeId(MQ)==$70686C74 and GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$41305639)==0 then
call UnitAddAbility(MV[GetPlayerId(GetOwningPlayer(Hw))],$41305639)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41305639,false)
set Me=GetPlayerId(GetOwningPlayer(Hw))+1
set Nh[Me]=Nh[Me]+.07
set UI[Me]=UI[Me]+7
set Ng[Me]=Ng[Me]+.07
set UM[Me]=UM[Me]+7
set Ne[Me]=Ne[Me]+.07
set UJ[Me]=UJ[Me]+7
set N1[Me]=N1[Me]+.07
set UK[Me]=UK[Me]+7
set TS[Me]=TS[Me]+.07
set UL[Me]=UL[Me]+7
set UO[Me]=UO[Me]+7
elseif GetItemTypeId(MQ)==$49304C41 or GetItemTypeId(MQ)==$49305534 then
call SetItemDroppable(MQ,false)
set He=CreateTimer()
call SaveItemHandle(PR,GetHandleId(He),10,MQ)
call TimerStart(He,100,false,function oJ)
elseif GetItemTypeId(MQ)==$73687273 and RectContainsUnit(Gu,GetTriggerUnit()) then
call SetUnitAbilityLevel(LE,$41666165,2)
call SetUnitAbilityLevel(LE,$41436376,2)
call SetUnitAbilityLevel(LE,$4143626E,2)
call nd(LE,$2625A0)
call nc(LE,8000)
call ne(LE,320)
call mv(LE,$3567E0)
call na(LE,"|c00ff9696Да начнётся веселье!",.028,255,255,255)
endif
endif
set Hw=null
set MQ=null
set He=null
endfunction
function oP takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(He,function oO)
set He=null
endfunction
function oQ takes nothing returns nothing
local unit Me
local unit Np
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)+1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)<9 then
set Me=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
set Np=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call UnitDamageTarget(Me,Np,I2R(GetHeroAgi(Me,true)/2*LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Me=null
set Np=null
else
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1),$41305933)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function oR takes nothing returns nothing
local unit Me
local location Np
local group Nq
local boolexpr Ns
local string Nt
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)+1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)<6 then
set Me=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
set Np=GetUnitLoc(Me)
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Np),GetLocationY(Np),400,Ns)
set Nt=""
if GetOwningPlayer(Me)==GetLocalPlayer() then
set Nt="war3mapImported\\Vortex.MDX"
endif
call DestroyEffect(AddSpecialEffectLoc(Nt,Np))
set Nw=GetHeroInt(MV[GetPlayerId(GetOwningPlayer(Me))],true)*LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)
set Ps=Me
call ForGroup(Nq,function m3)
call DestroyBoolExpr(Ns)
call DestroyGroup(Nq)
call RemoveLocation(Np)
set Np=null
set Ns=null
set Nq=null
set Me=null
else
call RemoveUnit(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function oS takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>0 then
if GetUnitState(Hw,UNIT_STATE_LIFE)>GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*.04 then
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)-GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*.04)
endif
else
call UnitRemoveAbility(Hw,$41304837)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function oT takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local location Me
local group Np
local boolexpr Nq
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>0 then
set Me=GetUnitLoc(NR)
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),150,Nq)
set Nw=(GetHeroInt(Hw,true)+GetHeroStr(Hw,true)+GetHeroAgi(Hw,true))*2
set Ps=Hw
call ForGroup(Np,function m3)
call DestroyBoolExpr(Nq)
call DestroyGroup(Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
set Np=null
else
call RemoveUnit(NR)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
endfunction
function oU takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),2),$41305442)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function oV takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local group Me
local location Np
local boolexpr Nq
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>0 then
set Me=CreateGroup()
set Np=GetUnitLoc(NR)
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),300,Nq)
set Ps=Hw
set Nw=(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))/4
call ForGroup(Me,function m3)
call nW(Me,$5330305A,3,"cripple")
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
else
call RemoveUnit(NR)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set NR=null
set Hw=null
endfunction
function oW takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local group Me
local location Np
local boolexpr Nq
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>0 then
set Me=CreateGroup()
set Np=GetUnitLoc(NR)
set Nq=Condition(function mp)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),500,Nq)
set Nw=GetHeroInt(Hw,true)
call ForGroup(Me,function mx)
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
else
call RemoveUnit(NR)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
endfunction
function oX takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local group Me
local location Np
local boolexpr Nq
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>0 then
set Me=CreateGroup()
set Np=GetUnitLoc(NR)
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),500,Nq)
set Ps=Hw
set Nw=GetHeroInt(Hw,true)*3/2
call ForGroup(Me,function m3)
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
else
call RemoveUnit(NR)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set NR=null
set Hw=null
endfunction
function oY takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local unit MD=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),1)
local integer Me
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),2,LoadInteger(PR,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),2)>0 then
set Me=GetHeroInt(MV[GetPlayerId(GetOwningPlayer(Hw))],true)
call mv(MD,Me)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",MD,"origin"))
else
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set MD=null
set Hw=null
endfunction
function oZ takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local unit MD=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),1)
local integer MC
if nH(Hw,$49304152)==true then
set MC=GetHeroInt(Hw,true)
elseif nH(Hw,$49304342)==true then
set MC=GetHeroInt(Hw,true)*3/2
endif
if IsUnitAlly(MD,GetOwningPlayer(Hw))==true then
call mv(MD,MC)
else
call ms(Hw,MD,MC)
endif
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),2,LoadInteger(PR,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),2)==0 then
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set MD=null
endfunction
function oa takes nothing returns nothing
local unit Hw=MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
local unit Nx=GetEnumUnit()
local integer MC=GetHeroStr(Hw,true)/3
local timer He
call nc(Nx,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Nx)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarTarget.mdl",Hw,"overhead"))
call TimerStart(He,7,true,function m6)
set He=null
set Nx=null
set Hw=null
endfunction
function ob takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetEnumUnit()
local integer MC=1000+GetHeroInt(Hw,true)/3
local integer Pf=150+GetHeroInt(Hw,true)/17
local timer He
call nc(Nx,MC)
call ne(Nx,Pf)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Nx)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveInteger(PR,GetHandleId(He),3,Pf)
call TimerStart(He,35,true,function m6)
set He=null
set Nx=null
set Hw=null
endfunction
function oc takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetEnumUnit()
local integer MC=500+GetHeroInt(Hw,true)/4
local integer Pf=100+GetHeroInt(Hw,true)/17
local timer He
call nc(Nx,MC)
call ne(Nx,Pf)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Nx)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveInteger(PR,GetHandleId(He),3,Pf)
call TimerStart(He,35,true,function m6)
set He=null
set Nx=null
set Hw=null
endfunction
function od takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetEnumUnit()
local integer MC=300+GetHeroInt(Hw,true)/5
local integer Pf=50+GetHeroInt(Hw,true)/20
local timer He
call nc(Nx,MC)
call ne(Nx,Pf)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Nx)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveInteger(PR,GetHandleId(He),3,Pf)
call TimerStart(He,35,true,function m6)
set He=null
set Nx=null
set Hw=null
endfunction
function oe takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetEnumUnit()
local integer MC=1000+(GetHeroStr(Hw,true)+GetHeroInt(Hw,true)+GetHeroAgi(Hw,true))/4
local integer Pf=100+(GetHeroStr(Hw,true)+GetHeroInt(Hw,true)+GetHeroAgi(Hw,true))/10
local timer He
call nc(Nx,MC)
call ne(Nx,Pf)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Nx)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveInteger(PR,GetHandleId(He),3,Pf)
call TimerStart(He,15,true,function m6)
set He=null
set Nx=null
set Hw=null
endfunction
function of takes nothing returns nothing
local unit Hw=GetEnumUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
call DisplayTextToPlayer(Player(Mc),0,0,"|c00ffff00Время боя|r: "+I2S(Na)+"сек.")
call DisplayTextToPlayer(Player(Mc),0,0,"|c00ff9696Средний ДПС|r: "+I2S(R2I(GetUnitState(K9,UNIT_STATE_MAX_LIFE)-GetUnitState(K9,UNIT_STATE_LIFE))/Na)+" урона/сек.")
set Hw=null
endfunction
function og takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit MD=GetSpellTargetUnit()
local real NU
local unit NR
local timer He
local integer Mc
local group Me
local location Np
local boolexpr Nq
local integer Ns
local string Nt
local integer Ov
local location Ow
local real Ox
if GetUnitAbilityLevel(Hw,$41304233)==0 then
if GetSpellAbilityId()==$4131424C then
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveUnitHandle(PR,GetHandleId(He),1,MD)
call SaveInteger(PR,GetHandleId(He),2,10)
call TimerStart(He,1,true,function oZ)
elseif GetSpellAbilityId()==$41304438 then
set NU=I2R(GetUnitAbilityLevel(Hw,$41304438)*400+(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))/2)
call UnitDamageTarget(Hw,MD,NU,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call mv(Hw,R2I(NU))
call mw(Hw,R2I(NU/5))
elseif GetSpellAbilityId()==$41304549 then
set NU=I2R((GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))/3)
call SetUnitState(MD,UNIT_STATE_LIFE,GetUnitState(MD,UNIT_STATE_LIFE)+NU)
elseif GetSpellAbilityId()==$41304557 then
set NU=I2R(GetUnitAbilityLevel(Hw,$41304557)*400+(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))/2)
call mz(Hw,MD,R2I(NU))
elseif GetSpellAbilityId()==$53303039 then
set NU=I2R(GetUnitAbilityLevel(Hw,$53303039)*400+(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))*3/4)
call mz(Hw,MD,R2I(NU))
elseif GetSpellAbilityId()==$41304C35 then
set Me=CreateGroup()
set Np=GetUnitLoc(Hw)
set Nq=Condition(function mo)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),600,Nq)
call ForGroup(Me,function oe)
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
elseif GetSpellAbilityId()==$41304D37 then
set NR=CreateUnit(GetOwningPlayer(Hw),$68303348,GetUnitX(Hw),GetUnitY(Hw),0)
call m5(NR,15)
set Ns=GetUnitAbilityLevel(Hw,$41304D37)*200+(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true)/2)
call nc(NR,Ns)
elseif GetSpellAbilityId()==$41304D38 then
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveUnitHandle(PR,GetHandleId(He),1,MD)
call SaveInteger(PR,GetHandleId(He),2,6)
call TimerStart(He,1,true,function oY)
elseif GetSpellAbilityId()==$41304E43 then
set Np=GetSpellTargetLoc()
set NR=CreateUnitAtLoc(Player(0),$68303739,Np,0)
set Nt=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Nt="Abilities\\Spells\\NightElf\\Cyclone\\CycloneTarget.mdl"
endif
call AddSpecialEffectTarget(Nt,NR,"origin")
call SetUnitVertexColor(NR,255,0,0,255)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,NR)
call SaveInteger(Nr,GetHandleId(He),2,8)
call TimerStart(He,1,true,function oX)
set He=null
call RemoveLocation(Np)
set Np=null
elseif GetSpellAbilityId()==$41304D39 then
set Ns=500+GetHeroInt(MV[GetPlayerId(GetOwningPlayer(Hw))],true)/2
set Ov=50+GetHeroInt(MV[GetPlayerId(GetOwningPlayer(Hw))],true)/20
call nc(MD,Ns)
call ne(MD,Ov)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,MD)
call SaveInteger(PR,GetHandleId(He),2,Ns)
call SaveInteger(PR,GetHandleId(He),3,Ov)
call TimerStart(He,10,true,function m6)
set He=null
elseif GetSpellAbilityId()==$41304E44 then
set Np=GetSpellTargetLoc()
set NR=CreateUnitAtLoc(Player(0),$68303739,Np,0)
call AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Cyclone\\CycloneTarget.mdl",NR,"origin")
call SetUnitVertexColor(NR,0,255,0,255)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,NR)
call SaveInteger(Nr,GetHandleId(He),2,8)
call TimerStart(He,1,true,function oW)
set He=null
call RemoveLocation(Np)
set Np=null
elseif GetSpellAbilityId()==$41304957 then
if nH(Hw,$49304353) or nH(Hw,$49304448) then
set Ns=3000+GetHeroStr(Hw,true)/3
elseif nH(Hw,$4930445A) or nH(Hw,$49304634) then
set Ns=5000+GetHeroStr(Hw,true)/2
elseif nH(Hw,$4930464D) or nH(Hw,$49304742) then
set Ns=5000+GetHeroStr(Hw,true)
endif
set Me=CreateGroup()
set Np=GetUnitLoc(Hw)
set Nq=Condition(function mp)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),600,Nq)
set Nw=Ns
call ForGroup(Me,function mx)
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
elseif GetSpellAbilityId()==$41305445 then
call UnitAddAbility(Hw,$41305442)
if nH(Hw,$49304537) or nH(Hw,$49304638) then
call SetUnitAbilityLevel(Hw,$41305442,2)
elseif nH(Hw,$49304651) or nH(Hw,$49304746) then
call SetUnitAbilityLevel(Hw,$41305442,3)
endif
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),2,Hw)
call TimerStart(He,7,false,function oU)
set He=null
elseif GetSpellAbilityId()==$41305542 then
set NU=I2R((GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))*5)
call UnitDamageTarget(Hw,MD,NU,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Np=GetUnitLoc(MD)
set NR=CreateUnitAtLoc(Player(0),$68303739,Np,0)
call UnitAddAbility(NR,$41305530)
call IssueTargetOrder(NR,"innerfire",MD)
call m5(NR,2)
call RemoveLocation(Np)
set Np=null
elseif GetSpellAbilityId()==$41313045 then
set Mc=GetPlayerId(GetOwningPlayer(Hw))
if GetOwningPlayer(MD)==Player(PLAYER_NEUTRAL_AGGRESSIVE) or GetOwningPlayer(MD)==Player(Mc) then
if GetUnitLevel(MD)<=10 then
if Ub[Mc+150]!=MD then
call RemoveUnit(Ub[Mc+150])
call SetUnitOwner(MD,GetOwningPlayer(Hw),true)
set Ub[Mc+150]=MD
call UnitAddAbility(MD,$41303758)
call UnitApplyTimedLife(MD,$42544C46,250)
set Mc=GetPlayerId(GetOwningPlayer(Hw))+1
set Ns=GetHeroStr(Hw,true)+GetHeroStr(Hw,true)*UO[Mc]/100
call nc(MD,Ns)
else
call UnitApplyTimedLife(MD,$42544C46,250)
endif
endif
endif
elseif GetSpellAbilityId()==$41305531 then
set Np=GetSpellTargetLoc()
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",Np))
call TriggerSleepAction(.8)
set Ns=0
loop
set Ow=nN(Np,GetRandomReal(50,450),GetRandomReal(0,360))
set NR=CreateUnitAtLoc(Player(0),$68303739,Ow,0)
set Nt=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Nt="war3mapImported\\Item_Shard_Purple.mdl"
endif
call AddSpecialEffectTarget(Nt,NR,"overhead")
call SetUnitVertexColor(NR,0,255,0,255)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,NR)
call SaveInteger(Nr,GetHandleId(He),2,5)
call TimerStart(He,1,true,function oT)
set He=null
call RemoveLocation(Ow)
set Ow=null
set Ns=Ns+1
exitwhen Ns>6
endloop
call RemoveLocation(Np)
set Np=null
elseif GetSpellAbilityId()==$41305533 then
call UnitAddAbility(Hw,$41304837)
set Ns=GetHeroStr(Hw,true)+300
if nH(Hw,$49304531) or nH(Hw,$49304635) then
set Ns=GetHeroStr(Hw,true)+1000
elseif nH(Hw,$4930464E) or nH(Hw,$49304743) then
set Ns=GetHeroStr(Hw,true)*2+500
endif
call nc(MD,Ns)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),2,Ns)
call TimerStart(He,8,true,function m6)
set He=null
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),2,9)
call TimerStart(He,1,true,function oS)
set He=null
elseif GetSpellAbilityId()==$41305756 then
set Me=CreateGroup()
set Np=GetUnitLoc(Hw)
set Nq=Condition(function mo)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),1000,Nq)
call ForGroup(Me,function od)
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
elseif GetSpellAbilityId()==$41305757 then
set Me=CreateGroup()
set Np=GetUnitLoc(Hw)
set Nq=Condition(function mo)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),1000,Nq)
call ForGroup(Me,function oc)
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
elseif GetSpellAbilityId()==$41305A38 then
set Me=CreateGroup()
set Np=GetUnitLoc(Hw)
set Nq=Condition(function mo)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),1000,Nq)
call ForGroup(Me,function ob)
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
elseif GetSpellAbilityId()==$41305143 then
set Np=GetUnitLoc(MD)
call mu(Hw,MD,GetHeroStr(MV[GetPlayerId(GetOwningPlayer(Hw))],true)*5)
set NR=CreateUnitAtLoc(Player(0),$68303739,Np,0)
call m5(NR,1)
call UnitAddAbility(NR,$4131324E)
call IssueTargetOrder(NR,"creepthunderbolt",MD)
call RemoveLocation(Np)
set NR=null
set Np=null
elseif GetSpellAbilityId()==$41313237 then
set Me=CreateGroup()
set Np=GetUnitLoc(Hw)
set Nq=Condition(function mo)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),600,Nq)
call ForGroup(Me,function oa)
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
set Np=GetUnitLoc(Hw)
set Me=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),300,Nq)
set Nw=500+GetHeroStr(MV[GetPlayerId(GetOwningPlayer(Hw))],true)*4
set Ps=MV[GetPlayerId(GetOwningPlayer(Hw))]
call ForGroup(Me,function m3)
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
elseif GetSpellAbilityId()==$41304A49 then
set Me=CreateGroup()
set Np=GetUnitLoc(K9)
set Nq=Condition(function mo)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),1500,Nq)
call ForGroup(Me,function of)
call DestroyBoolExpr(Nq)
call DestroyGroup(Me)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
call UnitRemoveAbility(K9,$41304545)
call SetUnitState(K9,UNIT_STATE_LIFE,$5F5E0FF)
elseif GetSpellAbilityId()==$41305934 then
call UnitAddAbility(GetSpellTargetUnit(),$41305933)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,GetSpellTargetUnit())
call SaveInteger(Nr,GetHandleId(He),2,0)
call TimerStart(He,1,true,function oQ)
set He=null
elseif GetSpellAbilityId()==$41305935 then
set Np=GetUnitLoc(Hw)
set Ow=GetUnitLoc(GetSpellTargetUnit())
set Ox=I2R(GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))/50*DistanceBetweenPoints(Np,Ow)
call UnitDamageTarget(Hw,GetSpellTargetUnit(),Ox,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call mv(Hw,R2I(Ox/2))
call RemoveLocation(Np)
call RemoveLocation(Ow)
set Np=null
set Ow=null
elseif GetSpellAbilityId()==$41305849 and IsUnitType(Hw,UNIT_TYPE_HERO) then
set Np=GetUnitLoc(Hw)
set Ow=nN(Np,150,0)
call CreateItem($72616D33,GetLocationX(Ow),GetLocationY(Ow))
call RemoveLocation(Ow)
set Ow=nN(Np,150,120)
call CreateItem($72616D32,GetLocationX(Ow),GetLocationY(Ow))
call RemoveLocation(Ow)
set Ow=nN(Np,150,240)
call CreateItem($72616D31,GetLocationX(Ow),GetLocationY(Ow))
call RemoveLocation(Ow)
call RemoveLocation(Np)
set Ow=null
set Np=null
elseif GetSpellAbilityId()==$41313742 then
set Np=GetSpellTargetLoc()
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Np,0)
set Nt=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Nt="Abilities\\Spells\\NightElf\\Cyclone\\CycloneTarget.mdl"
endif
call AddSpecialEffectTarget(Nt,NR,"origin")
call SetUnitVertexColor(NR,255,0,255,255)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,NR)
call SaveInteger(Nr,GetHandleId(He),2,8)
call TimerStart(He,1,true,function oV)
set He=null
call RemoveLocation(Np)
set Np=null
endif
endif
if GetSpellAbilityId()==$41304636 then
set Mc=GetPlayerId(GetOwningPlayer(Hw))
if GetUnitAbilityLevel(MV[Mc],$41304B54)>=1 then
call UnitRemoveAbility(MV[Mc],$41304B54)
call DisplayTextToPlayer(Player(Mc),0,0,"Автоклик |c00ff0000выключен")
else
call UnitAddAbility(MV[Mc],$41304B54)
call DisplayTextToPlayer(Player(Mc),0,0,"Автоклик |c0000ff00включен")
endif
elseif GetSpellAbilityId()==$41304252 then
set Mc=GetPlayerId(GetOwningPlayer(Hw))+1
if GetOwningPlayer(Hw)==GetLocalPlayer() then
call MultiboardDisplay(OE[10],true)
call MultiboardMinimize(OE[10],false)
endif
elseif GetSpellAbilityId()==$41313738 then
set Mc=GetPlayerId(GetOwningPlayer(Hw))
call SetUnitAbilityLevel(MV[Mc],$41313041,GetUnitAbilityLevel(MV[Mc],$41313041)-1)
elseif GetSpellAbilityId()==$41313737 then
set Mc=GetPlayerId(GetOwningPlayer(Hw))
call SetUnitAbilityLevel(MV[Mc],$41313041,GetUnitAbilityLevel(MV[Mc],$41313041)+1)
elseif GetSpellAbilityId()==$41305134 then
set Mc=GetPlayerId(GetOwningPlayer(Hw))
call nO(Player(Mc))
elseif GetSpellAbilityId()==$41305131 then
set Mc=GetPlayerId(GetOwningPlayer(Hw))
set Np=Location(-15420,2222)
call SetUnitPositionLoc(MV[Mc],Np)
call KillUnit(MV[Mc])
set Rq[Mc+1]=Rq[Mc+1]-1
call RemoveLocation(Np)
set Np=null
elseif GetSpellAbilityId()==$4130344D then
set Mc=GetPlayerId(GetOwningPlayer(Hw))+1
if Vy[Mc]==true then
set Vy[Mc]=false
if GetOwningPlayer(Hw)==GetLocalPlayer() then
call MultiboardDisplay(OE[Mc],true)
call MultiboardMinimize(OE[Mc],false)
endif
else
set Vy[Mc]=true
if GetOwningPlayer(Hw)==GetLocalPlayer() then
call MultiboardDisplay(Pd,true)
call MultiboardMinimize(Pd,false)
endif
endif
elseif GetSpellAbilityId()==$41303436 then
set Mc=GetPlayerId(GetOwningPlayer(Hw))
if GetUnitAbilityLevel(MV[Mc],$41313059)>=1 then
call UnitRemoveAbility(MV[Mc],$41313059)
call DisplayTextToPlayer(Player(Mc),0,0,"Отображение урона и исцеления |c00ff0000выключено")
else
call UnitAddAbility(MV[Mc],$41313059)
call DisplayTextToPlayer(Player(Mc),0,0,"Отображение урона и исцеления |c0000ff00включено")
endif
elseif GetSpellAbilityId()==$41304635 then
set Mc=GetPlayerId(GetOwningPlayer(Hw))
if GetUnitAbilityLevel(MV[Mc],$41303944)>=1 then
call UnitRemoveAbility(MV[Mc],$41303944)
call SetPlayerName(Player(Mc),OF[Mc]+OG[Mc])
call DisplayTextToPlayer(Player(Mc),0,0,"Приписка трофея |c00ff0000выключена")
else
call UnitAddAbility(MV[Mc],$41303944)
call DisplayTextToPlayer(Player(Mc),0,0,"Приписка трофея |c0000ff00включена")
call SetPlayerName(Player(Mc),PT[Mc])
endif
endif
if GetSpellAbilityId()!=$41304656 and GetSpellAbilityId()!=$41304653 and GetSpellAbilityId()!=$41313530 and GetSpellAbilityId()!=$41313232 and GetSpellAbilityId()!=$4131364C and GetSpellAbilityId()!=$41305845 then
if nH(Hw,$49313147) or nH(Hw,$49313136) or nH(Hw,$49313059) or nH(Hw,$49313143) or nH(Hw,$49313132) or nH(Hw,$49313130) or nH(Hw,$49313141) or nH(Hw,$49313057) or nH(Hw,$49313134) or nH(Hw,$49313145) or nH(Hw,$49313055) or nH(Hw,$49313138) then
if IsUnitType(Hw,UNIT_TYPE_HERO) and GetUnitAbilityLevel(Hw,GetSpellAbilityId())>=1 and GetRandomInt(1,4)==1 and Pu[GetPlayerId(GetOwningPlayer(Hw))]!=1 then
set Np=GetUnitLoc(Hw)
set Ow=nN(Np,100,GetRandomReal(1,360))
if GetRandomInt(1,3)==1 then
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$6E303642,Ow,0)
elseif GetRandomInt(1,2)==1 then
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$6E303038,Ow,0)
elseif GetRandomInt(1,1)==1 then
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$6E303039,Ow,0)
endif
set Pu[GetPlayerId(GetOwningPlayer(Hw))]=1
call nc(NR,GetHeroStr(Hw,true)+GetHeroInt(Hw,true)+GetHeroAgi(Hw,true))
call m5(NR,7)
call RemoveLocation(Np)
call RemoveLocation(Ow)
set Np=null
set Ow=null
set NR=null
endif
endif
endif
set Hw=null
set MD=null
set He=null
set NR=null
endfunction
function oh takes nothing returns nothing
call SetUnitInvulnerable(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),false)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function oi takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),2),$4162756E)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function oj takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit MD=GetSpellTargetUnit()
local real NU
local unit NR
local timer He
local integer Mc
local group Nb
local boolexpr Vz
local location Hv
if GetUnitAbilityLevel(Hw,$41304233)==0 then
if GetSpellAbilityId()==$41313744 then
call SetUnitInvulnerable(Hw,true)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call TimerStart(He,3,false,function oh)
set He=null
elseif GetSpellAbilityId()==$4131354D then
if IsUnitType(Hw,UNIT_TYPE_HERO)==true then
set NU=GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*.15
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)-NU)
set Hv=GetUnitLoc(Hw)
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),700,Vz)
set Nw=R2I(NU)
call ForGroup(Nb,function my)
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
set Nb=null
set Vz=null
set Nb=CreateGroup()
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),700,Vz)
set Nw=R2I(NU*2)
set Ps=Hw
call ForGroup(Nb,function m0)
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
set Nb=null
set Vz=null
call RemoveLocation(Hv)
set Hv=null
endif
elseif GetSpellAbilityId()==$41313951 then
call UnitAddAbility(MD,$4162756E)
set NU=I2R(GetHeroAgi(Hw,true)*5)
if nH(Hw,$49313151) or nH(Hw,$4931314D) then
set NU=I2R(GetHeroAgi(Hw,true)*10)
elseif nH(Hw,$4931314E) or nH(Hw,$4931314F) then
set NU=I2R(GetHeroAgi(Hw,true)*15)
endif
call mu(Hw,MD,R2I(NU))
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),2,MD)
call TimerStart(He,4,false,function oi)
set He=null
elseif GetSpellAbilityId()==$41305057 then
set Hv=GetUnitLoc(Hw)
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303047,Hv,0)
set Mc=GetHeroStr(Hw,true)
call nc(NR,Mc)
call m5(NR,20)
call RemoveLocation(Hv)
set Hv=null
set NR=null
endif
endif
if GetUnitAbilityLevel(Hw,$42303151)>=1 then
call UnitRemoveAbility(Hw,$42303151)
if GetUnitTypeId(Hw)==$4830314B or GetUnitTypeId(Hw)==$48303735 then
call mv(Hw,R2I(GetUnitState(Hw,UNIT_STATE_MAX_LIFE))/6)
call mw(Hw,R2I(GetUnitState(Hw,UNIT_STATE_MAX_MANA))/6)
else
call mv(Hw,R2I(GetUnitState(Hw,UNIT_STATE_MAX_LIFE))/3)
call mw(Hw,R2I(GetUnitState(Hw,UNIT_STATE_MAX_MANA))/3)
endif
endif
set Hw=null
set MD=null
set He=null
set NR=null
endfunction
function ok takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function og)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function oj)
set He=null
endfunction
function ol takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E687963) then
return false
endif
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function om takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (RectContainsUnit(EK,GetTriggerUnit())==true) then
return false
endif
if not (GetRandomInt(1,8)==1) then
return false
endif
return true
endfunction
function on takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function oo takes nothing returns nothing
call IssueTargetOrderBJ(GetEnumUnit(),"attack",GetTriggerUnit())
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())*1.5,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
endfunction
function op takes nothing returns boolean
if not (GetSpellAbilityId()==$41305036) then
return false
endif
return true
endfunction
function oq takes nothing returns boolean
if not (GetSpellAbilityId()==$41303758) then
return false
endif
return true
endfunction
function os takes nothing returns boolean
if GetUnitTypeId(GetSpellTargetUnit())==$68303351 then
return true
endif
if GetUnitTypeId(GetSpellTargetUnit())==$65303058 then
return true
endif
return false
endfunction
function ot takes nothing returns boolean
if not os() then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function ou takes nothing returns boolean
if not (GetSpellTargetUnit()==Lr) then
return false
endif
return true
endfunction
function ov takes nothing returns boolean
if not (GetSpellAbilityId()==$41313550) then
return false
endif
return true
endfunction
function ow takes nothing returns boolean
if not (GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$416E6532)>=1) then
return false
endif
return true
endfunction
function ox takes nothing returns boolean
if not (GetSpellAbilityId()==$41305133) then
return false
endif
return true
endfunction
function oy takes nothing returns nothing
call UnitRemoveBuffBJ($42303539,GetTriggerUnit())
if ol() then
call SetUnitAbilityLevelSwapped($4131394B,GetTriggerUnit(),GetUnitAbilityLevel(GetTriggerUnit(),$4131394B)+1)
call SetUnitAbilityLevelSwapped($4131394F,GetTriggerUnit(),GetUnitAbilityLevel(GetTriggerUnit(),$4131394F)+1)
call CreateTextTagUnitBJ("Я становлюсь сильнее!",GetSpellAbilityUnit(),0,15.,0.,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,1.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),0.)
else
endif
if om() then
set V1=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303453,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
else
endif
if op() then
set V2=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(600.,V2,Condition(function on))
call ForGroupBJ(ST,function oo)
call DestroyGroup(ST)
call RemoveLocation(V2)
else
endif
if oq() then
set V1=GetUnitLoc(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1])
call SetUnitPositionLoc(GetTriggerUnit(),V1)
call RemoveLocation(V1)
else
endif
if ot() then
call KillUnit(GetTriggerUnit())
else
endif
if ou() then
call SetUnitLifePercentBJ(GetTriggerUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())-GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())/5.)
call CreateTextTagUnitBJ("|c007d7d7dДАВАЙ, ЗАКЛИНАЙ МЕНЯ!!!",Lr,0,10,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
else
endif
if ov() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*20.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
if ox() then
if ow() then
call UnitRemoveAbility(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$416E6532)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Контроль способностей |c00ff0000выключен")
else
call UnitAddAbility(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$416E6532)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Контроль способностей |c0000ff00включен")
endif
else
endif
endfunction
function oz takes nothing returns nothing
set V0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(V0,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(V0,function oy)
endfunction
function o0 takes unit Hw,rect NU,location Hv returns nothing
if RectContainsUnit(NU,MV[GetPlayerId(GetOwningPlayer(Hw))]) then
call SetUnitPositionLoc(MV[GetPlayerId(GetOwningPlayer(Hw))],Hv)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(GetLocationX(Hv),GetLocationY(Hv),0)
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\MassTeleportCaster.mdx",MV[GetPlayerId(GetOwningPlayer(Hw))],"origin"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\MASSTeleportTo.MDX",MV[GetPlayerId(GetOwningPlayer(Hw))],"origin"))
call RemoveLocation(Hv)
endif
endfunction
function o1 takes nothing returns nothing
local unit Hw=GetTriggerUnit()
if GetSpellAbilityId()==$41313931 then
call o0(Hw,Gd,Location(-15680,-8340))
call o0(Hw,J,Location(-4150,-9050))
call o0(Hw,BD,Location(-236,-9377))
call o0(Hw,x,Location(-8970,7888))
call o0(Hw,Di,Location(-8070,15170))
call o0(Hw,B7,Location(7450,-2190))
call o0(Hw,GJ,Location(10570,5000))
call o0(Hw,D6,Location(11000,-7850))
call o0(Hw,FK,Location(-12900,-9656))
call o0(Hw,FJ,Location(21100,10880))
call o0(Hw,FI,Location(-12600,-3000))
call o0(Hw,DL,Location(-2110,-900))
call o0(Hw,Ed,Location(13030,4750))
call o0(Hw,Cs,Location(-11900,2170))
call o0(Hw,Fn,Location(-4950,-12200))
call o0(Hw,EO,Location(-8950,5800))
call o0(Hw,EN,Location(-8950,5800))
call o0(Hw,Gt,Location(2230,3290))
call o0(Hw,Gz,Location(15500,80))
call o0(Hw,Gx,Location(5755,-4600))
call o0(Hw,FW,Location(2950,11880))
call o0(Hw,FX,Location(-11400,1050))
call o0(Hw,FG,Location(-1412,10400))
call o0(Hw,FL,Location(23300,11100))
call o0(Hw,GW,Location(18450,1680))
call o0(Hw,Ey,Location(6383,7524))
call o0(Hw,EK,Location(6383,7524))
call o0(Hw,FH,Location(6383,7524))
call o0(Hw,D2,Location(-2460,13180))
endif
set Hw=null
endfunction
function o2 takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function o1)
set He=null
endfunction
function o3 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call UnitRemoveAbility(Hw,$41305038)
call UnitRemoveAbility(Hw,$41313438)
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hw=null
endfunction
function o4 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local real Me
local group Np
local location Nq
local boolexpr Ns
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",NR,"origin"))
set Me=I2R(GetUnitAbilityLevel(Hw,$41313430)*50+GetHeroInt(Hw,true)/2)*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
if GetUnitAbilityLevel(NR,$41304C59)==2 then
call mv(NR,R2I(Me/2))
set Np=CreateGroup()
set Nq=GetUnitLoc(NR)
set Ns=Condition(function mp)
call GroupEnumUnitsInRange(Np,GetLocationX(Nq),GetLocationY(Nq),400,Ns)
set Nw=R2I(Me/2)
call ForGroup(Np,function mx)
call DestroyGroup(Np)
call DestroyBoolExpr(Ns)
call RemoveLocation(Nq)
set Nq=null
set Np=null
set Ns=null
else
call mv(NR,R2I(Me))
endif
else
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),3))
call UnitRemoveAbility(NR,$41304C59)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
endfunction
function o5 takes nothing returns nothing
call PauseUnit(GetEnumUnit(),false)
call UnitRemoveAbility(GetEnumUnit(),$41313438)
endfunction
function o6 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),V4[GetPlayerId(GetOwningPlayer(Ps))])==false then
call GroupAddUnit(V4[GetPlayerId(GetOwningPlayer(Ps))],GetEnumUnit())
call ms(Ps,GetEnumUnit(),Nw)
call PauseUnit(GetEnumUnit(),true)
if GetUnitAbilityLevel(Ps,$41303853)>=1 then
call UnitAddAbility(GetEnumUnit(),$41313438)
call SetUnitAbilityLevel(GetEnumUnit(),$41313438,8)
endif
endif
endfunction
function o7 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local group Me
local location Np
local boolexpr Nq
local real Ns
set Ps=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
set Me=CreateGroup()
set Np=GetUnitLoc(Hw)
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),400,Nq)
set Ns=I2R(GetUnitAbilityLevel(Ps,$4131335A)*(1500+GetHeroInt(Ps,true)*5))*N1[GetPlayerId(GetOwningPlayer(Ps))+1]
set Nw=R2I(Ns)
call ForGroup(Me,function o6)
call DestroyGroup(Me)
call DestroyBoolExpr(Nq)
set Me=null
set Nq=null
else
call ForGroup(V4[GetPlayerId(GetOwningPlayer(Ps))],function o5)
call DestroyGroup(V4[GetPlayerId(GetOwningPlayer(Ps))])
call RemoveUnit(Hw)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetUnitTypeId(Ps),10)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set Np=null
endfunction
function o8 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),V3[GetPlayerId(GetOwningPlayer(Ps))])==false then
call GroupAddUnit(V3[GetPlayerId(GetOwningPlayer(Ps))],GetEnumUnit())
call mv(GetEnumUnit(),Nw)
endif
endfunction
function o9 takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),UP[GetPlayerId(GetOwningPlayer(Ps))])==false then
call GroupAddUnit(UP[GetPlayerId(GetOwningPlayer(Ps))],GetEnumUnit())
call ms(Ps,GetEnumUnit(),Nw)
endif
endfunction
function pB takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2)
local real Me
local real Np
local real Nq
local real Ns
local real Nt
local real Ov
local real Ow
local location Ox
local string Oy
local group Oz
local boolexpr O1
local real O2
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)<=450 then
set Me=GetLocationX(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),3))
set Np=GetLocationY(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),3))
set Nq=GetUnitX(Hw)
set Ns=GetUnitY(Hw)
set Nt=Atan2(Np-Ns,Me-Nq)
set Ov=nK(GetUnitX(Hw)+2*Cos(Nt))
set Ow=nL(GetUnitY(Hw)+2*Sin(Nt))
set Ox=Location(Ov,Ow)
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),0,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),0)+1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),0)==45 then
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),0,0)
set Oy=""
if GetUnitAbilityLevel(Hw,$4162756E)>=1 then
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Oy="war3mapImported\\IceSlam.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Oy,Ox))
else
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Oy="Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(Oy,Ox))
endif
endif
if IsTerrainPathable(GetLocationX(Ox),GetLocationY(Ox),PATHING_TYPE_WALKABILITY)==false then
call SetUnitFacingTimed(Hw,nD(GetLocationX(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),3)),GetLocationY(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),3)),GetLocationX(Ox),GetLocationY(Ox)),0)
call SetUnitPositionLoc(Hw,Ox)
set Oz=CreateGroup()
set O1=Condition(function mq)
call GroupEnumUnitsInRange(Oz,GetLocationX(Ox),GetLocationY(Ox),300,O1)
set Ps=Hw
set O2=I2R(50*GetUnitAbilityLevel(Hw,$41313355)+GetHeroInt(Hw,true)*3)*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(O2)
if GetUnitAbilityLevel(Hw,$4162756E)>=1 then
call nW(Oz,$4131324E,2,"creepthunderbolt")
set Nw=Nw*2
endif
call ForGroup(Oz,function o9)
call DestroyGroup(Oz)
call DestroyBoolExpr(O1)
set Oz=null
set O1=null
set Oz=CreateGroup()
set O1=Condition(function mp)
call GroupEnumUnitsInRange(Oz,GetLocationX(Ox),GetLocationY(Ox),300,O1)
set Ps=Hw
set O2=I2R(50*GetUnitAbilityLevel(Hw,$41313355)+GetHeroInt(Hw,true)*2)*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(O2)
call ForGroup(Oz,function o8)
call DestroyGroup(Oz)
call DestroyBoolExpr(O1)
set Oz=null
set O1=null
else
call DestroyGroup(V3[GetPlayerId(GetOwningPlayer(Hw))])
call PauseUnit(Hw,false)
call SetUnitInvulnerable(Hw,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4131375A,true)
call UnitRemoveAbility(Hw,$4131375A)
call UnitRemoveAbility(Hw,$4230314D)
call UnitRemoveAbility(Hw,$4162756E)
call RemoveLocation(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ox)
set Ox=null
endif
else
call DestroyGroup(V3[GetPlayerId(GetOwningPlayer(Hw))])
call PauseUnit(Hw,false)
call SetUnitInvulnerable(Hw,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4131375A,true)
call UnitRemoveAbility(Hw,$4131375A)
call UnitRemoveAbility(Hw,$4230314D)
call UnitRemoveAbility(Hw,$4162756E)
call RemoveLocation(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function pC takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),7)
local real Me
local location Np
local location Nq
local group Ns
local boolexpr Nt
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
set Ps=MV[GetPlayerId(GetOwningPlayer(Hw))]
set Me=I2R(20*GetUnitAbilityLevel(Ps,$41313353)+GetHeroInt(Ps,true)/3)*N1[GetPlayerId(GetOwningPlayer(Ps))+1]
set Nw=R2I(Me)
set Np=GetUnitLoc(NR)
set Nq=nN(Np,17,GetUnitFacing(NR))
call SetUnitPositionLoc(NR,Nq)
set Ns=CreateGroup()
set Nt=Condition(function mq)
call GroupEnumUnitsInRange(Ns,GetLocationX(Np),GetLocationY(Np),200,Nt)
call ForGroup(Ns,function o9)
call DestroyGroup(Ns)
call DestroyBoolExpr(Nt)
set Ns=null
set Nt=null
set Ns=null
set Ns=CreateGroup()
set Nt=Condition(function mp)
call GroupEnumUnitsInRange(Ns,GetLocationX(Np),GetLocationY(Np),200,Nt)
set Ps=MV[GetPlayerId(GetOwningPlayer(Hw))]
set Me=I2R(20*GetUnitAbilityLevel(Ps,$41313353)+GetHeroInt(Ps,true)/3)*TS[GetPlayerId(GetOwningPlayer(Ps))+1]
set Nw=R2I(Me)
call ForGroup(Ns,function o8)
call DestroyGroup(Ns)
call DestroyBoolExpr(Nt)
set Ns=null
set Nt=null
call RemoveLocation(Np)
call RemoveLocation(Nq)
set Np=null
set Nq=null
else
call DestroyGroup(V3[GetPlayerId(GetOwningPlayer(Hw))])
call KillUnit(NR)
call RemoveUnit(NR)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
endfunction
function pD takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local location Me
local unit Np
local timer Nq
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 and GetUnitAbilityLevel(Hw,$4162756E)>=1 then
call SetUnitPositionLoc(Hw,LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),1))
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)+1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)==15 then
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),3,0)
call GroupClear(UP[GetPlayerId(GetOwningPlayer(Hw))])
set Me=GetUnitLoc(Hw)
set Np=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Me,GetUnitFacing(Hw))
call SetUnitPathing(Np,false)
call AddSpecialEffectTarget("war3mapImported\\WindMissle.mdx",Np,"chest")
set Ps=MV[GetPlayerId(GetOwningPlayer(Hw))]
call GroupClear(UP[GetPlayerId(GetOwningPlayer(Ps))])
call DestroyGroup(V3[GetPlayerId(GetOwningPlayer(Ps))])
set V3[GetPlayerId(GetOwningPlayer(Ps))]=CreateGroup()
call GroupClear(V3[GetPlayerId(GetOwningPlayer(Ps))])
set Nq=CreateTimer()
call SaveInteger(Nr,GetHandleId(Nq),1,50)
call SaveUnitHandle(Nr,GetHandleId(Nq),2,Hw)
call SaveUnitHandle(Nr,GetHandleId(Nq),7,Np)
call TimerStart(Nq,.01,true,function pC)
set Nq=null
endif
else
call UnitRemoveAbility(Hw,$4162756E)
call UnitRemoveAbility(Hw,$41313354)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41313353,true)
call SetUnitTurnSpeed(Hw,.4)
call RemoveLocation(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set Np=null
set Me=null
endfunction
function pF takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local location Hv=GetUnitLoc(Hw)
local location Nl
local group Nb
local timer He
local boolexpr Nc
local unit NR
local unit Nx=GetSpellTargetUnit()
local integer Me
local string Np
if GetSpellAbilityId()==$41313351 then
set Hv=GetSpellTargetLoc()
set Me=80
loop
set Nl=nN(Hv,Me,GetUnitFacing(Nx))
call CreateDestructable($41547463,GetLocationX(Nl),GetLocationY(Nl),0,1,0)
call RemoveLocation(Nl)
set Nl=null
set Me=Me+80
exitwhen Me>=1500
endloop
if GetUnitAbilityLevel(Hw,$41313442)>=1 then
set N0[Mc]=N0[Mc]+1
if N0[Mc]==3 then
call nX(Hw,"|c006969ff"+I2S(N0[Mc])+"!!!",.043,255,255,255)
set N0[Mc]=0
call UnitRemoveAbility(Hw,$41313351)
call UnitAddAbility(Hw,$41313351)
else
call nX(Hw,"|c006969ff"+I2S(N0[Mc]),.033,255,255,255)
endif
endif
elseif GetSpellAbilityId()==$41313353 then
set NR=GetTriggerUnit()
if GetUnitAbilityLevel(Hw,$41313442)>=1 then
set N0[Mc]=N0[Mc]+1
if N0[Mc]==3 then
call nX(Hw,"|c006969ff"+I2S(N0[Mc])+"!!!",.043,255,255,255)
set N0[Mc]=0
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Hv,GetUnitFacing(Hw))
call SetUnitPathing(NR,false)
call AddSpecialEffectTarget("war3mapImported\\jingzi_fenghuang01.mdx",NR,"overhead")
call m5(NR,13)
else
call nX(Hw,"|c006969ff"+I2S(N0[Mc]),.033,255,255,255)
set NR=GetTriggerUnit()
endif
endif
call UnitAddAbility(NR,$4162756E)
call UnitAddAbility(NR,$41313354)
call SetPlayerAbilityAvailable(GetOwningPlayer(NR),$41313353,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(NR),$41313354,true)
call SetUnitTurnSpeed(NR,3)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,NR)
call SaveLocationHandle(Nr,GetHandleId(He),1,Hv)
call SaveInteger(Nr,GetHandleId(He),2,251)
call SaveInteger(Nr,GetHandleId(He),3,0)
call TimerStart(He,.05,true,function pD)
set He=null
elseif GetSpellAbilityId()==$41313354 then
call UnitRemoveAbility(Hw,$4162756E)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41313353,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41313354,false)
elseif GetSpellAbilityId()==$41313355 then
call UnitAddAbility(Hw,$4131375A)
set Nl=GetSpellTargetLoc()
call IssueImmediateOrder(Hw,"windwalk")
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4131375A,false)
if GetUnitAbilityLevel(Hw,$41313442)>=1 then
set N0[Mc]=N0[Mc]+1
if N0[Mc]==3 then
call nX(Hw,"|c006969ff"+I2S(N0[Mc])+"!!!",.043,255,255,255)
set N0[Mc]=0
call UnitAddAbility(Hw,$4162756E)
else
call nX(Hw,"|c006969ff"+I2S(N0[Mc]),.033,255,255,255)
endif
endif
call PauseUnit(Hw,true)
call SetUnitInvulnerable(Hw,true)
set Hv=GetUnitLoc(Hw)
call GroupClear(UP[GetPlayerId(GetOwningPlayer(Hw))])
call DestroyGroup(V3[GetPlayerId(GetOwningPlayer(Hw))])
set V3[GetPlayerId(GetOwningPlayer(Hw))]=CreateGroup()
call GroupClear(V3[GetPlayerId(GetOwningPlayer(Hw))])
set He=CreateTimer()
call SaveInteger(Nr,GetHandleId(He),1,550)
call SaveInteger(Nr,GetHandleId(He),0,0)
call SaveUnitHandle(Nr,GetHandleId(He),2,Hw)
call SaveLocationHandle(Nr,GetHandleId(He),3,Nl)
call TimerStart(He,.0017,true,function pB)
if GetUnitAbilityLevel(Hw,$41303853)>=1 then
set Mc=GetUnitAbilityLevel(Hw,$41313353)
call UnitRemoveAbility(Hw,$41313353)
call UnitAddAbility(Hw,$41313353)
call SetUnitAbilityLevel(Hw,$41313353,Mc)
endif
elseif GetSpellAbilityId()==$4131335A then
if GetUnitAbilityLevel(Hw,$41313442)>=1 then
set N0[Mc]=N0[Mc]+1
if N0[Mc]==3 then
call nX(Hw,"|c006969ff"+I2S(N0[Mc])+"!!!",.043,255,255,255)
set N0[Mc]=0
set Mc=71
else
call nX(Hw,"|c006969ff"+I2S(N0[Mc]),.033,255,255,255)
set Mc=41
endif
else
set Mc=41
endif
call GroupClear(V4[GetPlayerId(GetOwningPlayer(Hw))])
call DestroyGroup(V4[GetPlayerId(GetOwningPlayer(Hw))])
set V4[GetPlayerId(GetOwningPlayer(Hw))]=CreateGroup()
set Nl=GetSpellTargetLoc()
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Nl,GetUnitFacing(Hw))
call SetUnitPathing(NR,false)
set Np=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Np="war3mapImported\\Fire Field Energy.mdx"
endif
call AddSpecialEffectTarget(Np,NR,"origin")
call SetUnitVertexColor(NR,255,255,255,150)
call SetUnitScale(NR,1.4,1.4,1.4)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,NR)
call SaveUnitHandle(Nr,GetHandleId(He),2,Hw)
call SaveInteger(Nr,GetHandleId(He),1,Mc)
call TimerStart(He,.1,true,function o7)
set He=null
set NR=null
elseif GetSpellAbilityId()==$41313430 then
set NR=GetSpellTargetUnit()
call UnitAddAbility(NR,$41304C59)
if GetUnitAbilityLevel(Hw,$41313442)>=1 then
set N0[Mc]=N0[Mc]+1
if N0[Mc]==3 then
call nX(Hw,"|c006969ff"+I2S(N0[Mc])+"!!!",.043,255,255,255)
set N0[Mc]=0
call SetUnitAbilityLevel(NR,$41304C59,2)
else
call nX(Hw,"|c006969ff"+I2S(N0[Mc]),.033,255,255,255)
endif
endif
if GetUnitAbilityLevel(Hw,$41303853)>=1 then
set Mc=7
else
set Mc=5
endif
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,NR)
call SaveInteger(Nr,GetHandleId(He),2,Mc)
call SaveEffectHandle(Nr,GetHandleId(He),3,AddSpecialEffectTarget("war3mapImported\\IceIncenerateBuff.mdx",NR,"origin"))
call TimerStart(He,.5,true,function o4)
set He=null
elseif GetSpellAbilityId()==$41313435 then
set NR=GetSpellTargetUnit()
call UnitAddAbility(NR,$41305038)
call UnitAddAbility(NR,$41313438)
call SetUnitAbilityLevel(NR,$41313438,GetUnitAbilityLevel(Hw,$41313435))
call SetUnitAbilityLevel(NR,$41305038,GetUnitAbilityLevel(Hw,$41313435))
if GetUnitAbilityLevel(Hw,$41303853)>=1 then
call SetUnitAbilityLevel(NR,$41313438,11)
endif
if GetUnitAbilityLevel(Hw,$41313442)>=1 then
set N0[Mc]=N0[Mc]+1
if N0[Mc]==3 then
call nX(Hw,"|c006969ff"+I2S(N0[Mc])+"!!!",.043,255,255,255)
set N0[Mc]=0
set Mc=11
call UnitRemoveAbility(NR,$41313438)
else
call nX(Hw,"|c006969ff"+I2S(N0[Mc]),.033,255,255,255)
set Mc=7
endif
else
set Mc=7
endif
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,NR)
call SaveEffectHandle(Nr,GetHandleId(He),3,AddSpecialEffectTarget("war3mapImported\\Radiance Silver.mdl",NR,"chest"))
call TimerStart(He,Mc,false,function o3)
set He=null
elseif GetSpellAbilityId()==$53303059 then
set NR=GetSpellTargetUnit()
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_MAX_LIFE)*80*.01)
call SetUnitState(NR,UNIT_STATE_MANA,GetUnitState(NR,UNIT_STATE_MAX_MANA)*80*.01)
set Nl=GetUnitLoc(NR)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BlizzardEruption.mdl",NR,"chest"))
set Nb=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),1000,Nc)
call nW(Nb,$4131324E,2,"creepthunderbolt")
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
set Nc=null
set Nb=null
call RemoveLocation(Nl)
set Nl=null
endif
set Nx=null
set NR=null
set He=null
set Nl=null
set Hv=null
set Hw=null
endfunction
function pG takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local location Me
local location Np
if GetUnitTypeId(Hw)==$4F303049 and GetUnitAbilityLevel(Hw,$4162756E)>=1 then
set Me=GetUnitLoc(Hw)
set Np=GetOrderPointLoc()
call SetUnitFacingTimed(Hw,nD(GetLocationX(Me),GetLocationY(Me),GetLocationX(Np),GetLocationY(Np)),0)
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
endif
set Hw=null
endfunction
function pH takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function pF)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(He,function pG)
set He=null
endfunction
function pI takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local real Me
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),5,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),5)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),5)>=1 then
set Me=GetUnitState(Hw,UNIT_STATE_MANA)/10*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Me)
call ms(Hw,NR,Nw)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)+GetUnitState(Hw,UNIT_STATE_MAX_MANA)*.04)
call PauseUnit(NR,true)
else
call PauseUnit(Hw,false)
call PauseUnit(NR,false)
call SetUnitInvulnerable(Hw,false)
call KillUnit(GetSpellTargetUnit())
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),5)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
endfunction
function pJ takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local location Hv=GetUnitLoc(Hw)
local location Nl=GetUnitLoc(NR)
local integer Me
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),5,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),5)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),5)>=1 then
set Me=0
call SetUnitState(Hw,UNIT_STATE_LIFE,LoadReal(Nr,GetHandleId(GetExpiredTimer()),2))
call SetUnitState(Hw,UNIT_STATE_MANA,LoadReal(Nr,GetHandleId(GetExpiredTimer()),3))
if nM(Hv,Nl)>=700 or not UnitAlive(Hw) or not UnitAlive(NR) then
call UnitRemoveAbility(Hw,$41304C4E)
call UnitRemoveAbility(NR,$41304C4E)
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),6))
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),7))
call DestroyLightning(LoadLightningHandle(Nr,GetHandleId(GetExpiredTimer()),4))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),4)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedReal(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedReal(Nr,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),5)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
if HaveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),4) then
call MoveLightning(LoadLightningHandle(Nr,GetHandleId(GetExpiredTimer()),4),true,GetLocationX(Hv),GetLocationY(Hv),GetLocationX(Nl),GetLocationY(Nl))
endif
else
call UnitRemoveAbility(Hw,$41304C4E)
call UnitRemoveAbility(NR,$41304C4E)
call DestroyLightning(LoadLightningHandle(Nr,GetHandleId(GetExpiredTimer()),4))
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),6))
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),7))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),4)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedReal(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedReal(Nr,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),5)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
set Hw=null
set NR=null
endfunction
function pK takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local location Hv=GetUnitLoc(Hw)
local real NT
local group Nb
local boolexpr Nc
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\DarkLightningNova.mdx",Hv))
set NT=(GetUnitState(MV[Mc],UNIT_STATE_MANA)+I2R(GetHeroInt(MV[Mc],true)*3+GetUnitAbilityLevel(MV[Mc],$41313657)*500))*N1[GetPlayerId(GetOwningPlayer(MV[Mc]))+1]
set Nb=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),600,Nc)
set Ps=MV[Mc]
set Nw=R2I(NT)
call ForGroup(Nb,function m3)
call nW(Nb,$4131324E,1,"creepthunderbolt")
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
call RemoveUnit(Hw)
set Hw=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function pL takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local integer MC
local texttag NY
if GetUnitAbilityLevel(Hw,$41305734)>=1 then
set MC=R2I(GetUnitState(Hw,UNIT_STATE_MAX_MANA)/5)
else
set MC=R2I(GetUnitState(Hw,UNIT_STATE_MAX_MANA)/4)
endif
set NY=CreateTextTag()
call SetTextTagText(NY,"+"+I2S(MC),.023)
call SetTextTagPos(NY,GetUnitX(Hw),GetUnitY(Hw),0)
call SetTextTagColor(NY,0,0,255,255)
call SetTextTagVelocity(NY,0,.03)
call SetTextTagVisibility(NY,GetLocalPlayer()==GetOwningPlayer(Hw))
call SetTextTagFadepoint(NY,1)
call SetTextTagLifespan(NY,2)
call SetTextTagPermanent(NY,false)
call SetTextTagSuspended(NY,false)
set NY=null
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)+I2R(MC))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Blink Teal Caster.mdx",Hw,"origin"))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hw=null
endfunction
function pM takes nothing returns nothing
local unit Nx=GetEnumUnit()
if GetUnitAbilityLevel(Nx,$42303851)>=1 then
call ms(Ps,Nx,Nw*2)
else
call ms(Ps,Nx,Nw)
endif
set Nx=null
endfunction
function pN takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local location Hv=GetUnitLoc(Hw)
local location Nl
local group Nb
local timer He
local boolexpr Nc
local real NT
local unit NR
local unit Nx=GetSpellTargetUnit()
if GetSpellAbilityId()==$41305732 then
set Nl=nN(Hv,250,GetUnitFacing(Hw))
set NT=(GetUnitState(Hw,UNIT_STATE_MANA)/2+I2R(GetUnitAbilityLevel(Hw,$41305732)*100))*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MAX_MANA)*.08)
set Nb=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Nl),GetLocationY(Nl),250,Nc)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Culling Cleave Purple.mdx",Hw,"origin"))
set Ps=Hw
set Nw=R2I(NT)
call ForGroup(Nb,function pM)
call nW(Nb,$5330305A,1,"cripple")
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
elseif GetSpellAbilityId()==$41305735 then
set Nl=nN(Hv,300,GetUnitFacing(Hw))
set NT=(GetUnitState(Hw,UNIT_STATE_MANA)+2000)*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MAX_MANA)*.05)
set Nb=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Nl),GetLocationY(Nl),300,Nc)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Culling Cleave Purple.mdx",Hw,"origin"))
set Ps=Hw
set Nw=R2I(NT)
call ForGroup(Nb,function pM)
call nW(Nb,$5330305A,1,"cripple")
call DestroyBoolExpr(Nc)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set Nb=null
elseif GetSpellAbilityId()==$41305734 or GetSpellAbilityId()==$41305746 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call TimerStart(He,7,false,function pL)
set He=null
elseif GetSpellAbilityId()==$4131364E then
set Nl=GetUnitLoc(Nx)
set NR=CreateUnitAtLoc(Player(Mc),$6E303647,Nl,0)
call m5(NR,8)
call IssueTargetOrder(NR,"attack",Nx)
call RemoveLocation(Nl)
set Nl=null
set NR=null
elseif GetSpellAbilityId()==$41305747 then
set Nl=GetUnitLoc(Nx)
set NR=CreateUnitAtLoc(Player(Mc),$6E303647,Nl,0)
if nH(Hw,$49305A44) or nH(Hw,$49305A35) then
call UnitAddAbility(NR,$41303256)
endif
call m5(NR,8)
call IssueTargetOrder(NR,"attack",Nx)
call RemoveLocation(Nl)
set Nl=null
set NR=null
set Nl=GetUnitLoc(Nx)
set NR=CreateUnitAtLoc(Player(Mc),$6E303647,Nl,0)
if nH(Hw,$49305A44) or nH(Hw,$49305A35) then
call UnitAddAbility(NR,$41303256)
endif
call m5(NR,8)
call IssueTargetOrder(NR,"attack",Nx)
call RemoveLocation(Nl)
set Nl=null
set NR=null
elseif GetSpellAbilityId()==$41313657 then
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MAX_MANA)*.15)
set Nl=GetSpellTargetLoc()
set NR=CreateUnitAtLoc(Player(Mc),$68303739,Nl,270)
call UnitAddAbility(NR,$4131364D)
call AddSpecialEffectTarget("war3mapImported\\DarkHarvest.mdx",NR,"origin")
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,NR)
call TimerStart(He,4+I2R(GetUnitAbilityLevel(Hw,$41313657)*2),false,function pK)
set He=null
elseif GetSpellAbilityId()==$41304253 then
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MAX_MANA)*.2)
call UnitAddAbility(Hw,$41304C4E)
call UnitAddAbility(Nx,$41304C4E)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,GetSpellTargetUnit())
call SaveReal(Nr,GetHandleId(He),2,GetUnitState(Hw,UNIT_STATE_LIFE))
call SaveReal(Nr,GetHandleId(He),3,GetUnitState(Hw,UNIT_STATE_MANA))
call SaveLightningHandle(Nr,GetHandleId(He),4,AddLightningEx("SPRL",true,GetUnitX(Hw),GetUnitY(Hw),50,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),50))
call SaveInteger(Nr,GetHandleId(He),5,121)
call SaveEffectHandle(Nr,GetHandleId(He),6,AddSpecialEffectTarget("war3mapImported\\ShadowyMissileofEvilDOOMV2.mdx",GetSpellTargetUnit(),"chest"))
call SaveEffectHandle(Nr,GetHandleId(He),7,AddSpecialEffectTarget("war3mapImported\\Soul Aura.mdx",Hw,"origin"))
call TimerStart(He,.1,true,function pJ)
set He=null
elseif GetSpellAbilityId()==$41305759 then
call SetUnitInvulnerable(Hw,true)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,Nx)
call SaveInteger(Nr,GetHandleId(He),5,6)
call TimerStart(He,.5,true,function pI)
set He=null
elseif GetSpellAbilityId()==$41305850 then
set Nl=GetSpellTargetLoc()
set NR=CreateUnitAtLoc(Player(Mc),$68303739,Nl,0)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),1,NR)
call SaveInteger(Nr,GetHandleId(He),2,0)
call TimerStart(He,1,true,function oR)
call RemoveLocation(Nl)
set Nl=null
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
set Hw=null
set Nb=null
set NR=null
set Nx=null
set He=null
endfunction
function pO takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function pN)
set He=null
endfunction
function pP takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==$68303742 then
if GetUnitAbilityLevel(GetFilterUnit(),$41303853)==0 then
if GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit()) then
return true
endif
endif
endif
return false
endfunction
function pQ takes nothing returns nothing
local unit Hw=GetEnumUnit()
call DestroyEffect(AddSpecialEffectTarget(V7,Hw,"origin"))
set Hw=null
endfunction
function pR takes nothing returns nothing
local location Hv=GetUnitLoc(GetSpellTargetUnit())
call SetUnitPositionLoc(GetEnumUnit(),Hv)
call IssueTargetOrder(GetEnumUnit(),"attack",GetSpellTargetUnit())
call RemoveLocation(Hv)
set Hv=null
endfunction
function pS takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv=GetUnitLoc(Hw)
local unit NR=CreateUnitAtLoc(GetOwningPlayer(Ps),$68303742,Hv,0)
local integer Mc
local integer MC
local real UX
local real V8
call m5(NR,4+2*GetUnitAbilityLevel(Ps,$41314352))
set Mc=GetPlayerId(GetOwningPlayer(Ps))+1
set MC=(GetHeroStr(Ps,true)+GetHeroAgi(Ps,true)+GetHeroInt(Ps,true))/3
set UX=(TS[Mc]+N1[Mc]+Ne[Mc]+Nh[Mc]+Ng[Mc])/5
set V8=I2R(MC)*UX+I2R(100*GetUnitAbilityLevel(Ps,$41314354))
if GetUnitAbilityLevel(Ps,$41314130)>=1 then
call nc(NR,R2I(V8*1.5))
elseif GetUnitAbilityLevel(Ps,$41314131)>=1 then
call nc(NR,R2I(V8))
call UnitAddAbility(NR,$41304639)
elseif GetUnitAbilityLevel(Ps,$41314132)>=1 then
call nc(NR,R2I(V8))
call UnitAddAbility(NR,$41305341)
endif
call IssueTargetOrder(NR,"atack",Hw)
call RemoveLocation(Hv)
set Hv=null
set Hw=null
set NR=null
endfunction
function pT takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv=GetUnitLoc(Hw)
local group WC=CreateGroup()
local boolexpr Nc=Condition(function mq)
call GroupEnumUnitsInRange(WC,GetLocationX(Hv),GetLocationY(Hv),200,Nc)
call ForGroup(WC,function m3)
call DestroyGroup(WC)
call DestroyBoolExpr(Nc)
set WC=null
set Nc=null
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdl",Hv))
call RemoveLocation(Hv)
set Hw=null
set Hv=null
endfunction
function pU takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),UP[GetPlayerId(GetOwningPlayer(Ps))])==false then
call GroupAddUnit(UP[GetPlayerId(GetOwningPlayer(Ps))],GetEnumUnit())
call ms(Ps,GetEnumUnit(),Nw)
endif
endfunction
function pV takes nothing returns nothing
local unit Nx=GetEnumUnit()
local location Hv
local unit NR
call DestroyEffect(AddSpecialEffectTarget(V7,Nx,"overhead"))
set Hv=GetUnitLoc(Nx)
call ms(Ps,Nx,Nw)
set NR=CreateUnitAtLoc(Player(0),$68303739,Hv,0)
call m5(NR,1)
call UnitAddAbility(NR,$4131324E)
call UnitApplyTimedLife(NR,$42544C46,1)
call IssueTargetOrder(NR,"creepthunderbolt",Nx)
call RemoveLocation(Hv)
set NR=null
set Nx=null
set Hv=null
endfunction
function pW takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),7)
local integer Me
local real Np
local real Nq
local location Ns
local string Nt
local location Ov
local group Ow
local boolexpr Ox
local integer Oy
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)==70 then
call GroupClear(UP[GetPlayerId(GetOwningPlayer(Hw))])
endif
set Ps=Hw
set Me=GetPlayerId(GetOwningPlayer(Hw))+1
set Np=.8*I2R(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))
set Nq=(TS[Me]+N1[Me]+Ne[Me]+Nh[Me]+Ng[Me])/5
set Nw=R2I(Np*Nq)+200*GetUnitAbilityLevel(Hw,$41314355)
set Ns=GetUnitLoc(NR)
set Nt=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Nt="Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(Nt,Ns))
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=70 then
set Ov=PolarProjectionBJ(Ns,10,GetUnitFacing(NR))
call SetUnitPositionLoc(NR,Ov)
else
set Ov=PolarProjectionBJ(Ns,-10,GetUnitFacing(NR))
call SetUnitPositionLoc(NR,Ov)
endif
set Ow=CreateGroup()
set Ox=Condition(function mq)
call GroupEnumUnitsInRange(Ow,GetLocationX(Ns),GetLocationY(Ns),200,Ox)
call ForGroup(Ow,function pU)
call DestroyGroup(Ow)
call DestroyBoolExpr(Ox)
set Ow=null
set Ox=null
call RemoveLocation(Ns)
call RemoveLocation(Ov)
set Ns=null
set Ov=null
else
call KillUnit(NR)
call RemoveUnit(NR)
set Ps=Hw
set Me=GetPlayerId(GetOwningPlayer(Hw))+1
set Np=.5*I2R(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))
set Nq=(TS[Me]+N1[Me]+Ne[Me]+Nh[Me]+Ng[Me])/5
set Nw=R2I(Np*Nq)+200*GetUnitAbilityLevel(Hw,$41314355)
set Ow=CreateGroup()
set Ox=Condition(function pP)
call GroupEnumUnitsOfPlayer(Ow,GetOwningPlayer(Hw),Ox)
set Oy=CountUnitsInGroup(Ow)
if Oy>=1 then
call ForGroup(Ow,function pT)
endif
call DestroyBoolExpr(Ox)
set Ox=null
call DestroyGroup(Ow)
set Ow=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
endfunction
function pX takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),2)
local location Hv=LoadLocationHandle(PR,GetHandleId(GetExpiredTimer()),5)
local unit Me
local integer Np
local integer Nq
local real Ns
local real Nt
local group Ov
local boolexpr Ow
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),1,LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)>=1 then
set Me=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303742,Hv,0)
set Np=GetPlayerId(GetOwningPlayer(Hw))+1
set Nq=(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))/3
set Ns=(TS[Np]+N1[Np]+Ne[Np]+Nh[Np]+Ng[Np])/5
set Nt=I2R(Nq)*Ns+I2R(100*GetUnitAbilityLevel(Hw,$41314354))
call nc(Me,R2I(Nt*1.5))
set Ov=CreateGroup()
if GetUnitAbilityLevel(Hw,$41314130)>=1 then
call m5(Me,1.5)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Smite.mdx",Hv))
set Ow=Condition(function mq)
call GroupEnumUnitsInRange(Ov,GetLocationX(Hv),GetLocationY(Hv),300,Ow)
set Ps=Hw
set Nw=Nq*R2I(Ns)+500*GetUnitAbilityLevel(Hw,$41314353)
call ForGroup(Ov,function m3)
elseif GetUnitAbilityLevel(Hw,$41314131)>=1 then
call m5(Me,1.5)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Smite Green.mdx",Hv))
set Ow=Condition(function mp)
call GroupEnumUnitsInRange(Ov,GetLocationX(Hv),GetLocationY(Hv),300,Ow)
set Nw=Nq/2*R2I(Ns)+500*GetUnitAbilityLevel(Hw,$41314353)
call ForGroup(Ov,function mx)
elseif GetUnitAbilityLevel(Hw,$41314132)>=1 then
call m5(Me,3)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Smite.mdx",Hv))
set Ow=Condition(function mq)
call GroupEnumUnitsInRange(Ov,GetLocationX(Hv),GetLocationY(Hv),300,Ow)
endif
call DestroyGroup(Ov)
set Ov=null
call DestroyBoolExpr(Ow)
set Ow=null
set Me=null
else
call RemoveLocation(Hv)
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(GetExpiredTimer()),6))
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),6)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),5)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hv=null
set Hw=null
endfunction
function pY takes nothing returns nothing
local group Nb=LoadGroupHandle(PR,GetHandleId(GetExpiredTimer()),0)
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),2)
local group Me
local boolexpr Np
local integer Nq
local integer Ns
local real Nt
local real Ov
local real Ow
local real Ox
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),1,LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)!=0 then
set Ps=Hw
set Me=CreateGroup()
set Np=Condition(function pP)
call GroupEnumUnitsOfPlayer(Me,GetOwningPlayer(Hw),Np)
set Nq=CountUnitsInGroup(Me)
call DestroyBoolExpr(Np)
call DestroyGroup(Me)
set Np=null
set Me=null
set Ns=GetPlayerId(GetOwningPlayer(Hw))+1
set Nt=I2R(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))*.4
set Ov=(TS[Ns]+N1[Ns]+Ne[Ns]+Nh[Ns]+Ng[Ns])/5
set Ow=(Nt+I2R(100*GetUnitAbilityLevel(Hw,$41314242)))*Ov
set Ox=Ow*(1+Nq*.05)
set Nw=R2I(Ox)
set V7="war3mapImported\\Heal Orange.mdx"
call ForGroup(Nb,function pV)
call ForGroup(Nb,function pQ)
else
call DestroyGroup(Nb)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Nb=null
set Hw=null
endfunction
function pZ takes nothing returns nothing
local group Nb=LoadGroupHandle(PR,GetHandleId(GetExpiredTimer()),0)
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),2)
local group Me
local boolexpr Np
local integer Nq
local integer Ns
local real Nt
local real Ov
local real Ow
local real Ox
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),1,LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)!=0 then
set Ps=Hw
set Me=CreateGroup()
set Np=Condition(function pP)
call GroupEnumUnitsOfPlayer(Me,GetOwningPlayer(Hw),Np)
set Nq=CountUnitsInGroup(Me)
call DestroyBoolExpr(Np)
call DestroyGroup(Me)
set Np=null
set Me=null
set Ns=GetPlayerId(GetOwningPlayer(Hw))+1
set Nt=I2R(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))*.1
set Ov=(TS[Ns]+N1[Ns]+Ne[Ns]+Nh[Ns]+Ng[Ns])/5
set Ow=(Nt+I2R(100*GetUnitAbilityLevel(Hw,$41314242)))*Ov
set Ox=Ow*(1+Nq*.05)
set Nw=R2I(Ox)
set V7="war3mapImported\\Heal Green.mdx"
call ForGroup(Nb,function mx)
call ForGroup(Nb,function pQ)
else
call DestroyGroup(Nb)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Nb=null
set Hw=null
endfunction
function pa takes nothing returns nothing
local group Nb=LoadGroupHandle(PR,GetHandleId(GetExpiredTimer()),0)
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),2)
local group Me
local boolexpr Np
local integer Nq
local integer Ns
local real Nt
local real Ov
local real Ow
local real Ox
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),1,LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)>=1 then
set Ps=Hw
set Me=CreateGroup()
set Np=Condition(function pP)
call GroupEnumUnitsOfPlayer(Me,GetOwningPlayer(Hw),Np)
set Nq=CountUnitsInGroup(Me)
call DestroyBoolExpr(Np)
call DestroyGroup(Me)
set Np=null
set Me=null
set Ns=GetPlayerId(GetOwningPlayer(Hw))+1
set Nt=I2R(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))*.4
set Ov=(TS[Ns]+N1[Ns]+Ne[Ns]+Nh[Ns]+Ng[Ns])/5
set Ow=(Nt+I2R(135*GetUnitAbilityLevel(Hw,$41314242)))*Ov
set Ox=Ow*(1+Nq*.05)
set Nw=R2I(Ox)
set V7="war3mapImported\\Heal Orange.mdx"
call ForGroup(Nb,function m3)
call ForGroup(Nb,function pQ)
else
call DestroyGroup(Nb)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Nb=null
set Hw=null
endfunction
function pb takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv
local unit NR
call DestroyEffect(AddSpecialEffectTarget(V7,Hw,"overhead"))
set Hv=GetUnitLoc(Hw)
set NR=CreateUnitAtLoc(Player(0),$68303739,Hv,0)
call UnitAddAbility(NR,$4131324E)
call UnitApplyTimedLife(NR,$42544C46,1)
call IssueTargetOrder(NR,"creepthunderbolt",Hw)
call RemoveLocation(Hv)
call ms(Ps,Hw,Nw)
set Hv=null
set Hw=null
call m5(NR,1)
set NR=null
endfunction
function pc takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local location Hv
local unit Me
local unit Np
local integer Nq
local real Ns
local real Nt
local real Ov
local group Ow
local boolexpr Ox
local integer Oy
local group Oz
local boolexpr O1
local timer O2
local string O3
local location V9
local effect WB
if GetSpellAbilityId()==$41313530 then
if GetUnitAbilityLevel(Hw,$41314130)==1 then
call UnitRemoveAbility(Hw,$41314130)
call UnitAddAbility(Hw,$41314131)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41314131,false)
call DestroyEffect(V6[GetPlayerId(GetOwningPlayer(Hw))])
set V6[GetPlayerId(GetOwningPlayer(Hw))]=AddSpecialEffectTarget("war3mapImported\\GreenPentagram (1).mdx",Hw,"origin")
call nX(Hw,"Зеленая пентаграмма",.023,0,255,0)
elseif GetUnitAbilityLevel(Hw,$41314131)==1 then
call UnitRemoveAbility(Hw,$41314131)
call UnitAddAbility(Hw,$41314132)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41314132,false)
call DestroyEffect(V6[GetPlayerId(GetOwningPlayer(Hw))])
set V6[GetPlayerId(GetOwningPlayer(Hw))]=AddSpecialEffectTarget("war3mapImported\\MagicCircle_Arcane.mdx",Hw,"origin")
call nX(Hw,"Синяя пентаграмма",.023,0,100,255)
elseif GetUnitAbilityLevel(Hw,$41314132)==1 then
call UnitRemoveAbility(Hw,$41314132)
call UnitAddAbility(Hw,$41314130)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41314130,false)
call DestroyEffect(V6[GetPlayerId(GetOwningPlayer(Hw))])
set V6[GetPlayerId(GetOwningPlayer(Hw))]=AddSpecialEffectTarget("war3mapImported\\MagicCircle_Fire.mdx",Hw,"origin")
call nX(Hw,"Красная пентаграмма",.023,255,0,0)
else
call UnitAddAbility(Hw,$41314130)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41314130,false)
call DestroyEffect(V6[GetPlayerId(GetOwningPlayer(Hw))])
set V6[GetPlayerId(GetOwningPlayer(Hw))]=AddSpecialEffectTarget("war3mapImported\\MagicCircle_Fire.mdx",Hw,"origin")
endif
endif
if GetSpellAbilityId()==$41314241 then
set Me=GetSpellTargetUnit()
set Hv=GetUnitLoc(Me)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Holy Light Royal.mdx",Me,"origin"))
if GetUnitAbilityLevel(Hw,$41314130)==1 then
set Np=CreateUnitAtLoc(Player(0),$68303739,Hv,0)
call UnitAddAbility(Np,$4131324E)
call UnitApplyTimedLife(Np,$42544C46,1)
call IssueTargetOrder(Np,"creepthunderbolt",Me)
set Nq=GetPlayerId(GetOwningPlayer(Hw))+1
set Ns=I2R(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))*3.4
set Nt=(TS[Nq]+N1[Nq]+Ne[Nq]+Nh[Nq]+Ng[Nq])/5
set Ov=(Ns+I2R(150*GetUnitAbilityLevel(Hw,$41314241)))*Nt
call ms(Hw,Me,R2I(Ov))
set Ps=Me
set Ow=CreateGroup()
set Ox=Condition(function pP)
call GroupEnumUnitsOfPlayer(Ow,GetOwningPlayer(Hw),Ox)
call DestroyBoolExpr(Ox)
call ForGroup(Ow,function pR)
call DestroyGroup(Ow)
set Ox=null
set Ow=null
elseif GetUnitAbilityLevel(Hw,$41314131)==1 then
set Np=CreateUnitAtLoc(Player(0),$68303739,Hv,0)
call UnitAddAbility(Np,$4131324E)
call UnitApplyTimedLife(Np,$42544C46,1)
call IssueTargetOrder(Np,"creepthunderbolt",Me)
set Nq=GetPlayerId(GetOwningPlayer(Hw))+1
set Ns=I2R(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))*2.
set Nt=(TS[Nq]+N1[Nq]+Ne[Nq]+Nh[Nq]+Ng[Nq])/5
set Ov=(Ns+I2R(150*GetUnitAbilityLevel(Hw,$41314241)))*Nt
call ms(Hw,Me,R2I(Ov))
set Ow=CreateGroup()
set Ox=Condition(function mp)
call GroupEnumUnitsInRange(Ow,GetLocationX(Hv),GetLocationY(Hv),400,Ox)
call DestroyBoolExpr(Ox)
set Oy=R2I(Ov/3)
call ForGroup(Ow,function mx)
call DestroyGroup(Ow)
set Ox=null
set Ow=null
set Ps=Me
set Oz=CreateGroup()
set O1=Condition(function pP)
call GroupEnumUnitsOfPlayer(Oz,GetOwningPlayer(Hw),O1)
call DestroyBoolExpr(O1)
call ForGroup(Oz,function pR)
call DestroyGroup(Oz)
set O1=null
set Oz=null
elseif GetUnitAbilityLevel(Hw,$41314132)==1 then
set Nq=GetPlayerId(GetOwningPlayer(Hw))+1
set Ns=I2R(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))*2.
set Nt=(TS[Nq]+N1[Nq]+Ne[Nq]+Nh[Nq]+Ng[Nq])/5
set Ov=(Ns+I2R(150*GetUnitAbilityLevel(Hw,$41314241)))*Nt
set Ow=CreateGroup()
set Ox=Condition(function mq)
call GroupEnumUnitsInRange(Ow,GetLocationX(Hv),GetLocationY(Hv),400,Ox)
call DestroyBoolExpr(Ox)
set Nw=R2I(Ov)
set Ps=Hw
set V7="war3mapImported\\Holy Light Royal.mdx"
call ForGroup(Ow,function pb)
call DestroyGroup(Ow)
set Ox=null
set Ow=null
set Ps=Me
set Oz=CreateGroup()
set O1=Condition(function pP)
call GroupEnumUnitsOfPlayer(Oz,GetOwningPlayer(Hw),O1)
call DestroyBoolExpr(O1)
call ForGroup(Oz,function pR)
call DestroyGroup(Oz)
set O1=null
set Oz=null
endif
set Me=null
call RemoveLocation(Hv)
set Hv=null
endif
if GetSpellAbilityId()==$41314242 then
set Hv=GetSpellTargetLoc()
set Ow=CreateGroup()
if GetUnitAbilityLevel(Hw,$41314130)==1 then
set Ox=Condition(function mq)
call GroupEnumUnitsInRange(Ow,GetLocationX(Hv),GetLocationY(Hv),300,Ox)
set O2=CreateTimer()
call SaveGroupHandle(PR,GetHandleId(O2),0,Ow)
call SaveUnitHandle(PR,GetHandleId(O2),2,Hw)
call SaveInteger(PR,GetHandleId(O2),1,6)
call TimerStart(O2,1,true,function pa)
call DestroyBoolExpr(Ox)
set Ox=null
set O2=null
elseif GetUnitAbilityLevel(Hw,$41314131)==1 then
set Ox=Condition(function mp)
call GroupEnumUnitsInRange(Ow,GetLocationX(Hv),GetLocationY(Hv),300,Ox)
call DestroyBoolExpr(Ox)
set O2=CreateTimer()
call SaveGroupHandle(PR,GetHandleId(O2),0,Ow)
call SaveUnitHandle(PR,GetHandleId(O2),2,Hw)
call SaveInteger(PR,GetHandleId(O2),1,6)
call TimerStart(O2,1,true,function pZ)
set Ox=null
set O2=null
elseif GetUnitAbilityLevel(Hw,$41314132)==1 then
set Ox=Condition(function mq)
call GroupEnumUnitsInRange(Ow,GetLocationX(Hv),GetLocationY(Hv),300,Ox)
call DestroyBoolExpr(Ox)
set O2=CreateTimer()
call SaveGroupHandle(PR,GetHandleId(O2),0,Ow)
call SaveUnitHandle(PR,GetHandleId(O2),2,Hw)
call SaveInteger(PR,GetHandleId(O2),1,4)
call TimerStart(O2,3,true,function pY)
set Ox=null
set O2=null
endif
set Ow=null
call RemoveLocation(Hv)
set Hv=null
endif
if GetSpellAbilityId()==$41314352 then
set Hv=GetUnitLoc(Hw)
set Ow=CreateGroup()
set Ox=Condition(function mq)
call GroupEnumUnitsInRange(Ow,GetLocationX(Hv),GetLocationY(Hv),800,Ox)
set Ps=Hw
set O3=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set O3="war3mapImported\\Shining Flare.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(O3,Hw,"origin"))
call ForGroup(Ow,function pS)
call DestroyBoolExpr(Ox)
call DestroyGroup(Ow)
set Ox=null
set Ow=null
call RemoveLocation(Hv)
set Hv=null
endif
if GetSpellAbilityId()==$41314353 then
set V9=GetSpellTargetLoc()
set WB=AddSpecialEffectLoc("war3mapImported\\Providence Aura.mdx",V9)
set O2=CreateTimer()
call SaveInteger(PR,GetHandleId(O2),1,8)
call SaveLocationHandle(PR,GetHandleId(O2),5,V9)
call SaveUnitHandle(PR,GetHandleId(O2),2,Hw)
call SaveEffectHandle(PR,GetHandleId(O2),6,WB)
call TimerStart(O2,1,true,function pX)
set WB=null
set O2=null
endif
if GetSpellAbilityId()==$41314354 then
set Hv=GetUnitLoc(GetSpellTargetUnit())
set Me=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303742,Hv,0)
call m5(Me,7)
set Nq=GetPlayerId(GetOwningPlayer(Hw))+1
set Oy=(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true))/3
set Ns=(TS[Nq]+N1[Nq]+Ne[Nq]+Nh[Nq]+Ng[Nq])/5
set Nt=I2R(Oy)*Ns+I2R(100*GetUnitAbilityLevel(Ps,$41314354))
if GetUnitAbilityLevel(Hw,$41314130)>=1 then
call nc(Me,R2I(Nt*1.5))
elseif GetUnitAbilityLevel(Hw,$41314131)>=1 then
call nc(Me,R2I(Nt))
call UnitAddAbility(Me,$41304639)
elseif GetUnitAbilityLevel(Hw,$41314132)>=1 then
call nc(Me,R2I(Nt))
call UnitAddAbility(Me,$41305341)
endif
call IssueTargetOrder(Me,"atack",GetSpellTargetUnit())
set Me=null
call RemoveLocation(Hv)
set Hv=null
endif
if GetSpellAbilityId()==$41314355 then
set Hv=GetUnitLoc(Hw)
set Me=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),$68303742,Hv,GetUnitFacing(Hw))
call UnitAddAbility(Me,$41303853)
call SetUnitPathing(Me,true)
call PauseUnit(Me,true)
call SetUnitVertexColor(Me,0,0,0,255)
call GroupClear(UP[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set O2=CreateTimer()
call SaveInteger(Nr,GetHandleId(O2),1,140)
call SaveUnitHandle(Nr,GetHandleId(O2),2,Hw)
call SaveUnitHandle(Nr,GetHandleId(O2),7,Me)
call TimerStart(O2,.01,true,function pW)
call RemoveLocation(Hv)
set Hv=null
endif
set Hw=null
call RemoveLocation(Hv)
set Hv=null
set V9=null
set O2=null
set Np=null
set Me=null
endfunction
function pd takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local location Me
local group Np
local boolexpr Nq
local integer Ns
local integer Nt
local real Ov
local real Ow
local real Ox
if GetUnitTypeId(Hw)==$68303742 then
if GetUnitAbilityLevel(Hw,$41303853)==0 then
set Me=GetUnitLoc(Hw)
set Np=CreateGroup()
set Ns=GetPlayerId(GetOwningPlayer(Hw))+1
set Nt=GetHeroStr(MV[GetPlayerId(GetOwningPlayer(Hw))],true)+GetHeroAgi(MV[GetPlayerId(GetOwningPlayer(Hw))],true)+GetHeroInt(MV[GetPlayerId(GetOwningPlayer(Hw))],true)
set Ov=(TS[Ns]+N1[Ns]+Ne[Ns]+Nh[Ns]+Ng[Ns])/5
if nH(MV[GetPlayerId(GetOwningPlayer(Hw))],$49305A4D) then
set Ox=I2R(Nt)*.25
set Ow=Ox*Ov
elseif nH(MV[GetPlayerId(GetOwningPlayer(Hw))],$49305A4E) then
set Ox=I2R(Nt)*.3
set Ow=Ox*Ov
elseif nH(MV[GetPlayerId(GetOwningPlayer(Hw))],$49305A4F) then
set Ox=I2R(Nt)*.35
set Ow=Ox*Ov
elseif nH(MV[GetPlayerId(GetOwningPlayer(Hw))],$49305A50) then
set Ox=I2R(Nt)*.5
set Ow=Ox*Ov
endif
if GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$41303853)>=1 then
set Ps=MV[GetPlayerId(GetOwningPlayer(Hw))]
if GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$41314130)==1 then
set Nw=R2I(Ow*1.5)
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),200,Nq)
call ForGroup(Np,function m3)
elseif GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$41314131)==1 then
set Nw=R2I(Ow/2)
set Nq=Condition(function mp)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),300,Nq)
call ForGroup(Np,function mx)
elseif GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$41314132)==1 then
set Nw=R2I(Ow)
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),200,Nq)
call ForGroup(Np,function m3)
call SetUnitManaPercentBJ(MV[GetPlayerId(GetOwningPlayer(Hw))],GetUnitManaPercent(MV[GetPlayerId(GetOwningPlayer(Hw))])+3.)
endif
endif
call RemoveLocation(Me)
call DestroyBoolExpr(Nq)
call DestroyGroup(Np)
set Nq=null
set Np=null
set Me=null
endif
endif
set Hw=null
endfunction
function pe takes nothing returns nothing
local trigger V5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(V5,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(V5,function pc)
set V5=null
set V5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(V5,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(V5,function pd)
set V5=null
endfunction
function pf takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==$6E303651 then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
return false
endfunction
function pg takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetEnumUnit()
local group Nb=CreateGroup()
local boolexpr Vz=Condition(function pf)
local integer Pf
local integer MC
local timer He
call GroupEnumUnitsOfPlayer(Nb,GetOwningPlayer(Hw),Vz)
set Pf=CountUnitsInGroup(Nb)
call DestroyBoolExpr(Vz)
call DestroyGroup(Nb)
set Vz=null
set Nb=null
set MC=GetHeroAgi(Hw,true)/4+100+GetHeroAgi(Hw,true)/10*Pf
call nc(Nx,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Nx)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\Buff_Attack.mdx",Nx,"overhead"))
call TimerStart(He,10,true,function m6)
set He=null
set Nx=null
set Hw=null
endfunction
function ph takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),7)
local location Hv
local location Nl
local group WC
local boolexpr Nc
local string Me
local group Np
local boolexpr Nq
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
set Hv=GetUnitLoc(NR)
set Nl=nN(Hv,7,GetUnitFacing(NR))
set WC=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(WC,GetLocationX(Hv),GetLocationY(Hv),115,Nc)
if CountUnitsInGroup(WC)<1 then
call SetUnitPositionLoc(NR,Nl)
call UnitRemoveAbility(Hw,$41305038)
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
else
set Hv=GetUnitLoc(NR)
call KillUnit(NR)
call RemoveUnit(NR)
set Me=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Me="war3mapImported\\Conflagrate Blue.mdx"
endif
call AddSpecialEffectLoc(Me,Hv)
set Ps=Hw
set Nw=R2I(I2R(500*GetUnitAbilityLevel(Hw,$41313841)+GetHeroAgi(Hw,true)*4)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1])
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Hv),GetLocationY(Hv),400,Nq)
call nW(Np,$4131324E,1,"creepthunderbolt")
call ForGroup(Np,function m2)
call DestroyBoolExpr(Nq)
call DestroyGroup(Np)
call RemoveLocation(Hv)
set Hv=null
set Nq=null
set Np=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call DestroyGroup(WC)
call DestroyBoolExpr(Nc)
set WC=null
set Nc=null
else
set Hv=GetUnitLoc(NR)
call KillUnit(NR)
call RemoveUnit(NR)
set Me=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Me="war3mapImported\\Conflagrate Blue.mdx"
endif
call AddSpecialEffectLoc(Me,Hv)
set Ps=Hw
set Nw=R2I(I2R(500*GetUnitAbilityLevel(Hw,$41313841)+GetHeroAgi(Hw,true)*4)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1])
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Hv),GetLocationY(Hv),400,Nq)
call nW(Np,$4131324E,1,"creepthunderbolt")
call ForGroup(Np,function m2)
call DestroyBoolExpr(Nq)
call DestroyGroup(Np)
call RemoveLocation(Hv)
set Hv=null
set Nq=null
set Np=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
set Nl=null
set Hv=null
endfunction
function pi takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetSpellTargetUnit()
local group Nb
local location Hv
local location Nl
local boolexpr Vz
local integer Me
local unit Np
local timer Nq
if GetSpellAbilityId()==$41304C57 then
call UnitAddAbility(Nx,$41304C58)
call SetUnitAbilityLevel(Nx,$41304C58,GetUnitAbilityLevel(Hw,$41304C57))
if GetUnitAbilityLevel(Nx,$42303639)>=1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41304C57,false)
call UnitAddAbility(Hw,$41305331)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41305331,true)
if GetUnitAbilityLevel(Hw,$41303853)>=1 then
call SetUnitAbilityLevel(Hw,$41305331,2)
call SetUnitAbilityLevel(Nx,$41304C58,11)
endif
endif
call TriggerSleepAction(7)
call UnitRemoveAbility(Nx,$41304C58)
call TriggerSleepAction(8)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41305331,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41304C57,true)
elseif GetSpellAbilityId()==$41313836 then
set Nb=CreateGroup()
set Hv=GetUnitLoc(Hw)
set Vz=Condition(function mo)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),400,Vz)
call ForGroup(Nb,function pg)
call DestroyBoolExpr(Vz)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Vz=null
set Nb=null
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41313836,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41313834,true)
elseif GetSpellAbilityId()==$41305430 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41305430,false)
call UnitAddAbility(Hw,$41305431)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41305431,true)
elseif GetSpellAbilityId()==$41305431 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41305431,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41305430,true)
elseif GetSpellAbilityId()==$41305331 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41305331,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41304C57,true)
elseif GetSpellAbilityId()==$41313841 then
set Me=3
if GetUnitAbilityLevel(Hw,$41303853)>=1 then
set Me=Me+2
endif
loop
set Hv=GetUnitLoc(Hw)
set Np=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Hv,GetUnitFacing(Hw))
call SetUnitPathing(Np,false)
call AddSpecialEffectTarget("war3mapImported\\BlueShockwaveMissile.mdx",Np,"chest")
call AddSpecialEffectTarget("units\\nightelf\\NightElfDestroyerShip\\NightElfDestroyerShip.mdl",Np,"chest")
set Nq=CreateTimer()
call SaveInteger(Nr,GetHandleId(Nq),1,100)
call SaveUnitHandle(Nr,GetHandleId(Nq),2,Hw)
call SaveUnitHandle(Nr,GetHandleId(Nq),7,Np)
call TimerStart(Nq,.01,true,function ph)
set Nq=null
set Np=null
call RemoveLocation(Hv)
set Hv=null
call TriggerSleepAction(1.5)
set Me=Me-1
exitwhen Me==0
endloop
elseif GetSpellAbilityId()==$41313845 then
set Me=1
loop
set Hv=GetUnitLoc(Hw)
set Nl=nN(Hv,Me*150,GetUnitFacing(Hw))
set Np=CreateUnitAtLoc(GetOwningPlayer(Hw),$6E303651,Nl,0)
call nc(Np,GetHeroAgi(Hw,true)/2)
call SetUnitPathing(Np,false)
call SetUnitVertexColor(Np,255,0,255,100)
call m5(Np,12)
set Np=null
set Me=Me+1
exitwhen Me==5
endloop
endif
set Hw=null
set Nx=null
set Nl=null
set Hv=null
endfunction
function pj takes nothing returns nothing
set WD=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WD,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(WD,function pi)
endfunction
function pk takes nothing returns boolean
if not (GetSpellAbilityId()==$41313834) then
return false
endif
return true
endfunction
function pl takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function pm takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function pn takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(WF[RS[0]]))==true
endfunction
function po takes nothing returns boolean
return GetBooleanAnd(pm(),pn())
endfunction
function pp takes nothing returns boolean
return GetBooleanAnd(pl(),po())
endfunction
function pq takes nothing returns boolean
if not (CountUnitsInGroup(RY[RS[0]])>=3) then
return false
endif
return true
endfunction
function pr takes nothing returns nothing
call CreateNUnitsAtLoc(1,$68303244,GetOwningPlayer(WF[RS[0]]),WG[RS[0]],bj_UNIT_FACING)
set WH[RS[0]]=GetLastCreatedUnit()
call IssueTargetOrderBJ(WH[RS[0]],"creepthunderbolt",GetEnumUnit())
call UnitApplyTimedLifeBJ(1.,$42544C46,WH[RS[0]])
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(200.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313834))+I2R(GetHeroAgi(GetTriggerUnit(),true))*7.)*Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call GroupAddUnitSimple(GetEnumUnit(),RY[RS[0]])
endfunction
function ps takes nothing returns nothing
set RS[0]=RS[0]+1
set RT[RS[0]]=RT[RS[0]]+1
set RU[0]=0
set RV[RS[0]]=1.5
set RW[RS[0]]=0.
set RX[RS[0]]=0.
set WF[RS[0]]=GetTriggerUnit()
set WG[RS[0]]=GetUnitLoc(GetTriggerUnit())
set RY[RS[0]]=GetUnitsInRangeOfLocMatching(400.,WG[RS[0]],Condition(function pp))
if pq() then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41313834,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41313836,true)
call UnitAddAbility(GetTriggerUnit(),$41313836)
else
endif
call ForGroupBJ(RY[RS[0]],function pr)
set RZ[RS[0]]=true
call RemoveLocation(WG[RS[0]])
call DestroyGroup(RY[RS[0]])
call TriggerSleepAction(15.)
call UnitRemoveAbility(GetTriggerUnit(),$41313836)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41313834,true)
endfunction
function pt takes nothing returns nothing
set WE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WE,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(WE,Condition(function pk))
call TriggerAddAction(WE,function ps)
endfunction
function pu takes nothing returns boolean
if not (GetSpellAbilityId()==$41313838) then
return false
endif
return true
endfunction
function pv takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V2)
call IssueTargetOrderBJ(GetEnumUnit(),"attack",GetSpellTargetUnit())
endfunction
function pw takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroAgi(GetTriggerUnit(),true))*(5.*Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
set V2=GetUnitLoc(GetSpellTargetUnit())
set ST=GetUnitsOfPlayerAndTypeId(GetOwningPlayer(GetTriggerUnit()),$6E303651)
call ForGroupBJ(ST,function pv)
call DestroyGroup(ST)
call RemoveLocation(V2)
endfunction
function px takes nothing returns nothing
set WI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WI,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(WI,Condition(function pu))
call TriggerAddAction(WI,function pw)
endfunction
function py takes nothing returns boolean
if not (GetIssuedOrderIdBJ()==String2OrderIdBJ("immolation")) then
return false
endif
return true
endfunction
function pz takes nothing returns boolean
if not (GetIssuedOrderIdBJ()==String2OrderIdBJ("unimmolation")) then
return false
endif
return true
endfunction
function p0 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$48303550 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303730 then
return true
endif
return false
endfunction
function p1 takes nothing returns boolean
if not p0() then
return false
endif
return true
endfunction
function p2 takes nothing returns nothing
if p1() then
if py() then
set WK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetTriggerUnit()
set Tz[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
call StartTimerBJ(Ty[0],true,.33)
else
endif
if pz() then
set WK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetTriggerUnit()
set Tz[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
call PauseTimer(Ty[0])
else
endif
else
endif
endfunction
function p3 takes nothing returns nothing
set WJ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WJ,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddAction(WJ,function p2)
endfunction
function p4 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function p5 takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function p6 takes nothing returns boolean
return GetBooleanAnd(p4(),p5())
endfunction
function p7 takes nothing returns nothing
call UnitDamageTargetBJ(WK[T1],GetEnumUnit(),(50.*I2R(GetUnitAbilityLevel(WK[T1],$4131364C))+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,WK[T1])*.04)*Nh[GetConvertedPlayerId(GetOwningPlayer(WK[T1]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function p8 takes nothing returns boolean
if not (Tz[T1]==true) then
return false
endif
return true
endfunction
function p9 takes nothing returns nothing
set T1=1
loop
exitwhen T1>8
if p8() then
call SetUnitLifePercentBJ(WK[T1],GetUnitLifePercent(WK[T1])-.02)
set WM[T1+10]=GetUnitLoc(WK[T1])
set T0[T1]=GetUnitsInRangeOfLocMatching(400.,WM[T1+10],Condition(function p6))
call ForGroupBJ(T0[T1],function p7)
call RemoveLocation(WM[T1+10])
call DestroyGroup(T0[T1])
else
endif
set T1=T1+1
endloop
endfunction
function qB takes nothing returns nothing
set WL=CreateTrigger()
call TriggerRegisterTimerExpireEvent(WL,Ty[0])
call TriggerAddAction(WL,function p9)
endfunction
function qC takes nothing returns nothing
local unit Nx=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local unit NR=CreateUnitAtLoc(Player(0),$68303739,Location(GetUnitX(Nx),GetUnitY(Nx)),0)
call m5(NR,1)
call UnitAddAbility(NR,$4131324E)
call UnitApplyTimedLife(NR,$42544C46,1)
call IssueTargetOrder(NR,"creepthunderbolt",Nx)
set NR=null
set Nx=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function qD takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit Nx=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local location Hv=GetUnitLoc(Hw)
local location Nl=GetUnitLoc(Nx)
local real Me
local real Np
local real Nq
local real Ns
local real Nt
local real Ov
local real Ow
local location Ox
local real Oy
local unit Oz
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 and GetUnitState(Hw,UNIT_STATE_LIFE)>=.405 and GetUnitState(Nx,UNIT_STATE_LIFE)>=.405 then
set Me=GetLocationX(Hv)
set Np=GetLocationY(Hv)
set Nq=GetLocationX(Nl)
set Ns=GetLocationY(Nl)
set Nt=Atan2(Np-Ns,Me-Nq)
set Ov=nK(GetUnitX(Hw)-13*Cos(Nt))
set Ow=nL(GetUnitY(Hw)-13*Sin(Nt))
set Ox=Location(Ov,Ow)
call SetUnitPathing(Hw,false)
call SetUnitPositionLoc(Hw,Ox)
call SetUnitPathing(Hw,true)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",Me,Np))
if nM(Nl,Ox)<=65 then
set Oy=LoadReal(Nr,GetHandleId(GetExpiredTimer()),3)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga.mdl",GetUnitX(Hw),GetUnitY(Hw)))
call UnitDamageTarget(Hw,Nx,Oy,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Oz=CreateUnitAtLoc(Player(0),$68303739,Location(GetUnitX(Nx),GetUnitY(Nx)),0)
call m5(Oz,1)
call UnitAddAbility(Oz,$4131324E)
call SetUnitAbilityLevel(Oz,$4131324E,2)
call UnitApplyTimedLife(Oz,$42544C46,1)
call IssueTargetOrder(Oz,"creepthunderbolt",Nx)
set Oz=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ox)
set Ox=null
else
call SetUnitPathing(Hw,true)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedReal(Nr,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
set Hw=null
set Nx=null
endfunction
function qE takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetSpellTargetUnit()
local location Hv
local location Nl
local timer He
local integer MC
local real Hd
local real Pf
local integer Nk
local real NT
if GetSpellAbilityId()==$41313653 or GetSpellAbilityId()==$41313658 then
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)-GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*.2))
set Hv=GetUnitLoc(Hw)
set Nl=GetUnitLoc(Nx)
if DistanceBetweenPoints(Hv,Nl)>=350. then
if GetUnitAbilityLevel(Hw,$41313653)>=1 then
set MC=GetHeroStr(Hw,true)*GetUnitAbilityLevel(Hw,$41313653)
else
set MC=GetHeroStr(Hw,true)*5
endif
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)+I2R(MC)))
call nX(Hw,"+"+I2S(MC),.023,0,255,0)
endif
if GetUnitAbilityLevel(Hw,$41313653)>=1 then
set Hd=(1000+GetUnitState(Hw,UNIT_STATE_MAX_LIFE)/3)*I2R(GetUnitAbilityLevel(Hw,$41313653))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
else
set Hd=(5000+GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*3)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
endif
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,Nx)
call SaveReal(Nr,GetHandleId(He),3,Hd)
call SaveInteger(Nr,GetHandleId(He),2,400)
call TimerStart(He,.007,true,function qD)
set He=null
elseif GetSpellAbilityId()==$4131364F then
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)-GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*.1))
set Pf=100-GetUnitLifePercent(Nx)
set Nk=GetUnitAbilityLevel(Hw,$4131364F)*(GetHeroStr(Hw,true)/5+150)
set NT=(I2R(Nk)+I2R(Nk)*(Pf/20))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
call UnitDamageTarget(Hw,Nx,NT,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),1,Nx)
call TimerStart(He,2,false,function qC)
set He=null
elseif GetSpellAbilityId()==$41313656 then
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)-GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*.1))
set Pf=100-GetUnitLifePercent(Nx)
set Nk=GetHeroStr(Hw,true)*3+2000
set NT=(I2R(Nk)+I2R(Nk)*(Pf/20))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
call UnitDamageTarget(Hw,Nx,NT,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),1,Nx)
call TimerStart(He,2,false,function qC)
set He=null
elseif GetSpellAbilityId()==$41313655 then
call SetUnitState(Nx,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Nx,UNIT_STATE_LIFE)+GetUnitState(Nx,UNIT_STATE_MAX_LIFE)*.25))
elseif GetSpellAbilityId()==$41313730 then
call SetUnitState(Nx,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Nx,UNIT_STATE_LIFE)+GetUnitState(Nx,UNIT_STATE_MAX_LIFE)*.35))
endif
set Nl=null
set Hv=null
set Nx=null
set Hw=null
endfunction
function qF takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function qE)
set He=null
endfunction
function qG takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NS=MV[GetPlayerId(GetOwningPlayer(Hw))]
local real NT
local location Me
local group Np
local boolexpr Nq
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 then
set Me=GetUnitLoc(Hw)
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),250,Nq)
call DestroyBoolExpr(Nq)
if CountUnitsInGroup(Np)>=1 then
if GetUnitAbilityLevel(Hw,$41313436)>=1 then
set NT=I2R(GetUnitAbilityLevel(NS,$41313155)*200+GetHeroStr(NS,true)*3)*Ng[GetPlayerId(GetOwningPlayer(NS))+1]
call mv(NS,R2I(NT))
if GetUnitTypeId(NS)==$48303738 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Void.mdx",NS,"origin"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Holy Light Void.mdx",NS,"origin"))
endif
else
set NT=I2R(GetUnitAbilityLevel(NS,$41313155)*400+GetHeroStr(NS,true)*6)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
set Ps=NS
if GetUnitAbilityLevel(NS,$4130584B)>=1 then
set Nw=R2I(NT+NT/5)
else
set Nw=R2I(NT)
endif
if GetUnitTypeId(NS)==$48303738 then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Stormfall Red.mdl",Me))
else
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Blink Pink Caster.mdl",Me))
endif
call ForGroup(Np,function m2)
endif
call KillUnit(Hw)
call m5(Hw,1)
endif
call DestroyGroup(Np)
set Nq=null
set Np=null
call RemoveLocation(Me)
set Me=null
else
call KillUnit(Hw)
call m5(Hw,1)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NS=null
endfunction
function qH takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local real NT
local string Me
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 then
set Me=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
if GetUnitTypeId(Hw)==$48303738 then
set Me="war3mapImported\\Soul Discharge Purple.mdx"
else
set Me="war3mapImported\\AZ_Abaddon01_D.mdx"
endif
endif
call DestroyEffect(AddSpecialEffectTarget(Me,Hw,"origin"))
call DestroyEffect(AddSpecialEffectTarget(Me,NR,"origin"))
if GetUnitTypeId(Hw)==$48303738 then
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Me="war3mapImported\\Soul Discharge Red.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Me,Hw,"origin"))
endif
if GetUnitAbilityLevel(Hw,$41313436)>=1 then
call IssueTargetOrder(NR,"attack",Hw)
if GetUnitAbilityLevel(Hw,$41304539)>=1 then
set NT=I2R(GetUnitAbilityLevel(Hw,$41304539)*45+GetHeroStr(Hw,true))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
else
set NT=I2R(600+GetHeroStr(Hw,true)*2)*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
endif
call mv(Hw,R2I(NT))
else
if GetUnitAbilityLevel(Hw,$41304539)>=1 then
set NT=I2R(GetUnitAbilityLevel(Hw,$41304539)*65+GetHeroStr(Hw,true)*2)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
else
set NT=I2R(900+GetHeroStr(Hw,true)*3)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
endif
set Nw=R2I(NT)
if GetUnitAbilityLevel(Hw,$4130584B)>=1 then
call mu(Hw,NR,Nw+Nw/5)
else
call mu(Hw,NR,Nw)
endif
endif
else
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set NR=null
set Hw=null
endfunction
function qI takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$41304453)
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$4130584B)
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function qJ takes nothing returns nothing
local unit Hw=GetEnumUnit()
local string M7=""
local location Me
local unit Np
local timer Nq
if GetUnitAbilityLevel(Ps,$4130584B)>=1 then
call mu(Ps,Hw,Nw+Nw/5)
else
call mu(Ps,Hw,Nw)
endif
if GetOwningPlayer(Ps)==GetLocalPlayer() then
if GetUnitTypeId(Ps)==$48303738 then
set M7="war3mapImported\\Conflagrate.mdx"
else
set M7="war3mapImported\\AZ_Abaddon01_D.mdx"
endif
endif
call DestroyEffect(AddSpecialEffectTarget(M7,Hw,"origin"))
if GetUnitAbilityLevel(Ps,$41313436)>=1 then
call IssueTargetOrder(Hw,"attack",Ps)
set Me=GetUnitLoc(Hw)
set Np=CreateUnitAtLoc(Player(0),$68303739,Me,0)
call m5(Np,1)
call UnitAddAbility(Np,$41305530)
if GetUnitAbilityLevel(Ps,$41313159)>=1 then
call SetUnitAbilityLevel(Np,$41305530,3)
else
call SetUnitAbilityLevel(Np,$41305530,2)
endif
call IssueTargetOrder(Np,"innerfire",Hw)
call RemoveLocation(Me)
set Me=null
set Np=null
else
call UnitAddAbility(Hw,$41304453)
if GetUnitAbilityLevel(Ps,$41313159)>=1 then
call SetUnitAbilityLevel(Hw,$41304453,11)
else
call SetUnitAbilityLevel(Hw,$41304453,GetUnitAbilityLevel(Ps,$41313147))
endif
set Nq=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(Nq),0,Hw)
call TimerStart(Nq,5,false,function qI)
set Nq=null
endif
set Hw=null
endfunction
function qK takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local location Hv=GetUnitLoc(Hw)
local group WC
local boolexpr Nc
local real NT
if GetUnitTypeId(Hw)==$48303738 then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Soul Discharge Red.mdx",Hv))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Conflagrate.mdx",Hv))
else
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\AZ_Abaddon01_T2.mdx",Hv))
endif
set WC=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(WC,GetLocationX(Hv),GetLocationY(Hv),500,Nc)
call DestroyBoolExpr(Nc)
set Ps=Hw
if GetUnitAbilityLevel(Hw,$41313159)>=1 then
set NT=I2R(4000+GetHeroStr(Hw,true)*13)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
else
set NT=I2R(GetUnitAbilityLevel(Hw,$41313147)*200+GetHeroStr(Hw,true)*8)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
endif
set Nw=R2I(NT)
call ForGroup(WC,function qJ)
call DestroyGroup(WC)
set Nc=null
set WC=null
call RemoveLocation(Hv)
set Hv=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hw=null
endfunction
function qL takes nothing returns nothing
local unit PM=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local integer Mh=LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call SetHeroStr(PM,GetHeroStr(PM,false)-Mh,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(PM),$41313758,false)
set PM=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function qM takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local location Hv
local location Nl
local integer MC
local timer He
local group WC
local boolexpr Nc
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local real NT
local unit Me
local string Np
if GetSpellAbilityId()==$4131314B then
call GroupRemoveUnit(Tq,Hw)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4131314B,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4131314A,true)
if GetUnitAbilityLevel(Hw,$4131314A)==0 then
call UnitAddAbility(Hw,$4131314A)
endif
call UnitRemoveAbility(Hw,$41313436)
call SetUnitAbilityLevel(Hw,$4131314A,GetUnitAbilityLevel(Hw,$4131314B))
call DestroyEffect(WO[Mc])
set WO[Mc]=AddSpecialEffectTarget("war3mapImported\\Sweep_Blood_Large.mdx",Hw,"weapon")
elseif GetSpellAbilityId()==$4131314A then
if IsUnitInGroup(Hw,Tq)==false then
call GroupAddUnit(Tq,Hw)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4131314A,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4131314B,true)
if GetUnitAbilityLevel(Hw,$4131314B)==0 then
call UnitAddAbility(Hw,$4131314B)
endif
call UnitAddAbility(Hw,$41313436)
call SetUnitAbilityLevel(Hw,$4131314B,GetUnitAbilityLevel(Hw,$4131314A))
call DestroyEffect(WO[Mc])
set WO[Mc]=AddSpecialEffectTarget("war3mapImported\\Sweep_Astral_Large.mdx",Hw,"weapon")
elseif GetSpellAbilityId()==$41313147 or GetSpellAbilityId()==$41313159 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call TimerStart(He,2,false,function qK)
set He=null
elseif GetSpellAbilityId()==$41313148 or GetSpellAbilityId()==$41313157 then
call UnitAddAbility(Hw,$4130584B)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
if GetUnitTypeId(Hw)==$48303738 then
call SaveEffectHandle(Nr,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\Mana Storm.mdx",Hw,"origin"))
else
call SaveEffectHandle(Nr,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\AZ_Abaddon01_T1.mdx",Hw,"origin"))
endif
call TimerStart(He,6.5+I2R(GetUnitAbilityLevel(Hw,$41313148))/2+I2R(GetUnitAbilityLevel(Hw,$41313157))*5,false,function qI)
set He=null
elseif GetSpellAbilityId()==$41304539 or GetSpellAbilityId()==$4130454B then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,GetSpellTargetUnit())
call SaveInteger(Nr,GetHandleId(He),2,5)
call TimerStart(He,.5,true,function qH)
set He=null
elseif GetSpellAbilityId()==$41314251 then
set Hv=GetUnitLoc(Hw)
set WC=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(WC,GetLocationX(Hv),GetLocationY(Hv),500,Nc)
call DestroyBoolExpr(Nc)
set Ps=Hw
set NT=I2R(GetHeroStr(Hw,true)*8)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
if GetUnitAbilityLevel(Hw,$4130584B)>=1 then
set Nw=R2I(NT+NT/5)
else
set Nw=R2I(NT)
endif
call ForGroup(WC,function m2)
call nW(WC,$4131324E,2,"creepthunderbolt")
call DestroyGroup(WC)
set Nc=null
set WC=null
call RemoveLocation(Hv)
set Hv=null
endif
if GetSpellAbilityId()==$41314152 or GetSpellAbilityId()==$41314251 or GetSpellAbilityId()==$41313147 or GetSpellAbilityId()==$41313159 or GetSpellAbilityId()==$41313148 or GetSpellAbilityId()==$41313157 or GetSpellAbilityId()==$41304539 or GetSpellAbilityId()==$4130454B then
if GetUnitAbilityLevel(Hw,$41313155)>=1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41313758,true)
call UnitRemoveAbility(Hw,$41313758)
call UnitAddAbility(Hw,$41313758)
set MC=GetHeroStr(Hw,true)/20
call SetHeroStr(Hw,GetHeroStr(Hw,false)+MC,false)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,MC)
call TimerStart(He,5,false,function qL)
set He=null
set Hv=GetUnitLoc(Hw)
set Nl=nN(Hv,150,GetRandomReal(0,360))
set Me=CreateUnitAtLoc(Player(Mc),$68303739,Nl,0)
if GetUnitAbilityLevel(Hw,$41313436)>=1 then
set Np=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
if GetUnitTypeId(Hw)==$48303738 then
set Np="war3mapImported\\Ember Purple.mdx"
else
set Np="war3mapImported\\Haunt_v2.mdx"
endif
endif
call AddSpecialEffectTarget(Np,Me,"overhead")
call UnitAddAbility(Me,$41313436)
else
set Np=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
if GetUnitTypeId(Hw)==$48303738 then
set Np="war3mapImported\\Ember Red.mdx"
else
set Np="war3mapImported\\Haunt_v22.mdx"
endif
endif
call AddSpecialEffectTarget(Np,Me,"overhead")
endif
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Me)
call SaveInteger(Nr,GetHandleId(He),2,101)
call TimerStart(He,.1,true,function qG)
set He=null
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
set Me=null
endif
endif
set Hw=null
endfunction
function qN takes nothing returns nothing
set WN=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WN,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(WN,function qM)
endfunction
function qO takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(WQ[TV]))==true
endfunction
function qP takes nothing returns nothing
call UnitDamageTargetBJ(WQ[TV],GetEnumUnit(),I2R(GetHeroAgi(WQ[TV],true)/7+50)*I2R(GetUnitAbilityLevel(WQ[TV],$4130595A))*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[TV]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(WQ[TV],GetEnumUnit(),I2R(GetHeroAgi(WQ[TV],true)*2+500)*I2R(GetUnitAbilityLevel(WQ[TV],$41305941))*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[TV]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qQ takes nothing returns boolean
if not (UnitHasBuffBJ(WQ[TV+10],$42303648)==true) then
return false
endif
return true
endfunction
function qR takes nothing returns nothing
set TV=1
loop
exitwhen TV>8
if qQ() then
set WR[TV]=GetUnitLoc(WQ[TV+10])
set TW[TV]=GetUnitsInRangeOfLocMatching(520.,WR[TV],Condition(function qO))
call ForGroupBJ(TW[TV],function qP)
call RemoveLocation(WR[TV])
call DestroyGroup(TW[TV])
else
endif
set TV=TV+1
endloop
endfunction
function qS takes nothing returns nothing
set WP=CreateTrigger()
call DisableTrigger(WP)
call TriggerRegisterTimerEventPeriodic(WP,1.)
call TriggerAddAction(WP,function qR)
endfunction
function qT takes nothing returns boolean
if GetSpellAbilityId()==$41305941 then
return true
endif
if GetSpellAbilityId()==$4130595A then
return true
endif
return false
endfunction
function qU takes nothing returns boolean
if not qT() then
return false
endif
return true
endfunction
function qV takes nothing returns boolean
if GetSpellAbilityId()==$41305946 then
return true
endif
if GetSpellAbilityId()==$41305957 then
return true
endif
return false
endfunction
function qW takes nothing returns boolean
if not qV() then
return false
endif
return true
endfunction
function qX takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function qY takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*2.*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qZ takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*2.*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qa takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*2.*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qb takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*2.*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qc takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*2.*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qd takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*2.*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qe takes nothing returns boolean
if not (GetSpellAbilityId()==$41305957) then
return false
endif
return true
endfunction
function qf takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function qg takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*(I2R(GetUnitAbilityLevel(WQ[20],$41305946))*.1)*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qh takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*(I2R(GetUnitAbilityLevel(WQ[20],$41305946))*.1)*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qi takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*(I2R(GetUnitAbilityLevel(WQ[20],$41305946))*.1)*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qj takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*(I2R(GetUnitAbilityLevel(WQ[20],$41305946))*.1)*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qk takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*(I2R(GetUnitAbilityLevel(WQ[20],$41305946))*.1)*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function ql takes nothing returns nothing
call UnitDamageTargetBJ(WQ[20],GetEnumUnit(),I2R(GetHeroAgi(WQ[20],true))*(I2R(GetUnitAbilityLevel(WQ[20],$41305946))*.1)*Ne[GetConvertedPlayerId(GetOwningPlayer(WQ[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qm takes nothing returns boolean
if not (GetSpellAbilityId()==$41305946) then
return false
endif
return true
endfunction
function qn takes nothing returns nothing
if qU() then
set WQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetTriggerUnit()
set WQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10]=GetSpellTargetUnit()
call EnableTrigger(WP)
else
endif
if qW() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Rv=Rv+30.
set WT[3]=GetUnitLoc(GetTriggerUnit())
set Ru[3]=GetRandomReal(Rv-2.,Rv+2.)
set Rw[3]=GetRandomReal(-5.,5.)
set Rt[3]=GetRandomReal(100.,100.)
call CreateNUnitsAtLoc(1,$68303451,GetOwningPlayer(GetTriggerUnit()),WT[3],Ru[3])
set WU[3]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(5.,$42544C46,WU[3])
set WT[3]=PolarProjectionBJ(WT[3],Rt[3],Ru[3])
call SetUnitPositionLoc(WU[3],WT[3])
call IssuePointOrderLocBJ(WU[3],"breathoffrost",WT[3])
call RemoveLocation(WT[3])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set Rv=0.
set Ru[3]=0.
set Rw[3]=0.
set Rt[3]=0.
set WU[3]=null
else
endif
if qe() then
set WQ[20]=GetTriggerUnit()
set WR[7]=GetUnitLoc(WQ[20])
set TW[7]=GetUnitsInRangeOfLocMatching(800.,WR[7],Condition(function qX))
call ForGroupBJ(TW[7],function qY)
call TriggerSleepAction(1.)
call ForGroupBJ(TW[7],function qZ)
call TriggerSleepAction(1.)
call ForGroupBJ(TW[7],function qa)
call TriggerSleepAction(1.)
call ForGroupBJ(TW[7],function qb)
call TriggerSleepAction(1.)
call ForGroupBJ(TW[7],function qc)
call TriggerSleepAction(1.)
call ForGroupBJ(TW[7],function qd)
call RemoveLocation(WR[7])
call DestroyGroup(TW[7])
set WQ[20]=null
else
endif
if qm() then
set WQ[20]=GetTriggerUnit()
set WR[7]=GetUnitLoc(WQ[20])
set TW[7]=GetUnitsInRangeOfLocMatching(800.,WR[7],Condition(function qf))
call ForGroupBJ(TW[7],function qg)
call TriggerSleepAction(1.)
call ForGroupBJ(TW[7],function qh)
call TriggerSleepAction(1.)
call ForGroupBJ(TW[7],function qi)
call TriggerSleepAction(1.)
call ForGroupBJ(TW[7],function qj)
call TriggerSleepAction(1.)
call ForGroupBJ(TW[7],function qk)
call TriggerSleepAction(1.)
call ForGroupBJ(TW[7],function ql)
call RemoveLocation(WR[7])
call DestroyGroup(TW[7])
set WQ[20]=null
else
endif
endfunction
function qo takes nothing returns nothing
set WS=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WS,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(WS,function qn)
endfunction
function qp takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$4130594E)<1) then
return false
endif
return true
endfunction
function qq takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$4130594A)==1) then
return false
endif
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function qr takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$41305950)<1) then
return false
endif
return true
endfunction
function qs takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$4130594A)==2) then
return false
endif
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function qt takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$4130594F)<1) then
return false
endif
return true
endfunction
function qu takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$4130594A)==3) then
return false
endif
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function qv takes nothing returns boolean
if not (IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==true) then
return false
endif
return true
endfunction
function qw takes nothing returns nothing
if qv() then
if qq() then
if qp() then
call SetUnitVertexColor(GetAttacker(),20,20,20,100)
call UnitAddAbility(GetAttacker(),$4130594E)
call TriggerSleepAction(7.)
call SetUnitVertexColor(GetAttacker(),255,255,255,255)
call UnitRemoveAbility(GetAttacker(),$4130594E)
call UnitRemoveBuffBJ($4230364C,GetAttacker())
else
endif
else
endif
if qs() then
if qr() then
call SetUnitVertexColor(GetAttacker(),20,20,20,100)
call UnitAddAbility(GetAttacker(),$41305950)
call TriggerSleepAction(7.)
call SetUnitVertexColor(GetAttacker(),255,255,255,255)
call UnitRemoveAbility(GetAttacker(),$41305950)
call UnitRemoveBuffBJ($4230364C,GetAttacker())
else
endif
else
endif
if qu() then
if qt() then
call SetUnitVertexColor(GetAttacker(),20,20,20,100)
call UnitAddAbility(GetAttacker(),$4130594F)
call TriggerSleepAction(7.)
call SetUnitVertexColor(GetAttacker(),255,255,255,255)
call UnitRemoveAbility(GetAttacker(),$4130594F)
call UnitRemoveBuffBJ($4230364C,GetAttacker())
else
endif
else
endif
else
endif
endfunction
function qx takes nothing returns nothing
set WV=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WV,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(WV,function qw)
endfunction
function qy takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$48303353 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303550 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303730 then
return true
endif
return false
endfunction
function qz takes nothing returns boolean
if not qy() then
return false
endif
return true
endfunction
function q0 takes nothing returns boolean
if not (GetIssuedOrderIdBJ()==String2OrderIdBJ("flamingarrows")) then
return false
endif
return true
endfunction
function q1 takes nothing returns boolean
if not (GetIssuedOrderIdBJ()==String2OrderIdBJ("unflamingarrows")) then
return false
endif
return true
endfunction
function q2 takes nothing returns nothing
if q0() then
set Nj[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
else
endif
if q1() then
set Nj[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
endfunction
function q3 takes nothing returns nothing
set WW=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WW,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(WW,Condition(function qz))
call TriggerAddAction(WW,function q2)
endfunction
function q4 takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit NR
local location Hv
if GetSpellAbilityId()==$41314253 then
set Hv=GetSpellTargetLoc()
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$75303038,Hv,0)
call IssuePointOrderLoc(NR,"rainoffire",Hv)
call m5(NR,5)
call RemoveLocation(Hv)
set Hv=null
set NR=null
endif
set Hw=null
endfunction
function q5 takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function q4)
set He=null
endfunction
function q6 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local group Me
local real Np
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)>=1 then
set Me=LoadGroupHandle(Nr,GetHandleId(GetExpiredTimer()),1)
set Ps=Hw
set Np=I2R(GetUnitAbilityLevel(Hw,$41313955)*150+GetHeroStr(Hw,true)*3)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Np)
call ForGroup(Me,function m1)
set Me=null
else
call DestroyGroup(LoadGroupHandle(Nr,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedReal(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function q7 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call UnitRemoveAbility(Hw,$41313537)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hw=null
endfunction
function q8 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local group Me
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)>=1 then
set Me=LoadGroupHandle(Nr,GetHandleId(GetExpiredTimer()),1)
set Nw=R2I(LoadReal(Nr,GetHandleId(GetExpiredTimer()),2))
call ForGroup(Me,function mx)
set Me=null
else
call DestroyGroup(LoadGroupHandle(Nr,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedReal(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function q9 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit Nx=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))+1
local real MC
if IsUnitAlly(Nx,GetOwningPlayer(Hw))==true then
if GetUnitAbilityLevel(Hw,$4130554F)>=1 then
set MC=I2R(GetUnitAbilityLevel(Hw,$4130554F)*300+GetHeroInt(Hw,true)*3)*Ng[Mc]
elseif GetUnitAbilityLevel(Hw,$41305634)>=1 then
set MC=I2R(2000+GetHeroInt(Hw,true)*5)*Ng[Mc]
endif
if GetUnitAbilityLevel(Nx,$42303042)<=0 then
call SetUnitState(Nx,UNIT_STATE_LIFE,GetUnitState(Nx,UNIT_STATE_LIFE)+MC)
call nY(Nx,Hw,I2S(R2I(MC)))
endif
else
if GetUnitAbilityLevel(Hw,$4130554F)>=1 then
set MC=I2R(GetUnitAbilityLevel(Hw,$4130554F)*300+GetHeroStr(Hw,true)*5)*Nh[Mc]
elseif GetUnitAbilityLevel(Hw,$41305634)>=1 then
set MC=I2R(3000+GetHeroStr(Hw,true)*9)*Nh[Mc]
endif
call UnitDamageTarget(Hw,Nx,MC,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
set Hw=null
set Nx=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function rB takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetSpellTargetUnit()
local timer He
local real MC
local group Me
local location Np
local boolexpr Nq
if GetSpellAbilityId()==$41313955 then
set Me=CreateGroup()
set Np=GetUnitLoc(Hw)
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),600,Nq)
if GetHeroStr(Hw,false)<GetHeroInt(Hw,false) then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Conflagrate Blue.mdl",Np))
set Ps=Hw
set MC=I2R(GetUnitAbilityLevel(Hw,$41313955)*150+GetHeroInt(Hw,true)*14)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(MC)
call ForGroup(Me,function m1)
call nW(Me,$4131324E,1,"creepthunderbolt")
call DestroyGroup(Me)
else
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Conflagrate.mdl",Np))
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveGroupHandle(Nr,GetHandleId(He),1,Me)
call SaveInteger(Nr,GetHandleId(He),3,6)
call TimerStart(He,1,true,function q6)
set He=null
endif
call DestroyBoolExpr(Nq)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
elseif GetSpellAbilityId()==$4130554F then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,Nx)
call TimerStart(He,.8,false,function q9)
set He=null
elseif GetSpellAbilityId()==$41305634 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,Nx)
call TimerStart(He,.8,false,function q9)
set He=null
elseif GetSpellAbilityId()==$4130554B then
if GetHeroStr(Hw,false)<GetHeroInt(Hw,false) then
call SetHeroStr(Hw,GetHeroStr(Hw,false)+GetHeroInt(Hw,false),false)
call SetHeroInt(Hw,0,true)
call nX(Hw,"Strength!",.023,255,0,100)
else
call SetHeroInt(Hw,GetHeroStr(Hw,false)+GetHeroInt(Hw,false),false)
call SetHeroStr(Hw,0,true)
call nX(Hw,"Intelligence!",.023,0,100,255)
endif
set MC=I2R(125*GetUnitAbilityLevel(Hw,$4130554B)+GetHeroStr(Hw,true)+GetHeroInt(Hw,true))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]/5
set Me=CreateGroup()
set Np=GetUnitLoc(Hw)
set Nq=Condition(function mp)
call GroupEnumUnitsInRange(Me,GetLocationX(Np),GetLocationY(Np),600,Nq)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveGroupHandle(Nr,GetHandleId(He),1,Me)
call SaveReal(Nr,GetHandleId(He),2,MC)
call SaveInteger(Nr,GetHandleId(He),3,8)
call TimerStart(He,1,true,function q8)
set He=null
call DestroyBoolExpr(Nq)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Me=null
elseif GetSpellAbilityId()==$41304C48 then
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MANA)/5)
call nc(Nx,GetHeroStr(Hw,true)+150)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Nx)
call SaveInteger(PR,GetHandleId(He),2,GetHeroStr(Hw,true)+150)
call TimerStart(He,10,true,function m6)
set He=null
elseif GetSpellAbilityId()==$41305551 then
if GetHeroStr(Hw,false)>GetHeroInt(Hw,false) then
set MC=I2R(GetHeroStr(Hw,true)*2*GetUnitAbilityLevel(Hw,$41305551))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
call UnitAddAbility(Hw,$41313537)
if GetUnitStatePercent(Nx,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)<20 then
set MC=MC*3
endif
else
set MC=I2R(GetHeroInt(Hw,true)*4*GetUnitAbilityLevel(Hw,$41305551))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
call UnitAddAbility(Hw,$41313537)
if GetUnitStatePercent(Nx,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)<20 then
set MC=MC*3
endif
endif
call UnitDamageTarget(Hw,Nx,MC,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call TriggerSleepAction(7)
call UnitRemoveAbility(Hw,$41305038)
elseif GetSpellAbilityId()==$41305636 then
if GetHeroStr(Hw,false)>GetHeroInt(Hw,false) then
set MC=I2R(GetHeroStr(Hw,true)*10)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
call UnitAddAbility(Hw,$41313537)
if GetUnitStatePercent(Nx,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)<30 then
set MC=MC*3
endif
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call TimerStart(He,10,false,function q7)
set He=null
else
set MC=I2R(GetHeroInt(Hw,false)*20)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
call UnitAddAbility(Hw,$41313537)
if GetUnitStatePercent(Nx,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)<30 then
set MC=MC*3
endif
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call TimerStart(He,10,false,function q7)
set He=null
endif
call UnitDamageTarget(Hw,Nx,MC,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
set Nx=null
set Hw=null
endfunction
function rC takes nothing returns nothing
local unit Hw=GetSummoningUnit()
local unit Nx=GetSummonedUnit()
local location Me
local integer Np
local integer Nq
if GetUnitTypeId(Nx)==$68303444 then
set Me=GetUnitLoc(Hw)
set Np=GetUnitAbilityLevel(Hw,$4130554C)
set Nq=GetUnitAbilityLevel(Hw,$41305635)
if Nq>=1 then
set N6=Np
else
set N6=11
endif
call IssuePointOrderLoc(Nx,"cloudoffog",Me)
call RemoveLocation(Me)
set Me=null
endif
set Hw=null
set Nx=null
endfunction
function rD takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function rB)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddAction(He,function rC)
set He=null
endfunction
function rE takes nothing returns boolean
if GetUnitTypeId(MV[GetConvertedPlayerId(GetTriggerPlayer())-1])==$48303443 then
return true
endif
if GetUnitTypeId(MV[GetConvertedPlayerId(GetTriggerPlayer())-1])==$48303654 then
return true
endif
return false
endfunction
function rF takes nothing returns boolean
if not rE() then
return false
endif
return true
endfunction
function rG takes nothing returns nothing
set SL[99]=I2R(GetHeroStr(MV[GetConvertedPlayerId(GetTriggerPlayer())-1],false))+I2R(GetHeroInt(MV[GetConvertedPlayerId(GetTriggerPlayer())-1],false))
call SetHeroInt(MV[GetConvertedPlayerId(GetTriggerPlayer())-1],R2I(SL[99])/2-1,true)
call SetHeroStr(MV[GetConvertedPlayerId(GetTriggerPlayer())-1],R2I(SL[99])/2+1,true)
endfunction
function rH takes nothing returns nothing
set WX=CreateTrigger()
call TriggerRegisterPlayerChatEvent(WX,Player(0),"-stats",true)
call TriggerRegisterPlayerChatEvent(WX,Player(1),"-stats",true)
call TriggerRegisterPlayerChatEvent(WX,Player(2),"-stats",true)
call TriggerRegisterPlayerChatEvent(WX,Player(3),"-stats",true)
call TriggerRegisterPlayerChatEvent(WX,Player(4),"-stats",true)
call TriggerRegisterPlayerChatEvent(WX,Player(5),"-stats",true)
call TriggerRegisterPlayerChatEvent(WX,Player(6),"-stats",true)
call TriggerRegisterPlayerChatEvent(WX,Player(7),"-stats",true)
call TriggerAddCondition(WX,Condition(function rF))
call TriggerAddAction(WX,function rG)
endfunction
function rI takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rJ takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true))*11.+10000.)*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rK takes nothing returns boolean
if not (GetSpellAbilityId()==$41305453) then
return false
endif
return true
endfunction
function rL takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rM takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true))*7.+1000.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544C)))*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rN takes nothing returns boolean
if not (GetSpellAbilityId()==$4130544C) then
return false
endif
return true
endfunction
function rO takes nothing returns nothing
if rK() then
set V2=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303135,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(2.,$42544C46,GetLastCreatedUnit())
call UnitAddAbility(GetLastCreatedUnit(),$41313532)
set ST=GetUnitsInRangeOfLocMatching(400.,V2,Condition(function rI))
call ForGroupBJ(ST,function rJ)
call DestroyGroup(ST)
call RemoveLocation(V2)
else
endif
if rN() then
set V2=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303135,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(2.,$42544C46,GetLastCreatedUnit())
call UnitAddAbility(GetLastCreatedUnit(),$41313532)
set ST=GetUnitsInRangeOfLocMatching(400.,V2,Condition(function rL))
call ForGroupBJ(ST,function rM)
call DestroyGroup(ST)
call RemoveLocation(V2)
else
endif
endfunction
function rP takes nothing returns nothing
set WY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WY,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(WY,function rO)
endfunction
function rQ takes nothing returns boolean
if not (GetSpellAbilityId()==$4130544A) then
return false
endif
return true
endfunction
function rR takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rS takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true)/7)+100.)*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))+0.)*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rT takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function rU takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)/10+70)*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function rV takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rW takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true)/7)+100.)*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))+0.)*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rX takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function rY takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)/10+70)*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function rZ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function ra takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true)/7)+100.)*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))+0.)*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rb takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function rc takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)/10+70)*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function rd takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function re takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true)/7)+100.)*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))+0.)*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rf takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function rg takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)/10+70)*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function rh takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function ri takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true)/7)+100.)*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))+0.)*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rj takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function rk takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)/10+70)*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function rl takes nothing returns nothing
set Wa=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(800.,Wa,Condition(function rR))
call ForGroupBJ(ST,function rS)
call DestroyGroup(ST)
set ST=GetUnitsInRangeOfLocMatching(800.,Wa,Condition(function rT))
call ForGroupBJ(ST,function rU)
call DestroyGroup(ST)
call RemoveLocation(Wa)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.)
set Wa=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(800.,Wa,Condition(function rV))
call ForGroupBJ(ST,function rW)
call DestroyGroup(ST)
set ST=GetUnitsInRangeOfLocMatching(800.,Wa,Condition(function rX))
call ForGroupBJ(ST,function rY)
call DestroyGroup(ST)
call RemoveLocation(Wa)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.)
set Wa=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(800.,Wa,Condition(function rZ))
call ForGroupBJ(ST,function ra)
call DestroyGroup(ST)
set ST=GetUnitsInRangeOfLocMatching(800.,Wa,Condition(function rb))
call ForGroupBJ(ST,function rc)
call DestroyGroup(ST)
call RemoveLocation(Wa)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.)
set Wa=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(800.,Wa,Condition(function rd))
call ForGroupBJ(ST,function re)
call DestroyGroup(ST)
set ST=GetUnitsInRangeOfLocMatching(800.,Wa,Condition(function rf))
call ForGroupBJ(ST,function rg)
call DestroyGroup(ST)
call RemoveLocation(Wa)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.)
set Wa=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(800.,Wa,Condition(function rh))
call ForGroupBJ(ST,function ri)
call DestroyGroup(ST)
set ST=GetUnitsInRangeOfLocMatching(800.,Wa,Condition(function rj))
call ForGroupBJ(ST,function rk)
call DestroyGroup(ST)
call RemoveLocation(Wa)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.)
endfunction
function rm takes nothing returns nothing
set WZ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WZ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(WZ,Condition(function rQ))
call TriggerAddAction(WZ,function rl)
endfunction
function rn takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function ro takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]*((I2R(GetHeroAgi(GetTriggerUnit(),true))+I2R(GetHeroInt(GetTriggerUnit(),true)))*5.))
endfunction
function rp takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rq takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),20.*(I2R(GetHeroInt(GetTriggerUnit(),true))+I2R(GetHeroAgi(GetTriggerUnit(),true)))*Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function rr takes nothing returns boolean
if not (GetSpellAbilityId()==$41305251) then
return false
endif
return true
endfunction
function rs takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function rt takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]*((I2R(GetHeroAgi(GetTriggerUnit(),true))+I2R(GetHeroInt(GetTriggerUnit(),true)))*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130524A))*.3)))
endfunction
function ru takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rv takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130524A))*(I2R(GetHeroInt(GetTriggerUnit(),true))+I2R(GetHeroAgi(GetTriggerUnit(),true)))*Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function rw takes nothing returns boolean
if not (GetSpellAbilityId()==$4130524A) then
return false
endif
return true
endfunction
function rx takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function ry takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6830335A
endfunction
function rz takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6830374A
endfunction
function r0 takes nothing returns boolean
return GetBooleanOr(ry(),rz())
endfunction
function r1 takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"starfall")
endfunction
function r2 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6830335A
endfunction
function r3 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6830374A
endfunction
function r4 takes nothing returns boolean
return GetBooleanOr(r2(),r3())
endfunction
function r5 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function r6 takes nothing returns boolean
if not (GetSpellAbilityId()==$41304657) then
return false
endif
return true
endfunction
function r7 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function r8 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function r9 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sB takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303359
endfunction
function sC takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function sD takes nothing returns boolean
if not (GetSpellAbilityId()==$41305252) then
return false
endif
return true
endfunction
function sE takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sF takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sG takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sH takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303359
endfunction
function sI takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function sJ takes nothing returns boolean
if not (GetSpellAbilityId()==$4130524C) then
return false
endif
return true
endfunction
function sK takes nothing returns nothing
if rr() then
set Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303357,GetOwningPlayer(GetTriggerUnit()),Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),.3)
call UnitApplyTimedLifeBJ(6.,$42544C46,GetLastCreatedUnit())
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
call TriggerSleepAction(5.)
set ST=GetUnitsInRangeOfLocMatching(200.,Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Condition(function rn))
call ForGroupBJ(ST,function ro)
call DestroyGroup(ST)
set ST=GetUnitsInRangeOfLocMatching(200.,Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Condition(function rp))
call ForGroupBJ(ST,function rq)
call DestroyGroup(ST)
call RemoveLocation(Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
else
endif
if rw() then
set Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303357,GetOwningPlayer(GetTriggerUnit()),Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),.3)
call UnitApplyTimedLifeBJ(6.,$42544C46,GetLastCreatedUnit())
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
call TriggerSleepAction(5.)
set ST=GetUnitsInRangeOfLocMatching(200.,Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Condition(function rs))
call ForGroupBJ(ST,function rt)
call DestroyGroup(ST)
set ST=GetUnitsInRangeOfLocMatching(200.,Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Condition(function ru))
call ForGroupBJ(ST,function rv)
call DestroyGroup(ST)
call RemoveLocation(Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
else
endif
if r6() then
set V2=GetUnitLoc(GetTriggerUnit())
if rx() then
call CreateNUnitsAtLoc(1,$6830374A,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(1,$6830335A,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
endif
call SetUnitVertexColor(GetLastCreatedUnit(),255,255,255,100)
call RemoveLocation(V2)
call TriggerSleepAction(2.)
set ST=GetUnitsOfPlayerMatching(GetOwningPlayer(GetTriggerUnit()),Condition(function r0))
call ForGroupBJ(ST,function r1)
call DestroyGroup(ST)
call TriggerSleepAction(5.)
set ST=GetUnitsOfPlayerMatching(GetOwningPlayer(GetTriggerUnit()),Condition(function r4))
call ForGroupBJ(ST,function r5)
call DestroyGroup(ST)
else
endif
if sD() then
set Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetUnit()
set We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitLoc(GetTriggerUnit())
set We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10]=GetUnitLoc(Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call CreateNUnitsAtLoc(1,$68303359,GetOwningPlayer(GetTriggerUnit()),We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],bj_UNIT_FACING)
if r7() then
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,255,255)
else
endif
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
call CreateNUnitsAtLoc(1,$68303359,GetOwningPlayer(GetTriggerUnit()),We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10],bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"creepthunderbolt",Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
if r8() then
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,255,255)
else
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,0,255)
endif
call TriggerSleepAction(.5)
call SetUnitPositionLocFacingLocBJ(GetTriggerUnit(),We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10],We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call SetUnitPositionLoc(Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call UnitDamageTargetBJ(GetTriggerUnit(),Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],10.*((I2R(GetHeroAgi(GetTriggerUnit(),true))+I2R(GetHeroInt(GetTriggerUnit(),true)))/1.)*Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call TriggerSleepAction(4.)
call SetUnitPositionLoc(Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10])
call SetUnitPositionLoc(GetTriggerUnit(),We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
if r9() then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ShadowAssault.mdx",We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10]))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ShadowAssault.mdx",We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
else
endif
set ST=GetUnitsOfPlayerMatching(GetOwningPlayer(GetTriggerUnit()),Condition(function sB))
call ForGroupBJ(ST,function sC)
call DestroyGroup(ST)
set Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=null
call RemoveLocation(We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call RemoveLocation(We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10])
else
endif
if sJ() then
set Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetUnit()
set We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitLoc(GetTriggerUnit())
set We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10]=GetUnitLoc(Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call CreateNUnitsAtLoc(1,$68303359,GetOwningPlayer(GetTriggerUnit()),We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],bj_UNIT_FACING)
if sE() then
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,255,255)
else
endif
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
call CreateNUnitsAtLoc(1,$68303359,GetOwningPlayer(GetTriggerUnit()),We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10],bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"creepthunderbolt",Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
if sF() then
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,255,255)
else
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,0,255)
endif
call TriggerSleepAction(.5)
call SetUnitPositionLocFacingLocBJ(GetTriggerUnit(),We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10],We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call SetUnitPositionLoc(Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call UnitDamageTargetBJ(GetTriggerUnit(),Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130524C))*((I2R(GetHeroAgi(GetTriggerUnit(),true))+I2R(GetHeroInt(GetTriggerUnit(),true)))/2.)*Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call TriggerSleepAction(4.)
call SetUnitPositionLoc(Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10])
call SetUnitPositionLoc(GetTriggerUnit(),We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
if sG() then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ShadowAssault.mdx",We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10]))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ShadowAssault.mdx",We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
else
endif
set ST=GetUnitsOfPlayerMatching(GetOwningPlayer(GetTriggerUnit()),Condition(function sH))
call ForGroupBJ(ST,function sI)
call DestroyGroup(ST)
set Wd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=null
call RemoveLocation(We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call RemoveLocation(We[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10])
else
endif
endfunction
function sL takes nothing returns nothing
set Wb=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wb,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wb,function sK)
endfunction
function sM takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call UnitRemoveAbility(Hw,$4130535A)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41305339,true)
call RemoveUnit(Ub[GetPlayerId(GetOwningPlayer(Hw))])
set Ub[GetPlayerId(GetOwningPlayer(Hw))]=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hw=null
endfunction
function sN takes nothing returns nothing
local unit Hw=GetEnumUnit()
local real MF=GetUnitX(Ps)
local real MG=GetUnitY(Ps)
local real Pv=GetUnitX(Hw)
local real Pw=GetUnitY(Hw)
local real NU=Atan2(MG-Pw,MF-Pv)
local real Py=nK(GetUnitX(Hw)-10*Cos(NU))
local real Pz=nL(GetUnitY(Hw)-10*Sin(NU))
local location Hv=Location(Py,Pz)
local string Me
if nM(Hv,Location(MF,MG))<=500 then
call SetUnitPositionLoc(Hw,Hv)
set Me=""
if GetOwningPlayer(Ps)==GetLocalPlayer() then
set Me="Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(Me,Hv))
endif
call RemoveLocation(Hv)
set Hv=null
set Hw=null
endfunction
function sO takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local group Nb=LoadGroupHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
set Ps=Hw
call ForGroup(Nb,function sN)
else
call DestroyGroup(Nb)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set Nb=null
endfunction
function sP takes nothing returns nothing
local unit Nx=GetEnumUnit()
local location Hv=GetUnitLoc(Nx)
local unit NR
call mu(Ps,Nx,Nw)
set NR=CreateUnitAtLoc(Player(0),$68303739,Hv,0)
call m5(NR,1)
call UnitAddAbility(NR,$41305232)
call IssueTargetOrder(NR,"curse",Nx)
call RemoveLocation(Hv)
set NR=null
set Nx=null
set Hv=null
endfunction
function sQ takes nothing returns nothing
local unit Nx=GetEnumUnit()
local location Hv=GetUnitLoc(Nx)
local unit NR
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Effect_Shadow_Assault_Mini.mdx",Hv))
call mu(Ps,Nx,Nw)
set NR=CreateUnitAtLoc(Player(0),$68303739,Hv,0)
call m5(NR,1)
call UnitAddAbility(NR,$4131324E)
call IssueTargetOrder(NR,"creepthunderbolt",Nx)
call RemoveLocation(Hv)
set NR=null
set Nx=null
set Hv=null
endfunction
function sR takes unit Hw returns nothing
local location Hv=GetUnitLoc(Hw)
local group WC=CreateGroup()
local boolexpr Nc=Condition(function mq)
call GroupEnumUnitsInRange(WC,GetLocationX(Hv),GetLocationY(Hv),250,Nc)
set Ps=Hw
if GetUnitAbilityLevel(Hw,$41305048)>=1 then
set Nw=R2I(I2R(200*GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$41305048)+GetHeroAgi(MV[GetPlayerId(GetOwningPlayer(Hw))],true)*5)*Ne[GetPlayerId(GetOwningPlayer(MV[GetPlayerId(GetOwningPlayer(Hw))]))+1])
else
set Nw=R2I(I2R(2000+GetHeroAgi(MV[GetPlayerId(GetOwningPlayer(Hw))],true)*9)*Ne[GetPlayerId(GetOwningPlayer(MV[GetPlayerId(GetOwningPlayer(Hw))]))+1])
endif
call ForGroup(WC,function sQ)
call DestroyGroup(WC)
call DestroyBoolExpr(Nc)
call RemoveLocation(Hv)
set WC=null
set Nc=null
set Hv=null
endfunction
function sS takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local location Me
local location Np
local string Nq
local group Ns
local boolexpr Nt
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
set Me=GetUnitLoc(Hw)
set Np=nN(Me,10,GetUnitFacing(Hw))
call SetUnitPositionLoc(Hw,Np)
set Nq=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Nq="war3mapImported\\SoulshotD-gradeTarget.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(Nq,Me))
set Ns=CreateGroup()
set Nt=Condition(function mq)
call GroupEnumUnitsInRange(Ns,GetLocationX(Me),GetLocationY(Me),85,Nt)
if CountUnitsInGroup(Ns)>0 then
call sR(Hw)
call UnitRemoveAbility(Hw,$41305038)
call DestroyGroup(Ns)
call DestroyBoolExpr(Nt)
set Ns=null
set Nt=null
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call DestroyGroup(Ns)
call DestroyBoolExpr(Nt)
set Ns=null
set Nt=null
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
else
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function sT takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$41305038)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function sU takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetEnumUnit()
local integer MC=50*GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$4130504D)+GetHeroAgi(MV[GetPlayerId(GetOwningPlayer(Hw))],true)/4
local timer He
call nc(Nx,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Nx)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\darkbirth.mdx",Nx,"origin"))
call TimerStart(He,7,true,function m6)
set He=null
set Nx=null
set Hw=null
endfunction
function sV takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local timer He
local group Nb
local location Hv
local boolexpr Vz
local integer MC
local string Me
if GetSpellAbilityId()==$41305037 or GetSpellAbilityId()==$41305145 then
set He=CreateTimer()
call UnitAddAbility(Hw,$41305038)
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call TimerStart(He,2.5,false,function sT)
set He=null
if Ub[GetPlayerId(GetOwningPlayer(Hw))]!=null then
call UnitAddAbility(Ub[GetPlayerId(GetOwningPlayer(Hw))],GetSpellAbilityId())
set MC=GetUnitAbilityLevel(Hw,GetSpellAbilityId())
call SetUnitAbilityLevel(Ub[GetPlayerId(GetOwningPlayer(Hw))],GetSpellAbilityId(),MC)
call IssueImmediateOrder(Ub[GetPlayerId(GetOwningPlayer(Hw))],"battleroar")
endif
elseif GetSpellAbilityId()==$4130504D then
set MC=50*GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$4130504D)+GetHeroAgi(MV[GetPlayerId(GetOwningPlayer(Hw))],true)/4
call nc(Hw,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,7,true,function m6)
set He=null
set Nb=CreateGroup()
set Hv=GetUnitLoc(Hw)
set Vz=Condition(function mo)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),450,Vz)
call ForGroup(Nb,function sU)
call DestroyBoolExpr(Vz)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Vz=null
set Nb=null
if Ub[GetPlayerId(GetOwningPlayer(Hw))]!=null then
call UnitAddAbility(Ub[GetPlayerId(GetOwningPlayer(Hw))],GetSpellAbilityId())
set MC=GetUnitAbilityLevel(Hw,GetSpellAbilityId())
call SetUnitAbilityLevel(Ub[GetPlayerId(GetOwningPlayer(Hw))],GetSpellAbilityId(),MC)
call IssueImmediateOrder(Ub[GetPlayerId(GetOwningPlayer(Hw))],"frenzy")
endif
elseif GetSpellAbilityId()==$41305048 or GetSpellAbilityId()==$41305144 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,71)
call TimerStart(He,.005,true,function sS)
set He=null
if Ub[GetPlayerId(GetOwningPlayer(Hw))]!=null then
call UnitAddAbility(Ub[GetPlayerId(GetOwningPlayer(Hw))],GetSpellAbilityId())
set MC=GetUnitAbilityLevel(Hw,GetSpellAbilityId())
call SetUnitAbilityLevel(Ub[GetPlayerId(GetOwningPlayer(Hw))],GetSpellAbilityId(),MC)
call IssueImmediateOrder(Ub[GetPlayerId(GetOwningPlayer(Hw))],"windwalk")
endif
elseif GetSpellAbilityId()==$4130505A or GetSpellAbilityId()==$41305157 then
set Nb=CreateGroup()
set Hv=GetUnitLoc(Hw)
set Me=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Me="war3mapImported\\Arcane Explosion.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Me,Hv))
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),250,Vz)
call DestroyBoolExpr(Vz)
call RemoveLocation(Hv)
set Ps=Hw
if GetUnitAbilityLevel(Hw,$4130505A)>=1 then
set Nw=R2I(I2R(200*GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$4130505A)+GetHeroAgi(MV[GetPlayerId(GetOwningPlayer(Hw))],true)*3)*Ne[GetPlayerId(GetOwningPlayer(MV[GetPlayerId(GetOwningPlayer(Hw))]))+1])
else
set Nw=R2I(I2R(2000+GetHeroAgi(MV[GetPlayerId(GetOwningPlayer(Hw))],true)*6)*Ne[GetPlayerId(GetOwningPlayer(MV[GetPlayerId(GetOwningPlayer(Hw))]))+1])
endif
call ForGroup(Nb,function sP)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveGroupHandle(Nr,GetHandleId(He),2,Nb)
call SaveInteger(Nr,GetHandleId(He),1,31)
call TimerStart(He,.005,true,function sO)
set He=null
set Hv=null
set Vz=null
if Ub[GetPlayerId(GetOwningPlayer(Hw))]!=null then
call UnitAddAbility(Ub[GetPlayerId(GetOwningPlayer(Hw))],GetSpellAbilityId())
set MC=GetUnitAbilityLevel(Hw,GetSpellAbilityId())
call SetUnitAbilityLevel(Ub[GetPlayerId(GetOwningPlayer(Hw))],GetSpellAbilityId(),MC)
call IssueImmediateOrder(Ub[GetPlayerId(GetOwningPlayer(Hw))],"controlmagic")
endif
elseif GetSpellAbilityId()==$41305339 then
set Hv=GetSpellTargetLoc()
set Ub[GetPlayerId(GetOwningPlayer(Hw))]=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303442,Hv,0)
set MC=GetHeroAgi(Hw,true)*2
call nc(Ub[GetPlayerId(GetOwningPlayer(Hw))],MC)
call RemoveLocation(Hv)
set Hv=null
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$41305339,false)
call UnitAddAbility(Hw,$4130535A)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call TimerStart(He,15,false,function sM)
set He=null
elseif GetSpellAbilityId()==$4130535A then
call IssueTargetOrder(Ub[GetPlayerId(GetOwningPlayer(Hw))],"attack",GetSpellTargetUnit())
endif
set Nb=null
set Hw=null
endfunction
function sW takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function sV)
set He=null
endfunction
function sX takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))+1
local unit Nx
local unit NR
local location Hv
if GetSpellAbilityId()==$41314432 then
set Hv=GetUnitLoc(Hw)
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$7530304E,Hv,0)
set Nx=GetSpellTargetUnit()
call IssueTargetOrder(NR,"attack",Nx)
call m5(NR,15)
call RemoveLocation(Hv)
set Hv=null
set Nx=null
set NR=null
elseif GetSpellAbilityId()==$41304D51 then
set Nx=GetSpellTargetUnit()
set Nw=R2I(I2R(200*GetUnitAbilityLevel(Hw,$41304D51)+GetHeroInt(Hw,true)*10)*N1[Mc])
call ms(Hw,Nx,Nw)
elseif GetSpellAbilityId()==$41304D53 or GetSpellAbilityId()==$41304D59 then
set Hv=GetUnitLoc(Hw)
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303258,Hv,0)
call IssuePointOrderLoc(NR,"rainoffire",Hv)
call m5(NR,6)
call RemoveLocation(Hv)
set Hv=null
set Nx=null
set NR=null
endif
set Nx=null
set Hw=null
endfunction
function sY takes nothing returns nothing
set Wf=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wf,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wf,function sX)
endfunction
function sZ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function sa takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*3.*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function sb takes nothing returns boolean
if UnitHasBuffBJ(GetEnumUnit(),$42303345)==true then
return true
endif
if UnitHasBuffBJ(GetEnumUnit(),$42303346)==true then
return true
endif
return false
endfunction
function sc takes nothing returns boolean
if not sb() then
return false
endif
return true
endfunction
function sd takes nothing returns nothing
if sc() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*(3.*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
endfunction
function se takes nothing returns boolean
if not (GetSpellAbilityId()==$41303954) then
return false
endif
return true
endfunction
function sf takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function sg takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*6.*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function sh takes nothing returns boolean
if UnitHasBuffBJ(GetEnumUnit(),$42303345)==true then
return true
endif
if UnitHasBuffBJ(GetEnumUnit(),$42303346)==true then
return true
endif
return false
endfunction
function si takes nothing returns boolean
if not sh() then
return false
endif
return true
endfunction
function sj takes nothing returns nothing
if si() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*(3.*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
endfunction
function sk takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D58) then
return false
endif
return true
endfunction
function sl takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function sm takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41304D50))*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function sn takes nothing returns boolean
if UnitHasBuffBJ(GetEnumUnit(),$42303345)==true then
return true
endif
if UnitHasBuffBJ(GetEnumUnit(),$42303346)==true then
return true
endif
return false
endfunction
function so takes nothing returns boolean
if not sn() then
return false
endif
return true
endfunction
function sp takes nothing returns nothing
if so() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*(3.*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
endfunction
function sq takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D50) then
return false
endif
return true
endfunction
function sr takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function ss takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*20.*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function st takes nothing returns boolean
if UnitHasBuffBJ(GetEnumUnit(),$42303345)==true then
return true
endif
if UnitHasBuffBJ(GetEnumUnit(),$42303346)==true then
return true
endif
return false
endfunction
function su takes nothing returns boolean
if not st() then
return false
endif
return true
endfunction
function sv takes nothing returns nothing
if su() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*(3.*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
endfunction
function sw takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D57) then
return false
endif
return true
endfunction
function sx takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE)==false
endfunction
function sy takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function sz takes nothing returns boolean
return GetBooleanAnd(sx(),sy())
endfunction
function s0 takes nothing returns boolean
if not (GetSpellAbilityId()==$41303042) then
return false
endif
return true
endfunction
function s1 takes nothing returns nothing
if se() then
set Wa=GetUnitLoc(GetTriggerUnit())
set V2=PolarProjectionBJ(Wa,350.,GetUnitFacing(GetTriggerUnit()))
set ST=GetUnitsInRangeOfLocMatching(400.,V2,Condition(function sZ))
call ForGroupBJ(ST,function sa)
call ForGroupBJ(ST,function sd)
call DestroyGroup(ST)
call RemoveLocation(Wa)
call RemoveLocation(V2)
else
endif
if sk() then
set Wa=GetUnitLoc(GetTriggerUnit())
set V2=PolarProjectionBJ(Wa,350.,GetUnitFacing(GetTriggerUnit()))
set ST=GetUnitsInRangeOfLocMatching(400.,V2,Condition(function sf))
call ForGroupBJ(ST,function sg)
call ForGroupBJ(ST,function sj)
call DestroyGroup(ST)
call RemoveLocation(Wa)
call RemoveLocation(V2)
else
endif
if sq() then
set Wa=GetSpellTargetLoc()
set ST=GetUnitsInRangeOfLocMatching(500.,Wa,Condition(function sl))
call ForGroupBJ(ST,function sm)
call ForGroupBJ(ST,function sp)
call DestroyGroup(ST)
call RemoveLocation(Wa)
else
endif
if sw() then
set Wa=GetSpellTargetLoc()
set ST=GetUnitsInRangeOfLocMatching(500.,Wa,Condition(function sr))
call ForGroupBJ(ST,function ss)
call ForGroupBJ(ST,function sv)
call DestroyGroup(ST)
call RemoveLocation(Wa)
else
endif
if s0() then
set Wh[999]=GetSpellTargetUnit()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Wa=GetUnitLoc(Wh[999])
set ST=GetUnitsInRangeOfLocMatching(400.,Wa,Condition(function sz))
set Wi[333]=GroupPickRandomUnit(ST)
call UnitDamageTargetBJ(GetTriggerUnit(),Wi[333],(I2R(GetHeroInt(GetTriggerUnit(),true))*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41303042))+I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41303042))*700.)*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("overhead",Wi[333],"Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call DestroyGroup(ST)
call RemoveLocation(Wa)
call TriggerSleepAction(.5)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function s2 takes nothing returns nothing
set Wg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wg,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wg,function s1)
endfunction
function s3 takes nothing returns boolean
if not (GetSpellAbilityId()==$41303032) then
return false
endif
return true
endfunction
function s4 takes nothing returns boolean
return IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetSpellAbilityUnit()))==true
endfunction
function s5 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function s6 takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function s7 takes nothing returns boolean
return GetBooleanAnd(s5(),s6())
endfunction
function s8 takes nothing returns nothing
call UnitDamageTargetBJ(Wk,GetEnumUnit(),QM*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
call SetUnitLifeBJ(Wk,GetUnitStateSwap(UNIT_STATE_LIFE,Wk)+SL[0]*Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call IssueTargetOrderBJ(GetEnumUnit(),"attack",Wk)
endfunction
function s9 takes nothing returns nothing
set Wk=GetSpellAbilityUnit()
set Wl=GetUnitLoc(Wk)
set QL=CountUnitsInGroup(GetUnitsInRangeOfLocMatching(600.,Wl,Condition(function s4)))
set QM=25.+I2R(GetHeroInt(Wk,true))*I2R(GetUnitAbilityLevelSwapped($41303032,Wk))+0.
set QN=GetUnitsInRangeOfLocMatching(600.,Wl,Condition(function s7))
set SL[0]=I2R(GetHeroInt(Wk,true))*2.
call ForGroupBJ(QN,function s8)
call CreateTextTagUnitBJ("+"+I2S(R2I(SL[0]*Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])),Wk,0,10.,0.,100,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set Wk=null
set Wl=null
set QL=0
set QM=0.
set QN=null
set SL[0]=0.
call RemoveLocation(Wl)
call DestroyGroup(QN)
call UnitAddAbility(GetTriggerUnit(),$41305346)
call SetUnitAbilityLevel(GetTriggerUnit(),$41305346,GetUnitAbilityLevel(GetTriggerUnit(),$41303032))
call TriggerSleepAction(4.)
call UnitRemoveAbility(GetTriggerUnit(),$41305346)
endfunction
function tB takes nothing returns nothing
set Wj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wj,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Wj,Condition(function s3))
call TriggerAddAction(Wj,function s9)
endfunction
function tC takes nothing returns boolean
if not (GetSpellAbilityId()==$41304654) then
return false
endif
return true
endfunction
function tD takes nothing returns boolean
return IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetSpellAbilityUnit()))==true
endfunction
function tE takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function tF takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function tG takes nothing returns boolean
return GetBooleanAnd(tE(),tF())
endfunction
function tH takes nothing returns nothing
call UnitDamageTargetBJ(Wk,GetEnumUnit(),QM*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
call SetUnitLifeBJ(Wk,GetUnitStateSwap(UNIT_STATE_LIFE,Wk)+SL[0]*Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call IssueTargetOrderBJ(GetEnumUnit(),"attack",Wk)
endfunction
function tI takes nothing returns nothing
set Wk=GetSpellAbilityUnit()
set Wl=GetUnitLoc(Wk)
set QL=CountUnitsInGroup(GetUnitsInRangeOfLocMatching(600.,Wl,Condition(function tD)))
set QM=25.+I2R(GetHeroInt(Wk,true))*10.+I2R(GetHeroInt(Wk,true))*I2R(QL)
set QN=GetUnitsInRangeOfLocMatching(600.,Wl,Condition(function tG))
set SL[0]=I2R(GetHeroInt(Wk,true))*4.
call ForGroupBJ(QN,function tH)
call CreateTextTagUnitBJ("+"+I2S(R2I(SL[0]*Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])),Wk,0,10.,0.,100,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set Wk=null
set Wl=null
set QL=0
set QM=0.
set QN=null
set SL[0]=0.
call RemoveLocation(Wl)
call DestroyGroup(QN)
call UnitAddAbility(GetTriggerUnit(),$41305346)
call SetUnitAbilityLevel(GetTriggerUnit(),$41305346,11)
call TriggerSleepAction(4.)
call UnitRemoveAbility(GetTriggerUnit(),$41305346)
endfunction
function tJ takes nothing returns nothing
set Wm=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wm,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Wm,Condition(function tC))
call TriggerAddAction(Wm,function tI)
endfunction
function tK takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local timer Me
if GetUnitAbilityLevel(Hw,$42303737)>=1 and GetWidgetLife(Hw)>.405 then
else
call UnitRemoveAbility(Hw,$42303035)
call UnitRemoveAbility(Hw,$4130534F)
set Me=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Me),0,Hw)
call SaveInteger(PR,GetHandleId(Me),3,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1))
call TimerStart(Me,.1,true,function m6)
set Me=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function tL takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer Me
local timer Np
if GetIssuedOrderIdBJ()==OrderId("immolation") then
if GetUnitTypeId(Hw)==$48303031 or GetUnitTypeId(Hw)==$48303650 then
call UnitAddAbility(Hw,$4130534F)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4130534F,false)
set Me=20*GetUnitAbilityLevel(Hw,$41313232)+(GetHeroInt(Hw,true)+GetHeroAgi(Hw,true)+GetHeroStr(Hw,true))/20
call ne(Hw,Me)
set Np=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(Np),0,Hw)
call SaveInteger(Nr,GetHandleId(Np),1,Me)
call TimerStart(Np,.5,true,function tK)
set Np=null
endif
endif
set Hw=null
endfunction
function tM takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddAction(He,function tL)
set He=null
endfunction
function tN takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$41305745)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function tO takes nothing returns nothing
local unit Hw=GetEnumUnit()
local timer He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call TimerStart(He,8,false,function tN)
set He=null
call mt(Ps,Hw,Nw)
set Hw=null
endfunction
function tP takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 then
set Ps=Hw
set Nw=R2I(I2R(1200*GetUnitAbilityLevel(Hw,$41304144)+GetHeroInt(Hw,true)*1)*N1[GetPlayerId(GetOwningPlayer(Hw))+1])
call ForGroup(LoadGroupHandle(Nr,GetHandleId(GetExpiredTimer()),1),function tO)
else
call DestroyGroup(LoadGroupHandle(Nr,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function tQ takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit Nx=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local location Hv=GetUnitLoc(Hw)
local location Nl=GetUnitLoc(Nx)
local lightning Nn=LoadLightningHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)>=1 and UnitAlive(Hw) and UnitAlive(Nx) then
call MoveLightning(Nn,true,GetLocationX(Hv),GetLocationY(Hv),GetLocationX(Nl),GetLocationY(Nl))
else
call DestroyLightning(LoadLightningHandle(Nr,GetHandleId(GetExpiredTimer()),2))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
set Hw=null
set Nx=null
endfunction
function tR takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))+1
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+Ng[Mc]*LoadReal(Nr,GetHandleId(GetExpiredTimer()),2))
call nX(Hw,"+"+I2S(R2I(LoadReal(Nr,GetHandleId(GetExpiredTimer()),2))),.023,0,255,0)
else
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function tS takes nothing returns nothing
local unit Hw=GetEnumUnit()
if GetUnitTypeId(Hw)!=$48303031 and GetUnitTypeId(Hw)!=$48303650 then
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)-GetUnitState(Hw,UNIT_STATE_MAX_LIFE)/5)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Red.mdx",Hw,"origin"))
endif
set Hw=null
endfunction
function tT takes nothing returns nothing
local unit Hw=Ps
local unit Nx=GetEnumUnit()
local location Hv=GetUnitLoc(Hw)
local location Nl=GetUnitLoc(Nx)
local lightning Nn=AddLightning("RENL",true,GetLocationX(Hv),GetLocationY(Hv),GetLocationX(Nl),GetLocationY(Nl))
local timer He
call SetLightningColor(Nn,1,0,0,1)
set He=CreateTimer()
call UnitAddAbility(Nx,$41305745)
call SetUnitAbilityLevel(Nx,$41305745,GetUnitAbilityLevel(Hw,$41304144))
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,Nx)
call SaveLightningHandle(Nr,GetHandleId(He),2,Nn)
call SaveInteger(Nr,GetHandleId(He),3,81)
call TimerStart(He,.1,true,function tQ)
set He=null
set Nl=null
set Hv=null
set Nx=null
set Hw=null
endfunction
function tU takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local location Hv=GetUnitLoc(Hw)
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))+1
local group Nb
local boolexpr Nc
local timer He
local integer Me
local real Np
if GetSpellAbilityId()==$41303146 then
set Nb=CreateGroup()
set Nc=Condition(function mo)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),600,Nc)
call ForGroup(Nb,function tS)
set Me=CountUnitsInGroup(Nb)
set Np=GetUnitState(Hw,UNIT_STATE_MAX_LIFE)/20*I2R(Me)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+Np)
call nX(Hw,"+"+I2S(R2I(Np)),.023,0,255,0)
call DestroyGroup(Nb)
call DestroyBoolExpr(Nc)
set Nb=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),600,Nc)
set Ps=Hw
set Nw=R2I(I2R(1500*GetUnitAbilityLevel(Hw,$41303146)+GetHeroInt(Hw,true)*7)*N1[Mc])
call ForGroup(Nb,function m1)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,8)
call SaveReal(Nr,GetHandleId(He),2,I2R(GetHeroStr(Hw,true)+500*GetUnitAbilityLevel(Hw,$41303146)))
call TimerStart(He,1,true,function tR)
set He=null
call DestroyGroup(Nb)
call DestroyBoolExpr(Nc)
elseif GetSpellAbilityId()==$41303857 then
set Nb=CreateGroup()
set Nc=Condition(function mo)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),600,Nc)
call ForGroup(Nb,function tS)
set Me=CountUnitsInGroup(Nb)
set Np=GetUnitState(Hw,UNIT_STATE_MAX_LIFE)/15*I2R(Me)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+Np)
call nX(Hw,"+"+I2S(R2I(Np)),.023,0,255,0)
call DestroyGroup(Nb)
call DestroyBoolExpr(Nc)
set Nb=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),600,Nc)
set Ps=Hw
set Nw=R2I(I2R(12000+GetHeroInt(Hw,true)*10)*N1[Mc])
call ForGroup(Nb,function m1)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,8)
call SaveReal(Nr,GetHandleId(He),2,I2R(GetHeroStr(Hw,true)*2+2500))
call TimerStart(He,1,true,function tR)
set He=null
call DestroyGroup(Nb)
call DestroyBoolExpr(Nc)
elseif GetSpellAbilityId()==$41304144 then
set Nb=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),600,Nc)
set Ps=Hw
call ForGroup(Nb,function tT)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveGroupHandle(Nr,GetHandleId(He),1,Nb)
call SaveInteger(Nr,GetHandleId(He),2,9)
call TimerStart(He,1,true,function tP)
set He=null
elseif GetSpellAbilityId()==$41304C54 then
set Nw=R2I(N1[Mc]*(GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*1.5))
call mt(Hw,GetSpellTargetUnit(),Nw)
endif
set Nb=null
set Hv=null
set Hw=null
endfunction
function tV takes nothing returns nothing
set Wn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wn,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wn,function tU)
endfunction
function tW takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$41305349)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function tX takes nothing returns nothing
local unit NS=GetTriggerUnit()
local unit Hw
local location Hv
local location Nl
local integer UX
local integer UW
local integer Mc=GetPlayerId(GetOwningPlayer(NS))+1
local timer He
local integer Me
local group Np
local boolexpr Nq
if GetSpellAbilityId()==$41303039 then
set Hv=GetUnitLoc(NS)
set Hw=CreateUnitAtLoc(GetOwningPlayer(NS),$65303031,Hv,0)
call m5(Hw,27)
call IssueTargetOrder(Hw,"attack",GetSpellTargetUnit())
if GetUnitAbilityLevel(NS,$4230304F)>=1 then
call UnitAddAbility(Hw,$41303836)
endif
set UX=GetHeroAgi(NS,true)+100*GetUnitAbilityLevel(NS,$41303039)+GetHeroAgi(NS,true)*UO[Mc]/100
call nc(Hw,UX)
set UW=R2I(GetUnitState(NS,UNIT_STATE_LIFE)/2)+R2I(GetUnitState(NS,UNIT_STATE_LIFE)/2)*UO[Mc]/100
call nd(Hw,UW)
call RemoveLocation(Hv)
set Hv=null
set Hw=null
elseif GetSpellAbilityId()==$41304734 then
call UnitDamageTarget(NS,GetSpellTargetUnit(),I2R(GetHeroAgi(NS,true))*(15.*Ne[Mc]),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Hv=GetUnitLoc(NS)
set Hw=CreateUnitAtLoc(GetOwningPlayer(NS),$65303031,Hv,0)
call m5(Hw,27)
call IssueTargetOrder(Hw,"attack",GetSpellTargetUnit())
if GetUnitAbilityLevel(NS,$4230304F)>=1 then
call UnitAddAbility(Hw,$41303836)
endif
set UX=GetHeroAgi(NS,true)+2000+(GetHeroAgi(NS,true)+2000)*UO[Mc]/100
call nc(Hw,UX)
set UW=R2I(GetUnitState(NS,UNIT_STATE_LIFE)/2)+R2I(GetUnitState(NS,UNIT_STATE_LIFE)/2)*UO[Mc]/100
call nd(Hw,UW)
call RemoveLocation(Hv)
set Hv=null
set Hw=null
elseif GetSpellAbilityId()==$41305A54 then
call UnitDamageTarget(NS,GetSpellTargetUnit(),I2R(GetHeroAgi(NS,true)*3*GetUnitAbilityLevel(NS,$41305A54))*Ne[Mc],true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Hv=GetUnitLoc(GetSpellTargetUnit())
set Me=0
loop
set Nl=nN(Hv,600,Me*90)
set Hw=CreateUnitAtLoc(GetOwningPlayer(NS),$65303035,Nl,0)
set UX=GetHeroAgi(NS,true)/2+GetHeroAgi(NS,true)/2*UO[Mc]/100
call nc(Hw,UX)
call m5(Hw,15)
call IssueTargetOrder(Hw,"attack",GetSpellTargetUnit())
call RemoveLocation(Nl)
set Nl=null
set Hw=null
set Me=Me+1
exitwhen Me>=4
endloop
call RemoveLocation(Hv)
set Hv=null
elseif GetSpellAbilityId()==$41305233 or GetSpellAbilityId()==$41303041 then
call UnitAddAbility(NS,$41305349)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,NS)
call TimerStart(He,10,false,function tW)
set He=null
elseif GetSpellAbilityId()==$41304741 then
set Hv=GetSpellTargetLoc()
set Ps=NS
set Nw=R2I(I2R(300*GetUnitAbilityLevel(NS,$41304741)+GetHeroAgi(NS,true)*7)*Ne[Mc])
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Hv),GetLocationY(Hv),400,Nq)
call ForGroup(Np,function m2)
call DestroyBoolExpr(Nq)
call DestroyGroup(Np)
call RemoveLocation(Hv)
set Hv=null
set Nq=null
set Np=null
endif
set NS=null
endfunction
function tY takes nothing returns nothing
set Wo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wo,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wo,function tX)
endfunction
function tZ takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local location Me
local group Np
local boolexpr Nq
local real Ns
local real Nt
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)+1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)==10 then
set Me=GetUnitLoc(Hw)
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),800,Nq)
set Ps=Hw
if GetUnitAbilityLevel(Hw,$41304753)>=1 then
set Ns=I2R((2000+GetHeroStr(Hw,true)*2)*GetUnitAbilityLevel(Hw,$41304753))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ns)
else
set Ns=I2R(12000+GetHeroStr(Hw,true)*12)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ns)
endif
call ForGroup(Np,function m2)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
call RemoveLocation(Me)
set Np=null
set Nq=null
set Me=null
elseif LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)==12 then
set Me=GetUnitLoc(Hw)
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),500,Nq)
set Ps=Hw
if GetUnitAbilityLevel(Hw,$41304753)>=1 then
set Ns=I2R(R2I(GetUnitState(Hw,UNIT_STATE_MAX_LIFE)/4)*GetUnitAbilityLevel(Hw,$41304753))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ns)
else
set Ns=I2R(R2I(GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*1.5))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ns)
endif
call ForGroup(Np,function m2)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
call RemoveLocation(Me)
set Np=null
set Nq=null
set Me=null
elseif LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)==14 then
set Me=GetUnitLoc(Hw)
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),200,Nq)
set Ps=Hw
if GetUnitAbilityLevel(Hw,$41304753)>=1 then
set Nt=I2R((2000+GetHeroStr(Hw,true)*2)*GetUnitAbilityLevel(Hw,$41304753))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Ns=I2R(R2I(GetUnitState(Hw,UNIT_STATE_MAX_LIFE)/4)*GetUnitAbilityLevel(Hw,$41304753))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ns+Nt)
else
set Nt=I2R(12000+GetHeroStr(Hw,true)*12)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Ns=I2R(R2I(GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*1.5))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ns+Nt)
endif
call ForGroup(Np,function m2)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
call RemoveLocation(Me)
set Np=null
set Nq=null
set Me=null
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function ta takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local timer He
local string M7=""
local effect Vp
local unit NR
local real Hd
local location Hv
if GetSpellAbilityId()==$41304753 or GetSpellAbilityId()==$41304754 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set M7="war3mapImported\\IonCannon.mdx"
endif
set Vp=AddSpecialEffectTarget(M7,Hw,"origin")
call SaveEffectHandle(Nr,GetHandleId(He),1,Vp)
call SaveInteger(Nr,GetHandleId(He),2,0)
call TimerStart(He,.5,true,function tZ)
set He=null
set Vp=null
elseif GetSpellAbilityId()==$4130304A or GetSpellAbilityId()==$41304537 then
if GetSpellAbilityId()==$4130304A then
set Hd=I2R((400+GetHeroStr(Hw,true)*2)*GetUnitAbilityLevel(Hw,$4130304A))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
else
set Hd=I2R(6000+GetHeroStr(Hw,true)*15)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
endif
set Nw=R2I(Hd)
call mu(Hw,GetSpellTargetUnit(),Nw)
if GetSpellAbilityId()==$4130304A then
set Hd=I2R((150+GetHeroStr(Hw,true))*GetUnitAbilityLevel(Hw,$4130304A))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
else
set Hd=I2R(2500+GetHeroStr(Hw,true)*7)*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
endif
set Nw=R2I(Hd)
call mv(Hw,Nw)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIso\\AIsoTarget.mdl",GetSpellTargetUnit(),"origin"))
set Hv=GetUnitLoc(GetTriggerUnit())
set NR=CreateUnitAtLoc(Player(0),$68303739,Hv,0)
call UnitAddAbility(NR,$53303053)
call IssueTargetOrder(NR,"cripple",GetSpellTargetUnit())
call m5(NR,1)
call RemoveLocation(Hv)
set Hv=null
endif
set NR=null
set Hw=null
endfunction
function tb takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function ta)
set He=null
endfunction
function tc takes nothing returns boolean
if not (GetUnitAbilityLevelSwapped($4130304F,GetAttacker())>=1) then
return false
endif
if not (IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==true) then
return false
endif
return true
endfunction
function td takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
if GetUnitAbilityLevel(Hw,$41305241)==1 then
call UnitRemoveAbility(Hw,$41305241)
else
call SetUnitAbilityLevel(Hw,$41305241,GetUnitAbilityLevel(Hw,$41305241)-1)
endif
set Hw=null
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
endfunction
function te takes nothing returns nothing
local unit Hw=GetAttacker()
local unit Nx=GetTriggerUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))+1
local timer He
local integer MC
local location Me
local location Np
local unit Nq
if GetRandomInt(1,6)==1 and Sy[Mc]==true then
set Sy[Mc]=false
set Me=GetUnitLoc(Hw)
set Np=GetUnitLoc(Nx)
set Nq=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303355,Me,0)
call m5(Nq,1)
call IssuePointOrderLoc(Nq,"carrionswarm",Np)
call IssuePointOrderLoc(Nq,"shockwave",Np)
call RemoveLocation(Me)
call RemoveLocation(Np)
set Nq=null
if GetUnitAbilityLevel(Hw,$41303036)>=1 then
if GetUnitAbilityLevel(Hw,$41305241)<5 then
if GetUnitAbilityLevel(Hw,$41305241)<1 then
call UnitAddAbility(Hw,$41305241)
else
call SetUnitAbilityLevel(Hw,$41305241,GetUnitAbilityLevel(Hw,$41305241)+1)
endif
set MC=50*GetUnitAbilityLevel(Hw,$41303036)+GetHeroStr(Hw,true)/5
call nc(Hw,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\Haste.mdx",Hw,"chest"))
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,7,true,function m6)
set He=null
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call TimerStart(He,7,true,function td)
set He=null
endif
elseif GetUnitAbilityLevel(Hw,$41304535)>=1 then
if GetUnitAbilityLevel(Hw,$41305241)<5 then
if GetUnitAbilityLevel(Hw,$41305241)<1 then
call UnitAddAbility(Hw,$41305241)
else
call SetUnitAbilityLevel(Hw,$41305241,GetUnitAbilityLevel(Hw,$41305241)+1)
endif
set MC=900+GetHeroStr(Hw,true)/4
call nc(Hw,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\Haste.mdx",Hw,"chest"))
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,7,true,function m6)
set He=null
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call TimerStart(He,7,true,function td)
set He=null
endif
endif
call TriggerSleepAction(.5)
set Sy[Mc]=true
endif
set Hw=null
set Nx=null
set Np=null
set Me=null
endfunction
function tf takes nothing returns nothing
set Wp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wp,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(Wp,Condition(function tc))
call TriggerAddAction(Wp,function te)
endfunction
function tg takes nothing returns nothing
local unit UV=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),7))
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),8))
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),8)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set UV=null
endfunction
function th takes nothing returns nothing
call SetHeroAgi(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0),GetHeroAgi(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0),false)-LoadInteger(PR,GetHandleId(GetExpiredTimer()),2),false)
call SetHeroInt(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0),GetHeroInt(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0),false)-LoadInteger(PR,GetHandleId(GetExpiredTimer()),3),false)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function ti takes nothing returns nothing
local unit UV=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local timer He
local integer MC
local integer Pf
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),6,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),6)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),6)>=1 then
set MC=GetHeroAgi(UV,true)/2+700
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,10,false,function m6)
set He=null
set He=CreateTimer()
set MC=GetHeroAgi(UV,true)/20+120
call SetHeroAgi(UV,GetHeroAgi(UV,false)+MC,false)
set Pf=GetHeroInt(UV,true)/20+120
call SetHeroInt(UV,GetHeroInt(UV,false)+Pf,false)
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveInteger(PR,GetHandleId(He),3,Pf)
call TimerStart(He,10,false,function th)
set He=null
else
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),6)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set UV=null
endfunction
function tj takes nothing returns nothing
local unit UV=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local timer He
local integer MC
local integer Pf
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),6,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),6)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),6)>=1 then
set MC=(GetHeroAgi(UV,true)/10+100)*GetUnitAbilityLevel(UV,$41303451)
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,10,false,function m6)
set He=null
set He=CreateTimer()
set MC=GetHeroAgi(UV,true)/25+20*GetUnitAbilityLevel(UV,$41303451)
call SetHeroAgi(UV,GetHeroAgi(UV,false)+MC,false)
set Pf=GetHeroInt(UV,true)/25+20*GetUnitAbilityLevel(UV,$41303451)
call SetHeroInt(UV,GetHeroInt(UV,false)+Pf,false)
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveInteger(PR,GetHandleId(He),3,Pf)
call TimerStart(He,10,false,function th)
set He=null
else
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),6)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set UV=null
endfunction
function tk takes nothing returns nothing
call SetHeroStr(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0),GetHeroStr(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0),false)-LoadInteger(PR,GetHandleId(GetExpiredTimer()),2),false)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function tl takes nothing returns nothing
call SetHeroAgi(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0),GetHeroAgi(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0),false)-LoadInteger(PR,GetHandleId(GetExpiredTimer()),2),false)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function tm takes nothing returns nothing
local unit UV=GetTriggerUnit()
local integer MC
local integer Pf
local timer He
local effect Me
local effect Np
local unit Nq
if GetSpellAbilityId()==$41303456 then
set MC=(GetHeroStr(UV,true)/10+100)*GetUnitAbilityLevel(UV,$41303456)
call nc(UV,MC)
set Pf=GetHeroStr(UV,true)/10+10*GetUnitAbilityLevel(UV,$41303456)
call ne(UV,Pf)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveInteger(PR,GetHandleId(He),3,Pf)
call TimerStart(He,15,true,function m6)
set He=null
set He=CreateTimer()
set MC=GetHeroStr(UV,true)/5
call SetHeroStr(UV,GetHeroStr(UV,false)+MC,false)
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,15,false,function tk)
set He=null
elseif GetSpellAbilityId()==$41314152 then
set MC=GetHeroStr(UV,true)/2+GetUnitAbilityLevel(UV,$41314152)*150
call nc(UV,MC)
set Pf=GetHeroStr(UV,true)/10+GetUnitAbilityLevel(UV,$41314152)*50
call ne(UV,Pf)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call SaveInteger(PR,GetHandleId(He),3,Pf)
call TimerStart(He,10,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41313942 then
set MC=GetHeroAgi(UV,true)/2+GetUnitAbilityLevel(UV,$41313942)*50
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,10,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41303855 then
set MC=GetHeroStr(UV,true)/1+GetUnitAbilityLevel(UV,$41303855)*150
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,7,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41305544 then
set UV=GetTriggerUnit()
set MC=GetHeroStr(UV,true)/1+GetUnitAbilityLevel(UV,$41305544)*3000
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,7,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41304142 then
set UV=GetTriggerUnit()
set MC=GetHeroStr(UV,true)/1+GetUnitAbilityLevel(UV,$41304142)*100
call UnitRemoveAbility(UV,$4131424F)
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,10,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41304E56 then
set UV=GetTriggerUnit()
set MC=GetHeroAgi(UV,true)/2+GetUnitAbilityLevel(UV,$41304E56)*50
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
if GetUnitTypeId(UV)==$55303133 then
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\Burning Rage Red.mdx",UV,"overhead"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Void.mdx",UV,"origin"))
endif
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,7,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41304E57 then
set MC=GetHeroAgi(UV,true)/1+GetUnitAbilityLevel(UV,$41304E57)*1000
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
if GetUnitTypeId(UV)==$55303133 then
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\Burning Rage Red.mdx",UV,"overhead"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Void.mdx",UV,"origin"))
endif
call TimerStart(He,7,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41313244 and GetUnitTypeId(UV)==$55303133 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Void.mdx",UV,"origin"))
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\Aura Astral.mdx",UV,"origin"))
call TimerStart(He,8,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41304258 then
set MC=GetHeroAgi(UV,true)+250*GetUnitAbilityLevel(UV,$41304258)
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,17,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41305354 then
set MC=GetHeroAgi(UV,true)*2
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,17,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41305951 then
set MC=(GetHeroAgi(UV,true)/3+300)*GetUnitAbilityLevel(UV,$41305951)
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,12,false,function m6)
set He=null
set He=CreateTimer()
set MC=GetHeroAgi(UV,true)/4+50*GetUnitAbilityLevel(UV,$41305951)
call SetHeroAgi(UV,GetHeroAgi(UV,false)+MC,false)
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,12,false,function tl)
set He=null
elseif GetSpellAbilityId()==$41303451 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,UV)
call SaveInteger(Nr,GetHandleId(He),6,6)
call TimerStart(He,1,true,function tj)
set He=null
if GetUnitTypeId(UV)==$48303749 then
set Me=AddSpecialEffectTarget("war3mapImported\\SoulAegis2.mdx",UV,"chest")
set Np=AddSpecialEffectTarget("war3mapImported\\Holy [Aura].mdx",UV,"chest")
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,UV)
call SaveEffectHandle(Nr,GetHandleId(He),7,Me)
call SaveEffectHandle(Nr,GetHandleId(He),8,Np)
call TimerStart(He,15,false,function tg)
set He=null
set Me=null
set Np=null
endif
elseif GetSpellAbilityId()==$41305250 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,UV)
call SaveInteger(Nr,GetHandleId(He),6,6)
call TimerStart(He,1,true,function ti)
set He=null
if GetUnitTypeId(UV)==$48303749 then
set Me=AddSpecialEffectTarget("war3mapImported\\SoulAegis2.mdx",UV,"chest")
set Np=AddSpecialEffectTarget("war3mapImported\\Holy [Aura].mdx",UV,"origin")
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,UV)
call SaveEffectHandle(Nr,GetHandleId(He),7,Me)
call SaveEffectHandle(Nr,GetHandleId(He),8,Np)
call TimerStart(He,15,false,function tg)
set He=null
set Me=null
set Np=null
endif
elseif GetSpellAbilityId()==$41304C57 then
if GetUnitAbilityLevel(UV,$41303853)>=1 then
set MC=GetHeroAgi(UV,true)+1000
else
set MC=GetHeroAgi(UV,true)/2+GetUnitAbilityLevel(UV,$41304C57)*100
endif
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\Solarverse(death).mdx",UV,"overhead"))
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,7,false,function m6)
set He=null
elseif GetSpellAbilityId()==$4130595A or GetSpellAbilityId()==$41305941 then
set Pf=GetHeroAgi(UV,true)/20
set Nq=GetSpellTargetUnit()
call ne(Nq,Pf)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Nq)
call SaveInteger(PR,GetHandleId(He),3,Pf)
call TimerStart(He,10,false,function m6)
set He=null
set Nq=null
elseif GetSpellAbilityId()==$41313239 then
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\DarknessRising.mdx",UV,"origin"))
call TimerStart(He,25,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41304452 then
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveEffectHandle(PR,GetHandleId(He),1,AddSpecialEffectTarget("war3mapImported\\RedHarvest.mdx",UV,"origin"))
call TimerStart(He,7,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41305734 then
set MC=GetHeroInt(UV,true)/5+GetUnitAbilityLevel(UV,$41305734)*50+R2I(GetUnitState(UV,UNIT_STATE_MANA))/10
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,7,false,function m6)
set He=null
elseif GetSpellAbilityId()==$41305746 then
set MC=GetHeroInt(UV,true)/2+500+R2I(GetUnitState(UV,UNIT_STATE_MANA))/10
call nc(UV,MC)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,UV)
call SaveInteger(PR,GetHandleId(He),2,MC)
call TimerStart(He,7,false,function m6)
set He=null
endif
set He=null
set UV=null
endfunction
function tn takes nothing returns nothing
local trigger Wq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wq,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wq,function tm)
set Wq=null
endfunction
function to takes unit Hw returns nothing
call TriggerSleepAction(.5)
call PauseUnit(Hw,false)
call SetUnitInvulnerable(Hw,false)
endfunction
function tp takes nothing returns nothing
local unit Hw=GetAttacker()
local effect Me
local integer Np
local timer Nq
if IsUnitEnemy(Hw,GetOwningPlayer(GetTriggerUnit()))==true then
if GetUnitAbilityLevel(Hw,$41304459)>=1 then
if GetRandomInt(1,10)==1 then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(Hw,true)
call SetUnitInvulnerable(Hw,true)
call SetUnitAnimationWithRarity(Hw,"Attack Walk Stand Spin",RARITY_FREQUENT)
call to(Hw)
set Me=AddSpecialEffectTarget("war3mapImported\\Dalaran BrillianceSmall.mdx",Hw,"overhead")
set Np=GetHeroAgi(Hw,true)+GetUnitAbilityLevel(Hw,$41304459)*200
call nc(Hw,Np)
set Nq=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Nq),0,Hw)
call SaveEffectHandle(PR,GetHandleId(Nq),1,Me)
call SaveInteger(PR,GetHandleId(Nq),2,Np)
call TimerStart(Nq,7,false,function m6)
set Nq=null
set Me=null
call TriggerSleepAction(15)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
if GetUnitAbilityLevel(Hw,$41304559)>=1 then
if GetRandomInt(1,10)==1 then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(Hw,true)
call SetUnitInvulnerable(Hw,true)
call SetUnitAnimationWithRarity(Hw,"Attack Walk Stand Spin",RARITY_FREQUENT)
call to(Hw)
set Me=AddSpecialEffectTarget("war3mapImported\\Dalaran BrillianceSmall.mdx",Hw,"overhead")
set Np=GetHeroAgi(Hw,true)*2+2000
call nc(Hw,Np)
set Nq=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Nq),0,Hw)
call SaveEffectHandle(PR,GetHandleId(Nq),1,Me)
call SaveInteger(PR,GetHandleId(Nq),2,Np)
call TimerStart(Nq,7,false,function m6)
set Nq=null
set Me=null
call TriggerSleepAction(15)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
endif
set Hw=null
endfunction
function tq takes nothing returns nothing
set Wr=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wr,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(Wr,function tp)
endfunction
function tr takes nothing returns boolean
if not (GetSpellAbilityId()==$4130344F) then
return false
endif
return true
endfunction
function ts takes nothing returns boolean
if not (GetUnitTypeId(Wu)==$4F303030) then
return false
endif
return true
endfunction
function tt takes nothing returns boolean
if not (GetUnitTypeId(Wu)==$4F303030) then
return false
endif
return true
endfunction
function tu takes nothing returns boolean
if not (GetUnitTypeId(Wu)==$4F303030) then
return false
endif
return true
endfunction
function tv takes nothing returns boolean
if not (GetUnitTypeId(Wu)==$4F303030) then
return false
endif
return true
endfunction
function tw takes nothing returns boolean
if not (IsUnitDeadBJ(Wt)==false) then
return false
endif
return true
endfunction
function tx takes nothing returns boolean
if not (IsUnitDeadBJ(Wt)==false) then
return false
endif
return true
endfunction
function ty takes nothing returns boolean
if not (IsUnitDeadBJ(Wt)==false) then
return false
endif
return true
endfunction
function tz takes nothing returns boolean
if not (IsUnitDeadBJ(Wt)==false) then
return false
endif
return true
endfunction
function t0 takes nothing returns nothing
set Wt=GetSpellTargetUnit()
set Wu=GetSpellAbilityUnit()
if tz() then
call PauseUnitBJ(true,Wu)
call PauseUnitBJ(true,Wt)
call SetUnitAnimationWithRarity(Wu,"attack",RARITY_FREQUENT)
call TriggerSleepAction(.1)
if ts() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Nature.mdx",Wt,"origin"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Red.mdx",Wt,"origin"))
endif
call UnitDamageTargetBJ(Wu,Wt,(I2R(GetHeroAgi(Wu,true))*(I2R(GetUnitAbilityLevel(Wu,$4130344F))*.5)+500.*I2R(GetUnitAbilityLevel(Wu,$4130344F)))*Ne[GetConvertedPlayerId(GetOwningPlayer(Wu))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
if ty() then
call SetUnitAnimationWithRarity(Wu,"attack",RARITY_FREQUENT)
call TriggerSleepAction(.1)
if tt() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Nature.mdx",Wt,"origin"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Red.mdx",Wt,"origin"))
endif
call UnitDamageTargetBJ(Wu,Wt,(I2R(GetHeroAgi(Wu,true))*(I2R(GetUnitAbilityLevel(Wu,$4130344F))*1.)+1000.*I2R(GetUnitAbilityLevel(Wu,$4130344F)))*Ne[GetConvertedPlayerId(GetOwningPlayer(Wu))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
if tx() then
call SetUnitAnimationWithRarity(Wu,"attack",RARITY_FREQUENT)
call TriggerSleepAction(.1)
if tu() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Nature.mdx",Wt,"origin"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Red.mdx",Wt,"origin"))
endif
call UnitDamageTargetBJ(Wu,Wt,(I2R(GetHeroAgi(Wu,true))*(I2R(GetUnitAbilityLevel(Wu,$4130344F))*2.)+2000.*I2R(GetUnitAbilityLevel(Wu,$4130344F)))*Ne[GetConvertedPlayerId(GetOwningPlayer(Wu))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
if tw() then
set Wv=GetUnitLoc(Wu)
set Ww=PolarProjectionBJ(Wv,150.,GetUnitFacing(Wu))
call SetUnitAnimationWithRarity(Wu,"attack slam",RARITY_RARE)
call TriggerSleepAction(.1)
call PauseUnitBJ(false,Wu)
call PauseUnitBJ(false,Wt)
if tv() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Nature.mdx",Wt,"origin"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Red.mdx",Wt,"origin"))
endif
call UnitDamageTargetBJ(Wu,Wt,(I2R(GetHeroAgi(Wu,true))*(I2R(GetUnitAbilityLevel(Wu,$4130344F))*4.)+4000.*I2R(GetUnitAbilityLevel(Wu,$4130344F)))*Ne[GetConvertedPlayerId(GetOwningPlayer(Wu))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call SetUnitPositionLoc(Wu,Ww)
call TriggerSleepAction(1.5)
else
call PauseUnitBJ(false,Wu)
call PauseUnitBJ(false,Wt)
endif
else
call PauseUnitBJ(false,Wu)
call PauseUnitBJ(false,Wt)
endif
else
call PauseUnitBJ(false,Wu)
call PauseUnitBJ(false,Wt)
endif
else
call PauseUnitBJ(false,Wu)
call PauseUnitBJ(false,Wt)
endif
endfunction
function t1 takes nothing returns nothing
set Ws=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Ws,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Ws,Condition(function tr))
call TriggerAddAction(Ws,function t0)
endfunction
function t2 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2)
local location Me
local group Np
local boolexpr Nq
local integer Ns
local unit Nt
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)>=1 then
set Me=GetUnitLoc(NR)
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),400,Nq)
if GetUnitAbilityLevel(Hw,$41303943)>=1 then
set Nw=R2I(I2R(1200+GetHeroAgi(Hw,true)*4)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1])
else
set Nw=R2I(I2R(100*GetUnitAbilityLevel(Hw,$41303457)+GetHeroAgi(Hw,true)*2)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1])
endif
set Ps=Hw
call ForGroup(Np,function m2)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
set Np=null
set Nq=null
call RemoveLocation(Me)
set Me=null
set Ns=0
loop
set Nt=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),4+Ns)
call SetUnitAnimationWithRarity(Nt,"attack",RARITY_FREQUENT)
set Nt=null
set Ns=Ns+1
exitwhen Ns==10
endloop
else
call SetUnitInvulnerable(Hw,false)
call PauseUnit(Hw,false)
call ShowUnit(Hw,true)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call SelectUnit(Hw,true)
endif
call RemoveUnit(NR)
set Ns=0
loop
set Nt=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),4+Ns)
call KillUnit(Nt)
set Nt=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),4+Ns)
set Ns=Ns+1
exitwhen Ns==10
endloop
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
endfunction
function t3 takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local location Hv
local location Nl
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local unit NR
local timer He
local group Nb
local boolexpr Nc
local integer Me
if GetSpellAbilityId()==$41303457 or GetSpellAbilityId()==$41303943 then
set Nl=GetSpellTargetLoc()
set NR=CreateUnitAtLoc(Player(Mc),$68303739,Nl,0)
call AddSpecialEffectTarget("war3mapImported\\EtherealAura.mdl",NR,"origin")
call SetUnitScale(NR,1.3,1.3,1.3)
call SetUnitVertexColor(NR,0,255,0,50)
call SetUnitInvulnerable(Hw,true)
call PauseUnit(Hw,true)
call ShowUnit(Hw,false)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),2,NR)
call SaveInteger(Nr,GetHandleId(He),3,6)
set Me=0
loop
set Hv=nN(Nl,400,Me*36)
set NR=CreateUnitAtLoc(Player(Mc),$6830324C,Hv,180+Me*36)
call SetUnitTimeScale(NR,200*.01)
call RemoveLocation(Hv)
set Hv=null
call SaveUnitHandle(Nr,GetHandleId(He),4+Me,NR)
set Me=Me+1
exitwhen Me==10
endloop
call TimerStart(He,.3,true,function t2)
set He=null
call RemoveLocation(Nl)
elseif GetSpellAbilityId()==$41303049 then
if GetUnitAbilityLevel(GetSpellTargetUnit(),$42303946)>=1 then
set Nw=R2I(I2R(300*GetUnitAbilityLevel(Hw,$41303049)+GetHeroAgi(Hw,true)*21)*Ne[Mc+1])
else
set Nw=R2I(I2R(100*GetUnitAbilityLevel(Hw,$41303049)+GetHeroAgi(Hw,true)*7)*Ne[Mc+1])
endif
call UnitDamageTarget(Hw,GetSpellTargetUnit(),I2R(Nw),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$41303053 then
set Hv=GetUnitLoc(Hw)
set Nb=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),700,Nc)
set Nw=R2I(I2R(2000*GetUnitAbilityLevel(Hw,$41303053)+GetHeroAgi(Hw,true)*10)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1])
set Ps=Hw
call ForGroup(Nb,function m2)
call DestroyGroup(Nb)
call DestroyBoolExpr(Nc)
set Nb=null
set Nc=null
call RemoveLocation(Hv)
set Hv=null
elseif GetSpellAbilityId()==$4130455A then
set Hv=GetUnitLoc(Hw)
set Nb=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),700,Nc)
set Nw=R2I(I2R(20000+GetHeroAgi(Hw,true)*15)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1])
set Ps=Hw
call ForGroup(Nb,function m2)
call DestroyGroup(Nb)
call DestroyBoolExpr(Nc)
set Nb=null
set Nc=null
call RemoveLocation(Hv)
set Hv=null
endif
set Hw=null
set NR=null
set Hv=null
set Nl=null
endfunction
function t4 takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function t3)
set He=null
endfunction
function t5 takes unit Hw returns boolean
if nH(Hw,$49304E30) or nH(Hw,$49305748) then
if GetRandomInt(1,10)==1 then
return true
endif
endif
return false
endfunction
function t6 takes unit Hw returns boolean
if nH(Hw,$49304B31) or nH(Hw,$49304E30) or nH(Hw,$49305748) then
if GetRandomInt(1,10)==1 then
return true
endif
endif
return false
endfunction
function t7 takes unit Hw returns boolean
if nH(Hw,$7370726F) or nH(Hw,$49303952) or nH(Hw,$4930394A) or nH(Hw,$49304B31) or nH(Hw,$49304E30) or nH(Hw,$49305748) then
if GetRandomInt(1,5)==1 then
return true
endif
endif
return false
endfunction
function t8 takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx
local unit NR
local location Hv
local location Nl
local string M7
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local real Hd
local group Nb
local boolexpr Vz
local integer MC
local boolean Me
if GetSpellAbilityId()==$41313751 then
set Hv=GetSpellTargetLoc()
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Singularity I Purple.mdx",Hv))
set Hd=I2R(GetUnitAbilityLevel(Hw,$41313751)*300+GetHeroInt(Hw,true)*3)*N1[Mc+1]
if t5(Hw) then
set Hd=Hd*3
call nZ(Hw,Hw,"Crit x3! ",.028,255,0,255,0)
elseif t6(Hw) then
set Hd=Hd*2
call nZ(Hw,Hw,"Crit x2! ",.028,255,0,0,0)
elseif t7(Hw) then
set Hd=Hd*3/2
call nZ(Hw,Hw,"Crit x1.5! ",.028,255,255,0,0)
endif
set Nb=CreateGroup()
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),300,Vz)
set Ps=Hw
set Nw=R2I(Hd)
call ForGroup(Nb,function m3)
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
set Nb=null
set Vz=null
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303136,Hv,0)
call UnitAddAbility(NR,$41303452)
call SetUnitAbilityLevel(NR,$41303452,GetUnitAbilityLevel(Hw,$41313751))
call PauseUnit(NR,true)
set M7=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set M7="war3mapImported\\Providence Aura Purple.mdl"
endif
call AddSpecialEffectTarget(M7,NR,"origin")
call m5(NR,4)
call RemoveLocation(Hv)
set Hv=null
elseif GetSpellAbilityId()==$41314237 then
set Hv=GetSpellTargetLoc()
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303136,Hv,0)
call UnitAddAbility(NR,$41305139)
set M7=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set M7="war3mapImported\\Void Rift II Purple.mdx"
endif
call AddSpecialEffectTarget(M7,NR,"origin")
call m5(NR,10)
call RemoveLocation(Hv)
set Hv=null
elseif GetSpellAbilityId()==$41305432 then
set Hd=I2R(GetUnitAbilityLevel(Hw,$41305432)*(GetHeroInt(Hw,true)+150))*N1[Mc+1]
if t5(Hw) then
set Hd=Hd*3
call nZ(Hw,Hw,"Crit x3! ",.028,255,0,255,0)
elseif t6(Hw) then
set Hd=Hd*2
call nZ(Hw,Hw,"Crit x2! ",.028,255,0,0,0)
elseif t7(Hw) then
set Hd=Hd*3/2
call nZ(Hw,Hw,"Crit x1.5! ",.028,255,255,0,0)
endif
call ms(Hw,GetSpellTargetUnit(),R2I(Hd))
elseif GetSpellAbilityId()==$4130344E then
set Hv=GetUnitLoc(Hw)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\BonediggerHaloBlue.mdx",Hv))
set Hd=I2R(GetUnitAbilityLevel(Hw,$4130344E)*(GetHeroInt(Hw,true)*2+1500))*N1[Mc+1]
if t5(Hw) then
set Hd=Hd*3
call nZ(Hw,Hw,"Crit x3! ",.028,255,0,255,0)
elseif t6(Hw) then
set Hd=Hd*2
call nZ(Hw,Hw,"Crit x2! ",.028,255,0,0,0)
elseif t7(Hw) then
set Hd=Hd*3/2
call nZ(Hw,Hw,"Crit x1.5! ",.028,255,255,0,0)
endif
set Nb=CreateGroup()
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),800,Vz)
set Ps=Hw
set Nw=R2I(Hd)
call ForGroup(Nb,function m3)
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
set Nb=null
set Vz=null
call RemoveLocation(Hv)
set Hv=null
elseif GetSpellAbilityId()==$41304658 then
set Hv=GetUnitLoc(Hw)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\BonediggerHaloBlue.mdx",Hv))
set Hd=I2R(GetHeroInt(Hw,true)*9+7500)*N1[Mc+1]
if t5(Hw) then
set Hd=Hd*3
call nZ(Hw,Hw,"Crit x3! ",.028,255,0,255,0)
elseif t6(Hw) then
set Hd=Hd*2
call nZ(Hw,Hw,"Crit x2! ",.028,255,0,0,0)
elseif t7(Hw) then
set Hd=Hd*3/2
call nZ(Hw,Hw,"Crit x1.5! ",.028,255,255,0,0)
endif
set Nb=CreateGroup()
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),800,Vz)
set Ps=Hw
set Nw=R2I(Hd)
call ForGroup(Nb,function m3)
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
set Nb=null
set Vz=null
call RemoveLocation(Hv)
set Hv=null
elseif GetSpellAbilityId()==$4131324F then
set Hv=GetUnitLoc(Hw)
set Nb=CreateGroup()
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),700,Vz)
set MC=CountUnitsInGroup(Nb)
set Hd=I2R((GetHeroInt(Hw,true)+500)*GetUnitAbilityLevel(Hw,$4131324F))*N1[Mc+1]
if t5(Hw) then
set Hd=Hd*3
call nZ(Hw,Hw,"Crit x3! ",.028,255,0,255,0)
elseif t6(Hw) then
set Hd=Hd*2
call nZ(Hw,Hw,"Crit x2! ",.028,255,0,0,0)
elseif t7(Hw) then
set Hd=Hd*3/2
call nZ(Hw,Hw,"Crit x1.5! ",.028,255,255,0,0)
endif
set Ps=Hw
set Nw=R2I(Hd)
call ForGroup(Nb,function m3)
set Me=false
loop
exitwhen not not Me
set Nx=FirstOfGroup(Nb)
if Nx==null then
set Me=true
else
set Nl=GetUnitLoc(Nx)
set NR=CreateUnitAtLoc(Player(Mc),$68303739,Hv,0)
call UnitAddAbility(NR,$4131324D)
call IssueTargetOrder(NR,"magicleash",Nx)
call m5(NR,2)
set NR=null
call RemoveLocation(Nl)
set Nl=null
call GroupRemoveUnit(Nb,Nx)
endif
endloop
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
set Nb=null
set Vz=null
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),700,Vz)
set Me=false
loop
exitwhen not not Me
set Nx=FirstOfGroup(Nb)
if Nx==null then
set Me=true
else
call mv(Nx,MC*R2I(GetUnitState(Nx,UNIT_STATE_MAX_LIFE)*.05))
call GroupRemoveUnit(Nb,Nx)
endif
endloop
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
set Nb=null
set Vz=null
call RemoveLocation(Hv)
set Hv=null
elseif GetSpellAbilityId()==$41313250 then
set Hv=GetUnitLoc(Hw)
set Nb=CreateGroup()
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),700,Vz)
set MC=CountUnitsInGroup(Nb)
set Hd=I2R(GetHeroInt(Hw,true)*10+5000)*N1[Mc+1]
if t5(Hw) then
set Hd=Hd*3
call nZ(Hw,Hw,"Crit x3! ",.028,255,0,255,0)
elseif t6(Hw) then
set Hd=Hd*2
call nZ(Hw,Hw,"Crit x2! ",.028,255,0,0,0)
elseif t7(Hw) then
set Hd=Hd*3/2
call nZ(Hw,Hw,"Crit x1.5! ",.028,255,255,0,0)
endif
set Ps=Hw
set Nw=R2I(Hd)
call ForGroup(Nb,function m3)
set Me=false
loop
exitwhen not not Me
set Nx=FirstOfGroup(Nb)
if Nx==null then
set Me=true
else
set Nl=GetUnitLoc(Nx)
set NR=CreateUnitAtLoc(Player(Mc),$68303739,Hv,0)
call UnitAddAbility(NR,$4131324D)
call IssueTargetOrder(NR,"magicleash",Nx)
call m5(NR,2)
set NR=null
call RemoveLocation(Nl)
set Nl=null
call GroupRemoveUnit(Nb,Nx)
endif
endloop
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
set Nb=null
set Vz=null
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),700,Vz)
set Me=false
loop
exitwhen not not Me
set Nx=FirstOfGroup(Nb)
if Nx==null then
set Me=true
else
call mv(Nx,MC*R2I(GetUnitState(Nx,UNIT_STATE_MAX_LIFE)*.05))
call GroupRemoveUnit(Nb,Nx)
endif
endloop
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
set Nb=null
set Vz=null
call RemoveLocation(Hv)
set Hv=null
endif
set Hw=null
set NR=null
set Nx=null
endfunction
function t9 takes nothing returns nothing
set Wx=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wx,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wx,function t8)
endfunction
function uB takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930394A)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49303952)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$7370726F)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304B31)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function uC takes nothing returns boolean
if not uB() then
return false
endif
return true
endfunction
function uD takes nothing returns boolean
if not (GetRandomInt(1,5)==1) then
return false
endif
return true
endfunction
function uE takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304B31)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function uF takes nothing returns boolean
if not uE() then
return false
endif
return true
endfunction
function uG takes nothing returns boolean
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function uH takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function uI takes nothing returns boolean
if not uH() then
return false
endif
return true
endfunction
function uJ takes nothing returns boolean
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function uK takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function uL takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function uM takes nothing returns boolean
return GetBooleanAnd(uK(),uL())
endfunction
function uN takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),SL[11],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function uO takes nothing returns boolean
if not (GetSpellAbilityId()==$53303052) then
return false
endif
return true
endfunction
function uP takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930394A)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49303952)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$7370726F)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304B31)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function uQ takes nothing returns boolean
if not uP() then
return false
endif
return true
endfunction
function uR takes nothing returns boolean
if not (GetRandomInt(1,5)==1) then
return false
endif
return true
endfunction
function uS takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304B31)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function uT takes nothing returns boolean
if not uS() then
return false
endif
return true
endfunction
function uU takes nothing returns boolean
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function uV takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function uW takes nothing returns boolean
if not uV() then
return false
endif
return true
endfunction
function uX takes nothing returns boolean
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function uY takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function uZ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function ua takes nothing returns boolean
return GetBooleanAnd(uY(),uZ())
endfunction
function ub takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),SL[11],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function uc takes nothing returns boolean
if not (GetSpellAbilityId()==$53303056) then
return false
endif
return true
endfunction
function ud takes nothing returns nothing
local unit Me
local integer Np
local integer Nq
local integer Ns
local integer Nt
if uO() then
set Wz=GetSpellTargetLoc()
call TriggerSleepAction(1.)
set Me=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),$6E30374F,Wz,0)
call m5(Me,30)
set Np=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1
set Nq=GetHeroInt(GetTriggerUnit(),true)+100*GetUnitAbilityLevel(GetTriggerUnit(),$53303052)+GetHeroInt(GetTriggerUnit(),true)*UO[Np]/100
call nc(Me,Nq)
set Ns=R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/2)+R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)/2)*UO[Np]/100
call nd(Me,Ns)
set Nt=GetHeroInt(GetTriggerUnit(),true)/10+15*GetUnitAbilityLevel(GetTriggerUnit(),$53303052)+GetHeroInt(GetTriggerUnit(),true)/10*UO[Np]/100
call ne(Me,Nt)
set Me=null
set SL[11]=3.*I2R(GetHeroInt(GetTriggerUnit(),true))*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+0.
if uJ() then
if uI() then
call CreateTextTagUnitBJ("|c00ff0000Crit x3|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SL[11]=SL[11]+SL[11]*2.
else
endif
else
if uG() then
if uF() then
call CreateTextTagUnitBJ("|c00ff00ffCrit x 2|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SL[11]=SL[11]+SL[11]*1.
else
endif
else
if uD() then
if uC() then
call CreateTextTagUnitBJ("|c00ff7f00Crit x 1.5|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SL[11]=SL[11]+SL[11]/2.
else
endif
else
endif
endif
endif
set ST=GetUnitsInRangeOfLocMatching(400.,Wz,Condition(function uM))
call ForGroupBJ(ST,function uN)
call RemoveLocation(Wz)
call DestroyGroup(ST)
set SL[11]=0.
else
endif
if uc() then
set Wz=GetSpellTargetLoc()
call TriggerSleepAction(1.)
set Me=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),$6E30374F,Wz,0)
call m5(Me,30)
set Np=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1
set Nq=GetHeroInt(GetTriggerUnit(),true)*3/2+1000+GetHeroInt(GetTriggerUnit(),true)*3/2*UO[Np]/100
call nc(Me,Nq)
set Ns=R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE))+R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE))*UO[Np]/100
call nd(Me,Ns)
set Nt=GetHeroInt(GetTriggerUnit(),true)/10+150+GetHeroInt(GetTriggerUnit(),true)/10*(UO[Np]/100)
call ne(Me,Nt)
set Me=null
set SL[11]=7.*I2R(GetHeroInt(GetTriggerUnit(),true))*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+0.
if uX() then
if uW() then
call CreateTextTagUnitBJ("|c00ff0000Crit x3|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SL[11]=SL[11]+SL[11]*2.
else
endif
else
if uU() then
if uT() then
call CreateTextTagUnitBJ("|c00ff00ffCrit x 2|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SL[11]=SL[11]+SL[11]*1.
else
endif
else
if uR() then
if uQ() then
call CreateTextTagUnitBJ("|c00ff7f00Crit x 1.5|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SL[11]=SL[11]+SL[11]/2.
else
endif
else
endif
endif
endif
set ST=GetUnitsInRangeOfLocMatching(400.,Wz,Condition(function ua))
call ForGroupBJ(ST,function ub)
call RemoveLocation(Wz)
call DestroyGroup(ST)
set SL[11]=0.
else
endif
endfunction
function ue takes nothing returns nothing
set Wy=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wy,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wy,function ud)
endfunction
function uf takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv=GetUnitLoc(Hw)
local unit NR
call ms(Ps,Hw,Nw)
set NR=CreateUnitAtLoc(Player(0),$68303739,Hv,0)
call UnitAddAbility(NR,$4131324E)
call m5(NR,1)
call IssueTargetOrder(NR,"creepthunderbolt",Hw)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl",Hw,"origin"))
call RemoveLocation(Hv)
set NR=null
set Hw=null
set Hv=null
endfunction
function ug takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0),$41313356)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function uh takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local location Me
local string Np
local group Nq
local boolexpr Ns
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),1,LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)>=1 then
set Me=GetUnitLoc(Hw)
set Np=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Np="war3mapImported\\EarthNova.mdx"
endif
call DestroyEffect(AddSpecialEffect(Np,GetLocationX(Me),GetLocationY(Me)))
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Me),GetLocationY(Me),600,Ns)
call DestroyBoolExpr(Ns)
set Nw=2500+GetHeroStr(Hw,true)*7
set Ps=Hw
call ForGroup(Nq,function uf)
call DestroyGroup(Nq)
call RemoveLocation(Me)
set Me=null
set Ns=null
else
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set Nq=null
endfunction
function ui takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local location Me
local string Np
local group Nq
local boolexpr Ns
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),1,LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)>=1 then
set Me=GetUnitLoc(Hw)
set Np=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Np="war3mapImported\\EarthNova.mdx"
endif
call DestroyEffect(AddSpecialEffect(Np,GetLocationX(Me),GetLocationY(Me)))
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Me),GetLocationY(Me),600,Ns)
call DestroyBoolExpr(Ns)
set Nw=GetUnitAbilityLevel(Hw,$41313044)*(500+GetHeroStr(Hw,true)*2)
set Ps=Hw
call ForGroup(Nq,function uf)
call DestroyGroup(Nq)
call RemoveLocation(Me)
set Me=null
set Ns=null
else
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set Nq=null
endfunction
function uj takes nothing returns nothing
local integer MC
local unit Hw=GetTriggerUnit()
local unit NR=GetSpellTargetUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local timer Me
local location Np
local group Nq
local boolexpr Ns
if GetSpellAbilityId()==$53303057 then
set MC=(GetHeroStr(Hw,true)+500)*GetUnitAbilityLevel(Hw,$53303057)
call mu(Hw,NR,R2I(I2R(MC)*Nh[Mc+1]))
elseif GetSpellAbilityId()==$53303058 then
set MC=GetHeroStr(Hw,true)*15+15000
call mu(Hw,NR,R2I(I2R(MC)*Nh[Mc+1]))
elseif GetSpellAbilityId()==$41313044 then
set Me=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Me),0,Hw)
call SaveInteger(PR,GetHandleId(Me),1,4)
call TimerStart(Me,2.2,true,function ui)
set Me=null
elseif GetSpellAbilityId()==$4130565A then
set Me=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Me),0,Hw)
call SaveInteger(PR,GetHandleId(Me),1,5)
call TimerStart(Me,2.2,true,function uh)
set Me=null
elseif GetSpellAbilityId()==$41313031 then
set Np=GetSpellTargetLoc()
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Np),GetLocationY(Np),200,Ns)
call DestroyBoolExpr(Ns)
set Nw=GetUnitAbilityLevel(Hw,$41313031)*100+GetHeroStr(Hw,true)*5
set Ps=Hw
call ForGroup(Nq,function m3)
call DestroyGroup(Nq)
set Nq=CreateGroup()
set Ns=Condition(function mp)
call GroupEnumUnitsInRange(Nq,GetLocationX(Np),GetLocationY(Np),200,Ns)
call DestroyBoolExpr(Ns)
set Nw=GetUnitAbilityLevel(Hw,$41313031)*200+GetHeroStr(Hw,true)*3
call ForGroup(Nq,function mx)
call DestroyGroup(Nq)
call RemoveLocation(Np)
set Np=null
set Ns=null
set Nq=null
elseif GetSpellAbilityId()==$4130504C then
call UnitAddAbility(GetSpellTargetUnit(),$41313356)
call SetUnitAbilityLevel(GetSpellTargetUnit(),$41313356,GetUnitAbilityLevel(Hw,$4130504C))
set Me=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Me),0,GetSpellTargetUnit())
call TimerStart(Me,10,false,function ug)
set Me=null
endif
set Hw=null
set NR=null
endfunction
function uk takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function uj)
set He=null
endfunction
function ul takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303542
endfunction
function um takes nothing returns boolean
if not (CountUnitsInGroup(ST)>=4) then
return false
endif
return true
endfunction
function un takes nothing returns nothing
local string Me
if GetUnitTypeId(GetSummonedUnit())==$68303542 then
set ST=GetUnitsOfPlayerMatching(GetOwningPlayer(GetSummoningUnit()),Condition(function ul))
if um() then
call RemoveUnit(GetSummonedUnit())
else
endif
call DestroyGroup(ST)
else
endif
if GetUnitTypeId(GetSummonedUnit())==$6E30314E then
if GetUnitTypeId(GetSummoningUnit())==$4830364E then
call SetUnitVertexColor(GetSummonedUnit(),255,70,120,255)
set Me=""
if GetOwningPlayer(GetSummonedUnit())==GetLocalPlayer() then
set Me="war3mapImported\\Rune Blue AuraRoz.mdx"
endif
call AddSpecialEffectTarget(Me,GetSummonedUnit(),"origin")
else
set Me=""
if GetOwningPlayer(GetSummonedUnit())==GetLocalPlayer() then
set Me="war3mapImported\\Rune Blue Aura.mdx"
endif
call AddSpecialEffectTarget(Me,GetSummonedUnit(),"origin")
endif
else
endif
endfunction
function uo takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddAction(He,function un)
set He=null
endfunction
function up takes nothing returns boolean
if GetSpellAbilityId()==$41313336 then
return true
endif
if GetSpellAbilityId()==$41305847 then
return true
endif
return false
endfunction
function uq takes nothing returns boolean
if not up() then
return false
endif
return true
endfunction
function ur takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function us takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function ut takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function uu takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function uv takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function uw takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function ux takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function uy takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function uz takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function u0 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function u1 takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function u2 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function u3 takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function u4 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TS[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function u5 takes nothing returns nothing
set W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetTriggerUnit()
set W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetUnit()
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ud=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ud,Condition(function ur))
call ForGroupBJ(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function us)
call RemoveLocation(Ud)
call DestroyGroup(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ud=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ud,Condition(function ut))
call ForGroupBJ(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function uu)
call RemoveLocation(Ud)
call DestroyGroup(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ud=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ud,Condition(function uv))
call ForGroupBJ(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function uw)
call RemoveLocation(Ud)
call DestroyGroup(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ud=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ud,Condition(function ux))
call ForGroupBJ(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function uy)
call RemoveLocation(Ud)
call DestroyGroup(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ud=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ud,Condition(function uz))
call ForGroupBJ(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function u0)
call RemoveLocation(Ud)
call DestroyGroup(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ud=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ud,Condition(function u1))
call ForGroupBJ(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function u2)
call RemoveLocation(Ud)
call DestroyGroup(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N1[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ud=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ud,Condition(function u3))
call ForGroupBJ(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function u4)
call RemoveLocation(Ud)
call DestroyGroup(Ts[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function u6 takes nothing returns nothing
set W0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W0,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(W0,Condition(function uq))
call TriggerAddAction(W0,function u5)
endfunction
function u7 takes nothing returns boolean
if not (GetSpellAbilityId()==$41313333) then
return false
endif
return true
endfunction
function u8 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$4830364E) then
return false
endif
return true
endfunction
function u9 takes nothing returns boolean
if not (UnitHasBuffBJ(GetSpellTargetUnit(),$42303749)==true) then
return false
endif
return true
endfunction
function vB takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function vC takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$4830364E) then
return false
endif
return true
endfunction
function vD takes nothing returns nothing
set SL[3]=I2R(GetHeroInt(GetTriggerUnit(),true))*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313333))
if u9() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),SL[3]*1.*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
if u8() then
call nX(GetTriggerUnit(),"x2",.023,255,70,120)
else
call nX(GetTriggerUnit(),"x2",.023,0,255,255)
endif
else
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),SL[3]*.5*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endif
set V2=GetUnitLoc(GetSpellTargetUnit())
set ST=GetUnitsInRangeOfLocMatching(250.,V2,Condition(function vB))
set W4=GroupPickRandomUnit(ST)
call CreateNUnitsAtLoc(1,$68303135,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"innerfire",W4)
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
call SetUnitLifeBJ(W4,GetUnitState(W4,UNIT_STATE_LIFE)+(200.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313333))+I2R(GetHeroInt(GetTriggerUnit(),true))*1.5)*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
if vC() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Unleash the powerroz.mdx",W4,"chest"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Unleash the power.mdx",W4,"chest"))
endif
call RemoveLocation(V2)
call DestroyGroup(ST)
set W4=null
endfunction
function vE takes nothing returns nothing
set W3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W3,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(W3,Condition(function u7))
call TriggerAddAction(W3,function vD)
endfunction
function vF takes nothing returns boolean
if not (GetSpellAbilityId()==$41313334) then
return false
endif
return true
endfunction
function vG takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$4830364E) then
return false
endif
return true
endfunction
function vH takes nothing returns boolean
if not (UnitHasBuffBJ(GetSpellTargetUnit(),$42303749)==true) then
return false
endif
return true
endfunction
function vI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function vJ takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$4830364E) then
return false
endif
return true
endfunction
function vK takes nothing returns nothing
set SL[3]=I2R(GetHeroInt(GetTriggerUnit(),true))*7.5
if vH() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),SL[3]*2.*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
if vG() then
call nX(GetTriggerUnit(),"x2",.023,255,70,120)
else
call nX(GetTriggerUnit(),"x2",.023,0,255,255)
endif
else
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),SL[3]*1.*N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endif
set V2=GetUnitLoc(GetSpellTargetUnit())
set ST=GetUnitsInRangeOfLocMatching(250.,V2,Condition(function vI))
set W4=GroupPickRandomUnit(ST)
call CreateNUnitsAtLoc(1,$68303135,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"innerfire",W4)
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
call SetUnitLifeBJ(W4,GetUnitState(W4,UNIT_STATE_LIFE)+(600.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313334))+I2R(GetHeroInt(GetTriggerUnit(),true))*1.5)*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
if vJ() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Unleash the powerroz.mdx",W4,"chest"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Unleash the power.mdx",W4,"chest"))
endif
call RemoveLocation(V2)
call DestroyGroup(ST)
set W4=null
endfunction
function vL takes nothing returns nothing
set W5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W5,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(W5,Condition(function vF))
call TriggerAddAction(W5,function vK)
endfunction
function vM takes nothing returns boolean
if GetSpellAbilityId()==$41303933 then
return true
endif
if GetSpellAbilityId()==$41305236 then
return true
endif
return false
endfunction
function vN takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function vO takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==false
endfunction
function vP takes nothing returns boolean
return GetBooleanAnd(vN(),vO())
endfunction
function vQ takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(GetTriggerUnit(),true))*(2.*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endfunction
function vR takes nothing returns boolean
if not vM() then
return false
endif
return true
endfunction
function vS takes nothing returns boolean
if GetSpellAbilityId()==$4130464E then
return true
endif
if GetSpellAbilityId()==$41305535 then
return true
endif
return false
endfunction
function vT takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function vU takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==false
endfunction
function vV takes nothing returns boolean
return GetBooleanAnd(vT(),vU())
endfunction
function vW takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(GetTriggerUnit(),true))*(3.5*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endfunction
function vX takes nothing returns boolean
if not vS() then
return false
endif
return true
endfunction
function vY takes nothing returns boolean
if GetSpellAbilityId()==$41303454 then
return true
endif
if GetSpellAbilityId()==$41304E32 then
return true
endif
return false
endfunction
function vZ takes nothing returns boolean
if not vY() then
return false
endif
return true
endfunction
function va takes nothing returns boolean
if GetSpellAbilityId()==$4130464F then
return true
endif
if GetSpellAbilityId()==$41305039 then
return true
endif
return false
endfunction
function vb takes nothing returns boolean
if not va() then
return false
endif
return true
endfunction
function vc takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303542) then
return false
endif
return true
endfunction
function vd takes nothing returns nothing
if vR() then
set W7[9]=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(800.,W7[9],Condition(function vP))
call ForGroupBJ(ST,function vQ)
call RemoveLocation(W7[9])
call DestroyGroup(ST)
else
endif
if vX() then
set W7[9]=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(800.,W7[9],Condition(function vV))
call ForGroupBJ(ST,function vW)
call RemoveLocation(W7[9])
call DestroyGroup(ST)
else
endif
if vZ() then
set SL[3]=I2R(GetHeroInt(GetTriggerUnit(),true))*3.
call SetUnitLifeBJ(GetSpellTargetUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetSpellTargetUnit())+SL[3]*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set SL[3]=0.
else
endif
if vb() then
set SL[3]=I2R(GetHeroInt(GetTriggerUnit(),true))*4.5
call SetUnitLifeBJ(GetSpellTargetUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetSpellTargetUnit())+SL[3]*TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set SL[3]=0.
else
endif
if vc() then
call KillUnit(GetTriggerUnit())
else
endif
endfunction
function ve takes nothing returns nothing
set W6=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W6,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(W6,function vd)
endfunction
function vf takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function vg takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)+GetUnitState(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],UNIT_STATE_MAX_MANA)/2.))
call AddSpecialEffectLocBJ(Ud,"war3mapImported\\EnergyBurst.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function vh takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303542) then
return false
endif
return true
endfunction
function vi takes nothing returns boolean
if GetUnitTypeId(GetDyingUnit())==$6E303152 then
return true
endif
if GetUnitTypeId(GetDyingUnit())==$6E303150 then
return true
endif
if GetUnitTypeId(GetDyingUnit())==$6E303151 then
return true
endif
if GetUnitTypeId(GetDyingUnit())==$6E30314F then
return true
endif
if GetUnitTypeId(GetDyingUnit())==$6E30314E then
return true
endif
return false
endfunction
function vj takes nothing returns boolean
if not vi() then
return false
endif
return true
endfunction
function vk takes nothing returns nothing
if vh() then
set Ud=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(1000.,Ud,Condition(function vf))
call ForGroupBJ(ST,function vg)
call RemoveLocation(Ud)
call DestroyGroup(ST)
call RemoveUnit(GetTriggerUnit())
else
endif
if vj() then
call RemoveUnit(GetDyingUnit())
else
endif
endfunction
function vl takes nothing returns nothing
set W8=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W8,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(W8,function vk)
endfunction
function vm takes nothing returns nothing
local unit Hw=GetEnumUnit()
local unit NR
call UnitDamageTarget(Ps,Hw,Nw,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set NR=CreateUnitAtLoc(Player(0),$68303739,Pt,0)
call m5(NR,1)
call UnitAddAbility(NR,$4131324E)
call IssueTargetOrder(NR,"creepthunderbolt",Hw)
set NR=null
set Hw=null
endfunction
function vn takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local location Me
local group Np
local boolexpr Nq
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),3,LoadInteger(PR,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),3)>=1 then
if not (GetUnitAbilityLevel(Hw,$4230384F)>0) then
set Me=GetUnitLoc(Hw)
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),500,Nq)
call DestroyBoolExpr(Nq)
set Nw=LoadInteger(PR,GetHandleId(GetExpiredTimer()),4)
set Ps=Hw
call ForGroup(Np,function vm)
call DestroyGroup(Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
set Np=null
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),4)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
else
set Me=GetUnitLoc(Hw)
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),500,Nq)
call DestroyBoolExpr(Nq)
set Nw=LoadInteger(PR,GetHandleId(GetExpiredTimer()),4)
set Ps=Hw
call ForGroup(Np,function vm)
call DestroyGroup(Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
set Np=null
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),4)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function vo takes nothing returns nothing
local unit Hw=GetEnumUnit()
local real MF=GetLocationX(Pt)
local real MG=GetLocationY(Pt)
local real Pv=GetUnitX(Hw)
local real Pw=GetUnitY(Hw)
local real NU=Atan2(MG-Pw,MF-Pv)
local real Py=nK(GetUnitX(Hw)+10*Cos(NU))
local real Pz=nL(GetUnitY(Hw)+10*Sin(NU))
local location Hv=Location(Py,Pz)
local unit Me
call SetUnitPositionLoc(Hw,Hv)
if nM(Pt,Location(Pv,Pw))<=85 and GetUnitAbilityLevel(Hw,$42303639)<1 then
call UnitDamageTarget(Ps,Hw,GetHeroStr(Ps,true)*7*Nh[GetPlayerId(GetOwningPlayer(Ps))+1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Me=CreateUnitAtLoc(Player(0),$68303739,Pt,0)
call m5(Me,1)
call UnitAddAbility(Me,$4131324E)
call SetUnitAbilityLevel(Me,$4131324E,2)
call IssueTargetOrder(Me,"creepthunderbolt",Hw)
set Me=null
endif
call RemoveLocation(Hv)
set Hv=null
set Hw=null
endfunction
function vp takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local group Nb
set Pt=LoadLocationHandle(PR,GetHandleId(GetExpiredTimer()),1)
set Nb=LoadGroupHandle(PR,GetHandleId(GetExpiredTimer()),2)
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),3,LoadInteger(PR,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),3)>=1 then
set Ps=Hw
call ForGroup(Nb,function vo)
else
call RemoveLocation(LoadLocationHandle(PR,GetHandleId(GetExpiredTimer()),1))
call DestroyGroup(LoadGroupHandle(PR,GetHandleId(GetExpiredTimer()),2))
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(GetExpiredTimer()),4))
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),4)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set Nb=null
endfunction
function vq takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local timer He
local integer Me
local location Np
local group Nq
local boolexpr Ns
local unit Nt
local real Ov
if GetSpellAbilityId()==$41304C32 then
set Pq[Mc]=R2I((GetUnitState(Hw,UNIT_STATE_MAX_LIFE)/3+2000)*I2R(GetUnitAbilityLevel(Hw,$41304C32))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1])
set Pr[Mc]=true
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),3,21)
call SaveInteger(PR,GetHandleId(He),4,Pq[Mc])
call TimerStart(He,.5,true,function vn)
set He=null
elseif GetSpellAbilityId()==$41304B5A then
set Pq[Mc]=R2I((GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*1.5+6000)*Ng[GetPlayerId(GetOwningPlayer(Hw))+1])
set Pr[Mc]=true
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveInteger(PR,GetHandleId(He),3,21)
call SaveInteger(PR,GetHandleId(He),4,Pq[Mc])
call TimerStart(He,.5,true,function vn)
set He=null
elseif GetSpellAbilityId()==$41303842 then
set Me=GetUnitAbilityLevel(Hw,$4130364B)
call UnitRemoveAbility(Hw,$4130364B)
call UnitAddAbility(Hw,$4130364B)
call SetUnitAbilityLevel(Hw,$4130364B,Me)
set Np=GetUnitLoc(Hw)
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Np),GetLocationY(Np),600,Ns)
call DestroyBoolExpr(Ns)
set Nw=GetUnitAbilityLevel(Hw,$41303842)*2000+GetHeroStr(Hw,true)*7
set Ps=Hw
call ForGroup(Nq,function m1)
set He=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(He),0,Hw)
call SaveLocationHandle(PR,GetHandleId(He),1,Np)
call SaveGroupHandle(PR,GetHandleId(He),2,Nq)
call SaveInteger(PR,GetHandleId(He),3,50)
call SaveEffectHandle(PR,GetHandleId(He),4,AddSpecialEffectLoc("war3mapImported\\Kingdom Come.mdx",Np))
call TimerStart(He,.1,true,function vp)
set He=null
elseif GetSpellAbilityId()==$4130364B then
set Nt=GetSpellTargetUnit()
set Np=GetUnitLoc(Hw)
call IssueTargetOrder(Nt,"attack",Hw)
set Ov=I2R(GetUnitAbilityLevel(Hw,$4130364B)*(150+GetHeroStr(Hw,true)))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
call UnitDamageTarget(Hw,Nt,Ov,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if GetUnitAbilityLevel(Nt,$42303639)>=1 then
call UnitDamageTarget(Hw,Nt,Ov,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Nt=CreateUnitAtLoc(Player(0),$68303135,Np,0)
call IssueImmediateOrder(Nt,"howlofterror")
call m5(Nt,1)
endif
call RemoveLocation(Np)
set Np=null
endif
set Nt=null
set Nq=null
set Np=null
set Hw=null
endfunction
function vr takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function vq)
set He=null
endfunction
function vs takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function vt takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),SL[11],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function vu takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),UP[GetPlayerId(GetOwningPlayer(Ps))])==false then
call GroupAddUnit(UP[GetPlayerId(GetOwningPlayer(Ps))],GetEnumUnit())
call mu(Ps,GetEnumUnit(),Nw)
endif
endfunction
function vv takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),7)
local location Me
local location Np
local group Nq
local boolexpr Ns
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
set Ps=Hw
set Nw=R2I(I2R(200*GetUnitAbilityLevel(Hw,$41313943)+GetHeroAgi(Hw,true)*4)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1])
set Me=GetUnitLoc(NR)
set Np=nN(Me,10,GetUnitFacing(NR))
call SetUnitPositionLoc(NR,Np)
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Me),GetLocationY(Me),200,Ns)
call ForGroup(Nq,function vu)
call DestroyGroup(Nq)
call DestroyBoolExpr(Ns)
set Nq=null
set Ns=null
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
else
set Me=GetUnitLoc(NR)
call KillUnit(NR)
call RemoveUnit(NR)
call AddSpecialEffectLoc("war3mapImported\\Energy Release.mdx",Me)
set Ps=Hw
set Nw=R2I(I2R(200*GetUnitAbilityLevel(Hw,$41313943)+GetHeroAgi(Hw,true)*3)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1])
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Me),GetLocationY(Me),400,Ns)
call nW(Nq,$4131324E,1,"creepthunderbolt")
call ForGroup(Nq,function m2)
call DestroyBoolExpr(Ns)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
set Me=null
endfunction
function vw takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local unit Nx=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2)
local integer Me
local integer Np
local integer Nq
local timer Ns
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),0,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),0)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),0)>=1 then
set Me=LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)
set Np=10000*GetUnitAbilityLevel(Hw,$41304456)+1000*GetUnitAbilityLevel(Hw,$4131394B)+100*GetUnitAbilityLevel(Hw,$4131394A)+10*GetUnitAbilityLevel(Hw,$41313949)+GetUnitAbilityLevel(Hw,$41305545)
set Nq=Np+Me
call UnitRemoveAbility(Hw,$4131394B)
call UnitRemoveAbility(Hw,$4131394A)
call UnitRemoveAbility(Hw,$41313949)
call UnitRemoveAbility(Hw,$41305545)
call UnitRemoveAbility(Hw,$41304456)
call UnitRemoveAbility(Hw,$4131424F)
call nc(Hw,Nq)
call SetUnitAbilityLevel(Hw,$41305846,GetUnitAbilityLevel(Hw,$41305846)+1)
call SetUnitAbilityLevel(Nx,$41305846,GetUnitAbilityLevel(Nx,$41305846)+1)
set Ns=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Ns),0,Hw)
call SaveInteger(PR,GetHandleId(Ns),2,Me)
call TimerStart(Ns,20,true,function m6)
set Ns=null
else
call UnitRemoveAbility(Hw,$41305846)
call UnitRemoveAbility(Nx,$41305846)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Nx=null
set Hw=null
endfunction
function vx takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx
local unit NR
local location Hv
local timer He
local integer MC
local real NU
if GetSpellAbilityId()==$53303045 then
set NU=I2R(GetHeroAgi(Hw,true)*10+4500)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1]
call UnitDamageTarget(Hw,GetSpellTargetUnit(),NU,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$53303036 then
set NU=I2R((GetHeroAgi(Hw,true)/2+300)*GetUnitAbilityLevel(Hw,$53303036))*Ne[GetPlayerId(GetOwningPlayer(Hw))+1]
call UnitDamageTarget(Hw,GetSpellTargetUnit(),NU,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$41303832 then
set SL[11]=I2R(GetUnitAbilityLevel(Hw,$41303832))*(300+I2R(GetHeroAgi(Hw,true)))*Ne[GetPlayerId(GetOwningPlayer(Hw))+1]
set V2=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(700.,V2,Condition(function vs))
call ForGroupBJ(ST,function vt)
call DestroyGroup(ST)
call RemoveLocation(V2)
elseif GetSpellAbilityId()==$41313943 then
set Hv=GetUnitLoc(Hw)
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Hv,GetUnitFacing(Hw))
call SetUnitPathing(NR,false)
call AddSpecialEffectTarget("war3mapImported\\Punishment_Missle.mdx",NR,"overhead")
call GroupClear(UP[GetPlayerId(GetOwningPlayer(Hw))])
set He=CreateTimer()
call SaveInteger(Nr,GetHandleId(He),1,70)
call SaveUnitHandle(Nr,GetHandleId(He),2,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),7,NR)
call TimerStart(He,.01,true,function vv)
elseif GetSpellAbilityId()==$41304354 then
set Nx=GetSpellTargetUnit()
call UnitAddAbility(Hw,$41305846)
call UnitAddAbility(Nx,$41305846)
call SetUnitAbilityLevel(Nx,$41305846,11)
set MC=GetHeroAgi(Hw,true)/5+GetUnitAbilityLevel(Hw,$41304354)*250
set He=CreateTimer()
call SaveInteger(Nr,GetHandleId(He),0,11)
call SaveInteger(Nr,GetHandleId(He),3,MC)
call SaveUnitHandle(Nr,GetHandleId(He),1,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),2,Nx)
call TimerStart(He,1,true,function vw)
elseif GetSpellAbilityId()==$41304430 then
set Nx=GetSpellTargetUnit()
call UnitAddAbility(Hw,$41305846)
call UnitAddAbility(Nx,$41305846)
call SetUnitAbilityLevel(Nx,$41305846,11)
set MC=GetHeroAgi(Hw,true)/4+GetUnitAbilityLevel(Hw,$41304430)*1500
set He=CreateTimer()
call SaveInteger(Nr,GetHandleId(He),0,11)
call SaveInteger(Nr,GetHandleId(He),3,MC)
call SaveUnitHandle(Nr,GetHandleId(He),1,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),2,Nx)
call TimerStart(He,1,true,function vw)
endif
set Hw=null
set Nx=null
set He=null
set Hv=null
set NR=null
endfunction
function vy takes nothing returns nothing
set W9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W9,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(W9,function vx)
endfunction
function v0 takes nothing returns nothing
local unit Nx=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local location Me
local group Np
local boolexpr Nq
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 then
else
call PauseUnit(Nx,false)
set Me=GetUnitLoc(Nx)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",Me))
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),300,Nq)
set Ps=Hw
set Nw=R2I(I2R(150*GetUnitAbilityLevel(Hw,$41304341)+GetHeroInt(Hw,true)*4)*N1[GetPlayerId(GetOwningPlayer(Hw))+1])
call ForGroup(Np,function m3)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
set Np=null
set Nq=null
call RemoveLocation(Me)
set Me=null
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set Nx=null
endfunction
function v1 takes nothing returns nothing
local unit Nx=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local timer Me
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 then
else
set Me=CreateTimer()
call SaveEffectHandle(Nr,GetHandleId(Me),3,LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),3))
call SaveUnitHandle(Nr,GetHandleId(Me),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(Me),1,Nx)
call SaveInteger(Nr,GetHandleId(Me),2,31)
call TimerStart(Me,.01,true,function v0)
set Me=null
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set Nx=null
endfunction
function v2 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local location Me
local group Np
local boolexpr Nq
local real Ns
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 then
set Me=GetUnitLoc(Hw)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\unholyStrikeX2c.mdl",Hw,"origin"))
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),800,Nq)
set Ps=Hw
set Ns=I2R(500*GetUnitAbilityLevel(Hw,$41313959)+GetHeroInt(Hw,true)*3)*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ns)
call ForGroup(Np,function m3)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
set Np=null
set Nq=null
call RemoveLocation(Me)
set Me=null
else
call UnitRemoveAbility(Hw,$4162756E)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function v3 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit Nx=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local location Hv=GetUnitLoc(Nx)
local location Nl=GetUnitLoc(Hw)
local group Me
local boolexpr Np
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)>=1 and nM(Hv,Nl)<1000 then
set Me=CreateGroup()
set Np=Condition(function mq)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),600,Np)
set Ps=Hw
if GetUnitAbilityLevel(Hw,$41313137)>=1 then
set Nw=R2I(I2R(GetUnitAbilityLevel(Hw,$41313137)*(1000+GetHeroInt(Hw,true)))*N1[GetPlayerId(GetOwningPlayer(Hw))+1])
elseif GetUnitAbilityLevel(Hw,$41313138)>=1 then
set Nw=R2I(I2R(6000+GetHeroInt(Hw,true)*6)*N1[GetPlayerId(GetOwningPlayer(Hw))+1])
endif
call ForGroup(Me,function m3)
call DestroyGroup(Me)
call DestroyBoolExpr(Np)
set Me=null
set Np=null
else
call DestroyLightning(LoadLightningHandle(Nr,GetHandleId(GetExpiredTimer()),2))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
set Hw=null
set Nx=null
endfunction
function v4 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local unit Nx=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local location Hv=GetUnitLoc(Hw)
local location Nl=GetUnitLoc(Nx)
local lightning Nn=LoadLightningHandle(Nr,GetHandleId(GetExpiredTimer()),2)
local real Me
local real Np
local real Nq
local real Ns
local real Nt
local real Ov
local real Ow
local location Ox
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),3)>=1 and nM(Hv,Nl)<1000 then
call MoveLightning(Nn,true,GetLocationX(Hv),GetLocationY(Hv),GetLocationX(Nl),GetLocationY(Nl))
set Me=GetLocationX(Hv)
set Np=GetLocationY(Hv)
set Nq=GetUnitX(Nx)
set Ns=GetUnitY(Nx)
set Nt=Atan2(Np-Ns,Me-Nq)
set Ov=nK(GetUnitX(Nx)+1*Cos(Nt))
set Ow=nL(GetUnitY(Nx)+1*Sin(Nt))
set Ox=Location(Ov,Ow)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",Nq,Ns))
call SetUnitPositionLoc(Nx,Ox)
call RemoveLocation(Ox)
set Ox=null
else
call DestroyLightning(LoadLightningHandle(Nr,GetHandleId(GetExpiredTimer()),2))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
set Hw=null
set Nx=null
endfunction
function v5 takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetSpellTargetUnit()
local location Hv
local location Nl
local lightning Nn
local timer He
local unit Me
local group Np
local boolexpr Nq
local string Ns
local effect Nt
local real Ov
if GetSpellAbilityId()==$41313137 or GetSpellAbilityId()==$41313138 then
set Hv=GetUnitLoc(Hw)
set Nl=GetUnitLoc(Nx)
set He=CreateTimer()
set Nn=AddLightning("MYCH",true,GetLocationX(Hv),GetLocationY(Hv),GetLocationX(Nl),GetLocationY(Nl))
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,Nx)
call SaveLightningHandle(Nr,GetHandleId(He),2,Nn)
call SaveInteger(Nr,GetHandleId(He),3,101)
call TimerStart(He,.05,true,function v4)
set He=null
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,Nx)
call SaveInteger(Nr,GetHandleId(He),3,6)
call TimerStart(He,1,true,function v3)
set He=null
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
elseif GetSpellAbilityId()==$41304257 then
set Hv=GetUnitLoc(Nx)
set Me=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Hv,0)
call UnitAddAbility(Me,$41313952)
call SetUnitAbilityLevel(Me,$41313952,2)
call IssueTargetOrder(Me,"curse",Nx)
set Nw=R2I(I2R(100+GetHeroInt(Hw,true)*6)*N1[GetPlayerId(GetOwningPlayer(Hw))+1])
call ms(Hw,Nx,Nw)
call m5(Me,1)
set Me=null
if GetUnitAbilityLevel(Hw,$4162756E)>=1 then
call ms(Hw,Nx,Nw/2)
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Hv),GetLocationY(Hv),500,Nq)
call nW(Np,$41313952,2,"curse")
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
set Np=null
set Nq=null
endif
call RemoveLocation(Hv)
set Hv=null
elseif GetSpellAbilityId()==$41304341 then
call UnitAddAbility(Nx,$41726176)
call PauseUnit(Nx,true)
set Ns=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Ns="war3mapImported\\BlackHole.mdl"
endif
set Nt=AddSpecialEffectTarget(Ns,Nx,"origin")
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,Nx)
call SaveInteger(Nr,GetHandleId(He),2,41)
call SaveEffectHandle(Nr,GetHandleId(He),3,Nt)
call TimerStart(He,.03,true,function v1)
set He=null
elseif GetSpellAbilityId()==$41313956 then
set Nw=R2I(I2R(GetHeroInt(Hw,true)*8)*N1[GetPlayerId(GetOwningPlayer(Hw))+1])
call ms(Hw,Nx,Nw)
if GetUnitAbilityLevel(Hw,$4162756E)>=1 then
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Hv),GetLocationY(Hv),500,Nq)
call nW(Np,$4131324E,1,"creepthunderbolt")
set Ps=Hw
set Nw=Nw/2
call ForGroup(Np,function m3)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
set Np=null
set Nq=null
endif
elseif GetSpellAbilityId()==$41313957 then
set Nw=R2I(I2R(GetHeroInt(Hw,true)*14)*N1[GetPlayerId(GetOwningPlayer(Hw))+1])
call ms(Hw,Nx,Nw)
if GetUnitAbilityLevel(Hw,$4162756E)>=1 then
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Hv),GetLocationY(Hv),500,Nq)
call nW(Np,$4131324E,1,"creepthunderbolt")
set Ps=Hw
set Nw=Nw/2
call ForGroup(Np,function m3)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
set Np=null
set Nq=null
endif
elseif GetSpellAbilityId()==$41303849 then
set Hv=GetUnitLoc(Hw)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\unholyStrikeX2c.mdl",Hv))
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Hv),GetLocationY(Hv),700,Nq)
set Ps=Hw
set Ov=I2R(100*GetUnitAbilityLevel(Hw,$41303849)+GetHeroInt(Hw,true)*10)*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ov)
call ForGroup(Np,function m3)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
set Np=null
set Nq=null
call RemoveLocation(Hv)
set Hv=null
elseif GetSpellAbilityId()==$41313959 then
call UnitAddAbility(Hw,$4162756E)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),2,6)
call TimerStart(He,1,true,function v2)
set He=null
endif
if GetSpellAbilityId()==$41313137 or GetSpellAbilityId()==$41313138 or GetSpellAbilityId()==$41304257 or GetSpellAbilityId()==$41313956 or GetSpellAbilityId()==$41313957 or GetSpellAbilityId()==$41304341 then
if GetUnitAbilityLevel(Hw,$41303853)>=1 then
if GetUnitAbilityLevel(Nx,$41313756)>0 then
call SetUnitAbilityLevel(Nx,$41313756,GetUnitAbilityLevel(Nx,$41313756)-1)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Nx)
call TimerStart(He,5,false,function v0)
set He=null
endif
endif
endif
set Nt=null
set Nx=null
set Hw=null
endfunction
function v6 takes nothing returns nothing
set XB=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XB,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(XB,function v5)
endfunction
function v7 takes nothing returns boolean
if not (GetSpellAbilityId()==$41303852) then
return false
endif
return true
endfunction
function v8 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function v9 takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function wB takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(WF[RS[0]]))==true
endfunction
function wC takes nothing returns boolean
return GetBooleanAnd(v9(),wB())
endfunction
function wD takes nothing returns boolean
return GetBooleanAnd(v8(),wC())
endfunction
function wE takes nothing returns nothing
call CreateNUnitsAtLoc(1,$68303053,GetOwningPlayer(WF[RS[0]]),WG[RS[0]],bj_UNIT_FACING)
set WH[RS[0]]=GetLastCreatedUnit()
call IssueTargetOrderBJ(WH[RS[0]],"magicleash",GetEnumUnit())
call UnitApplyTimedLifeBJ(1.5,$42544C46,WH[RS[0]])
call GroupAddUnitSimple(GetEnumUnit(),RY[RS[0]])
endfunction
function wF takes nothing returns nothing
set RS[0]=RS[0]+1
set RT[RS[0]]=RT[RS[0]]+1
set RU[0]=0
set RV[RS[0]]=1.5
set RW[RS[0]]=0.
set RX[RS[0]]=0.
set WF[RS[0]]=GetTriggerUnit()
set WG[RS[0]]=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303054,GetOwningPlayer(WF[RS[0]]),WG[RS[0]],bj_UNIT_FACING)
set XD[RS[0]]=GetLastCreatedUnit()
set RY[RS[0]]=GetUnitsInRangeOfLocMatching(300.,WG[RS[0]],Condition(function wD))
call ForGroupBJ(RY[RS[0]],function wE)
set RZ[RS[0]]=true
call StartTimerBJ(Ra,true,.03)
endfunction
function wG takes nothing returns nothing
set XC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XC,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XC,Condition(function v7))
call TriggerAddAction(XC,function wF)
endfunction
function wH takes nothing returns nothing
set XF[RU[0]]=GetUnitLoc(GetEnumUnit())
call RemoveLocation(XF[RU[0]])
endfunction
function wI takes nothing returns nothing
set XF[RU[0]]=GetUnitLoc(GetEnumUnit())
call RemoveLocation(XF[RU[0]])
endfunction
function wJ takes nothing returns boolean
if not (RW[RU[0]]<=0.) then
return false
endif
return true
endfunction
function wK takes nothing returns boolean
if not (RV[RU[0]]<=0.) then
return false
endif
return true
endfunction
function wL takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(WF[RU[0]],GetEnumUnit(),150.*I2R(GetUnitAbilityLevelSwapped($41303852,WF[RU[0]]))+I2R(GetHeroStatBJ(bj_HEROSTAT_INT,WF[RU[0]],true))*(7.*N1[GetConvertedPlayerId(GetOwningPlayer(WF[RU[0]]))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function wM takes nothing returns boolean
if not (RV[RU[0]]==0.) then
return false
endif
return true
endfunction
function wN takes nothing returns nothing
endfunction
function wO takes nothing returns boolean
if not (RW[RU[0]]>=.15) then
return false
endif
return true
endfunction
function wP takes nothing returns boolean
if not (RT[RS[0]]<=0) then
return false
endif
return true
endfunction
function wQ takes nothing returns boolean
if not (RZ[RU[0]]==true) then
return false
endif
return true
endfunction
function wR takes nothing returns nothing
set RU[0]=1
loop
exitwhen RU[0]>RS[0]
if wQ() then
set RV[RU[0]]=RV[RU[0]]-.03
set RX[RU[0]]=RX[RU[0]]+10.
call SetUnitScalePercent(XD[RU[0]],100.+RX[RU[0]],100.+RX[RU[0]],100.+RX[RU[0]])
if wJ() then
call ForGroupBJ(RY[RU[0]],function wI)
else
call ForGroupBJ(RY[RU[0]],function wH)
endif
if wK() then
set RW[RU[0]]=RW[RU[0]]+.03
else
call DoNothing()
endif
if wM() then
call AddSpecialEffectLocBJ(WG[RU[0]],"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call RemoveUnit(XD[RU[0]])
call ForGroupBJ(RY[RU[0]],function wL)
else
call DoNothing()
endif
if wO() then
call ForGroupBJ(RY[RU[0]],function wN)
call GroupClear(RY[RU[0]])
call DestroyGroup(RY[RU[0]])
call RemoveLocation(WG[RU[0]])
set RX[RU[0]]=0.
set RZ[RU[0]]=false
set RT[RU[0]]=RT[RU[0]]-1
else
call DoNothing()
endif
if wP() then
call PauseTimerBJ(true,Ra)
set RS[0]=0
else
call DoNothing()
endif
else
call DoNothing()
endif
set RU[0]=RU[0]+1
endloop
endfunction
function wS takes nothing returns nothing
set XE=CreateTrigger()
call TriggerRegisterTimerExpireEventBJ(XE,Ra)
call TriggerAddAction(XE,function wR)
endfunction
function wT takes nothing returns boolean
if not (GetSpellAbilityId()==$41304738) then
return false
endif
return true
endfunction
function wU takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function wV takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function wW takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(WF[RS[0]]))==true
endfunction
function wX takes nothing returns boolean
return GetBooleanAnd(wV(),wW())
endfunction
function wY takes nothing returns boolean
return GetBooleanAnd(wU(),wX())
endfunction
function wZ takes nothing returns nothing
call CreateNUnitsAtLoc(1,$68303053,GetOwningPlayer(WF[RS[0]]),WG[RS[0]],bj_UNIT_FACING)
set WH[RS[0]]=GetLastCreatedUnit()
call IssueTargetOrderBJ(WH[RS[0]],"magicleash",GetEnumUnit())
call UnitApplyTimedLifeBJ(1.5,$42544C46,WH[RS[0]])
call GroupAddUnitSimple(GetEnumUnit(),RY[RS[0]])
endfunction
function wa takes nothing returns nothing
set RS[0]=RS[0]+1
set RT[RS[0]]=RT[RS[0]]+1
set RU[0]=0
set RV[RS[0]]=1.5
set RW[RS[0]]=0.
set RX[RS[0]]=0.
set WF[RS[0]]=GetTriggerUnit()
set WG[RS[0]]=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303054,GetOwningPlayer(WF[RS[0]]),WG[RS[0]],bj_UNIT_FACING)
set XD[RS[0]]=GetLastCreatedUnit()
set RY[RS[0]]=GetUnitsInRangeOfLocMatching(300.,WG[RS[0]],Condition(function wY))
call ForGroupBJ(RY[RS[0]],function wZ)
set RZ[RS[0]]=true
call StartTimerBJ(SQ,true,.03)
endfunction
function wb takes nothing returns nothing
set XG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XG,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XG,Condition(function wT))
call TriggerAddAction(XG,function wa)
endfunction
function wc takes nothing returns nothing
set XF[RU[0]]=GetUnitLoc(GetEnumUnit())
call RemoveLocation(XF[RU[0]])
endfunction
function wd takes nothing returns nothing
set XF[RU[0]]=GetUnitLoc(GetEnumUnit())
call RemoveLocation(XF[RU[0]])
endfunction
function we takes nothing returns boolean
if not (RW[RU[0]]<=0.) then
return false
endif
return true
endfunction
function wf takes nothing returns boolean
if not (RV[RU[0]]<=0.) then
return false
endif
return true
endfunction
function wg takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(WF[RU[0]],GetEnumUnit(),3000.+I2R(GetHeroStatBJ(bj_HEROSTAT_INT,WF[RU[0]],true))*(13.*N1[GetConvertedPlayerId(GetOwningPlayer(WF[RU[0]]))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function wh takes nothing returns boolean
if not (RV[RU[0]]==0.) then
return false
endif
return true
endfunction
function wi takes nothing returns nothing
endfunction
function wj takes nothing returns boolean
if not (RW[RU[0]]>=.15) then
return false
endif
return true
endfunction
function wk takes nothing returns boolean
if not (RT[RS[0]]<=0) then
return false
endif
return true
endfunction
function wl takes nothing returns boolean
if not (RZ[RU[0]]==true) then
return false
endif
return true
endfunction
function wm takes nothing returns nothing
set RU[0]=1
loop
exitwhen RU[0]>RS[0]
if wl() then
set RV[RU[0]]=RV[RU[0]]-.03
set RX[RU[0]]=RX[RU[0]]+10.
call SetUnitScalePercent(XD[RU[0]],100.+RX[RU[0]],100.+RX[RU[0]],100.+RX[RU[0]])
if we() then
call ForGroupBJ(RY[RU[0]],function wd)
else
call ForGroupBJ(RY[RU[0]],function wc)
endif
if wf() then
set RW[RU[0]]=RW[RU[0]]+.03
else
call DoNothing()
endif
if wh() then
call AddSpecialEffectLocBJ(WG[RU[0]],"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call RemoveUnit(XD[RU[0]])
call ForGroupBJ(RY[RU[0]],function wg)
else
call DoNothing()
endif
if wj() then
call ForGroupBJ(RY[RU[0]],function wi)
call GroupClear(RY[RU[0]])
call DestroyGroup(RY[RU[0]])
call RemoveLocation(WG[RU[0]])
set RX[RU[0]]=0.
set RZ[RU[0]]=false
set RT[RU[0]]=RT[RU[0]]-1
else
call DoNothing()
endif
if wk() then
call PauseTimerBJ(true,Ra)
set RS[0]=0
else
call DoNothing()
endif
else
call DoNothing()
endif
set RU[0]=RU[0]+1
endloop
endfunction
function wn takes nothing returns nothing
set XH=CreateTrigger()
call TriggerRegisterTimerExpireEventBJ(XH,SQ)
call TriggerAddAction(XH,function wm)
endfunction
function wo takes nothing returns boolean
if not (GetSpellAbilityId()==$41313754) then
return false
endif
return true
endfunction
function wp takes nothing returns nothing
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303634,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"magicleash",GetTriggerUnit())
call RemoveLocation(V2)
call UnitApplyTimedLifeBJ(7.,$42544C46,GetLastCreatedUnit())
call UnitAddAbilityBJ($41313753,GetTriggerUnit())
call TriggerSleepAction(7.)
call UnitRemoveAbilityBJ($41313753,GetTriggerUnit())
endfunction
function wq takes nothing returns nothing
set XI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XI,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XI,Condition(function wo))
call TriggerAddAction(XI,function wp)
endfunction
function wr takes nothing returns boolean
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303847)==true) then
return false
endif
return true
endfunction
function ws takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetAttacker(),I2R(GetHeroStr(GetTriggerUnit(),true))*1.5,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
endfunction
function wt takes nothing returns nothing
set XJ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XJ,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(XJ,Condition(function wr))
call TriggerAddAction(XJ,function ws)
endfunction
function wu takes nothing returns boolean
if not (GetSpellAbilityId()==$41303935) then
return false
endif
return true
endfunction
function wv takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303943)>=1) then
return false
endif
return true
endfunction
function ww takes nothing returns boolean
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303141)==true) then
return false
endif
return true
endfunction
function wx takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroStatBJ(bj_HEROSTAT_STR,GetTriggerUnit(),true))*Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]*I2R(GetUnitAbilityLevelSwapped($41303935,GetTriggerUnit())),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
call IssueTargetOrderBJ(GetSpellTargetUnit(),"attack",GetTriggerUnit())
set W7[16]=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303057,GetOwningPlayer(GetTriggerUnit()),W7[16],bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"curse",GetSpellTargetUnit())
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
if wv() then
call CreateNUnitsAtLoc(1,$68303545,GetOwningPlayer(GetTriggerUnit()),W7[16],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
else
endif
if ww() then
call UnitAddAbilityBJ($41305750,GetTriggerUnit())
call SetUnitAbilityLevel(GetTriggerUnit(),$41305750,GetUnitAbilityLevel(GetTriggerUnit(),$41303935))
call TriggerSleepAction(5.)
call UnitRemoveAbilityBJ($41305750,GetTriggerUnit())
else
endif
call RemoveLocation(W7[16])
endfunction
function wy takes nothing returns nothing
set XK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XK,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XK,Condition(function wu))
call TriggerAddAction(XK,function wx)
endfunction
function wz takes nothing returns boolean
if not (GetSpellAbilityId()==$41304548) then
return false
endif
return true
endfunction
function w0 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303943)>=1) then
return false
endif
return true
endfunction
function w1 takes nothing returns boolean
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303141)==true) then
return false
endif
return true
endfunction
function w2 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroStatBJ(bj_HEROSTAT_STR,GetTriggerUnit(),true))*Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]*15.,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
call IssueTargetOrderBJ(GetSpellTargetUnit(),"attack",GetTriggerUnit())
set W7[16]=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303057,GetOwningPlayer(GetTriggerUnit()),W7[16],bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"curse",GetSpellTargetUnit())
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
if w0() then
call CreateNUnitsAtLoc(1,$68303545,GetOwningPlayer(GetTriggerUnit()),W7[16],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
else
endif
if w1() then
call UnitAddAbilityBJ($41305751,GetTriggerUnit())
call TriggerSleepAction(5.)
call UnitRemoveAbilityBJ($41305751,GetTriggerUnit())
else
endif
call RemoveLocation(W7[16])
endfunction
function w3 takes nothing returns nothing
set XL=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XL,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XL,Condition(function wz))
call TriggerAddAction(XL,function w2)
endfunction
function w4 takes nothing returns nothing
local unit Hw=GetEnumUnit()
local unit NS=GetTriggerUnit()
local real Hd=I2R(150*GetUnitAbilityLevel(NS,$41305A55)+GetHeroStr(NS,true)*5)*Nh[GetPlayerId(GetOwningPlayer(NS))+1]
local string M7=""
if GetUnitAbilityLevel(Hw,$42303639)>=1 then
call UnitDamageTarget(NS,Hw,Hd*2,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call nZ(Hw,NS,"+"+I2S(R2I(Hd*2)),.026,255,0,0,0)
else
call UnitDamageTarget(NS,Hw,Hd,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call nZ(Hw,NS,"+"+I2S(R2I(Hd)),.023,255,100,0,0)
endif
if GetOwningPlayer(NS)==GetLocalPlayer() then
set M7="Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(M7,Hw,"chest"))
call IssueTargetOrder(Hw,"attack",NS)
set NS=null
set Hw=null
endfunction
function w5 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local string Me
local location Np
local group Nq
local boolexpr Ns
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
set Me=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Me="war3mapImported\\AnnihilationBlast.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Me,Hw,"origin"))
set Np=GetUnitLoc(Hw)
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Np),GetLocationY(Np),400,Ns)
set Nw=R2I(I2R(200+GetHeroStr(Hw,true)/3)*GetUnitAbilityLevel(Hw,$41303330)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1])
set Ps=Hw
call ForGroup(Nq,function m1)
call DestroyGroup(Nq)
call DestroyBoolExpr(Ns)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Ns=null
else
set Me=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Me="war3mapImported\\AnnihilationBlast.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Me,Hw,"origin"))
set Np=GetUnitLoc(Hw)
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Np),GetLocationY(Np),400,Ns)
call nW(Nq,$4131324E,1,"creepthunderbolt")
call DestroyGroup(Nq)
call DestroyBoolExpr(Ns)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Ns=null
call UnitRemoveAbility(Hw,$41436D32)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function w6 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local string Me
local location Np
local group Nq
local boolexpr Ns
local timer Nt
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
set Me=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Me="war3mapImported\\AnnihilationBlast.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Me,Hw,"origin"))
set Np=GetUnitLoc(Hw)
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Np),GetLocationY(Np),400,Ns)
set Nw=R2I(I2R(200+GetHeroStr(Hw,true)/3)*GetUnitAbilityLevel(Hw,$41303330)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1])
set Ps=Hw
call ForGroup(Nq,function m1)
call DestroyGroup(Nq)
call DestroyBoolExpr(Ns)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Ns=null
else
set Me=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Me="war3mapImported\\AnnihilationBlast.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Me,Hw,"origin"))
set Np=GetUnitLoc(Hw)
set Nq=CreateGroup()
set Ns=Condition(function mq)
call GroupEnumUnitsInRange(Nq,GetLocationX(Np),GetLocationY(Np),400,Ns)
call nW(Nq,$4131324E,1,"creepthunderbolt")
call DestroyGroup(Nq)
call DestroyBoolExpr(Ns)
call RemoveLocation(Np)
set Np=null
set Nq=null
set Ns=null
call UnitRemoveAbility(Hw,$41313753)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call UnitAddAbility(Hw,$41436D32)
set Nt=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(Nt),0,Hw)
call SaveInteger(Nr,GetHandleId(Nt),1,7)
call TimerStart(Nt,1,true,function w5)
set Nt=null
endif
set Hw=null
endfunction
function w7 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 then
if UnitAlive(Hw) then
call SetUnitState(Hw,UNIT_STATE_LIFE,I2R(LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)))
endif
else
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),3))
call UnitRemoveAbility(Hw,$41313638)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function w8 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 then
if UnitAlive(Hw) then
call SetUnitState(Hw,UNIT_STATE_LIFE,I2R(LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)))
endif
else
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),3))
call UnitRemoveAbility(Hw,$41313631)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function w9 takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer MC
local timer He
local location Hv
local group WC
local boolexpr Nc
if GetSpellAbilityId()==$41305350 then
set MC=R2I(GetUnitState(Hw,UNIT_STATE_LIFE))
call UnitAddAbility(Hw,$41313631)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,MC)
call SaveInteger(Nr,GetHandleId(He),2,121)
call SaveEffectHandle(Nr,GetHandleId(He),3,AddSpecialEffectTarget("war3mapImported\\Infernal_Bulwark.mdx",Hw,"chest"))
call TimerStart(He,.05,true,function w8)
elseif GetSpellAbilityId()==$41305351 then
set MC=R2I(GetUnitState(Hw,UNIT_STATE_LIFE))
call UnitAddAbility(Hw,$41313638)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,MC)
call SaveInteger(Nr,GetHandleId(He),2,120)
call SaveEffectHandle(Nr,GetHandleId(He),3,AddSpecialEffectTarget("war3mapImported\\Infernal_Bulwark.mdx",Hw,"chest"))
call TimerStart(He,.05,true,function w7)
elseif GetSpellAbilityId()==$41303330 then
call UnitAddAbility(Hw,$41313753)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,7)
call TimerStart(He,1,true,function w6)
elseif GetSpellAbilityId()==$41305A55 then
set Hv=GetUnitLoc(Hw)
set WC=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(WC,GetLocationX(Hv),GetLocationY(Hv),400,Nc)
call nW(WC,$4131324E,3,"creepthunderbolt")
call ForGroup(WC,function w4)
call DestroyBoolExpr(Nc)
call DestroyGroup(WC)
call RemoveLocation(Hv)
set Hv=null
set Nc=null
set WC=null
endif
set He=null
set Hw=null
endfunction
function xB takes nothing returns nothing
local trigger XM=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XM,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(XM,function w9)
set XM=null
endfunction
function xC takes nothing returns boolean
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303141)==true) then
return false
endif
return true
endfunction
function xD takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41313348)>=1) then
return false
endif
return true
endfunction
function xE takes nothing returns boolean
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303141)==true) then
return false
endif
return true
endfunction
function xF takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$4131334A)>=1) then
return false
endif
return true
endfunction
function xG takes nothing returns nothing
if xD() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitManaBJ(GetTriggerUnit(),GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+(6.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313348))+GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA)/100.))
call CreateTextTagUnitBJ("+"+I2S(6*GetUnitAbilityLevel(GetTriggerUnit(),$41313348)+R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA))/100),GetTriggerUnit(),0,10.,50.,50.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
if xC() then
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303138,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
call IssueImmediateOrder(GetLastCreatedUnit(),"howlofterror")
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V2)
else
endif
call TriggerSleepAction(10.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
if xF() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitManaBJ(GetTriggerUnit(),GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+(60.+GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA)/50.))
call CreateTextTagUnitBJ("+"+I2S(60+R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA))/50),GetTriggerUnit(),0,10.,50.,50.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
if xE() then
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303138,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),$41313349,2)
call IssueImmediateOrder(GetLastCreatedUnit(),"howlofterror")
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V2)
else
endif
call TriggerSleepAction(10.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function xH takes nothing returns nothing
set XN=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XN,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(XN,function xG)
endfunction
function xI takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local real Me
local location Np
local real Nq
local location Ns
local group Nt
local boolexpr Ov
local real Ow
call SaveReal(Nr,GetHandleId(GetExpiredTimer()),1,LoadReal(Nr,GetHandleId(GetExpiredTimer()),1)+150)
if LoadReal(Nr,GetHandleId(GetExpiredTimer()),1)<750 then
set Me=LoadReal(Nr,GetHandleId(GetExpiredTimer()),1)
set Np=GetUnitLoc(Hw)
set Nq=0
loop
set Ns=nN(Np,Me,Nq)
set Nt=CreateGroup()
set Ov=Condition(function mp)
call GroupEnumUnitsInRange(Nt,GetLocationX(Ns),GetLocationY(Ns),150,Ov)
call DestroyBoolExpr(Ov)
call DestroyEffect(AddSpecialEffect("Units\\NightElf\\Wisp\\WispExplode.mdl",GetLocationX(Ns),GetLocationY(Ns)))
if GetUnitAbilityLevel(Hw,$41313132)>=1 then
set Ow=I2R(100*GetUnitAbilityLevel(Hw,$41313132)+(GetHeroStr(Hw,true)+GetHeroInt(Hw,true)))*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ow)
else
set Ow=I2R(1000+(GetHeroStr(Hw,true)+GetHeroInt(Hw,true)))*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ow+Ow/2)
endif
call ForGroup(Nt,function mx)
call DestroyGroup(Nt)
set Ov=null
set Nt=null
set Nt=CreateGroup()
set Ov=Condition(function mq)
call GroupEnumUnitsInRange(Nt,GetLocationX(Ns),GetLocationY(Ns),150,Ov)
call DestroyBoolExpr(Ov)
if GetUnitAbilityLevel(Hw,$41313132)>=1 then
set Ow=I2R(50*GetUnitAbilityLevel(Hw,$41313132)+(GetHeroStr(Hw,true)+GetHeroInt(Hw,true)))*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ow*2)
else
set Ow=I2R(500+(GetHeroStr(Hw,true)+GetHeroInt(Hw,true)))*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(Ow*4)
endif
set Ps=Hw
call ForGroup(Nt,function m3)
call DestroyGroup(Nt)
set Ov=null
call RemoveLocation(Ns)
set Ns=null
set Nq=Nq+60
exitwhen Nq>=360
endloop
set Hw=null
call RemoveLocation(Np)
set Np=null
else
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedReal(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Nt=null
set Hw=null
endfunction
function xJ takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit NR
local timer He
local group Nb
local boolexpr Vz
local real NT
local location Hv
if GetSpellAbilityId()==$41313132 or GetSpellAbilityId()==$41313145 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveReal(Nr,GetHandleId(He),1,0)
call TimerStart(He,.5,true,function xI)
set He=null
elseif GetSpellAbilityId()==$41305A31 then
set NT=I2R((100+GetHeroInt(Hw,true))*GetUnitAbilityLevel(Hw,$41305A31))*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
call UnitDamageTarget(Hw,GetSpellTargetUnit(),NT,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$4130385A then
set NT=I2R(GetHeroInt(Hw,true))*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
call mv(GetSpellTargetUnit(),R2I(NT))
elseif GetSpellAbilityId()==$5330304C then
set Hv=GetSpellTargetLoc()
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303144,Hv,0)
call m5(NR,7)
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),600,Vz)
call DestroyBoolExpr(Vz)
set NT=I2R(1000*GetUnitAbilityLevel(Hw,$5330304C)+2*(GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true)))*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(NT)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Vz=null
set Nb=null
elseif GetSpellAbilityId()==$41304153 then
set Hv=GetUnitLoc(Hw)
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),700,Vz)
call DestroyBoolExpr(Vz)
set NT=I2R(3*GetHeroStr(Hw,true))*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(NT)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Vz=null
set Nb=null
elseif GetSpellAbilityId()==$41304731 then
set Hv=GetUnitLoc(Hw)
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),700,Vz)
call DestroyBoolExpr(Vz)
set NT=I2R(5*GetHeroStr(Hw,true))*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nw=R2I(NT)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Vz=null
set Nb=null
endif
set Hw=null
set NR=null
set He=null
set Hv=null
set Nb=null
set Vz=null
endfunction
function xK takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local item MQ=GetManipulatedItem()
local location Hv
local group Nb
local boolexpr Vz
if GetItemTypeId(MQ)==$636C666D or GetItemTypeId(MQ)==$63697269 or GetItemTypeId(MQ)==$68736C76 or GetItemTypeId(MQ)==$49304A5A then
set Hv=GetUnitLoc(Hw)
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),1000,Vz)
call DestroyBoolExpr(Vz)
set Nw=5*GetHeroInt(Hw,true)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Vz=null
set Nb=null
elseif GetItemTypeId(MQ)==$49304D59 or GetItemTypeId(MQ)==$49305746 then
set Hv=GetUnitLoc(Hw)
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),1000,Vz)
call DestroyBoolExpr(Vz)
set Nw=8*GetHeroInt(Hw,true)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Vz=null
set Nb=null
endif
set Hw=null
set MQ=null
endfunction
function xL takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function xJ)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(He,function xK)
set He=null
endfunction
function xM takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1))
call UnitAddAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1))
call SetUnitAbilityLevel(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1),LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function xN takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$4130364C)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function xO takes nothing returns nothing
local unit Hw=GetEnumUnit()
local timer He
if GetUnitState(Hw,UNIT_STATE_LIFE)>.405 then
call mu(Ps,Hw,Nw)
call UnitAddAbility(Hw,$4130364C)
call SetUnitAbilityLevel(Hw,$4130364C,GetUnitAbilityLevel(GetTriggerUnit(),$4130454A))
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call TimerStart(He,5,false,function xN)
set He=null
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BloodySplat Missile.mdx",Hw,"origin"))
endif
set Hw=null
endfunction
function xP takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local location Hv=GetUnitLoc(Hw)
local location Nl
local group Nb
local boolexpr Vz
local timer He
local real NT
if GetSpellAbilityId()==$4130454A then
set Nl=nN(Hv,350,GetUnitFacing(Hw))
set NT=(I2R(GetHeroStr(Hw,true)*5)+I2R(GetUnitAbilityLevel(Hw,$4130454A)*70))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
set Nb=CreateGroup()
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Nl),GetLocationY(Nl),350,Vz)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Culling Cleave Purple.mdx",Hw,"origin"))
set Ps=Hw
set Nw=R2I(NT)+GetHeroStr(Hw,true)/4*GetUnitAbilityLevel(Hw,$41304B57)
call SetUnitAbilityLevel(Hw,$41304B57,GetUnitAbilityLevel(Hw,$41304B57)-2)
call ForGroup(Nb,function xO)
call DestroyBoolExpr(Vz)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set Vz=null
set Nb=null
if GetUnitAbilityLevel(Hw,$41303051)>=1 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,GetSpellAbilityId())
call SaveInteger(Nr,GetHandleId(He),2,GetUnitAbilityLevel(Hw,GetSpellAbilityId()))
call TimerStart(He,4,false,function xM)
set He=null
endif
elseif GetSpellAbilityId()==$41305549 or GetSpellAbilityId()==$4130554A then
call SetUnitAbilityLevel(Hw,$41304B57,GetUnitAbilityLevel(Hw,$41304B57)-1)
if GetUnitAbilityLevel(Hw,$41303051)>=1 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,GetSpellAbilityId())
call SaveInteger(Nr,GetHandleId(He),2,GetUnitAbilityLevel(Hw,GetSpellAbilityId()))
call TimerStart(He,20,false,function xM)
set He=null
endif
elseif GetSpellAbilityId()==$41303855 or GetSpellAbilityId()==$41305544 then
call SetUnitAbilityLevel(Hw,$41304B57,GetUnitAbilityLevel(Hw,$41304B57)-1)
if GetUnitAbilityLevel(Hw,$41303051)>=1 then
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,GetSpellAbilityId())
call SaveInteger(Nr,GetHandleId(He),2,GetUnitAbilityLevel(Hw,GetSpellAbilityId()))
call TimerStart(He,10,false,function xM)
set He=null
endif
endif
set Nl=null
set Hv=null
set Hw=null
endfunction
function xQ takes nothing returns nothing
set XO=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XO,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(XO,function xP)
endfunction
function xR takes nothing returns boolean
if not (GetSpellAbilityId()==$41305638) then
return false
endif
return true
endfunction
function xS takes nothing returns boolean
return false==true
endfunction
function xT takes nothing returns nothing
set Rx=Rx+1
set Ry[Rx]=1.
set Rz[Rx]=0
set R0[Rx]=GetUnitFacing(GetTriggerUnit())
set R1[Rx]=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function xS))
set R2[Rx]=true
set XQ[Rx]=GetTriggerUnit()
set XR[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitLoc(GetTriggerUnit())
call StartTimerBJ(R3,true,.03)
endfunction
function xU takes nothing returns nothing
set XP=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XP,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XP,Condition(function xR))
call TriggerAddAction(XP,function xT)
endfunction
function xV takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function xW takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function xX takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(XQ[XT]))==true
endfunction
function xY takes nothing returns boolean
return IsUnitInGroup(GetFilterUnit(),R1[XT])==false
endfunction
function xZ takes nothing returns boolean
return GetBooleanAnd(xX(),xY())
endfunction
function xa takes nothing returns boolean
return GetBooleanAnd(xW(),xZ())
endfunction
function xb takes nothing returns boolean
return GetBooleanAnd(xV(),xa())
endfunction
function xc takes nothing returns nothing
local integer MC
local real Hd
call GroupAddUnitSimple(GetEnumUnit(),R1[XT])
set R5=R5+1
set XV[R5]=GetEnumUnit()
set XW[R5]=GetUnitLoc(XV[R5])
call SetUnitFlyHeightBJ(XV[R5],GetUnitFlyHeight(XV[R5])+10.,0.)
call UnitAddAbilityBJ($41617665,XV[R5])
set R6[R5]=20.
set R7=R7+1
set R8[R5]=true
call StartTimerBJ(R9,true,.05)
set MC=(1000+GetHeroStr(XQ[Rx],true)*3)*GetUnitAbilityLevel(XQ[Rx],$41305638)+GetHeroStr(XQ[Rx],true)/3*GetUnitAbilityLevel(XQ[Rx],$41304B57)
set Hd=I2R(MC)*Nh[GetConvertedPlayerId(GetOwningPlayer(XQ[Rx]))]
call UnitDamageTargetBJ(XQ[XT],XV[R5],Hd,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call SetUnitAbilityLevel(XQ[XT],$41304B57,GetUnitAbilityLevel(XQ[XT],$41304B57)-3)
endfunction
function xd takes nothing returns boolean
if not (Rz[XT]==3) then
return false
endif
return true
endfunction
function xe takes nothing returns boolean
if not (Ry[XT]>0.) then
return false
endif
if not (IsUnitAliveBJ(XQ[XT])==true) then
return false
endif
return true
endfunction
function xf takes nothing returns boolean
if not xe() then
return false
endif
return true
endfunction
function xg takes nothing returns boolean
if not (R2[XT]==true) then
return false
endif
return true
endfunction
function xh takes nothing returns nothing
set XT=1
loop
exitwhen XT>Rx
if xg() then
if xf() then
set Ry[XT]=Ry[XT]-.03
set Rz[XT]=Rz[XT]+1
set XU=GetUnitLoc(XQ[XT])
set XU=PolarProjectionBJ(XU,30.,R0[XT])
call SetUnitPositionLocFacingBJ(XQ[XT],XU,R0[XT])
set R4=GetUnitsInRangeOfLocMatching(160.,XU,Condition(function xb))
call ForGroupBJ(R4,function xc)
if xd() then
set Rz[XT]=0
call AddSpecialEffectLocBJ(XU,"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
call GroupClear(R4)
call DestroyGroup(R4)
call RemoveLocation(XU)
else
call SetUnitPositionLocFacingBJ(XQ[XT],XR[GetConvertedPlayerId(GetOwningPlayer(XQ[XT]))],0.)
call GroupClear(R1[XT])
call DestroyGroup(R1[XT])
set XQ[XT]=null
set Ry[XT]=0.
set Rz[XT]=0
set R0[XT]=0.
set R2[XT]=false
call SetUnitAnimation(XQ[XT],"stand")
endif
else
endif
set XT=XT+1
endloop
endfunction
function xi takes nothing returns nothing
set XS=CreateTrigger()
call TriggerRegisterTimerExpireEventBJ(XS,R3)
call TriggerAddAction(XS,function xh)
endfunction
function xj takes nothing returns boolean
if not (R7==0) then
return false
endif
return true
endfunction
function xk takes nothing returns boolean
if not (GetUnitDefaultFlyHeight(XV[XY])<=GetUnitFlyHeight(XV[XY])-.01) then
return false
endif
return true
endfunction
function xl takes nothing returns boolean
if not (R8[XY]==true) then
return false
endif
return true
endfunction
function xm takes nothing returns nothing
set XY=1
loop
exitwhen XY>R5
if xl() then
if xk() then
set R6[XY]=R6[XY]-1.
call SetUnitFlyHeightBJ(XV[XY],GetUnitFlyHeight(XV[XY])+R6[XY],0.)
call SetUnitPositionLoc(XV[XY],XW[XY])
else
call RemoveLocation(XW[XY])
call SetUnitFlyHeightBJ(XV[XY],GetUnitDefaultFlyHeight(XV[XY]),0.)
call UnitRemoveAbilityBJ($41617665,XV[XY])
set XV[XY]=null
set R6[XY]=0.
set R8[XY]=false
if xj() then
set R5=0
call PauseTimerBJ(true,R9)
else
endif
endif
else
endif
set XY=XY+1
endloop
endfunction
function xn takes nothing returns nothing
set XX=CreateTrigger()
call TriggerRegisterTimerExpireEventBJ(XX,R9)
call TriggerAddAction(XX,function xm)
endfunction
function xo takes nothing returns nothing
local unit PM=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local integer Mh=LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)
call SetHeroStr(PM,GetHeroStr(PM,false)-Mh,false)
set PM=null
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function xp takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer MC
local timer Me
if GetSpellAbilityId()==$41305549 then
set MC=GetHeroStr(Hw,true)/7+GetUnitAbilityLevel(Hw,$41305549)*20
call SetHeroStr(Hw,GetHeroStr(Hw,false)+MC,false)
set Me=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Me),0,Hw)
call SaveInteger(PR,GetHandleId(Me),1,MC)
call TimerStart(Me,10,false,function xo)
set Me=null
endif
if GetSpellAbilityId()==$4130554A then
set MC=GetHeroStr(Hw,true)/4+GetUnitAbilityLevel(Hw,$41305549)*30
call SetHeroStr(Hw,GetHeroStr(Hw,false)+MC,false)
set Me=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Me),0,Hw)
call SaveInteger(PR,GetHandleId(Me),1,MC)
call TimerStart(Me,10,false,function xo)
set Me=null
endif
set Hw=null
endfunction
function xq takes nothing returns nothing
set XZ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XZ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(XZ,function xp)
endfunction
function xr takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetKillingUnit(),$72686533)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetKillingUnit(),$72726532)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetKillingUnit(),$776F6C67)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetKillingUnit(),$49304D52)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetKillingUnit(),$49304B38)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetKillingUnit(),$49305736)==true then
return true
endif
return false
endfunction
function xs takes nothing returns boolean
if not xr() then
return false
endif
return true
endfunction
function xt takes nothing returns nothing
call SetUnitLifeBJ(GetKillingUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetKillingUnit())+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())/10.)
call AddSpecialEffectTargetUnitBJ("origin",GetKillingUnit(),"Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function xu takes nothing returns nothing
set Xa=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xa,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Xa,Condition(function xs))
call TriggerAddAction(Xa,function xt)
endfunction
function xv takes nothing returns nothing
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local location Hv=GetUnitLoc(Hw)
local location Nl=GetUnitLoc(NR)
local real Me
local real Np
local real Nq
local real Ns
local real Nt
local real Ov
local real Ow
local location Ox
local group Oy
local boolexpr Oz
if nM(Hv,Nl)>=50 and GetUnitState(Hw,UNIT_STATE_LIFE)>.405 then
set Me=GetLocationX(Hv)
set Np=GetLocationY(Hv)
set Nq=GetUnitX(NR)
set Ns=GetUnitY(NR)
set Nt=Atan2(Np-Ns,Me-Nq)
set Ov=nK(GetUnitX(NR)+8*Cos(Nt))
set Ow=nL(GetUnitY(NR)+8*Sin(Nt))
set Ox=Location(Ov,Ow)
call SetUnitPositionLoc(NR,Ox)
call RemoveLocation(Ox)
set Ox=null
else
set Oy=CreateGroup()
set Oz=Condition(function mq)
call GroupEnumUnitsInRange(Oy,GetLocationX(Hv),GetLocationY(Hv),300,Oz)
set Ps=Hw
set Nw=R2I(I2R(GetHeroAgi(Hw,true)*2)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1])
call ForGroup(Oy,function m2)
call DestroyGroup(Oy)
call DestroyBoolExpr(Oz)
set Oy=null
set Oz=null
call RemoveUnit(NR)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
set Hw=null
set NR=null
endfunction
function xw takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local location Hv
local location Nl
local timer He
local integer MC
local integer Pf
local real NU
local unit NR
local boolexpr Nc
local group WC
local string M7=""
if GetSpellAbilityId()==$41304258 or GetSpellAbilityId()==$41305354 then
set MC=0
set Hv=GetUnitLoc(Hw)
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set M7="Abilities\\Spells\\NightElf\\Cyclone\\CycloneTarget.mdl"
endif
loop
set Nl=nN(Hv,550,MC*60)
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Nl,0)
call UnitAddAbility(NR,$4130364E)
call AddSpecialEffectTarget(M7,NR,"origin")
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveUnitHandle(Nr,GetHandleId(He),1,NR)
call TimerStart(He,.1,true,function xv)
set He=null
call TriggerSleepAction(.5)
set MC=MC+1
exitwhen MC==6
endloop
elseif GetSpellAbilityId()==$41305458 then
set Hv=GetUnitLoc(Hw)
set Pf=80
set NU=GetUnitFacing(Hw)
loop
set Nl=nN(Hv,Pf,NU)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Green Stone.mdl",Nl))
set WC=CreateGroup()
set Nc=Condition(function mq)
call GroupEnumUnitsInRange(WC,GetLocationX(Nl),GetLocationY(Nl),120,Nc)
call DestroyBoolExpr(Nc)
set Ps=Hw
set Nw=R2I(I2R(GetHeroAgi(Hw,true)*9+GetUnitAbilityLevel(Hw,$41305458)*170)*Ne[GetPlayerId(GetOwningPlayer(Hw))+1])
call ForGroup(WC,function m2)
call DestroyGroup(WC)
set Nc=null
set WC=null
call RemoveLocation(Nl)
set Nl=null
call TriggerSleepAction(.05)
set Pf=Pf+80
exitwhen Pf>=800
endloop
call RemoveLocation(Hv)
set Hv=null
endif
set NR=null
set Nl=null
set Hv=null
set Hw=null
endfunction
function xx takes nothing returns nothing
set Xb=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xb,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xb,function xw)
endfunction
function xy takes nothing returns boolean
if not (GetSpellAbilityId()==$41304344) then
return false
endif
return true
endfunction
function xz takes nothing returns boolean
if not (GetSpellAbilityId()==$41304550) then
return false
endif
return true
endfunction
function x0 takes nothing returns nothing
if xy() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroAgi(GetTriggerUnit(),true))*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41304344))*Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),200.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41304344)),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectTargetUnitBJ("chest",GetSpellTargetUnit(),"war3mapImported\\Singularity II Red.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
else
endif
if xz() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroAgi(GetTriggerUnit(),true))*(18.*Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectTargetUnitBJ("chest",GetSpellTargetUnit(),"war3mapImported\\Singularity II Red.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
else
endif
endfunction
function x1 takes nothing returns nothing
set Xc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xc,function x0)
endfunction
function x2 takes nothing returns nothing
local location Me
local unit Np
if IsUnitInGroup(GetEnumUnit(),UP[GetPlayerId(GetOwningPlayer(Ps))])==false then
call GroupAddUnit(UP[GetPlayerId(GetOwningPlayer(Ps))],GetEnumUnit())
call mu(Ps,GetEnumUnit(),Nw)
set Me=GetUnitLoc(GetEnumUnit())
set Np=CreateUnitAtLoc(Player(0),$68303739,Me,0)
call m5(Np,1)
call UnitAddAbility(Np,$4131324E)
call IssueTargetOrder(Np,"creepthunderbolt",GetEnumUnit())
set Np=null
set Np=CreateUnitAtLoc(Player(0),$68303739,Me,0)
call m5(Np,1)
call UnitAddAbility(Np,$5330305A)
call IssueTargetOrder(Np,"cripple",GetEnumUnit())
call RemoveLocation(Me)
set Np=null
set Me=null
endif
endfunction
function x3 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),7)
local real Me
local real Np
local real Nq
local real Ns
local real Nt
local real Ov
local real Ow
local location Ox
local string Oy
local group Oz
local boolexpr O1
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)<=160 then
set Me=GetLocationX(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),3))
set Np=GetLocationY(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),3))
set Nq=GetUnitX(NR)
set Ns=GetUnitY(NR)
set Nt=Atan2(Np-Ns,Me-Nq)
set Ov=nK(GetUnitX(NR)+7*Cos(Nt))
set Ow=nL(GetUnitY(NR)+7*Sin(Nt))
set Ox=Location(Ov,Ow)
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),0,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),0)+1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),0)==8 then
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),0,0)
set Oy=""
if GetOwningPlayer(Hw)==GetLocalPlayer() then
set Oy="war3mapImported\\Rock Slam.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Oy,Ox))
endif
if IsTerrainPathable(GetLocationX(Ox),GetLocationY(Ox),PATHING_TYPE_WALKABILITY)==false then
call SetUnitPositionLoc(NR,Ox)
call SetUnitPositionLoc(Hw,Ox)
set Oz=CreateGroup()
set O1=Condition(function mq)
call GroupEnumUnitsInRange(Oz,GetLocationX(Ox),GetLocationY(Ox),300,O1)
set Ps=Hw
if GetUnitAbilityLevel(Hw,$4131334E)>=1 then
set Nw=R2I(I2R(10000+GetHeroStr(Hw,true)*15)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1])
else
set Nw=R2I(I2R(500*GetUnitAbilityLevel(Hw,$4131334D)+GetHeroStr(Hw,true)*10)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1])
endif
call ForGroup(Oz,function x2)
call DestroyGroup(Oz)
call DestroyBoolExpr(O1)
set Oz=null
set O1=null
else
call SetUnitVertexColor(Hw,255,255,255,255)
call PauseUnit(Hw,false)
call KillUnit(NR)
call RemoveUnit(NR)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4131375A,true)
call UnitRemoveAbility(Hw,$4131375A)
call UnitRemoveAbility(Hw,$4230314D)
call RemoveLocation(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ox)
set Ox=null
endif
else
call SetUnitVertexColor(Hw,255,255,255,255)
call PauseUnit(Hw,false)
call KillUnit(NR)
call RemoveUnit(NR)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4131375A,true)
call UnitRemoveAbility(Hw,$4131375A)
call UnitRemoveAbility(Hw,$4230314D)
call RemoveLocation(LoadLocationHandle(Nr,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
endfunction
function x4 takes nothing returns nothing
local unit Hw=GetEnumUnit()
local unit NS=GetTriggerUnit()
if GetUnitAbilityLevel(Hw,$42303639)>=1 then
set Nw=Nw*2
endif
call mt(NS,Hw,Nw)
call IssueTargetOrder(Hw,"attack",NS)
set Hw=null
set NS=null
endfunction
function x5 takes nothing returns nothing
local unit Hw=GetEnumUnit()
local unit NS=Ps
local location Hv=GetUnitLoc(NS)
local real MF=GetLocationX(Hv)
local real MG=GetLocationY(Hv)
local real Pv=GetUnitX(Hw)
local real Pw=GetUnitY(Hw)
local real NU=Atan2(MG-Pw,MF-Pv)
local real Py=nK(GetUnitX(Hw)+50*Cos(NU))
local real Pz=nL(GetUnitY(Hw)+50*Sin(NU))
local location Me
local real Hd
if nM(Hv,Location(Pv,Pw))>=400 then
set Me=Location(Py,Pz)
call SetUnitPositionLoc(Hw,Me)
call RemoveLocation(Me)
set Me=null
endif
set Hd=I2R(Nw)
call mt(NS,Hw,R2I(Hd)/100)
call RemoveLocation(Hv)
set Hv=null
set Hw=null
set NS=null
endfunction
function x6 takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local location Me
local group Np
local boolexpr Nq
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
set Me=GetUnitLoc(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2))
set Np=CreateGroup()
set Nq=Condition(function mq)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),430,Nq)
set Ps=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2)
set Nw=R2I(I2R(100*GetUnitAbilityLevel(Hw,$41303048)+GetHeroStr(Hw,true))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1])
call ForGroup(Np,function x5)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
set Np=null
set Nq=null
call RemoveLocation(Me)
set Me=null
else
call RemoveUnit(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),2))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function x7 takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit NR
local location Hv
local location Nl
local timer He
local group Nb
local boolexpr Vz
local integer MC
local real NU
if GetSpellAbilityId()==$41303048 then
set N0[GetPlayerId(GetOwningPlayer(Hw))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hw,$42303741)>=1 then
if GetUnitState(Hw,UNIT_STATE_MANA)>=GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hw,"origin"))
set NU=I2R(GetHeroStr(Hw,true))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
call mv(Hw,R2I(NU))
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20)
else
set N0[GetPlayerId(GetOwningPlayer(Hw))]=0
call IssueImmediateOrder(Hw,"unimmolation")
endif
endif
set Hv=GetUnitLoc(Hw)
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Hv,0)
call AddSpecialEffectTarget("war3mapImported\\Alarm.mdx",NR,"origin")
call SetUnitVertexColor(NR,255,0,255,150)
call SetUnitPathing(NR,false)
call SetUnitScale(NR,4,4,4)
call SetUnitFlyHeight(NR,0,0)
call UnitAddAbility(NR,$41726176)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call SaveInteger(Nr,GetHandleId(He),1,501)
call SaveUnitHandle(Nr,GetHandleId(He),2,NR)
call TimerStart(He,.01,true,function x6)
call RemoveLocation(Hv)
set Hv=null
set NR=null
set He=null
elseif GetSpellAbilityId()==$41304342 or GetSpellAbilityId()==$41304532 then
set N0[GetPlayerId(GetOwningPlayer(Hw))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hw,$42303741)>=1 then
if GetUnitState(Hw,UNIT_STATE_MANA)>=GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hw,"origin"))
set NU=I2R(GetHeroStr(Hw,true))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
call mv(Hw,R2I(NU))
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20)
else
set N0[GetPlayerId(GetOwningPlayer(Hw))]=0
call IssueImmediateOrder(Hw,"unimmolation")
endif
endif
set Hv=GetSpellTargetLoc()
set Nb=CreateGroup()
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),350,Vz)
if GetUnitAbilityLevel(Hw,$41304342)>=1 then
set NU=I2R(200*GetUnitAbilityLevel(Hw,$41304342)+R2I(GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*.5))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
else
set NU=I2R(3000+R2I(GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*.7))*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
endif
set Nw=R2I(NU)
call ForGroup(Nb,function x4)
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
set Nb=null
set Vz=null
call RemoveLocation(Hv)
set Hv=null
elseif GetSpellAbilityId()==$41304348 then
set N0[GetPlayerId(GetOwningPlayer(Hw))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hw,$42303741)>=1 then
if GetUnitState(Hw,UNIT_STATE_MANA)>=GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hw,"origin"))
set NU=I2R(GetHeroStr(Hw,true))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
call mv(Hw,R2I(NU))
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20)
else
set N0[GetPlayerId(GetOwningPlayer(Hw))]=0
call IssueImmediateOrder(Hw,"unimmolation")
endif
endif
set NR=GetSpellTargetUnit()
set Hw=MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
set NU=I2R(200*GetUnitAbilityLevel(Hw,$41304348)+GetHeroStr(Hw,true)*7)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
call mt(Hw,NR,R2I(NU))
set NU=I2R(100*GetUnitAbilityLevel(Hw,$41304348)+R2I(GetUnitState(Hw,UNIT_STATE_LIFE)*.15))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
call mv(Hw,R2I(NU))
elseif GetSpellAbilityId()==$41304533 then
set N0[GetPlayerId(GetOwningPlayer(Hw))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hw,$42303741)>=1 then
if GetUnitState(Hw,UNIT_STATE_MANA)>=GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hw,"origin"))
set NU=I2R(GetHeroStr(Hw,true))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
call mv(Hw,R2I(NU))
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20)
else
set N0[GetPlayerId(GetOwningPlayer(Hw))]=0
call IssueImmediateOrder(Hw,"unimmolation")
endif
endif
set NR=GetSpellTargetUnit()
set Hw=MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
set NU=I2R(3000+GetHeroStr(Hw,true)*10)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
call mt(Hw,NR,R2I(NU))
set NU=I2R(1000+R2I(GetUnitState(Hw,UNIT_STATE_LIFE)*.25))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
call mv(Hw,R2I(NU))
elseif GetSpellAbilityId()==$4131334C then
set N0[GetPlayerId(GetOwningPlayer(Hw))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hw,$42303741)>=1 then
if GetUnitState(Hw,UNIT_STATE_MANA)>=GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hw,"origin"))
set NU=I2R(GetHeroStr(Hw,true))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
call mv(Hw,R2I(NU))
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20)
else
set N0[GetPlayerId(GetOwningPlayer(Hw))]=0
call IssueImmediateOrder(Hw,"unimmolation")
endif
endif
elseif GetSpellAbilityId()==$4131334D or GetSpellAbilityId()==$4131334E then
set N0[GetPlayerId(GetOwningPlayer(Hw))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hw,$42303741)>=1 then
if GetUnitState(Hw,UNIT_STATE_MANA)>=GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hw,"origin"))
set NU=I2R(GetHeroStr(Hw,true))*Ng[GetPlayerId(GetOwningPlayer(Hw))+1]
call mv(Hw,R2I(NU))
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MANA)-GetUnitState(Hw,UNIT_STATE_MAX_MANA)/20)
else
set N0[GetPlayerId(GetOwningPlayer(Hw))]=0
call IssueImmediateOrder(Hw,"unimmolation")
endif
endif
call SetUnitVertexColor(Hw,0,0,0,0)
call UnitAddAbility(Hw,$4131375A)
set Nl=GetSpellTargetLoc()
call IssueImmediateOrder(Hw,"windwalk")
call SetPlayerAbilityAvailable(GetOwningPlayer(Hw),$4131375A,false)
call PauseUnit(Hw,true)
set Hv=GetUnitLoc(Hw)
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Hv,GetUnitFacing(Hw))
call SetUnitScale(NR,1.5,1.5,1.5)
call AddSpecialEffectTarget("war3mapImported\\Sherum2.mdx",NR,"chest")
call AddSpecialEffectTarget("war3mapImported\\Valiant Charge Void.mdx",NR,"origin")
call GroupClear(UP[GetPlayerId(GetOwningPlayer(Hw))])
set He=CreateTimer()
call SaveInteger(Nr,GetHandleId(He),1,200)
call SaveInteger(Nr,GetHandleId(He),0,0)
call SaveUnitHandle(Nr,GetHandleId(He),2,Hw)
call SaveLocationHandle(Nr,GetHandleId(He),3,Nl)
call SaveUnitHandle(Nr,GetHandleId(He),7,NR)
call TimerStart(He,.007,true,function x3)
elseif GetSpellAbilityId()==$4131334F then
if GetUnitAbilityLevel(Hw,N0[GetPlayerId(GetOwningPlayer(Hw))+11])>=1 then
set MC=GetUnitAbilityLevel(Hw,N0[GetPlayerId(GetOwningPlayer(Hw))+11])
call UnitRemoveAbility(Hw,N0[GetPlayerId(GetOwningPlayer(Hw))+11])
call UnitAddAbility(Hw,N0[GetPlayerId(GetOwningPlayer(Hw))+11])
call SetUnitAbilityLevel(Hw,N0[GetPlayerId(GetOwningPlayer(Hw))+11],MC)
call nZ(Hw,Hw,"Reset "+GetObjectName(N0[GetPlayerId(GetOwningPlayer(Hw))+11]),.028,255,0,255,0)
endif
endif
set He=null
set Nl=null
set Hv=null
set NR=null
set Hw=null
endfunction
function x8 takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(He,function x7)
set He=null
endfunction
function x9 takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nx=GetSpellTargetUnit()
local unit NR
local location Hv=GetUnitLoc(Nx)
local location Nl
local integer MC
local integer Pf=1
local integer Hd=0
if GetSpellAbilityId()==$41314434 then
if GetUnitTypeId(Hw)==$55303133 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Void.mdx",Hw,"origin"))
endif
loop
set Nl=PolarProjectionBJ(Hv,256,Hd)
if GetUnitTypeId(Hw)==$55303133 then
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303750,Nl,0)
else
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303333,Nl,0)
endif
call SetUnitVertexColor(NR,255,255,255,100)
call m5(NR,7)
if GetUnitAbilityLevel(Hw,$41314433)>=1 then
set MC=120*GetUnitAbilityLevel(Hw,$41314434)+GetHeroAgi(Hw,true)+GetHeroAgi(Hw,true)/5
set MC=MC+MC*(UJ[GetPlayerId(GetOwningPlayer(Hw))+1]/5)/100
if GetUnitAbilityLevel(Hw,$41304359)>=1 then
call UnitAddAbility(NR,$41304359)
call SetUnitAbilityLevel(NR,$41304359,GetUnitAbilityLevel(Hw,$41304359))
call UnitAddAbility(NR,$41303435)
elseif GetUnitAbilityLevel(Hw,$41304556)>=1 then
call UnitAddAbility(NR,$41304556)
call UnitAddAbility(NR,$41303435)
endif
else
if GetUnitAbilityLevel(Hw,$41304359)>=1 then
call UnitAddAbility(NR,$41304359)
call SetUnitAbilityLevel(NR,$41304359,GetUnitAbilityLevel(Hw,$41304359))
elseif GetUnitAbilityLevel(Hw,$41304556)>=1 then
call UnitAddAbility(NR,$41304556)
endif
set MC=100*GetUnitAbilityLevel(Hw,$41314434)+GetHeroAgi(Hw,true)
set MC=MC+MC*(UJ[GetPlayerId(GetOwningPlayer(Hw))+1]/5)/100
endif
call nc(NR,MC)
call UnitAddAbility(NR,$416C6F63)
call IssueTargetOrder(NR,"attack",Nx)
set Hd=Hd+120
set Pf=Pf+1
exitwhen Pf>=4
endloop
elseif GetSpellAbilityId()==$41314234 then
if GetUnitTypeId(Hw)==$55303133 then
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303750,Hv,0)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Void.mdx",Hw,"origin"))
else
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303333,Hv,0)
endif
call SetUnitVertexColor(NR,255,0,0,100)
if GetUnitAbilityLevel(Hw,$41314433)>=1 then
set MC=120+GetHeroAgi(Hw,true)*12/5
else
set MC=100+GetHeroAgi(Hw,true)*2
endif
set MC=MC+MC*(UJ[GetPlayerId(GetOwningPlayer(Hw))+1]/5)/100
call nc(NR,MC)
call UnitAddAbility(NR,$41314235)
call UnitAddAbility(NR,$41304948)
call UnitAddAbility(NR,$416C6F63)
call IssueTargetOrder(NR,"attack",Nx)
call m5(NR,15)
call TriggerSleepAction(15)
call mv(Hw,R2I(GetUnitState(Hw,UNIT_STATE_MAX_LIFE))/4)
call mw(Hw,R2I(GetUnitState(Hw,UNIT_STATE_MAX_MANA))/4)
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
set Hw=null
set Nx=null
set NR=null
endfunction
function yB takes nothing returns nothing
local integer MC=0
local integer Me
loop
if GetUnitAbilityLevel(MV[MC],$41314433)>=1 then
set Me=GetUnitAbilityLevel(MV[MC],$41314433)
call UnitRemoveAbility(MV[MC],$41314433)
call UnitAddAbility(MV[MC],$41304846)
call SetUnitAbilityLevel(MV[MC],$41304846,Me)
endif
set MC=MC+1
exitwhen MC>7
endloop
endfunction
function yC takes nothing returns nothing
local integer MC=0
local integer Me
loop
if GetUnitAbilityLevel(MV[MC],$41304846)>=1 then
set Me=GetUnitAbilityLevel(MV[MC],$41304846)
call UnitRemoveAbility(MV[MC],$41304846)
call UnitAddAbility(MV[MC],$41314433)
call SetUnitAbilityLevel(MV[MC],$41314433,Me)
endif
set MC=MC+1
exitwhen MC>7
endloop
endfunction
function yD takes nothing returns nothing
local unit Hw=GetAttacker()
local location Me
local unit Np
local integer Nq
if IsUnitEnemy(Hw,GetOwningPlayer(GetTriggerUnit()))==true then
if GetUnitAbilityLevel(Hw,$4130435A)>=1 then
if GetRandomInt(1,10)==1 then
set Me=GetUnitLoc(Hw)
if GetUnitTypeId(Hw)==$55303133 then
set Np=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303750,Me,0)
else
set Np=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303333,Me,0)
endif
call SetUnitVertexColor(Np,255,255,255,100)
call m5(Np,3)
if GetUnitAbilityLevel(Hw,$41314433)>=1 then
set Nq=120*GetUnitAbilityLevel(Hw,$4130435A)+GetHeroAgi(Hw,true)+GetHeroAgi(Hw,true)/5
set Nq=Nq+Nq*(UJ[GetPlayerId(GetOwningPlayer(Hw))+1]/5)/100
if GetUnitAbilityLevel(Hw,$41304359)>=1 then
call UnitAddAbility(Np,$41304359)
call SetUnitAbilityLevel(Np,$41304359,GetUnitAbilityLevel(Hw,$41304359))
call UnitAddAbility(Np,$41303435)
elseif GetUnitAbilityLevel(Hw,$41304556)>=1 then
call UnitAddAbility(Np,$41304556)
call UnitAddAbility(Np,$41303435)
endif
else
if GetUnitAbilityLevel(Hw,$41304359)>=1 then
call UnitAddAbility(Np,$41304359)
call SetUnitAbilityLevel(Np,$41304359,GetUnitAbilityLevel(Hw,$41304359))
elseif GetUnitAbilityLevel(Hw,$41304556)>=1 then
call UnitAddAbility(Np,$41304556)
endif
set Nq=100*GetUnitAbilityLevel(Hw,$4130435A)+GetHeroAgi(Hw,true)
set Nq=Nq+Nq*(UJ[GetPlayerId(GetOwningPlayer(Hw))+1]/5)/100
endif
call nc(Np,Nq)
call UnitAddAbility(Np,$416C6F63)
call IssueTargetOrder(Np,"attack",GetTriggerUnit())
endif
elseif GetUnitAbilityLevel(Hw,$41304555)>=1 then
if GetRandomInt(1,10)==1 then
set Me=GetUnitLoc(Hw)
if GetUnitTypeId(Hw)==$55303133 then
set Np=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303750,Me,0)
else
set Np=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303333,Me,0)
endif
call SetUnitVertexColor(Np,255,255,255,100)
call m5(Np,3)
if GetUnitAbilityLevel(Hw,$41314433)>=1 then
set Nq=1800+GetHeroAgi(Hw,true)*3/2+GetHeroAgi(Hw,true)*3/2/5
set Nq=Nq+Nq*(UJ[GetPlayerId(GetOwningPlayer(Hw))+1]/5)/100
if GetUnitAbilityLevel(Hw,$41304359)>=1 then
call UnitAddAbility(Np,$41304359)
call SetUnitAbilityLevel(Np,$41304359,GetUnitAbilityLevel(Hw,$41304359))
call UnitAddAbility(Np,$41305539)
elseif GetUnitAbilityLevel(Hw,$41304556)>=1 then
call UnitAddAbility(Np,$41304556)
call UnitAddAbility(Np,$41305539)
endif
else
set Nq=1500+GetHeroAgi(Hw,true)*3/2
set Nq=Nq+Nq*(UJ[GetPlayerId(GetOwningPlayer(Hw))+1]/5)/100
if GetUnitAbilityLevel(Hw,$41304359)>=1 then
call UnitAddAbility(Np,$41304359)
call SetUnitAbilityLevel(Np,$41304359,GetUnitAbilityLevel(Hw,$41304359))
elseif GetUnitAbilityLevel(Hw,$41304556)>=1 then
call UnitAddAbility(Np,$41304556)
endif
endif
call nc(Np,Nq)
call UnitAddAbility(Np,$416C6F63)
call IssueTargetOrder(Np,"attack",GetTriggerUnit())
endif
endif
call RemoveLocation(Me)
set Me=null
set Np=null
endif
set Hw=null
endfunction
function yE takes nothing returns nothing
local trigger Xe
local trigger Xf
local trigger Xg
set Xd=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xd,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(Xd,function yD)
set Xe=CreateTrigger()
call TriggerRegisterGameStateEventTimeOfDay(Xe,EQUAL,18.)
call TriggerAddAction(Xe,function yC)
set Xf=CreateTrigger()
call TriggerRegisterGameStateEventTimeOfDay(Xf,EQUAL,6.)
call TriggerAddAction(Xf,function yB)
set Xg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xg,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xg,function x9)
set Xg=null
set Xf=null
set Xe=null
endfunction
function yF takes nothing returns boolean
if not (IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==true) then
return false
endif
if not (GetUnitAbilityLevel(GetAttacker(),$41313245)>=1) then
return false
endif
return true
endfunction
function yG takes nothing returns nothing
call UnitDamageTargetBJ(GetAttacker(),GetTriggerUnit(),I2R(GetHeroAgi(GetAttacker(),true))/5.*Ne[GetConvertedPlayerId(GetOwningPlayer(GetAttacker()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectTargetUnitBJ("chest",GetTriggerUnit(),"Abilities\\Weapons\\HydraliskImpact\\T_HydraliskImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function yH takes nothing returns nothing
set Xh=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xh,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(Xh,Condition(function yF))
call TriggerAddAction(Xh,function yG)
endfunction
function yI takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function yJ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function yK takes nothing returns boolean
return GetBooleanAnd(yI(),yJ())
endfunction
function yL takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Objects\\Spawnmodels\\Orc\\Orcblood\\BattrollBlood.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313244))*I2R(GetHeroAgi(GetTriggerUnit(),true))*Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function yM takes nothing returns boolean
if not (GetSpellAbilityId()==$41313244) then
return false
endif
return true
endfunction
function yN takes nothing returns boolean
if not (GetSpellAbilityId()==$41314435) then
return false
endif
return true
endfunction
function yO takes nothing returns nothing
local real Me
local integer Np
if yM() then
set Ud=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(500.,Ud,Condition(function yK))
call ForGroupBJ(ST,function yL)
call RemoveLocation(Ud)
call DestroyGroup(ST)
call UnitAddAbilityBJ($41313245,GetTriggerUnit())
set Me=GetFloatGameState(GAME_STATE_TIME_OF_DAY)
call SetTimeOfDay(18.)
call TriggerSleepAction(8.)
call UnitRemoveAbilityBJ($41313245,GetTriggerUnit())
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,Me)
if Me>6 and Me<18 then
set Np=GetUnitAbilityLevel(GetTriggerUnit(),$41314433)
call UnitRemoveAbility(GetTriggerUnit(),$41314433)
call UnitAddAbility(GetTriggerUnit(),$41304846)
call SetUnitAbilityLevel(GetTriggerUnit(),$41304846,Np)
endif
else
endif
if yN() then
set Me=GetFloatGameState(GAME_STATE_TIME_OF_DAY)
call SetTimeOfDay(18.)
call TriggerSleepAction(30.)
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,Me)
if Me>6 and Me<18 then
set Np=GetUnitAbilityLevel(GetTriggerUnit(),$41314433)
call UnitRemoveAbility(GetTriggerUnit(),$41314433)
call UnitAddAbility(GetTriggerUnit(),$41304846)
call SetUnitAbilityLevel(GetTriggerUnit(),$41304846,Np)
endif
else
endif
endfunction
function yP takes nothing returns nothing
set Xi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xi,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xi,function yO)
endfunction
function yQ takes nothing returns boolean
if not (GetSpellAbilityId()==$41313239) then
return false
endif
return true
endfunction
function yR takes nothing returns nothing
call SetUnitManaPercentBJ(GetTriggerUnit(),0.)
set Wh[GetConvertedPlayerId(GetTriggerPlayer())]=GetTriggerUnit()
set SX[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
set SZ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=0
call StartTimerBJ(SY,true,1.)
if GetUnitTypeId(GetTriggerUnit())==$4F303052 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Eternal Tribunal.mdx",GetTriggerUnit(),"chest"))
endif
endfunction
function yS takes nothing returns nothing
set Xj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xj,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Xj,Condition(function yQ))
call TriggerAddAction(Xj,function yR)
endfunction
function yT takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(Wh[TZ]))==true
endfunction
function yU takes nothing returns boolean
if not (GetUnitTypeId(Wh[TZ])==$4F303052) then
return false
endif
return true
endfunction
function yV takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(Wh[TZ],true))/15.*I2R(GetUnitAbilityLevel(Wh[TZ],$41313239))*TS[GetConvertedPlayerId(GetOwningPlayer(Wh[TZ]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+200.*I2R(GetUnitAbilityLevel(Wh[TZ],$41313239))*TS[GetConvertedPlayerId(GetOwningPlayer(Wh[TZ]))])
if yU() then
call AddSpecialEffectTargetUnitBJ("origin",GetEnumUnit(),"war3mapImported\\Blue Lightning.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
else
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endif
endfunction
function yW takes nothing returns boolean
if not (SZ[TZ]<=27) then
return false
endif
if not (SX[TZ]==true) then
return false
endif
return true
endfunction
function yX takes nothing returns nothing
set TZ=1
loop
exitwhen TZ>8
set SZ[TZ]=SZ[TZ]+1
if yW() then
set Xl[TZ]=GetUnitLoc(Wh[TZ])
set Tn[TZ]=GetUnitsInRangeOfLocMatching(700.,Xl[TZ],Condition(function yT))
call ForGroupBJ(Tn[TZ],function yV)
call RemoveLocation(Xl[TZ])
call DestroyGroup(Tn[TZ])
else
set SX[TZ]=false
set SZ[TZ]=0
set Wh[TZ]=null
endif
set TZ=TZ+1
endloop
endfunction
function yY takes nothing returns nothing
set Xk=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Xk,SY)
call TriggerAddAction(Xk,function yX)
endfunction
function yZ takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),UP[GetPlayerId(GetOwningPlayer(Ps))])==false then
call GroupAddUnit(UP[GetPlayerId(GetOwningPlayer(Ps))],GetEnumUnit())
call mv(GetEnumUnit(),Nw)
call mw(GetEnumUnit(),Nw/5)
endif
endfunction
function ya takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1)
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local location Me
local location Np
local group Nq
local boolexpr Ns
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),2)>=1 then
set Ps=Hw
set Nw=R2I(I2R(1000*GetUnitAbilityLevel(Hw,$41304435)+GetHeroInt(Hw,true)*2)*TS[GetPlayerId(GetOwningPlayer(Hw))+1])
set Me=GetUnitLoc(NR)
set Np=nN(Me,10,GetUnitFacing(NR))
if GetUnitTypeId(Hw)==$4F303052 then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl",Np))
else
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Radiance Nature.mdl",Np))
endif
call SetUnitPositionLoc(NR,Np)
set Nq=CreateGroup()
set Ns=Condition(function mp)
call GroupEnumUnitsInRange(Nq,GetLocationX(Me),GetLocationY(Me),300,Ns)
call ForGroup(Nq,function yZ)
call DestroyGroup(Nq)
call DestroyBoolExpr(Ns)
set Nq=null
set Ns=null
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
else
call RemoveUnit(NR)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
set NR=null
endfunction
function yb takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$41313542)
call DestroyEffect(LoadEffectHandle(Nr,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function yc takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit NR
local timer He
local group Nb
local boolexpr Vz
local real NT
local location Hv
if GetSpellAbilityId()==$41313056 then
set NR=GetSpellTargetUnit()
call UnitAddAbility(NR,$41313542)
call SetUnitAbilityLevel(NR,$41313542,GetUnitAbilityLevel(Hw,$41313056))
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,NR)
if GetUnitTypeId(Hw)==$4F303052 then
call SaveEffectHandle(Nr,GetHandleId(He),1,AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",NR,"chest"))
else
call SaveEffectHandle(Nr,GetHandleId(He),1,AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl",NR,"chest"))
endif
call TimerStart(He,10,false,function yb)
set He=null
elseif GetSpellAbilityId()==$4131305A then
set NR=GetSpellTargetUnit()
call UnitAddAbility(NR,$41313542)
call SetUnitAbilityLevel(NR,$41313542,11)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,NR)
if GetUnitTypeId(Hw)==$4F303052 then
call SaveEffectHandle(Nr,GetHandleId(He),1,AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",NR,"chest"))
else
call SaveEffectHandle(Nr,GetHandleId(He),1,AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl",NR,"chest"))
endif
call TimerStart(He,10,false,function yb)
set He=null
elseif GetSpellAbilityId()==$41313238 then
set NR=GetSpellTargetUnit()
if GetUnitTypeId(Hw)==$4F303052 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Blue Lightning.mdx",NR,"origin"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\GreatElderHydraLightningOrbV.107.mdx",NR,"chest"))
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",NR,"origin"))
endif
if IsUnitAlly(NR,GetOwningPlayer(Hw))==true then
set NT=I2R(200*GetUnitAbilityLevel(Hw,$41313238)+GetHeroInt(Hw,true)*1)*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
if GetUnitAbilityLevel(Hw,$42303743)>=1 and GetRandomInt(1,3)==1 then
call nZ(Hw,Hw,"Double!",.028,0,255,0,50)
set NT=NT*2
endif
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+NT)
set Hv=GetUnitLoc(NR)
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),500,Vz)
set Nw=R2I(NT)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
call RemoveLocation(Hv)
set Hv=null
set Nb=null
set Vz=null
else
set NT=I2R(200*GetUnitAbilityLevel(Hw,$41313238)+GetHeroInt(Hw,true)*3)*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
if GetUnitAbilityLevel(GetTriggerUnit(),$42303743)>=1 and GetRandomInt(1,3)==1 then
call nZ(Hw,Hw,"Double!",.028,0,255,0,50)
call UnitDamageTargetBJ(Hw,NR,NT*2,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
set NT=I2R(400*GetUnitAbilityLevel(Hw,$41313238)+GetHeroInt(Hw,true)*2)*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
else
call UnitDamageTargetBJ(Hw,NR,NT,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
set NT=I2R(200*GetUnitAbilityLevel(Hw,$41313238)+GetHeroInt(Hw,true)*1)*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
endif
set Hv=GetUnitLoc(NR)
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),500,Vz)
set Nw=R2I(NT)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
call RemoveLocation(Hv)
set Hv=null
set Nb=null
set Vz=null
endif
elseif GetSpellAbilityId()==$41313241 then
set NR=GetSpellTargetUnit()
if GetUnitTypeId(Hw)==$4F303052 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Blue Lightning.mdx",NR,"origin"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\GreatElderHydraLightningOrbV.107.mdx",NR,"chest"))
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",NR,"origin"))
endif
if IsUnitAlly(NR,GetOwningPlayer(Hw))==true then
set NT=I2R(3000+GetHeroInt(Hw,true)*2)*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
if GetUnitAbilityLevel(Hw,$42303743)>=1 and GetRandomInt(1,3)==1 then
call nZ(Hw,Hw,"Double!",.028,0,255,0,50)
set NT=NT*2
endif
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+NT)
set Hv=GetUnitLoc(NR)
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),500,Vz)
set Nw=R2I(NT)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
call RemoveLocation(Hv)
set Hv=null
set Nb=null
set Vz=null
else
set NT=I2R(4000+GetHeroInt(Hw,true)*5)*N1[GetPlayerId(GetOwningPlayer(Hw))+1]
if GetUnitAbilityLevel(GetTriggerUnit(),$42303743)>=1 and GetRandomInt(1,3)==1 then
call nZ(Hw,Hw,"Double!",.028,0,255,0,50)
call UnitDamageTargetBJ(Hw,NR,NT*2,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
set NT=I2R(6000+GetHeroInt(Hw,true)*4)*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
else
call UnitDamageTargetBJ(Hw,NR,NT,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
set NT=I2R(3000+GetHeroInt(Hw,true)*2)*TS[GetPlayerId(GetOwningPlayer(Hw))+1]
endif
set Hv=GetUnitLoc(NR)
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Hv),GetLocationY(Hv),500,Vz)
set Nw=R2I(NT)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
call DestroyBoolExpr(Vz)
call RemoveLocation(Hv)
set Hv=null
set Nb=null
set Vz=null
endif
elseif GetSpellAbilityId()==$41304435 then
set Hv=GetUnitLoc(Hw)
set NR=CreateUnitAtLoc(GetOwningPlayer(Hw),$68303739,Hv,GetUnitFacing(Hw))
call RemoveLocation(Hv)
set Hv=null
set Hv=GetSpellTargetLoc()
call SetUnitFacingToFaceLocTimed(NR,Hv,0)
if GetUnitTypeId(Hw)==$4F303052 then
call AddSpecialEffectTarget("war3mapImported\\GreatElderHydraLightningOrbV.107.mdx",NR,"chest")
else
call AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkSummoning\\DarkSummonMissile.mdl",NR,"chest")
endif
call SetUnitPathing(NR,false)
call GroupClear(UP[GetPlayerId(GetOwningPlayer(Hw))])
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,NR)
call SaveUnitHandle(Nr,GetHandleId(He),1,Hw)
call SaveInteger(Nr,GetHandleId(He),2,80)
call TimerStart(He,.01,true,function ya)
set He=null
call RemoveLocation(Hv)
set Hv=null
endif
set NR=null
set Hw=null
endfunction
function yd takes nothing returns nothing
set Xm=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xm,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xm,function yc)
endfunction
function ye takes nothing returns nothing
local unit Nf=GetTriggerUnit()
local location Hv=GetUnitLoc(Nf)
local location Nl
local integer MC
local integer Mc=GetPlayerId(GetOwningPlayer(Nf))
local real Me
if GetSpellAbilityId()==$4131434E or GetSpellAbilityId()==$41314253 or GetSpellAbilityId()==$41304353 then
set Me=800
set MC=0
loop
set Nl=GetUnitLoc(Xo[MC])
if DistanceBetweenPoints(Hv,Nl)<=800 then
call RemoveUnit(Xo[MC])
set Xo[MC]=null
if not UnitAlive(MV[MC]) then
call ReviveHero(MV[MC],GetLocationX(Nl),GetLocationY(Nl),false)
call SetUnitState(MV[MC],UNIT_STATE_LIFE,GetUnitState(MV[MC],UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(MV[MC],UNIT_STATE_MANA,GetUnitState(MV[MC],UNIT_STATE_MAX_MANA)*RMaxBJ(0,0)*.01)
endif
endif
set MC=MC+1
exitwhen MC>7
endloop
if RectContainsUnit(FL,Nf)==true then
set Xp[999]=Xp[999]+1
endif
if RectContainsUnit(GJ,Nf)==true then
set Xp[888]=Xp[888]+1
endif
endif
if GetSpellAbilityId()==$41304439 then
set Me=800
set MC=0
loop
set Nl=GetUnitLoc(Xo[MC])
if DistanceBetweenPoints(Hv,Nl)<=800 then
call RemoveUnit(Xo[MC])
set Xo[MC]=null
if not UnitAlive(MV[MC]) then
call ReviveHero(MV[MC],GetLocationX(Nl),GetLocationY(Nl),false)
call SetUnitState(MV[MC],UNIT_STATE_LIFE,GetUnitState(MV[MC],UNIT_STATE_MAX_LIFE)*RMaxBJ(0,70)*.01)
call SetUnitState(MV[MC],UNIT_STATE_MANA,GetUnitState(MV[MC],UNIT_STATE_MAX_MANA)*RMaxBJ(0,70)*.01)
endif
endif
set MC=MC+1
exitwhen MC>7
endloop
if RectContainsUnit(FL,Nf)==true then
set Xp[999]=Xp[999]+1
endif
if RectContainsUnit(GJ,Nf)==true then
set Xp[888]=Xp[888]+1
endif
endif
if GetSpellAbilityId()==$41313341 then
set MC=0
loop
set Nl=GetUnitLoc(Xo[MC])
if DistanceBetweenPoints(Hv,Nl)<=800 then
call RemoveUnit(Xo[MC])
set Xo[MC]=null
if not UnitAlive(MV[MC]) then
call ReviveHero(MV[MC],GetLocationX(Nl),GetLocationY(Nl),false)
call SetUnitState(MV[MC],UNIT_STATE_LIFE,GetUnitState(MV[MC],UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(MV[MC],UNIT_STATE_MANA,GetUnitState(MV[MC],UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
endif
endif
set MC=MC+1
exitwhen MC>7
endloop
if RectContainsUnit(FL,Nf)==true then
set Xp[999]=Xp[999]+1
endif
if RectContainsUnit(GJ,Nf)==true then
set Xp[888]=Xp[888]+1
endif
if GetUnitTypeId(Nf)==$4830364E then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ArcaneExplosionRoz.mdx",Hv))
else
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\WaterEnchant.mdx",Hv))
endif
endif
if GetSpellAbilityId()==$41304730 or GetSpellAbilityId()==$41304733 then
set MC=0
loop
set Nl=GetUnitLoc(Xo[MC])
if DistanceBetweenPoints(Hv,Nl)<=900 then
call RemoveUnit(Xo[MC])
set Xo[MC]=null
if not UnitAlive(MV[MC]) then
call ReviveHero(MV[MC],GetLocationX(Nl),GetLocationY(Nl),false)
call SetUnitState(MV[MC],UNIT_STATE_LIFE,GetUnitState(MV[MC],UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(MV[MC],UNIT_STATE_MANA,GetUnitState(MV[MC],UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
endif
endif
set MC=MC+1
exitwhen MC>7
endloop
if RectContainsUnit(FL,Nf)==true then
set Xp[999]=Xp[999]+1
endif
if RectContainsUnit(GJ,Nf)==true then
set Xp[888]=Xp[888]+1
endif
endif
if GetSpellAbilityId()==$41305552 or GetSpellAbilityId()==$41313953 then
set MC=0
loop
set Nl=GetUnitLoc(Xo[MC])
if DistanceBetweenPoints(Hv,Nl)<=800 then
call RemoveUnit(Xo[MC])
set Xo[MC]=null
if not UnitAlive(MV[MC]) then
call ReviveHero(MV[MC],GetLocationX(Nl),GetLocationY(Nl),false)
call SetUnitState(MV[MC],UNIT_STATE_LIFE,GetUnitState(MV[MC],UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(MV[MC],UNIT_STATE_MANA,GetUnitState(MV[MC],UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
endif
endif
set MC=MC+1
exitwhen MC>7
endloop
if RectContainsUnit(FL,Nf)==true then
set Xp[999]=Xp[999]+1
endif
if RectContainsUnit(GJ,Nf)==true then
set Xp[888]=Xp[888]+1
endif
endif
set Nf=null
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
endfunction
function yf takes nothing returns nothing
local trigger Xn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xn,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xn,function ye)
set Xn=null
endfunction
function yg takes nothing returns nothing
local location Me
if GetIssuedOrderId()==String2OrderIdBJ("attack") and GetOwningPlayer(GetOrderTargetUnit())!=Player(PLAYER_NEUTRAL_PASSIVE) and IsUnitAlly(GetOrderTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true then
set Me=GetUnitLoc(GetTriggerUnit())
call IssuePointOrderLoc(GetTriggerUnit(),"move",Me)
call RemoveLocation(Me)
set Me=null
endif
endfunction
function yh takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(He,function yg)
set He=null
endfunction
function yi takes nothing returns nothing
local location Hv
if GetClickedButton()==Xr[21] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=13 and IsUnitAliveBJ(IB)==true then
set Hv=Location(-12170.,-24100.)
endif
elseif GetClickedButton()==Xr[22] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=17 and IsUnitAliveBJ(H5)==true then
set Hv=Location(-10440.,-24100.)
endif
elseif GetClickedButton()==Xr[23] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=25 and IsUnitAliveBJ(IE)==true then
set Hv=Location(-8580.,-24000.)
endif
elseif GetClickedButton()==Xr[24] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=30 and IsUnitAliveBJ(II)==true then
set Hv=Location(-6666.,-24000.)
endif
elseif GetClickedButton()==Xr[25] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=38 and IsUnitAliveBJ(Hx)==true then
set Hv=Location(-4920.,-24000.)
endif
elseif GetClickedButton()==Xr[26] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=45 and IsUnitAliveBJ(H7)==true then
set Hv=Location(-2870.,-24000.)
endif
elseif GetClickedButton()==Xr[27] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=50 and IsUnitAliveBJ(IL)==true then
set Hv=Location(-840.,-24000.)
endif
elseif GetClickedButton()==Xr[9] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=22 then
set Hv=Location(1718.,5224.)
endif
elseif GetClickedButton()==Xr[8] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=52 then
set Hv=Location(18939,1505)
endif
elseif GetClickedButton()==Xr[5] then
set Hv=GetRectCenter(BH)
elseif GetClickedButton()==Xr[4] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=39 then
set Hv=Location(5470,320)
endif
elseif GetClickedButton()==Xr[3] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=25 then
set Hv=Location(-5350,4383)
endif
elseif GetClickedButton()==Xr[2] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=20 then
set Hv=Location(2740.,-4473.)
endif
elseif GetClickedButton()==Xr[1] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=5 then
set Hv=Location(-10600,-5000)
endif
elseif GetClickedButton()==Xr[6] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=29 then
set Hv=Location(-4900,12870)
endif
elseif GetClickedButton()==Xr[7] then
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=25 then
set Hv=GetRectCenter(F7)
endif
endif
call SetUnitPositionLoc(MV[GetPlayerId(GetTriggerPlayer())],Hv)
if GetLocalPlayer()==GetTriggerPlayer() then
call PanCameraToTimed(GetLocationX(Hv),GetLocationY(Hv),0)
endif
call RemoveLocation(Hv)
set Hv=null
endfunction
function yj takes nothing returns nothing
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call DialogDisplay(GetOwningPlayer(GetTriggerUnit()),Xq[2],true)
endif
endfunction
function yk takes nothing returns nothing
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call DialogDisplay(GetOwningPlayer(GetTriggerUnit()),Xq[1],true)
endif
endfunction
function yl takes nothing returns nothing
local trigger Xs
local trigger Xt
set Xq[1]=DialogCreate()
set Xq[2]=DialogCreate()
set Xr[5]=DialogAddButton(Xq[1],"|c00ffff00Суральд|r",0)
set Xr[1]=DialogAddButton(Xq[1],"|c0000ff00Лес Долорес|r (|c007d7d7d5 уровень|r)",1)
set Xr[2]=DialogAddButton(Xq[1],"|c00ff0000Терасса Творцов|r (|c007d7d7d20 уровень|r)",2)
set Xr[9]=DialogAddButton(Xq[1],"|cFF0080FFДжунгли Тайпан|r (|c007d7d7d22 уровень|r)",8)
set Xr[3]=DialogAddButton(Xq[1],"|c007d7d7dСтарое Кладбище|r (|c007d7d7d25 уровень|r)",3)
set Xr[7]=DialogAddButton(Xq[1],"|c0000ffffЗимняя Долина|r (|c007d7d7d25 уровень|r)",4)
set Xr[6]=DialogAddButton(Xq[1],"|c006969ffАрхипелаг|r (|c007d7d7d29 уровень|r)",5)
set Xr[4]=DialogAddButton(Xq[1],"|c00ff9696Орхест|r (|c007d7d7d39 уровень|r)",6)
set Xr[8]=DialogAddButton(Xq[1],"|c00ff7f00Пустошь|r (|c007d7d7d52 уровень|r)",7)
call DialogAddButton(Xq[1],"Отмена",8)
set Xr[21]=DialogAddButton(Xq[2],"|c00ff7f00Люк|r (|c007d7d7d13 уровень|r)",1)
set Xr[22]=DialogAddButton(Xq[2],"|c00ff7f00Каменный Гигант|r (|c007d7d7d17 уровень|r)",2)
set Xr[23]=DialogAddButton(Xq[2],"|c00ff7f00Айс|r (|c007d7d7d25 уровень|r)",3)
set Xr[24]=DialogAddButton(Xq[2],"|c00ff7f00Детерок|r (|c007d7d7d30 уровень|r)",4)
set Xr[25]=DialogAddButton(Xq[2],"|c00ff7f00Визирь|r (|c007d7d7d38 уровень|r)",5)
set Xr[26]=DialogAddButton(Xq[2],"|c00ff7f00Мамонт|r (|c007d7d7d45 уровень|r)",6)
set Xr[27]=DialogAddButton(Xq[2],"|c00ff7f00Акнорт|r (|c007d7d7d50 уровень|r)",7)
set Xr[28]=DialogAddButton(Xq[2],"Отмена",7)
set Xs=CreateTrigger()
call TriggerRegisterDialogEventBJ(Xs,Xq[1])
call TriggerRegisterDialogEventBJ(Xs,Xq[2])
call TriggerAddAction(Xs,function yi)
set Xt=CreateTrigger()
call TriggerRegisterEnterRectSimple(Xt,BG)
call TriggerRegisterEnterRectSimple(Xt,CW)
call TriggerRegisterEnterRectSimple(Xt,BJ)
call TriggerRegisterEnterRectSimple(Xt,BK)
call TriggerRegisterEnterRectSimple(Xt,BI)
call TriggerRegisterEnterRectSimple(Xt,BT)
call TriggerRegisterEnterRectSimple(Xt,Dm)
call TriggerRegisterEnterRectSimple(Xt,GT)
call TriggerRegisterEnterRectSimple(Xt,Dl)
call TriggerAddAction(Xt,function yk)
set Xt=null
set Xt=CreateTrigger()
call TriggerRegisterEnterRectSimple(Xt,CZ)
call TriggerAddAction(Xt,function yj)
set Xt=null
set Xs=null
endfunction
function ym takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
if not (IsUnitIllusion(GetTriggerUnit())==false) then
return false
endif
if not (GetUnitTypeId(GetTriggerUnit())!=$756C6F63) then
return false
endif
if not (GetUnitTypeId(GetTriggerUnit())!=$75303036) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$416C6F63)<1) then
return false
endif
if not (GetUnitTypeId(GetTriggerUnit())!=$6E676772) then
return false
endif
return true
endfunction
function yn takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function yo takes nothing returns boolean
if not (GetItemCharges(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$6F66726F))>=35) then
return false
endif
return true
endfunction
function yp takes nothing returns nothing
call SetItemCharges(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$6F66726F),GetItemCharges(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$6F66726F))+1)
if yo() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$6F66726F))
call UnitAddItemByIdSwapped($49304C36,GetEnumUnit())
else
endif
endfunction
function yq takes nothing returns nothing
local location Xv=GetUnitLoc(GetTriggerUnit())
local group Xw=GetUnitsInRangeOfLocMatching(1000.,Xv,Condition(function yn))
call ForGroupBJ(Xw,function yp)
call DestroyGroup(Xw)
call RemoveLocation(Xv)
set Xw=null
set Xv=null
endfunction
function yr takes nothing returns nothing
set Xu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xu,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Xu,Condition(function ym))
call TriggerAddAction(Xu,function yq)
endfunction
function ys takes nothing returns nothing
local unit X0=GetEnumUnit()
call AddHeroXP(X0,UG[2],false)
call nX(X0,"+"+I2S(R2I(UG[2]))+"EXP",.025,255,50,255)
set X0=null
endfunction
function yt takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true then
if IsUnitIllusion(GetFilterUnit())==false then
if GetUnitLevel(GetFilterUnit())>=UG[0] then
if GetUnitLevel(GetFilterUnit())<=UG[1] then
return true
endif
endif
endif
endif
return false
endfunction
function yu takes nothing returns nothing
local unit Hw=GetEnumUnit()
if nH(Hw,$4930554F) or nH(Hw,$49305553) or nH(Hw,$49305551) or nH(Hw,$49304E45) or nH(Hw,$49304E49) or nH(Hw,$49304E4A) or nH(Hw,$49304E48) or nH(Hw,$49304E47) or nH(Hw,$4930304C) or nH(Hw,$49304739) or nH(Hw,$49304E43) or nH(Hw,$49304E44) or nH(Hw,$49304E46) then
if GetRandomInt(1,10)==1 then
set Xy=Xy+Xy/5
endif
endif
set NK[GetPlayerId(GetOwningPlayer(Hw))+1]=NK[GetPlayerId(GetOwningPlayer(Hw))+1]+Xy*3
call nZ(Hw,Hw,"+"+I2S(Xy)+"G",.023,255,255,0,100)
if nH(Hw,$4930554F) or nH(Hw,$49305553) or nH(Hw,$49305551) or nH(Hw,$49304E45) or nH(Hw,$49304E49) or nH(Hw,$49304E4A) or nH(Hw,$49304E48) or nH(Hw,$49304E47) then
if GetRandomInt(1,50)==1 then
set NL[GetPlayerId(GetOwningPlayer(Hw))+1]=NL[GetPlayerId(GetOwningPlayer(Hw))+1]+Xz*3
call nZ(Hw,Hw,"+"+I2S(Xz)+"Blood!",.023,255,0,255,100)
endif
endif
set Hw=null
endfunction
function yv takes nothing returns nothing
local unit Uf=GetTriggerUnit()
local location Hv=GetUnitLoc(Uf)
local integer U6=GetUnitLevel(Uf)
local group Me
local boolexpr Np
local integer Nq
local real Ns
set Xy=U6
set Xz=U6
if GetOwningPlayer(Uf)==Player(PLAYER_NEUTRAL_AGGRESSIVE) then
if U6==1 then
set UG[0]=1
set UG[1]=12
set Me=CreateGroup()
set Np=Condition(function yt)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),800,Np)
call DestroyBoolExpr(Np)
set Nq=CountUnitsInGroup(Me)
set UG[2]=11+2*Nq
call ForGroup(Me,function ys)
call DestroyGroup(Me)
set Np=null
set Me=null
elseif U6==2 then
set UG[0]=13
set UG[1]=16
set Me=CreateGroup()
set Np=Condition(function yt)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),800,Np)
call DestroyBoolExpr(Np)
set Nq=CountUnitsInGroup(Me)
set UG[2]=18+3*Nq
call ForGroup(Me,function ys)
call DestroyGroup(Me)
set Np=null
set Me=null
elseif U6==3 then
set UG[0]=17
set UG[1]=21
set Me=CreateGroup()
set Np=Condition(function yt)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),800,Np)
call DestroyBoolExpr(Np)
set Nq=CountUnitsInGroup(Me)
set UG[2]=28+5*Nq
call ForGroup(Me,function ys)
call DestroyGroup(Me)
set Np=null
set Me=null
elseif U6==4 or U6==5 then
set UG[0]=22
set UG[1]=24
set Me=CreateGroup()
set Np=Condition(function yt)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),800,Np)
call DestroyBoolExpr(Np)
set Nq=CountUnitsInGroup(Me)
set UG[2]=34+6*Nq
call ForGroup(Me,function ys)
call DestroyGroup(Me)
set Np=null
set Me=null
elseif U6==6 then
set UG[0]=25
set UG[1]=28
set Me=CreateGroup()
set Np=Condition(function yt)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),800,Np)
call DestroyBoolExpr(Np)
set Nq=CountUnitsInGroup(Me)
set UG[2]=40+7*Nq
call ForGroup(Me,function ys)
call DestroyGroup(Me)
set Np=null
set Me=null
elseif U6==7 then
set UG[0]=29
set UG[1]=38
set Me=CreateGroup()
set Np=Condition(function yt)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),800,Np)
call DestroyBoolExpr(Np)
set Nq=CountUnitsInGroup(Me)
set UG[2]=47+9*Nq
call ForGroup(Me,function ys)
call DestroyGroup(Me)
set Np=null
set Me=null
elseif U6==8 then
set UG[0]=39
set UG[1]=41
set Ns=800.
set Me=CreateGroup()
set Np=Condition(function yt)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),800,Np)
call DestroyBoolExpr(Np)
set Nq=CountUnitsInGroup(Me)
set UG[2]=60+11*Nq
call ForGroup(Me,function ys)
call DestroyGroup(Me)
set Np=null
set Me=null
elseif U6==9 then
set UG[0]=42
set UG[1]=45
set Me=CreateGroup()
set Np=Condition(function yt)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),800,Np)
call DestroyBoolExpr(Np)
set Nq=CountUnitsInGroup(Me)
set UG[2]=63+11*Nq
call ForGroup(Me,function ys)
call DestroyGroup(Me)
set Np=null
set Me=null
elseif U6==10 then
set UG[0]=45
set UG[1]=49
set Me=CreateGroup()
set Np=Condition(function yt)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),800,Np)
call DestroyBoolExpr(Np)
set Nq=CountUnitsInGroup(Me)
set UG[2]=70+12*Nq
call ForGroup(Me,function ys)
call DestroyGroup(Me)
set Np=null
set Me=null
endif
if GetUnitAbilityLevel(Uf,$41305858)>=1 then
set Xy=Xy+U6*35
endif
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRange(Me,GetLocationX(Hv),GetLocationY(Hv),800,Np)
call DestroyBoolExpr(Np)
call ForGroup(Me,function yu)
call DestroyGroup(Me)
set Np=null
set Me=null
endif
call RemoveLocation(Hv)
set Hv=null
set Uf=null
endfunction
function yw takes nothing returns nothing
local trigger Xx=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xx,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Xx,function yv)
set Xx=null
endfunction
function yx takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0),$41305043)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function yy takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local real NT=GetEventDamage()
local real X2
local real MC
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local integer Nk=R2I(NT)
local location Me
local unit Np
local timer Nq
if GetUnitAbilityLevel(Hw,$42505345)>0 then
if nH(Hw,$75666C67) or nH(Hw,$6E666C67) or nH(Hw,$6F666C67) or nH(Hw,$73686377) then
call UnitRemoveAbility(Hw,$42505345)
endif
endif
if GetUnitAbilityLevel(Hw,$41304438)>0 and GetRandomInt(1,10)==1 then
set X2=I2R(GetUnitAbilityLevel(Hw,$41304438))*70
if NT>=X2 then
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)+X2))
call nX(Hw,"Block!",.022,10,10,10)
else
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)+NT))
call nX(Hw,"Block!",.022,10,10,10)
endif
endif
if GetUnitAbilityLevel(Hw,$42303737)>0 then
if GetUnitAbilityLevel(Hw,$42303134)>0 then
set MC=I2R(GetUnitAbilityLevel(Hw,$41304144))*.15
set X2=NT*MC
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)+X2))
endif
if GetUnitAbilityLevel(Hw,$41303030)>0 or GetUnitAbilityLevel(Hw,$41304652)>0 then
if GetRandomInt(1,10)==1 then
set X2=I2R(GetUnitAbilityLevel(Hw,$41303030)*120+GetHeroStr(Hw,true)+GetHeroInt(Hw,true))/4
if nH(Hw,$49303948) or nH(Hw,$49303950) then
set X2=X2+200
elseif nH(Hw,$7373616E) or nH(Hw,$49304A59) then
set X2=X2+300
elseif nH(Hw,$49304D57) or nH(Hw,$49305744) then
set X2=X2+600
endif
if NT>=X2 then
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)+X2))
call nX(Hw,"Block! ("+I2S(R2I(X2))+")",.023,255,100,100)
else
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)+NT))
call nX(Hw,"Block! ("+I2S(R2I(NT))+")",.023,255,100,100)
endif
endif
endif
elseif GetUnitAbilityLevel(Hw,$42303141)>0 and GetRandomInt(1,3)==1 then
set X2=NT*(14+I2R(GetUnitAbilityLevel(Hw,$41303934)))/100
call SetUnitState(Hw,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hw,UNIT_STATE_LIFE)+X2))
call nX(Hw,"Block! ("+I2S(R2I(X2))+")",.023,255,100,100)
elseif GetUnitAbilityLevel(Hw,$4230384F)>0 and Pr[Mc]==true then
if Pq[Mc]>0 then
if Nk<Pq[Mc] then
set Pq[Mc]=Pq[Mc]-Nk
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+I2R(Nk))
call nX(Hw,"Щит: "+I2S(Pq[Mc])+"!",.023,255,100,100)
else
set Pr[Mc]=false
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+I2R(Pq[Mc]))
call nX(Hw,"Щит: "+I2S(Pq[Mc])+"!",.023,255,100,100)
set Pq[Mc]=0
call UnitRemoveAbility(Hw,$4230384F)
endif
else
set Pr[Mc]=false
set Pq[Mc]=0
call UnitRemoveAbility(Hw,$4230384F)
endif
elseif GetUnitAbilityLevel(Hw,$4130584B)>0 and GetUnitAbilityLevel(Hw,$41313436)>=1 then
if GetUnitAbilityLevel(Hw,$41313148)>=1 then
set X2=NT/3
else
set X2=NT/2
endif
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+X2)
call nX(Hw,"Block: "+I2S(R2I(X2))+"!",.023,0,255,255)
elseif GetUnitAbilityLevel(Hw,$41313155)>=1 and GetUnitAbilityLevel(Hw,$41313436)>=1 and GetRandomInt(1,10)==1 then
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+NT)
call nX(Hw,"Block!",.03,255,0,255)
elseif GetUnitAbilityLevel(Hw,$42303248)>=1 and GetUnitAbilityLevel(Hw,$4131334C)>=1 and GetUnitAbilityLevel(GetEventDamageSource(),$416C6F63)==0 and not IsUnitType(GetEventDamageSource(),UNIT_TYPE_MAGIC_IMMUNE) then
if GetUnitAbilityLevel(GetEventDamageSource(),$42303639)==0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl",Hw,"chest"))
set Me=GetUnitLoc(GetEventDamageSource())
set Np=CreateUnitAtLoc(Player(0),$68303739,Me,0)
call m5(Np,1)
call UnitAddAbility(Np,$4131324E)
call IssueTargetOrder(Np,"creepthunderbolt",GetEventDamageSource())
call RemoveLocation(Me)
set Me=null
set X2=I2R(200*GetUnitAbilityLevel(Hw,$4131334C)+GetHeroStr(Hw,true)*5)*Nh[GetPlayerId(GetOwningPlayer(Hw))+1]
call mt(Np,GetEventDamageSource(),R2I(X2))
set Np=null
endif
endif
if GetUnitAbilityLevel(Hw,$42303248)>=1 then
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+NT)
endif
if GetUnitAbilityLevel(Hw,$42303236)>=1 then
set X2=NT/10+I2R(GetUnitAbilityLevel(Hw,$42303236)*25)
if X2>NT then
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+NT)
else
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_LIFE)+X2)
endif
endif
if nH(Hw,$72756D70) and GetUnitAbilityLevel(GetEventDamageSource(),$416C6F63)==0 then
if GetUnitAbilityLevel(Hw,$41305043)==0 then
call UnitAddAbility(Hw,$41305043)
set X2=GetHeroStr(Hw,true)+GetHeroAgi(Hw,true)+GetHeroInt(Hw,true)
call mu(Hw,GetEventDamageSource(),R2I(X2))
elseif GetUnitAbilityLevel(Hw,$41305043)==1 then
call SetUnitAbilityLevel(Hw,$41305043,2)
set Nq=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(Nq),0,Hw)
call TimerStart(Nq,1,false,function yx)
set Nq=null
endif
endif
set Hw=null
endfunction
function yz takes nothing returns nothing
set X1=CreateTrigger()
call TriggerAddAction(X1,function yy)
endfunction
function y0 takes unit Hw,integer X5,integer X6,integer VF,integer X7,integer PS,integer X8,integer VG,integer X9,integer VH,integer YB,integer VI,integer YC returns nothing
local integer X4=GetUnitLevel(Hw)
if X6!=$41314433 and X6!=$4131314B then
call UnitAddAbility(Hw,X6)
endif
if GetUnitAbilityLevel(Hw,VF)==0 and GetUnitAbilityLevel(Hw,X7)==0 then
call UnitAddAbility(Hw,VF)
endif
if GetUnitAbilityLevel(Hw,PS)==0 and GetUnitAbilityLevel(Hw,X8)==0 then
call UnitAddAbility(Hw,PS)
endif
if GetUnitAbilityLevel(Hw,VG)==0 and GetUnitAbilityLevel(Hw,X9)==0 and X4>=10 then
call UnitAddAbility(Hw,VG)
endif
if GetUnitAbilityLevel(Hw,VH)==0 and GetUnitAbilityLevel(Hw,YB)==0 and X4>=20 then
call UnitAddAbility(Hw,VH)
endif
if GetUnitAbilityLevel(Hw,VI)==0 and GetUnitAbilityLevel(Hw,YC)==0 and X4>=30 then
call UnitAddAbility(Hw,VI)
endif
call TriggerSleepAction(1.5)
if GetUnitAbilityLevel(Hw,$41303853)>=1 and X4>=51 then
if X7!=0 then
call UnitRemoveAbility(Hw,VF)
call UnitAddAbility(Hw,X7)
endif
if X8!=0 then
call UnitRemoveAbility(Hw,PS)
call UnitAddAbility(Hw,X8)
endif
if X9!=0 then
call UnitRemoveAbility(Hw,VG)
call UnitAddAbility(Hw,X9)
endif
if YB!=0 then
call UnitRemoveAbility(Hw,VH)
call UnitAddAbility(Hw,YB)
endif
if YC!=0 then
call UnitRemoveAbility(Hw,VI)
call UnitAddAbility(Hw,YC)
endif
endif
call SetUnitAbilityLevel(Hw,X5,X4/5)
call SetUnitAbilityLevel(Hw,X6,X4/5)
call SetUnitAbilityLevel(Hw,VF,X4/3)
call SetUnitAbilityLevel(Hw,PS,X4/3)
call SetUnitAbilityLevel(Hw,VG,(X4-5)/3)
call SetUnitAbilityLevel(Hw,VH,(X4-15)/9)
call SetUnitAbilityLevel(Hw,VI,(X4-25)/5)
endfunction
function y1 takes nothing returns nothing
local unit NS=GetTriggerUnit()
local integer X4=GetUnitLevel(NS)
call SetUnitState(NS,UNIT_STATE_LIFE,GetUnitState(NS,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(NS,UNIT_STATE_MANA,GetUnitState(NS,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdx",NS,"origin"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\JudgementTarget.mdx",NS,"origin"))
set To[GetConvertedPlayerId(GetOwningPlayer(NS))]=To[GetConvertedPlayerId(GetOwningPlayer(NS))]+1
if X4==51 or X4==52 or X4==53 then
if S4[GetConvertedPlayerId(GetOwningPlayer(NS))]==false then
call RemoveUnit(NS)
endif
endif
if X4>=50 then
call SuspendHeroXP(NS,false)
endif
if GetUnitTypeId(NS)==$48303344 then
call y0(NS,$4130504D,0,$41305037,$41305145,$4130505A,$41305157,$41305048,$41305144,$41305047,0,$41305339,0)
elseif GetUnitTypeId(NS)==$48303550 or GetUnitTypeId(NS)==$48303730 then
call y0(NS,$4131364C,0,$41303950,$4130394F,$41304142,0,$4131364F,$41313656,$41313651,0,$41313653,$41313658)
elseif GetUnitTypeId(NS)==$48303147 or GetUnitTypeId(NS)==$48303656 then
if GetUnitAbilityLevel(NS,$41303048)==1 then
call AddSpecialEffectTarget("war3mapImported\\ProjectileOfTheElements.mdx",NS,"chest")
endif
call y0(NS,$41303048,0,$41304342,$41304532,$41304348,$41304533,$4131334C,0,$41304653,0,$4131334D,$4131334E)
elseif GetUnitTypeId(NS)==$48303437 or GetUnitTypeId(NS)==$48303737 then
if GetUnitAbilityLevel(NS,$41305554)==1 then
call AddSpecialEffectTarget("war3mapImported\\Magic_Aura_01.mdx",NS,"origin")
endif
call y0(NS,$41305554,0,$41304C57,0,$41313834,0,$41313839,0,$41313347,0,$41313841,0)
elseif GetUnitTypeId(NS)==$48303534 or GetUnitTypeId(NS)==$48303738 or GetUnitTypeId(NS)==$48303752 then
call y0(NS,$4131314A,$4131314B,$41313147,$41313159,$41304539,$4130454B,$41313148,$41313157,$41314152,0,$41313155,0)
elseif GetUnitTypeId(NS)==$48303032 or GetUnitTypeId(NS)==$48303655 then
call y0(NS,$41304D4D,$41304D49,$4130304F,0,$41303036,$41304535,$41303456,0,$41304753,$41304754,$4130304A,$41304537)
elseif GetUnitTypeId(NS)==$48303443 or GetUnitTypeId(NS)==$48303654 then
call y0(NS,$4130554B,0,$4130554F,$41305634,$41313955,0,$4130554C,$41305635,$41305550,0,$41305551,$41305636)
elseif GetUnitTypeId(NS)==$48303046 or GetUnitTypeId(NS)==$48303653 then
call y0(NS,$41304843,$41304832,$41303649,$41304541,$4130364B,0,$41304B48,$41304B4B,$41304C32,$41304B5A,$41303842,0)
elseif GetUnitTypeId(NS)==$48303131 or GetUnitTypeId(NS)==$48303652 then
call y0(NS,$41304833,0,$4130454A,0,$41305549,$4130554A,$41303855,$41305544,$41305638,0,$41304236,$41304544)
elseif GetUnitTypeId(NS)==$48303058 or GetUnitTypeId(NS)==$48303651 then
call y0(NS,$41305A55,0,$41303934,0,$41303935,$41304548,$41313348,$4131334A,$41305350,$41305351,$41303330,0)
if GetUnitAbilityLevel(NS,$41304834)==1 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Fire_Medium.mdx",NS,"weapon")
endif
elseif GetUnitTypeId(NS)==$48303733 or GetUnitTypeId(NS)==$48303034 then
if GetUnitAbilityLevel(NS,$41303454)==0 then
call AddSpecialEffectTarget("war3mapImported\\PSCH_blue_bW.mdx",NS,"weapon")
call AddSpecialEffectTarget("war3mapImported\\Sweep_Black_Frost_Medium.mdx",NS,"weapon")
call AddSpecialEffectTarget("war3mapImported\\HealingWater.MDX",NS,"origin")
endif
call y0(NS,$41313337,0,$41303454,$4130464F,$41313333,$41313334,$41303933,$4130464E,$41313336,0,$4130345A,0)
elseif GetUnitTypeId(NS)==$4830364E then
if GetUnitAbilityLevel(NS,$41304E32)==0 then
call AddSpecialEffectTarget("war3mapImported\\SpellFizzle.MDX",NS,"chest")
call AddSpecialEffectTarget("war3mapImported\\PurpleSphere.mdx",NS,"chest")
endif
call y0(NS,$41313337,0,$41304E32,$41305039,$41313333,$41313334,$41305236,$41305535,$41305847,0,$4130345A,$4130345A)
elseif GetUnitTypeId(NS)==$48303736 or GetUnitTypeId(NS)==$48303259 then
if GetUnitAbilityLevel(NS,$41303954)==0 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Black_Frost_Medium.mdx",NS,"weapon")
call AddSpecialEffectTarget("war3mapImported\\GatherSouls.mdx",NS,"origin")
endif
call y0(NS,$41314432,0,$41303954,$41304D58,$41304D50,$41304D57,$41304D51,0,$41303042,0,$41304D53,$41304D59)
elseif GetUnitTypeId(NS)==$45303033 or GetUnitTypeId(NS)==$45303055 or GetUnitTypeId(NS)==$4530304B then
if GetUnitAbilityLevel(NS,$41303039)==0 and GetUnitTypeId(NS)==$45303033 then
call AddSpecialEffectTarget("war3mapImported\\Soul Bow Enchantment Chilled.mdx",NS,"hand left")
endif
call y0(NS,$41304741,$41304256,$41303039,$41304734,$41305830,$41305831,$41305233,$41303041,$41305A54,0,$4130304E,0)
elseif GetUnitTypeId(NS)==$48303749 or GetUnitTypeId(NS)==$48303356 or GetUnitTypeId(NS)==$48303532 or GetUnitTypeId(NS)==$48303748 or GetUnitTypeId(NS)==$48303744 then
if GetUnitAbilityLevel(NS,$4130524A)==0 then
if GetUnitTypeId(NS)==$48303749 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Astral_Medium.mdl",NS,"weapon")
call AddSpecialEffectTarget("war3mapImported\\02AuraOfStrengtht.mdx",NS,"origin")
else
call AddSpecialEffectTarget("war3mapImported\\Sweep_Holy_Small.mdx",NS,"weapon")
call AddSpecialEffectTarget("war3mapImported\\RunicAura.mdx",NS,"origin")
endif
endif
call y0(NS,$4130524D,0,$4130524A,$41305251,$4130524B,0,$4130524C,$41305252,$41304657,0,$41303451,$41305250)
elseif GetUnitTypeId(NS)==$48303033 or GetUnitTypeId(NS)==$4830344A then
call y0(NS,$41313031,0,$41303047,$4130454D,$41303045,0,$53303057,$53303058,$41313044,$4130565A,$41303046,0)
elseif GetUnitTypeId(NS)==$48303036 or GetUnitTypeId(NS)==$4830364F then
if GetUnitAbilityLevel(NS,$41305432)==0 then
call AddSpecialEffectTarget("war3mapImported\\Warlock_aura_heroes5.mdx",NS,"origin")
call AddSpecialEffectTarget("war3mapImported\\Sweep_Astral_Medium.mdx",NS,"weapon")
endif
call y0(NS,$41314237,0,$41305432,0,$41313751,0,$53303052,$53303056,$4130344E,$41304658,$4131324F,$41313250)
elseif GetUnitTypeId(NS)==$48303031 or GetUnitTypeId(NS)==$48303650 then
if GetUnitAbilityLevel(NS,$41304C54)==0 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Blood_Medium.mdx",NS,"weapon")
endif
call y0(NS,$41313232,0,$41304C54,0,$41303032,$41304654,$41303030,$41304652,$41304144,0,$41303146,$41303857)
elseif GetUnitTypeId(NS)==$48303734 or GetUnitTypeId(NS)==$48303353 then
call y0(NS,$41305947,0,$41305939,$41305958,$41305946,$41305957,$4130595A,$41305941,$4130594A,0,$41305951,0)
elseif GetUnitTypeId(NS)==$4830304C or GetUnitTypeId(NS)==$48303659 then
call y0(NS,$41313943,0,$41313942,0,$41303832,0,$53303036,$53303045,$41303833,$41303834,$41304354,$41304430)
elseif GetUnitTypeId(NS)==$4F303054 or GetUnitTypeId(NS)==$4F303032 then
call y0(NS,$41305A31,0,$41313132,$41313145,$41304153,$41304731,$4130385A,0,$4130584C,$4130584D,$5330304C,0)
elseif GetUnitTypeId(NS)==$4F303036 or GetUnitTypeId(NS)==$4F303052 then
if GetUnitAbilityLevel(NS,$4130385A)==0 then
call AddSpecialEffectTarget("war3mapImported\\ShockAura.mdx",NS,"origin")
endif
call y0(NS,$41313133,0,$41313238,$41313241,$41313056,$4131305A,$41303859,$41304735,$41304435,0,$41313239,0)
elseif GetUnitTypeId(NS)==$4F30304A or GetUnitTypeId(NS)==$4F303053 or GetUnitTypeId(NS)==$4F303055 or GetUnitTypeId(NS)==$4F303034 then
call y0(NS,$41304845,0,$4130574C,0,$41304344,$41304550,$41305458,0,$41304338,$41304551,$41304258,$41305354)
elseif GetUnitTypeId(NS)==$5530304B or GetUnitTypeId(NS)==$55303133 then
if GetUnitAbilityLevel(NS,$41304E56)==0 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Astral_Medium.mdx",NS,"weapon")
if GetUnitTypeId(NS)==$55303133 then
call AddSpecialEffectTarget("war3mapImported\\VoidSkullAura_v5.mdx",NS,"origin")
endif
endif
call y0(NS,$41304846,$41314433,$41304E56,$41304E57,$4130435A,$41304555,$41314434,0,$41304359,$41304556,$41313244,0)
elseif GetUnitTypeId(NS)==$45303057 or GetUnitTypeId(NS)==$45303133 then
call y0(NS,$41304341,0,$41303849,0,$41313956,$41313957,$41303852,$41304738,$41313137,$41313138,$41313959,0)
elseif GetUnitTypeId(NS)==$48303735 or GetUnitTypeId(NS)==$4830314B then
call y0(NS,$41305447,0,$41305448,$41305452,$41305449,$41305451,$4130544A,0,$4130544B,0,$4130544C,$41305453)
elseif GetUnitTypeId(NS)==$4F303030 or GetUnitTypeId(NS)==$4F303051 then
if GetUnitAbilityLevel(NS,$41303049)==0 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Acid_Small.mdx",NS,"weapon")
endif
call y0(NS,$41304847,0,$41303049,0,$41303457,$41303943,$41304459,$41304559,$4130344F,0,$41303053,$4130455A)
elseif GetUnitTypeId(NS)==$48303030 or GetUnitTypeId(NS)==$4830374B then
call y0(NS,$41314355,0,$41314354,0,$41314241,0,$41314242,0,$41314352,0,$41314353,0)
elseif GetUnitTypeId(NS)==$4830354D or GetUnitTypeId(NS)==$4830374F then
call y0(NS,$4131364B,$41305731,$41305732,$41305735,$41305734,$41305746,$4131364E,$41305747,$41313657,0,$41304253,0)
elseif GetUnitTypeId(NS)==$4F303049 then
call y0(NS,$41313430,0,$41313435,0,$41313355,0,$41313353,0,$4131335A,0,$41313442,0)
endif
set NS=null
endfunction
function y2 takes nothing returns nothing
local trigger X3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(X3,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddAction(X3,function y1)
set X3=null
endfunction
function y3 takes nothing returns boolean
if not (GetSellingUnit()==Ix) then
return false
endif
if not (IsUnitType(GetBuyingUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function y4 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305641) then
return false
endif
return true
endfunction
function y5 takes nothing returns boolean
if not (TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function y6 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C55) then
return false
endif
if not (TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function y7 takes nothing returns boolean
if not (TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function y8 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C4F) then
return false
endif
if not (TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function y9 takes nothing returns boolean
if not (TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zB takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C51) then
return false
endif
if not (TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zC takes nothing returns boolean
if not (TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zD takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C50) then
return false
endif
if not (TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zE takes nothing returns boolean
if not (TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zF takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C54) then
return false
endif
if not (TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zG takes nothing returns boolean
if not (TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zH takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C52) then
return false
endif
if not (TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zI takes nothing returns boolean
if not (TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zJ takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C53) then
return false
endif
if not (TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zK takes nothing returns boolean
if not (TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zL takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C57) then
return false
endif
if not (TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zM takes nothing returns boolean
if not (TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zN takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C56) then
return false
endif
if not (TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zO takes nothing returns nothing
if y4() then
set TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=true
call UnitRemoveAbility(GetBuyingUnit(),$41313833)
call UnitRemoveAbility(GetBuyingUnit(),$41313832)
call UnitRemoveAbility(GetBuyingUnit(),$41305455)
call UnitRemoveAbility(GetBuyingUnit(),$41305456)
call UnitRemoveAbility(GetBuyingUnit(),$41305454)
call UnitRemoveAbility(GetBuyingUnit(),$41305345)
call UnitRemoveAbility(GetBuyingUnit(),$41305A35)
call UnitRemoveAbility(GetBuyingUnit(),$41304F5A)
call UnitRemoveAbility(GetBuyingUnit(),$41305238)
else
endif
if y6() then
if y5() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Сокрушение\"")
set TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41304F5A)
call SetUnitAbilityLevel(GetBuyingUnit(),$41304F5A,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41304F5A)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Сокрушение\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41304F5A,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41304F5A)
endif
else
endif
if y8() then
if y7() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Сила\"")
set TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305454)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305454,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305454)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Сила\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305454,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305454)
endif
else
endif
if zB() then
if y9() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Разум\"")
set TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305456)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305456,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305456)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Разум\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305456,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305456)
endif
else
endif
if zD() then
if zC() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Ловкость\"")
set TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305455)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305455,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305455)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Ловкость\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305455,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305455)
endif
else
endif
if zF() then
if zE() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Регенерация\"")
set TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305238)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305238,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305238)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Регенерация\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305238,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305238)
endif
else
endif
if zH() then
if zG() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Атака\"")
set TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41313833)
call SetUnitAbilityLevel(GetBuyingUnit(),$41313833,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41313833)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Атака\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41313833,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41313833)
endif
else
endif
if zJ() then
if zI() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Защита\"")
set TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305A35)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305A35,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305A35)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Защита\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305A35,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305A35)
endif
else
endif
if zL() then
if zK() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Аура Атаки\"")
set TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41313832)
call SetUnitAbilityLevel(GetBuyingUnit(),$41313832,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41313832)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Аура Атаки\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41313832,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41313832)
endif
else
endif
if zN() then
if zM() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Аура Защиты\"")
set TF[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305345)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305345,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305345)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Аура Защиты\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305345,TG[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305345)
endif
else
endif
endfunction
function zP takes nothing returns nothing
set YD=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(YD,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(YD,Condition(function y3))
call TriggerAddAction(YD,function zO)
endfunction
function zQ takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 42") then
return false
endif
return true
endfunction
function zR takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 41") then
return false
endif
return true
endfunction
function zS takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 40") then
return false
endif
return true
endfunction
function zT takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 39") then
return false
endif
return true
endfunction
function zU takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 38") then
return false
endif
return true
endfunction
function zV takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 37") then
return false
endif
return true
endfunction
function zW takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 36") then
return false
endif
return true
endfunction
function zX takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 35") then
return false
endif
return true
endfunction
function zY takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 34") then
return false
endif
return true
endfunction
function zZ takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 33") then
return false
endif
return true
endfunction
function za takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 32") then
return false
endif
return true
endfunction
function zb takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 31") then
return false
endif
return true
endfunction
function zc takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 29") then
return false
endif
return true
endfunction
function zd takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 30") then
return false
endif
return true
endfunction
function ze takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 28") then
return false
endif
return true
endfunction
function zf takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 27") then
return false
endif
return true
endfunction
function zg takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 24") then
return false
endif
return true
endfunction
function zh takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 26") then
return false
endif
return true
endfunction
function zi takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 25") then
return false
endif
return true
endfunction
function zj takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 23") then
return false
endif
return true
endfunction
function zk takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 1") then
return false
endif
return true
endfunction
function zl takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 2") then
return false
endif
return true
endfunction
function zm takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 3") then
return false
endif
return true
endfunction
function zn takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 4") then
return false
endif
return true
endfunction
function zo takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 5") then
return false
endif
return true
endfunction
function zp takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 6") then
return false
endif
return true
endfunction
function zq takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 7") then
return false
endif
return true
endfunction
function zr takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 8") then
return false
endif
return true
endfunction
function zs takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 9") then
return false
endif
return true
endfunction
function zt takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 10") then
return false
endif
return true
endfunction
function zu takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 11") then
return false
endif
return true
endfunction
function zv takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 12") then
return false
endif
return true
endfunction
function zw takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 13") then
return false
endif
return true
endfunction
function zx takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 14") then
return false
endif
return true
endfunction
function zy takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 15") then
return false
endif
return true
endfunction
function zz takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 16") then
return false
endif
return true
endfunction
function z0 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 17") then
return false
endif
return true
endfunction
function z1 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 18") then
return false
endif
return true
endfunction
function z2 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 19") then
return false
endif
return true
endfunction
function z3 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 20") then
return false
endif
return true
endfunction
function z4 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 21") then
return false
endif
return true
endfunction
function z5 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 22") then
return false
endif
return true
endfunction
function z6 takes nothing returns nothing
if zQ() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffПовелитесь песка:|r Убить босса Лен-Кур, чтобы никто из команды не умер от попадания на шипы")
else
endif
if zR() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНеприкаянный:|r Добыть предмет \"Сфера покаяния\"")
else
endif
if zS() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffВозмездие:|r Добыть предмет \"Оберег возмездия\"")
else
endif
if zT() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffТемный ветер:|r Добыть предмет \"Проклятый вихрь\"")
else
endif
if zU() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffРассечь!:|r Добыть предмет \"Рассекатель\"")
else
endif
if zV() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСон для слабых:|r Добыть предмет \"Спи, мой хороший\"")
else
endif
if zW() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffМы не захлебнёмся:|r Одолейте Асмодеуса с первой попытки, не используя заклинания воскрешения")
else
endif
if zX() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffКоллекционер:|r улучшите наклейки до 15 уровня")
else
endif
if zY() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffПовелитель снега:|r Одолейте Главу Новогоднего корпоратива без использования заклинаний воскрешения. Если любой из вашей команды кого-то воскресит - достиже")
else
endif
if zZ() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffМоре по колено:|r Одолейте Тиллу с максимальным уровнем её усилений. При убийстве вы должны находится на её арене")
else
endif
if za() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffЗвёздочет:|r Добыть Звездопад")
else
endif
if zb() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНиндзя:|r Добыть Сюрикен")
else
endif
if zc() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНас не оглушить!:|r Улучшить предмет \"Проклятый оберег\" до 3-го уровня")
else
endif
if zd() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffМагия? Не, не слышали:|r Улучшить предмет \"Магический оберег\" до 3-го уровня")
else
endif
if ze() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНеуловимый:|r Соберите предмет Ботинки Невесомости")
else
endif
if zf() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffЛовкость:|r Улучшите предмет Змеиная Ловкость до 3-го уровня")
else
endif
if zg() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffПроклятый:|r Улучшите предмет Проклятье до 3-го уровня")
else
endif
if zh() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffЦелитель:|r Улучшите предмет Исцеление до 3-го уровня")
else
endif
if zi() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffКаменный:|r Улучшите предмет Камень какой-то до 3-го уровня")
else
endif
if zj() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСвиточек:|r Улучшите предмет Свиточек до 3-го уровня")
else
endif
if zk() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffЯ так просто не сдамся:|r Поднимите более 3-х Цветочков на боссе Каменный Великан")
else
endif
if zl() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffПраздничный настрой:|r Получите Новогоднюю Шапку")
else
endif
if zm() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffМаксимум:|r Получите максимальный уровень.")
else
endif
if zn() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffГладиатор:|r Улучшите Амулет Арены на максимально доступный уровень.")
else
endif
if zo() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffВместе веселей:|r Сколько Вы продержитесь в игре в полном составе? Проверьте.")
else
endif
if zp() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffИграть, играть, играть!:|r Отдайте для игры несколько часов своего времени.")
else
endif
if zq() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffУбей их всех:|r Пролейте много крови. Очень много.")
else
endif
if zr() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffДобытчик:|r Получите дополнительную награду за врагов более 10-ти раз. Проверка: -gk")
else
endif
if zs() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСмерть - лишь начало:|r Умирайте.")
else
endif
if zt() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffДеньги - зло:|r Накопите 140000 золота")
else
endif
if zu() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffЗнаток:|r Выполнить более 10 заданий в первые 15 минут игрового времени")
else
endif
if zv() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffКровоносная тварь:|r Получите более 9000 Кровавых Меток")
else
endif
if zw() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСтать бы гробовщиком:|r Похороните что-то. Или кого-то.")
else
endif
if zx() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСкорострел:|r Вскройте все 20 сундуков быстрее, чем за 8 минут.")
else
endif
if zy() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffВождь Арахнидов:|r Ну, тут много ума не надо. Поймете сами.")
else
endif
if zz() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffПрелестный читатель:|r соберите все скрытые Книги.")
else
endif
if z0() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНа пути разрушения:|r Сломайте все 5 обелисков.")
else
endif
if z1() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСквозь воду:|r Раскройте тайну водопада.")
else
endif
if z2() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffРастения во благо:|r А вот этого Вам знать не положено.")
else
endif
if z3() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНовогодний корпоратив:|r Одолейте того, кто заведует Новым Годом.")
else
endif
if z4() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНесущий смерть:|r Поучаствуйте в убийстве всех 7-ми рейдовых боссов за одну игру.")
else
endif
if z5() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffВсезнающий:|r Выполните задание Пингвина")
else
endif
endfunction
function z7 takes nothing returns nothing
set YE=CreateTrigger()
call TriggerRegisterPlayerChatEvent(YE,Player(0),"-",false)
call TriggerRegisterPlayerChatEvent(YE,Player(1),"-",false)
call TriggerRegisterPlayerChatEvent(YE,Player(2),"-",false)
call TriggerRegisterPlayerChatEvent(YE,Player(3),"-",false)
call TriggerRegisterPlayerChatEvent(YE,Player(4),"-",false)
call TriggerRegisterPlayerChatEvent(YE,Player(5),"-",false)
call TriggerRegisterPlayerChatEvent(YE,Player(6),"-",false)
call TriggerRegisterPlayerChatEvent(YE,Player(7),"-",false)
call TriggerAddAction(YE,function z6)
endfunction
function z8 takes player Hv returns nothing
if GetPlayerName(Hv)=="sandrbash#2985" then
set OG[GetPlayerId(Hv)]="sandrbash"
elseif GetPlayerName(Hv)=="sandrbash" then
set OG[GetPlayerId(Hv)]="sandrbash#2985"
elseif GetPlayerName(Hv)=="LightEvi1" then
set OG[GetPlayerId(Hv)]="LightEvil#21286"
elseif GetPlayerName(Hv)=="LightEvil#21286" then
set OG[GetPlayerId(Hv)]="LightEvi1"
endif
endfunction
function z9 takes unit Hw,integer VF,integer PS,integer VG,integer VH,integer VI,integer VJ,integer VK,integer VL,integer YJ,integer YK returns nothing
local integer MC
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
if GetUnitAbilityLevel(YI,VF)>=1 then
set MC=GetUnitAbilityLevel(YI,VF)
call UnitAddAbility(MV[Mc],VF)
call SetUnitAbilityLevel(MV[Mc],VF,MC)
endif
if GetUnitAbilityLevel(YI,PS)>=1 then
set MC=GetUnitAbilityLevel(YI,PS)
call UnitAddAbility(MV[Mc],PS)
call SetUnitAbilityLevel(MV[Mc],PS,MC)
endif
if GetUnitAbilityLevel(YI,VG)>=1 then
set MC=GetUnitAbilityLevel(YI,VG)
call UnitAddAbility(MV[Mc],VG)
call SetUnitAbilityLevel(MV[Mc],VG,MC)
endif
if GetUnitAbilityLevel(YI,VH)>=1 then
set MC=GetUnitAbilityLevel(YI,VH)
call UnitAddAbility(MV[Mc],VH)
call SetUnitAbilityLevel(MV[Mc],VH,MC)
endif
if GetUnitAbilityLevel(YI,VI)>=1 then
set MC=GetUnitAbilityLevel(YI,VI)
call UnitAddAbility(MV[Mc],VI)
call SetUnitAbilityLevel(MV[Mc],VI,MC)
endif
if GetUnitAbilityLevel(YI,VJ)>=1 then
set MC=GetUnitAbilityLevel(YI,VJ)
call UnitAddAbility(MV[Mc],VJ)
call SetUnitAbilityLevel(MV[Mc],VJ,MC)
endif
if GetUnitAbilityLevel(YI,VK)>=1 then
set MC=GetUnitAbilityLevel(YI,VK)
call UnitAddAbility(MV[Mc],VK)
call SetUnitAbilityLevel(MV[Mc],VK,MC)
endif
if GetUnitAbilityLevel(YI,VL)>=1 then
set MC=GetUnitAbilityLevel(YI,VL)
call UnitAddAbility(MV[Mc],VL)
call SetUnitAbilityLevel(MV[Mc],VL,MC)
endif
if GetUnitAbilityLevel(YI,YJ)>=1 then
set MC=GetUnitAbilityLevel(YI,YJ)
call UnitAddAbility(MV[Mc],YJ)
call SetUnitAbilityLevel(MV[Mc],YJ,MC)
endif
if GetUnitAbilityLevel(YI,YK)>=1 then
set MC=GetUnitAbilityLevel(YI,YK)
call UnitAddAbility(MV[Mc],YK)
call SetUnitAbilityLevel(MV[Mc],YK,MC)
endif
endfunction
function BBB takes integer Mc,integer YH returns nothing
local integer MC=0
local item Me
local integer Np
set YI=MV[Mc]
set MV[Mc]=CreateUnitAtLoc(Player(Mc),YH,Location(-15170,850),0)
call z9(MV[Mc],$41496432,$41496433,$41496434,$41314330,$41314335,$41314341,$41314332,$41305A50,$41305A59,$41305A5A)
call z9(MV[Mc],$41305235,$41305138,$41313032,$41313033,$41305444,$41313034,$41313035,$41305A51,$41305A52,$41305A53)
call z9(MV[Mc],$41305052,$41305A57,$41313036,$41313038,$41313041,$41313043,$41305247,$41313057,$41313058,$41304B54)
call z9(MV[Mc],$41305A56,$41305A58,$41313037,$41313039,$41313042,$41305557,$41313046,$41313059,$41313357,$41304B4E)
call z9(MV[Mc],$41304B51,$41304C4B,$41313433,$41305A4C,$41305A4A,$4131354C,$41314149,$41314154,$41305333,$41305335)
call z9(MV[Mc],$41304C4E,$41313733,$41304D42,$41305A4B,$41305035,$41305556,$4131414A,$41314153,$41305334,$41305336)
call z9(MV[Mc],$41314430,$41314431,$41314431,$41314451,$41314452,$4131424E,$41313141,$41313247,$41304D44,$41304D4A)
call z9(MV[Mc],$41313234,$41305045,$41305046,$4130545A,$41314450,0,0,0,0,0)
call SetHeroLevel(MV[Mc],GetHeroLevel(YI),false)
loop
set Me=UnitItemInSlot(YI,MC)
set Np=GetItemTypeId(Me)
set Me=UnitAddItemByIdSwapped(Np,MV[Mc])
call SetItemUserData(Me,GetPlayerId(GetOwningPlayer(YI))+1)
set MC=MC+1
exitwhen MC>=6
endloop
call RemoveUnit(YI)
set Me=null
endfunction
function BBC takes player Hv,string YG returns nothing
local integer Mc=GetPlayerId(Hv)
if OG[Mc]=="M.U.D.R.I.K" and GetUnitTypeId(MV[Mc])==$4F303030 then
call BBB(Mc,$4F303051)
elseif OG[Mc]=="1Natsu" and GetUnitTypeId(MV[Mc])==$5530304B then
call BBB(Mc,$55303133)
elseif OG[Mc]=="1Natsu" and GetUnitTypeId(MV[Mc])==$48303532 then
call BBB(Mc,$48303749)
elseif OG[Mc]=="TCoM-_-ORPG" and GetUnitTypeId(MV[Mc])==$48303046 then
call BBB(Mc,$48303653)
elseif OG[Mc]=="TCoM-_-ORPG" and GetUnitTypeId(MV[Mc])==$48303030 then
call BBB(Mc,$4830374B)
elseif OG[Mc]=="Silven1305" and GetUnitTypeId(MV[Mc])==$48303032 then
call BBB(Mc,$48303655)
elseif OG[Mc]=="CBET_IZ_ada" and GetUnitTypeId(MV[Mc])==$48303356 then
call BBB(Mc,$48303744)
elseif OG[Mc]=="JonnyITD" and GetUnitTypeId(MV[Mc])==$48303031 then
call BBB(Mc,$48303650)
elseif OG[Mc]=="Liks115" and GetUnitTypeId(MV[Mc])==$48303550 then
call BBB(Mc,$48303730)
elseif OG[Mc]=="dbybge2002" and GetUnitTypeId(MV[Mc])==$48303034 then
call BBB(Mc,$48303733)
elseif OG[Mc]=="Jeka_Pycckuu" and GetUnitTypeId(MV[Mc])==$4830314B then
call BBB(Mc,$48303735)
elseif OG[Mc]=="JonnyITD" and GetUnitTypeId(MV[Mc])==$45303057 then
call BBB(Mc,$45303133)
elseif OG[Mc]=="Jeka_Pycckuu" and GetUnitTypeId(MV[Mc])==$4F303034 then
call BBB(Mc,$4F30304A)
elseif OG[Mc]=="sandrbash#2985" and GetUnitTypeId(MV[Mc])==$48303443 then
call BBB(Mc,$48303654)
elseif OG[Mc]=="sandrbash#2985" and GetUnitTypeId(MV[Mc])==$45303033 then
call BBB(Mc,$45303055)
elseif OG[Mc]=="Gra2us" and GetUnitTypeId(MV[Mc])==$4F303034 then
call BBB(Mc,$4F303053)
elseif OG[Mc]=="TCoM-_-ORPG" and GetUnitTypeId(MV[Mc])==$4F303036 then
call BBB(Mc,$4F303052)
elseif OG[Mc]=="TCoM-_-ORPG" and GetUnitTypeId(MV[Mc])==$48303147 then
call BBB(Mc,$48303656)
elseif OG[Mc]=="TCoM-_-ORPG" and GetUnitTypeId(MV[Mc])==$45303033 then
call BBB(Mc,$4530304B)
elseif OG[Mc]=="LTz.V" and GetUnitTypeId(MV[Mc])==$48303034 then
call BBB(Mc,$4830364E)
elseif OG[Mc]=="sandrbash#2985" and GetUnitTypeId(MV[Mc])==$4F303034 then
call BBB(Mc,$4F303055)
elseif OG[Mc]=="sandrbash" and GetUnitTypeId(MV[Mc])==$4F303034 then
call BBB(Mc,$4F303055)
elseif OG[Mc]=="as.36rus" and GetUnitTypeId(MV[Mc])==$48303534 then
call BBB(Mc,$48303738)
elseif OG[Mc]=="Over_lordik" and GetUnitTypeId(MV[Mc])==$45303033 then
call BBB(Mc,$4530304B)
elseif OG[Mc]=="Gra2us" and GetUnitTypeId(MV[Mc])==$48303534 then
call BBB(Mc,$48303752)
endif
endfunction
function BBD takes player Hv,string YG returns nothing
local integer Mc=GetPlayerId(Hv)
if OG[Mc]=="TCoM-_-ORPG" then
call RemoveUnit(NM[2+2*Mc])
set NM[2+2*Mc]=CreateUnitAtLoc(GetOwningPlayer(MV[Mc]),$6E303452,Location(0,0),270.)
endif
endfunction
function BBE takes nothing returns nothing
local integer Mc=GetPlayerId(GetTriggerPlayer())
local location Me
local integer Np
local integer Nq
local integer Ns
local integer Nt
if GetEventPlayerChatString()=="-newset" or GetEventPlayerChatString()=="-туцыуе" then
if RectContainsUnit(GR,MV[Mc])==true then
if nH(MV[Mc],$49304156) then
call RemoveItem(nI(MV[Mc],$49304156))
call nJ($49304437,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$49304437) then
call RemoveItem(nI(MV[Mc],$49304437))
call nJ($49304156,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$49304339) then
call RemoveItem(nI(MV[Mc],$49304339))
call nJ($49304438,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$49304438) then
call RemoveItem(nI(MV[Mc],$49304438))
call nJ($49304339,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$4930544C) then
call RemoveItem(nI(MV[Mc],$4930544C))
call nJ($4930544D,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$4930544D) then
call RemoveItem(nI(MV[Mc],$4930544D))
call nJ($4930544C,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$49304552) then
call RemoveItem(nI(MV[Mc],$49304552))
call nJ($49304553,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$49304553) then
call RemoveItem(nI(MV[Mc],$49304553))
call nJ($49304552,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$4930434C) then
call RemoveItem(nI(MV[Mc],$4930434C))
call nJ($49304439,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$49304439) then
call RemoveItem(nI(MV[Mc],$49304439))
call nJ($4930434C,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$49304B55) then
call RemoveItem(nI(MV[Mc],$49304B55))
call nJ($49304B54,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$49304B54) then
call RemoveItem(nI(MV[Mc],$49304B54))
call nJ($49304B55,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$49305653) then
call RemoveItem(nI(MV[Mc],$49305653))
call nJ($49305654,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nH(MV[Mc],$49305654) then
call RemoveItem(nI(MV[Mc],$49305654))
call nJ($49305653,MV[Mc])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
endif
endif
elseif GetEventPlayerChatString()=="-deltal" or GetEventPlayerChatString()=="-вудефд" then
call UnitRemoveAbility(MV[Mc],$41304D42)
call UnitRemoveAbility(MV[Mc],$41305A4A)
call UnitRemoveAbility(MV[Mc],$41313433)
call UnitRemoveAbility(MV[Mc],$41305035)
call UnitRemoveAbility(MV[Mc],$41305A4C)
call UnitRemoveAbility(MV[Mc],$41305A4B)
call UnitRemoveAbility(MV[Mc],$41305A37)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ff0000Талисман удалён!")
elseif GetEventPlayerChatString()=="-deltrof" or GetEventPlayerChatString()=="-вудекща" then
call UnitRemoveAbility(MV[Mc],$41314330)
call UnitRemoveAbility(MV[Mc],$41314332)
call UnitRemoveAbility(MV[Mc],$41314341)
call UnitRemoveAbility(MV[Mc],$41313357)
call UnitRemoveAbility(MV[Mc],$41313234)
call UnitRemoveAbility(MV[Mc],$41313247)
call UnitRemoveAbility(MV[Mc],$41314335)
call UnitRemoveAbility(MV[Mc],$41304644)
call UnitRemoveAbility(MV[Mc],$41304645)
call UnitRemoveAbility(MV[Mc],$41304434)
call UnitRemoveAbility(MV[Mc],$41304438)
call UnitRemoveAbility(MV[Mc],$41304549)
call UnitRemoveAbility(MV[Mc],$41304557)
call UnitRemoveAbility(MV[Mc],$53303039)
call UnitRemoveAbility(MV[Mc],$41304D36)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ff0000Трофей удалён!")
elseif GetEventPlayerChatString()=="-offw" or GetEventPlayerChatString()=="-щаац" then
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(MV[Mc]),0))
call RemoveSavedHandle(PR,GetHandleId(MV[Mc]),0)
elseif GetEventPlayerChatString()=="-hero1" or GetEventPlayerChatString()=="-рукщ1" then
call BBC(GetTriggerPlayer(),GetPlayerName(GetTriggerPlayer()))
elseif GetEventPlayerChatString()=="-cour1" or GetEventPlayerChatString()=="-сщгк1" then
call BBD(GetTriggerPlayer(),GetPlayerName(GetTriggerPlayer()))
elseif GetEventPlayerChatString()=="-starfall" or GetEventPlayerChatString()=="-ыефкафдд" then
if nH(MV[Mc],$74626172) or nH(MV[Mc],$6B336D31) or nH(MV[Mc],$77746C67) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Падение звезды': в указанную точку падает звезда, которая при падении раскалывается на 6 осколков в случайном положении в радиусе 450.  Каждый осколок живет 5 секунд и наносит всем в радиусе 150 магический урон(х2 от параметров)\n        |c00ff6969Перезарядка|r: 25 секунд.")
endif
elseif GetEventPlayerChatString()=="-deathworld" or GetEventPlayerChatString()=="-вуферцщкдв" then
if nH(MV[Mc],$49304355) or nH(MV[Mc],$4930444A) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Мир Падёт': в течении 8 секунд ваш урон повышается(300 + Сила Героя) а также каждый ваш удар будет наносить дополнительно 100% от Силы Эфиром. Взамен здоровье героя понижается 4%/сек. \n        |c00ff6969Перезарядка|r: 28 сек.")
elseif nH(MV[Mc],$49304531) or nH(MV[Mc],$49304635) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Мир Падёт': в течении 8 секунд ваш урон повышается(1000 + Сила Героя) а также каждый ваш удар будет наносить дополнительно 100% от Силы Эфиром. Взамен здоровье героя понижается 4%/сек. \n        |c00ff6969Перезарядка|r: 28 сек.")
elseif nH(MV[Mc],$4930464E) or nH(MV[Mc],$49304743) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Мир Падёт': в течении 8 секунд ваш урон повышается(500 + х2 от Силы Героя) а также каждый ваш удар будет наносить дополнительно 100% от Силы Эфиром. Взамен здоровье героя понижается 4%/сек. \n        |c00ff6969Перезарядка|r: 28 сек.")
endif
elseif GetEventPlayerChatString()=="-assur" or GetEventPlayerChatString()=="-фыыгк" then
if nH(MV[Mc],$74666172) or nH(MV[Mc],$6B79626C) or nH(MV[Mc],$6B796D6E) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Сюрикен': указанный противник получает урон(х5 от параметров) а также его атака снижается на 25% в течении 4 секунд.\n        |c00ff6969Перезарядка|r: 13 секунд.")
endif
elseif GetEventPlayerChatString()=="-dpriv" or GetEventPlayerChatString()=="-взкшм" then
if nH(MV[Mc],$49305A44) or nH(MV[Mc],$49305A35) or nH(MV[Mc],$49305938) or nH(MV[Mc],$49305939) or nH(MV[Mc],$49305A33) or nH(MV[Mc],$49305A32) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Орудие Смерти': Указанный противник полностью замирает на 2.5 сек. Каждые 0.5 сек враг получает урон(10% т.маны), а герой будет восстанавливать по 4% МР/0.5 сек. \n        На время действия Смерть неуязвима. \n        |c00ff7f00Дальность каста|r: 700 \n        |c006969ffЗатраты маны|r: 10% \n        |c00ffff00Перезарядка|r: 20 сек.|r")
endif
elseif GetEventPlayerChatString()=="-wskill" or GetEventPlayerChatString()=="-цылшдд" then
if nH(MV[Mc],$49313147) or nH(MV[Mc],$49313136) or nH(MV[Mc],$49313059) or nH(MV[Mc],$49313143) or nH(MV[Mc],$49313132) or nH(MV[Mc],$49313130) or nH(MV[Mc],$49313141) or nH(MV[Mc],$49313057) or nH(MV[Mc],$49313134) or nH(MV[Mc],$49313145) or nH(MV[Mc],$49313055) or nH(MV[Mc],$49313138) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Элементалы': При использовании спосоностей с шансом 25% вы призываете на поле боя одного из 3-х элементалей. Время жизни: 7 сек. Не больше 1 элементаля!\n        Синий элементал: при атаке замедляет врагов. AS: 0.9 сек\n        Красный элементал: наносит урон силой тьмы по области. AS: 0.7 сек\n        Зеленый жлементал: обладает аурой снижения защиты(20 ед.). AS: 1.0 сек\n        Урон элементалей: 100% от суммы параметров героя")
endif
elseif GetEventPlayerChatString()=="-килл" or GetEventPlayerChatString()=="-лшдд" or GetEventPlayerChatString()=="-kill" or GetEventPlayerChatString()=="-rbkk" then
set Me=Location(-15420,2222)
call SetUnitPositionLoc(MV[Mc],Me)
call KillUnit(MV[Mc])
set Rq[Mc+1]=Rq[Mc+1]-1
call RemoveLocation(Me)
set Me=null
elseif GetEventPlayerChatString()=="-с" or GetEventPlayerChatString()=="-c" or GetEventPlayerChatString()=="-clear" or GetEventPlayerChatString()=="-сдуфк" then
call ClearTextMessagesBJ(GetForceOfPlayer(GetTriggerPlayer()))
elseif GetEventPlayerChatString()=="-ролл" or GetEventPlayerChatString()=="-hjkk" or GetEventPlayerChatString()=="-roll" or GetEventPlayerChatString()=="-кщдд" then
set Np=GetRandomInt(1,100)
if nH(NM[2+2*Mc],$49303150) then
set Np=Np+GetRandomInt(5,10)
endif
call DisplayTextToForce(GetPlayersAll(),"~~~~~~~~~~~~~~~~~~~~ |c00ffff00"+GetPlayerName(GetTriggerPlayer())+(" |c00ffffffвыбросил|r "+("|c0000ffff"+(I2S(Np)+"|r ~~~~~~~~~~~~~~~~~~~~"))))
elseif GetEventPlayerChatString()=="-son" or GetEventPlayerChatString()=="-ыщт" then
call ShowUnit(NM[GetConvertedPlayerId(GetTriggerPlayer())*2],true)
elseif GetEventPlayerChatString()=="-soff" or GetEventPlayerChatString()=="-ыщаа" then
call ShowUnit(NM[GetConvertedPlayerId(GetTriggerPlayer())*2],false)
elseif GetEventPlayerChatString()=="-pon" or GetEventPlayerChatString()=="-зщт" then
call PauseUnit(Nd[GetConvertedPlayerId(GetTriggerPlayer())],false)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"Питомец |c0000ff00включен")
elseif GetEventPlayerChatString()=="-poff" or GetEventPlayerChatString()=="-зщаа" then
call PauseUnit(Nd[GetConvertedPlayerId(GetTriggerPlayer())],true)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"Питомец |c00ff0000выключен")
elseif GetEventPlayerChatString()=="-kill pet" or GetEventPlayerChatString()=="-лшдд зуе" then
set S2[GetConvertedPlayerId(GetTriggerPlayer())]=true
call RemoveUnit(Nd[GetConvertedPlayerId(GetTriggerPlayer())])
call UnitRemoveAbility(MV[GetConvertedPlayerId(GetTriggerPlayer())-1],$41305334)
call UnitRemoveAbility(MV[GetConvertedPlayerId(GetTriggerPlayer())-1],$41305335)
call UnitRemoveAbility(MV[GetConvertedPlayerId(GetTriggerPlayer())-1],$41305336)
call UnitRemoveAbility(MV[GetConvertedPlayerId(GetTriggerPlayer())-1],$41305333)
call UnitRemoveAbility(MV[GetConvertedPlayerId(GetTriggerPlayer())-1],$41314153)
call UnitRemoveAbility(MV[GetConvertedPlayerId(GetTriggerPlayer())-1],$41314154)
elseif GetEventPlayerChatString()=="-вкщзшеуь" or GetEventPlayerChatString()=="-dropitem" then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"Предметы выброшены")
set Np=0
loop
call UnitRemoveItemFromSlotSwapped(Np,NM[GetConvertedPlayerId(GetTriggerPlayer())*2])
set Np=Np+1
exitwhen Np>6
endloop
elseif GetEventPlayerChatString()=="-1" then
call PlaySoundAtPointBJ(F,150,GetUnitLoc(MV[Mc]),0)
elseif GetEventPlayerChatString()=="-2" then
call PlaySoundAtPointBJ(G,150,GetUnitLoc(MV[Mc]),0)
elseif GetEventPlayerChatString()=="-3" then
call PlaySoundAtPointBJ(E,150,GetUnitLoc(MV[Mc]),0)
elseif GetEventPlayerChatString()=="-4" then
call PlaySoundAtPointBJ(D,150,GetUnitLoc(MV[Mc]),0)
elseif GetEventPlayerChatString()=="-тдмд" or GetEventPlayerChatString()=="-nlvl" then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c0000ffffВаш уровень наклейки|r: "+I2S(GetUnitAbilityLevel(MV[Mc],$41305045)))
elseif GetEventPlayerChatString()=="-рудз" or GetEventPlayerChatString()=="-help" then
call ClearTextMessagesBJ(GetForceOfPlayer(GetTriggerPlayer()))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c0000ff00Выберите категорию, которую желаете изучить|r \n        Герои и Способности (-info1)\n        Прокачка уровня (-info2)\n        Арена (-info3)\n        Система магазина, предметы, крафт (-info4)")
elseif GetEventPlayerChatString()=="-штащ1" or GetEventPlayerChatString()=="-info1" then
call ClearTextMessagesBJ(GetForceOfPlayer(GetTriggerPlayer()))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c0000ff00Герои и способности|r. В карте на выбор доступно определенное количество персонажей, каждый из которых \nобладает уникальными способностями, которые Вы можете изучить при стартовом запуске игры. \nСпособности персонажей прокачиваются автоматически, начиная с 2-го уровня. |c00ff7f00Описание способностей|r:")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ffff00Нулевая с-ть|r. Доступна с 1 уровня, не прокачивается. Есть не у всех героев.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ffff00Первая с-ть|r. Доступна с 1 уровня, прокачивается каждые 5 уровней, начиная с 10. Максимальный: 10")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ffff00Вторая и третья с-сти|r. Доступны с 2 уровня, прокачиваются каждые 3 уровня. Максимальный: 10")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ffff00Четвертая с-ть|r. Доступна с 10 уровня, прокачивается каждые 3 уровня. Максимальный: 10")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ffff00Пятая с-сть|r. Доступна с 20 уровня, прокачивается каждые 9 уровней. Максимальный: 3")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ff0000Ультимейт|r. Доступен с 30 уровня, прокачивается каждые 5 уровней. Максимальный: 5")
elseif GetEventPlayerChatString()=="-штащ2" or GetEventPlayerChatString()=="-info2" then
call ClearTextMessagesBJ(GetForceOfPlayer(GetTriggerPlayer()))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c0000ff00Прокачка уровня|r. В карте существует много видов получения опыта персонажа:\n-|c00ff7f00Крипы|r. Самый стандартный меток прокачки героя – убийство крипов в различных локациях. Опыт с \nубитого крипа дается всем в радиусе 900 и умножается на количество Героев рядом. Также опыт с крипов \nдают лишь тем героям, чей уровень соответствует уровню локации (уровень локаций указан на табличках, \nкоторые стоят в начале каждой локации). ")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ff7f00Задания|r. Один из основных источников опыта. Всё просто: делаете задания – получаете награду. \nНо будьте внимательны. При взятии каждого задания пишется его уровень! Так вот, если уровень \nперсонажа не подходит под данный квест – опыт вы за него не получите.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ff7f00Арена|r.  Сражаясь на Арене, вы будете получать по 2 уровня за каждое её прохождение. Но лишь \nодин раз! Подробнее узнайте у Капитана Арены, которого можно найти на главной базе.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ff7f00Мусор|r. Дополнительный источник опыта. С крипов в локациях иногда падает мусор. Собирайте его \n– приносите Скупщику (найти его можно на главной базе) и получайте награду.")
elseif GetEventPlayerChatString()=="-штащ3" or GetEventPlayerChatString()=="-info3" then
call ClearTextMessagesBJ(GetForceOfPlayer(GetTriggerPlayer()))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c0000ff00Арена|r. Найдите на стартовой базе Капитана Арены, который даст вам указания по вызову босса \nАрены(обратите внимание на миникарту. Местоположение Капитана сейчас подсветится желтым цветом).")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"Боссы меняются каждые 5 уровней. При вызове противника арены будет вызван тот, под который уровень \nвы подходите. За каждое первое прохождение боссов герою дают награду: 2 уровня, золото, метки, Амулет Арены.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c00ff6969Но, важно!|r Нужно проходить всех боссов строго по порядку и иметь в инвентаре Героя Амулет Арены, \nкоторый дадут после первого прохождения.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c00ff0000Внимание!|r Убейте первого босса арены до 5 уровня, дабы не пропустить награду. Также с боссов Арены выпадают особые артефакты.")
call PingMinimapLocForForceEx(GetForceOfPlayer(GetTriggerPlayer()),Location(-15808,-118),40,bj_MINIMAPPINGSTYLE_FLASHY,100,100,0.)
elseif GetEventPlayerChatString()=="-штащ4" or GetEventPlayerChatString()=="-info4" then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c0000ff00Магазин|r.\nПри нажатии на клавишу |c00ffff00F2|r вашему вниманию будет представлен Магазин. Обратите внимание на \nразделы в магазине – там указан тип предметов и рекомендуемый уровень для их приобретения. ")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c00ff7f00Зелья|r: думаю обьяснять ничего не надо.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c00ff7f00Снаряжение|r: базовые предметы, которые помогут Героям на начальном этапе игры. Также там можно \nзнакомиться с первым доступным Вам крафтом. Весь крафт в данном разделе добывается и делается в \nграницах локации Лес Долорес.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c00ff7f00Разное|r: расходники, которые понадобятся при добыче рецептов, выполнении квестов и т.д.\n|c00ff7f00Магазин арены|r: сборочные рецепты с артефактов, которые выпадают с боссов Арены (см. пособие по Арене)")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"\n|c0000ffffИмейте ввиду|r: делать покупки в магазин можно из любой точки карты - они упадут в |c00ff00ffХранилище|r(обратите \nвнимание на миникарту, Хранилище сейчас подсветится фиолетовым указателем), после чего предметы \nможно отдать Герою кнопкой |c00ffff00Выбросить предметы|r(внутри Хранилища)")
call PingMinimapLocForForceEx(GetForceOfPlayer(GetTriggerPlayer()),Location(-15621,1323),40,bj_MINIMAPPINGSTYLE_FLASHY,100,0,100)
elseif GetEventPlayerChatString()=="-scyt1" or GetEventPlayerChatString()=="-ысне1" then
if nH(MV[Mc],$49305631) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Разрушение': понижает защиту врага на 95 ед. в течении 8 секунд. также каждую секунду он будет получать урон, который повышается каждый тик на базовое его значение. Базовый урон: 50% от Ловкости\n        |c00ff6969Перезарядка|r: 35 секунд.")
endif
elseif GetEventPlayerChatString()=="-scyt2" or GetEventPlayerChatString()=="-ысне2" then
if nH(MV[Mc],$49305633) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Дальновидность':Наносит врагу урон и восстанвливает себе половину НР от этого урона. Урон: 2% от суммы Ловкости и Разума за каждую еденицу расстояния между Героев и целью. Максимальная дальность: 700 ед.\n        |c00ff6969Перезарядка|r: 35 секунд.")
endif
elseif GetEventPlayerChatString()=="-staff" or GetEventPlayerChatString()=="-ыефаа" then
if nH(MV[Mc],$49305635) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Накопление': в указанной точке поочередно создается 5 взрывов, которые наносят урон. Каждый следующий взрыв наносит дополнительный урон в размере 100% от базового. Базовый урон: 100% от Разума.\n        |c00ff6969Перезарядка|r: 35 секунд.")
endif
elseif GetEventPlayerChatString()=="-preo" or GetEventPlayerChatString()=="-зкущ" then
if nH(MV[Mc],$49305532) or nH(MV[Mc],$49305039) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Преобразование': 15% вашего НР пробразуются в МР всех союзников рядом. А враги получают |c003b94a5Чистый|r урон(30% НР)\n        |c00ff6969Перезарядка|r: 25 секунд.")
endif
elseif GetEventPlayerChatString()=="-reforged" then
call z8(GetTriggerPlayer())
elseif SubString(GetEventPlayerChatString(),0,10)=="-swapitems" then
set Np=S2I(SubString(GetEventPlayerChatString(),11,12))
set Nq=S2I(SubString(GetEventPlayerChatString(),13,15))
if Np>0 and Nq>0 then
set Ns=GetItemTypeId(UnitItemInSlot(MV[Mc],Np))
set Nt=GetItemTypeId(UnitItemInSlot(MV[Mc],Nq))
call RemoveItem(nI(MV[Mc],Ns))
call RemoveItem(nI(MV[Mc],Nt))
call nJ(Nt,MV[Mc])
call nJ(Ns,MV[Mc])
endif
endif
endfunction
function BBF takes nothing returns nothing
set YF=CreateTrigger()
call TriggerRegisterPlayerChatEvent(YF,Player(0),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(1),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(2),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(3),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(4),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(5),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(6),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(7),"-",false)
call TriggerAddAction(YF,function BBE)
endfunction
function BBG takes nothing returns nothing
local unit NS=LoadUnitHandle(YM,GetHandleId(GetExpiredTimer()),1)
local integer Mc=GetPlayerId(GetOwningPlayer(NS))
local location Me
if not UnitAlive(NS) then
set Me=Location(GetRectCenterX(GR),GetRectCenterY(GR))
call ReviveHero(MV[Mc],GetLocationX(Me),GetLocationY(Me),false)
call RemoveUnit(Xo[Mc])
set Xo[Mc]=null
call RemoveLocation(Me)
set Me=null
endif
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set NS=null
endfunction
function BBH takes nothing returns nothing
local unit Uf=GetTriggerUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Uf))
local timer He
local location Hv=GetUnitLoc(Uf)
local location Me
if IsUnitType(Uf,UNIT_TYPE_HERO) then
if GetUnitTypeId(Uf)!=$48303635 then
if GetUnitAbilityLevel(Uf,$41304C59)>=1 then
set Me=GetUnitLoc(Uf)
call ReviveHero(MV[Mc],GetLocationX(Me),GetLocationY(Me),false)
call UnitRemoveAbility(Uf,$41304C59)
call RemoveLocation(Me)
set Me=null
else
set Xo[Mc]=CreateUnit(Player(Mc),$68303143,GetLocationX(Hv),GetLocationY(Hv),270.)
call SetUnitTimeScale(Xo[Mc],.48)
call UnitApplyTimedLife(Xo[Mc],$42544C46,20.)
set He=CreateTimer()
call SaveUnitHandle(YM,GetHandleId(He),1,Uf)
call TimerStart(He,20.,false,function BBG)
endif
if RectContainsUnit(Gz,Uf)==true then
set Sq=Sq+1
call na(LB,"|c007d7d7dЯ поглощаю души! |r|c00ff0000"+I2S(Sq),.028,255,255,255)
call nc(LB,500)
endif
endif
endif
set Uf=null
set He=null
call RemoveLocation(Hv)
set Hv=null
endfunction
function BBI takes nothing returns nothing
local trigger YL=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(YL,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(YL,function BBH)
set YL=null
endfunction
function BBJ takes nothing returns nothing
local unit Hw
local integer MC
local item MQ
local integer NH
local integer Pf
local group YO
local boolean YP=false
local unit Me
set Hw=MV[GetPlayerId(GetTriggerPlayer())]
if MV[GetPlayerId(GetTriggerPlayer())]!=null then
set MM=MM-1
endif
set MV[GetPlayerId(GetTriggerPlayer())]=null
set Pf=1
loop
set MC=0
loop
set MQ=UnitItemInSlot(Hw,MC)
set NH=GetItemTypeId(MQ)
if GetItemType(MQ)==ITEM_TYPE_UNKNOWN then
call RemoveItem(nI(Hw,NH))
call CreateItem(NH,-15600,2403)
endif
set MQ=UnitItemInSlot(NM[GetConvertedPlayerId(GetTriggerPlayer())*2],MC)
set NH=GetItemTypeId(MQ)
if GetItemType(MQ)==ITEM_TYPE_UNKNOWN then
call RemoveItem(nI(NM[GetConvertedPlayerId(GetTriggerPlayer())*2],NH))
call CreateItem(NH,-15600,2403)
endif
set MC=MC+1
exitwhen MC>=5
endloop
call IssueImmediateOrder(NM[GetConvertedPlayerId(GetTriggerPlayer())*2],"coupletarget")
call TriggerSleepAction(1)
set Pf=Pf+1
exitwhen Pf>=4
endloop
call SetPlayerName(GetTriggerPlayer(),GetPlayerName(GetTriggerPlayer())+"|c007d7d7dLeave")
set OG[GetPlayerId(GetTriggerPlayer())]="Leave"
set OF[GetPlayerId(GetTriggerPlayer())]="|c007d7d7d"
call RemoveUnit(NM[GetConvertedPlayerId(GetTriggerPlayer())*2])
call RemoveUnit(MV[GetPlayerId(GetTriggerPlayer())])
call RemoveUnit(Nd[GetPlayerId(GetTriggerPlayer())+1])
set YO=GetUnitsOfPlayerAll(GetTriggerPlayer())
loop
exitwhen not not YP
set Me=FirstOfGroup(YO)
if Me==null then
set YP=true
else
call GroupRemoveUnit(YO,Me)
call RemoveUnit(Me)
endif
endloop
call SetUnitAbilityLevelSwapped($41304243,IO,MM)
call SetUnitAbilityLevelSwapped($41304244,IO,MM)
call SetUnitAbilityLevelSwapped($53303050,IO,MM)
call MultiboardSetItemValueBJ(Pd,1,13,"|c006969ffСложность: |r"+I2S(MM)+". |c0000ffffОт сложности зависит сила врагов а также шанс выпадения многих редких предметов.")
set Me=null
set YO=null
set MQ=null
set Hw=null
endfunction
function BBK takes nothing returns nothing
set YN=CreateTrigger()
call TriggerRegisterPlayerEventLeave(YN,Player(0))
call TriggerRegisterPlayerEventLeave(YN,Player(1))
call TriggerRegisterPlayerEventLeave(YN,Player(2))
call TriggerRegisterPlayerEventLeave(YN,Player(3))
call TriggerRegisterPlayerEventLeave(YN,Player(4))
call TriggerRegisterPlayerEventLeave(YN,Player(5))
call TriggerRegisterPlayerEventLeave(YN,Player(6))
call TriggerRegisterPlayerEventLeave(YN,Player(7))
call TriggerAddAction(YN,function BBJ)
endfunction
function BBL takes nothing returns boolean
if not (IsUnitInGroup(GetTriggerUnit(),Tq)==false) then
return false
endif
return true
endfunction
function BBM takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$48303147 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303656 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303046 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303653 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303058 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303651 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303031 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303650 then
return true
endif
return false
endfunction
function BBN takes nothing returns boolean
if not BBM() then
return false
endif
return true
endfunction
function BBO takes nothing returns nothing
if BBN() then
if BBL() then
call GroupAddUnit(Tq,GetTriggerUnit())
else
endif
else
endif
endfunction
function BBP takes nothing returns nothing
set YQ=CreateTrigger()
call TriggerRegisterEnterRectSimple(YQ,GR)
call TriggerAddAction(YQ,function BBO)
endfunction
function BBQ takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("origin",I9,"war3mapImported\\TalkToMev2.mdx")
set Uu[59]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KJ,"war3mapImported\\TalkToMev2.mdx")
set Uu[58]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Jc,"war3mapImported\\TalkToMev2.mdx")
set Uu[57]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",J7,"war3mapImported\\TalkToMev2.mdx")
set Uu[56]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Iq,"war3mapImported\\TalkToMev2.mdx")
set Uu[55]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kn,"war3mapImported\\TalkToMev2.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Jk,"war3mapImported\\TalkToMev2.mdx")
set Uu[53]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ku,"war3mapImported\\TalkToMev2.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Iv,"war3mapImported\\TalkToMev2.mdx")
set Uu[51]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Iu,"war3mapImported\\TalkToMev2.mdx")
set Uu[50]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",J8,"war3mapImported\\TalkToMev2.mdx")
set Uu[49]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",J6,"war3mapImported\\TalkToMev2.mdx")
set Uu[48]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Jw,"war3mapImported\\TalkToMev2.mdx")
set Uu[47]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Jv,"war3mapImported\\TalkToMev2.mdx")
set Uu[46]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",JY,"war3mapImported\\TalkToMev2.mdx")
set Uu[45]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",I7,"war3mapImported\\TalkToMev2.mdx")
set Uu[44]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Iz,"war3mapImported\\TalkToMev2.mdx")
set Uu[43]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Jq,"war3mapImported\\TalkToMev2.mdx")
set Uu[42]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",I0,"war3mapImported\\TalkToMev2.mdx")
set Uu[41]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KZ,"war3mapImported\\TalkToMev2.mdx")
set Uu[40]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kd,"war3mapImported\\TalkToMev2.mdx")
set Uu[39]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ke,"war3mapImported\\TalkToMev2.mdx")
set Uu[37]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Io,"war3mapImported\\TalkToMev2.mdx")
set Uu[36]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Jg,"war3mapImported\\TalkToMev2.mdx")
set Uu[35]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("overhead",Ih,"war3mapImported\\TalkToMev2.mdx")
set Uu[34]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",I8,"war3mapImported\\TalkToMev2.mdx")
set Uu[33]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ik,"war3mapImported\\TalkToMev2.mdx")
set Uu[32]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kp,"war3mapImported\\TalkToMev2.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kl,"war3mapImported\\TalkToMev2.mdx")
set Uu[30]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kb,"war3mapImported\\TalkToMev2.mdx")
set Uu[29]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kc,"war3mapImported\\TalkToMev2.mdx")
set Uu[28]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",I3,"war3mapImported\\TalkToMev2.mdx")
set Uu[27]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ka,"war3mapImported\\TalkToMev2.mdx")
set Uu[26]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Km,"war3mapImported\\TalkToMev2.mdx")
set Uu[25]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",I5,"war3mapImported\\TalkToMev2.mdx")
set Uu[24]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",IZ,"war3mapImported\\TalkToMev2.mdx")
set Uu[23]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kf,"war3mapImported\\TalkToMev2.mdx")
set Uu[22]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",IY,"war3mapImported\\TalkToMev2.mdx")
set Uu[21]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",I1,"war3mapImported\\TalkToMev2.mdx")
set Uu[20]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kg,"war3mapImported\\TalkToMev2.mdx")
set Uu[19]=GetLastCreatedEffectBJ()
call SetUnitInvulnerable(Iy,true)
call AddSpecialEffectTargetUnitBJ("origin",Iy,"war3mapImported\\TalkToMev2.mdx")
set Uu[18]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ki,"war3mapImported\\TalkToMev2.mdx")
set Uu[17]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Im,"war3mapImported\\TalkToMev2.mdx")
set Uu[15]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",In,"war3mapImported\\TalkToMev2.mdx")
set Uu[14]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Il,"war3mapImported\\TalkToMev2.mdx")
set Uu[13]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ie,"war3mapImported\\TalkToMev2.mdx")
set Uu[12]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KY,"war3mapImported\\TalkToMev2.mdx")
set Uu[10]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ii,"war3mapImported\\TalkToMev2.mdx")
set Uu[9]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ip,"war3mapImported\\TalkToMev2.mdx")
set Uu[16]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ic,"war3mapImported\\TalkToMev2.mdx")
set Uu[8]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("overhead",If,"war3mapImported\\TalkToMev2.mdx")
set Uu[7]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KX,"war3mapImported\\TalkToMev2.mdx")
set Uu[6]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KK,"war3mapImported\\TalkToMev2.mdx")
set Uu[5]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KW,"war3mapImported\\TalkToMev2.mdx")
set Uu[4]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KT,"war3mapImported\\TalkToMev2.mdx")
set Uu[3]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KS,"war3mapImported\\TalkToMev2.mdx")
set Uu[2]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KL,"war3mapImported\\TalkToMev2.mdx")
set Uu[1]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KM,"war3mapImported\\TalkToMev2.mdx")
set Uu[0]=GetLastCreatedEffectBJ()
endfunction
function BBR takes nothing returns nothing
set YR=CreateTrigger()
call TriggerRegisterTimerEventSingle(YR,1.)
call TriggerAddAction(YR,function BBQ)
endfunction
function BBS takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())>=99.) then
return false
endif
return true
endfunction
function BBT takes nothing returns boolean
if not (GetRandomInt(1,3)==1) then
return false
endif
return true
endfunction
function BBU takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BBT() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00ООО, Господа! Вам страшно повезло=)
")
call CreateItemLoc($49304A4E,GetUnitLoc(GetTriggerUnit()))
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Не сегодня....=((
")
endif
endfunction
function BBV takes nothing returns nothing
set YS=CreateTrigger()
call TriggerRegisterUnitEvent(YS,KO,EVENT_UNIT_SELECTED)
call TriggerAddCondition(YS,Condition(function BBS))
call TriggerAddAction(YS,function BBU)
endfunction
function BBW takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E676972) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BBX takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=2) then
return false
endif
return true
endfunction
function BBY takes nothing returns nothing
if BBX() then
call DestroyEffectBJ(Uu[0])
call AddSpecialEffectTargetUnitBJ("overhead",KM,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[0]=GetLastCreatedEffectBJ()
set YU[15]=GetRectCenter(L)
call EnableTrigger(YV)
call CreateItemLoc($49303042,YU[15])
call RemoveLocation(YU[15])
set YU[15]=GetRectCenter(K)
call CreateItemLoc($49303039,YU[15])
call RemoveLocation(YU[15])
set YU[15]=GetRectCenter(H)
call CreateItemLoc($49303043,YU[15])
call RemoveLocation(YU[15])
set YU[15]=GetRectCenter(Ft)
call CreateItemLoc($49303041,YU[15])
call RemoveLocation(YU[15])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Раз плюнуть!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 2-5|r")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Раз плюнуть!","О, новые Герои! не поможете ли Вы старому Киборгу? Соберите, пожалуйста, в Лесу |c0000FF004 пучка травы|r, из неё варится отменная настойка! Отблагодарю по справедливости!","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[0]=GetLastCreatedQuestBJ()
call DisableTrigger(GetTriggeringTrigger())
else
call nX(GetTriggerUnit(),"Задание с |c00ff00002|r уровня",.027,255,255,255)
endif
endfunction
function BBZ takes nothing returns nothing
set YT=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(YT,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(YT,Condition(function BBW))
call TriggerAddAction(YT,function BBY)
endfunction
function BBa takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$49303042 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303039 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303043 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303041 then
return true
endif
return false
endfunction
function BBb takes nothing returns boolean
if not BBa() then
return false
endif
return true
endfunction
function BBc takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(1.)
call EnableTrigger(YX)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Травы собрано:|r 1/4")
endfunction
function BBd takes nothing returns nothing
set YV=CreateTrigger()
call DisableTrigger(YV)
call TriggerRegisterAnyUnitEventBJ(YV,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(YV,Condition(function BBb))
call TriggerAddAction(YV,function BBc)
endfunction
function BBe takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$49303042 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303039 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303043 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303041 then
return true
endif
return false
endfunction
function BBf takes nothing returns boolean
if not BBe() then
return false
endif
return true
endfunction
function BBg takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(1.)
call EnableTrigger(YY)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Травы собрано:|r 2/4")
endfunction
function BBh takes nothing returns nothing
set YX=CreateTrigger()
call DisableTrigger(YX)
call TriggerRegisterAnyUnitEventBJ(YX,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(YX,Condition(function BBf))
call TriggerAddAction(YX,function BBg)
endfunction
function BBi takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$49303042 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303039 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303043 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303041 then
return true
endif
return false
endfunction
function BBj takes nothing returns boolean
if not BBi() then
return false
endif
return true
endfunction
function BBk takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(1.)
call EnableTrigger(YZ)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Травы собрано:|r 3/4")
endfunction
function BBl takes nothing returns nothing
set YY=CreateTrigger()
call DisableTrigger(YY)
call TriggerRegisterAnyUnitEventBJ(YY,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(YY,Condition(function BBj))
call TriggerAddAction(YY,function BBk)
endfunction
function BBm takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$49303042 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303039 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303043 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303041 then
return true
endif
return false
endfunction
function BBn takes nothing returns boolean
if not BBm() then
return false
endif
return true
endfunction
function BBo takes nothing returns nothing
call EnableTrigger(Ya)
call DestroyEffectBJ(Uu[0])
call AddSpecialEffectTargetUnitBJ("overhead",KM,"war3mapImported\\QuestYellow1.mdx")
set Uu[0]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|c00FF7F00Травы собрано:|r 4/4
Вернитесь к Киборгу!")
call DisableTrigger(GetTriggeringTrigger())
endfunction
function BBp takes nothing returns nothing
set YZ=CreateTrigger()
call DisableTrigger(YZ)
call TriggerRegisterAnyUnitEventBJ(YZ,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(YZ,Condition(function BBn))
call TriggerAddAction(YZ,function BBo)
endfunction
function BBq takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E676972) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BBr takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BBs takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BBt takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BBu takes nothing returns boolean
return GetBooleanAnd(BBs(),BBt())
endfunction
function BBv takes nothing returns boolean
return GetBooleanAnd(BBr(),BBu())
endfunction
function BBw takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=2) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=5) then
return false
endif
return true
endfunction
function BBx takes nothing returns nothing
if BBw() then
call AddHeroXP(GetEnumUnit(),500,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+500
else
endif
endfunction
function BBy takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=2) then
return false
endif
return true
endfunction
function BBz takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=2) then
return false
endif
return true
endfunction
function BB0 takes nothing returns nothing
if BBz() then
call DestroyEffectBJ(Uu[0])
call QuestSetCompletedBJ(YW[0],true)
call DestroyQuest(YW[0])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BBv))
call ForGroupBJ(Tj,function BBx)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF500 опыта|r, |c00ffff0050 золота|r, |c00ff96962 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BBy() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+150
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+6
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
call DisableTrigger(GetTriggeringTrigger())
else
call nX(GetTriggerUnit(),"Задание с |c00ff00002|r уровня",.027,255,255,255)
endif
endfunction
function BB1 takes nothing returns nothing
set Ya=CreateTrigger()
call DisableTrigger(Ya)
call TriggerRegisterAnyUnitEventBJ(Ya,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Ya,Condition(function BBq))
call TriggerAddAction(Ya,function BB0)
endfunction
function BB2 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686B6E69) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BB3 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=5) then
return false
endif
return true
endfunction
function BB4 takes nothing returns nothing
if BB3() then
call DestroyEffectBJ(Uu[1])
call AddSpecialEffectTargetUnitBJ("overhead",KL,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[1]=GetLastCreatedEffectBJ()
call EnableTrigger(Yc)
call ShowUnitShow(Lh)
call PauseUnitBJ(false,Lh)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Месть\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 5-10|r")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Месть","|c006969FFУровень задания: 5-10|r
У многих ведь есть братья, сестры, да? И не все их любят. Я прав? так вот, я своего брата НЕНАВИЖУ! Спросите почему? Он убил мою невесту из-за своих личных побуждений!!! ","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[1]=GetLastCreatedQuestBJ()
call DisableTrigger(GetTriggeringTrigger())
else
call nX(GetTriggerUnit(),"Задание с |c00ff00005|r уровня",.027,255,255,255)
endif
endfunction
function BB5 takes nothing returns nothing
set Yb=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yb,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yb,Condition(function BB2))
call TriggerAddAction(Yb,function BB4)
endfunction
function BB6 takes nothing returns boolean
if not (GetDyingUnit()==Lh) then
return false
endif
return true
endfunction
function BB7 takes nothing returns nothing
call DestroyEffectBJ(Uu[1])
call EnableTrigger(Yd)
set YU[16]=GetUnitLoc(GetTriggerUnit())
call AddSpecialEffectTargetUnitBJ("overhead",KL,"war3mapImported\\QuestYellow1.mdx")
set Uu[1]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Брат убит! Вернитесь к Всаднику за наградой|r")
call DisableTrigger(GetTriggeringTrigger())
call RemoveLocation(YU[16])
endfunction
function BB8 takes nothing returns nothing
set Yc=CreateTrigger()
call DisableTrigger(Yc)
call TriggerRegisterAnyUnitEventBJ(Yc,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Yc,Condition(function BB6))
call TriggerAddAction(Yc,function BB7)
endfunction
function BB9 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686B6E69) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BCB takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BCC takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BCD takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BCE takes nothing returns boolean
return GetBooleanAnd(BCC(),BCD())
endfunction
function BCF takes nothing returns boolean
return GetBooleanAnd(BCB(),BCE())
endfunction
function BCG takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=5) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=10) then
return false
endif
return true
endfunction
function BCH takes nothing returns nothing
if BCG() then
call AddHeroXP(GetEnumUnit(),1000,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1000
else
endif
endfunction
function BCI takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=5) then
return false
endif
return true
endfunction
function BCJ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=5) then
return false
endif
return true
endfunction
function BCK takes nothing returns nothing
if BCJ() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[1])
call QuestSetCompletedBJ(YW[1],true)
call DestroyQuest(YW[1])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BCF))
call ForGroupBJ(Tj,function BCH)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1000 опыта|r, |c00ffff00100 золота|r, |c00ff96964 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BCI() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+300
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+12
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
call TriggerSleepAction(5.)
call AddSpecialEffectTargetUnitBJ("origin",KL,"war3mapImported\\TalkToMev2.mdx")
set Uu[1]=GetLastCreatedEffectBJ()
call EnableTrigger(Ye)
else
call nX(GetTriggerUnit(),"Задание с |c00ff00005|r уровня",.027,255,255,255)
endif
endfunction
function BCL takes nothing returns nothing
set Yd=CreateTrigger()
call DisableTrigger(Yd)
call TriggerRegisterAnyUnitEventBJ(Yd,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yd,Condition(function BB9))
call TriggerAddAction(Yd,function BCK)
endfunction
function BCM takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686B6E69) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BCN takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=6) then
return false
endif
return true
endfunction
function BCO takes nothing returns nothing
if BCN() then
call EnableTrigger(Yf)
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[1])
call AddSpecialEffectTargetUnitBJ("overhead",KL,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[1]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Месть. Часть вторая\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 6-13|r")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Месть. Часть вторая","Ну раз уж такая пьянка пошла, все всех убивают. кровь льется... Эх! Где мои молодые годы, побегал бы с вами. Но... Ладно, убьете огромное Дерево? Бесит меня, когда рядом п","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[1]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff00006|r уровня",.027,255,255,255)
endif
endfunction
function BCP takes nothing returns nothing
set Ye=CreateTrigger()
call DisableTrigger(Ye)
call TriggerRegisterAnyUnitEventBJ(Ye,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Ye,Condition(function BCM))
call TriggerAddAction(Ye,function BCO)
endfunction
function BCQ takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303048) then
return false
endif
return true
endfunction
function BCR takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Yg)
call DestroyEffectBJ(Uu[1])
call AddSpecialEffectTargetUnitBJ("overhead",KL,"war3mapImported\\QuestYellow1.mdx")
set Uu[1]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Дерево убито! Вернитесь к Всаднику за наградой|r")
endfunction
function BCS takes nothing returns nothing
set Yf=CreateTrigger()
call DisableTrigger(Yf)
call TriggerRegisterAnyUnitEventBJ(Yf,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Yf,Condition(function BCQ))
call TriggerAddAction(Yf,function BCR)
endfunction
function BCT takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686B6E69) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BCU takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BCV takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BCW takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BCX takes nothing returns boolean
return GetBooleanAnd(BCV(),BCW())
endfunction
function BCY takes nothing returns boolean
return GetBooleanAnd(BCU(),BCX())
endfunction
function BCZ takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=6) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=13) then
return false
endif
return true
endfunction
function BCa takes nothing returns nothing
if BCZ() then
call AddHeroXP(GetEnumUnit(),1500,false)
else
endif
endfunction
function BCb takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=6) then
return false
endif
return true
endfunction
function BCc takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=6) then
return false
endif
return true
endfunction
function BCd takes nothing returns nothing
if BCc() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[1])
call QuestSetCompletedBJ(YW[1],true)
call DestroyQuest(YW[1])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BCY))
call ForGroupBJ(Tj,function BCa)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1500 опыта|r, |c00ffff00150 золота|r, |c00ff96964 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BCb() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+450
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+12
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff00006|r уровня",.027,255,255,255)
endif
endfunction
function BCe takes nothing returns nothing
set Yg=CreateTrigger()
call DisableTrigger(Yg)
call TriggerRegisterAnyUnitEventBJ(Yg,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yg,Condition(function BCT))
call TriggerAddAction(Yg,function BCd)
endfunction
function BCf takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E766C77) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BCg takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=2) then
return false
endif
return true
endfunction
function BCh takes nothing returns nothing
if BCg() then
call DestroyEffectBJ(Uu[2])
call AddSpecialEffectTargetUnitBJ("overhead",KS,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[2]=GetLastCreatedEffectBJ()
call EnableTrigger(Yi)
call EnableTrigger(Yj)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"В Лесу\"")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 2-5|r")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"В Лесу","Мои дети. . . Мои любимые деточки! Вчера они пошли в лес но так и не вернулись. Я в отчаянии прошу помощи героев
|c00FF0000Уровень задания: 2-5|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[2]=GetLastCreatedQuestBJ()
call DisableTrigger(GetTriggeringTrigger())
else
call nX(GetTriggerUnit(),"Задание с |c00ff00002|r уровня",.027,255,255,255)
endif
endfunction
function BCi takes nothing returns nothing
set Yh=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yh,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yh,Condition(function BCf))
call TriggerAddAction(Yh,function BCh)
endfunction
function BCj takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303044))==true) then
return false
endif
return true
endfunction
function BCk takes nothing returns nothing
call DestroyEffectBJ(Uu[2])
call EnableTrigger(Yk)
call DisableTrigger(Yi)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Дети найдены и спасены! Вернитесь за наградой!|r")
call AddSpecialEffectTargetUnitBJ("overhead",KS,"war3mapImported\\QuestYellow1.mdx")
set Uu[2]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303044))
set YU[17]=GetUnitLoc(KR)
call SetUnitPositionLoc(Ig,YU[17])
call SetUnitPositionLoc(Ia,YU[17])
call RemoveLocation(YU[17])
endfunction
function BCl takes nothing returns nothing
set Yj=CreateTrigger()
call DisableTrigger(Yj)
call TriggerRegisterEnterRectSimple(Yj,N)
call TriggerAddCondition(Yj,Condition(function BCj))
call TriggerAddAction(Yj,function BCk)
endfunction
function BCm takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BCn takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_ALWAYSHINT,"|cffffcc00Помогите нам вернуться домой!|r")
endfunction
function BCo takes nothing returns nothing
set Yi=CreateTrigger()
call DisableTrigger(Yi)
call TriggerRegisterEnterRectSimple(Yi,N)
call TriggerAddCondition(Yi,Condition(function BCm))
call TriggerAddAction(Yi,function BCn)
endfunction
function BCp takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E766C77) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BCq takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BCr takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BCs takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BCt takes nothing returns boolean
return GetBooleanAnd(BCr(),BCs())
endfunction
function BCu takes nothing returns boolean
return GetBooleanAnd(BCq(),BCt())
endfunction
function BCv takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=2) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=5) then
return false
endif
return true
endfunction
function BCw takes nothing returns nothing
if BCv() then
call AddHeroXP(GetEnumUnit(),400,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+400
else
endif
endfunction
function BCx takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=2) then
return false
endif
return true
endfunction
function BCy takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=2) then
return false
endif
return true
endfunction
function BCz takes nothing returns nothing
if BCy() then
call DisableTrigger(GetTriggeringTrigger())
call QuestSetCompletedBJ(YW[2],true)
call DestroyQuest(YW[2])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BCu))
call ForGroupBJ(Tj,function BCw)
call DestroyGroup(Tj)
set Sh=Sh+1
call DestroyEffectBJ(Uu[2])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF400 опыта|r, |c00ffff0070 золота|r, |c00ff96962 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BCx() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+210
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+6
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff00002|r уровня",.027,255,255,255)
endif
endfunction
function BC0 takes nothing returns nothing
set Yk=CreateTrigger()
call DisableTrigger(Yk)
call TriggerRegisterAnyUnitEventBJ(Yk,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yk,Condition(function BCp))
call TriggerAddAction(Yk,function BCz)
endfunction
function BC1 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F726578) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BC2 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=9) then
return false
endif
return true
endfunction
function BC3 takes nothing returns nothing
if BC2() then
call DestroyEffectBJ(Uu[3])
call AddSpecialEffectTargetUnitBJ("overhead",KT,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[3]=GetLastCreatedEffectBJ()
call EnableTrigger(Ym)
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(KU,Player(11),true)
call SetUnitOwner(KV,Player(11),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Почти сдох\"")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 9-14|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Почти сдох","|c006969FFУровень задания: 9-14|r
Здраствуйте, салаги! На будущее - вы все уже трупы! Но за время своей жалкой жизни можете оказать мне ещё одну услугу: убейте Мертвое Отродье, которое поселилось недалеко в Лесу. Его пещера находится между трёх огней, проход к которой откроет ключ, что сьели мои медведи.","ReplaceableTextures\\CommandButtons\\BTNGhoul.blp")
set YW[3]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff00009|r уровня",.027,255,255,255)
endif
endfunction
function BC4 takes nothing returns nothing
set Yl=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yl,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yl,Condition(function BC1))
call TriggerAddAction(Yl,function BC3)
endfunction
function BC5 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303047))==true) then
return false
endif
return true
endfunction
function BC6 takes nothing returns nothing
call EnableTrigger(Yn)
call EnableTrigger(Vh)
call DisableTrigger(GetTriggeringTrigger())
set YU[19]=GetRectCenter(Q)
call SetUnitPositionLoc(GetEnteringUnit(),YU[19])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303047))
call RemoveLocation(YU[19])
endfunction
function BC7 takes nothing returns nothing
set Ym=CreateTrigger()
call DisableTrigger(Ym)
call TriggerRegisterEnterRectSimple(Ym,O)
call TriggerAddCondition(Ym,Condition(function BC5))
call TriggerAddAction(Ym,function BC6)
endfunction
function BC8 takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BC9 takes nothing returns nothing
set YU[20]=GetRectCenter(R)
call SetUnitPositionLoc(GetEnteringUnit(),YU[20])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[20],0)
call RemoveLocation(YU[20])
endfunction
function BDB takes nothing returns nothing
set Vh=CreateTrigger()
call DisableTrigger(Vh)
call TriggerRegisterEnterRectSimple(Vh,O)
call TriggerAddCondition(Vh,Condition(function BC8))
call TriggerAddAction(Vh,function BC9)
endfunction
function BDC takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BDD takes nothing returns nothing
set YU[21]=GetRectCenter(P)
call SetUnitPositionLoc(GetEnteringUnit(),YU[21])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[21],0)
call RemoveLocation(YU[21])
endfunction
function BDE takes nothing returns nothing
set Yn=CreateTrigger()
call DisableTrigger(Yn)
call TriggerRegisterEnterRectSimple(Yn,Q)
call TriggerAddCondition(Yn,Condition(function BDC))
call TriggerAddAction(Yn,function BDD)
endfunction
function BDF takes nothing returns nothing
call DestroyEffectBJ(Uu[3])
call EnableTrigger(Vg)
call AddSpecialEffectTargetUnitBJ("overhead",KT,"war3mapImported\\QuestYellow1.mdx")
set Uu[3]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Отродье осталось гнить в своем логове. Возвращайтесь за наградой|r")
call DisableTrigger(Vh)
endfunction
function BDG takes nothing returns nothing
set Yo=CreateTrigger()
call TriggerRegisterUnitEvent(Yo,K4,EVENT_UNIT_DEATH)
call TriggerAddAction(Yo,function BDF)
endfunction
function BDH takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F726578) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BDI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BDJ takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BDK takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BDL takes nothing returns boolean
return GetBooleanAnd(BDJ(),BDK())
endfunction
function BDM takes nothing returns boolean
return GetBooleanAnd(BDI(),BDL())
endfunction
function BDN takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=9) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=14) then
return false
endif
return true
endfunction
function BDO takes nothing returns nothing
if BDN() then
call AddHeroXP(GetEnumUnit(),1800,false)
else
endif
endfunction
function BDP takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=9) then
return false
endif
return true
endfunction
function BDQ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=9) then
return false
endif
return true
endfunction
function BDR takes nothing returns nothing
if BDQ() then
call DestroyEffectBJ(Uu[3])
call QuestSetCompletedBJ(YW[3],true)
call DestroyQuest(YW[3])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BDM))
call ForGroupBJ(Tj,function BDO)
call DestroyGroup(Tj)
set Sh=Sh+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1800 опыта|r, |c00ffff00150 золота|r, |c00ff96964 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BDP() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+450
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+12
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff00009|r уровня",.027,255,255,255)
endif
endfunction
function BDS takes nothing returns nothing
set Vg=CreateTrigger()
call DisableTrigger(Vg)
call TriggerRegisterAnyUnitEventBJ(Vg,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Vg,Condition(function BDH))
call TriggerAddAction(Vg,function BDR)
endfunction
function BDT takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$48616D67) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BDU takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Полный контроль\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 1-5|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Полный контроль","Видели Лес? Он кишит всякими тварями, которые так и жаждут выпустить тебе кишки через рот! И вот для того, чтобы я мог четко контролировать все действия в Лесу, нужно расположить |c0000FF005 генераторов по 5 точкам|r! Каждая точка будет помечена |c0000FF00зеленой руной|r. Вперед, за работу!!!
|c006969FFУровень задания: 1-5|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[4]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Uu[4])
call AddSpecialEffectTargetUnitBJ("overhead",KW,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[4]=GetLastCreatedEffectBJ()
set YU[22]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($4930304A,YU[22])
call RemoveLocation(YU[22])
endfunction
function BDV takes nothing returns nothing
set Yp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yp,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yp,Condition(function BDT))
call TriggerAddAction(Yp,function BDU)
endfunction
function BDW takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930304A) then
return false
endif
return true
endfunction
function BDX takes nothing returns boolean
if not (RectContainsUnit(V,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BDY takes nothing returns boolean
if not (RectContainsUnit(X,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BDZ takes nothing returns boolean
if not (RectContainsUnit(W,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BDa takes nothing returns boolean
if not (RectContainsUnit(U,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BDb takes nothing returns boolean
if not (RectContainsUnit(T,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BDc takes nothing returns boolean
if not (Rb[999]>=5) then
return false
endif
return true
endfunction
function BDd takes nothing returns nothing
if BDX() then
call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$68303152,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),270.)
call RemoveRect(V)
set Rb[999]=Rb[999]+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторов установлено|r: "+(I2S(Rb[999])+"/|c0000ff005"))
else
endif
if BDY() then
call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$68303152,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),270.)
call RemoveRect(X)
set Rb[999]=Rb[999]+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторов установлено|r: "+(I2S(Rb[999])+"/|c0000ff005"))
else
endif
if BDZ() then
call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$68303152,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),270.)
call RemoveRect(W)
set Rb[999]=Rb[999]+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторов установлено|r: "+(I2S(Rb[999])+"/|c0000ff005"))
else
endif
if BDa() then
call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$68303152,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),270.)
call RemoveRect(U)
set Rb[999]=Rb[999]+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторов установлено|r: "+(I2S(Rb[999])+"/|c0000ff005"))
else
endif
if BDb() then
call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$68303152,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),270.)
call RemoveRect(T)
set Rb[999]=Rb[999]+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторов установлено|r: "+(I2S(Rb[999])+"/|c0000ff005"))
else
endif
if BDc() then
call DestroyEffectBJ(Uu[4])
call AddSpecialEffectTargetUnitBJ("overhead",KW,"war3mapImported\\QuestYellow1.mdx")
set Uu[4]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ff00ffВсе генераторы на месте. Вернитесь за наградой")
call EnableTrigger(Yr)
call RemoveItem(nI(GetTriggerUnit(),$4930304A))
else
endif
endfunction
function BDe takes nothing returns nothing
set Yq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yq,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(Yq,Condition(function BDW))
call TriggerAddAction(Yq,function BDd)
endfunction
function BDf takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$48616D67) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BDg takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BDh takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BDi takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BDj takes nothing returns boolean
return GetBooleanAnd(BDh(),BDi())
endfunction
function BDk takes nothing returns boolean
return GetBooleanAnd(BDg(),BDj())
endfunction
function BDl takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=1) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=5) then
return false
endif
return true
endfunction
function BDm takes nothing returns nothing
if BDl() then
call AddHeroXP(GetEnumUnit(),450,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+450
else
endif
endfunction
function BDn takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=2) then
return false
endif
return true
endfunction
function BDo takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[4])
call QuestSetCompletedBJ(YW[4],true)
call DestroyQuest(YW[4])
set YU[23]=GetRectCenter(T)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторы:|r 5/5
Молодцы! Награда не заставит себя ждать.")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BDk))
call ForGroupBJ(Tj,function BDm)
call DestroyGroup(Tj)
set Sh=Sh+1
call RemoveLocation(YU[23])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF450 опыта|r, |c00ffff0070 золота|r, |c00ff96962 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BDn() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+210
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+6
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BDp takes nothing returns nothing
set Yr=CreateTrigger()
call DisableTrigger(Yr)
call TriggerRegisterAnyUnitEventBJ(Yr,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yr,Condition(function BDf))
call TriggerAddAction(Yr,function BDo)
endfunction
function BDq takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E73716F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BDr takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=11) then
return false
endif
return true
endfunction
function BDs takes nothing returns nothing
if BDr() then
call DestroyEffectBJ(Uu[5])
call AddSpecialEffectTargetUnitBJ("overhead",KK,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[5]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Великая опасность\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 11-18|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Великая опасность","|c006969FFУровень задания: 11-18|r
Наш Лес погибает... За каждым кустом прячется злобный монстр, под каждым камнем враги. Виной всему Разрушитель Природы, который поработил всех существ Леса и предварительно торавляет моральных дух его жителей. Что делать, думаю не нужно обьяснять.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[5]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000011|r уровня",.027,255,255,255)
endif
endfunction
function BDt takes nothing returns nothing
set Ys=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Ys,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Ys,Condition(function BDq))
call TriggerAddAction(Ys,function BDs)
endfunction
function BDu takes nothing returns nothing
call DestroyEffectBJ(Uu[5])
call EnableTrigger(Yu)
call AddSpecialEffectTargetUnitBJ("overhead",KK,"war3mapImported\\QuestYellow1.mdx")
set Uu[5]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Вы отомстили за Лес!|r")
call DisableTrigger(Ys)
endfunction
function BDv takes nothing returns nothing
set Yt=CreateTrigger()
call TriggerRegisterUnitEvent(Yt,K3,EVENT_UNIT_DEATH)
call TriggerAddAction(Yt,function BDu)
endfunction
function BDw takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E73716F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BDx takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BDy takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BDz takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BD0 takes nothing returns boolean
return GetBooleanAnd(BDy(),BDz())
endfunction
function BD1 takes nothing returns boolean
return GetBooleanAnd(BDx(),BD0())
endfunction
function BD2 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=11) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=18) then
return false
endif
return true
endfunction
function BD3 takes nothing returns nothing
if BD2() then
call AddHeroXP(GetEnumUnit(),2000,false)
else
endif
endfunction
function BD4 takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=11) then
return false
endif
return true
endfunction
function BD5 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=11) then
return false
endif
return true
endfunction
function BD6 takes nothing returns nothing
if BD5() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Uu[5])
call QuestSetCompletedBJ(YW[5],true)
call DestroyQuest(YW[5])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BD1))
call ForGroupBJ(Tj,function BD3)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2000 опыта|r, |c00ffff00200 золота|r, |c00ff96965 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BD4() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+600
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+15
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000011|r уровня",.027,255,255,255)
endif
endfunction
function BD7 takes nothing returns nothing
set Yu=CreateTrigger()
call DisableTrigger(Yu)
call TriggerRegisterAnyUnitEventBJ(Yu,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yu,Condition(function BDw))
call TriggerAddAction(Yu,function BD6)
endfunction
function BD8 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686D696C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BD9 takes nothing returns nothing
call DestroyEffectBJ(Uu[7])
call AddSpecialEffectTargetUnitBJ("overhead",If,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[7]=GetLastCreatedEffectBJ()
call EnableTrigger(Yw)
call EnableTrigger(Yx)
call EnableTrigger(Yy)
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Яд во благо\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 13-18|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Яд во благо","Соберите с пауков |c0000FF00по одному виду их яда|r, а потом приходите ко мне
|c006969FFУровень задания: 13-18|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[7]=GetLastCreatedQuestBJ()
endfunction
function BEB takes nothing returns nothing
set Yv=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yv,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yv,Condition(function BD8))
call TriggerAddAction(Yv,function BD9)
endfunction
function BEC takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$6E303044) then
return false
endif
return true
endfunction
function BED takes nothing returns boolean
if not (QR[0]==1) then
return false
endif
return true
endfunction
function BEE takes nothing returns nothing
set QR[0]=GetRandomInt(1,8)
if BED() then
call DisableTrigger(GetTriggeringTrigger())
set Yz[0]=GetUnitLoc(GetDyingUnit())
call CreateItemLoc($4930304E,Yz[0])
call RemoveLocation(Yz[0])
else
call DoNothing()
endif
endfunction
function BEF takes nothing returns nothing
set Yw=CreateTrigger()
call DisableTrigger(Yw)
call TriggerRegisterAnyUnitEventBJ(Yw,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Yw,Condition(function BEC))
call TriggerAddAction(Yw,function BEE)
endfunction
function BEG takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$6E303045) then
return false
endif
return true
endfunction
function BEH takes nothing returns boolean
if not (QR[1]==1) then
return false
endif
return true
endfunction
function BEI takes nothing returns nothing
set QR[1]=GetRandomInt(1,8)
set Yz[1]=GetUnitLoc(GetDyingUnit())
if BEH() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($4930304D,Yz[1])
else
call DoNothing()
endif
call RemoveLocation(Yz[1])
endfunction
function BEJ takes nothing returns nothing
set Yy=CreateTrigger()
call DisableTrigger(Yy)
call TriggerRegisterAnyUnitEventBJ(Yy,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Yy,Condition(function BEG))
call TriggerAddAction(Yy,function BEI)
endfunction
function BEK takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$6E303046) then
return false
endif
return true
endfunction
function BEL takes nothing returns boolean
if not (QR[2]==1) then
return false
endif
return true
endfunction
function BEM takes nothing returns nothing
set QR[2]=GetRandomInt(1,8)
set Yz[2]=GetUnitLoc(GetDyingUnit())
if BEL() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($4930304F,Yz[2])
else
call DoNothing()
endif
call RemoveLocation(Yz[2])
endfunction
function BEN takes nothing returns nothing
set Yx=CreateTrigger()
call DisableTrigger(Yx)
call TriggerRegisterAnyUnitEventBJ(Yx,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Yx,Condition(function BEK))
call TriggerAddAction(Yx,function BEM)
endfunction
function BEO takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930304D then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304F then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304E then
return true
endif
return false
endfunction
function BEP takes nothing returns boolean
if not BEO() then
return false
endif
return true
endfunction
function BEQ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Яды:|r 1/3")
call TriggerSleepAction(.2)
call EnableTrigger(Y1)
endfunction
function BER takes nothing returns nothing
set Y0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Y0,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Y0,Condition(function BEP))
call TriggerAddAction(Y0,function BEQ)
endfunction
function BES takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930304D then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304F then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304E then
return true
endif
return false
endfunction
function BET takes nothing returns boolean
if not BES() then
return false
endif
return true
endfunction
function BEU takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Яды:|r 2/3")
call TriggerSleepAction(.2)
call EnableTrigger(Y2)
endfunction
function BEV takes nothing returns nothing
set Y1=CreateTrigger()
call DisableTrigger(Y1)
call TriggerRegisterAnyUnitEventBJ(Y1,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Y1,Condition(function BET))
call TriggerAddAction(Y1,function BEU)
endfunction
function BEW takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930304D then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304F then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304E then
return true
endif
return false
endfunction
function BEX takes nothing returns boolean
if not BEW() then
return false
endif
return true
endfunction
function BEY takes nothing returns nothing
call DestroyEffect(Uu[7])
call EnableTrigger(Y3)
call DisableTrigger(GetTriggeringTrigger())
call AddSpecialEffectTargetUnitBJ("overhead",If,"war3mapImported\\QuestYellow1.mdx")
set Uu[7]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Яды:|r 3/3
Вернитесь за наградой!")
endfunction
function BEZ takes nothing returns nothing
set Y2=CreateTrigger()
call DisableTrigger(Y2)
call TriggerRegisterAnyUnitEventBJ(Y2,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Y2,Condition(function BEX))
call TriggerAddAction(Y2,function BEY)
endfunction
function BEa takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686D696C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BEb takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BEc takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BEd takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BEe takes nothing returns boolean
return GetBooleanAnd(BEc(),BEd())
endfunction
function BEf takes nothing returns boolean
return GetBooleanAnd(BEb(),BEe())
endfunction
function BEg takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=13) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=18) then
return false
endif
return true
endfunction
function BEh takes nothing returns nothing
if BEg() then
call AddHeroXP(GetEnumUnit(),1000,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1000
else
endif
endfunction
function BEi takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=13) then
return false
endif
return true
endfunction
function BEj takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[7])
call QuestSetCompletedBJ(YW[7],true)
call DestroyQuest(YW[7])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BEf))
call ForGroupBJ(Tj,function BEh)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1000 опыта|r, |c00ffff00150 золота|r, |c00ff96964 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BEi() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+450
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+12
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BEk takes nothing returns nothing
set Y3=CreateTrigger()
call DisableTrigger(Y3)
call TriggerRegisterAnyUnitEventBJ(Y3,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Y3,Condition(function BEa))
call TriggerAddAction(Y3,function BEj)
endfunction
function BEl takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6D726D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BEm takes nothing returns nothing
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[8])
call AddSpecialEffectTargetUnitBJ("overhead",Ic,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[8]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Y5)
set YU[24]=GetUnitLoc(GetTriggerUnit())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Частички Зла\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 13-20|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Частички Зла","Пауки никогда не любили огонь. И вот неожиданно в лесу появляется 4 костра, каждый из которых под охраной Элементаля. Обезвредьте все костры, молю Вас!
|c006969FFУровень задания: 13-20|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[8]=GetLastCreatedQuestBJ()
call RemoveLocation(YU[24])
call ShowUnitShow(Lc)
call PauseUnitBJ(false,Lc)
call ShowUnitShow(Ld)
call PauseUnitBJ(false,Ld)
call ShowUnitShow(Lg)
call PauseUnitBJ(false,Lg)
call ShowUnitShow(Le)
call PauseUnitBJ(false,Le)
endfunction
function BEn takes nothing returns nothing
set Y4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Y4,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Y4,Condition(function BEl))
call TriggerAddAction(Y4,function BEm)
endfunction
function BEo takes nothing returns boolean
if not (GetDyingUnit()==Lc) then
return false
endif
return true
endfunction
function BEp takes nothing returns boolean
if not (GetDyingUnit()==Ld) then
return false
endif
return true
endfunction
function BEq takes nothing returns boolean
if not (GetDyingUnit()==Lg) then
return false
endif
return true
endfunction
function BEr takes nothing returns boolean
if not (GetDyingUnit()==Le) then
return false
endif
return true
endfunction
function BEs takes nothing returns boolean
if not (IsUnitDeadBJ(Lc)==true) then
return false
endif
if not (IsUnitDeadBJ(Ld)==true) then
return false
endif
if not (IsUnitDeadBJ(Le)==true) then
return false
endif
if not (IsUnitDeadBJ(Lg)==true) then
return false
endif
return true
endfunction
function BEt takes nothing returns nothing
set YU[25]=GetUnitLoc(GetTriggerUnit())
if BEo() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFСущность Огня |c00ff0000мертва")
call CreateItemLoc($49303650,YU[25])
else
endif
if BEp() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFСущность Льда |c00ff0000мертва")
call CreateItemLoc($49303651,YU[25])
else
endif
if BEq() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFСущность Природы |c00ff0000мертва")
call CreateItemLoc($49303652,YU[25])
else
endif
if BEr() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFСущность Тьмы |c00ff0000мертва")
call CreateItemLoc($49303653,YU[25])
else
endif
call RemoveLocation(YU[25])
if BEs() then
call DestroyEffectBJ(Uu[8])
call AddSpecialEffectTargetUnitBJ("overhead",Ic,"war3mapImported\\QuestYellow1.mdx")
set Uu[8]=GetLastCreatedEffectBJ()
call EnableTrigger(Y6)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFВсе сущности убиты. Вернитесь за наградой.")
else
endif
endfunction
function BEu takes nothing returns nothing
set Y5=CreateTrigger()
call DisableTrigger(Y5)
call TriggerRegisterAnyUnitEventBJ(Y5,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Y5,function BEt)
endfunction
function BEv takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6D726D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BEw takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BEx takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BEy takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BEz takes nothing returns boolean
return GetBooleanAnd(BEx(),BEy())
endfunction
function BE0 takes nothing returns boolean
return GetBooleanAnd(BEw(),BEz())
endfunction
function BE1 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=13) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=20) then
return false
endif
return true
endfunction
function BE2 takes nothing returns nothing
if BE1() then
call AddHeroXP(GetEnumUnit(),1100,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1100
else
endif
endfunction
function BE3 takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=13) then
return false
endif
return true
endfunction
function BE4 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[8])
call QuestSetCompletedBJ(YW[8],true)
call DestroyQuest(YW[8])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BE0))
call ForGroupBJ(Tj,function BE2)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1100 опыта|r, |c00ffff00200 золота|r, |c00ff96965 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BE3() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+600
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+15
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BE5 takes nothing returns nothing
set Y6=CreateTrigger()
call DisableTrigger(Y6)
call TriggerRegisterAnyUnitEventBJ(Y6,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Y6,Condition(function BEv))
call TriggerAddAction(Y6,function BE4)
endfunction
function BE6 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E647470) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BE7 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=16) then
return false
endif
return true
endfunction
function BE8 takes nothing returns nothing
if BE7() then
call DestroyEffectBJ(Uu[9])
call AddSpecialEffectTargetUnitBJ("overhead",Ii,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[9]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Ядовитая опасность\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 16-22|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Ядовитая опасность","|c006969FFУровень задания: 16-22|r
Видели этот участок Леса? Везде пауки, будь они неладны! И их всё больше и больше!!! Да-да! Так вот, единственный способ перестать им плодиться дальше - убить их мамочку, что скрывается в пещере недалеко отсюда","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[9]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call nX(GetTriggerUnit(),"Задание с |c00ff000016|r уровня",.027,255,255,255)
endif
endfunction
function BE9 takes nothing returns nothing
set Y7=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Y7,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Y7,Condition(function BE6))
call TriggerAddAction(Y7,function BE8)
endfunction
function BFB takes nothing returns nothing
call DestroyEffectBJ(Uu[9])
call EnableTrigger(Y9)
call AddSpecialEffectTargetUnitBJ("overhead",Ii,"war3mapImported\\QuestYellow1.mdx")
set Uu[9]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Мать пауков гниет в своей пещере. Миссия выполнена!!!|r")
call DisableTrigger(Y7)
endfunction
function BFC takes nothing returns nothing
set Y8=CreateTrigger()
call TriggerRegisterUnitEvent(Y8,Kx,EVENT_UNIT_DEATH)
call TriggerAddAction(Y8,function BFB)
endfunction
function BFD takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E647470) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BFE takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BFF takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BFG takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BFH takes nothing returns boolean
return GetBooleanAnd(BFF(),BFG())
endfunction
function BFI takes nothing returns boolean
return GetBooleanAnd(BFE(),BFH())
endfunction
function BFJ takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=16) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=22) then
return false
endif
return true
endfunction
function BFK takes nothing returns nothing
if BFJ() then
call AddHeroXP(GetEnumUnit(),3000,false)
else
endif
endfunction
function BFL takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=16) then
return false
endif
return true
endfunction
function BFM takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=16) then
return false
endif
return true
endfunction
function BFN takes nothing returns nothing
if BFM() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Uu[9])
call QuestSetCompletedBJ(YW[9],true)
call DestroyQuest(YW[9])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BFI))
call ForGroupBJ(Tj,function BFK)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00250 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BFL() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+750
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000016|r уровня",.027,255,255,255)
endif
endfunction
function BFO takes nothing returns nothing
set Y9=CreateTrigger()
call DisableTrigger(Y9)
call TriggerRegisterAnyUnitEventBJ(Y9,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Y9,Condition(function BFD))
call TriggerAddAction(Y9,function BFN)
endfunction
function BFP takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E62656C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BFQ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=19) then
return false
endif
return true
endfunction
function BFR takes nothing returns nothing
if BFQ() then
call DestroyEffectBJ(Uu[10])
call AddSpecialEffectTargetUnitBJ("overhead",KY,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[10]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ZC)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Наглый вор\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 19-23|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Наглый вор.","|c006969FFУровень задания: 19-23|r
Арена - замечательная штука. Там можно померяться силами с кем захочешь. Но бывать настолько гнилые враги, которые идут на откровенную дерзость. В последнем поединке ублюдок Разрушитель украл мой талисман и скрылся в Терассе Творцов. Найдите его и верните мне мою драгоценность","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[10]=GetLastCreatedQuestBJ()
call AddSpecialEffectTargetUnitBJ("overhead",Ij,"war3mapImported\\QuestYellow0.mdx")
set Uu[11]=GetLastCreatedEffectBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000019|r уровня",.027,255,255,255)
endif
endfunction
function BFS takes nothing returns nothing
set ZB=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZB,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZB,Condition(function BFP))
call TriggerAddAction(ZB,function BFR)
endfunction
function BFT takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4E706C68) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BFU takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=19) then
return false
endif
return true
endfunction
function BFV takes nothing returns nothing
if BFU() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[11])
call AddSpecialEffectTargetUnitBJ("overhead",Ij,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[11]=GetLastCreatedEffectBJ()
call EnableTrigger(ZD)
call DisableTrigger(GetTriggeringTrigger())
set YU[27]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($49303056,YU[27])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Сделка\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 19-23|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Сделка","|c006969FFУровень задания: 19-23|r
Ха-ха, жалкое подобие Героев??? Талисман? Он мой! Мечник недосмотрел, сам виноват. Но предлагаю сделку. Вы розберетесь с моим врагом и я отдам безделушку. Согласны? Хотя выбор у вас немного. Зарядите это Кольцо для вызова противника на поединок! Для начала отнесите его к башне драконов, которая находится в самом начале локации.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[11]=GetLastCreatedQuestBJ()
call RemoveLocation(YU[27])
else
call nX(GetTriggerUnit(),"Задание с |c00ff000019|r уровня",.027,255,255,255)
endif
endfunction
function BFW takes nothing returns nothing
set ZC=CreateTrigger()
call DisableTrigger(ZC)
call TriggerRegisterAnyUnitEventBJ(ZC,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZC,Condition(function BFT))
call TriggerAddAction(ZC,function BFV)
endfunction
function BFX takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303056))==true) then
return false
endif
return true
endfunction
function BFY takes nothing returns nothing
call EnableTrigger(ZE)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT," |c00FFFFFFДальше к статуи, которая находится на огненной земле!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303056))
call UnitAddItemByIdSwapped($49303055,GetEnteringUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnteringUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction
function BFZ takes nothing returns nothing
set ZD=CreateTrigger()
call DisableTrigger(ZD)
call TriggerRegisterEnterRectSimple(ZD,g)
call TriggerAddCondition(ZD,Condition(function BFX))
call TriggerAddAction(ZD,function BFY)
endfunction
function BFa takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303055))==true) then
return false
endif
return true
endfunction
function BFb takes nothing returns nothing
call EnableTrigger(ZF)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT," |c00FFFFFFИщите последнюю статую!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303055))
call UnitAddItemByIdSwapped($49303057,GetEnteringUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnteringUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction
function BFc takes nothing returns nothing
set ZE=CreateTrigger()
call DisableTrigger(ZE)
call TriggerRegisterEnterRectSimple(ZE,f)
call TriggerAddCondition(ZE,Condition(function BFa))
call TriggerAddAction(ZE,function BFb)
endfunction
function BFd takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303057))==true) then
return false
endif
return true
endfunction
function BFe takes nothing returns nothing
call EnableTrigger(ZG)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT," |c00FFFFFFКольцо заряжено, отнестите его на поляну папоротника для встречи с монстром!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303057))
call UnitAddItemByIdSwapped($49303058,GetEnteringUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnteringUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction
function BFf takes nothing returns nothing
set ZF=CreateTrigger()
call DisableTrigger(ZF)
call TriggerRegisterEnterRectSimple(ZF,e)
call TriggerAddCondition(ZF,Condition(function BFd))
call TriggerAddAction(ZF,function BFe)
endfunction
function BFg takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303058))==true) then
return false
endif
return true
endfunction
function BFh takes nothing returns nothing
call EnableTrigger(ZH)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT," |c00FFFFFFГотовы к Битве????|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303058))
call ShowUnitShow(La)
call PauseUnitBJ(false,La)
endfunction
function BFi takes nothing returns nothing
set ZG=CreateTrigger()
call DisableTrigger(ZG)
call TriggerRegisterEnterRectSimple(ZG,h)
call TriggerAddCondition(ZG,Condition(function BFg))
call TriggerAddAction(ZG,function BFh)
endfunction
function BFj takes nothing returns boolean
if not (GetDyingUnit()==La) then
return false
endif
return true
endfunction
function BFk takes nothing returns nothing
call DestroyEffectBJ(Uu[11])
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ZI)
call AddSpecialEffectTargetUnitBJ("overhead",Ij,"war3mapImported\\QuestYellow1.mdx")
set Uu[11]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Враг Разрушителя пал|r")
endfunction
function BFl takes nothing returns nothing
set ZH=CreateTrigger()
call DisableTrigger(ZH)
call TriggerRegisterAnyUnitEventBJ(ZH,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ZH,Condition(function BFj))
call TriggerAddAction(ZH,function BFk)
endfunction
function BFm takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4E706C68) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BFn takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=19) then
return false
endif
return true
endfunction
function BFo takes nothing returns nothing
if BFn() then
call DestroyEffectBJ(Uu[11])
call DestroyEffectBJ(Uu[10])
call AddSpecialEffectTargetUnitBJ("overhead",KY,"war3mapImported\\QuestYellow1.mdx")
set Uu[10]=GetLastCreatedEffectBJ()
call EnableTrigger(ZJ)
call DisableTrigger(GetTriggeringTrigger())
set YU[27]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($49303059,YU[27])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|cffffcc00Задание выполнено:|r \"Сделка\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Молодцы! Держите этот жалкий талисманчик...")
call QuestSetCompletedBJ(YW[11],true)
call DestroyQuest(YW[11])
call RemoveLocation(YU[27])
else
call nX(GetTriggerUnit(),"Задание с |c00ff000019|r уровня",.027,255,255,255)
endif
endfunction
function BFp takes nothing returns nothing
set ZI=CreateTrigger()
call DisableTrigger(ZI)
call TriggerRegisterAnyUnitEventBJ(ZI,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZI,Condition(function BFm))
call TriggerAddAction(ZI,function BFo)
endfunction
function BFq takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303059))==true) then
return false
endif
return true
endfunction
function BFr takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BFs takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BFt takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BFu takes nothing returns boolean
return GetBooleanAnd(BFs(),BFt())
endfunction
function BFv takes nothing returns boolean
return GetBooleanAnd(BFr(),BFu())
endfunction
function BFw takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=19) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=23) then
return false
endif
return true
endfunction
function BFx takes nothing returns nothing
if BFw() then
call AddHeroXP(GetEnumUnit(),3500,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2400
else
endif
endfunction
function BFy takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=19) then
return false
endif
return true
endfunction
function BFz takes nothing returns nothing
call DestroyEffectBJ(Uu[10])
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303059))
call QuestSetCompletedBJ(YW[10],true)
call DestroyQuest(YW[10])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BFv))
call ForGroupBJ(Tj,function BFx)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2400 опыта|r, |c00ffff00250 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BFy() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+750
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BF0 takes nothing returns nothing
set ZJ=CreateTrigger()
call DisableTrigger(ZJ)
call TriggerRegisterEnterRectSimple(ZJ,d)
call TriggerAddCondition(ZJ,Condition(function BFq))
call TriggerAddAction(ZJ,function BFz)
endfunction
function BF1 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68777433) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BF2 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=22) then
return false
endif
return true
endfunction
function BF3 takes nothing returns nothing
if BF2() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[12])
call AddSpecialEffectTargetUnitBJ("overhead",Ie,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[12]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ZL)
set YU[28]=GetRectCenter(m)
call CreateItemLoc($4930305A,YU[28])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Очищение\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 22-26|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Очищение","Я очень люблю воду! По мне видно, да? Но я никогда не пробовал на вкус воду с ручья Тропиков. Принесите мне немного этой воды, и я Вас щедро вознагражу
|c006969FFУровень з","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[12]=GetLastCreatedQuestBJ()
call RemoveLocation(YU[28])
else
call nX(GetTriggerUnit(),"Задание с |c00ff000022|r уровня",.027,255,255,255)
endif
endfunction
function BF4 takes nothing returns nothing
set ZK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZK,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZK,Condition(function BF1))
call TriggerAddAction(ZK,function BF3)
endfunction
function BF5 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930305A))==true) then
return false
endif
return true
endfunction
function BF6 takes nothing returns nothing
call EnableTrigger(ZM)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT," |c001CE6B9Колба наполнена, вернитесь к Элементалю!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930305A))
call UnitAddItemByIdSwapped($49303130,GetEnteringUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnteringUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction
function BF7 takes nothing returns nothing
set ZL=CreateTrigger()
call DisableTrigger(ZL)
call TriggerRegisterEnterRectSimple(ZL,n)
call TriggerAddCondition(ZL,Condition(function BF5))
call TriggerAddAction(ZL,function BF6)
endfunction
function BF8 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303130))==true) then
return false
endif
return true
endfunction
function BF9 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BGB takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BGC takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BGD takes nothing returns boolean
return GetBooleanAnd(BGB(),BGC())
endfunction
function BGE takes nothing returns boolean
return GetBooleanAnd(BF9(),BGD())
endfunction
function BGF takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=22) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=26) then
return false
endif
return true
endfunction
function BGG takes nothing returns nothing
if BGF() then
call AddHeroXP(GetEnumUnit(),2000,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2000
else
endif
endfunction
function BGH takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=22) then
return false
endif
return true
endfunction
function BGI takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[12])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303130))
call QuestSetCompletedBJ(YW[12],true)
call DestroyQuest(YW[12])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BGE))
call ForGroupBJ(Tj,function BGG)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2000 опыта|r, |c00ffff00200 золота|r, |c00ff96965 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BGH() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+600
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+15
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BGJ takes nothing returns nothing
set ZM=CreateTrigger()
call DisableTrigger(ZM)
call TriggerRegisterEnterRectSimple(ZM,m)
call TriggerAddCondition(ZM,Condition(function BF8))
call TriggerAddAction(ZM,function BGI)
endfunction
function BGK takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68737074) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BGL takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=22) then
return false
endif
return true
endfunction
function BGM takes nothing returns nothing
if BGL() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[13])
call AddSpecialEffectTargetUnitBJ("overhead",Il,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[13]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Проверка Духа \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 22-28|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Проверка Духа","Герои? Сильные? Ну что ж, проверим... Убейте |c00FF0000Ксерона|r, главу драконов, посмотрим, на что Вы способны.
|c006969FFУровень задания: 23-28|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[13]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000022|r уровня",.027,255,255,255)
endif
endfunction
function BGN takes nothing returns nothing
set ZN=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZN,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZN,Condition(function BGK))
call TriggerAddAction(ZN,function BGM)
endfunction
function BGO takes nothing returns nothing
call DestroyEffectBJ(Uu[13])
call DisableTrigger(ZN)
call EnableTrigger(ZP)
call AddSpecialEffectTargetUnitBJ("overhead",Il,"war3mapImported\\QuestYellow1.mdx")
set Uu[13]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Ксерон убит! Вернитесь к Ведьмаку за наградой|r")
endfunction
function BGP takes nothing returns nothing
set ZO=CreateTrigger()
call TriggerRegisterUnitEvent(ZO,K7,EVENT_UNIT_DEATH)
call TriggerAddAction(ZO,function BGO)
endfunction
function BGQ takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68737074) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BGR takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BGS takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BGT takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BGU takes nothing returns boolean
return GetBooleanAnd(BGS(),BGT())
endfunction
function BGV takes nothing returns boolean
return GetBooleanAnd(BGR(),BGU())
endfunction
function BGW takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=22) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=28) then
return false
endif
return true
endfunction
function BGX takes nothing returns nothing
if BGW() then
call AddHeroXP(GetEnumUnit(),4500,false)
else
endif
endfunction
function BGY takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=23) then
return false
endif
return true
endfunction
function BGZ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=22) then
return false
endif
return true
endfunction
function BGa takes nothing returns nothing
if BGZ() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call QuestSetCompletedBJ(YW[13],true)
call DestroyQuest(YW[13])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BGV))
call ForGroupBJ(Tj,function BGX)
call DestroyGroup(Tj)
set Sh=Sh+1
call DestroyEffectBJ(Uu[13])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00300 золота|r, |c00ff969610 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BGY() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+900
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000022|r уровня",.027,255,255,255)
endif
endfunction
function BGb takes nothing returns nothing
set ZP=CreateTrigger()
call DisableTrigger(ZP)
call TriggerRegisterAnyUnitEventBJ(ZP,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZP,Condition(function BGQ))
call TriggerAddAction(ZP,function BGa)
endfunction
function BGc takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65303037) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BGd takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=22) then
return false
endif
return true
endfunction
function BGe takes nothing returns nothing
if BGd() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(ZR)
call EnableTrigger(ZS)
call EnableTrigger(ZT)
set YU[28]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($49303137,YU[28])
call DestroyEffectBJ(Uu[14])
call AddSpecialEffectTargetUnitBJ("overhead",In,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[14]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Алхимия \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 22-26|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Алхимия","|c006969FFУровень задания: 22-26|r
Здраствуйте, дорогие путники. Все мы знаем, что в мире есть добро и зло, верно. Но я где-то посередине. Если Вас убьют, я не помчусь мстить, но и ваша смерть будет тоже мне неприятна. Так вот, дабы немного уравновесить эти \"весы\", я придумал некое зелье, которое поможет мне менять характер любого живого существа, но не хватает кое-чего. Возьмите эту бутылку с наполните её 5-ю семенами природы, котрые иногда падают при смерти энтов в джунглях. После приходите ко мне","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[14]=GetLastCreatedQuestBJ()
call RemoveLocation(YU[28])
else
call nX(GetTriggerUnit(),"Задание с |c00ff000022|r уровня",.027,255,255,255)
endif
endfunction
function BGf takes nothing returns nothing
set ZQ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZQ,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZQ,Condition(function BGc))
call TriggerAddAction(ZQ,function BGe)
endfunction
function BGg takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$65303036) then
return false
endif
return true
endfunction
function BGh takes nothing returns boolean
if not (QR[3]<=1) then
return false
endif
return true
endfunction
function BGi takes nothing returns nothing
set ZU[1]=GetUnitLoc(GetDyingUnit())
set QR[3]=GetRandomInt(1,2)
if BGh() then
call CreateItemLoc($49303131,ZU[1])
else
endif
call RemoveLocation(ZU[1])
endfunction
function BGj takes nothing returns nothing
set ZR=CreateTrigger()
call DisableTrigger(ZR)
call TriggerRegisterAnyUnitEventBJ(ZR,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ZR,Condition(function BGg))
call TriggerAddAction(ZR,function BGi)
endfunction
function BGk takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303137)==true) then
return false
endif
return true
endfunction
function BGl takes nothing returns boolean
if not BGk() then
return false
endif
return true
endfunction
function BGm takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303131) then
return false
endif
return true
endfunction
function BGn takes nothing returns boolean
if not BGm() then
return false
endif
return true
endfunction
function BGo takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303132)==true) then
return false
endif
return true
endfunction
function BGp takes nothing returns boolean
if not BGo() then
return false
endif
return true
endfunction
function BGq takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303131) then
return false
endif
return true
endfunction
function BGr takes nothing returns boolean
if not BGq() then
return false
endif
return true
endfunction
function BGs takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303133)==true) then
return false
endif
return true
endfunction
function BGt takes nothing returns boolean
if not BGs() then
return false
endif
return true
endfunction
function BGu takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303131) then
return false
endif
return true
endfunction
function BGv takes nothing returns boolean
if not BGu() then
return false
endif
return true
endfunction
function BGw takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303134)==true) then
return false
endif
return true
endfunction
function BGx takes nothing returns boolean
if not BGw() then
return false
endif
return true
endfunction
function BGy takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303131) then
return false
endif
return true
endfunction
function BGz takes nothing returns boolean
if not BGy() then
return false
endif
return true
endfunction
function BG0 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303135)==true) then
return false
endif
return true
endfunction
function BG1 takes nothing returns boolean
if not BG0() then
return false
endif
return true
endfunction
function BG2 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303131) then
return false
endif
return true
endfunction
function BG3 takes nothing returns boolean
if not BG2() then
return false
endif
return true
endfunction
function BG4 takes nothing returns nothing
if BGn() then
if BGl() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303137))
call UnitAddItemByIdSwapped($49303132,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BGr() then
if BGp() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303132))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303133,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BGv() then
if BGt() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303133))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303134,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BGz() then
if BGx() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303134))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303135,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BG3() then
if BG1() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303135))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303136,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
endfunction
function BG5 takes nothing returns nothing
set ZS=CreateTrigger()
call DisableTrigger(ZS)
call TriggerRegisterAnyUnitEventBJ(ZS,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(ZS,function BG4)
endfunction
function BG6 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303131)==true) then
return false
endif
return true
endfunction
function BG7 takes nothing returns boolean
if not BG6() then
return false
endif
return true
endfunction
function BG8 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303137) then
return false
endif
return true
endfunction
function BG9 takes nothing returns boolean
if not BG8() then
return false
endif
return true
endfunction
function BHB takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303131)==true) then
return false
endif
return true
endfunction
function BHC takes nothing returns boolean
if not BHB() then
return false
endif
return true
endfunction
function BHD takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303132) then
return false
endif
return true
endfunction
function BHE takes nothing returns boolean
if not BHD() then
return false
endif
return true
endfunction
function BHF takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303131)==true) then
return false
endif
return true
endfunction
function BHG takes nothing returns boolean
if not BHF() then
return false
endif
return true
endfunction
function BHH takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303133) then
return false
endif
return true
endfunction
function BHI takes nothing returns boolean
if not BHH() then
return false
endif
return true
endfunction
function BHJ takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303131)==true) then
return false
endif
return true
endfunction
function BHK takes nothing returns boolean
if not BHJ() then
return false
endif
return true
endfunction
function BHL takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303134) then
return false
endif
return true
endfunction
function BHM takes nothing returns boolean
if not BHL() then
return false
endif
return true
endfunction
function BHN takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303131)==true) then
return false
endif
return true
endfunction
function BHO takes nothing returns boolean
if not BHN() then
return false
endif
return true
endfunction
function BHP takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303135) then
return false
endif
return true
endfunction
function BHQ takes nothing returns boolean
if not BHP() then
return false
endif
return true
endfunction
function BHR takes nothing returns nothing
if BG9() then
if BG7() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303137))
call UnitAddItemByIdSwapped($49303132,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHE() then
if BHC() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303132))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303133,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHI() then
if BHG() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303133))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303134,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHM() then
if BHK() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303134))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303135,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHQ() then
if BHO() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303135))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303136,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
endfunction
function BHS takes nothing returns nothing
set ZT=CreateTrigger()
call DisableTrigger(ZT)
call TriggerRegisterAnyUnitEventBJ(ZT,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(ZT,function BHR)
endfunction
function BHT takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303136))==true) then
return false
endif
return true
endfunction
function BHU takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BHV takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BHW takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BHX takes nothing returns boolean
return GetBooleanAnd(BHV(),BHW())
endfunction
function BHY takes nothing returns boolean
return GetBooleanAnd(BHU(),BHX())
endfunction
function BHZ takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=22) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=26) then
return false
endif
return true
endfunction
function BHa takes nothing returns nothing
if BHZ() then
call AddHeroXP(GetEnumUnit(),1800,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1800
else
endif
endfunction
function BHb takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=22) then
return false
endif
return true
endfunction
function BHc takes nothing returns nothing
call DestroyEffectBJ(Uu[14])
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(ZR)
call DisableTrigger(ZS)
call DisableTrigger(ZT)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303136))
call QuestSetCompletedBJ(YW[14],true)
call DestroyQuest(YW[14])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BHY))
call ForGroupBJ(Tj,function BHa)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1800 опыта|r, |c00ffff00250 золота|r, |c00ff96963 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BHb() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+750
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+9
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BHd takes nothing returns nothing
set ZV=CreateTrigger()
call TriggerRegisterEnterRectSimple(ZV,o)
call TriggerAddCondition(ZV,Condition(function BHT))
call TriggerAddAction(ZV,function BHc)
endfunction
function BHe takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E303056) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BHf takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=23) then
return false
endif
return true
endfunction
function BHg takes nothing returns nothing
if BHf() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[15])
call AddSpecialEffectTargetUnitBJ("overhead",Im,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[15]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Гроза Тропиков \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 23-26|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Гроза Тропиков","Хотите дальше?? Хе-хе, все хотят. А Вы докажите, что достойны увидеть то, что скрывается за эти порталом! Принесите мне |c00FFFF00Желтый Крисстал|r!
|c006969FFУровень задания: 2","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[15]=GetLastCreatedQuestBJ()
call ShowUnitShow(LZ)
call PauseUnitBJ(false,LZ)
else
call nX(GetTriggerUnit(),"Задание с |c00ff000023|r уровня",.027,255,255,255)
endif
endfunction
function BHh takes nothing returns nothing
set ZW=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZW,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZW,Condition(function BHe))
call TriggerAddAction(ZW,function BHg)
endfunction
function BHi takes nothing returns boolean
if not (GetDyingUnit()==LZ) then
return false
endif
return true
endfunction
function BHj takes nothing returns nothing
set ZU[2]=GetUnitLoc(GetDyingUnit())
call CreateItemLoc($49303138,ZU[2])
call CreateItemLoc($49303447,ZU[2])
call DisableTrigger(GetTriggeringTrigger())
call RemoveLocation(ZU[2])
endfunction
function BHk takes nothing returns nothing
set ZX=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZX,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ZX,Condition(function BHi))
call TriggerAddAction(ZX,function BHj)
endfunction
function BHl takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303138))==true) then
return false
endif
return true
endfunction
function BHm takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BHn takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BHo takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BHp takes nothing returns boolean
return GetBooleanAnd(BHn(),BHo())
endfunction
function BHq takes nothing returns boolean
return GetBooleanAnd(BHm(),BHp())
endfunction
function BHr takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=23) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=26) then
return false
endif
return true
endfunction
function BHs takes nothing returns nothing
if BHr() then
call AddHeroXP(GetEnumUnit(),3000,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3000
else
endif
endfunction
function BHt takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=23) then
return false
endif
return true
endfunction
function BHu takes nothing returns nothing
call EnableTrigger(ZZ)
call DestroyEffectBJ(Uu[15])
call AddSpecialEffectTargetUnitBJ("overhead",Im,"war3mapImported\\QuestYellow0.mdx")
set Uu[15]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303138))
call QuestSetCompletedBJ(YW[15],true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FFFF00Путь дальше открыт!|r")
call DestroyQuest(YW[15])
call ModifyGateBJ(bj_GATEOPERATION_OPEN,Hp)
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BHq))
call ForGroupBJ(Tj,function BHs)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00300 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BHt() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+900
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BHv takes nothing returns nothing
set ZY=CreateTrigger()
call TriggerRegisterEnterRectSimple(ZY,p)
call TriggerAddCondition(ZY,Condition(function BHl))
call TriggerAddAction(ZY,function BHu)
endfunction
function BHw takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E303056) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BHx takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=24) then
return false
endif
return true
endfunction
function BHy takes nothing returns nothing
if BHx() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Za)
call EnableTrigger(Zb)
call EnableTrigger(Zc)
call EnableTrigger(Zd)
call DestroyEffectBJ(Uu[15])
call AddSpecialEffectTargetUnitBJ("overhead",Im,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[15]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Обелиски \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 24-26|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Обелиски","|c006969FFУровень задания: 24-26|r
В недрах этих Джунглей стоит 4 Обелиска. Зарядите каждый из них душами, дабы они смогли излучать светлую магию, и приходите ко мне за наградой. Да, кстати, каждому обелиску требуется около 5 душ для подзарядки.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[15]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000024|r уровня",.027,255,255,255)
endif
endfunction
function BHz takes nothing returns nothing
set ZZ=CreateTrigger()
call DisableTrigger(ZZ)
call TriggerRegisterAnyUnitEventBJ(ZZ,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZZ,Condition(function BHw))
call TriggerAddAction(ZZ,function BHy)
endfunction
function BH0 takes nothing returns boolean
if not (RectContainsUnit(E3,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BH1 takes nothing returns boolean
if not (TY[0]>=4) then
return false
endif
return true
endfunction
function BH2 takes nothing returns boolean
if not (TY[1]>=5) then
return false
endif
return true
endfunction
function BH3 takes nothing returns nothing
set TY[1]=TY[1]+1
if BH2() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Обелиск заряжен!")
call SetUnitAnimation(J0,"stand work")
set TY[0]=TY[0]+1
if BH1() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Все Обелиски заряжены. Вернитесь за наградой.")
call EnableTrigger(Ze)
call DestroyEffectBJ(Uu[15])
call AddSpecialEffectTargetUnitBJ("overhead",Im,"war3mapImported\\QuestYellow1.mdx")
set Uu[15]=GetLastCreatedEffectBJ()
else
endif
else
endif
endfunction
function BH4 takes nothing returns nothing
set Za=CreateTrigger()
call DisableTrigger(Za)
call TriggerRegisterAnyUnitEventBJ(Za,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Za,Condition(function BH0))
call TriggerAddAction(Za,function BH3)
endfunction
function BH5 takes nothing returns boolean
if not (RectContainsUnit(E4,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BH6 takes nothing returns boolean
if not (TY[0]>=4) then
return false
endif
return true
endfunction
function BH7 takes nothing returns boolean
if not (TY[2]>=5) then
return false
endif
return true
endfunction
function BH8 takes nothing returns nothing
set TY[2]=TY[2]+1
if BH7() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Обелиск заряжен!")
call SetUnitAnimation(Jy,"stand work")
set TY[0]=TY[0]+1
if BH6() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Все Обелиски заряжены. Вернитесь за наградой.")
call EnableTrigger(Ze)
call DestroyEffectBJ(Uu[15])
call AddSpecialEffectTargetUnitBJ("overhead",Im,"war3mapImported\\QuestYellow1.mdx")
set Uu[15]=GetLastCreatedEffectBJ()
else
endif
else
endif
endfunction
function BH9 takes nothing returns nothing
set Zd=CreateTrigger()
call DisableTrigger(Zd)
call TriggerRegisterAnyUnitEventBJ(Zd,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Zd,Condition(function BH5))
call TriggerAddAction(Zd,function BH8)
endfunction
function BIB takes nothing returns boolean
if not (RectContainsUnit(E5,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BIC takes nothing returns boolean
if not (TY[0]>=4) then
return false
endif
return true
endfunction
function BID takes nothing returns boolean
if not (TY[3]>=5) then
return false
endif
return true
endfunction
function BIE takes nothing returns nothing
set TY[3]=TY[3]+1
if BID() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Обелиск заряжен!")
call SetUnitAnimation(Jx,"stand work")
set TY[0]=TY[0]+1
if BIC() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Все Обелиски заряжены. Вернитесь за наградой.")
call EnableTrigger(Ze)
call DestroyEffectBJ(Uu[15])
call AddSpecialEffectTargetUnitBJ("overhead",Im,"war3mapImported\\QuestYellow1.mdx")
set Uu[15]=GetLastCreatedEffectBJ()
else
endif
else
endif
endfunction
function BIF takes nothing returns nothing
set Zb=CreateTrigger()
call DisableTrigger(Zb)
call TriggerRegisterAnyUnitEventBJ(Zb,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Zb,Condition(function BIB))
call TriggerAddAction(Zb,function BIE)
endfunction
function BIG takes nothing returns boolean
if not (RectContainsUnit(FD,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BIH takes nothing returns boolean
if not (TY[0]>=4) then
return false
endif
return true
endfunction
function BII takes nothing returns boolean
if not (TY[4]>=5) then
return false
endif
return true
endfunction
function BIJ takes nothing returns nothing
set TY[4]=TY[4]+1
if BII() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Обелиск заряжен!")
call SetUnitAnimation(Jz,"stand work")
set TY[0]=TY[0]+1
if BIH() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Все Обелиски заряжены. Вернитесь за наградой.")
call EnableTrigger(Ze)
call DestroyEffectBJ(Uu[15])
call AddSpecialEffectTargetUnitBJ("overhead",Im,"war3mapImported\\QuestYellow1.mdx")
set Uu[15]=GetLastCreatedEffectBJ()
else
endif
else
endif
endfunction
function BIK takes nothing returns nothing
set Zc=CreateTrigger()
call DisableTrigger(Zc)
call TriggerRegisterAnyUnitEventBJ(Zc,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Zc,Condition(function BIG))
call TriggerAddAction(Zc,function BIJ)
endfunction
function BIL takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E303056) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BIM takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BIN takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BIO takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BIP takes nothing returns boolean
return GetBooleanAnd(BIN(),BIO())
endfunction
function BIQ takes nothing returns boolean
return GetBooleanAnd(BIM(),BIP())
endfunction
function BIR takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=24) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=26) then
return false
endif
return true
endfunction
function BIS takes nothing returns nothing
if BIR() then
call AddHeroXP(GetEnumUnit(),3000,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3000
else
endif
endfunction
function BIT takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=24) then
return false
endif
return true
endfunction
function BIU takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=24) then
return false
endif
return true
endfunction
function BIV takes nothing returns nothing
if BIU() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6575,GetOrderTargetUnit())
call DestroyEffectBJ(Uu[15])
call QuestSetCompletedBJ(YW[15],true)
call DestroyQuest(YW[15])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BIQ))
call ForGroupBJ(Tj,function BIS)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00300 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BIT() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+900
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000024|r уровня",.027,255,255,255)
endif
endfunction
function BIW takes nothing returns nothing
set Ze=CreateTrigger()
call DisableTrigger(Ze)
call TriggerRegisterAnyUnitEventBJ(Ze,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Ze,Condition(function BIL))
call TriggerAddAction(Ze,function BIV)
endfunction
function BIX takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$75736864) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BIY takes nothing returns nothing
call EnableTrigger(Zg)
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(Zh)
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[16])
call AddSpecialEffectTargetUnitBJ("overhead",Ip,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[16]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Свежее Мясо \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 25-28|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Свежее мясо","Чтобы получить желаемое, прийдется попотеть. Попробуйте-ка убить |c007d7d7dМясника!|r

|c006969FFУровень задания: 25-28|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[16]=GetLastCreatedQuestBJ()
endfunction
function BIZ takes nothing returns nothing
set Zf=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zf,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zf,Condition(function BIX))
call TriggerAddAction(Zf,function BIY)
endfunction
function BIa takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BIb takes nothing returns nothing
set YU[29]=GetRectCenter(v)
call SetUnitPositionLoc(GetEnteringUnit(),YU[29])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[29],0)
call RemoveLocation(YU[29])
endfunction
function BIc takes nothing returns nothing
set Zg=CreateTrigger()
call DisableTrigger(Zg)
call TriggerRegisterEnterRectSimple(Zg,w)
call TriggerAddCondition(Zg,Condition(function BIa))
call TriggerAddAction(Zg,function BIb)
endfunction
function BId takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BIe takes nothing returns nothing
set YU[30]=GetRectCenter(Fg)
call SetUnitPositionLoc(GetEnteringUnit(),YU[30])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[30],0)
call RemoveLocation(YU[30])
endfunction
function BIf takes nothing returns nothing
set Zh=CreateTrigger()
call DisableTrigger(Zh)
call TriggerRegisterEnterRectSimple(Zh,u)
call TriggerAddCondition(Zh,Condition(function BId))
call TriggerAddAction(Zh,function BIe)
endfunction
function BIg takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$75303034) then
return false
endif
return true
endfunction
function BIh takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Zj)
call EnableTrigger(Zk)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Наглус|r: Мясник оказался не так прост, как мы думали. Он подстроил свою смерть, хотя на самом деле просто перенесся в другое убежище, получив новые силы! Убейте его в конце конце концов")
endfunction
function BIi takes nothing returns nothing
set Zi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zi,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Zi,Condition(function BIg))
call TriggerAddAction(Zi,function BIh)
endfunction
function BIj takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BIk takes nothing returns nothing
set YU[31]=GetRectCenter(Y)
call SetUnitPositionLoc(GetEnteringUnit(),YU[31])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[31],0)
call RemoveLocation(YU[31])
endfunction
function BIl takes nothing returns nothing
set Zj=CreateTrigger()
call DisableTrigger(Zj)
call TriggerRegisterEnterRectSimple(Zj,s)
call TriggerAddCondition(Zj,Condition(function BIj))
call TriggerAddAction(Zj,function BIk)
endfunction
function BIm takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BIn takes nothing returns nothing
set YU[32]=GetRectCenter(t)
call SetUnitPositionLoc(GetEnteringUnit(),YU[32])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[32],0)
call RemoveLocation(YU[32])
endfunction
function BIo takes nothing returns nothing
set Zk=CreateTrigger()
call DisableTrigger(Zk)
call TriggerRegisterEnterRectSimple(Zk,r)
call TriggerAddCondition(Zk,Condition(function BIm))
call TriggerAddAction(Zk,function BIn)
endfunction
function BIp takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$75303035) then
return false
endif
return true
endfunction
function BIq takes nothing returns nothing
call DestroyEffectBJ(Uu[16])
set YU[33]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($49303932,YU[33])
call CreateItemLoc($49303932,YU[33])
call CreateItemLoc($49303932,YU[33])
call AddSpecialEffectTargetUnitBJ("overhead",Ip,"war3mapImported\\QuestYellow1.mdx")
set Uu[16]=GetLastCreatedEffectBJ()
call EnableTrigger(Zm)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Мясник в который раз умирает. Возвращайтесь к Наглусу!")
call RemoveLocation(YU[33])
endfunction
function BIr takes nothing returns nothing
set Zl=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zl,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Zl,Condition(function BIp))
call TriggerAddAction(Zl,function BIq)
endfunction
function BIs takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$75736864) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BIt takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BIu takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BIv takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BIw takes nothing returns boolean
return GetBooleanAnd(BIu(),BIv())
endfunction
function BIx takes nothing returns boolean
return GetBooleanAnd(BIt(),BIw())
endfunction
function BIy takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=25) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=28) then
return false
endif
return true
endfunction
function BIz takes nothing returns nothing
if BIy() then
call AddHeroXP(GetEnumUnit(),3800,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2800
else
endif
endfunction
function BI0 takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=25) then
return false
endif
return true
endfunction
function BI1 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[16])
call QuestSetCompletedBJ(YW[16],true)
call DestroyQuest(YW[16])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FFFF00Мясник кое-что украл. Надеюсь, Вы это нашли|r")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BIx))
call ForGroupBJ(Tj,function BIz)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2800 опыта|r, |c00ffff00400 золота|r, |c00ff969610 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BI0() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BI2 takes nothing returns nothing
set Zm=CreateTrigger()
call DisableTrigger(Zm)
call TriggerRegisterAnyUnitEventBJ(Zm,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zm,Condition(function BIs))
call TriggerAddAction(Zm,function BI1)
endfunction
function BI3 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E726F67) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BI4 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=28) then
return false
endif
return true
endfunction
function BI5 takes nothing returns nothing
if BI4() then
call EnableTrigger(Zf)
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[6])
call AddSpecialEffectTargetUnitBJ("overhead",KX,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[6]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Узуран \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 28-33|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Узуран","|c00FFFF00Разбойник:|r Я разрешаю Вам убить Узурана! Вперед, Герои!
|c006969FFУровень задания: 28-33|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[6]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000028|r уровня",.027,255,255,255)
endif
endfunction
function BI6 takes nothing returns nothing
set Zn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zn,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zn,Condition(function BI3))
call TriggerAddAction(Zn,function BI5)
endfunction
function BI7 takes nothing returns nothing
call DestroyEffectBJ(Uu[6])
call DisableTrigger(Zp)
call DisableTrigger(Zq)
call EnableTrigger(Zr)
call AddSpecialEffectTargetUnitBJ("overhead",KX,"war3mapImported\\QuestYellow1.mdx")
set Uu[6]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Узуран погиб. Возвращайтесь к Разбойнику за наградой|r")
call DisableTrigger(GetTriggeringTrigger())
endfunction
function BI8 takes nothing returns nothing
set Zo=CreateTrigger()
call TriggerRegisterUnitEvent(Zo,LC,EVENT_UNIT_DEATH)
call TriggerAddAction(Zo,function BI7)
endfunction
function BI9 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E726F67) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BJB takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BJC takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BJD takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BJE takes nothing returns boolean
return GetBooleanAnd(BJC(),BJD())
endfunction
function BJF takes nothing returns boolean
return GetBooleanAnd(BJB(),BJE())
endfunction
function BJG takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=28) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=33) then
return false
endif
return true
endfunction
function BJH takes nothing returns nothing
if BJG() then
call AddHeroXP(GetEnumUnit(),3500,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3500
else
endif
endfunction
function BJI takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=28) then
return false
endif
return true
endfunction
function BJJ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=28) then
return false
endif
return true
endfunction
function BJK takes nothing returns nothing
if BJJ() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call DestroyEffectBJ(Uu[6])
call QuestSetCompletedBJ(YW[6],true)
call DestroyQuest(YW[6])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BJF))
call ForGroupBJ(Tj,function BJH)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3500 опыта|r, |c00ffff00400 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BJI() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000028|r уровня",.027,255,255,255)
endif
endfunction
function BJL takes nothing returns nothing
set Zr=CreateTrigger()
call DisableTrigger(Zr)
call TriggerRegisterAnyUnitEventBJ(Zr,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zr,Condition(function BI9))
call TriggerAddAction(Zr,function BJK)
endfunction
function BJM takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303930))==true) then
return false
endif
return true
endfunction
function BJN takes nothing returns nothing
set YU[35]=GetRectCenter(G0)
call CreateItemLoc($49303933,YU[35])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303930))
call RemoveLocation(YU[35])
endfunction
function BJO takes nothing returns nothing
set Zs=CreateTrigger()
call TriggerRegisterEnterRectSimple(Zs,G0)
call TriggerAddCondition(Zs,Condition(function BJM))
call TriggerAddAction(Zs,function BJN)
endfunction
function BJP takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E73676E) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BJQ takes nothing returns boolean
if not (Rb[0]==4) then
return false
endif
return true
endfunction
function BJR takes nothing returns boolean
if not (Rb[0]==3) then
return false
endif
return true
endfunction
function BJS takes nothing returns boolean
if not (Rb[0]==2) then
return false
endif
return true
endfunction
function BJT takes nothing returns boolean
if not (Rb[0]==1) then
return false
endif
return true
endfunction
function BJU takes nothing returns boolean
if not (Rb[1]==4) then
return false
endif
return true
endfunction
function BJV takes nothing returns boolean
if not (Rb[1]==3) then
return false
endif
return true
endfunction
function BJW takes nothing returns boolean
if not (Rb[1]==2) then
return false
endif
return true
endfunction
function BJX takes nothing returns boolean
if not (Rb[1]==1) then
return false
endif
return true
endfunction
function BJY takes nothing returns boolean
if not (Rb[2]==4) then
return false
endif
return true
endfunction
function BJZ takes nothing returns boolean
if not (Rb[2]==3) then
return false
endif
return true
endfunction
function BJa takes nothing returns boolean
if not (Rb[2]==2) then
return false
endif
return true
endfunction
function BJb takes nothing returns boolean
if not (Rb[2]==1) then
return false
endif
return true
endfunction
function BJc takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Zu)
call DestroyEffectBJ(Uu[17])
call AddSpecialEffectTargetUnitBJ("overhead",Ki,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[17]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Впервые в воду \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 29-35|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Впервые в воду","Архипелаг - опасное и в то же время удивительное место. Недавно там гулял и розтерял свои вещи. Принесете, а? Не обижу наградой! Мне нужно: красная звезда, синяя звезда, черная звезда и ракушка.
|c006969FFУровень задания: 29-35|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[17]=GetLastCreatedQuestBJ()
set Rb[0]=GetRandomInt(1,4)
if BJQ() then
set YU[36]=GetRectCenter(Bb)
call CreateItemLoc($4930344A,YU[36])
call RemoveLocation(YU[36])
else
endif
if BJR() then
set YU[36]=GetRectCenter(BX)
call CreateItemLoc($4930344A,YU[36])
call RemoveLocation(YU[36])
else
endif
if BJS() then
set YU[36]=GetRectCenter(BV)
call CreateItemLoc($4930344A,YU[36])
call RemoveLocation(YU[36])
else
endif
if BJT() then
set YU[36]=GetRectCenter(Bh)
call CreateItemLoc($4930344A,YU[36])
call RemoveLocation(YU[36])
else
endif
set Rb[1]=GetRandomInt(1,4)
if BJU() then
set YU[37]=GetRectCenter(Bg)
call CreateItemLoc($4930344B,YU[37])
call RemoveLocation(YU[37])
else
endif
if BJV() then
set YU[37]=GetRectCenter(Bf)
call CreateItemLoc($4930344B,YU[37])
call RemoveLocation(YU[37])
else
endif
if BJW() then
set YU[37]=GetRectCenter(Bc)
call CreateItemLoc($4930344B,YU[37])
call RemoveLocation(YU[37])
else
endif
if BJX() then
set YU[37]=GetRectCenter(Ba)
call CreateItemLoc($4930344B,YU[37])
call RemoveLocation(YU[37])
else
endif
set Rb[2]=GetRandomInt(1,4)
if BJY() then
set YU[38]=GetRectCenter(BU)
call CreateItemLoc($4930344C,YU[38])
call RemoveLocation(YU[38])
else
endif
if BJZ() then
set YU[38]=GetRectCenter(Bd)
call CreateItemLoc($4930344C,YU[38])
call RemoveLocation(YU[38])
else
endif
if BJa() then
set YU[38]=GetRectCenter(BY)
call CreateItemLoc($4930344C,YU[38])
call RemoveLocation(YU[38])
else
endif
if BJb() then
set YU[38]=GetRectCenter(BU)
call CreateItemLoc($4930344C,GetRectCenter(BU))
call RemoveLocation(YU[38])
else
endif
endfunction
function BJd takes nothing returns nothing
set Zt=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zt,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zt,Condition(function BJP))
call TriggerAddAction(Zt,function BJc)
endfunction
function BJe takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930344A then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344B then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344C then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344D then
return true
endif
return false
endfunction
function BJf takes nothing returns boolean
if not BJe() then
return false
endif
return true
endfunction
function BJg takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Вещи:|r 1/4")
call TriggerSleepAction(.5)
call EnableTrigger(Zv)
endfunction
function BJh takes nothing returns nothing
set Zu=CreateTrigger()
call DisableTrigger(Zu)
call TriggerRegisterAnyUnitEventBJ(Zu,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Zu,Condition(function BJf))
call TriggerAddAction(Zu,function BJg)
endfunction
function BJi takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930344A then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344B then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344C then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344D then
return true
endif
return false
endfunction
function BJj takes nothing returns boolean
if not BJi() then
return false
endif
return true
endfunction
function BJk takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Вещи:|r 2/4")
call TriggerSleepAction(.5)
call EnableTrigger(Zw)
endfunction
function BJl takes nothing returns nothing
set Zv=CreateTrigger()
call DisableTrigger(Zv)
call TriggerRegisterAnyUnitEventBJ(Zv,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Zv,Condition(function BJj))
call TriggerAddAction(Zv,function BJk)
endfunction
function BJm takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930344A then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344B then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344C then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344D then
return true
endif
return false
endfunction
function BJn takes nothing returns boolean
if not BJm() then
return false
endif
return true
endfunction
function BJo takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Вещи:|r 3/4")
call TriggerSleepAction(.5)
call EnableTrigger(Zx)
endfunction
function BJp takes nothing returns nothing
set Zw=CreateTrigger()
call DisableTrigger(Zw)
call TriggerRegisterAnyUnitEventBJ(Zw,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Zw,Condition(function BJn))
call TriggerAddAction(Zw,function BJo)
endfunction
function BJq takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930344A then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344B then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344C then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344D then
return true
endif
return false
endfunction
function BJr takes nothing returns boolean
if not BJq() then
return false
endif
return true
endfunction
function BJs takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[17])
call AddSpecialEffectTargetUnitBJ("overhead",Ki,"war3mapImported\\QuestYellow1.mdx")
set Uu[17]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Вещи:|r 4/4")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"Вернитесь к Левитану. Вещи собраны!")
call EnableTrigger(Zy)
endfunction
function BJt takes nothing returns nothing
set Zx=CreateTrigger()
call DisableTrigger(Zx)
call TriggerRegisterAnyUnitEventBJ(Zx,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Zx,Condition(function BJr))
call TriggerAddAction(Zx,function BJs)
endfunction
function BJu takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E73676E) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BJv takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BJw takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BJx takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BJy takes nothing returns boolean
return GetBooleanAnd(BJw(),BJx())
endfunction
function BJz takes nothing returns boolean
return GetBooleanAnd(BJv(),BJy())
endfunction
function BJ0 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=29) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=35) then
return false
endif
return true
endfunction
function BJ1 takes nothing returns nothing
if BJ0() then
call AddHeroXP(GetEnumUnit(),3500,false)
else
endif
endfunction
function BJ2 takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=29) then
return false
endif
return true
endfunction
function BJ3 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49305454,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Uu[17])
call QuestSetCompletedBJ(YW[17],true)
call DestroyQuest(YW[17])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BJz))
call ForGroupBJ(Tj,function BJ1)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3500 опыта|r, |c00ffff00300 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BJ2() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+900
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BJ4 takes nothing returns nothing
set Zy=CreateTrigger()
call DisableTrigger(Zy)
call TriggerRegisterAnyUnitEventBJ(Zy,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zy,Condition(function BJu))
call TriggerAddAction(Zy,function BJ3)
endfunction
function BJ5 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F776172) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BJ6 takes nothing returns boolean
if not (Rb[3]==5) then
return false
endif
return true
endfunction
function BJ7 takes nothing returns boolean
if not (Rb[3]==4) then
return false
endif
return true
endfunction
function BJ8 takes nothing returns boolean
if not (Rb[3]==3) then
return false
endif
return true
endfunction
function BJ9 takes nothing returns boolean
if not (Rb[3]==2) then
return false
endif
return true
endfunction
function BKB takes nothing returns boolean
if not (Rb[3]==1) then
return false
endif
return true
endfunction
function BKC takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Zu)
call DestroyEffectBJ(Uu[18])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Три за один \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 29-35|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Три за один","Хотите получить заветный ключик? Выполните три моих задания! А вот и первое из них. |c00FF0000Ответьте на вопрос.|r
|c006969FFУровень задания: 29-35|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[18]=GetLastCreatedQuestBJ()
set Rb[3]=GetRandomInt(1,5)
if BJ6() then
call CreateTextTagLocBJ("|c00FF0000Вопрос:|r Как звали Босса в локации \"Старое Кладбище\"?",GetUnitLoc(GetTriggerUnit()),0,10,100,100,100,0)
set Z0[3]=GetLastCreatedTextTag()
call EnableTrigger(Z1)
else
endif
if BJ7() then
call CreateTextTagLocBJ("|c00FF0000Вопрос:|r Какой ник главного создателя этой игры?",GetUnitLoc(GetTriggerUnit()),0,10,100,100,100,0)
set Z0[3]=GetLastCreatedTextTag()
call EnableTrigger(Z2)
else
endif
if BJ8() then
call CreateTextTagLocBJ("|c00FF0000Вопрос:|r Сколько Властелинов правило этим миром при его создании?",GetUnitLoc(GetTriggerUnit()),0,10,100,100,100,0)
set Z0[3]=GetLastCreatedTextTag()
call EnableTrigger(Z3)
else
endif
if BJ9() then
call CreateTextTagLocBJ("|c00FF0000Вопрос:|r Какое название мира, в котором Вы сейчас находитесь?",GetUnitLoc(GetTriggerUnit()),0,10,100,100,100,0)
set Z0[3]=GetLastCreatedTextTag()
call EnableTrigger(Z4)
else
endif
if BKB() then
call CreateTextTagLocBJ("|c00FF0000Вопрос:|r каков ответ примера \"(4+2х2)(40-4х8)\"?",GetUnitLoc(GetTriggerUnit()),0,10,100,100,100,0)
set Z0[3]=GetLastCreatedTextTag()
call EnableTrigger(Z5)
else
endif
endfunction
function BKD takes nothing returns nothing
set Zz=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zz,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zz,Condition(function BJ5))
call TriggerAddAction(Zz,function BKC)
endfunction
function BKE takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Z6)
call EnableTrigger(Z7)
call DestroyTextTagBJ(Z0[3])
call SetUnitInvulnerable(Iy,false)
call SetUnitOwner(Iy,GetTriggerPlayer(),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Первое задание Вы выполнили. Посмотрим, справитесь ли Вы со вторым. Доведите меня спокойно в безопасное местечко.")
call PingMinimapLocForForce(GetPlayersAll(),GetRectCenter(Bi),100.)
endfunction
function BKF takes nothing returns nothing
set Z5=CreateTrigger()
call DisableTrigger(Z5)
call TriggerRegisterPlayerChatEvent(Z5,Player(0),"64",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(1),"64",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(2),"64",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(3),"64",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(4),"64",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(5),"64",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(6),"64",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(7),"64",true)
call TriggerAddAction(Z5,function BKE)
endfunction
function BKG takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Z6)
call EnableTrigger(Z7)
call DestroyTextTagBJ(Z0[3])
call SetUnitInvulnerable(Iy,false)
call SetUnitOwner(Iy,GetTriggerPlayer(),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Первое задание Вы выполнили. Посмотрим, справитесь ли Вы со вторым. Доведите меня спокойно в безопасное местечко.")
call PingMinimapLocForForce(GetPlayersAll(),GetRectCenter(Bi),100.)
endfunction
function BKH takes nothing returns nothing
set Z4=CreateTrigger()
call DisableTrigger(Z4)
call TriggerRegisterPlayerChatEvent(Z4,Player(0),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(1),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(2),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(3),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(4),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(5),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(6),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(7),"Мэлерот",true)
call TriggerAddAction(Z4,function BKG)
endfunction
function BKI takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Z6)
call EnableTrigger(Z7)
call DestroyTextTagBJ(Z0[3])
call SetUnitInvulnerable(Iy,false)
call SetUnitOwner(Iy,GetTriggerPlayer(),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Первое задание Вы выполнили. Посмотрим, справитесь ли Вы со вторым. Доведите меня спокойно в безопасное местечко.")
call PingMinimapLocForForce(GetPlayersAll(),GetRectCenter(Bi),100.)
endfunction
function BKJ takes nothing returns nothing
set Z3=CreateTrigger()
call DisableTrigger(Z3)
call TriggerRegisterPlayerChatEvent(Z3,Player(0),"4",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(1),"4",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(2),"4",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(3),"4",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(4),"4",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(5),"4",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(6),"4",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(7),"4",true)
call TriggerAddAction(Z3,function BKI)
endfunction
function BKK takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Z6)
call EnableTrigger(Z7)
call DestroyTextTagBJ(Z0[3])
call SetUnitInvulnerable(Iy,false)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Первое задание Вы выполнили. Посмотрим, справитесь ли Вы со вторым. Доведите меня спокойно в безопасное местечко.")
call SetUnitOwner(Iy,GetTriggerPlayer(),true)
call PingMinimapLocForForce(GetPlayersAll(),GetRectCenter(Bi),100.)
endfunction
function BKL takes nothing returns nothing
set Z2=CreateTrigger()
call DisableTrigger(Z2)
call TriggerRegisterPlayerChatEvent(Z2,Player(0),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(1),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(2),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(3),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(4),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(5),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(6),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(7),"I-IntegraL",true)
call TriggerAddAction(Z2,function BKK)
endfunction
function BKM takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Z6)
call EnableTrigger(Z7)
call DestroyTextTagBJ(Z0[3])
call SetUnitInvulnerable(Iy,false)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Первое задание Вы выполнили. Посмотрим, справитесь ли Вы со вторым. Доведите меня спокойно в безопасное местечко.")
call SetUnitOwner(Iy,GetTriggerPlayer(),true)
call PingMinimapLocForForce(GetPlayersAll(),GetRectCenter(Bi),100.)
endfunction
function BKN takes nothing returns nothing
set Z1=CreateTrigger()
call DisableTrigger(Z1)
call TriggerRegisterPlayerChatEvent(Z1,Player(0),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z1,Player(1),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z1,Player(2),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z1,Player(3),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z1,Player(4),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z1,Player(5),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z1,Player(6),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z1,Player(7),"Узуран",true)
call TriggerAddAction(Z1,function BKM)
endfunction
function BKO takes nothing returns boolean
if not (GetUnitTypeId(GetEnteringUnit())==GetUnitTypeId(Iy)) then
return false
endif
return true
endfunction
function BKP takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(Z7)
call EnableTrigger(Z8)
set YU[39]=GetRectCenter(Bj)
call SetUnitPositionLocFacingBJ(Iy,YU[39],bj_UNIT_FACING)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Молодцы! Ну и последнее. Сумеете победить меня - отдам награду!")
call TriggerSleepAction(5.)
call SetUnitOwner(Iy,Player(11),true)
call RemoveLocation(YU[39])
endfunction
function BKQ takes nothing returns nothing
set Z6=CreateTrigger()
call DisableTrigger(Z6)
call TriggerRegisterEnterRectSimple(Z6,Bi)
call TriggerAddCondition(Z6,Condition(function BKO))
call TriggerAddAction(Z6,function BKP)
endfunction
function BKR takes nothing returns nothing
set YU[40]=GetRectCenter(F8)
call SetUnitPositionLoc(Iy,YU[40])
call SetUnitLifePercentBJ(Iy,100)
call RemoveLocation(YU[40])
endfunction
function BKS takes nothing returns nothing
set Z7=CreateTrigger()
call DisableTrigger(Z7)
call TriggerRegisterUnitEvent(Z7,Iy,EVENT_UNIT_ATTACKED)
call TriggerAddAction(Z7,function BKR)
endfunction
function BKT takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BKU takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BKV takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BKW takes nothing returns boolean
return GetBooleanAnd(BKU(),BKV())
endfunction
function BKX takes nothing returns boolean
return GetBooleanAnd(BKT(),BKW())
endfunction
function BKY takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=29) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=35) then
return false
endif
return true
endfunction
function BKZ takes nothing returns nothing
if BKY() then
call AddHeroXP(GetEnumUnit(),3000,false)
else
endif
endfunction
function BKa takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=29) then
return false
endif
return true
endfunction
function BKb takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set YU[41]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($4930344E,YU[41])
call QuestSetCompletedBJ(YW[18],true)
call DestroyQuest(YW[18])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BKX))
call ForGroupBJ(Tj,function BKZ)
call DestroyGroup(Tj)
set Sh=Sh+1
call RemoveLocation(YU[38])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00300 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BKa() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+900
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BKc takes nothing returns nothing
set Z8=CreateTrigger()
call DisableTrigger(Z8)
call TriggerRegisterUnitEvent(Z8,Iy,EVENT_UNIT_DEATH)
call TriggerAddAction(Z8,function BKb)
endfunction
function BKd takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930344E))==true) then
return false
endif
return true
endfunction
function BKe takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitInvulnerable(K6,false)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930344E))
call ModifyGateBJ(bj_GATEOPERATION_OPEN,Hq)
endfunction
function BKf takes nothing returns nothing
set Z9=CreateTrigger()
call TriggerRegisterEnterRectSimple(Z9,Bk)
call TriggerAddCondition(Z9,Condition(function BKd))
call TriggerAddAction(Z9,function BKe)
endfunction
function BKg takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E636731) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BKh takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=30) then
return false
endif
return true
endfunction
function BKi takes nothing returns nothing
if BKh() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(aC)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Морской бой\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 30-37|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Морской бой","На Архипелаге обитает злобный монстр. Я хочу убедится, что он умер!
|c006969FFУровень задания: 30-37|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[19]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Uu[19])
call AddSpecialEffectTargetUnitBJ("overhead",Kg,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[19]=GetLastCreatedEffectBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000030|r уровня",.027,255,255,255)
endif
endfunction
function BKj takes nothing returns nothing
set aB=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aB,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aB,Condition(function BKg))
call TriggerAddAction(aB,function BKi)
endfunction
function BKk takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(aD)
call DestroyEffectBJ(Uu[19])
call AddSpecialEffectTargetUnitBJ("overhead",Kg,"war3mapImported\\QuestYellow1.mdx")
set Uu[19]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Тварь убита.|r")
endfunction
function BKl takes nothing returns nothing
set aC=CreateTrigger()
call DisableTrigger(aC)
call TriggerRegisterUnitEvent(aC,K6,EVENT_UNIT_DEATH)
call TriggerAddAction(aC,function BKk)
endfunction
function BKm takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E636731) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BKn takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BKo takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BKp takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BKq takes nothing returns boolean
return GetBooleanAnd(BKo(),BKp())
endfunction
function BKr takes nothing returns boolean
return GetBooleanAnd(BKn(),BKq())
endfunction
function BKs takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=30) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=37) then
return false
endif
return true
endfunction
function BKt takes nothing returns nothing
if BKs() then
call AddHeroXP(GetEnumUnit(),3500,false)
else
endif
endfunction
function BKu takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=30) then
return false
endif
return true
endfunction
function BKv takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=30) then
return false
endif
return true
endfunction
function BKw takes nothing returns nothing
if BKv() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49305455,GetUnitLoc(GetTriggerUnit()))
call QuestSetCompletedBJ(YW[19],true)
call DestroyQuest(YW[19])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BKr))
call ForGroupBJ(Tj,function BKt)
call DestroyGroup(Tj)
set Sh=Sh+1
call DestroyEffectBJ(Uu[19])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF5000 опыта|r, |c00ffff00400 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BKu() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000030|r уровня",.027,255,255,255)
endif
endfunction
function BKx takes nothing returns nothing
set aD=CreateTrigger()
call DisableTrigger(aD)
call TriggerRegisterAnyUnitEventBJ(aD,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aD,Condition(function BKm))
call TriggerAddAction(aD,function BKw)
endfunction
function BKy takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65647279) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BKz takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=3) then
return false
endif
return true
endfunction
function BK0 takes nothing returns nothing
if BKz() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call SetUnitOwner(I2,Player(8),true)
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(aC)
set YU[42]=GetRectCenter(Bx)
call CreateItemLoc($49303646,YU[42])
call SetUnitLifeBJ(I2,500.)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Однажды в Лесу\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 3-7|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Однажды в Лесу","Мой друг гибнет.. спасите его! Он совсем слаб. Найдите способ его вылечить!
|c006969FFУровень задания: 3-7|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[20]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Uu[20])
call AddSpecialEffectTargetUnitBJ("overhead",I1,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[20]=GetLastCreatedEffectBJ()
call RemoveLocation(YU[42])
else
call nX(GetTriggerUnit(),"Задание с |c00ff00003|r уровня",.027,255,255,255)
endif
endfunction
function BK1 takes nothing returns nothing
set aE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aE,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aE,Condition(function BKy))
call TriggerAddAction(aE,function BK0)
endfunction
function BK2 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(aG)
call DestroyEffectBJ(Uu[20])
call AddSpecialEffectTargetUnitBJ("overhead",I1,"war3mapImported\\QuestYellow1.mdx")
set Uu[20]=GetLastCreatedEffectBJ()
endfunction
function BK3 takes nothing returns nothing
set aF=CreateTrigger()
call TriggerRegisterUnitLifeEvent(aF,I2,GREATER_THAN_OR_EQUAL,4999.)
call TriggerAddAction(aF,function BK2)
endfunction
function BK4 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65647279) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BK5 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BK6 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BK7 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BK8 takes nothing returns boolean
return GetBooleanAnd(BK6(),BK7())
endfunction
function BK9 takes nothing returns boolean
return GetBooleanAnd(BK5(),BK8())
endfunction
function BLB takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=3) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=7) then
return false
endif
return true
endfunction
function BLC takes nothing returns nothing
if BLB() then
call AddHeroXP(GetEnumUnit(),600,false)
else
endif
endfunction
function BLD takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=3) then
return false
endif
return true
endfunction
function BLE takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=3) then
return false
endif
return true
endfunction
function BLF takes nothing returns nothing
if BLE() then
call DisableTrigger(GetTriggeringTrigger())
call QuestSetCompletedBJ(YW[20],true)
call DestroyQuest(YW[20])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BK9))
call ForGroupBJ(Tj,function BLC)
call DestroyGroup(Tj)
set Sh=Sh+1
call DestroyEffectBJ(Uu[20])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF600 опыта|r, |c00ffff00200 золота|r, |c00ff96963 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BLD() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+600
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+9
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff00003|r уровня",.027,255,255,255)
endif
endfunction
function BLG takes nothing returns nothing
set aG=CreateTrigger()
call DisableTrigger(aG)
call TriggerRegisterAnyUnitEventBJ(aG,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aG,Condition(function BK4))
call TriggerAddAction(aG,function BLF)
endfunction
function BLH takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65686970) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLI takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=14) then
return false
endif
return true
endfunction
function BLJ takes nothing returns nothing
if BLI() then
call DestroyEffectBJ(Uu[21])
call AddSpecialEffectTargetUnitBJ("overhead",IY,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[21]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(aI)
call ShowUnitShow(Lb)
call PauseUnitBJ(false,Lb)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"В погоне за неизвестным\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 14-20|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"В погоне за неизвестным","Всем хочется узнать секрет древнего оружия.... Но не все достойны! Докажите свою верность, и я открою Вам тайну, дам разрешение на получение желаемого!
|c006969FFУровень задания: 14-20|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[21]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000014|r уровня",.027,255,255,255)
endif
endfunction
function BLK takes nothing returns nothing
set aH=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aH,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aH,Condition(function BLH))
call TriggerAddAction(aH,function BLJ)
endfunction
function BLL takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"УБИЛИ! УБИЛИ!")
call DestroyEffectBJ(Uu[21])
call AddSpecialEffectTargetUnitBJ("overhead",IY,"war3mapImported\\QuestYellow1.mdx")
set Uu[21]=GetLastCreatedEffectBJ()
call EnableTrigger(aJ)
call EnableTrigger(aK)
endfunction
function BLM takes nothing returns nothing
set aI=CreateTrigger()
call DisableTrigger(aI)
call TriggerRegisterUnitEvent(aI,Lb,EVENT_UNIT_DEATH)
call TriggerAddAction(aI,function BLL)
endfunction
function BLN takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65686970) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLO takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BLP takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BLQ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BLR takes nothing returns boolean
return GetBooleanAnd(BLP(),BLQ())
endfunction
function BLS takes nothing returns boolean
return GetBooleanAnd(BLO(),BLR())
endfunction
function BLT takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=14) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=20) then
return false
endif
return true
endfunction
function BLU takes nothing returns nothing
if BLT() then
call AddHeroXP(GetEnumUnit(),2000,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1000
else
endif
endfunction
function BLV takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=14) then
return false
endif
return true
endfunction
function BLW takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=14) then
return false
endif
return true
endfunction
function BLX takes nothing returns nothing
if BLW() then
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Хм... Смелые, отважные.. Ладно. Открою Вам немного частичку тайны. Для получения желаемого добудьте Книгу Мудрости!")
call QuestSetCompletedBJ(YW[21],true)
call DestroyQuest(YW[21])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BLS))
call ForGroupBJ(Tj,function BLU)
call DestroyGroup(Tj)
set Sh=Sh+1
call DestroyEffectBJ(Uu[21])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1000 опыта|r, |c00ffff00200 золота|r, |c00ff96965 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BLV() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+600
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+15
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000014|r уровня",.027,255,255,255)
endif
endfunction
function BLY takes nothing returns nothing
set aJ=CreateTrigger()
call DisableTrigger(aJ)
call TriggerRegisterAnyUnitEventBJ(aJ,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aJ,Condition(function BLN))
call TriggerAddAction(aJ,function BLX)
endfunction
function BLZ takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303654))==true) then
return false
endif
return true
endfunction
function BLa takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303654))
call DisplayTextToForce(GetPlayersAll(),"Теперь вы можете покупать личные предметы.")
call ShowUnit(IF,true)
endfunction
function BLb takes nothing returns nothing
set aK=CreateTrigger()
call DisableTrigger(aK)
call TriggerRegisterEnterRectSimple(aK,By)
call TriggerAddCondition(aK,Condition(function BLZ))
call TriggerAddAction(aK,function BLa)
endfunction
function BLc takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6B6F6C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLd takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=33) then
return false
endif
return true
endfunction
function BLe takes nothing returns nothing
if BLd() then
call DestroyEffectBJ(Uu[22])
call AddSpecialEffectTargetUnitBJ("overhead",Kf,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[22]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Дорога дальше\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 33-40|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Дорога дальше","Ухаха, слабаки! Убили Кая? Нет? ЖАЛКИЕ УБЛЮДКИ!!!
|c006969FFУровень задания: 33-40|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[22]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000033|r уровня",.027,255,255,255)
endif
endfunction
function BLf takes nothing returns nothing
set aL=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aL,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aL,Condition(function BLc))
call TriggerAddAction(aL,function BLe)
endfunction
function BLg takes nothing returns nothing
call EnableTrigger(aN)
call DestroyEffectBJ(Uu[22])
call AddSpecialEffectTargetUnitBJ("overhead",Kf,"war3mapImported\\QuestYellow1.mdx")
set Uu[22]=GetLastCreatedEffectBJ()
endfunction
function BLh takes nothing returns nothing
set aM=CreateTrigger()
call TriggerRegisterUnitEvent(aM,LJ,EVENT_UNIT_DEATH)
call TriggerAddAction(aM,function BLg)
endfunction
function BLi takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6B6F6C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLj takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BLk takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BLl takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BLm takes nothing returns boolean
return GetBooleanAnd(BLk(),BLl())
endfunction
function BLn takes nothing returns boolean
return GetBooleanAnd(BLj(),BLm())
endfunction
function BLo takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=33) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=40) then
return false
endif
return true
endfunction
function BLp takes nothing returns nothing
if BLo() then
call AddHeroXP(GetEnumUnit(),5500,false)
else
endif
endfunction
function BLq takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=34) then
return false
endif
return true
endfunction
function BLr takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=33) then
return false
endif
return true
endfunction
function BLs takes nothing returns nothing
if BLr() then
call DestroyEffectBJ(Uu[22])
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call QuestSetCompletedBJ(YW[22],true)
call DestroyQuest(YW[22])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BLn))
call ForGroupBJ(Tj,function BLp)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF5500 опыта|r, |c00ffff00600 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BLq() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1800
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000033|r уровня",.027,255,255,255)
endif
endfunction
function BLt takes nothing returns nothing
set aN=CreateTrigger()
call DisableTrigger(aN)
call TriggerRegisterAnyUnitEventBJ(aN,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aN,Condition(function BLi))
call TriggerAddAction(aN,function BLs)
endfunction
function BLu takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65646F63) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLv takes nothing returns nothing
call DestroyEffectBJ(Uu[23])
call AddSpecialEffectTargetUnitBJ("overhead",IZ,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[23]=GetLastCreatedEffectBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DisableTrigger(GetTriggeringTrigger())
set YU[44]=GetRectCenter(B1)
call CreateItemLoc($49303734,YU[44])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Голодный\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 13-17|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Голодный","Как же я хочу есть.... Голодать - точно не моя стихия. У Вас есть что-то сьедобное?
|c006969FFУровень задания: 13-17|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[23]=GetLastCreatedQuestBJ()
call RemoveLocation(YU[44])
endfunction
function BLw takes nothing returns nothing
set aO=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aO,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aO,Condition(function BLu))
call TriggerAddAction(aO,function BLv)
endfunction
function BLx takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303734))==true) then
return false
endif
return true
endfunction
function BLy takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303734))
call AddSpecialEffectTargetUnitBJ("overhead",GetTriggerUnit(),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call UnitAddItemByIdSwapped($49303735,GetTriggerUnit())
endfunction
function BLz takes nothing returns nothing
set aP=CreateTrigger()
call TriggerRegisterEnterRectSimple(aP,Z)
call TriggerAddCondition(aP,Condition(function BLx))
call TriggerAddAction(aP,function BLy)
endfunction
function BL0 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303735))==true) then
return false
endif
return true
endfunction
function BL1 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BL2 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BL3 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BL4 takes nothing returns boolean
return GetBooleanAnd(BL2(),BL3())
endfunction
function BL5 takes nothing returns boolean
return GetBooleanAnd(BL1(),BL4())
endfunction
function BL6 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=13) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=17) then
return false
endif
return true
endfunction
function BL7 takes nothing returns nothing
if BL6() then
call AddHeroXP(GetEnumUnit(),900,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+900
else
endif
endfunction
function BL8 takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=13) then
return false
endif
return true
endfunction
function BL9 takes nothing returns nothing
call DestroyEffectBJ(Uu[23])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303735))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Как вкусно! Спасибо огромное!")
call QuestSetCompletedBJ(YW[23],true)
call DestroyQuest(YW[23])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BL5))
call ForGroupBJ(Tj,function BL7)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF900 опыта|r, |c00ffff00150 золота|r, |c00ff96963 Кровавых Меток
|c00ffff00Друид-медведь|r: прийдите попозже, у меня есть для вас работенка.")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BL8() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+450
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+9
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
call TriggerSleepAction(60.)
call EnableTrigger(aR)
call AddSpecialEffectTargetUnitBJ("overhead",IZ,"war3mapImported\\TalkToMev2.mdx")
set Uu[23]=GetLastCreatedEffectBJ()
endfunction
function BMB takes nothing returns nothing
set aQ=CreateTrigger()
call TriggerRegisterEnterRectSimple(aQ,B0)
call TriggerAddCondition(aQ,Condition(function BL0))
call TriggerAddAction(aQ,function BL9)
endfunction
function BMC takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65646F63) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BMD takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=15) then
return false
endif
return true
endfunction
function BME takes nothing returns nothing
if BMD() then
call DestroyEffectBJ(Uu[23])
call AddSpecialEffectTargetUnitBJ("overhead",IZ,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[23]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Порабощение\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 15-25|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Порабощение","Тут неподалеку обосновался некий темный маг Оракул. Не могли бы Вы отправить его на тот свет? С меня достойная награда.
|c006969FFУровень задания: 15-25","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[23]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000015|r уровня",.027,255,255,255)
endif
endfunction
function BMF takes nothing returns nothing
set aR=CreateTrigger()
call DisableTrigger(aR)
call TriggerRegisterAnyUnitEventBJ(aR,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aR,Condition(function BMC))
call TriggerAddAction(aR,function BME)
endfunction
function BMG takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|C00ffff00Друид-медведь:|r Возвращайтесь. Награда ждать не будет.")
call DestroyEffectBJ(Uu[23])
call AddSpecialEffectTargetUnitBJ("overhead",IZ,"war3mapImported\\QuestYellow1.mdx")
set Uu[23]=GetLastCreatedEffectBJ()
call EnableTrigger(aT)
endfunction
function BMH takes nothing returns nothing
set aS=CreateTrigger()
call TriggerRegisterUnitEvent(aS,Lr,EVENT_UNIT_DEATH)
call TriggerAddAction(aS,function BMG)
endfunction
function BMI takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65646F63) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BMJ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BMK takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BML takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BMM takes nothing returns boolean
return GetBooleanAnd(BMK(),BML())
endfunction
function BMN takes nothing returns boolean
return GetBooleanAnd(BMJ(),BMM())
endfunction
function BMO takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=15) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=25) then
return false
endif
return true
endfunction
function BMP takes nothing returns nothing
if BMO() then
call AddHeroXP(GetEnumUnit(),2500,false)
else
endif
endfunction
function BMQ takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=15) then
return false
endif
return true
endfunction
function BMR takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=15) then
return false
endif
return true
endfunction
function BMS takes nothing returns nothing
if BMR() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call DestroyEffectBJ(Uu[23])
call QuestSetCompletedBJ(YW[23],true)
call DestroyQuest(YW[23])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BMN))
call ForGroupBJ(Tj,function BMP)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2500 опыта|r, |c00ffff00250 золота|r, |c00ff96963 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BMQ() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+750
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+9
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000015|r уровня",.027,255,255,255)
endif
endfunction
function BMT takes nothing returns nothing
set aT=CreateTrigger()
call DisableTrigger(aT)
call TriggerRegisterAnyUnitEventBJ(aT,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aT,Condition(function BMI))
call TriggerAddAction(aT,function BMS)
endfunction
function BMU takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E666F76) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BMV takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=19) then
return false
endif
return true
endfunction
function BMW takes nothing returns nothing
if BMV() then
call DestroyEffectBJ(Uu[24])
call AddSpecialEffectTargetUnitBJ("overhead",I5,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[24]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(aV)
call SetDestructableInvulnerableBJ(HB,true)
call SetDestructableInvulnerableBJ(HD,true)
call SetDestructableInvulnerableBJ(HC,true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Дорога в Ад\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 19-24|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Дорога в Ад","|c006969FFУровень задания: 19-24|r
Один из древних жителей этого мира продал мне свою душу. Чтобы заполучить её, пройдите испытание в небольшом уголке Ада. Вход к испытанию найдете в одинокой палатке в локации пауков.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[24]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000019|r уровня",.027,255,255,255)
endif
endfunction
function BMX takes nothing returns nothing
set aU=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aU,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aU,Condition(function BMU))
call TriggerAddAction(aU,function BMW)
endfunction
function BMY takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BMZ takes nothing returns nothing
set YU[45]=GetRectCenter(B4)
call SetUnitPositionLoc(GetEnteringUnit(),YU[45])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),GetRectCenter(B4),.5)
call RemoveLocation(YU[45])
endfunction
function BMa takes nothing returns nothing
set aV=CreateTrigger()
call DisableTrigger(aV)
call TriggerRegisterEnterRectSimple(aV,B5)
call TriggerAddCondition(aV,Condition(function BMY))
call TriggerAddAction(aV,function BMZ)
endfunction
function BMb takes nothing returns nothing
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HB)
endfunction
function BMc takes nothing returns nothing
set aW=CreateTrigger()
call TriggerRegisterUnitEvent(aW,LN,EVENT_UNIT_DEATH)
call TriggerAddAction(aW,function BMb)
endfunction
function BMd takes nothing returns nothing
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HD)
endfunction
function BMe takes nothing returns nothing
set aX=CreateTrigger()
call TriggerRegisterUnitEvent(aX,LP,EVENT_UNIT_DEATH)
call TriggerAddAction(aX,function BMd)
endfunction
function BMf takes nothing returns nothing
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HC)
endfunction
function BMg takes nothing returns nothing
set aY=CreateTrigger()
call TriggerRegisterUnitEvent(aY,LO,EVENT_UNIT_DEATH)
call TriggerAddAction(aY,function BMf)
endfunction
function BMh takes nothing returns nothing
call EnableTrigger(aa)
call EnableTrigger(ab)
call DestroyEffectBJ(Uu[24])
call AddSpecialEffectTargetUnitBJ("overhead",I5,"war3mapImported\\QuestYellow1.mdx")
set Uu[24]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Испытание пройдено! Вернитесь за наградой")
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HB)
endfunction
function BMi takes nothing returns nothing
set aZ=CreateTrigger()
call TriggerRegisterUnitEvent(aZ,LQ,EVENT_UNIT_DEATH)
call TriggerAddAction(aZ,function BMh)
endfunction
function BMj takes nothing returns nothing
set YU[46]=GetRectCenter(B6)
call SetUnitPositionLoc(GetEnteringUnit(),YU[46])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),GetRectCenter(B6),.5)
call RemoveLocation(YU[46])
endfunction
function BMk takes nothing returns nothing
set aa=CreateTrigger()
call DisableTrigger(aa)
call TriggerRegisterEnterRectSimple(aa,B3)
call TriggerAddAction(aa,function BMj)
endfunction
function BMl takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E666F76) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BMm takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BMn takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BMo takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BMp takes nothing returns boolean
return GetBooleanAnd(BMn(),BMo())
endfunction
function BMq takes nothing returns boolean
return GetBooleanAnd(BMm(),BMp())
endfunction
function BMr takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=19) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=24) then
return false
endif
return true
endfunction
function BMs takes nothing returns nothing
if BMr() then
call AddHeroXP(GetEnumUnit(),1500,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1500
else
endif
endfunction
function BMt takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=19) then
return false
endif
return true
endfunction
function BMu takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=19) then
return false
endif
return true
endfunction
function BMv takes nothing returns nothing
if BMu() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ac)
call DestroyEffectBJ(Uu[24])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Молодцы! Хвалю. Теперь я смогу подарить Вам душу того существа. Главное - принесите мне его частичку.|r")
call QuestSetCompletedBJ(YW[24],true)
call DestroyQuest(YW[24])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BMq))
call ForGroupBJ(Tj,function BMs)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1500 опыта|r, |c00ffff00300 золота|r, |c00ff96966 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BMt() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+900
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+18
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000019|r уровня",.027,255,255,255)
endif
endfunction
function BMw takes nothing returns nothing
set ab=CreateTrigger()
call DisableTrigger(ab)
call TriggerRegisterAnyUnitEventBJ(ab,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ab,Condition(function BMl))
call TriggerAddAction(ab,function BMv)
endfunction
function BMx takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303747))==true) then
return false
endif
return true
endfunction
function BMy takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Вот, только не пораньтесь|r")
set YU[47]=GetRectCenter(B2)
call CreateItemLoc($49303748,YU[47])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303747))
call RemoveLocation(YU[47])
endfunction
function BMz takes nothing returns nothing
set ac=CreateTrigger()
call DisableTrigger(ac)
call TriggerRegisterEnterRectSimple(ac,B2)
call TriggerAddCondition(ac,Condition(function BMx))
call TriggerAddAction(ac,function BMy)
endfunction
function BM0 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F726169) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BM1 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=40) then
return false
endif
return true
endfunction
function BM2 takes nothing returns nothing
if BM1() then
call DestroyEffectBJ(Uu[25])
call AddSpecialEffectTargetUnitBJ("overhead",Km,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[25]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ae)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Смертным тут не место\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 40-45|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Смертным тут не место","|c006969FFУровень задания: 40-45|r
Аха! Вы себя то видели? Куда вы рвётесь? Вас же порвут на куски! Но ежели есть желание - почему бы и нет.... Я с удовольствием посмотрю, как Маркиз будет ковыряться вашими костями у себя в тарелке. Принесите мне Свиток власти, что украл огненный монстр и я позволю вам умереть.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[25]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000040|r уровня",.027,255,255,255)
endif
endfunction
function BM3 takes nothing returns nothing
set ad=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ad,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ad,Condition(function BM0))
call TriggerAddAction(ad,function BM2)
endfunction
function BM4 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303857))==true) then
return false
endif
return true
endfunction
function BM5 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BM6 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BM7 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BM8 takes nothing returns boolean
return GetBooleanAnd(BM6(),BM7())
endfunction
function BM9 takes nothing returns boolean
return GetBooleanAnd(BM5(),BM8())
endfunction
function BNB takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=40) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=45) then
return false
endif
return true
endfunction
function BNC takes nothing returns nothing
if BNB() then
call AddHeroXP(GetEnumUnit(),5000,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3900
else
endif
endfunction
function BND takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=40) then
return false
endif
return true
endfunction
function BNE takes nothing returns nothing
call DestroyEffectBJ(Uu[25])
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Ну что же, встречайте свою смерть!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303857))
call ShowUnitShow(IN)
call QuestSetCompletedBJ(YW[25],true)
call DestroyQuest(YW[25])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BM9))
call ForGroupBJ(Tj,function BNC)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF5000 опыта|r, |c00ffff00500 золота|r, |c00ff969610 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BND() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1500
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BNF takes nothing returns nothing
set ae=CreateTrigger()
call DisableTrigger(ae)
call TriggerRegisterEnterRectSimple(ae,CB)
call TriggerAddCondition(ae,Condition(function BM4))
call TriggerAddAction(ae,function BNE)
endfunction
function BNG takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68706561) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BNH takes nothing returns boolean
if not (QK[5]==7) then
return false
endif
return true
endfunction
function BNI takes nothing returns boolean
if not (QK[5]==6) then
return false
endif
return true
endfunction
function BNJ takes nothing returns boolean
if not (QK[5]==5) then
return false
endif
return true
endfunction
function BNK takes nothing returns boolean
if not (QK[5]==4) then
return false
endif
return true
endfunction
function BNL takes nothing returns boolean
if not (QK[5]==3) then
return false
endif
return true
endfunction
function BNM takes nothing returns boolean
if not (QK[5]==2) then
return false
endif
return true
endfunction
function BNN takes nothing returns boolean
if not (QK[5]==1) then
return false
endif
return true
endfunction
function BNO takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=39) then
return false
endif
return true
endfunction
function BNP takes nothing returns nothing
if BNO() then
set QK[5]=GetRandomInt(1,7)
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ae)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Огонь - друг человека!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 39-42|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Огонь - друг человека!","Этот костер погас! Помогите зажечь его снова...
|c006969FFУровень задания: 39-42|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[26]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Uu[26])
call AddSpecialEffectTargetUnitBJ("overhead",Ka,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[26]=GetLastCreatedEffectBJ()
if BNH() then
set YU[48]=GetRectCenter(CK)
call CreateItemLoc($4930385A,GetRectCenter(CK))
call RemoveLocation(YU[48])
else
endif
if BNI() then
set YU[48]=GetRectCenter(CJ)
call CreateItemLoc($4930385A,YU[48])
call RemoveLocation(YU[48])
else
endif
if BNJ() then
set YU[48]=GetRectCenter(CI)
call CreateItemLoc($4930385A,YU[48])
call RemoveLocation(YU[48])
else
endif
if BNK() then
set YU[48]=GetRectCenter(CH)
call CreateItemLoc($4930385A,YU[48])
call RemoveLocation(YU[48])
else
endif
if BNL() then
set YU[48]=GetRectCenter(CG)
call CreateItemLoc($4930385A,YU[48])
call RemoveLocation(YU[48])
else
endif
if BNM() then
set YU[48]=GetRectCenter(CF)
call CreateItemLoc($4930385A,YU[48])
call RemoveLocation(YU[48])
else
endif
if BNN() then
set YU[48]=GetRectCenter(CE)
call CreateItemLoc($4930385A,YU[48])
call RemoveLocation(YU[48])
else
endif
else
call nX(GetTriggerUnit(),"Задание с |c00ff000039|r уровня",.027,255,255,255)
endif
endfunction
function BNQ takes nothing returns nothing
set af=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(af,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(af,Condition(function BNG))
call TriggerAddAction(af,function BNP)
endfunction
function BNR takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303257) then
return false
endif
return true
endfunction
function BNS takes nothing returns boolean
if not (Sc==3) then
return false
endif
return true
endfunction
function BNT takes nothing returns nothing
set Sc=Sc+1
if BNS() then
call DisableTrigger(ah)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000ff00Все повозки уничтожены
Путь к Фениксу открыт!")
call RemoveUnit(Ik)
call RemoveDestructable(HF)
call RemoveDestructable(HH)
call RemoveDestructable(HE)
call DestroyEffectBJ(Uu[32])
else
endif
endfunction
function BNU takes nothing returns nothing
set ag=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ag,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ag,Condition(function BNR))
call TriggerAddAction(ag,function BNT)
endfunction
function BNV takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930385A))==true) then
return false
endif
return true
endfunction
function BNW takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BNX takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BNY takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BNZ takes nothing returns boolean
return GetBooleanAnd(BNX(),BNY())
endfunction
function BNa takes nothing returns boolean
return GetBooleanAnd(BNW(),BNZ())
endfunction
function BNb takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=39) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=42) then
return false
endif
return true
endfunction
function BNc takes nothing returns nothing
if BNb() then
call AddHeroXP(GetEnumUnit(),4500,false)
else
endif
endfunction
function BNd takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=39) then
return false
endif
return true
endfunction
function BNe takes nothing returns nothing
call DestroyEffectBJ(Uu[26])
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Ура, горит!!!!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930385A))
call CreateItemLoc($4930434B,GetRectCenter(CD))
call AddSpecialEffectLocBJ(GetRectCenter(CC),"Doodads\\Cinematic\\TownBurningFireEmitter\\TownBurningFireEmitter.mdl")
call QuestSetCompletedBJ(YW[26],true)
call DestroyQuest(YW[26])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BNa))
call ForGroupBJ(Tj,function BNc)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF4500 опыта|r, |c00ffff00500 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BNd() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1500
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BNf takes nothing returns nothing
set ai=CreateTrigger()
call TriggerRegisterEnterRectSimple(ai,CD)
call TriggerAddCondition(ai,Condition(function BNV))
call TriggerAddAction(ai,function BNe)
endfunction
function BNg takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$756B7467) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BNh takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=26) then
return false
endif
return true
endfunction
function BNi takes nothing returns nothing
if BNh() then
call DestroyEffectBJ(Uu[27])
call AddSpecialEffectTargetUnitBJ("overhead",I3,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[27]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(ak)
call SetUnitLifePercentBJ(I3,5.)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Свет во мраке\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 26-31|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Свет во мраке","Свою душу владыка Тьмы разделил на три части, и спрятал по разным уголка Кладбища. Одну из частей я отыскал, и отдам Вам её, если вы поможете мне избежать гибели. 
|c006","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[27]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000026|r уровня",.027,255,255,255)
endif
endfunction
function BNj takes nothing returns nothing
set aj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aj,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aj,Condition(function BNg))
call TriggerAddAction(aj,function BNi)
endfunction
function BNk takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$756B7467) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
if not (GetUnitLifePercent(GetOrderTargetUnit())>=99.) then
return false
endif
return true
endfunction
function BNl takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BNm takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BNn takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BNo takes nothing returns boolean
return GetBooleanAnd(BNm(),BNn())
endfunction
function BNp takes nothing returns boolean
return GetBooleanAnd(BNl(),BNo())
endfunction
function BNq takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=26) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=31) then
return false
endif
return true
endfunction
function BNr takes nothing returns nothing
if BNq() then
call AddHeroXP(GetEnumUnit(),3500,false)
else
endif
endfunction
function BNs takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=29) then
return false
endif
return true
endfunction
function BNt takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=26) then
return false
endif
return true
endfunction
function BNu takes nothing returns nothing
if BNt() then
call DestroyEffectBJ(Uu[27])
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
set YU[49]=GetRectCenter(CL)
call CreateItemLoc($49303931,YU[49])
call CreateItemLoc($49303931,YU[49])
call CreateItemLoc($49303931,YU[49])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Я буду жить! Держите, что и обещал|r")
call QuestSetCompletedBJ(YW[27],true)
call DestroyQuest(YW[27])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BNp))
call ForGroupBJ(Tj,function BNr)
call DestroyGroup(Tj)
set Sh=Sh+1
call RemoveLocation(YU[49])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3500 опыта|r, |c00ffff00300 золота|r, |c00ff969610 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BNs() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+900
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000026|r уровня",.027,255,255,255)
endif
endfunction
function BNv takes nothing returns nothing
set ak=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ak,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ak,Condition(function BNk))
call TriggerAddAction(ak,function BNu)
endfunction
function BNw takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E30384C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BNx takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=42) then
return false
endif
return true
endfunction
function BNy takes nothing returns nothing
if BNx() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(am)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Память о бабушке\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 42-45|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Память о бабушке","Бабушка оставила мне в наследство своё ожерелье. А я потеряла его где-то, никак не могу найти... Это украшение очень дорого мне, как память. Помогите, а?
|c006969FFУровень задания|r: 42-45

","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[28]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Uu[28])
call AddSpecialEffectTargetUnitBJ("overhead",IY,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[28]=GetLastCreatedEffectBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000042|r уровня",.027,255,255,255)
endif
endfunction
function BNz takes nothing returns nothing
set al=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(al,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(al,Condition(function BNw))
call TriggerAddAction(al,function BNy)
endfunction
function BN0 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E30384C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
if not (UnitHasItem(GetTriggerUnit(),GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303935))==true) then
return false
endif
return true
endfunction
function BN1 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BN2 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BN3 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BN4 takes nothing returns boolean
return GetBooleanAnd(BN2(),BN3())
endfunction
function BN5 takes nothing returns boolean
return GetBooleanAnd(BN1(),BN4())
endfunction
function BN6 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=42) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=45) then
return false
endif
return true
endfunction
function BN7 takes nothing returns nothing
if BN6() then
call AddHeroXP(GetEnumUnit(),6700,false)
else
endif
endfunction
function BN8 takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=42) then
return false
endif
return true
endfunction
function BN9 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=42) then
return false
endif
return true
endfunction
function BOB takes nothing returns nothing
if BN9() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call DestroyEffectBJ(Uu[28])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Да, оно! Спасибо огромное!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303935))
call QuestSetCompletedBJ(YW[28],true)
call DestroyQuest(YW[28])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BN5))
call ForGroupBJ(Tj,function BN7)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF6700 опыта|r, |c00ffff00400 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BN8() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000042|r уровня",.027,255,255,255)
endif
endfunction
function BOC takes nothing returns nothing
set am=CreateTrigger()
call DisableTrigger(am)
call TriggerRegisterAnyUnitEventBJ(am,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(am,Condition(function BN0))
call TriggerAddAction(am,function BOB)
endfunction
function BOD takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E686561) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BOE takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function BOF takes nothing returns nothing
if BOE() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ao)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Сестра\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 45-50|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Сестра","Мою сестру забрали в плен дикие Водные Элементали. Помогите ей вернуться домой
|c006969FFУровень задания: 45-50|r
","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[29]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Uu[29])
call AddSpecialEffectTargetUnitBJ("overhead",Kb,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[29]=GetLastCreatedEffectBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000045|r уровня",.027,255,255,255)
endif
endfunction
function BOG takes nothing returns nothing
set an=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(an,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(an,Condition(function BOD))
call TriggerAddAction(an,function BOF)
endfunction
function BOH takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303936))==true) then
return false
endif
return true
endfunction
function BOI takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303936))
call KillDestructable(HI)
set YU[51]=GetRectCenter(CP)
call CreateNUnitsAtLoc(1,$6E303335,GetOwningPlayer(GetEnteringUnit()),YU[51],bj_UNIT_FACING)
call RemoveLocation(YU[51])
endfunction
function BOJ takes nothing returns nothing
set ap=CreateTrigger()
call TriggerRegisterEnterRectSimple(ap,CP)
call TriggerAddCondition(ap,Condition(function BOH))
call TriggerAddAction(ap,function BOI)
endfunction
function BOK takes nothing returns boolean
if not (GetUnitTypeId(GetEnteringUnit())==$6E303335) then
return false
endif
return true
endfunction
function BOL takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BOM takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BON takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BOO takes nothing returns boolean
return GetBooleanAnd(BOM(),BON())
endfunction
function BOP takes nothing returns boolean
return GetBooleanAnd(BOL(),BOO())
endfunction
function BOQ takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=45) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=50) then
return false
endif
return true
endfunction
function BOR takes nothing returns nothing
if BOQ() then
call AddHeroXP(GetEnumUnit(),8000,false)
else
endif
endfunction
function BOS takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=45) then
return false
endif
return true
endfunction
function BOT takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,Kb)
call UnitAddAbilityBJ($416E6532,Kb)
call DestroyEffectBJ(Uu[29])
call RemoveUnit(GetEnteringUnit())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Родная, моя, любимая!!!|r")
call QuestSetCompletedBJ(YW[29],true)
call DestroyQuest(YW[29])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BOP))
call ForGroupBJ(Tj,function BOR)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF8000 опыта|r, |c00ffff00500 золота|r, |c00ff969625 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BOS() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1500
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+75
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BOU takes nothing returns nothing
set ao=CreateTrigger()
call DisableTrigger(ao)
call TriggerRegisterEnterRectSimple(ao,CO)
call TriggerAddCondition(ao,Condition(function BOK))
call TriggerAddAction(ao,function BOT)
endfunction
function BOV takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E647268) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BOW takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=32) then
return false
endif
return true
endfunction
function BOX takes nothing returns nothing
if BOW() then
call DisableTrigger(GetTriggeringTrigger())
call ShowUnitShow(Li)
call PauseUnitBJ(false,Li)
call EnableTrigger(Vk)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Страж Течений\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 32-36|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Страж Течений","Ужасный монстр поселился на Архипелаге. Разберетесь?
|c006969FFУровень задания: 32-36|r
","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[30]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Uu[30])
call AddSpecialEffectTargetUnitBJ("overhead",Kl,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[30]=GetLastCreatedEffectBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000032|r уровня",.027,255,255,255)
endif
endfunction
function BOY takes nothing returns nothing
set aq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aq,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aq,Condition(function BOV))
call TriggerAddAction(aq,function BOX)
endfunction
function BOZ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BOa takes nothing returns nothing
local integer MC=0
set V2=Location(8685.,7176.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call RemoveLocation(V2)
call SetUnitLifePercentBJ(Li,100)
call SetUnitLifePercentBJ(Vf[4],100)
call SaveInteger(NZ,GetHandleId(Li),1,0)
call SaveInteger(NZ,GetHandleId(Vf[4]),1,0)
loop
call SaveInteger(NZ,GetHandleId(Li),2+MC,0)
call SaveInteger(NZ,GetHandleId(Vf[4]),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function BOb takes nothing returns nothing
set Vk=CreateTrigger()
call DisableTrigger(Vk)
call TriggerRegisterEnterRectSimple(Vk,FF)
call TriggerAddCondition(Vk,Condition(function BOZ))
call TriggerAddAction(Vk,function BOa)
endfunction
function BOc takes nothing returns nothing
if GetUnitTypeId(GetDyingUnit())==$6E303338 then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Награда ждет своих героев.")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(as)
call RemoveLocation(YU[52])
call DestroyEffect(Uu[30])
call AddSpecialEffectTargetUnitBJ("overhead",Kl,"war3mapImported\\QuestYellow1.mdx")
set Uu[30]=GetLastCreatedEffectBJ()
endif
endfunction
function BOd takes nothing returns nothing
set ar=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ar,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(ar,function BOc)
endfunction
function BOe takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E647268) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BOf takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BOg takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BOh takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BOi takes nothing returns boolean
return GetBooleanAnd(BOg(),BOh())
endfunction
function BOj takes nothing returns boolean
return GetBooleanAnd(BOf(),BOi())
endfunction
function BOk takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=32) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=36) then
return false
endif
return true
endfunction
function BOl takes nothing returns nothing
if BOk() then
call AddHeroXP(GetEnumUnit(),3900,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3900
else
endif
endfunction
function BOm takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=32) then
return false
endif
return true
endfunction
function BOn takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=32) then
return false
endif
return true
endfunction
function BOo takes nothing returns nothing
if BOn() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call CreateItemLoc($49305456,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Uu[30])
call QuestSetCompletedBJ(YW[30],true)
call DestroyQuest(YW[30])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BOj))
call ForGroupBJ(Tj,function BOl)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3900 опыта|r, |c00ffff00400 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BOm() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000032|r уровня",.027,255,255,255)
endif
endfunction
function BOp takes nothing returns nothing
set as=CreateTrigger()
call DisableTrigger(as)
call TriggerRegisterAnyUnitEventBJ(as,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(as,Condition(function BOe))
call TriggerAddAction(as,function BOo)
endfunction
function BOq takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304130))==true) then
return false
endif
return true
endfunction
function BOr takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304130))
call UnitAddItemByIdSwapped($49303959,GetTriggerUnit())
endfunction
function BOs takes nothing returns nothing
set at=CreateTrigger()
call TriggerRegisterEnterRectSimple(at,BE)
call TriggerAddCondition(at,Condition(function BOq))
call TriggerAddAction(at,function BOr)
endfunction
function BOt takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304344) then
return false
endif
return true
endfunction
function BOu takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BOv takes nothing returns boolean
if not (RectContainsUnit(DJ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BOw takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BOx takes nothing returns boolean
if not (RectContainsUnit(DI,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BOy takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BOz takes nothing returns boolean
if not (RectContainsUnit(DH,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BO0 takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BO1 takes nothing returns boolean
if not (RectContainsUnit(DG,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BO2 takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BO3 takes nothing returns boolean
if not (RectContainsUnit(DE,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BO4 takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BO5 takes nothing returns boolean
if not (RectContainsUnit(DF,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BO6 takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BO7 takes nothing returns boolean
if not (RectContainsUnit(DC,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BO8 takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BO9 takes nothing returns boolean
if not (RectContainsUnit(DD,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPB takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPC takes nothing returns boolean
if not (RectContainsUnit(DB,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPD takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPE takes nothing returns boolean
if not (RectContainsUnit(C9,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPF takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPG takes nothing returns boolean
if not (RectContainsUnit(C8,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPH takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPI takes nothing returns boolean
if not (RectContainsUnit(C7,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPJ takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPK takes nothing returns boolean
if not (RectContainsUnit(C6,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPL takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPM takes nothing returns boolean
if not (RectContainsUnit(C5,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPN takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPO takes nothing returns boolean
if not (RectContainsUnit(C4,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPP takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPQ takes nothing returns boolean
if not (RectContainsUnit(C3,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPR takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPS takes nothing returns boolean
if not (RectContainsUnit(C2,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPT takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPU takes nothing returns boolean
if not (RectContainsUnit(C1,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPV takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPW takes nothing returns boolean
if not (RectContainsUnit(C0,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPX takes nothing returns boolean
if not (SU==20) then
return false
endif
return true
endfunction
function BPY takes nothing returns boolean
if not (RectContainsUnit(Cz,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPZ takes nothing returns nothing
if BOv() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JT,"Death")
call RemoveRect(DJ)
if BOu() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BOx() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JS,"Death")
call RemoveRect(DI)
if BOw() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BOz() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JR,"Death")
call RemoveRect(DH)
if BOy() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BO1() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JQ,"Death")
call RemoveRect(DG)
if BO0() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BO3() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JO,"Death")
call RemoveRect(DE)
if BO2() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BO5() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JP,"Death")
call RemoveRect(DF)
if BO4() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BO7() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JM,"Death")
call RemoveRect(DC)
if BO6() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BO9() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JN,"Death")
call RemoveRect(DD)
if BO8() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPC() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JL,"Death")
call RemoveRect(DB)
if BPB() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPE() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JK,"Death")
call RemoveRect(C9)
if BPD() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPG() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JJ,"Death")
call RemoveRect(C8)
if BPF() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPI() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JI,"Death")
call RemoveRect(C7)
if BPH() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPK() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JH,"Death")
call RemoveRect(C6)
if BPJ() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPM() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JG,"Death")
call RemoveRect(C5)
if BPL() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPO() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JC,"Death")
call RemoveRect(C4)
if BPN() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPQ() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JE,"Death")
call RemoveRect(C3)
if BPP() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPS() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JD,"Death")
call RemoveRect(C2)
if BPR() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPU() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(JB,"Death")
call RemoveRect(C1)
if BPT() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPW() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(It,"Death")
call RemoveRect(C0)
if BPV() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPY() then
set SU=SU+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SU)+"|c00ffff00/20|r"))
call SetUnitAnimation(Is,"Death")
call RemoveRect(Cz)
if BPX() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(av)
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
endfunction
function BPa takes nothing returns nothing
set au=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(au,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(au,Condition(function BOt))
call TriggerAddAction(au,function BPZ)
endfunction
function BPb takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4E616C63) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BPc takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49304344,GetRectCenter(Cy))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Охотники за сокровищами\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: Неограниченый|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Охотники за сокровищами","Я люблю золото! А вы любите золото? Все любят золото! Ух..... Поможете мне в одном деле? Вот Вам ключ, найдите в Великом Мелероте |c00ffff0020 сундуков с золотом|r и вскройте их! ЧТОБЫ ОНИ СТОЯЛИ ОТКРЫТЫ, АХАХАХ. Не спрашивайте зачем, бегите, в погоню за золотом! После выполнения этого поручения я стану для Вас больше, чем просто другом.
|c006969FFУровень задания: Неограниченый|r
","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[31]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Uu[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kp,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[31]=GetLastCreatedEffectBJ()
call TriggerSleepAction(2880.)
call DisableTrigger(ax)
endfunction
function BPd takes nothing returns nothing
set aw=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aw,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aw,Condition(function BPb))
call TriggerAddAction(aw,function BPc)
endfunction
function BPe takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4E616C63) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BPf takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"О как! Справились! Отлично, ребятки. Теперь я разрешу Вам купить у меня отличные вещицы. Раньше я торговал разными настойками и травами, но, увы, дело не прыбыльное, поэтому теперь в моих товарах много чего иного.")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FFFF00Доступ к товарам Алхимика|r")
call QuestSetCompletedBJ(YW[31],true)
call DestroyQuest(YW[31])
set Sh=Sh+1
call UnitAddAbilityBJ($41706974,Kp)
call UnitAddAbilityBJ($416E6532,Kp)
call DestroyEffectBJ(Uu[31])
endfunction
function BPg takes nothing returns nothing
set av=CreateTrigger()
call DisableTrigger(av)
call TriggerRegisterAnyUnitEventBJ(av,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(av,Condition(function BPe))
call TriggerAddAction(av,function BPf)
endfunction
function BPh takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E636867) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BPi takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303257
endfunction
function BPj takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"move",GetRectCenter(DJ))
endfunction
function BPk takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=43) then
return false
endif
return true
endfunction
function BPl takes nothing returns nothing
if BPk() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[32])
call AddSpecialEffectTargetUnitBJ("overhead",Ik,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[32]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Караван\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Наркоторговля в наше время очень популярна, не так ли? Но я пытась бороться с этой заразой всеми силами. если есть желание помочь в этом благом деле, что ж - пожалуйста. Через 15 секунд с Суральда выдвинется 3 повозки с контрабандой. Если хотя бы одна из них достигнет Орхеста - считайте что вы зря старались")
call TriggerSleepAction(15.)
call CreateNUnitsAtLoc(3,$68303257,Player(10),GetRectCenter(Fu),bj_UNIT_FACING)
set SV[100]=GetUnitsOfPlayerMatching(Player(10),Condition(function BPi))
call ForGroupBJ(SV[100],function BPj)
call DestroyGroup(SV[100])
call EnableTrigger(ah)
else
call nX(GetTriggerUnit(),"Задание с |c00ff000043|r уровня",.027,255,255,255)
endif
endfunction
function BPm takes nothing returns nothing
set ay=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ay,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ay,Condition(function BPh))
call TriggerAddAction(ay,function BPl)
endfunction
function BPn takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303257
endfunction
function BPo takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"move",GetRectCenter(DJ))
endfunction
function BPp takes nothing returns nothing
set SV[100]=GetUnitsOfPlayerMatching(Player(10),Condition(function BPn))
call ForGroupBJ(SV[100],function BPo)
call DestroyGroup(SV[100])
call DestroyGroup(SV[100])
endfunction
function BPq takes nothing returns nothing
set ah=CreateTrigger()
call DisableTrigger(ah)
call TriggerRegisterTimerEventPeriodic(ah,5.)
call TriggerAddAction(ah,function BPp)
endfunction
function BPr takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303257) then
return false
endif
return true
endfunction
function BPs takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ff0000Задание \"Караван\" Провалено!!!")
call RemoveUnit(GetTriggerUnit())
call DisableTrigger(ah)
call DestroyEffectBJ(Uu[32])
endfunction
function BPt takes nothing returns nothing
set az=CreateTrigger()
call TriggerRegisterEnterRectSimple(az,DJ)
call TriggerAddCondition(az,Condition(function BPr))
call TriggerAddAction(az,function BPs)
endfunction
function BPu takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BPv takes nothing returns boolean
if not (Sh>=35) then
return false
endif
return true
endfunction
function BPw takes nothing returns nothing
if BPv() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"О, привет. Ты ещё не знаешь? Нууу... Все знают, а ты нет. Что ж, слушай. 

В этом мире обитает |c00ff96963 могущественных демона|r. Тройка стражей Преисподни, они весьма могущественны, поэтому даже не думай, что сможешь легко одолеть их. Изначально скрыты от чужих глаз, эти твари не желают сражаться с кем-либо, принимая нейтральную сторону. Но если на них напасть, ууууух... Пощады не ждите. |c0000ff00Я открою для Вас первого из этой тройки путем снятия с него чар невидимости|r. |c00ffff00Главное найди его - и понеслась!")
call CreateNUnitsAtLoc(1,$68303330,Player(11),GetRectCenter(GI),bj_UNIT_FACING)
else
call DisplayTextToForce(GetPlayersAll(),"Ну и чего ты пришел? Ты ещё не заслужил мое доверие, ты не готов к этому испытанию! Иди и приходи тогда, когда поможешь более чем 35 жителям Мэлерота.")
endif
endfunction
function BPx takes nothing returns nothing
set a0=CreateTrigger()
call TriggerRegisterEnterRectSimple(a0,GH)
call TriggerAddCondition(a0,Condition(function BPu))
call TriggerAddAction(a0,function BPw)
endfunction
function BPy takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4864676F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
if not (UnitHasItem(GetTriggerUnit(),GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$74657870))==true) then
return false
endif
return true
endfunction
function BPz takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"Для того, чтобы улучшить |c00ffff00Сеты Алхимика|r, просто |c00ff7f00скрестите свой Сет с Древним пергаментом и с одной из вещей Феникса|r. Думаю, на счет вещей сами розберетесь.")
endfunction
function BP0 takes nothing returns nothing
set a1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(a1,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a1,Condition(function BPy))
call TriggerAddAction(a1,function BPz)
endfunction
function BP1 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65646F74) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BP2 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=4) then
return false
endif
return true
endfunction
function BP3 takes nothing returns nothing
if BP2() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[33])
call AddSpecialEffectTargetUnitBJ("overhead",I8,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[33]=GetLastCreatedEffectBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Охотники\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 4-10|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Охотники","|cffffcc00Задание получено:|r \"Охотники\".
Многие браконьеры повадились убивать невинных зверушек в лесу. Убейте не меньше 3-х паршивцев и приходите за наградой, лады? Очистим вместе лес от этих тварей.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[33]=GetLastCreatedQuestBJ()
call CreateNUnitsAtLoc(1,$68303342,Player(10),GetRectCenter(Bx),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$68303342,Player(10),GetRectCenter(Gp),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$68303342,Player(10),GetRectCenter(S),bj_UNIT_FACING)
call EnableTrigger(ah)
else
call nX(GetTriggerUnit(),"Задание с |c00ff00004|r уровня",.027,255,255,255)
endif
endfunction
function BP4 takes nothing returns nothing
set a2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(a2,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a2,Condition(function BP1))
call TriggerAddAction(a2,function BP3)
endfunction
function BP5 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303342) then
return false
endif
return true
endfunction
function BP6 takes nothing returns boolean
if not (Sl==3) then
return false
endif
return true
endfunction
function BP7 takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c00ff9696Браконьер умер!")
set Sl=Sl+1
if BP6() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Вы убили достаточно браконьеров. Вернитесь за наградой.")
call DestroyEffectBJ(Uu[33])
call AddSpecialEffectTargetUnitBJ("overhead",I8,"war3mapImported\\QuestYellow1.mdx")
set Uu[33]=GetLastCreatedEffectBJ()
call EnableTrigger(a4)
else
endif
endfunction
function BP8 takes nothing returns nothing
set a3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(a3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(a3,Condition(function BP5))
call TriggerAddAction(a3,function BP7)
endfunction
function BP9 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65646F74) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQB takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BQC takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BQD takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BQE takes nothing returns boolean
return GetBooleanAnd(BQC(),BQD())
endfunction
function BQF takes nothing returns boolean
return GetBooleanAnd(BQB(),BQE())
endfunction
function BQG takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=4) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=10) then
return false
endif
return true
endfunction
function BQH takes nothing returns nothing
if BQG() then
call AddHeroXP(GetEnumUnit(),900,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+900
else
endif
endfunction
function BQI takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=4) then
return false
endif
return true
endfunction
function BQJ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=4) then
return false
endif
return true
endfunction
function BQK takes nothing returns nothing
if BQJ() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[33])
call QuestSetCompletedBJ(YW[33],true)
call DestroyQuest(YW[33])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BQF))
call ForGroupBJ(Tj,function BQH)
call DestroyGroup(Tj)
set Sh=Sh+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF900 опыта|r, |c00ffff00200 золота|r, |c00ff96964 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BQI() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+600
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+12
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff00004|r уровня",.027,255,255,255)
endif
endfunction
function BQL takes nothing returns nothing
set a4=CreateTrigger()
call DisableTrigger(a4)
call TriggerRegisterAnyUnitEventBJ(a4,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a4,Condition(function BP9))
call TriggerAddAction(a4,function BQK)
endfunction
function BQM takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6A6B73) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQN takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[34])
call AddSpecialEffectTargetUnitBJ("overhead",Ih,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[34]=GetLastCreatedEffectBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Поджарь их!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 13-18|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Поджарь их!","Видели этот костер? Он не горит, а без тепла нам холодно работать... Рубить местные деревья - большой грех, ибо они волшебны. Попробуйте зажечь пламя с помощью трупов врагов.
|c006969FFУровень задания: 13-18|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[34]=GetLastCreatedQuestBJ()
call EnableTrigger(a6)
endfunction
function BQO takes nothing returns nothing
set a5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(a5,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a5,Condition(function BQM))
call TriggerAddAction(a5,function BQN)
endfunction
function BQP takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE)) then
return false
endif
if not (RectContainsUnit(Db,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BQQ takes nothing returns boolean
if not (Sm==10) then
return false
endif
return true
endfunction
function BQR takes nothing returns nothing
set Sm=Sm+1
call AddSpecialEffectLocBJ(GetRandomLocInRect(Da),"Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeDamageTarget.mdl")
call DisplayTextToForce(GetPlayersAll(),"Давайте, жарьте их! Огонь набирает силу!")
if BQQ() then
call EnableTrigger(a7)
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[34])
call AddSpecialEffectTargetUnitBJ("overhead",Ih,"war3mapImported\\QuestYellow1.mdx")
set Uu[34]=GetLastCreatedEffectBJ()
call DisplayTextToForce(GetPlayersAll(),"Достаточно! Костер достаточно разгорелся!")
else
endif
endfunction
function BQS takes nothing returns nothing
set a6=CreateTrigger()
call DisableTrigger(a6)
call TriggerRegisterAnyUnitEventBJ(a6,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(a6,Condition(function BQP))
call TriggerAddAction(a6,function BQR)
endfunction
function BQT takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6A6B73) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQU takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BQV takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BQW takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BQX takes nothing returns boolean
return GetBooleanAnd(BQV(),BQW())
endfunction
function BQY takes nothing returns boolean
return GetBooleanAnd(BQU(),BQX())
endfunction
function BQZ takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=13) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=18) then
return false
endif
return true
endfunction
function BQa takes nothing returns nothing
if BQZ() then
call AddHeroXP(GetEnumUnit(),1500,false)
else
endif
endfunction
function BQb takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=13) then
return false
endif
return true
endfunction
function BQc takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[34])
call QuestSetCompletedBJ(YW[34],true)
call DestroyQuest(YW[34])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BQY))
call ForGroupBJ(Tj,function BQa)
call DestroyGroup(Tj)
set Sh=Sh+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1500 опыта|r, |c00ffff00200 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BQb() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+600
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BQd takes nothing returns nothing
set a7=CreateTrigger()
call DisableTrigger(a7)
call TriggerRegisterAnyUnitEventBJ(a7,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a7,Condition(function BQT))
call TriggerAddAction(a7,function BQc)
endfunction
function BQe takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68303343) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQf takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[35])
call AddSpecialEffectTargetUnitBJ("overhead",Jg,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[35]=GetLastCreatedEffectBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Поход на дракона!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 17-23|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Поход на дракона","Ребят, я тут собираюсь открыть сезон охоты на Бронзовых Драконов. Нет ли у Вас желания принять участие? Но предупреждаю сразу, маленьких я трогать не буду, мне нужен самый жирный из них. Готовы? Через минуту выдвигаемся.
|c006969FFУровень задания: 17-23|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[35]=GetLastCreatedQuestBJ()
call TriggerSleepAction(20.)
call IssuePointOrderLoc(Jg,"attack",GetRectCenter(Bp))
call EnableTrigger(a9)
endfunction
function BQg takes nothing returns nothing
set a8=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(a8,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a8,Condition(function BQe))
call TriggerAddAction(a8,function BQf)
endfunction
function BQh takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"Задание \"Охота на дракона\" |c00ff0000Провалено!!!")
call QuestSetFailed(YW[35],true)
call DestroyEffectBJ(Uu[35])
endfunction
function BQi takes nothing returns nothing
set bB=CreateTrigger()
call TriggerRegisterUnitEvent(bB,Jg,EVENT_UNIT_DEATH)
call TriggerAddAction(bB,function BQh)
endfunction
function BQj takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303530) then
return false
endif
if not (IsUnitAliveBJ(Jg)==true) then
return false
endif
return true
endfunction
function BQk takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BQl takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BQm takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BQn takes nothing returns boolean
return GetBooleanAnd(BQl(),BQm())
endfunction
function BQo takes nothing returns boolean
return GetBooleanAnd(BQk(),BQn())
endfunction
function BQp takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=17) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=23) then
return false
endif
return true
endfunction
function BQq takes nothing returns nothing
if BQp() then
call AddHeroXP(GetEnumUnit(),2600,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2600
else
endif
endfunction
function BQr takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=17) then
return false
endif
return true
endfunction
function BQs takes nothing returns nothing
call DestroyEffectBJ(Uu[35])
call RemoveUnit(Jg)
call QuestSetCompletedBJ(YW[35],true)
call DestroyQuest(YW[35])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Ну что, Герои, спасибо огромное. Я убываю, вот вам небольшая Награда.")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BQo))
call ForGroupBJ(Tj,function BQq)
call DestroyGroup(Tj)
set Sh=Sh+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2600 опыта|r, |c00ffff00300 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BQr() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+900
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BQt takes nothing returns nothing
set a9=CreateTrigger()
call DisableTrigger(a9)
call TriggerRegisterAnyUnitEventBJ(a9,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(a9,Condition(function BQj))
call TriggerAddAction(a9,function BQs)
endfunction
function BQu takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E66746B) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQv takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BQw takes nothing returns nothing
if BQv() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[36])
call AddSpecialEffectTargetUnitBJ("overhead",Io,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[36]=GetLastCreatedEffectBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Трое Слуг\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 25+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Трое Слуг","|c006969FFУровень задания: 25+|r
О, новые трупы подоспели. Да-да, я о вас, жалкие смертные! АХАХАХ, они Вас заживо сьедят!!! Повелитель цветных анимаций, Ядовитый монстр и Рыцать из потустороннего мира. Убьете всех троих - приходите","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[36]=GetLastCreatedQuestBJ()
set Sp=0
else
call nX(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BQx takes nothing returns nothing
set bC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bC,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bC,Condition(function BQu))
call TriggerAddAction(bC,function BQw)
endfunction
function BQy takes nothing returns boolean
if not (Sp>=3) then
return false
endif
return true
endfunction
function BQz takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Один из Слуг Убит!!!")
set Sp=Sp+1
if BQy() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"Слуги убиты! Награда ждет!")
call EnableTrigger(bE)
call DestroyEffectBJ(Uu[36])
call AddSpecialEffectTargetUnitBJ("overhead",Io,"Objects\\RandomObject\\RandomObject.mdl")
set Uu[36]=GetLastCreatedEffectBJ()
else
endif
endfunction
function BQ0 takes nothing returns nothing
set bD=CreateTrigger()
call TriggerRegisterUnitEvent(bD,Ls,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(bD,LD,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(bD,LT,EVENT_UNIT_DEATH)
call TriggerAddAction(bD,function BQz)
endfunction
function BQ1 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E66746B) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQ2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BQ3 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BQ4 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BQ5 takes nothing returns boolean
return GetBooleanAnd(BQ3(),BQ4())
endfunction
function BQ6 takes nothing returns boolean
return GetBooleanAnd(BQ2(),BQ5())
endfunction
function BQ7 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=25) then
return false
endif
return true
endfunction
function BQ8 takes nothing returns nothing
if BQ7() then
call AddHeroXP(GetEnumUnit(),3500,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3500
else
endif
endfunction
function BQ9 takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=25) then
return false
endif
return true
endfunction
function BRB takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BRC takes nothing returns nothing
if BRB() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($4930475A,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Uu[36])
call QuestSetCompletedBJ(YW[36],true)
call DestroyQuest(YW[36])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BQ6))
call ForGroupBJ(Tj,function BQ8)
call DestroyGroup(Tj)
set Sh=Sh+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3500 опыта|r, |c00ffff00400 золота|r, |c00ff969650 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BQ9() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+150
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BRD takes nothing returns nothing
set bE=CreateTrigger()
call DisableTrigger(bE)
call TriggerRegisterAnyUnitEventBJ(bE,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bE,Condition(function BQ1))
call TriggerAddAction(bE,function BRC)
endfunction
function BRE takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$486C6772) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BRF takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=43) then
return false
endif
return true
endfunction
function BRG takes nothing returns nothing
if BRF() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[37])
call AddSpecialEffectTargetUnitBJ("overhead",Ke,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[37]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Смерть\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 43-50|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Смерть","Убить Смерть? Говорили, что это нереально. А Вам по силам?
|c006969FFУровень задания: 43-50|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[37]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000043|r уровня",.027,255,255,255)
endif
endfunction
function BRH takes nothing returns nothing
set bF=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bF,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bF,Condition(function BRE))
call TriggerAddAction(bF,function BRG)
endfunction
function BRI takes nothing returns nothing
call EnableTrigger(bH)
call DisableTrigger(bF)
call DestroyEffectBJ(Uu[37])
call AddSpecialEffectTargetUnitBJ("overhead",Ke,"war3mapImported\\QuestYellow1.mdx")
set Uu[37]=GetLastCreatedEffectBJ()
endfunction
function BRJ takes nothing returns nothing
set bG=CreateTrigger()
call TriggerRegisterUnitEvent(bG,LB,EVENT_UNIT_DEATH)
call TriggerAddAction(bG,function BRI)
endfunction
function BRK takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$486C6772) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BRL takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BRM takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BRN takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BRO takes nothing returns boolean
return GetBooleanAnd(BRM(),BRN())
endfunction
function BRP takes nothing returns boolean
return GetBooleanAnd(BRL(),BRO())
endfunction
function BRQ takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=43) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=49) then
return false
endif
return true
endfunction
function BRR takes nothing returns nothing
if BRQ() then
call AddHeroXP(GetEnumUnit(),4600,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+67000
else
endif
endfunction
function BRS takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=43) then
return false
endif
return true
endfunction
function BRT takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=43) then
return false
endif
return true
endfunction
function BRU takes nothing returns nothing
if BRT() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Uu[37])
call QuestSetCompletedBJ(YW[37],true)
call DestroyQuest(YW[37])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BRP))
call ForGroupBJ(Tj,function BRR)
call DestroyGroup(Tj)
set Sh=Sh+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF6700 опыта|r, |c00ffff00400 золота|r, |c00ff969620 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BRS() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000043|r уровня",.027,255,255,255)
endif
endfunction
function BRV takes nothing returns nothing
set bH=CreateTrigger()
call DisableTrigger(bH)
call TriggerRegisterAnyUnitEventBJ(bH,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bH,Condition(function BRK))
call TriggerAddAction(bH,function BRU)
endfunction
function BRW takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4864676F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BRX takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BRY takes nothing returns nothing
if BRX() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[39])
call AddSpecialEffectTargetUnitBJ("overhead",Kd,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[39]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Захватите пуховики\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 25+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Захватите пуховики","|c006969FFУровень задания: 25+|r
Не окажете услугу? Вы когда-то замерзали? Насмерть? Так вот, туда, куда я попрошу пойти, оооочень холодно. Ваша задача достаточно банальна: убить Морина. Не беспокойтесь, он никуда не уйдет и будет ждать вас до последнего","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[38]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BRZ takes nothing returns nothing
set bI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bI,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bI,Condition(function BRW))
call TriggerAddAction(bI,function BRY)
endfunction
function BRa takes nothing returns nothing
call ShowUnitShow(Lz)
call PauseUnit(Lz,false)
endfunction
function BRb takes nothing returns nothing
set bJ=CreateTrigger()
call TriggerRegisterUnitEvent(bJ,Lx,EVENT_UNIT_DEATH)
call TriggerAddAction(bJ,function BRa)
endfunction
function BRc takes nothing returns nothing
call EnableTrigger(Vl)
endfunction
function BRd takes nothing returns nothing
set bK=CreateTrigger()
call TriggerRegisterUnitEvent(bK,Lz,EVENT_UNIT_DEATH)
call TriggerAddAction(bK,function BRc)
endfunction
function BRe takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BRf takes nothing returns nothing
local integer MC=0
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(Do))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),GetRectCenter(Do),0)
call SetUnitLifePercentBJ(Ly,100)
call SetUnitLifePercentBJ(Vf[5],100)
call SaveInteger(NZ,GetHandleId(Vf[5]),1,0)
call SaveInteger(NZ,GetHandleId(Ly),1,0)
loop
call SaveInteger(NZ,GetHandleId(Ly),2+MC,0)
call SaveInteger(NZ,GetHandleId(Vf[5]),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function BRg takes nothing returns nothing
set Vl=CreateTrigger()
call DisableTrigger(Vl)
call TriggerRegisterEnterRectSimple(Vl,Dn)
call TriggerAddCondition(Vl,Condition(function BRe))
call TriggerAddAction(Vl,function BRf)
endfunction
function BRh takes nothing returns nothing
call DisableTrigger(Vl)
call EnableTrigger(bM)
call EnableTrigger(bN)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Морин погиб. Я жду Вас, Герои")
call DestroyEffectBJ(Uu[39])
call AddSpecialEffectTargetUnitBJ("overhead",Kd,"war3mapImported\\QuestYellow1.mdx")
set Uu[39]=GetLastCreatedEffectBJ()
endfunction
function BRi takes nothing returns nothing
set bL=CreateTrigger()
call TriggerRegisterUnitEvent(bL,Ly,EVENT_UNIT_DEATH)
call TriggerAddAction(bL,function BRh)
endfunction
function BRj takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BRk takes nothing returns nothing
set V2=Location(5520.,320.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),V2,0)
call RemoveLocation(V2)
endfunction
function BRl takes nothing returns nothing
set bM=CreateTrigger()
call DisableTrigger(bM)
call TriggerRegisterEnterRectSimple(bM,Dp)
call TriggerAddCondition(bM,Condition(function BRj))
call TriggerAddAction(bM,function BRk)
endfunction
function BRm takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4864676F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BRn takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BRo takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BRp takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BRq takes nothing returns boolean
return GetBooleanAnd(BRo(),BRp())
endfunction
function BRr takes nothing returns boolean
return GetBooleanAnd(BRn(),BRq())
endfunction
function BRs takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=25) then
return false
endif
return true
endfunction
function BRt takes nothing returns nothing
if BRs() then
call AddHeroXP(GetEnumUnit(),3000,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3000
else
endif
endfunction
function BRu takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=25) then
return false
endif
return true
endfunction
function BRv takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BRw takes nothing returns nothing
if BRv() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,Kd)
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call DestroyEffectBJ(Uu[39])
call QuestSetCompletedBJ(YW[38],true)
call DestroyQuest(YW[38])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Теперь я могу продать Вам могущественные |c00ff00ffТалисманы|r. Но чтобы их улучшить, прийдется хорошо полазить по миру, розглядывая всё вокруг. Подскажу одно: обычного ")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BRr))
call ForGroupBJ(Tj,function BRt)
call DestroyGroup(Tj)
set Sh=Sh+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00400 золота|r, |c00ff969625 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BRu() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+75
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BRx takes nothing returns nothing
set bN=CreateTrigger()
call DisableTrigger(bN)
call TriggerRegisterAnyUnitEventBJ(bN,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bN,Condition(function BRm))
call TriggerAddAction(bN,function BRw)
endfunction
function BRy takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304833)==true) then
return false
endif
return true
endfunction
function BRz takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 25+|r
Пройдите испытание, и получите награду. Всё просто! Если готовы, то вперед!!!
|c00ff7f00(чтобы попасть в локацию испытания, кликните на Мишку)")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(bP)
endfunction
function BR0 takes nothing returns nothing
set bO=CreateTrigger()
call TriggerRegisterEnterRectSimple(bO,Dz)
call TriggerAddCondition(bO,Condition(function BRy))
call TriggerAddAction(bO,function BRz)
endfunction
function BR1 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BR2 takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(Dx))
endfunction
function BR3 takes nothing returns nothing
call ForGroupBJ(GetUnitsInRectMatching(Dz,Condition(function BR1)),function BR2)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000ff00Кликните на башню для того, чтобы начать испытание.")
endfunction
function BR4 takes nothing returns nothing
set bP=CreateTrigger()
call DisableTrigger(bP)
call TriggerRegisterUnitEvent(bP,I6,EVENT_UNIT_SELECTED)
call TriggerAddAction(bP,function BR3)
endfunction
function BR5 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BR6 takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(Dz))
endfunction
function BR7 takes nothing returns nothing
set bQ=CreateTrigger()
call DisableTrigger(bQ)
call TriggerRegisterEnterRectSimple(bQ,Dy)
call TriggerAddCondition(bQ,Condition(function BR5))
call TriggerAddAction(bQ,function BR6)
endfunction
function BR8 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BR9 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSB takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSC takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSD takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSE takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSF takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSG takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSH takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSI takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSJ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSK takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSL takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSM takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSN takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSO takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSP takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSQ takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSR takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSS takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BST takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSU takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSV takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSW takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSX takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSY takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSZ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSa takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSb takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSc takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSd takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSe takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSf takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSg takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSh takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSi takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSj takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSk takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSl takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSm takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSn takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSo takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSp takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSq takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSr takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BSs takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetTriggerUnit(),Player(8),true)
call TriggerSleepAction(15.)
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff1/15")
call CreateNUnitsAtLoc(15,$6E303030,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BR8)),function BR9)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BSr() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff2/15")
call CreateNUnitsAtLoc(15,$6E303046,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSB)),function BSC)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BSq() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff3/15")
call CreateNUnitsAtLoc(15,$6E303044,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSD)),function BSE)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BSp() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff4/15")
call CreateNUnitsAtLoc(15,$6E303045,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSF)),function BSG)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BSo() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff5/15")
call CreateNUnitsAtLoc(4,$6E30334D,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSH)),function BSI)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(35.)
if BSn() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff6/15")
call CreateNUnitsAtLoc(15,$6E73626D,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSJ)),function BSK)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BSm() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff7/15")
call CreateNUnitsAtLoc(15,$6E303047,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSL)),function BSM)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BSl() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff8/15")
call CreateNUnitsAtLoc(15,$6E677277,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSN)),function BSO)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BSk() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff9/15")
call CreateNUnitsAtLoc(15,$6E627A6B,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSP)),function BSQ)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BSj() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff10/15")
call CreateNUnitsAtLoc(4,$6E30334F,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSR)),function BSS)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(35.)
if BSi() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff11/15")
call CreateNUnitsAtLoc(3,$6E30324E,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BST)),function BSU)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(40.)
if BSh() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff12/15")
call CreateNUnitsAtLoc(15,$6E6A6762,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSV)),function BSW)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(40.)
if BSg() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff13/15")
call CreateNUnitsAtLoc(3,$6E303351,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSX)),function BSY)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(35.)
if BSf() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff14/15")
call CreateNUnitsAtLoc(15,$6E737277,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSZ)),function BSa)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(35.)
if BSe() then
set V2=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff15/15")
call CreateNUnitsAtLoc(4,$6E303057,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSb)),function BSc)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call DisplayTextToForce(GetPlayersAll(),"Если в течении 120 секунд Башня погибнет, испытание провалено!")
call TriggerSleepAction(120.)
if BSd() then
call EnableTrigger(bQ)
call DisableTrigger(bP)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю Вас! Получите Вашу награду!")
call CreateItemLoc($49304957,GetRectCenter(Dw))
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
endfunction
function BSt takes nothing returns nothing
set bR=CreateTrigger()
call TriggerRegisterUnitEvent(bR,Jn,EVENT_UNIT_SELECTED)
call TriggerAddAction(bR,function BSs)
endfunction
function BSu takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4867616D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BSv takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function BSw takes nothing returns nothing
if BSv() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[40])
call AddSpecialEffectTargetUnitBJ("overhead",KZ,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[40]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Покажите мне путь\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 45+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Покажите мне путь","Мазарэль давно истощает наши земли. Положите этому конец.
|c006969FFУровень задания: 45+|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[40]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000045|r уровня",.027,255,255,255)
endif
endfunction
function BSx takes nothing returns nothing
set bS=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bS,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bS,Condition(function BSu))
call TriggerAddAction(bS,function BSw)
endfunction
function BSy takes nothing returns nothing
call EnableTrigger(bU)
call DisplayTextToForce(GetPlayersAll(),"Мазарэль убит!")
call DestroyEffectBJ(Uu[40])
call AddSpecialEffectTargetUnitBJ("overhead",KZ,"war3mapImported\\QuestYellow1.mdx")
set Uu[40]=GetLastCreatedEffectBJ()
endfunction
function BSz takes nothing returns nothing
set bT=CreateTrigger()
call TriggerRegisterUnitEvent(bT,K5,EVENT_UNIT_DEATH)
call TriggerAddAction(bT,function BSy)
endfunction
function BS0 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4867616D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BS1 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BS2 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BS3 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BS4 takes nothing returns boolean
return GetBooleanAnd(BS2(),BS3())
endfunction
function BS5 takes nothing returns boolean
return GetBooleanAnd(BS1(),BS4())
endfunction
function BS6 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=45) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=49) then
return false
endif
return true
endfunction
function BS7 takes nothing returns nothing
if BS6() then
call AddHeroXP(GetEnumUnit(),5000,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+10200
else
endif
endfunction
function BS8 takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=45) then
return false
endif
return true
endfunction
function BS9 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function BTB takes nothing returns nothing
if BS9() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Uu[40])
call QuestSetCompletedBJ(YW[40],true)
call DestroyQuest(YW[40])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Итак, Герои. В этом мире сущесвует 5 скрытых обелисков. Изначально видим только один. Уничтожаете один - показывается второй, и так далее. Попробуйте уничтожить все 5")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BS5))
call ForGroupBJ(Tj,function BS7)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF10200 опыта|r, |c00ffff00600 золота|r, |c00ff969650 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BS8() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1800
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+150
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000045|r уровня",.027,255,255,255)
endif
endfunction
function BTC takes nothing returns nothing
set bU=CreateTrigger()
call DisableTrigger(bU)
call TriggerRegisterAnyUnitEventBJ(bU,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bU,Condition(function BS0))
call TriggerAddAction(bU,function BTB)
endfunction
function BTD takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830334A) then
return false
endif
return true
endfunction
function BTE takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830334B) then
return false
endif
return true
endfunction
function BTF takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830334C) then
return false
endif
return true
endfunction
function BTG takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830334D) then
return false
endif
return true
endfunction
function BTH takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830334E) then
return false
endif
return true
endfunction
function BTI takes nothing returns nothing
if BTD() then
call ShowUnitShow(L3)
else
endif
if BTE() then
call ShowUnitShow(L4)
else
endif
if BTF() then
call ShowUnitShow(L5)
else
endif
if BTG() then
call ShowUnitShow(L2)
else
endif
if BTH() then
call PauseUnit(L6,false)
call EnableTrigger(Up)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю, теперь Вы можете сразиться с Ахилом!")
else
endif
endfunction
function BTJ takes nothing returns nothing
set bV=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bV,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(bV,function BTI)
endfunction
function BTK takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68646877) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BTL takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=5) then
return false
endif
return true
endfunction
function BTM takes nothing returns nothing
if BTL() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(bX)
call DestroyEffectBJ(Uu[41])
call AddSpecialEffectTargetUnitBJ("overhead",I0,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[41]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Вы крутые? Докажите!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 5-13|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Вы крутые? Докажите!","Если Вы настолько хороши, как о Вас говорят, то докажите это, и я Вас вознагражу. Покажите мне для этого Дубину Великана, и, может, быть, я Вам поверю.
|c006969FFУровень за","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[41]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call nX(GetTriggerUnit(),"Задание с |c00ff00005|r уровня",.027,255,255,255)
endif
endfunction
function BTN takes nothing returns nothing
set bW=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bW,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bW,Condition(function BTK))
call TriggerAddAction(bW,function BTM)
endfunction
function BTO takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930474B)==true) then
return false
endif
return true
endfunction
function BTP takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BTQ takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BTR takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BTS takes nothing returns boolean
return GetBooleanAnd(BTQ(),BTR())
endfunction
function BTT takes nothing returns boolean
return GetBooleanAnd(BTP(),BTS())
endfunction
function BTU takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=5) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=13) then
return false
endif
return true
endfunction
function BTV takes nothing returns nothing
if BTU() then
call AddHeroXP(GetEnumUnit(),2200,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1500
else
endif
endfunction
function BTW takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=5) then
return false
endif
return true
endfunction
function BTX takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=5) then
return false
endif
return true
endfunction
function BTY takes nothing returns nothing
if BTX() then
call DestroyEffectBJ(Uu[41])
call QuestSetCompletedBJ(YW[41],true)
call DestroyQuest(YW[41])
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BTT))
call ForGroupBJ(Tj,function BTV)
call DestroyGroup(Tj)
set Sh=Sh+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1500 опыта|r, |c00ffff00250 золота|r, |c00ff969610 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BTW() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+750
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff00005|r уровня",.027,255,255,255)
endif
endfunction
function BTZ takes nothing returns nothing
set bX=CreateTrigger()
call DisableTrigger(bX)
call TriggerRegisterEnterRectSimple(bX,D3)
call TriggerAddCondition(bX,Condition(function BTO))
call TriggerAddAction(bX,function BTY)
endfunction
function BTa takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304833)==true) then
return false
endif
return true
endfunction
function BTb takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 35+|r
Пройдите испытание, и получите награду. Всё просто! Если готовы, то вперед!!!
|c00ff7f00(чтобы попасть в локацию испытания, кликните на Демонёнка)")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(bZ)
endfunction
function BTc takes nothing returns nothing
set bY=CreateTrigger()
call TriggerRegisterEnterRectSimple(bY,D1)
call TriggerAddCondition(bY,Condition(function BTa))
call TriggerAddAction(bY,function BTb)
endfunction
function BTd takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304833)==true) then
return false
endif
return true
endfunction
function BTe takes nothing returns nothing
call ShowUnit(KB,true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 50+|r
Пройдите испытание, и получите награду. Всё просто! Если готовы, то вперед!!!
|c00ff7f00(чтобы попасть в локацию испытания, кликните на Совуха)")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(bb)
endfunction
function BTf takes nothing returns nothing
set ba=CreateTrigger()
call TriggerRegisterEnterRectSimple(ba,Fp)
call TriggerAddCondition(ba,Condition(function BTd))
call TriggerAddAction(ba,function BTe)
endfunction
function BTg takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BTh takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(Du))
endfunction
function BTi takes nothing returns nothing
call ForGroupBJ(GetUnitsInRectMatching(D1,Condition(function BTg)),function BTh)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000ff00Кликните на башню для того, чтобы начать испытание.")
endfunction
function BTj takes nothing returns nothing
set bZ=CreateTrigger()
call DisableTrigger(bZ)
call TriggerRegisterUnitEvent(bZ,JX,EVENT_UNIT_SELECTED)
call TriggerAddAction(bZ,function BTi)
endfunction
function BTk takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BTl takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=50) then
return false
endif
return true
endfunction
function BTm takes nothing returns nothing
if BTl() then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(Dr))
else
endif
endfunction
function BTn takes nothing returns nothing
call ForGroupBJ(GetUnitsInRectMatching(Fp,Condition(function BTk)),function BTm)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000ff00Кликните на башню для того, чтобы начать испытание.")
endfunction
function BTo takes nothing returns nothing
set bb=CreateTrigger()
call DisableTrigger(bb)
call TriggerRegisterUnitEvent(bb,KB,EVENT_UNIT_SELECTED)
call TriggerAddAction(bb,function BTn)
endfunction
function BTp takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BTq takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BTr takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BTs takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BTt takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BTu takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BTv takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BTw takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BTx takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BTy takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BTz takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BT0 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BT1 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BT2 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BT3 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BT4 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BT5 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BT6 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BT7 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BT8 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BT9 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUB takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUC takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUD takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUE takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUF takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUG takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUH takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUI takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUJ takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUK takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUL takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUM takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUN takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUO takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUP takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUQ takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUR takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUS takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUT takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUU takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUV takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUW takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUX takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUY takes nothing returns boolean
if not (IsUnitAliveBJ(Jo)==true) then
return false
endif
return true
endfunction
function BUZ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetTriggerUnit(),Player(8),true)
call TriggerSleepAction(15.)
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff1/15")
call CreateNUnitsAtLoc(15,$75303032,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BTp)),function BTq)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BUY() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff2/15")
call CreateNUnitsAtLoc(15,$75303033,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BTr)),function BTs)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BUX() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff3/15")
call CreateNUnitsAtLoc(15,$6E30305A,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BTt)),function BTu)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BUW() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff4/15")
call CreateNUnitsAtLoc(15,$6E303058,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BTv)),function BTw)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BUV() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff5/15")
call CreateNUnitsAtLoc(4,$75303048,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BTx)),function BTy)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(35.)
if BUU() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff6/15")
call CreateNUnitsAtLoc(15,$6E303157,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BTz)),function BT0)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BUT() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff7/15")
call CreateNUnitsAtLoc(15,$6E303159,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BT1)),function BT2)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BUS() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff8/15")
call CreateNUnitsAtLoc(15,$6E303156,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BT3)),function BT4)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BUR() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff9/15")
call CreateNUnitsAtLoc(15,$6E303158,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BT5)),function BT6)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BUQ() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff10/15")
call CreateNUnitsAtLoc(4,$7530304C,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BT7)),function BT8)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(35.)
if BUP() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff11/15")
call CreateNUnitsAtLoc(3,$7530304A,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BT9)),function BUB)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(40.)
if BUO() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff12/15")
call CreateNUnitsAtLoc(8,$6E303233,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUC)),function BUD)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(40.)
if BUN() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff13/15")
call CreateNUnitsAtLoc(8,$6E303236,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUE)),function BUF)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(35.)
if BUM() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff14/15")
call CreateNUnitsAtLoc(5,$6E303230,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUG)),function BUH)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V2)
call TriggerSleepAction(35.)
if BUL() then
set V2=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff15/15")
call CreateNUnitsAtLoc(4,$6E303433,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUI)),function BUJ)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V2)
call DisplayTextToForce(GetPlayersAll(),"Если в течении 120 секунд Башня погибнет, испытание провалено!")
call TriggerSleepAction(120.)
if BUK() then
call EnableTrigger(bd)
call DisableTrigger(bZ)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю Вас! Получите Вашу награду!")
call CreateItemLoc($49304A32,GetRectCenter(Dt))
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
endfunction
function BUa takes nothing returns nothing
set bc=CreateTrigger()
call TriggerRegisterUnitEvent(bc,Jo,EVENT_UNIT_SELECTED)
call TriggerAddAction(bc,function BUZ)
endfunction
function BUb takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUc takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUd takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUe takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUf takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUg takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUh takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUi takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUj takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUk takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUl takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUm takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUn takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUo takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUp takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUq takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUr takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUs takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUt takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUu takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUv takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUw takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUx takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUy takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BUz takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BU0 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BU1 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BU2 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BU3 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BU4 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BU5 takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BU6 takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BU7 takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BU8 takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BU9 takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVB takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVC takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVD takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVE takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVF takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVG takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVH takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVI takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVJ takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVK takes nothing returns boolean
if not (IsUnitAliveBJ(Jp)==true) then
return false
endif
return true
endfunction
function BVL takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetTriggerUnit(),Player(8),true)
call TriggerSleepAction(15.)
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff1/15")
call CreateNUnitsAtLoc(5,$6E30354E,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUb)),function BUc)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BVK() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff2/15")
call CreateNUnitsAtLoc(4,$6E30354F,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUd)),function BUe)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BVJ() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff3/15")
call CreateNUnitsAtLoc(4,$6E303550,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUf)),function BUg)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BVI() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff4/15")
call CreateNUnitsAtLoc(4,$6E303735,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUh)),function BUi)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BVH() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff5/15")
call CreateNUnitsAtLoc(4,$6E303733,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUj)),function BUk)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BVG() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff6/15")
call CreateNUnitsAtLoc(4,$6E303732,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUl)),function BUm)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BVF() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff7/15")
call CreateNUnitsAtLoc(4,$6E303734,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUn)),function BUo)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BVE() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff8/15")
call CreateNUnitsAtLoc(4,$6E303638,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUp)),function BUq)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BVD() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff9/15")
call CreateNUnitsAtLoc(4,$6E303639,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUr)),function BUs)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BVC() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff10/15")
call CreateNUnitsAtLoc(4,$6E303637,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUt)),function BUu)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BVB() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff11/15")
call CreateNUnitsAtLoc(8,$65303043,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUv)),function BUw)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BU9() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff12/15")
call CreateNUnitsAtLoc(8,$65303058,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUx)),function BUy)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BU8() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff13/15")
call CreateNUnitsAtLoc(10,$65303059,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BUz)),function BU0)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BU7() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff14/15")
call CreateNUnitsAtLoc(10,$6530305A,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BU1)),function BU2)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
if BU6() then
set V2=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff15/15")
call CreateNUnitsAtLoc(3,$65303130,Player(10),V2,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BU3)),function BU4)
call RemoveLocation(V2)
call DisplayTextToForce(GetPlayersAll(),"Если в течении 120 секунд Башня погибнет, испытание провалено!")
call TriggerSleepAction(120.)
if BU5() then
call EnableTrigger(bf)
call DisableTrigger(bb)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю Вас! Получите Вашу награду!")
call CreateItemLoc($49305433,GetRectCenter(Ds))
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
endfunction
function BVM takes nothing returns nothing
set be=CreateTrigger()
call TriggerRegisterUnitEvent(be,Jp,EVENT_UNIT_SELECTED)
call TriggerAddAction(be,function BVL)
endfunction
function BVN takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BVO takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(D1))
endfunction
function BVP takes nothing returns nothing
set bd=CreateTrigger()
call DisableTrigger(bd)
call TriggerRegisterEnterRectSimple(bd,Dv)
call TriggerAddCondition(bd,Condition(function BVN))
call TriggerAddAction(bd,function BVO)
endfunction
function BVQ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BVR takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(Fp))
endfunction
function BVS takes nothing returns nothing
set bf=CreateTrigger()
call DisableTrigger(bf)
call TriggerRegisterEnterRectSimple(bf,Dq)
call TriggerAddCondition(bf,Condition(function BVQ))
call TriggerAddAction(bf,function BVR)
endfunction
function BVT takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E746B77) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BVU takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=50) then
return false
endif
return true
endfunction
function BVV takes nothing returns nothing
if BVU() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(bh)
call DestroyEffectBJ(Uu[42])
call AddSpecialEffectTargetUnitBJ("overhead",Jq,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[42]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Всё ближе к усилению\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 50+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Всё ближе к усилению","У Вас есть Личное оружие 7 Уровня, и желание его улучшить? Что ж, принесите мне Эссенцию Луны, и я дам Вам такую возможность.
|c006969FFУровень задания: 50+|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[42]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call nX(GetTriggerUnit(),"Задание с |c00ff000050|r уровня",.027,255,255,255)
endif
endfunction
function BVW takes nothing returns nothing
set bg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bg,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bg,Condition(function BVT))
call TriggerAddAction(bg,function BVV)
endfunction
function BVX takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304A54)==true) then
return false
endif
return true
endfunction
function BVY takes nothing returns nothing
call DestroyEffectBJ(Uu[42])
call QuestSetCompletedBJ(YW[42],true)
call DestroyQuest(YW[42])
call DisableTrigger(GetTriggeringTrigger())
call AddSpecialEffectLocBJ(GetRectCenter(Gr),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call EnableTrigger(bi)
endfunction
function BVZ takes nothing returns nothing
set bh=CreateTrigger()
call DisableTrigger(bh)
call TriggerRegisterEnterRectSimple(bh,Gr)
call TriggerAddCondition(bh,Condition(function BVX))
call TriggerAddAction(bh,function BVY)
endfunction
function BVa takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=50) then
return false
endif
return true
endfunction
function BVb takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BVc takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BVd takes nothing returns nothing
set S6=0
set V2=GetRectCenter(D7)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call SetUnitPositionLocFacingBJ(L7,V2,270.)
call SetUnitOwner(L7,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitLifePercentBJ(L7,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call RemoveLocation(V2)
set ST=GetUnitsOfTypeIdAll($75303056)
call ForGroupBJ(ST,function BVb)
call DestroyGroup(ST)
set ST=GetUnitsOfTypeIdAll($75303057)
call ForGroupBJ(ST,function BVc)
call DestroyGroup(ST)
endfunction
function BVe takes nothing returns nothing
set bi=CreateTrigger()
call DisableTrigger(bi)
call TriggerRegisterEnterRectSimple(bi,Gr)
call TriggerAddCondition(bi,Condition(function BVa))
call TriggerAddAction(bi,function BVd)
endfunction
function BVf takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6D7972) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BVg takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[43])
call AddSpecialEffectTargetUnitBJ("overhead",Iz,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[43]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Выбор за вами\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: Не указан|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Выбор за вами","В мире существует множество артефактов, которые таят в себе огромную силу. Но я более чем уверен, что у Вас не хватит сил добыть их все. Поэтому принесите мне любой из этих артефактов, и получите награду.
|c00ff0000Клык|r - его вы можете отобрать у четвероногого воришки;
|c00ffff00Кольцо Судьбы|r - это преобразование уже готового ювелирного изделия;
|c00ff0000Луч Солнца|r - зарядите источник Света душами умерших врагов, и с шансом вы можете получить данный предмет.
|c006969FFУровень задания: Не указан","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[43]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
endfunction
function BVh takes nothing returns nothing
set bj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bj,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bj,Condition(function BVf))
call TriggerAddAction(bj,function BVg)
endfunction
function BVi takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B57))==true) then
return false
endif
return true
endfunction
function BVj takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B57))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Всё, мне больше ничего не надо! Получите свою награду и уходите.")
call CreateItemLoc($49304A31,GetRectCenter(EG))
call CreateItemLoc($49304C31,GetRectCenter(EG))
call DestroyEffectBJ(Uu[43])
call DestroyQuest(YW[43])
endfunction
function BVk takes nothing returns nothing
set bk=CreateTrigger()
call TriggerRegisterEnterRectSimple(bk,EG)
call TriggerAddCondition(bk,Condition(function BVi))
call TriggerAddAction(bk,function BVj)
endfunction
function BVl takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B58))==true) then
return false
endif
return true
endfunction
function BVm takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B58))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Всё, мне больше ничего не надо! Получите свою награду и уходите.")
call CreateItemLoc($49304A31,GetRectCenter(EG))
call CreateItemLoc($49304B5A,GetRectCenter(EG))
call DestroyEffectBJ(Uu[43])
call DestroyQuest(YW[43])
endfunction
function BVn takes nothing returns nothing
set bl=CreateTrigger()
call TriggerRegisterEnterRectSimple(bl,EG)
call TriggerAddCondition(bl,Condition(function BVl))
call TriggerAddAction(bl,function BVm)
endfunction
function BVo takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B59))==true) then
return false
endif
return true
endfunction
function BVp takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B59))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Всё, мне больше ничего не надо! Получите свою награду и уходите.")
call CreateItemLoc($49304A31,GetRectCenter(EG))
call CreateItemLoc($49304C30,GetRectCenter(EG))
call DestroyEffectBJ(Uu[43])
call DestroyQuest(YW[43])
endfunction
function BVq takes nothing returns nothing
set bm=CreateTrigger()
call TriggerRegisterEnterRectSimple(bm,EG)
call TriggerAddCondition(bm,Condition(function BVo))
call TriggerAddAction(bm,function BVp)
endfunction
function BVr takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303935))==true) then
return false
endif
return true
endfunction
function BVs takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303935))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Хм... Что Вам надо? Окунуть эту жалкую вещь в колодец магии? Ну хорошо, смотрите, что из этого получилось..
")
call UnitAddItemByIdSwapped($49304B58,GetTriggerUnit())
endfunction
function BVt takes nothing returns nothing
set bn=CreateTrigger()
call TriggerRegisterEnterRectSimple(bn,Ff)
call TriggerAddCondition(bn,Condition(function BVr))
call TriggerAddAction(bn,function BVs)
endfunction
function BVu takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE)) then
return false
endif
if not (RectContainsUnit(EH,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BVv takes nothing returns boolean
if not (GetRandomInt(1,15)==1) then
return false
endif
return true
endfunction
function BVw takes nothing returns nothing
if BVv() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49304B59,GetUnitLoc(GetTriggerUnit()))
call PlaySoundOnUnitBJ(C,100,GetTriggerUnit())
call CreateTextTagUnitBJ("Удача! Вам выпал |c00ffff00\"Луч Солнца\"",GetTriggerUnit(),0,15.,100.,100.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
endif
endfunction
function BVx takes nothing returns nothing
set bo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bo,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(bo,Condition(function BVu))
call TriggerAddAction(bo,function BVw)
endfunction
function BVy takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$75303058) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BVz takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=50) then
return false
endif
return true
endfunction
function BV0 takes nothing returns nothing
if BVz() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(bq)
call DestroyEffectBJ(Uu[44])
call AddSpecialEffectTargetUnitBJ("overhead",I7,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[44]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Несколько ингредиентов\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 50+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Несколько ингредиентов","Здраствуйте, голубчики, не поможете мне в поиске ингредиентов для создания некого снадобья? Мне нужно всего-то мелочи... Коготки, Паутина, Талисман Капитана, Полная колба, Немного кожи","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[44]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call nX(GetTriggerUnit(),"Задание с |c00ff000050|r уровня",.027,255,255,255)
endif
endfunction
function BV1 takes nothing returns nothing
set bp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bp,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bp,Condition(function BVy))
call TriggerAddAction(bp,function BV0)
endfunction
function BV2 takes nothing returns boolean
if not (GetTriggerUnit()==LR) then
return false
endif
return true
endfunction
function BV3 takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(GU))
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
endfunction
function BV4 takes nothing returns nothing
set br=CreateTrigger()
call TriggerRegisterLeaveRectSimple(br,FE)
call TriggerAddCondition(br,Condition(function BV2))
call TriggerAddAction(br,function BV3)
endfunction
function BV5 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$6473756D))==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$77696C6C))==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303059))==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304143))==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303130))==true) then
return false
endif
return true
endfunction
function BV6 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyQuest(YW[44])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$6473756D))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$77696C6C))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303059))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303130))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304143))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"ХАХАХ, как Вы думаете, зачем я варил зелье?? Одолеете моего питомца?? Попробуйте!")
call TriggerSleepAction(10.)
call ShowUnitShow(LR)
call SetUnitInvulnerable(LR,false)
endfunction
function BV7 takes nothing returns nothing
set bq=CreateTrigger()
call DisableTrigger(bq)
call TriggerRegisterEnterRectSimple(bq,GU)
call TriggerAddCondition(bq,Condition(function BV5))
call TriggerAddAction(bq,function BV6)
endfunction
function BV8 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E303636) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BV9 takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWB takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWC takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWD takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWE takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWF takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWG takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWH takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWI takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=51) then
return false
endif
return true
endfunction
function BWJ takes nothing returns boolean
if not (IsUnitAliveBJ(JY)==true) then
return false
endif
return true
endfunction
function BWK takes nothing returns boolean
if not (IsUnitAliveBJ(JY)==true) then
return false
endif
return true
endfunction
function BWL takes nothing returns boolean
if not (IsUnitAliveBJ(JY)==true) then
return false
endif
return true
endfunction
function BWM takes nothing returns boolean
if not (IsUnitAliveBJ(JY)==true) then
return false
endif
return true
endfunction
function BWN takes nothing returns boolean
if not (IsUnitAliveBJ(JY)==true) then
return false
endif
return true
endfunction
function BWO takes nothing returns boolean
if not (IsUnitAliveBJ(JY)==true) then
return false
endif
return true
endfunction
function BWP takes nothing returns boolean
if not (IsUnitAliveBJ(JY)==true) then
return false
endif
return true
endfunction
function BWQ takes nothing returns boolean
if not (IsUnitAliveBJ(JY)==true) then
return false
endif
return true
endfunction
function BWR takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=51) then
return false
endif
return true
endfunction
function BWS takes nothing returns nothing
if BWR() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[45])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Натиск Демонов\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 51+|r
Демоны!!! Они повсюду!! ААААА!!! Помогите, иначе я умру!")
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call TriggerSleepAction(10.)
set V1=GetRectCenter(Ec)
call CreateNUnitsAtLoc(10,$6E30344D,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set ST=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(ST,function BV9)
call DestroyGroup(ST)
call TriggerSleepAction(15.)
if BWQ() then
set V1=GetRectCenter(Ec)
call CreateNUnitsAtLoc(10,$6E30344D,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set ST=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(ST,function BWB)
call DestroyGroup(ST)
call TriggerSleepAction(15.)
if BWP() then
set V1=GetRectCenter(Ec)
call CreateNUnitsAtLoc(10,$6E30344D,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set ST=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(ST,function BWC)
call DestroyGroup(ST)
call TriggerSleepAction(15.)
if BWO() then
set V1=GetRectCenter(Ec)
call CreateNUnitsAtLoc(3,$6E303454,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set ST=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(ST,function BWD)
call DestroyGroup(ST)
call TriggerSleepAction(15.)
if BWN() then
set V1=GetRectCenter(Ec)
call CreateNUnitsAtLoc(5,$6E303454,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set ST=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(ST,function BWE)
call DestroyGroup(ST)
call TriggerSleepAction(15.)
if BWM() then
set V1=GetRectCenter(Ec)
call CreateNUnitsAtLoc(3,$6E303644,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set ST=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(ST,function BWF)
call DestroyGroup(ST)
call TriggerSleepAction(15.)
if BWL() then
set V1=GetRectCenter(Ec)
call CreateNUnitsAtLoc(5,$6E303644,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set ST=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(ST,function BWG)
call DestroyGroup(ST)
call TriggerSleepAction(15.)
if BWK() then
set V1=GetRectCenter(Ec)
call CreateNUnitsAtLoc(8,$6E303644,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set ST=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(ST,function BWH)
call DestroyGroup(ST)
call TriggerSleepAction(30.)
if BWJ() then
call UnitAddAbilityBJ($416E6532,JY)
call UnitAddAbilityBJ($41706974,JY)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFМои поздравления!|r
Получите награду!")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FFFF00За задание Все игроки получили по 1000 золота!")
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF9696Все, кто 51 уровня, заработали 50 Кровавых Меток.")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=6
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BWI() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+3000
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+150
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
endif
else
endif
else
endif
else
endif
else
endif
else
endif
else
endif
else
endif
else
call nX(GetTriggerUnit(),"Задание с |c00ff000051|r уровня",.027,255,255,255)
endif
endfunction
function BWT takes nothing returns nothing
set bs=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bs,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bs,Condition(function BV8))
call TriggerAddAction(bs,function BWS)
endfunction
function BWU takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|c00ff0000Задание провалено!!!")
endfunction
function BWV takes nothing returns nothing
set bt=CreateTrigger()
call TriggerRegisterUnitEvent(bt,JY,EVENT_UNIT_DEATH)
call TriggerAddAction(bt,function BWU)
endfunction
function BWW takes nothing returns boolean
if not (GetRandomInt(1,100)<=MM*4) then
return false
endif
return true
endfunction
function BWX takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BWY takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BWZ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BWa takes nothing returns boolean
return GetBooleanAnd(BWY(),BWZ())
endfunction
function BWb takes nothing returns boolean
return GetBooleanAnd(BWX(),BWa())
endfunction
function BWc takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=45) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=49) then
return false
endif
return true
endfunction
function BWd takes nothing returns nothing
if BWc() then
call AddHeroXP(GetEnumUnit(),9000,false)
set TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+9000
else
endif
endfunction
function BWe takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=45) then
return false
endif
return true
endfunction
function BWf takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BWW() then
call CreateItemLoc($49304C32,GetUnitLoc(GetTriggerUnit()))
call PlaySoundOnUnitBJ(C,100,GetTriggerUnit())
call CreateTextTagUnitBJ("Удача! Вам выпала |c00ffff00\"Загубленная Душа\"",GetTriggerUnit(),0,15.,100.,100.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
endif
call ModifyGateBJ(bj_GATEOPERATION_OPEN,Hj)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ух, какие молодцы=))) можете пройти дальше а также держите небольшую награду)")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BWb))
call ForGroupBJ(Tj,function BWd)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF9000 опыта|r, |c00ffff001000 золота|r, |c00ff969650 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BWe() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+3000
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+150
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BWg takes nothing returns nothing
set bu=CreateTrigger()
call TriggerRegisterUnitEvent(bu,LR,EVENT_UNIT_DEATH)
call TriggerAddAction(bu,function BWf)
endfunction
function BWh takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D46)==true) then
return false
endif
return true
endfunction
function BWi takes nothing returns nothing
if BWh() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D46))
call DisplayTextToForce(GetPlayersAll(),"|c00ff9696Ну что ж, Вам удалось! Путь открыт...")
call TriggerSleepAction(5.)
call ShowUnit(L1,true)
call RemoveUnit(Ir)
call EnableTrigger(Uz)
call DisableTrigger(GetTriggeringTrigger())
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff9696Для того, чтобы пройти дальше, добудьте для меня Механизм. Где искать данную вещь - думайте сами.")
endif
endfunction
function BWj takes nothing returns nothing
set bv=CreateTrigger()
call TriggerRegisterEnterRectSimple(bv,GQ)
call TriggerAddAction(bv,function BWi)
endfunction
function BWk takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D47)==true) then
return false
endif
return true
endfunction
function BWl takes nothing returns nothing
call RemoveDestructable(HG)
call DisplayTextToForce(GetPlayersAll(),"Дерево уничтожено. Вау...
")
call PauseUnit(Lo,false)
call SetUnitInvulnerable(Lo,false)
endfunction
function BWm takes nothing returns nothing
set bw=CreateTrigger()
call TriggerRegisterEnterRectSimple(bw,Ee)
call TriggerAddCondition(bw,Condition(function BWk))
call TriggerAddAction(bw,function BWl)
endfunction
function BWn takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BWo takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Есть желание мне помочь? Хм.... что-то Вы слишком жалкие на вид... Слишком хлипкие, ничтожные. Да моя бабушка, и то более грозно смотрелась, хотя хромала постоянно. Ладно, дам Вам шанс. Убейте Ассира, потом поговорим.")
endfunction
function BWp takes nothing returns nothing
set bx=CreateTrigger()
call TriggerRegisterEnterRectSimple(bx,Es)
call TriggerAddCondition(bx,Condition(function BWn))
call TriggerAddAction(bx,function BWo)
endfunction
function BWq takes nothing returns nothing
call EnableTrigger(bz)
call DisableTrigger(bx)
endfunction
function BWr takes nothing returns nothing
set by=CreateTrigger()
call TriggerRegisterUnitEvent(by,L0,EVENT_UNIT_DEATH)
call TriggerAddAction(by,function BWq)
endfunction
function BWs takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F303048) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BWt takes nothing returns nothing
call DestroyEffectBJ(Uu[46])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: не имеет значения|r
Так, воины. Мне нужно пройти одно испытание, дабы выиграть спор с одним мудилой. Поможете - отдам кое-что ценное. Нет, так нет. Когда будете готовы - просто напишите |c00ff0000-go|r, и я перейду в командование того игрока, кто согласился мной управлять.")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(b0)
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
endfunction
function BWu takes nothing returns nothing
set bz=CreateTrigger()
call DisableTrigger(bz)
call TriggerRegisterAnyUnitEventBJ(bz,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bz,Condition(function BWs))
call TriggerAddAction(bz,function BWt)
endfunction
function BWv takes nothing returns boolean
if not (GetOwningPlayer(Jv)==Player(8)) then
return false
endif
return true
endfunction
function BWw takes nothing returns nothing
call IssuePointOrderLoc(IT,"move",GetRectCenter(Eh))
call IssuePointOrderLoc(IU,"move",GetRectCenter(Ej))
call SetUnitPositionLoc(IW,GetRectCenter(Ek))
call SetUnitPositionLoc(IX,GetRectCenter(Ep))
call SetUnitPositionLoc(IV,GetRectCenter(Em))
set MV[8]=Jv
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(b1)
call EnableTrigger(b2)
call EnableTrigger(b3)
call SetUnitOwner(Jv,GetTriggerPlayer(),true)
call SetUnitPositionLoc(Jv,GetRectCenter(Eq))
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(),GetRectCenter(Eq),0)
endfunction
function BWx takes nothing returns nothing
set b0=CreateTrigger()
call DisableTrigger(b0)
call TriggerRegisterPlayerChatEvent(b0,Player(0),"-go",true)
call TriggerRegisterPlayerChatEvent(b0,Player(1),"-go",true)
call TriggerRegisterPlayerChatEvent(b0,Player(2),"-go",true)
call TriggerRegisterPlayerChatEvent(b0,Player(3),"-go",true)
call TriggerRegisterPlayerChatEvent(b0,Player(4),"-go",true)
call TriggerRegisterPlayerChatEvent(b0,Player(5),"-go",true)
call TriggerRegisterPlayerChatEvent(b0,Player(6),"-go",true)
call TriggerRegisterPlayerChatEvent(b0,Player(7),"-go",true)
call TriggerAddCondition(b0,Condition(function BWv))
call TriggerAddAction(b0,function BWw)
endfunction
function BWy takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6F303048) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())!=Player(8)) then
return false
endif
return true
endfunction
function BWz takes nothing returns nothing
set MV[8]=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),$6F303048,GetRectCenter(Eq),270.)
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(),GetRectCenter(Eq),0)
call IssuePointOrderLoc(IT,"move",GetRectCenter(Eh))
call IssuePointOrderLoc(IU,"move",GetRectCenter(Ej))
call IssuePointOrderLoc(IW,"move",GetRectCenter(El))
call IssuePointOrderLoc(IX,"move",GetRectCenter(Eo))
call IssuePointOrderLoc(IV,"move",GetRectCenter(En))
endfunction
function BW0 takes nothing returns nothing
set b4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(b4,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(b4,Condition(function BWy))
call TriggerAddAction(b4,function BWz)
endfunction
function BW1 takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"fanofknives")
endfunction
function BW2 takes nothing returns nothing
set SV[333]=GetUnitsOfTypeIdAll($68303446)
call ForGroupBJ(SV[333],function BW1)
call DestroyGroup(SV[333])
endfunction
function BW3 takes nothing returns nothing
set b1=CreateTrigger()
call DisableTrigger(b1)
call TriggerRegisterTimerEventPeriodic(b1,4.)
call TriggerAddAction(b1,function BW2)
endfunction
function BW4 takes nothing returns boolean
if not (GetTerrainTypeBJ(b5[0])!=$5872746C) then
return false
endif
return true
endfunction
function BW5 takes nothing returns nothing
set b5[0]=GetUnitLoc(MV[8])
if BW4() then
call KillUnit(MV[8])
else
endif
call RemoveLocation(b5[0])
endfunction
function BW6 takes nothing returns nothing
set b2=CreateTrigger()
call DisableTrigger(b2)
call TriggerRegisterTimerEventPeriodic(b2,.5)
call TriggerAddAction(b2,function BW5)
endfunction
function BW7 takes nothing returns nothing
call IssuePointOrderLoc(IR,"carrionswarm",GetUnitLoc(IR))
call IssuePointOrderLoc(IP,"carrionswarm",GetUnitLoc(IP))
call IssuePointOrderLoc(IQ,"carrionswarm",GetUnitLoc(IQ))
endfunction
function BW8 takes nothing returns nothing
set b3=CreateTrigger()
call DisableTrigger(b3)
call TriggerRegisterTimerEventPeriodic(b3,7.)
call TriggerAddAction(b3,function BW7)
endfunction
function BW9 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303447) then
return false
endif
return true
endfunction
function BXB takes nothing returns boolean
if not (RectContainsUnit(Eg,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXC takes nothing returns boolean
if not (RectContainsUnit(Eh,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXD takes nothing returns boolean
if not (RectContainsUnit(Ei,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXE takes nothing returns boolean
if not (RectContainsUnit(Ej,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXF takes nothing returns boolean
if not (RectContainsUnit(Ek,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXG takes nothing returns boolean
if not (RectContainsUnit(El,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXH takes nothing returns boolean
if not (RectContainsUnit(Ep,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXI takes nothing returns boolean
if not (RectContainsUnit(Eo,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXJ takes nothing returns boolean
if not (RectContainsUnit(Em,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXK takes nothing returns boolean
if not (RectContainsUnit(En,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXL takes nothing returns nothing
if BXB() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Eh))
else
endif
if BXC() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Eg))
else
endif
if BXD() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Ej))
else
endif
if BXE() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Ei))
else
endif
if BXF() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(El))
else
endif
if BXG() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Ek))
else
endif
if BXH() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Eo))
else
endif
if BXI() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Ep))
else
endif
if BXJ() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(En))
else
endif
if BXK() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Em))
else
endif
endfunction
function BXM takes nothing returns nothing
set b6=CreateTrigger()
call TriggerRegisterEnterRectSimple(b6,Eg)
call TriggerRegisterEnterRectSimple(b6,Eh)
call TriggerRegisterEnterRectSimple(b6,Ei)
call TriggerRegisterEnterRectSimple(b6,Ej)
call TriggerAddCondition(b6,Condition(function BW9))
call TriggerAddAction(b6,function BXL)
endfunction
function BXN takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6F303048) then
return false
endif
return true
endfunction
function BXO takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=50) then
return false
endif
return true
endfunction
function BXP takes nothing returns nothing
call CreateItemLoc($49304D50,GetRectCenter(Es))
call SetItemUserData(GetLastCreatedItem(),GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())))
call SetUnitOwner(GetTriggerUnit(),Player(8),true)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c00ffff00Искатель Приключений:|r У вас получилось!!! Урааааа!!! Я выиграю спор! Ну что ж, держите награду, заслужили.")
call TriggerSleepAction(2.)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил в награду |c0000ffffДушу Ассира|r. Все остальные игроки получили |c00ff969650 Кровавых Меток|r и |c00ffff00500 золота")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=6
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BXO() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1500
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+150
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BXQ takes nothing returns nothing
set b7=CreateTrigger()
call TriggerRegisterEnterRectSimple(b7,Er)
call TriggerAddCondition(b7,Condition(function BXN))
call TriggerAddAction(b7,function BXP)
endfunction
function BXR takes nothing returns boolean
if not (GetTriggerUnit()==IW) then
return false
endif
return true
endfunction
function BXS takes nothing returns nothing
call IssuePointOrderLoc(IW,"move",GetRectCenter(El))
endfunction
function BXT takes nothing returns nothing
set b8=CreateTrigger()
call TriggerRegisterEnterRectSimple(b8,Ek)
call TriggerAddCondition(b8,Condition(function BXR))
call TriggerAddAction(b8,function BXS)
endfunction
function BXU takes nothing returns boolean
if not (GetTriggerUnit()==IW) then
return false
endif
return true
endfunction
function BXV takes nothing returns nothing
call IssuePointOrderLoc(IW,"move",GetRectCenter(Ek))
endfunction
function BXW takes nothing returns nothing
set b9=CreateTrigger()
call TriggerRegisterEnterRectSimple(b9,El)
call TriggerAddCondition(b9,Condition(function BXU))
call TriggerAddAction(b9,function BXV)
endfunction
function BXX takes nothing returns boolean
if not (GetTriggerUnit()==IX) then
return false
endif
return true
endfunction
function BXY takes nothing returns nothing
call IssuePointOrderLoc(IX,"move",GetRectCenter(Eo))
endfunction
function BXZ takes nothing returns nothing
set cB=CreateTrigger()
call TriggerRegisterEnterRectSimple(cB,Ep)
call TriggerAddCondition(cB,Condition(function BXX))
call TriggerAddAction(cB,function BXY)
endfunction
function BXa takes nothing returns boolean
if not (GetTriggerUnit()==IX) then
return false
endif
return true
endfunction
function BXb takes nothing returns nothing
call IssuePointOrderLoc(IX,"move",GetRectCenter(Ep))
endfunction
function BXc takes nothing returns nothing
set cC=CreateTrigger()
call TriggerRegisterEnterRectSimple(cC,Eo)
call TriggerAddCondition(cC,Condition(function BXa))
call TriggerAddAction(cC,function BXb)
endfunction
function BXd takes nothing returns boolean
if not (GetTriggerUnit()==IV) then
return false
endif
return true
endfunction
function BXe takes nothing returns nothing
call IssuePointOrderLoc(IV,"move",GetRectCenter(En))
endfunction
function BXf takes nothing returns nothing
set cD=CreateTrigger()
call TriggerRegisterEnterRectSimple(cD,Em)
call TriggerAddCondition(cD,Condition(function BXd))
call TriggerAddAction(cD,function BXe)
endfunction
function BXg takes nothing returns boolean
if not (GetTriggerUnit()==IV) then
return false
endif
return true
endfunction
function BXh takes nothing returns nothing
call IssuePointOrderLoc(IV,"move",GetRectCenter(Em))
endfunction
function BXi takes nothing returns nothing
set cE=CreateTrigger()
call TriggerRegisterEnterRectSimple(cE,En)
call TriggerAddCondition(cE,Condition(function BXg))
call TriggerAddAction(cE,function BXh)
endfunction
function BXj takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6830344E) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BXk takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=17) then
return false
endif
return true
endfunction
function BXl takes nothing returns nothing
if BXk() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(cG)
call DestroyEffectBJ(Uu[47])
call AddSpecialEffectTargetUnitBJ("overhead",Jw,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[47]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Пираты\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 17-23|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Пираты","Имели когда-то дело с пиратами? Хитрые создания. Уничтожьте их корабль, он пришвартован недалеко отсюда..
|c006969FFУровень задания:|r 17-23","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[47]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call nX(GetTriggerUnit(),"Задание с |c00ff000017|r уровня",.027,255,255,255)
endif
endfunction
function BXm takes nothing returns nothing
set cF=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cF,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cF,Condition(function BXj))
call TriggerAddAction(cF,function BXl)
endfunction
function BXn takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830344F) then
return false
endif
return true
endfunction
function BXo takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c00ff7f00Судно Пиратов пошло ко дну! Вернитесь за наградой.|r")
call EnableTrigger(cH)
call DestroyEffectBJ(Uu[47])
call AddSpecialEffectTargetUnitBJ("overhead",Jw,"war3mapImported\\QuestYellow1.mdx")
set Uu[47]=GetLastCreatedEffectBJ()
endfunction
function BXp takes nothing returns nothing
set cG=CreateTrigger()
call DisableTrigger(cG)
call TriggerRegisterAnyUnitEventBJ(cG,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(cG,Condition(function BXn))
call TriggerAddAction(cG,function BXo)
endfunction
function BXq takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6830344E) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BXr takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BXs takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BXt takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BXu takes nothing returns boolean
return GetBooleanAnd(BXs(),BXt())
endfunction
function BXv takes nothing returns boolean
return GetBooleanAnd(BXr(),BXu())
endfunction
function BXw takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=17) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=23) then
return false
endif
return true
endfunction
function BXx takes nothing returns nothing
if BXw() then
call AddHeroXP(GetEnumUnit(),3000,false)
else
endif
endfunction
function BXy takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=17) then
return false
endif
return true
endfunction
function BXz takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=17) then
return false
endif
return true
endfunction
function BX0 takes nothing returns nothing
if BXz() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call DestroyEffectBJ(Uu[47])
call QuestSetCompletedBJ(YW[47],true)
call DestroyQuest(YW[47])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Жрица:|r спасибо за помощь, Герои. Не желаете взгянуть на мои товары?")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BXv))
call ForGroupBJ(Tj,function BXx)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00300 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BXy() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+900
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000017|r уровня",.027,255,255,255)
endif
endfunction
function BX1 takes nothing returns nothing
set cH=CreateTrigger()
call DisableTrigger(cH)
call TriggerRegisterAnyUnitEventBJ(cH,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cH,Condition(function BXq))
call TriggerAddAction(cH,function BX0)
endfunction
function BX2 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BX3 takes nothing returns nothing
call SetUnitLifePercentBJ(L8,100)
call SetUnitLifePercentBJ(Vf[0],100)
endfunction
function BX4 takes nothing returns nothing
set cI=CreateTrigger()
call TriggerRegisterLeaveRectSimple(cI,E1)
call TriggerAddCondition(cI,Condition(function BX2))
call TriggerAddAction(cI,function BX3)
endfunction
function BX5 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$75303031) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BX6 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BX7 takes nothing returns nothing
if BX6() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[48])
call AddSpecialEffectTargetUnitBJ("overhead",J6,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[48]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Взорвать к чертям!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 25-28|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Взорвать к чертям!","|c006969FFУровень задания: 25-28|r
Приказал мне господин уничтожить все остатки наших старых строений. От старинных построек остались лишь балки, их немного но их надо снести. Видите ли, не вписываются они в общий интерьер окружения. Так вот, берете бочку и пошли уничтожать! 1 балка в лесу, 1 у пауков, 2 у драконов и последняя в джунглях","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[48]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call CreateItemLoc($49304F4A,GetUnitLoc(GetTriggerUnit()))
else
call nX(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BX8 takes nothing returns nothing
set cJ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cJ,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cJ,Condition(function BX5))
call TriggerAddAction(cJ,function BX7)
endfunction
function BX9 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304F4A) then
return false
endif
return true
endfunction
function BYB takes nothing returns boolean
if not (TY[5]>=5) then
return false
endif
return true
endfunction
function BYC takes nothing returns boolean
if not (RectContainsUnit(E9,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BYD takes nothing returns boolean
if not (TY[5]>=5) then
return false
endif
return true
endfunction
function BYE takes nothing returns boolean
if not (RectContainsUnit(E8,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BYF takes nothing returns boolean
if not (TY[5]>=5) then
return false
endif
return true
endfunction
function BYG takes nothing returns boolean
if not (RectContainsUnit(E7,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BYH takes nothing returns boolean
if not (TY[5]>=5) then
return false
endif
return true
endfunction
function BYI takes nothing returns boolean
if not (RectContainsUnit(FV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BYJ takes nothing returns boolean
if not (TY[5]>=5) then
return false
endif
return true
endfunction
function BYK takes nothing returns boolean
if not (RectContainsUnit(E6,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BYL takes nothing returns nothing
if BYC() then
call RemoveRect(E9)
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Балка разрушена.")
call AddSpecialEffectLocBJ(GetRectCenter(E9),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(J1)
set TY[5]=TY[5]+1
if BYB() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Все балки разрушены. Вернитесь за наградой.")
call EnableTrigger(cL)
call DestroyEffectBJ(Uu[48])
call AddSpecialEffectTargetUnitBJ("overhead",J6,"war3mapImported\\QuestYellow1.mdx")
set Uu[48]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304F4A))
else
endif
else
endif
if BYE() then
call RemoveRect(E8)
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Балка разрушена.")
call AddSpecialEffectLocBJ(GetRectCenter(E8),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(J2)
set TY[5]=TY[5]+1
if BYD() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Все балки разрушены. Вернитесь за наградой.")
call EnableTrigger(cL)
call DestroyEffectBJ(Uu[48])
call AddSpecialEffectTargetUnitBJ("overhead",J6,"war3mapImported\\QuestYellow1.mdx")
set Uu[48]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304F4A))
else
endif
else
endif
if BYG() then
call RemoveRect(E7)
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Балка разрушена.")
call AddSpecialEffectLocBJ(GetRectCenter(E7),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(J3)
set TY[5]=TY[5]+1
if BYF() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Все балки разрушены. Вернитесь за наградой.")
call EnableTrigger(cL)
call DestroyEffectBJ(Uu[48])
call AddSpecialEffectTargetUnitBJ("overhead",J6,"war3mapImported\\QuestYellow1.mdx")
set Uu[48]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304F4A))
else
endif
else
endif
if BYI() then
call RemoveRect(FV)
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Балка разрушена.")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(J4)
set TY[5]=TY[5]+1
if BYH() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Все балки разрушены. Вернитесь за наградой.")
call EnableTrigger(cL)
call DestroyEffectBJ(Uu[48])
call AddSpecialEffectTargetUnitBJ("overhead",J6,"war3mapImported\\QuestYellow1.mdx")
set Uu[48]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304F4A))
else
endif
else
endif
if BYK() then
call RemoveRect(E6)
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Балка разрушена.")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(J5)
set TY[5]=TY[5]+1
if BYJ() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Все балки разрушены. Вернитесь за наградой.")
call EnableTrigger(cL)
call DestroyEffectBJ(Uu[48])
call AddSpecialEffectTargetUnitBJ("overhead",J6,"war3mapImported\\QuestYellow1.mdx")
set Uu[48]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304F4A))
else
endif
else
endif
endfunction
function BYM takes nothing returns nothing
set cK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cK,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(cK,Condition(function BX9))
call TriggerAddAction(cK,function BYL)
endfunction
function BYN takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$75303031) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BYO takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BYP takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BYQ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BYR takes nothing returns boolean
return GetBooleanAnd(BYP(),BYQ())
endfunction
function BYS takes nothing returns boolean
return GetBooleanAnd(BYO(),BYR())
endfunction
function BYT takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=25) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=28) then
return false
endif
return true
endfunction
function BYU takes nothing returns nothing
if BYT() then
call AddHeroXP(GetEnumUnit(),4000,false)
else
endif
endfunction
function BYV takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=25) then
return false
endif
return true
endfunction
function BYW takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BYX takes nothing returns nothing
if BYW() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[48])
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call QuestSetCompletedBJ(YW[48],true)
call DestroyQuest(YW[48])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Хранитель:|r спасибо, Смертные. Не желаете взгянуть на мои товары?")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BYS))
call ForGroupBJ(Tj,function BYU)
call DestroyGroup(Tj)
set Sh=Sh+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF4000 опыта|r, |c00ffff00300 золота|r, |c00ff969620 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BYV() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+900
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BYY takes nothing returns nothing
set cL=CreateTrigger()
call DisableTrigger(cL)
call TriggerRegisterAnyUnitEventBJ(cL,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cL,Condition(function BYN))
call TriggerAddAction(cL,function BYX)
endfunction
function BYZ takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E303738) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BYa takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=51) then
return false
endif
return true
endfunction
function BYb takes nothing returns nothing
if BYa() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[49])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|c00ff9696Одна из моих самых изощрённых загадок в этой карте. Итак, приготовьтесь, повторяю всего один раз.

Ответ на квест перед глазами,
Смотрите лучше пред собой.
Невинного убейте сами
Где начинали путь вы свой.")
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(cN)
else
call nX(GetTriggerUnit(),"Задание с |c00ff000051|r уровня",.027,255,255,255)
endif
endfunction
function BYc takes nothing returns nothing
set cM=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cM,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cM,Condition(function BYZ))
call TriggerAddAction(cM,function BYb)
endfunction
function BYd takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffВторую цель найти попроще,
Не так уж спрятана она.
Осады сдерживала мощно,
Сейчас же больше не нужна.")
call EnableTrigger(cO)
endfunction
function BYe takes nothing returns nothing
set cN=CreateTrigger()
call DisableTrigger(cN)
call TriggerRegisterUnitEvent(cN,Hy,EVENT_UNIT_DEATH)
call TriggerAddAction(cN,function BYd)
endfunction
function BYf takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffЕщё чуть-чуть, осталось мало.
Ищите в заросли густой.
Перед поляной водопадов
Найдёте вы последний бой.
")
call EnableTrigger(cP)
endfunction
function BYg takes nothing returns nothing
set cO=CreateTrigger()
call DisableTrigger(cO)
call TriggerRegisterUnitEvent(cO,H2,EVENT_UNIT_DEATH)
call TriggerAddAction(cO,function BYf)
endfunction
function BYh takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffМожете себя поздравить. Вам открыт доступ к Новогоднему корпоративу.|r (вход с 51 уровня)")
call AddSpecialEffectLocBJ(GetRectCenter(FS),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call EnableTrigger(cQ)
endfunction
function BYi takes nothing returns nothing
set cP=CreateTrigger()
call DisableTrigger(cP)
call TriggerRegisterUnitEvent(cP,J9,EVENT_UNIT_DEATH)
call TriggerAddAction(cP,function BYh)
endfunction
function BYj takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=51) then
return false
endif
return true
endfunction
function BYk takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(FP))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),GetRectCenter(FP),0)
endfunction
function BYl takes nothing returns nothing
set cQ=CreateTrigger()
call DisableTrigger(cQ)
call TriggerRegisterEnterRectSimple(cQ,FS)
call TriggerAddCondition(cQ,Condition(function BYj))
call TriggerAddAction(cQ,function BYk)
endfunction
function BYm takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BYn takes nothing returns boolean
if not (Tg>=4) then
return false
endif
return true
endfunction
function BYo takes nothing returns nothing
set Tg=Tg+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffРун активировано:|r "+(I2S(Tg)+"/4"))
if BYn() then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(cS)
call EnableTrigger(cT)
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffПроход открыт! Удачи")
call AddSpecialEffectLocBJ(GetRectCenter(FP),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
else
endif
endfunction
function BYp takes nothing returns nothing
set cR=CreateTrigger()
call TriggerRegisterEnterRectSimple(cR,FM)
call TriggerRegisterEnterRectSimple(cR,FN)
call TriggerRegisterEnterRectSimple(cR,Gg)
call TriggerRegisterEnterRectSimple(cR,FO)
call TriggerAddCondition(cR,Condition(function BYm))
call TriggerAddAction(cR,function BYo)
endfunction
function BYq takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BYr takes nothing returns nothing
set Tg=Tg-1
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffРун активировано:|r "+(I2S(Tg)+"/4"))
endfunction
function BYs takes nothing returns nothing
set cS=CreateTrigger()
call TriggerRegisterLeaveRectSimple(cS,FM)
call TriggerRegisterLeaveRectSimple(cS,FN)
call TriggerRegisterLeaveRectSimple(cS,Gg)
call TriggerRegisterLeaveRectSimple(cS,FO)
call TriggerAddCondition(cS,Condition(function BYq))
call TriggerAddAction(cS,function BYr)
endfunction
function BYt takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BYu takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303654
endfunction
function BYv takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BYw takes nothing returns boolean
return GetBooleanAnd(BYu(),BYv())
endfunction
function BYx takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BYy takes nothing returns nothing
local integer MC=0
set Tf[0]=90
set Tf[1]=75
set Tf[2]=80
set V2=Location(11050.,6650.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call RemoveLocation(V2)
call SetUnitLifePercentBJ(K2,100)
call SetUnitOwner(K2,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(K2,true)
set ST=GetUnitsInRectMatching(FL,Condition(function BYw))
call ForGroupBJ(ST,function BYx)
call DestroyGroup(ST)
set Xp[999]=0
call SaveInteger(NZ,GetHandleId(K2),1,0)
loop
call SaveInteger(NZ,GetHandleId(K2),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function BYz takes nothing returns nothing
set cT=CreateTrigger()
call DisableTrigger(cT)
call TriggerRegisterEnterRectSimple(cT,FP)
call TriggerAddCondition(cT,Condition(function BYt))
call TriggerAddAction(cT,function BYy)
endfunction
function BY0 takes nothing returns boolean
return GetRandomInt(1,3)==1
endfunction
function BY1 takes nothing returns boolean
return GetRandomInt(1,3)==1
endfunction
function BY2 takes nothing returns boolean
return GetRandomInt(1,3)==1
endfunction
function BY3 takes nothing returns nothing
call DisableTrigger(cT)
call DisableTrigger(cQ)
if BY0() then
call CreateItemLoc($49305051,GetUnitLoc(GetTriggerUnit()))
else
call DoNothing()
endif
if BY1() then
call CreateItemLoc($49305052,GetUnitLoc(GetTriggerUnit()))
else
call DoNothing()
endif
if BY2() then
call CreateItemLoc($4930504F,GetUnitLoc(GetTriggerUnit()))
else
call DoNothing()
endif
endfunction
function BY4 takes nothing returns nothing
set cU=CreateTrigger()
call TriggerRegisterUnitEvent(cU,K2,EVENT_UNIT_DEATH)
call TriggerAddAction(cU,function BY3)
endfunction
function BY5 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65737076) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BY6 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=30) then
return false
endif
return true
endfunction
function BY7 takes nothing returns nothing
if BY6() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(cW)
call DestroyEffectBJ(Uu[50])
call AddSpecialEffectTargetUnitBJ("overhead",Iu,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[50]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Пускай горит!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 30-40|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Пускай горит","|c006969FFУровень задания: 30-40|r

|c00ffff00Дух Возмездия:|r видите эту кучу дров? Попробуйте поджечь пожалуйста землю под ними, дабы они сгорели к чертям!!! Мне неуютно в этом краю, где везде влага и куча воды.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[50]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call nX(GetTriggerUnit(),"Задание с |c00ff000030|r уровня",.027,255,255,255)
endif
endfunction
function BY8 takes nothing returns nothing
set cV=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cV,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cV,Condition(function BY5))
call TriggerAddAction(cV,function BY7)
endfunction
function BY9 takes nothing returns boolean
if not (GetSpellAbilityId()==$41313342) then
return false
endif
if not (RectContainsUnit(Fh,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BZB takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(cX)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$656E6773))
call DestroyEffectBJ(Uu[50])
call AddSpecialEffectTargetUnitBJ("overhead",Iu,"war3mapImported\\QuestYellow1.mdx")
set Uu[50]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|c0000ff00Отлично. Но в процессе Ваш предмет был разрушен. Жаль..")
endfunction
function BZC takes nothing returns nothing
set cW=CreateTrigger()
call DisableTrigger(cW)
call TriggerRegisterAnyUnitEventBJ(cW,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(cW,Condition(function BY9))
call TriggerAddAction(cW,function BZB)
endfunction
function BZD takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65737076) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BZE takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BZF takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BZG takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BZH takes nothing returns boolean
return GetBooleanAnd(BZF(),BZG())
endfunction
function BZI takes nothing returns boolean
return GetBooleanAnd(BZE(),BZH())
endfunction
function BZJ takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=30) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=40) then
return false
endif
return true
endfunction
function BZK takes nothing returns nothing
if BZJ() then
call AddHeroXP(GetEnumUnit(),5000,false)
else
endif
endfunction
function BZL takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=30) then
return false
endif
return true
endfunction
function BZM takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=30) then
return false
endif
return true
endfunction
function BZN takes nothing returns nothing
if BZM() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($73687764,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Uu[50])
call QuestSetCompletedBJ(YW[50],true)
call DestroyQuest(YW[50])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF5000 опыта|r, |c00ffff00400 золота|r, |c00ff969620 Кровавых Меток")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FFFF00Дух Возмездия:|r примите в дар этот камень. ")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BZI))
call ForGroupBJ(Tj,function BZK)
call DestroyGroup(Tj)
set Sh=Sh+1
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BZL() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000030|r уровня",.027,255,255,255)
endif
endfunction
function BZO takes nothing returns nothing
set cX=CreateTrigger()
call DisableTrigger(cX)
call TriggerRegisterAnyUnitEventBJ(cX,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cX,Condition(function BZD))
call TriggerAddAction(cX,function BZN)
endfunction
function BZP takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$45776172) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BZQ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=35) then
return false
endif
return true
endfunction
function BZR takes nothing returns nothing
if BZQ() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(cZ)
call CreateItemLoc($4930524D,GetUnitLoc(GetTriggerUnit()))
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[51])
call AddSpecialEffectTargetUnitBJ("overhead",Iv,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[51]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Черный Список\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 35-50|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Черный Список","|c006969FFУровень задания: 35-50|r

|c00ffff00Смотрящая в Ночь:|r поступил тут заказ на устранение неких жертв из Черного Списка. Помогите убить всех пятерых целей и получите награду! Возьмите этот меч и неожиданно вонзите его в горло всем кого я назову. Но важно убивать их в определенном порядке. Собьете порядок - задание провалено.Итак, первый в нашем списке - летающий гибрид. Выпустите ему кишки наружу!","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[51]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000035|r уровня",.027,255,255,255)
endif
endfunction
function BZS takes nothing returns nothing
set cY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cY,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cY,Condition(function BZP))
call TriggerAddAction(cY,function BZR)
endfunction
function BZT takes nothing returns boolean
if not (GetSpellAbilityId()==$41313344) then
return false
endif
return true
endfunction
function BZU takes nothing returns boolean
if not (GetSpellTargetUnit()==IY) then
return false
endif
return true
endfunction
function BZV takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BZU() then
call KillUnit(GetSpellTargetUnit())
call QuestSetDescription(YW[51],"Убейте 5 жертв из Списка. Вторая цель - Слишком огромный кусок дерева.
|c006969FFУровень задания:|r 35-50")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Отлично! Первый из Списка мертв! Давайте дальше. Вторая цель: Слишком огромный кусок дерева.")
call TriggerSleepAction(2)
call EnableTrigger(ca)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Вы убили не того.... мне очень жаль. |c00ff0000Задание провалено!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
endif
endfunction
function BZW takes nothing returns nothing
set cZ=CreateTrigger()
call DisableTrigger(cZ)
call TriggerRegisterAnyUnitEventBJ(cZ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(cZ,Condition(function BZT))
call TriggerAddAction(cZ,function BZV)
endfunction
function BZX takes nothing returns boolean
if not (GetSpellAbilityId()==$41313344) then
return false
endif
return true
endfunction
function BZY takes nothing returns boolean
if not (GetSpellTargetUnit()==In) then
return false
endif
return true
endfunction
function BZZ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BZY() then
call KillUnit(GetSpellTargetUnit())
call QuestSetDescription(YW[51],"Убейте 5 жертв из Списка. Третья цель - древня тень меня самой.
|c006969FFУровень задания:|r 35-50")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Отлично! Второй из Списка мертв! Давайте дальше. Третья цель: древня тень меня самой.")
call TriggerSleepAction(2)
call EnableTrigger(cb)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Вы убили не того.... мне очень жаль. |c00ff0000Задание провалено!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
endif
endfunction
function BZa takes nothing returns nothing
set ca=CreateTrigger()
call DisableTrigger(ca)
call TriggerRegisterAnyUnitEventBJ(ca,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(ca,Condition(function BZX))
call TriggerAddAction(ca,function BZZ)
endfunction
function BZb takes nothing returns boolean
if not (GetSpellAbilityId()==$41313344) then
return false
endif
return true
endfunction
function BZc takes nothing returns boolean
if not (GetSpellTargetUnit()==Iu) then
return false
endif
return true
endfunction
function BZd takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BZc() then
call KillUnit(GetSpellTargetUnit())
call QuestSetDescription(YW[51],"Убейте 5 жертв из Списка. Четвертая цель - старый орк, друг всех подводных тварей.
|c006969FFУровень задания:|r 35-50")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Отлично! Третий из Списка мертв! Давайте дальше. Четвертая цель: старый орк, друг всех подводных тварей.")
call TriggerSleepAction(2)
call EnableTrigger(cc)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Вы убили не того.... мне очень жаль. |c00ff0000Задание провалено!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
endif
endfunction
function BZe takes nothing returns nothing
set cb=CreateTrigger()
call DisableTrigger(cb)
call TriggerRegisterAnyUnitEventBJ(cb,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(cb,Condition(function BZb))
call TriggerAddAction(cb,function BZd)
endfunction
function BZf takes nothing returns boolean
if not (GetSpellAbilityId()==$41313344) then
return false
endif
return true
endfunction
function BZg takes nothing returns boolean
if not (GetSpellTargetUnit()==I9) then
return false
endif
return true
endfunction
function BZh takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BZg() then
call KillUnit(GetSpellTargetUnit())
call QuestSetDescription(YW[51],"Убейте 5 жертв из Списка. Пятая цель - один из изготовителей важных деталей
|c006969FFУровень задания:|r 35-50")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Отлично! Четвертый из Списка мертв! Давайте дальше. Пятая цель: один из изготовителей важных деталей")
call TriggerSleepAction(2)
call EnableTrigger(cd)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Вы убили не того.... мне очень жаль. |c00ff0000Задание провалено!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
endif
endfunction
function BZi takes nothing returns nothing
set cc=CreateTrigger()
call DisableTrigger(cc)
call TriggerRegisterAnyUnitEventBJ(cc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(cc,Condition(function BZf))
call TriggerAddAction(cc,function BZh)
endfunction
function BZj takes nothing returns boolean
if not (GetSpellAbilityId()==$41313344) then
return false
endif
return true
endfunction
function BZk takes nothing returns boolean
if not (GetSpellTargetUnit()==Kv) then
return false
endif
return true
endfunction
function BZl takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BZk() then
call EnableTrigger(ce)
call KillUnit(GetSpellTargetUnit())
call QuestSetDescription(YW[51],"Все цели из Черного Списка убиты.
|c006969FFУровень задания:|r 35-50")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Отлично! Все цели устранены. Вернитесь за наградой.")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
call DestroyEffectBJ(Uu[51])
call AddSpecialEffectTargetUnitBJ("overhead",Iv,"war3mapImported\\QuestYellow1.mdx")
set Uu[51]=GetLastCreatedEffectBJ()
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Вы убили не того.... мне очень жаль. |c00ff0000Задание провалено!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
endif
endfunction
function BZm takes nothing returns nothing
set cd=CreateTrigger()
call DisableTrigger(cd)
call TriggerRegisterAnyUnitEventBJ(cd,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(cd,Condition(function BZj))
call TriggerAddAction(cd,function BZl)
endfunction
function BZn takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$45776172) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BZo takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BZp takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BZq takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BZr takes nothing returns boolean
return GetBooleanAnd(BZp(),BZq())
endfunction
function BZs takes nothing returns boolean
return GetBooleanAnd(BZo(),BZr())
endfunction
function BZt takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=35) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=50) then
return false
endif
return true
endfunction
function BZu takes nothing returns nothing
if BZt() then
call AddHeroXP(GetEnumUnit(),5000,false)
else
endif
endfunction
function BZv takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=35) then
return false
endif
return true
endfunction
function BZw takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=35) then
return false
endif
return true
endfunction
function BZx takes nothing returns nothing
if BZw() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($4930524E,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Uu[51])
call QuestSetCompletedBJ(YW[51],true)
call DestroyQuest(YW[51])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF5000 опыта|r, |c00ffff00400 золота|r, |c00ff969620 Кровавых Меток")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FFFF00Смотрящая в Ночь:|r примите в дар этот камень. ")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BZs))
call ForGroupBJ(Tj,function BZu)
call DestroyGroup(Tj)
set Sh=Sh+1
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BZv() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000035|r уровня",.027,255,255,255)
endif
endfunction
function BZy takes nothing returns nothing
set ce=CreateTrigger()
call DisableTrigger(ce)
call TriggerRegisterAnyUnitEventBJ(ce,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ce,Condition(function BZn))
call TriggerAddAction(ce,function BZx)
endfunction
function BZz takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49303930)==true) then
return false
endif
return true
endfunction
function BZ0 takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303930))
call KillDestructable(HT)
call KillDestructable(HW)
call KillDestructable(HX)
call KillDestructable(HV)
call KillDestructable(HU)
endfunction
function BZ1 takes nothing returns nothing
set cf=CreateTrigger()
call TriggerRegisterEnterRectSimple(cf,Gl)
call TriggerAddCondition(cf,Condition(function BZz))
call TriggerAddAction(cf,function BZ0)
endfunction
function BZ2 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D47)==true) then
return false
endif
return true
endfunction
function BZ3 takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D47))
call KillDestructable(Hu)
call KillDestructable(Hn)
call KillDestructable(Ho)
endfunction
function BZ4 takes nothing returns nothing
set cg=CreateTrigger()
call TriggerRegisterEnterRectSimple(cg,Fj)
call TriggerAddCondition(cg,Condition(function BZ2))
call TriggerAddAction(cg,function BZ3)
endfunction
function BZ5 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BZ6 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateDestructableLoc($42303048,GetRectCenter(Fi),GetRandomDirectionDeg(),2.5,0)
call DisplayTextToForce(GetPlayersAll(),"Горит... дальше не пройти.")
call EnableTrigger(ci)
endfunction
function BZ7 takes nothing returns nothing
set ch=CreateTrigger()
call TriggerRegisterEnterRectSimple(ch,Fi)
call TriggerAddCondition(ch,Condition(function BZ5))
call TriggerAddAction(ch,function BZ6)
endfunction
function BZ8 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49303130)==true) then
return false
endif
return true
endfunction
function BZ9 takes nothing returns boolean
return GetDestructableTypeId(GetFilterDestructable())==$42303048
endfunction
function BaB takes nothing returns nothing
call RemoveDestructable(GetEnumDestructable())
endfunction
function BaC takes nothing returns nothing
call EnableTrigger(cj)
call DisplayTextToForce(GetPlayersAll(),"Костер потушен!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303130))
call KillDestructable(Hk)
call KillDestructable(Hl)
call KillDestructable(Hm)
call EnumDestructablesInRect(Fi,Condition(function BZ9),function BaB)
call ModifyGateBJ(bj_GATEOPERATION_CLOSE,HZ)
call ShowDestructable(HZ,true)
call ShowUnit(Jd,true)
endfunction
function BaD takes nothing returns nothing
set ci=CreateTrigger()
call DisableTrigger(ci)
call TriggerRegisterEnterRectSimple(ci,Fi)
call TriggerAddCondition(ci,Condition(function BZ8))
call TriggerAddAction(ci,function BaC)
endfunction
function BaE takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6830354C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BaF takes nothing returns boolean
if not (Tw==1) then
return false
endif
return true
endfunction
function BaG takes nothing returns boolean
if not (Tw==2) then
return false
endif
return true
endfunction
function BaH takes nothing returns boolean
if not (Tw==3) then
return false
endif
return true
endfunction
function BaI takes nothing returns boolean
if not (Tw==4) then
return false
endif
return true
endfunction
function BaJ takes nothing returns boolean
if not (Tw==5) then
return false
endif
return true
endfunction
function BaK takes nothing returns boolean
if not (Tw==6) then
return false
endif
return true
endfunction
function BaL takes nothing returns boolean
if not (Tw==7) then
return false
endif
return true
endfunction
function BaM takes nothing returns boolean
if not (Tw==8) then
return false
endif
return true
endfunction
function BaN takes nothing returns boolean
if not (Tw==9) then
return false
endif
return true
endfunction
function BaO takes nothing returns boolean
if not (Tw==10) then
return false
endif
return true
endfunction
function BaP takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set Tw=GetRandomInt(1,10)
if BaF() then
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Темная комната. Перед вами свеча, керосиновая лампа и газовая плита. Что вы зажжёте в первую очередь?

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if BaG() then
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Есть 7 братьев. У каждого брата есть сестра. Сколько всего сестер?

|c0000ff00Подсказка:|r ответ - одно число. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if BaH() then
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Сколько раз встречается цифра 4 в целых числах от 1 до 50?

|c0000ff00Подсказка:|r ответ - одно число. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if BaI() then
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

У отца Люси 5 дочерей: Чача, Чече, Чичи, Чочо. Как зовут пятую дочь?

|c0000ff00Подсказка:|r ответ - имя с большой буквы. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if BaJ() then
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Пара лошадей пробежала 20 километров. Вопрос: сколько километров пробежала каждая лошадь в отдельности?

|c0000ff00Подсказка:|r ответ - одно число. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if BaK() then
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Стоит и ходит, висит и стоит, ходит и лежит?

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if BaL() then
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Что у человека может за несколько секунд увеличиться в диаметре в 7 раз?

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if BaM() then
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Чем можно поделиться только один раз?

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if BaN() then
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Чем больше из неё берёшь, тем больше она становится.

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if BaO() then
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Идет то в гору, то с горы, но остается на месте.

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
call TriggerSleepAction(180.)
call DisableTrigger(ck)
endfunction
function BaQ takes nothing returns nothing
set cj=CreateTrigger()
call DisableTrigger(cj)
call TriggerRegisterAnyUnitEventBJ(cj,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cj,Condition(function BaE))
call TriggerAddAction(cj,function BaP)
endfunction
function BaR takes nothing returns boolean
if not (IsUnitAliveBJ(Lv)==true) then
return false
endif
return true
endfunction
function BaS takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function BaT takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BaU takes nothing returns boolean
return GetBooleanAnd(BaS(),BaT())
endfunction
function BaV takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BaW takes nothing returns boolean
if not (Tw==1) then
return false
endif
if not (GetEventPlayerChatString()=="-спичку") then
return false
endif
return true
endfunction
function BaX takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function BaY takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BaZ takes nothing returns boolean
return GetBooleanAnd(BaX(),BaY())
endfunction
function Baa takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bab takes nothing returns boolean
if not (Tw==2) then
return false
endif
if not (GetEventPlayerChatString()=="-1") then
return false
endif
return true
endfunction
function Bac takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Bad takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bae takes nothing returns boolean
return GetBooleanAnd(Bac(),Bad())
endfunction
function Baf takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bag takes nothing returns boolean
if not (Tw==3) then
return false
endif
if not (GetEventPlayerChatString()=="-15") then
return false
endif
return true
endfunction
function Bah takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Bai takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Baj takes nothing returns boolean
return GetBooleanAnd(Bah(),Bai())
endfunction
function Bak takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bal takes nothing returns boolean
if not (Tw==4) then
return false
endif
if not (GetEventPlayerChatString()=="-Люси") then
return false
endif
return true
endfunction
function Bam takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Ban takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bao takes nothing returns boolean
return GetBooleanAnd(Bam(),Ban())
endfunction
function Bap takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Baq takes nothing returns boolean
if not (Tw==5) then
return false
endif
if not (GetEventPlayerChatString()=="-20") then
return false
endif
return true
endfunction
function Bar takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Bas takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bat takes nothing returns boolean
return GetBooleanAnd(Bar(),Bas())
endfunction
function Bau takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bav takes nothing returns boolean
if not (Tw==6) then
return false
endif
if not (GetEventPlayerChatString()=="-часы") then
return false
endif
return true
endfunction
function Baw takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Bax takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bay takes nothing returns boolean
return GetBooleanAnd(Baw(),Bax())
endfunction
function Baz takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Ba0 takes nothing returns boolean
if not (Tw==7) then
return false
endif
if not (GetEventPlayerChatString()=="-зрачок") then
return false
endif
return true
endfunction
function Ba1 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Ba2 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Ba3 takes nothing returns boolean
return GetBooleanAnd(Ba1(),Ba2())
endfunction
function Ba4 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Ba5 takes nothing returns boolean
if not (Tw==8) then
return false
endif
if not (GetEventPlayerChatString()=="-секретом") then
return false
endif
return true
endfunction
function Ba6 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Ba7 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Ba8 takes nothing returns boolean
return GetBooleanAnd(Ba6(),Ba7())
endfunction
function Ba9 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BbB takes nothing returns boolean
if not (Tw==9) then
return false
endif
if not (GetEventPlayerChatString()=="-яма") then
return false
endif
return true
endfunction
function BbC takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function BbD takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BbE takes nothing returns boolean
return GetBooleanAnd(BbC(),BbD())
endfunction
function BbF takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BbG takes nothing returns boolean
if not (Tw==10) then
return false
endif
if not (GetEventPlayerChatString()=="-дорога") then
return false
endif
return true
endfunction
function BbH takes nothing returns nothing
if BaW() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jd)
call EnableTrigger(cl)
call ShowUnitShow(Lv)
call PauseUnitBJ(false,Lv)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function BaU))
call ForGroupBJ(ST,function BaV)
call DestroyGroup(ST)
else
endif
if Bab() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jd)
call EnableTrigger(cl)
call ShowUnitShow(Lv)
call PauseUnitBJ(false,Lv)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function BaZ))
call ForGroupBJ(ST,function Baa)
call DestroyGroup(ST)
else
endif
if Bag() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jd)
call EnableTrigger(cl)
call ShowUnitShow(Lv)
call PauseUnitBJ(false,Lv)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function Bae))
call ForGroupBJ(ST,function Baf)
call DestroyGroup(ST)
else
endif
if Bal() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jd)
call EnableTrigger(cl)
call ShowUnitShow(Lv)
call PauseUnitBJ(false,Lv)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function Baj))
call ForGroupBJ(ST,function Bak)
call DestroyGroup(ST)
else
endif
if Baq() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jd)
call EnableTrigger(cl)
call ShowUnitShow(Lv)
call PauseUnitBJ(false,Lv)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function Bao))
call ForGroupBJ(ST,function Bap)
call DestroyGroup(ST)
else
endif
if Bav() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jd)
call EnableTrigger(cl)
call ShowUnitShow(Lv)
call PauseUnitBJ(false,Lv)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function Bat))
call ForGroupBJ(ST,function Bau)
call DestroyGroup(ST)
else
endif
if Ba0() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jd)
call EnableTrigger(cl)
call ShowUnitShow(Lv)
call PauseUnitBJ(false,Lv)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function Bay))
call ForGroupBJ(ST,function Baz)
call DestroyGroup(ST)
else
endif
if Ba5() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jd)
call EnableTrigger(cl)
call ShowUnitShow(Lv)
call PauseUnitBJ(false,Lv)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function Ba3))
call ForGroupBJ(ST,function Ba4)
call DestroyGroup(ST)
else
endif
if BbB() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jd)
call EnableTrigger(cl)
call ShowUnitShow(Lv)
call PauseUnitBJ(false,Lv)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function Ba8))
call ForGroupBJ(ST,function Ba9)
call DestroyGroup(ST)
else
endif
if BbG() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jd)
call EnableTrigger(cl)
call ShowUnitShow(Lv)
call PauseUnitBJ(false,Lv)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function BbE))
call ForGroupBJ(ST,function BbF)
call DestroyGroup(ST)
else
endif
endfunction
function BbI takes nothing returns nothing
set ck=CreateTrigger()
call DisableTrigger(ck)
call TriggerRegisterPlayerChatEvent(ck,Player(0),"-",false)
call TriggerRegisterPlayerChatEvent(ck,Player(1),"-",false)
call TriggerRegisterPlayerChatEvent(ck,Player(2),"-",false)
call TriggerRegisterPlayerChatEvent(ck,Player(3),"-",false)
call TriggerRegisterPlayerChatEvent(ck,Player(4),"-",false)
call TriggerRegisterPlayerChatEvent(ck,Player(5),"-",false)
call TriggerRegisterPlayerChatEvent(ck,Player(6),"-",false)
call TriggerRegisterPlayerChatEvent(ck,Player(7),"-",false)
call TriggerAddCondition(ck,Condition(function BaR))
call TriggerAddAction(ck,function BbH)
endfunction
function BbJ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BbK takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function BbL takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BbM takes nothing returns boolean
return GetBooleanAnd(BbK(),BbL())
endfunction
function BbN takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BbO takes nothing returns nothing
local integer MC=0
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HZ)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HY)
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitOwner(Lv,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lv,true)
call SetUnitLifePercentBJ(Lv,100)
set Tv[7]=85.
set Tv[8]=90.
set Tv[9]=80.
set ST=GetUnitsInRectMatching(Fn,Condition(function BbM))
call ForGroupBJ(ST,function BbN)
call DestroyGroup(ST)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"Босс |c00ffff00Пагубный|r. |c0000ffffРезист к магии|r: "+(I2S(GetUnitAbilityLevel(Lv,$41313756)*3)+"%"))
call SaveInteger(NZ,GetHandleId(Lv),1,0)
loop
call SaveInteger(NZ,GetHandleId(Lv),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function BbP takes nothing returns nothing
set cl=CreateTrigger()
call DisableTrigger(cl)
call TriggerRegisterEnterRectSimple(cl,Fi)
call TriggerAddCondition(cl,Condition(function BbJ))
call TriggerAddAction(cl,function BbO)
endfunction
function BbQ takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6830344D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BbR takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(cZ)
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Арена\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 1-50|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Арена","|c006969FFУровень задания: 1-50|r
Каждый уважающий себя Герой должен испытать своё мастерство на Арене, ведь именно для этого она и была создана. Враги Арены меняются каждые 5 уровней, а для входа к ним просто станьте в круг и пропишите |c00ff7f00-бой|r или |c00ff7f00-fight|r. Подробнее об Арене Вы можете прочитать во вкладке |c00ffff00Alt + H|r. Что же я от Вас хочу? Убейте босса своего уровня на Арене, дабы я был уверен, что Вы ознакомились с правилами данного состязания.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[52]=GetLastCreatedQuestBJ()
endfunction
function BbS takes nothing returns nothing
set cm=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cm,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cm,Condition(function BbQ))
call TriggerAddAction(cm,function BbR)
endfunction
function BbT takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6830344D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BbU takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=1) then
return false
endif
return true
endfunction
function BbV takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[52])
call QuestSetCompletedBJ(YW[52],true)
call DestroyQuest(YW[52])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00ffff00400 золота|r, |c00ff969610 Кровавых Меток")
set Sh=Sh+1
call RemoveUnit(GetOrderTargetUnit())
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BbU() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BbW takes nothing returns nothing
set cn=CreateTrigger()
call DisableTrigger(cn)
call TriggerRegisterAnyUnitEventBJ(cn,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cn,Condition(function BbT))
call TriggerAddAction(cn,function BbV)
endfunction
function BbX takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BbY takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305457)==true) then
return false
endif
return true
endfunction
function BbZ takes nothing returns nothing
call ShowUnit(KD,true)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c0000ffffПриходи, когда добудешь немного кристаллической эссенции.")
if BbY() then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305457))
call UnitAddAbilityBJ($416E6532,KD)
call UnitAddAbilityBJ($41706974,KD)
else
endif
endfunction
function Bba takes nothing returns nothing
set co=CreateTrigger()
call TriggerRegisterEnterRectSimple(co,Fv)
call TriggerAddCondition(co,Condition(function BbX))
call TriggerAddAction(co,function BbZ)
endfunction
function Bbb takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E706E77) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bbc takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bbd takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41304B51)>=1) then
return false
endif
return true
endfunction
function Bbe takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=48) then
return false
endif
return true
endfunction
function Bbf takes nothing returns nothing
if Bbe() then
if Bbd() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Всезнающий\"")
call UnitAddAbilityBJ($41304B51,GetEnumUnit())
endif
else
endif
endfunction
function Bbg takes nothing returns boolean
if not (Sh>=45) then
return false
endif
return true
endfunction
function Bbh takes nothing returns nothing
if Bbg() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffПингвин: ура, ура, ура!!! Получите награду!")
call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function Bbc)),function Bbf)
else
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffПингвин|r: выполнили больше 45 заданий? Нет? Так чего вы ждете? 
|c00ff0000Внимание|r: для получения награды требуется герой выше 48 уровня!")
endif
endfunction
function Bbi takes nothing returns nothing
set cp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cp,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cp,Condition(function Bbb))
call TriggerAddAction(cp,function Bbh)
endfunction
function Bbj takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$456D6F6F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bbk takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=32) then
return false
endif
return true
endfunction
function Bbl takes nothing returns nothing
if Bbk() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[53])
call AddSpecialEffectTargetUnitBJ("overhead",Jk,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[53]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Последний сухопутный\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 32-40|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Последний сухопутный","|c006969FFУровень задания: 32-40|r
Экспедиция по уничтожению опасных морских врагов почти завершена. Остался один лишь Морлок, который спрятался где-то в водных глубинах.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[53]=GetLastCreatedQuestBJ()
call ShowUnit(LK,true)
call PauseUnit(LK,false)
else
call nX(GetTriggerUnit(),"Задание с |c00ff000032|r уровня",.027,255,255,255)
endif
endfunction
function Bbm takes nothing returns nothing
set cq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cq,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cq,Condition(function Bbj))
call TriggerAddAction(cq,function Bbl)
endfunction
function Bbn takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303454) then
return false
endif
return true
endfunction
function Bbo takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303250) then
return false
endif
return true
endfunction
function Bbp takes nothing returns nothing
if Bbn() then
set V1=GetRectCenter(F5)
call SetUnitPositionLoc(GetTriggerUnit(),V1)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V1)
else
endif
if Bbo() then
set V1=GetRectCenter(F6)
call SetUnitPositionLoc(GetTriggerUnit(),V1)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V1)
else
endif
endfunction
function Bbq takes nothing returns nothing
set cr=CreateTrigger()
call TriggerRegisterLeaveRectSimple(cr,F5)
call TriggerRegisterLeaveRectSimple(cr,F6)
call TriggerAddAction(cr,function Bbp)
endfunction
function Bbr takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bbs takes nothing returns nothing
call SetUnitLifePercentBJ(LK,100)
call SetUnitLifePercentBJ(LL,100)
endfunction
function Bbt takes nothing returns nothing
set cs=CreateTrigger()
call TriggerRegisterEnterRectSimple(cs,F6)
call TriggerRegisterEnterRectSimple(cs,F5)
call TriggerAddCondition(cs,Condition(function Bbr))
call TriggerAddAction(cs,function Bbs)
endfunction
function Bbu takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bbv takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(1.)
if Bbu() then
call SetUnitInvulnerable(GetTriggerUnit(),true)
call PauseUnit(GetTriggerUnit(),true)
call DisplayTextToForce(GetPlayersAll(),"|c007d7d7dРазведчик|r: не убивайте, достаточно... Я всё скажу. По пути к Гидре есть небольшой островок, вот там скрывается проход к боссу. Только не убивайте..")
call ShowUnit(LL,true)
call PauseUnit(LL,false)
call KillDestructable(Ht)
else
endif
endfunction
function Bbw takes nothing returns nothing
set ct=CreateTrigger()
call TriggerRegisterUnitStateEvent(ct,LK,UNIT_STATE_LIFE,LESS_THAN,50000.)
call TriggerAddAction(ct,function Bbv)
endfunction
function Bbx takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303454) then
return false
endif
return true
endfunction
function Bby takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303250) then
return false
endif
return true
endfunction
function Bbz takes nothing returns nothing
if Bbx() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Задание провалено! Вам не удалось добыть из разведчика информацию, вы его убили.
")
else
endif
if Bby() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Задание выполнено! Вернитесь за наградой")
call DestroyEffectBJ(Uu[53])
call AddSpecialEffectTargetUnitBJ("overhead",Jk,"war3mapImported\\QuestYellow1.mdx")
set Uu[53]=GetLastCreatedEffectBJ()
call EnableTrigger(cv)
else
endif
endfunction
function Bb0 takes nothing returns nothing
set cu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cu,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(cu,function Bbz)
endfunction
function Bb1 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$456D6F6F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bb2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bb3 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function Bb4 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function Bb5 takes nothing returns boolean
return GetBooleanAnd(Bb3(),Bb4())
endfunction
function Bb6 takes nothing returns boolean
return GetBooleanAnd(Bb2(),Bb5())
endfunction
function Bb7 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=32) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=40) then
return false
endif
return true
endfunction
function Bb8 takes nothing returns nothing
if Bb7() then
call AddHeroXP(GetEnumUnit(),7000,false)
else
endif
endfunction
function Bb9 takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=32) then
return false
endif
return true
endfunction
function BcB takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=32) then
return false
endif
return true
endfunction
function BcC takes nothing returns nothing
if BcB() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[53])
call QuestSetCompletedBJ(YW[53],true)
call DestroyQuest(YW[53])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF7000 опыта|r, |c00ffff00400 золота|r, |c00ff969620 Кровавых Меток")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FFFF00Экспедиция завершена. Благодарю за помощь")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function Bb6))
call ForGroupBJ(Tj,function Bb8)
call DestroyGroup(Tj)
set Sh=Sh+1
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if Bb9() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000032|r уровня",.027,255,255,255)
endif
endfunction
function BcD takes nothing returns nothing
set cv=CreateTrigger()
call DisableTrigger(cv)
call TriggerRegisterAnyUnitEventBJ(cv,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cv,Condition(function Bb1))
call TriggerAddAction(cv,function BcC)
endfunction
function BcE takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68776174) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BcF takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[55])
call AddSpecialEffectTargetUnitBJ("overhead",Iq,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[55]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Бывший союзник\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 51+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Последний сухопутный","|c006969FFУровень задания: 51+|r
Моё тело мертво,но мой дух продолжает жить. Пафосно звучит. не так ли? Но тем не менее, имеем то, что имеем. Какие-то уроды меня убили, не дав мне возможности отомстить своему бывшему напарнику по оружию. Эх, Асмодеус... Вместе с тобой мы шли в бой, уничтожали всё, что встречалось на пути. А потом этот сукин сын пошел учится магии у водяных чародеев и забыл обо мне. Предайте его тело праху, и я открою.вам тайну, ценой во всю мою жизнь.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[55]=GetLastCreatedQuestBJ()
endfunction
function BcG takes nothing returns nothing
set cw=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cw,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cw,Condition(function BcE))
call TriggerAddAction(cw,function BcF)
endfunction
function BcH takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68776174) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BcI takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305731)==true) then
return false
endif
return true
endfunction
function BcJ takes nothing returns nothing
if BcI() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($4930324E,GetUnitLoc(GetTriggerUnit()))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305731))
call DestroyQuest(YW[55])
else
call DisplayTextToForce(GetPlayersAll(),"|C00ffff00Дух Джека:|r итак, как и обещал. Существует некое писание, \"Кодекс Некромантов\", в котором прописаны основные правила, законы и заклинания темной магии воскрешения мертвых. 10 страниц Кодекса были украдены недоброжелателями, отыщите их и я смогу синтезировать для Вас Душу Асмодеуса.")
endif
endfunction
function BcK takes nothing returns nothing
set cx=CreateTrigger()
call DisableTrigger(cx)
call TriggerRegisterAnyUnitEventBJ(cx,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cx,Condition(function BcH))
call TriggerAddAction(cx,function BcJ)
endfunction
function BcL takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local item cz=GetManipulatedItem()
local texttag Me
if GetItemTypeId(cz)==$49305732 then
set VQ=VQ+1
set Me=CreateTextTag()
call SetTextTagText(Me,I2S(VQ)+"/10",.025)
call SetTextTagPosUnit(Me,Hw,50)
call SetTextTagColor(Me,255,0,255,255)
call SetTextTagVelocity(Me,0,.03)
call SetTextTagVisibility(Me,true)
call SetTextTagFadepoint(Me,2)
call SetTextTagLifespan(Me,2)
call SetTextTagPermanent(Me,false)
call SetTextTagSuspended(Me,false)
if VQ>=10 then
call UnitAddItemByIdSwapped($49305731,Hw)
endif
endif
set Hw=null
set cz=null
endfunction
function BcM takes nothing returns nothing
set cy=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cy,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(cy,function BcL)
endfunction
function BcN takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F626C61) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BcO takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Магические сталагмиты\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 52-53|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Магические сталагмиты
","|c006969FFУровень задания: 52-53|r
Ну вот вы и добрались сюда. Путь был долгим, не правда ли? Вашей следующей целью будет помочь нам уничтожить лагерь нежити неподалеку, но начнем мы с малого. В этих пустошах мы установили 5 магических сталагмитов, которые давали нам обзор всего в округе. Они погасли, и это бега. активируйте их, нам нужна их магия. Каждый заряжается специальным камнем, которые похитили враги. у каждого класса врагов - по одному камню. Добудьте их и активируйте сталагмиты!","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[54]=GetLastCreatedQuestBJ()
endfunction
function BcP takes nothing returns nothing
set c0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(c0,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(c0,Condition(function BcN))
call TriggerAddAction(c0,function BcO)
endfunction
function BcQ takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE)) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())==11) then
return false
endif
return true
endfunction
function BcR takes nothing returns boolean
if not (GetRandomInt(1,15)==1) then
return false
endif
return true
endfunction
function BcS takes nothing returns nothing
if BcR() then
call CreateItemLoc($49303441,GetUnitLoc(GetTriggerUnit()))
else
endif
endfunction
function BcT takes nothing returns nothing
set c1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(c1,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(c1,Condition(function BcQ))
call TriggerAddAction(c1,function BcS)
endfunction
function BcU takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49303441)==true) then
return false
endif
return true
endfunction
function BcV takes nothing returns boolean
if not (SL[376]>=5.) then
return false
endif
return true
endfunction
function BcW takes nothing returns boolean
if not (RectContainsUnit(GE,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BcX takes nothing returns boolean
if not (SL[376]>=5.) then
return false
endif
return true
endfunction
function BcY takes nothing returns boolean
if not (RectContainsUnit(GD,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BcZ takes nothing returns boolean
if not (SL[376]>=5.) then
return false
endif
return true
endfunction
function Bca takes nothing returns boolean
if not (RectContainsUnit(GC,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bcb takes nothing returns boolean
if not (SL[376]>=5.) then
return false
endif
return true
endfunction
function Bcc takes nothing returns boolean
if not (RectContainsUnit(GB,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bcd takes nothing returns boolean
if not (SL[376]>=5.) then
return false
endif
return true
endfunction
function Bce takes nothing returns boolean
if not (RectContainsUnit(F9,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bcf takes nothing returns nothing
if BcW() then
call SetDoodadAnimationRectBJ("Stand Work",$44303245,GE)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303441))
call RemoveRect(GE)
set SL[376]=SL[376]+1.
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFКамней активировано: |r"+(I2S(R2I(SL[376]))+"/|c00ffff005"))
if BcV() then
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFВсе камни активированы!")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyEffectBJ(Uu[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c3)
call DisableTrigger(c1)
else
endif
else
endif
if BcY() then
call SetDoodadAnimationRectBJ("Stand Work",$44303245,GD)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303441))
call RemoveRect(GD)
set SL[376]=SL[376]+1.
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFКамней активировано: |r"+(I2S(R2I(SL[376]))+"/|c00ffff005"))
if BcX() then
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFВсе камни активированы!")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyEffectBJ(Uu[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c3)
call DisableTrigger(c1)
else
endif
else
endif
if Bca() then
call SetDoodadAnimationRectBJ("Stand Work",$44303245,GC)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303441))
call RemoveRect(GC)
set SL[376]=SL[376]+1.
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFКамней активировано: |r"+(I2S(R2I(SL[376]))+"/|c00ffff005"))
if BcZ() then
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFВсе камни активированы!")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyEffectBJ(Uu[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c3)
call DisableTrigger(c1)
else
endif
else
endif
if Bcc() then
call SetDoodadAnimationRectBJ("Stand Work",$44303245,GB)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303441))
call RemoveRect(GB)
set SL[376]=SL[376]+1.
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFКамней активировано: |r"+(I2S(R2I(SL[376]))+"/|c00ffff005"))
if Bcb() then
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFВсе камни активированы!")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyEffectBJ(Uu[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c3)
call DisableTrigger(c1)
else
endif
else
endif
if Bce() then
call SetDoodadAnimationRectBJ("Stand Work",$44303245,F9)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303441))
call RemoveRect(F9)
set SL[376]=SL[376]+1.
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFКамней активировано: |r"+(I2S(R2I(SL[376]))+"/|c00ffff005"))
if Bcd() then
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFВсе камни активированы!")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyEffectBJ(Uu[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c3)
call DisableTrigger(c1)
else
endif
else
endif
endfunction
function Bcg takes nothing returns nothing
set c2=CreateTrigger()
call TriggerRegisterEnterRectSimple(c2,GE)
call TriggerRegisterEnterRectSimple(c2,GD)
call TriggerRegisterEnterRectSimple(c2,GC)
call TriggerRegisterEnterRectSimple(c2,GB)
call TriggerRegisterEnterRectSimple(c2,F9)
call TriggerAddCondition(c2,Condition(function BcU))
call TriggerAddAction(c2,function Bcf)
endfunction
function Bch takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F626C61) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bci takes nothing returns boolean
if not (RectContainsUnit(GV,MV[GetForLoopIndexA()-1])==true) then
return false
endif
if not (GetUnitLevel(MV[GetForLoopIndexA()-1])==52) then
return false
endif
return true
endfunction
function Bcj takes nothing returns boolean
if not Bci() then
return false
endif
return true
endfunction
function Bck takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=52) then
return false
endif
return true
endfunction
function Bcl takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if Bcj() then
call SuspendHeroXPBJ(true,MV[GetForLoopIndexA()-1])
set S4[GetForLoopIndexA()]=true
call SetHeroLevel(MV[GetForLoopIndexA()-1],53,true)
set S4[GetForLoopIndexA()]=false
call SuspendHeroXPBJ(false,MV[GetForLoopIndexA()-1])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(c4)
call DestroyEffectBJ(Uu[54])
call QuestSetCompletedBJ(YW[54],true)
call DestroyQuest(YW[54])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00ffff001400 золота|r, |c00ff9696100 Кровавых Меток")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FFFF00Спасибо за помощь, но это ещё далеко не конец. Обратитесь к Минотавру, он обьяснит Вам детали предстоящего сражения.")
set Sh=Sh+1
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if Bck() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+4200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+300
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
call AddSpecialEffectTargetUnitBJ("origin",Kq,"war3mapImported\\TalkToMev2.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
endfunction
function Bcm takes nothing returns nothing
set c3=CreateTrigger()
call DisableTrigger(c3)
call TriggerRegisterAnyUnitEventBJ(c3,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(c3,Condition(function Bch))
call TriggerAddAction(c3,function Bcl)
endfunction
function Bcn takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F746175) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bco takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(c5)
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Uu[54])
call AddSpecialEffectTargetUnitBJ("origin",Kq,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Освобождение пленников\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 53-54|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Освобождение пленников","|c006969FFУровень задания: 53-54|r
Мы практически готовы нападать и уничтожать врагов, осталось только освободить наших полководцев из плена. Это недалеко, в пустошах. Ведь без командывания наша армия будет безнадежно слаба. Вытащите великих командиров, и мы начнем.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[54]=GetLastCreatedQuestBJ()
endfunction
function Bcp takes nothing returns nothing
set c4=CreateTrigger()
call DisableTrigger(c4)
call TriggerRegisterAnyUnitEventBJ(c4,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(c4,Condition(function Bcn))
call TriggerAddAction(c4,function Bco)
endfunction
function Bcq takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F736864) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bcr takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F746368) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bcs takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F666172) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bct takes nothing returns nothing
if Bcq() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call IssueTargetOrderBJ(GetOrderTargetUnit(),"smart",GetTriggerUnit())
else
endif
if Bcr() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call IssueTargetOrderBJ(GetOrderTargetUnit(),"smart",GetTriggerUnit())
else
endif
if Bcs() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call IssueTargetOrderBJ(GetOrderTargetUnit(),"smart",GetTriggerUnit())
else
endif
endfunction
function Bcu takes nothing returns nothing
set c5=CreateTrigger()
call DisableTrigger(c5)
call TriggerRegisterAnyUnitEventBJ(c5,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(c5,function Bct)
endfunction
function Bcv takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$4F666172 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$4F746368 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$4F736864 then
return true
endif
return false
endfunction
function Bcw takes nothing returns boolean
if not Bcv() then
return false
endif
return true
endfunction
function Bcx takes nothing returns boolean
if not (RectContainsUnit(GO,Jl)==true) then
return false
endif
if not (RectContainsUnit(GO,JU)==true) then
return false
endif
if not (RectContainsUnit(GO,JV)==true) then
return false
endif
return true
endfunction
function Bcy takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),Location(18730.,1881.))
call SetUnitOwner(GetTriggerUnit(),Player(8),true)
if Bcx() then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(c5)
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFОтлично! Все в сборе. Подойдите к Минотавру для сдачи задания и получения информации о дальнейших действиях")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyQuest(YW[54])
call DestroyEffectBJ(Uu[54])
call AddSpecialEffectTargetUnitBJ("origin",Kq,"war3mapImported\\TalkToMev2.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c7)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Еще один с нами!")
endif
endfunction
function Bcz takes nothing returns nothing
set c6=CreateTrigger()
call TriggerRegisterEnterRectSimple(c6,GO)
call TriggerAddCondition(c6,Condition(function Bcw))
call TriggerAddAction(c6,function Bcy)
endfunction
function Bc0 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F746175) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bc1 takes nothing returns boolean
if not (RectContainsUnit(GV,MV[GetForLoopIndexA()-1])==true) then
return false
endif
if not (GetUnitLevel(MV[GetForLoopIndexA()-1])==53) then
return false
endif
return true
endfunction
function Bc2 takes nothing returns boolean
if not Bc1() then
return false
endif
return true
endfunction
function Bc3 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if Bc2() then
call SuspendHeroXPBJ(true,MV[GetForLoopIndexA()-1])
set S4[GetForLoopIndexA()]=true
call SetHeroLevel(MV[GetForLoopIndexA()-1],54,true)
set S4[GetForLoopIndexA()]=false
call SuspendHeroXPBJ(false,MV[GetForLoopIndexA()-1])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call DestroyEffectBJ(Uu[54])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Минотавр:|r Мы готовы к наступлению! Через 15 секунд полководцы выдвинутся в сторону вражеской базы. У нас нет возможности привести армию, так как все наши войска были перебиты, поэтому нам потребуется ваша помощь. А, и чуть не забыл. Ворота в лагерь врагов не поддаются обычному оружию, поэтому с вами отправится наша катапульта, которая уничтожит преграду.")
call TriggerSleepAction(15.)
call EnableTrigger(c8)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Войска выдвинулись в сторону базы врагов. Победите босса Нежити, дабы не потерять уважение в глазах Орды.
|c00ff9696Внимание:|r полководцы должны выжить, а также защищайте Катапульту до тех пор, пока она не уничтожит ворота.")
endfunction
function Bc4 takes nothing returns nothing
set c7=CreateTrigger()
call DisableTrigger(c7)
call TriggerRegisterAnyUnitEventBJ(c7,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(c7,Condition(function Bc0))
call TriggerAddAction(c7,function Bc3)
endfunction
function Bc5 takes nothing returns nothing
set V2=GetRectCenter(GS)
call IssuePointOrderLoc(Kr,"attack",V2)
call IssuePointOrderLoc(JV,"attack",V2)
call IssuePointOrderLoc(JU,"attack",V2)
call IssuePointOrderLoc(Jl,"attack",V2)
call RemoveLocation(V2)
endfunction
function Bc6 takes nothing returns nothing
set c8=CreateTrigger()
call DisableTrigger(c8)
call TriggerRegisterTimerEventPeriodic(c8,2)
call TriggerAddAction(c8,function Bc5)
endfunction
function Bc7 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6F636174) then
return false
endif
return true
endfunction
function Bc8 takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bc9 takes nothing returns nothing
local group Me
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(c8)
call IssuePointOrderLoc(Kr,"attackground",Location(23622.,4226.))
call TriggerSleepAction(20.)
if Bc8() then
call PauseUnit(GetTriggerUnit(),true)
call KillDestructable(Hb)
call DisplayTextToForce(GetPlayersAll(),"|c007d7d7dОтлично! Уничтожим эту нечисть!")
set V2=Location(23619.,312.)
call IssuePointOrderLoc(JV,"attack",V2)
call IssuePointOrderLoc(JU,"attack",V2)
call IssuePointOrderLoc(Jl,"attack",V2)
call RemoveLocation(V2)
set Me=CreateGroup()
call GroupEnumUnitsInRect(Me,Go,null)
call ForGroup(Me,function n6)
call DestroyGroup(Me)
set Me=null
else
endif
endfunction
function BdB takes nothing returns nothing
set c9=CreateTrigger()
call TriggerRegisterEnterRectSimple(c9,GS)
call TriggerAddCondition(c9,Condition(function Bc7))
call TriggerAddAction(c9,function Bc9)
endfunction
function BdC takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6F636174) then
return false
endif
if not (IsDestructableAliveBJ(Hb)==true) then
return false
endif
return true
endfunction
function BdD takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$4F666172 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$4F746368 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$4F736864 then
return true
endif
return false
endfunction
function BdE takes nothing returns boolean
if not BdD() then
return false
endif
return true
endfunction
function BdF takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$7567686F) then
return false
endif
if not (IsUnitAliveBJ(JV)==true) then
return false
endif
if not (IsUnitAliveBJ(JU)==true) then
return false
endif
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
if not (IsDestructableAliveBJ(Hb)==false) then
return false
endif
return true
endfunction
function BdG takes nothing returns nothing
if BdC() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Задание провалено. Мы не сможем разрушить ворота")
call DisableTrigger(c5)
call DisableTrigger(c7)
call DisableTrigger(c8)
else
endif
if BdE() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Задание провалено. Вам никогда не заручится поддержкой орды!")
call DisableTrigger(c5)
call DisableTrigger(c7)
call DisableTrigger(c8)
call DisableTrigger(dC)
call RemoveUnit(L9)
else
endif
if BdF() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Босс нежити повержен! Вернитесь к Минотавру
")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call EnableTrigger(dC)
call DestroyEffectBJ(Uu[54])
call AddSpecialEffectTargetUnitBJ("origin",Kq,"war3mapImported\\TalkToMev2.mdx")
set Uu[54]=GetLastCreatedEffectBJ()
else
endif
endfunction
function BdH takes nothing returns nothing
set dB=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dB,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(dB,function BdG)
endfunction
function BdI takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F746175) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BdJ takes nothing returns boolean
if not (RectContainsUnit(GV,MV[GetForLoopIndexA()-1])==true) then
return false
endif
if not (GetUnitLevel(MV[GetForLoopIndexA()-1])==54) then
return false
endif
return true
endfunction
function BdK takes nothing returns boolean
if not BdJ() then
return false
endif
return true
endfunction
function BdL takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(dD)
call DisplayTextToForce(GetPlayersAll(),"|c00ff7f00Минотавр: |rмои поздравления, слуга Лен-Кура побежден. Готовы ли вы сразится с самим владыкой пустынных земель? Найдите в пустошах нашего союника |c00ffff00Шамана|r, он откроет вам проход.")
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if BdK() then
call SuspendHeroXPBJ(true,MV[GetForLoopIndexA()-1])
set S4[GetForLoopIndexA()]=true
call SetHeroLevel(MV[GetForLoopIndexA()-1],55,true)
set S4[GetForLoopIndexA()]=false
call SuspendHeroXPBJ(false,MV[GetForLoopIndexA()-1])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call DestroyEffectBJ(Uu[54])
endfunction
function BdM takes nothing returns nothing
set dC=CreateTrigger()
call DisableTrigger(dC)
call TriggerRegisterAnyUnitEventBJ(dC,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(dC,Condition(function BdI))
call TriggerAddAction(dC,function BdL)
endfunction
function BdN takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F73686D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BdO takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Шаман: |rуверены, что хотите туда? Ну удачи!")
call AddSpecialEffectLocBJ(GetRectCenter(GY),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call EnableTrigger(U1)
endfunction
function BdP takes nothing returns nothing
set dD=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dD,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(dD,Condition(function BdN))
call TriggerAddAction(dD,function BdO)
endfunction
function BdQ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BdR takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=55) then
return false
endif
return true
endfunction
function BdS takes nothing returns nothing
local integer Me
if BdR() then
set V2=Location(21434.,2016.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call RemoveLocation(V2)
set Xp[777]=0
set dE[1]=93
set dE[2]=80
set dE[3]=95
set dE[4]=90
set V1=Location(21434.,2676.)
call SetUnitPositionLoc(Ll,V1)
call RemoveLocation(V1)
call SetUnitInvulnerable(Ll,true)
call SetUnitOwner(Ll,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitLifePercentBJ(Ll,100)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"Босс |c00ffff00Лен-Кур|r. |c0000ffffРезист к магии|r: "+(I2S(GetUnitAbilityLevel(Ll,$41313756)*3)+"%"))
call SaveInteger(NZ,GetHandleId(Ll),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(Ll),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c00ff0000Для входа требуется 55 уровень")
endif
endfunction
function BdT takes nothing returns nothing
set U1=CreateTrigger()
call DisableTrigger(U1)
call TriggerRegisterEnterRectSimple(U1,GY)
call TriggerAddCondition(U1,Condition(function BdQ))
call TriggerAddAction(U1,function BdS)
endfunction
function BdU takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E636B73) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BdV takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function BdW takes nothing returns nothing
if BdV() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Us)
call DestroyEffectBJ(Uu[56])
call AddSpecialEffectTargetUnitBJ("overhead",J7,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Uu[56]=GetLastCreatedEffectBJ()
call AddSpecialEffectLocBJ(GetRectCenter(GG),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Вожак кентавров\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 45-50|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Вожак Кентавров","|c006969FFУровень задания: 45-50|r
Наш вожак совсем сошел с ума. Остановите его!","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YW[55]=GetLastCreatedQuestBJ()
else
call nX(GetTriggerUnit(),"Задание с |c00ff000045|r уровня",.027,255,255,255)
endif
endfunction
function BdX takes nothing returns nothing
set dF=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dF,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(dF,Condition(function BdU))
call TriggerAddAction(dF,function BdW)
endfunction
function BdY takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E636B73) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BdZ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bda takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function Bdb takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function Bdc takes nothing returns boolean
return GetBooleanAnd(Bda(),Bdb())
endfunction
function Bdd takes nothing returns boolean
return GetBooleanAnd(BdZ(),Bdc())
endfunction
function Bde takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=45) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=49) then
return false
endif
return true
endfunction
function Bdf takes nothing returns nothing
if Bde() then
call AddHeroXP(GetEnumUnit(),7000,false)
else
endif
endfunction
function Bdg takes nothing returns boolean
if not (GetUnitLevel(MV[GetForLoopIndexB()-1])>=45) then
return false
endif
return true
endfunction
function Bdh takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function Bdi takes nothing returns nothing
if Bdh() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Uu[56])
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call QuestSetCompletedBJ(YW[55],true)
call DestroyQuest(YW[55])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF7000 опыта|r, |c00ffff00400 золота|r, |c00ff969620 Кровавых Меток")
set Tj=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function Bdd))
call ForGroupBJ(Tj,function Bdf)
call DestroyGroup(Tj)
set Sh=Sh+1
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if Bdg() then
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+1200
set NL[GetForLoopIndexB()]=NL[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call nX(GetTriggerUnit(),"Задание с |c00ff000045|r уровня",.027,255,255,255)
endif
endfunction
function Bdj takes nothing returns nothing
set Ut=CreateTrigger()
call DisableTrigger(Ut)
call TriggerRegisterAnyUnitEventBJ(Ut,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Ut,Condition(function BdY))
call TriggerAddAction(Ut,function Bdi)
endfunction
function Bdk takes nothing returns nothing
local location Me
local location Np
local integer Nq
if GetUnitTypeId(GetOrderTargetUnit())==$656D7467 then
set Me=GetUnitLoc(GetOrderTargetUnit())
set Np=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Me,Np)<=200. then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffect(Uu[57])
call DestroyQuest(YW[56])
set Sh=Sh+1
set Nq=0
loop
if GetUnitLevel(MV[Nq])>=39 then
set NK[Nq+1]=NK[Nq+1]+1200
set NL[Nq+1]=NL[Nq+1]+60
endif
if GetUnitLevel(MV[Nq])>=39 and GetUnitLevel(MV[Nq])<=44 then
call AddHeroXP(MV[Nq],5200,false)
endif
set Nq=Nq+1
exitwhen Nq>=8
endloop
call BJDebugMsg("|c00ff7f00Задание выполнено!|r Награда: |c00ff00ff5200|r опыта, |c00ffff00400|r золота, |c00ff969620|r Кровавых Меток")
endif
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
endif
endfunction
function Bdl takes nothing returns nothing
local trigger Me
if RectContainsUnit(Gk,GetTriggerUnit())==true then
set Xp[58]=Xp[58]+1
call RemoveRect(Gk)
if Xp[58]>=4 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Uu[57])
set Uu[57]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",Jc,"overhead")
set Me=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Me,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Me,function Bdk)
else
call BJDebugMsg("|c00ffff00Вперёд к следующей точке")
endif
endif
if RectContainsUnit(Gj,GetTriggerUnit())==true then
set Xp[58]=Xp[58]+1
call RemoveRect(Gj)
if Xp[58]>=4 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Uu[57])
set Uu[57]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",Jc,"overhead")
set Me=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Me,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Me,function Bdk)
else
call BJDebugMsg("|c00ffff00Вперёд к следующей точке")
endif
endif
if RectContainsUnit(Gi,GetTriggerUnit())==true then
set Xp[58]=Xp[58]+1
call RemoveRect(Gi)
if Xp[58]>=4 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Uu[57])
set Uu[57]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",Jc,"overhead")
set Me=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Me,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Me,function Bdk)
else
call BJDebugMsg("|c00ffff00Вперёд к следующей точке")
endif
endif
if RectContainsUnit(Gh,GetTriggerUnit())==true then
set Xp[58]=Xp[58]+1
call RemoveRect(Gh)
if Xp[58]>=4 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Uu[57])
set Uu[57]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",Jc,"overhead")
set Me=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Me,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Me,function Bdk)
else
call BJDebugMsg("|c00ffff00Вперёд к следующей точке")
endif
endif
set Me=null
endfunction
function Bdm takes nothing returns nothing
local location Me
local location Np
local trigger Nq
local string Ns
if GetUnitTypeId(GetOrderTargetUnit())==$656D7467 then
set Me=GetUnitLoc(GetOrderTargetUnit())
set Np=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Me,Np)<=200. then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
set Nq=CreateTrigger()
call TriggerRegisterEnterRectSimple(Nq,Gk)
call TriggerRegisterEnterRectSimple(Nq,Gj)
call TriggerRegisterEnterRectSimple(Nq,Gi)
call TriggerRegisterEnterRectSimple(Nq,Gh)
call TriggerAddAction(Nq,function Bdl)
set Nq=null
call DestroyEffect(Uu[57])
set Uu[57]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1_Portrait.mdx",Jc,"overhead")
call BJDebugMsg("|cffffcc00Задание получено:|r Каменная благодарность\n|c006969FFУровень задания: 39-44")
set Ns="|c006969FFУровень задания: 39-44|r\n\nПриветик! Поможешь? Ну конечно поможешь, куда ты денешься) Я тут задумал организовать\nодин обряд, для него мне нужно собрать некие сведения по поводу источников Мэлерота и \nкое-кого убить! Начнем со сведений. Для начала, посети такие места:\n        -Фонтан в Суральде;\n        -Фонтан в Терассе Творцов;\n        -Фонтан в Орхесте;\n        -Священный источник на Архипелаге.\n        Вперёд! Я жду."
set YW[56]=CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Каменная благодарность",Ns,"ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
endif
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
endif
endfunction
function Bdn takes nothing returns nothing
set dG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dG,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(dG,function Bdm)
endfunction
function Bdo takes nothing returns nothing
local location Me
local location Np
local integer Nq
if GetUnitTypeId(GetOrderTargetUnit())==$456B6565 then
set Me=GetUnitLoc(GetOrderTargetUnit())
set Np=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Me,Np)<=200. then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbility(GetOrderTargetUnit(),$41706974)
call UnitAddAbility(GetOrderTargetUnit(),$416E6532)
call DestroyEffect(Uu[58])
call DestroyQuest(YW[57])
set Sh=Sh+1
set Nq=0
loop
if GetUnitLevel(MV[Nq])>=17 then
set NK[Nq+1]=NK[Nq+1]+750
set NL[Nq+1]=NL[Nq+1]+30
endif
set Nq=Nq+1
exitwhen Nq>=8
endloop
call BJDebugMsg("|c00ff7f00Задание выполнено!|r Награда: |c00ffff00250|r золота, |c00ff969610|r Кровавых Меток, доступ к трофеям")
endif
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
endif
endfunction
function Bdp takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local trigger Me
if GetUnitTypeId(Hw)==$6E303339 or GetUnitTypeId(Hw)==$6E303352 then
if GetUnitState(K0,UNIT_STATE_LIFE)<1 and GetUnitState(Lf,UNIT_STATE_LIFE)<1 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Uu[58])
set Uu[58]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",KJ,"overhead")
set Me=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Me,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Me,function Bdo)
endif
endif
set Me=null
set Hw=null
endfunction
function Bdq takes nothing returns nothing
local location Me
local location Np
local trigger Nq
local string Ns
if GetUnitTypeId(GetOrderTargetUnit())==$456B6565 then
set Me=GetUnitLoc(GetOrderTargetUnit())
set Np=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Me,Np)<=200. then
if GetUnitLevel(GetTriggerUnit())>=17 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
set Nq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Nq,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Nq,function Bdp)
set Nq=null
call DestroyEffect(Uu[58])
set Uu[58]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1_Portrait.mdx",KJ,"overhead")
call BJDebugMsg("|cffffcc00Задание получено:|r Трофеи\n|c006969FFУровень задания: 17+")
set Ns="|c006969FFУровень задания: 17+|r\n\nУ каждого великого деяния должна быть соответствующая награда, согласны? Ранее, в былые \nвремена, великие воины после битвы забирали себе трофей с поля сражения, дабы он служил\nнапоминанием о победе. Так вот, убьете Люка и Каменнного Гиганта - я тоже дам вам такую\nвозможность"
set YW[57]=CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Трофеи",Ns,"ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
else
call nX(GetTriggerUnit(),"Задание с |c00ff000017|r уровня",.027,255,255,255)
endif
endif
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
endif
endfunction
function Bdr takes nothing returns nothing
set dH=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dH,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(dH,function Bdq)
endfunction
function Bds takes nothing returns nothing
local location Me
local location Np
local integer Nq
if GetUnitTypeId(GetOrderTargetUnit())==$6F677275 then
set Me=GetUnitLoc(GetOrderTargetUnit())
set Np=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Me,Np)<=200. then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbility(GetOrderTargetUnit(),$41706974)
call UnitAddAbility(GetOrderTargetUnit(),$416E6532)
call DestroyEffect(Uu[59])
call DestroyQuest(YW[59])
set Sh=Sh+1
set Nq=0
loop
if GetUnitLevel(MV[Nq])>=32 then
set NK[Nq+1]=NK[Nq+1]+1200
set NL[Nq+1]=NL[Nq+1]+45
endif
if GetUnitLevel(MV[Nq])>=32 and GetUnitLevel(MV[Nq])<=39 then
call AddHeroXP(MV[Nq],5500,false)
endif
set Nq=Nq+1
exitwhen Nq>=8
endloop
call BJDebugMsg("|c00ff7f00Задание выполнено!|r Награда: |c00ff00ff5500|r опыта, |c00ffff00400|r золота, |c00ff969615|r Кровавых Меток")
endif
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
endif
endfunction
function Bdt takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local trigger Me
if GetUnitTypeId(Hw)==$68303141 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Uu[59])
set Uu[59]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",I9,"overhead")
set Me=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Me,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Me,function Bds)
set Me=null
endif
set Hw=null
endfunction
function Bdu takes nothing returns nothing
local location Me
local location Np
local trigger Nq
local string Ns
if GetUnitTypeId(GetOrderTargetUnit())==$6F677275 then
set Me=GetUnitLoc(GetOrderTargetUnit())
set Np=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Me,Np)<=200. then
if GetUnitLevel(GetTriggerUnit())>=32 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call UnitAddAbility(GetOrderTargetUnit(),$41706974)
call UnitAddAbility(GetOrderTargetUnit(),$416E6532)
call KillDestructable(Ha)
set Nq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Nq,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Nq,function Bdt)
set Nq=null
call DestroyEffect(Uu[59])
set Uu[59]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1_Portrait.mdx",I9,"overhead")
call BJDebugMsg("|cffffcc00Задание получено:|r Коа\n|c006969FFУровень задания: 32-39")
set Ns="|c006969FFУровень задания: 32-39|r\n\nНеподалёку поселился глубинный воин пучин. Задолбал уже жрать наших союзников. \nНамёк ясен? Вперёд!\nP.S. в обычном режиме боя босс просто умрёт и всё. Если хотите награду за его\nголову в виде вещей - активируйте усложнённый режим с помощью вот этой сферы,\nкоторую я могу вам продать."
set YW[59]=CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Коа",Ns,"ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
else
call nX(GetTriggerUnit(),"Задание с |c00ff000032|r уровня",.027,255,255,255)
endif
endif
call RemoveLocation(Me)
call RemoveLocation(Np)
set Me=null
set Np=null
endif
endfunction
function Bdv takes nothing returns nothing
set dI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dI,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(dI,function Bdu)
endfunction
function Bdw takes nothing returns nothing
local unit NR=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local location Me
local group Np
local boolexpr Nq
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),1)>=1 then
set Me=GetUnitLoc(NR)
set Np=CreateGroup()
set Nq=Condition(function mo)
call GroupEnumUnitsInRangeOfLoc(Np,Me,80,Nq)
call DestroyBoolExpr(Nq)
set Ps=LE
set Nw=4000
call ForGroup(Np,function m1)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",Me))
if CountUnitsInGroup(Np)<1 then
call SetUnitState(LE,UNIT_STATE_LIFE,GetUnitState(LE,UNIT_STATE_LIFE)+150000)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",LE,"chest"))
endif
call DestroyGroup(Np)
set Nq=null
set Np=null
call RemoveLocation(Me)
set Me=null
else
call RemoveUnit(NR)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set NR=null
endfunction
function Bdx takes nothing returns nothing
local location Hv=GetUnitLoc(GetEnumUnit())
local unit NR=CreateUnitAtLoc(Player(10),$6E303157,Hv,0)
call nd(NR,200000)
call nc(NR,1000)
call ne(NR,100)
call RemoveLocation(Hv)
set Hv=null
set NR=null
endfunction
function Bdy takes nothing returns nothing
local unit VD=GetTriggerUnit()
local location Me
local group Np
local boolexpr Nq
if GetUnitAbilityLevel(VD,$41666165)==2 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20)
set Me=GetUnitLoc(VD)
set Np=CreateGroup()
set Nq=Condition(function mo)
call GroupEnumUnitsInRect(Np,Gu,Nq)
call DestroyBoolExpr(Nq)
call ForGroup(Np,function Bdx)
call DestroyGroup(Np)
set Nq=null
set Np=null
call RemoveLocation(Me)
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
set VD=null
endfunction
function Bdz takes nothing returns nothing
local unit VD=GetTriggerUnit()
local group Me
local boolexpr Np
local location Nq
local unit Ns
local timer Nt
if GetUnitAbilityLevel(VD,$41666165)==2 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(12)
call na(VD,"|c00ff00ffИзвержение!",.028,255,255,255)
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,Gu,Np)
call DestroyBoolExpr(Np)
set Nq=GetUnitLoc(GroupPickRandomUnit(Me))
set Ns=CreateUnitAtLoc(Player(10),$68303739,Nq,0)
call AddSpecialEffectTarget("war3mapImported\\Alarm.mdx",Ns,"origin")
call DestroyGroup(Me)
set Np=null
set Me=null
call TriggerSleepAction(2)
set Nt=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(Nt),0,Ns)
call SaveInteger(Nr,GetHandleId(Nt),1,10)
call TimerStart(Nt,1,true,function Bdw)
set Nt=null
set Ns=null
call EnableTrigger(GetTriggeringTrigger())
endif
set VD=null
set Nq=null
endfunction
function Bd0 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bd1 takes nothing returns nothing
local unit VD=GetTriggerUnit()
local location Me
local location Np
local group Nq
local boolexpr Ns
if GetUnitAbilityLevel(VD,$41666165)==2 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(18)
call na(VD,"|c00ff9696Взгляд смерти!",.028,255,255,255)
call TriggerSleepAction(2)
call SetUnitInvulnerable(VD,true)
call PauseUnit(VD,true)
call TriggerSleepAction(2)
set Me=GetUnitLoc(VD)
set Np=nN(Me,700,GetUnitFacing(VD))
set Nq=CreateGroup()
set Ns=Condition(function mo)
call GroupEnumUnitsInRangeOfLoc(Nq,Np,700,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function Bd0)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UCancelDeath\\UCancelDeath.mdl",VD,"chest"))
call SetUnitInvulnerable(VD,false)
call PauseUnit(VD,false)
call EnableTrigger(GetTriggeringTrigger())
endif
set VD=null
set Np=null
set Me=null
endfunction
function Bd2 takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LE,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bd1)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LE,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bdz)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LE,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bdy)
set He=null
endfunction
function Bd3 takes nothing returns nothing
local unit Hw=GetEnumUnit()
call UnitDamageTarget(Ll,Hw,30000,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
set Hw=null
endfunction
function Bd4 takes nothing returns nothing
local location Me
local unit Np
local real Nq
local real Ns
local location Nt
local group Ov
local boolexpr Ow
if GetUnitLifePercent(GetTriggerUnit())<=dE[3] then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),dE[3])
set dE[3]=dE[3]-10.
set Me=Location(GetRandomReal(20950,21930),GetRandomReal(2156,3071))
set Np=CreateUnitAtLoc(Player(10),$6E303032,Me,0)
call na(Np,"|c00ff00ffЖивые падут!",.028,255,255,255)
call TriggerSleepAction(2)
set Nq=300
loop
set Ns=0
loop
set Nt=nN(Me,Nq,Ns)
set Ov=CreateGroup()
set Ow=Condition(function mr)
call GroupEnumUnitsInRange(Ov,GetLocationX(Nt),GetLocationY(Nt),300,Ow)
call DestroyBoolExpr(Ow)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Singularity II Orange.mdl",GetLocationX(Nt),GetLocationY(Nt)))
call RemoveUnit(Np)
call ForGroup(Ov,function Bd3)
call DestroyGroup(Ov)
set Ow=null
set Ov=null
call RemoveLocation(Nt)
set Nt=null
set Ns=Ns+30
exitwhen Ns>=360
endloop
call TriggerSleepAction(2)
set Nq=Nq+300
exitwhen Nq>900
endloop
set Np=null
call RemoveLocation(Me)
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bd5 takes nothing returns nothing
local integer MC=LoadInteger(dJ,GetHandleId(GetExpiredTimer()),1)
local location Hv=GetUnitLoc(Ll)
local location Nl
if MC==1 then
set Nl=Location(20955,3056)
elseif MC==2 then
set Nl=Location(20955,2149)
elseif MC==3 then
set Nl=Location(21920,3054)
elseif MC==4 then
set Nl=Location(21920,2157)
endif
call SaveInteger(dJ,GetHandleId(GetExpiredTimer()),2,LoadInteger(dJ,GetHandleId(GetExpiredTimer()),2)-1)
if DistanceBetweenPoints(Hv,Nl)<=150 then
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call UnitRemoveAbility(Ll,$41305A50)
call UnitAddAbility(GetTriggerUnit(),$41314256)
call UnitAddAbility(GetTriggerUnit(),$41314233)
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
elseif LoadInteger(dJ,GetHandleId(GetExpiredTimer()),2)<=0 then
if DistanceBetweenPoints(Hv,Nl)>150 then
call SetUnitLifePercentBJ(Ll,100)
set dE[1]=93
set dE[2]=80
set dE[3]=95
set dE[4]=90
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call UnitRemoveAbility(Ll,$41305A50)
call UnitAddAbility(GetTriggerUnit(),$41314256)
call UnitAddAbility(GetTriggerUnit(),$41314233)
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
endif
endif
set Nl=null
set Hv=null
endfunction
function Bd6 takes nothing returns nothing
local integer Me
local timer Np
if GetUnitLifePercent(GetTriggerUnit())<=dE[2] then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),dE[2])
set dE[2]=dE[2]-20.
set Me=GetRandomInt(1,4)
if Me==1 then
call na(Ll,"Затопчу",.028,255,0,0)
elseif Me==2 then
call na(Ll,"Затопчу",.028,255,100,0)
elseif Me==3 then
call na(Ll,"Затопчу",.028,0,255,0)
elseif Me==4 then
call na(Ll,"Затопчу",.028,0,0,255)
endif
call UnitAddAbility(GetTriggerUnit(),$41305A50)
call UnitRemoveAbility(GetTriggerUnit(),$41314256)
call UnitRemoveAbility(GetTriggerUnit(),$41314233)
set Np=CreateTimer()
call SaveInteger(dJ,GetHandleId(Np),1,Me)
call SaveInteger(dJ,GetHandleId(Np),2,25)
call TimerStart(Np,.2,true,function Bd5)
set Np=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bd7 takes nothing returns nothing
local unit Hw=LoadUnitHandle(dJ,GetHandleId(GetExpiredTimer()),1)
local location Hv=GetUnitLoc(Hw)
local real MF=GetLocationX(Hv)
local real MG=GetLocationY(Hv)
local real NU=350.
local group WC=CreateGroup()
local boolexpr dK=Condition(function mr)
call GroupEnumUnitsInRange(WC,MF,MG,NU,dK)
call DestroyBoolExpr(dK)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Singularity II Orange.mdl",GetLocationX(Hv),GetLocationY(Hv)))
call RemoveUnit(Hw)
call ForGroup(WC,function Bd3)
call DestroyGroup(WC)
set dK=null
set WC=null
set Hw=null
call RemoveLocation(Hv)
set Hv=null
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function Bd8 takes nothing returns nothing
local unit Me
local integer Np
local location Nq
local unit Ns
local timer Nt
if GetUnitLifePercent(GetTriggerUnit())<=dE[1] then
set Me=GetTriggerUnit()
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),dE[1])
set dE[1]=dE[1]-7.
call na(Ll,"|c00ff9696Пробежимся?",.028,255,255,255)
set Np=1
loop
set Nq=GetUnitLoc(Me)
set Ns=CreateUnitAtLoc(Player(10),$6E303031,Nq,0)
set Nt=CreateTimer()
call SaveUnitHandle(dJ,GetHandleId(Nt),1,Ns)
call TimerStart(Nt,2,true,function Bd7)
call RemoveLocation(Nq)
set Nq=null
set Ns=null
set Nt=null
call TriggerSleepAction(2)
set Np=Np+1
exitwhen Np>=5
endloop
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bd9 takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv=GetUnitLoc(Hw)
local location Nl=GetUnitLoc(Ll)
local location dL
call SetUnitFacingTimed(Hw,AngleBetweenPoints(GetUnitLoc(Hw),GetUnitLoc(Ll)),0)
set dL=PolarProjectionBJ(Hv,10.,GetUnitFacing(Hw)-180.)
call SetUnitPositionLoc(Hw,dL)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\SandWaveDamage.mdl",Hw,"origin"))
call RemoveLocation(Hv)
call RemoveLocation(Nl)
call RemoveLocation(dL)
set Hv=null
set Nl=null
set dL=null
set Hw=null
endfunction
function BeB takes nothing returns nothing
local group WC=CreateGroup()
local boolexpr dK=Condition(function mo)
call GroupEnumUnitsInRange(WC,GetUnitX(Ll),GetUnitY(Ll),3000,dK)
call DestroyBoolExpr(dK)
call ForGroup(WC,function Bd9)
call DestroyGroup(WC)
set dK=null
set WC=null
endfunction
function BeC takes nothing returns nothing
local location Me
local effect Np
local timer Nq
if GetUnitLifePercent(GetTriggerUnit())<=dE[4] then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),dE[4])
set dE[4]=dE[4]-40.
set Me=Location(21419,2602)
call SetUnitPositionLoc(Ll,Me)
call SetUnitFacingTimed(Ll,0,270)
call SetUnitInvulnerable(Ll,true)
call PauseUnit(Ll,true)
set Np=AddSpecialEffectTarget("war3mapImported\\SandAura2.mdl",Ll,"origin")
call RemoveLocation(Me)
set Me=null
call na(Ll,"|c00ffff00Пещаная буря!",.028,255,255,255)
call UnitAddAbility(Ll,$41305A50)
call TriggerSleepAction(2.5)
set Nq=CreateTimer()
call TimerStart(Nq,.07,true,function BeB)
call TriggerSleepAction(7.5)
call SetUnitInvulnerable(Ll,false)
call PauseUnit(Ll,false)
call UnitRemoveAbility(Ll,$41305A50)
call DestroyEffect(Np)
call PauseTimer(Nq)
call DestroyTimer(Nq)
set Nq=null
set Np=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function BeD takes nothing returns nothing
local location Me
local group Np
local boolexpr Nq
if GetUnitTypeId(GetTriggerUnit())==$7567686F and GetOwningPlayer(GetTriggerUnit())==Player(11) then
call na(GetTriggerUnit(),"|c00ff0000AAAAAAAA",.028,255,255,255)
call TriggerSleepAction(1.5)
set Me=GetUnitLoc(GetTriggerUnit())
set Np=CreateGroup()
set Nq=Condition(function mr)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),500,Nq)
call DestroyBoolExpr(Nq)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Singularity II Orange.mdl",GetLocationX(Me),GetLocationY(Me)))
set Ps=Ll
set Nw=100000
call ForGroup(Np,function m2)
call DestroyGroup(Np)
set Nq=null
set Np=null
call RemoveLocation(Me)
set Me=null
endif
endfunction
function BeE takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(80)
if GetUnitAbilityLevel(Ll,$41305A50)==0 then
call CreateUnitAtLoc(Player(10),$7567686F,Location(20970,2635),0)
call CreateUnitAtLoc(Player(10),$7567686F,Location(21900,2635),0)
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BeF takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Ll,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bd8)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Ll,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bd6)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Ll,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bd4)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Ll,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function BeC)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Ll,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function BeE)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(He,function BeD)
set He=null
endfunction
function BeG takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303754) then
return false
endif
return true
endfunction
function BeH takes nothing returns boolean
if not (RectContainsUnit(GX,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BeI takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BeJ takes nothing returns nothing
if BeG() then
set dE[1]=93
set dE[2]=80
set dE[3]=95
set dE[4]=90
set V1=Location(21434.,2676.)
call SetUnitPositionLoc(Ll,V1)
call RemoveLocation(V1)
call SetUnitInvulnerable(Ll,true)
call SetUnitOwner(Ll,Player(PLAYER_NEUTRAL_PASSIVE),true)
else
endif
if BeI() then
if BeH() then
set Xp[777]=1
set V2=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call KillUnit(GetTriggerUnit())
call RemoveLocation(V2)
else
endif
else
endif
endfunction
function BeK takes nothing returns nothing
set dM=CreateTrigger()
call TriggerRegisterLeaveRectSimple(dM,GW)
call TriggerAddAction(dM,function BeJ)
endfunction
function BeL takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[10]) then
return false
endif
return true
endfunction
function BeM takes nothing returns boolean
if not (T5==5) then
return false
endif
return true
endfunction
function BeN takes nothing returns boolean
if not (T5==4) then
return false
endif
return true
endfunction
function BeO takes nothing returns boolean
if not (T5==3) then
return false
endif
return true
endfunction
function BeP takes nothing returns boolean
if not (T5==2) then
return false
endif
return true
endfunction
function BeQ takes nothing returns boolean
if not (T5==1) then
return false
endif
return true
endfunction
function BeR takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BeS takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BeT takes nothing returns boolean
if T5!=3 then
return true
endif
return false
endfunction
function BeU takes nothing returns boolean
if not BeT() then
return false
endif
return true
endfunction
function BeV takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[10])
set Tv[10]=Tv[10]-10.
set V2=GetRectCenter(FW)
set V1=PolarProjectionBJ(V2,600.,50.)
call CreateItemLoc($4930554C,V1)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,170.)
call CreateItemLoc($4930554D,V1)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,290.)
call CreateItemLoc($4930554E,V1)
call RemoveLocation(V1)
call RemoveLocation(V2)
set T5=GetRandomInt(1,5)
if BeQ() then
call EnableTrigger(dO)
set T5=0
call CreateTextTagLocBJ("|c00ff00001|r|c0000ff002|r|c000000ff3|r",GetUnitLoc(GetTriggerUnit()),0,30.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,180.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
if BeP() then
call EnableTrigger(dP)
set T5=0
call CreateTextTagLocBJ("|c0000ff001|r|c00ff00002|r|c000000ff3|r",GetUnitLoc(GetTriggerUnit()),0,30.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,180.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
if BeO() then
call EnableTrigger(dQ)
set T5=0
call CreateTextTagLocBJ("|c000000ff1|r|c00ff00002|r|c0000ff003|r",GetUnitLoc(GetTriggerUnit()),0,30.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,180.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
if BeN() then
call EnableTrigger(dR)
set T5=0
call CreateTextTagLocBJ("|c000000ff1|r|c0000ff002|r|c00ff00003|r",GetUnitLoc(GetTriggerUnit()),0,30.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,180.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
if BeM() then
call EnableTrigger(dS)
set T5=0
call CreateTextTagLocBJ("|c0000ff001|r|c000000ff2|r|c00ff00003|r",GetUnitLoc(GetTriggerUnit()),0,30.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,180.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
endif
endif
endif
endif
endif
call TriggerSleepAction(5.5)
if BeU() then
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
set ST=GetUnitsInRectMatching(FW,Condition(function BeR))
call ForGroupBJ(ST,function BeS)
call DestroyGroup(ST)
else
endif
call EnableTrigger(GetTriggeringTrigger())
call DisableTrigger(dO)
call DisableTrigger(dP)
call DisableTrigger(dQ)
call DisableTrigger(dR)
call DisableTrigger(dS)
endfunction
function BeW takes nothing returns nothing
set dN=CreateTrigger()
call TriggerRegisterUnitEvent(dN,Kz,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dN,Condition(function BeL))
call TriggerAddAction(dN,function BeV)
endfunction
function BeX takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554C) then
return false
endif
if not (T5==0) then
return false
endif
return true
endfunction
function BeY takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554D) then
return false
endif
if not (T5==1) then
return false
endif
return true
endfunction
function BeZ takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554E) then
return false
endif
if not (T5==2) then
return false
endif
return true
endfunction
function Bea takes nothing returns nothing
if BeX() then
set T5=1
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if BeY() then
set T5=2
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if BeZ() then
set T5=3
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function Beb takes nothing returns nothing
set dO=CreateTrigger()
call DisableTrigger(dO)
call TriggerRegisterAnyUnitEventBJ(dO,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(dO,function Bea)
endfunction
function Bec takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554D) then
return false
endif
if not (T5==0) then
return false
endif
return true
endfunction
function Bed takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554C) then
return false
endif
if not (T5==1) then
return false
endif
return true
endfunction
function Bee takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554E) then
return false
endif
if not (T5==2) then
return false
endif
return true
endfunction
function Bef takes nothing returns nothing
if Bec() then
set T5=1
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if Bed() then
set T5=2
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if Bee() then
set T5=3
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function Beg takes nothing returns nothing
set dP=CreateTrigger()
call DisableTrigger(dP)
call TriggerRegisterAnyUnitEventBJ(dP,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(dP,function Bef)
endfunction
function Beh takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554E) then
return false
endif
if not (T5==0) then
return false
endif
return true
endfunction
function Bei takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554C) then
return false
endif
if not (T5==1) then
return false
endif
return true
endfunction
function Bej takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554D) then
return false
endif
if not (T5==2) then
return false
endif
return true
endfunction
function Bek takes nothing returns nothing
if Beh() then
set T5=1
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if Bei() then
set T5=2
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if Bej() then
set T5=3
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function Bel takes nothing returns nothing
set dQ=CreateTrigger()
call DisableTrigger(dQ)
call TriggerRegisterAnyUnitEventBJ(dQ,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(dQ,function Bek)
endfunction
function Bem takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554E) then
return false
endif
if not (T5==0) then
return false
endif
return true
endfunction
function Ben takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554D) then
return false
endif
if not (T5==1) then
return false
endif
return true
endfunction
function Beo takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554C) then
return false
endif
if not (T5==2) then
return false
endif
return true
endfunction
function Bep takes nothing returns nothing
if Bem() then
set T5=1
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if Ben() then
set T5=2
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if Beo() then
set T5=3
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function Beq takes nothing returns nothing
set dR=CreateTrigger()
call DisableTrigger(dR)
call TriggerRegisterAnyUnitEventBJ(dR,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(dR,function Bep)
endfunction
function Ber takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554D) then
return false
endif
if not (T5==0) then
return false
endif
return true
endfunction
function Bes takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554E) then
return false
endif
if not (T5==1) then
return false
endif
return true
endfunction
function Bet takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554C) then
return false
endif
if not (T5==2) then
return false
endif
return true
endfunction
function Beu takes nothing returns nothing
if Ber() then
set T5=1
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if Bes() then
set T5=2
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if Bet() then
set T5=3
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function Bev takes nothing returns nothing
set dS=CreateTrigger()
call DisableTrigger(dS)
call TriggerRegisterAnyUnitEventBJ(dS,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(dS,function Beu)
endfunction
function Bew takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[11]) then
return false
endif
return true
endfunction
function Bex takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[11])
set Tv[11]=Tv[11]-20.
set Rv=GetRandomReal(0,45.)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Rv=Rv+45.
set V2=GetRectCenter(FW)
set Ru[2]=GetRandomReal(Rv-2.,Rv+2.)
set Rw[2]=GetRandomReal(-5.,5.)
set Rt[2]=GetRandomReal(450.,450.)
call CreateNUnitsAtLoc(1,$6E303842,GetOwningPlayer(GetTriggerUnit()),V2,Ru[2])
set WU[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(10.,$42544C46,WU[2])
set WT[2]=PolarProjectionBJ(V2,Rt[2],Ru[2])
call SetUnitPositionLoc(WU[2],WT[2])
call RemoveLocation(V2)
call RemoveLocation(WT[2])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(1.)
set Rv=GetRandomReal(0,45.)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=18
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Rv=Rv+20.
set V2=GetRectCenter(FW)
set Ru[2]=GetRandomReal(Rv-2.,Rv+2.)
set Rw[2]=GetRandomReal(-5.,5.)
set Rt[2]=GetRandomReal(750.,750.)
call CreateNUnitsAtLoc(1,$6E303842,GetOwningPlayer(GetTriggerUnit()),V2,Ru[2])
set WU[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(10.,$42544C46,WU[2])
set WT[2]=PolarProjectionBJ(V2,Rt[2],Ru[2])
call SetUnitPositionLoc(WU[2],WT[2])
call RemoveLocation(V2)
call RemoveLocation(WT[2])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bey takes nothing returns nothing
set dT=CreateTrigger()
call TriggerRegisterUnitEvent(dT,Kz,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dT,Condition(function Bew))
call TriggerAddAction(dT,function Bex)
endfunction
function Bez takes nothing returns boolean
if not (GetUnitTypeId(GetAttacker())==$6E303842) then
return false
endif
return true
endfunction
function Be0 takes nothing returns nothing
call SetUnitLifePercentBJ(GetTriggerUnit(),GetUnitLifePercent(GetTriggerUnit())-35.)
endfunction
function Be1 takes nothing returns nothing
set dU=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dU,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(dU,Condition(function Bez))
call TriggerAddAction(dU,function Be0)
endfunction
function Be2 takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[12]) then
return false
endif
return true
endfunction
function Be3 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Be4 takes nothing returns boolean
if not (GetUnitFacing(GetEnumUnit())<=335.) then
return false
endif
if not (GetUnitFacing(GetEnumUnit())>=285.) then
return false
endif
return true
endfunction
function Be5 takes nothing returns nothing
if Be4() then
else
call KillUnit(GetEnumUnit())
endif
endfunction
function Be6 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Be7 takes nothing returns boolean
if not (GetUnitFacing(GetEnumUnit())<=245.) then
return false
endif
if not (GetUnitFacing(GetEnumUnit())>=205.) then
return false
endif
return true
endfunction
function Be8 takes nothing returns nothing
if Be7() then
else
call KillUnit(GetEnumUnit())
endif
endfunction
function Be9 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BfB takes nothing returns boolean
if not (GetUnitFacing(GetEnumUnit())<=155.) then
return false
endif
if not (GetUnitFacing(GetEnumUnit())>=115.) then
return false
endif
return true
endfunction
function BfC takes nothing returns nothing
if BfB() then
else
call KillUnit(GetEnumUnit())
endif
endfunction
function BfD takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BfE takes nothing returns boolean
if not (GetUnitFacing(GetEnumUnit())<=55.) then
return false
endif
if not (GetUnitFacing(GetEnumUnit())>=25.) then
return false
endif
return true
endfunction
function BfF takes nothing returns nothing
if BfE() then
else
call KillUnit(GetEnumUnit())
endif
endfunction
function BfG takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[12])
set Tv[12]=Tv[12]-20.
call SetUnitInvulnerable(GetTriggerUnit(),true)
call SetUnitOwner(Kz,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitPositionLoc(Kz,GetRectCenter(FW))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Desecrate_JFI.mdx",GetTriggerUnit(),"chest"))
call AddSpecialEffectTargetUnitBJ("origin",KH,"war3mapImported\\Desecrate_JFI.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.7)
set ST=GetUnitsInRectMatching(FW,Condition(function Be3))
call ForGroupBJ(ST,function Be5)
call DestroyGroup(ST)
call AddSpecialEffectTargetUnitBJ("origin",KG,"war3mapImported\\Desecrate_JFI.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.7)
set ST=GetUnitsInRectMatching(FW,Condition(function Be6))
call ForGroupBJ(ST,function Be8)
call DestroyGroup(ST)
call AddSpecialEffectTargetUnitBJ("origin",KF,"war3mapImported\\Desecrate_JFI.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.7)
set ST=GetUnitsInRectMatching(FW,Condition(function Be9))
call ForGroupBJ(ST,function BfC)
call DestroyGroup(ST)
call AddSpecialEffectTargetUnitBJ("origin",KE,"war3mapImported\\Desecrate_JFI.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.7)
set ST=GetUnitsInRectMatching(FW,Condition(function BfD))
call ForGroupBJ(ST,function BfF)
call DestroyGroup(ST)
call SetUnitInvulnerable(GetTriggerUnit(),false)
call SetUnitOwner(Kz,Player(11),true)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BfH takes nothing returns nothing
set dV=CreateTrigger()
call TriggerRegisterUnitEvent(dV,Kz,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dV,Condition(function Be2))
call TriggerAddAction(dV,function BfG)
endfunction
function BfI takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[13]) then
return false
endif
return true
endfunction
function BfJ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BfK takes nothing returns boolean
if not (UnitHasBuffBJ(GetEnumUnit(),$42303539)==true) then
return false
endif
return true
endfunction
function BfL takes nothing returns nothing
if BfK() then
call KillUnit(GetEnumUnit())
else
endif
endfunction
function BfM takes nothing returns nothing
local unit NR
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[13])
set Tv[13]=Tv[13]-5.
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Gatekeepers_Pact.mdx",GetTriggerUnit(),"chest"))
set NR=CreateUnitAtLoc(Player(10),$68303739,GetRectCenter(FW),0)
call UnitAddAbility(NR,$41304839)
call IssueImmediateOrder(NR,"howlofterror")
call m5(NR,2)
set NR=null
call TriggerSleepAction(3.)
set ST=GetUnitsInRectMatching(FW,Condition(function BfJ))
call ForGroupBJ(ST,function BfL)
call DestroyGroup(ST)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BfN takes nothing returns nothing
set dW=CreateTrigger()
call TriggerRegisterUnitEvent(dW,Kz,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dW,Condition(function BfI))
call TriggerAddAction(dW,function BfM)
endfunction
function BfO takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[14]) then
return false
endif
return true
endfunction
function BfP takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BfQ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BfR takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-9000.)
endfunction
function BfS takes nothing returns nothing
set V1=GetUnitLoc(GetEnumUnit())
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BfQ)),function BfR)
call AddSpecialEffectLocBJ(V1,"war3mapImported\\Singularity II Red.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(V1)
endfunction
function BfT takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BfU takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BfV takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-9000.)
endfunction
function BfW takes nothing returns nothing
set V1=GetUnitLoc(GetEnumUnit())
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BfU)),function BfV)
call AddSpecialEffectLocBJ(V1,"war3mapImported\\Singularity II Red.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(V1)
endfunction
function BfX takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BfY takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BfZ takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-9000.)
endfunction
function Bfa takes nothing returns nothing
set V1=GetUnitLoc(GetEnumUnit())
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BfY)),function BfZ)
call AddSpecialEffectLocBJ(V1,"war3mapImported\\Singularity II Red.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(V1)
endfunction
function Bfb takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[14])
set Tv[14]=Tv[14]-15.
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Desecrate_JFI.mdx",GetTriggerUnit(),"chest"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Desecrate_JFI.mdx",GetTriggerUnit(),"chest"))
call TriggerSleepAction(1.7)
set ST=GetUnitsInRectMatching(FW,Condition(function BfP))
call ForGroupBJ(ST,function BfS)
call DestroyGroup(ST)
call TriggerSleepAction(1.7)
set ST=GetUnitsInRectMatching(FW,Condition(function BfT))
call ForGroupBJ(ST,function BfW)
call DestroyGroup(ST)
call TriggerSleepAction(2.)
set ST=GetUnitsInRectMatching(FW,Condition(function BfX))
call ForGroupBJ(ST,function Bfa)
call DestroyGroup(ST)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bfc takes nothing returns nothing
set dX=CreateTrigger()
call TriggerRegisterUnitEvent(dX,Kz,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dX,Condition(function BfO))
call TriggerAddAction(dX,function Bfb)
endfunction
function Bfd takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-8)
endfunction
function Bfe takes nothing returns nothing
local group WC=CreateGroup()
local boolexpr dZ=Condition(function mo)
call GroupEnumUnitsInRect(WC,FW,dZ)
call ForGroup(WC,function Bfd)
call DestroyGroup(WC)
call DestroyBoolExpr(dZ)
set WC=null
set dZ=null
endfunction
function Bff takes nothing returns nothing
set dY=CreateTrigger()
call DisableTrigger(dY)
call TriggerRegisterTimerEventPeriodic(dY,5.)
call TriggerAddAction(dY,function Bfe)
endfunction
function Bfg takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bfh takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(12.)
set ST=GetUnitsInRectMatching(FW,Condition(function Bfg))
set V2=GetUnitLoc(GroupPickRandomUnit(ST))
call CreateNUnitsAtLoc(1,$6E303842,GetOwningPlayer(GetTriggerUnit()),V2,Ru[2])
set WU[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(7.,$42544C46,WU[2])
call RemoveLocation(V2)
call DestroyGroup(ST)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bfi takes nothing returns nothing
set da=CreateTrigger()
call DisableTrigger(da)
call TriggerRegisterUnitEvent(da,Kz,EVENT_UNIT_DAMAGED)
call TriggerAddAction(da,function Bfh)
endfunction
function Bfj takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==$6E736E70 then
return true
endif
return false
endfunction
function Bfk takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Me
local location Np
local group Nq
local boolexpr Ns
if GetUnitLifePercent(Hw)<=Tv[15] then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(Hw,Tv[15])
set Tv[15]=Tv[15]-4.
if Tv[15]<=50. then
set Np=Location(5091,12064)
set Me=CreateUnitAtLoc(Player(10),$6E736E70,Np,0)
call UnitAddAbility(Me,$41637269)
call UnitAddAbility(Me,$41304451)
call UnitAddAbility(Me,$41304456)
call SetUnitAbilityLevel(Me,$41304456,2)
call UnitApplyTimedLife(Me,$42544C46,200.)
call SetUnitVertexColor(Me,0,0,0,100)
set Np=Location(6687,12064)
set Me=CreateUnitAtLoc(Player(10),$6E736E70,Np,0)
call UnitAddAbility(Me,$41637269)
call UnitAddAbility(Me,$41304451)
call UnitAddAbility(Me,$41304456)
call SetUnitAbilityLevel(Me,$41304456,2)
call UnitApplyTimedLife(Me,$42544C46,200.)
call SetUnitVertexColor(Me,0,0,0,100)
else
set Np=Location(6687,12064)
set Me=CreateUnitAtLoc(Player(10),$6E736E70,Np,0)
call UnitAddAbility(Me,$41637269)
call UnitAddAbility(Me,$41304451)
call UnitAddAbility(Me,$41304456)
call SetUnitAbilityLevel(Me,$41304456,2)
call UnitApplyTimedLife(Me,$42544C46,200.)
call SetUnitVertexColor(Me,0,0,0,100)
endif
call RemoveLocation(Np)
set Np=null
set Hw=null
set Me=null
set Nq=CreateGroup()
set Ns=Condition(function Bfj)
call GroupEnumUnitsInRect(Nq,FW,Ns)
if CountUnitsInGroup(Nq)>=4 then
call SetUnitLifePercentBJ(Hw,100)
set Tv[10]=90.
set Tv[11]=85.
set Tv[12]=75.
set Tv[13]=98.
set Tv[14]=80.
set Tv[15]=97.
endif
call DestroyGroup(Nq)
call DestroyBoolExpr(Ns)
set Nq=null
set Ns=null
call EnableTrigger(GetTriggeringTrigger())
endif
set Hw=null
endfunction
function Bfl takes nothing returns nothing
set db=CreateTrigger()
call DisableTrigger(db)
call TriggerRegisterUnitEvent(db,Kz,EVENT_UNIT_DAMAGED)
call TriggerAddAction(db,function Bfk)
endfunction
function Bfm takes nothing returns nothing
local unit Hw
local integer NU=1
local integer MC
call ShowUnit(Iq,true)
set Hw=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303650,GetRectCenter(FW),0)
loop
set MC=GetRandomInt(1,13)
if MC==1 then
call AddItemToStock(Hw,$49305630,1,1)
elseif MC==2 then
call AddItemToStock(Hw,$49305632,1,1)
elseif MC==3 then
call AddItemToStock(Hw,$49305636,1,1)
elseif MC==4 then
call AddItemToStock(Hw,$49305634,1,1)
elseif MC==5 then
call AddItemToStock(Hw,$49305559,1,1)
elseif MC==6 then
call AddItemToStock(Hw,$49305556,1,1)
elseif MC==7 then
call AddItemToStock(Hw,$49305557,1,1)
elseif MC==8 then
call AddItemToStock(Hw,$49304E45,1,1)
elseif MC==9 then
call AddItemToStock(Hw,$49305A45,1,1)
endif
set NU=NU+1
exitwhen NU>1+MM
endloop
if GetUnitAbilityLevel(GetTriggerUnit(),$41304456)>=1 then
call BJDebugMsg("|c00ff00ffХард Джек мёртв!")
set NU=1
loop
set MC=GetRandomInt(1,5)
if MC==1 then
call AddItemToStock(Hw,$4930594B,1,1)
elseif MC==2 then
call AddItemToStock(Hw,$49305949,1,1)
elseif MC==3 then
call AddItemToStock(Hw,$49305948,1,1)
elseif MC==4 then
call AddItemToStock(Hw,$4930594C,1,1)
endif
set NU=NU+1
exitwhen NU>1+MM
endloop
endif
set Hw=null
call DisableTrigger(dd)
endfunction
function Bfn takes nothing returns nothing
set dc=CreateTrigger()
call TriggerRegisterUnitEvent(dc,Kz,EVENT_UNIT_DEATH)
call TriggerAddAction(dc,function Bfm)
endfunction
function Bfo takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[7]) then
return false
endif
return true
endfunction
function Bfp takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[7])
set Tv[7]=Tv[7]-15.
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitFacing(GetTriggerUnit(),180.)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(Lv,true)
call TriggerSleepAction(3.)
set V2=GetRectCenter(Fk)
call CreateNUnitsAtLoc(2,$65303058,Player(10),V2,bj_UNIT_FACING)
call CreateNUnitsAtLoc(3,$65303043,Player(10),V2,bj_UNIT_FACING)
call CreateNUnitsAtLoc(3,$65303059,Player(10),V2,bj_UNIT_FACING)
call RemoveLocation(V2)
call TriggerSleepAction(20.)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(Lv,false)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bfq takes nothing returns nothing
set de=CreateTrigger()
call TriggerRegisterUnitEvent(de,Lv,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(de,Condition(function Bfo))
call TriggerAddAction(de,function Bfp)
endfunction
function Bfr takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[8]) then
return false
endif
return true
endfunction
function Bfs takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[8])
set Tv[8]=Tv[8]-33.
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitFacing(GetTriggerUnit(),180.)
call SetUnitInvulnerable(Lv,true)
call PauseUnit(GetTriggerUnit(),true)
call TriggerSleepAction(3.)
set V2=GetRectCenter(Fk)
set V1=PolarProjectionBJ(V2,400.,90.)
set Ud=PolarProjectionBJ(V2,400.,270.)
call CreateNUnitsAtLoc(1,$6530305A,Player(10),V1,bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$6530305A,Player(10),Ud,bj_UNIT_FACING)
call RemoveLocation(V2)
call RemoveLocation(V1)
call RemoveLocation(Ud)
call TriggerSleepAction(15.)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(Lv,false)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bft takes nothing returns nothing
set df=CreateTrigger()
call TriggerRegisterUnitEvent(df,Lv,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(df,Condition(function Bfr))
call TriggerAddAction(df,function Bfs)
endfunction
function Bfu takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[9]) then
return false
endif
return true
endfunction
function Bfv takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[9])
set Tv[9]=Tv[9]-30.
call SetUnitPositionLoc(Lv,GetRectCenter(Fo))
call SetUnitFacing(GetTriggerUnit(),180.)
call SetUnitInvulnerable(Lv,true)
call PauseUnit(GetTriggerUnit(),true)
call CreateTextTagUnitBJ("Он здесь!",GetTriggerUnit(),0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call TriggerSleepAction(3.)
set V2=GetRectCenter(Fk)
call CreateNUnitsAtLoc(1,$65303130,Player(10),V2,bj_UNIT_FACING)
call RemoveLocation(V2)
call TriggerSleepAction(10.)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(Lv,false)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bfw takes nothing returns nothing
set dg=CreateTrigger()
call TriggerRegisterUnitEvent(dg,Lv,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dg,Condition(function Bfu))
call TriggerAddAction(dg,function Bfv)
endfunction
function Bfx takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bfy takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(5.)
if Bfx() then
call SetUnitVertexColor(GetTriggerUnit(),255,0,255,255)
call TriggerSleepAction(2)
call UnitAddAbilityBJ($41313439,GetTriggerUnit())
call SetUnitVertexColor(GetTriggerUnit(),0,0,0,255)
call TriggerSleepAction(6.)
call UnitRemoveAbilityBJ($41313439,GetTriggerUnit())
call SetUnitVertexColor(GetTriggerUnit(),255,255,255,255)
call TriggerSleepAction(15.)
call EnableTrigger(GetTriggeringTrigger())
else
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bfz takes nothing returns nothing
set dh=CreateTrigger()
call TriggerRegisterUnitEvent(dh,Lv,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dh,function Bfy)
endfunction
function Bf0 takes nothing returns nothing
local integer MC=0
local item Me
call DisableTrigger(cl)
call ModifyGateBJ(bj_GATEOPERATION_CLOSE,HZ)
loop
if nH(MV[MC],$49303448) then
call RemoveItem(nI(MV[MC],$49303448))
set Me=nJ($6C757265,MV[MC])
call SetItemUserData(Me,GetPlayerId(GetOwningPlayer(MV[MC]))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",MV[MC],"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",MV[MC],"chest"))
set Me=null
endif
set MC=MC+1
exitwhen MC>7
endloop
endfunction
function Bf1 takes nothing returns nothing
set di=CreateTrigger()
call TriggerRegisterUnitEvent(di,Lv,EVENT_UNIT_DEATH)
call TriggerAddAction(di,function Bf0)
endfunction
function Bf2 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(5.)
set Ud=GetRandomLocInRect(Fd)
call CreateNUnitsAtLoc(1,$6E30374E,Player(10),Ud,bj_UNIT_FACING)
call RemoveLocation(Ud)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bf3 takes nothing returns nothing
set dj=CreateTrigger()
call TriggerRegisterUnitEvent(dj,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dj,function Bf2)
endfunction
function Bf4 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
set Ud=GetRandomLocInRect(Fd)
call CreateNUnitsAtLoc(1,$68303539,Player(10),Ud,bj_UNIT_FACING)
call RemoveLocation(Ud)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bf5 takes nothing returns nothing
set dk=CreateTrigger()
call TriggerRegisterUnitEvent(dk,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dk,function Bf4)
endfunction
function Bf6 takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[0]) then
return false
endif
return true
endfunction
function Bf7 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bf8 takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V2)
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-25.)
endfunction
function Bf9 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BgB takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V2)
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-25.)
endfunction
function BgC takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BgD takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V2)
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-25.)
endfunction
function BgE takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BgF takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V2)
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-25.)
endfunction
function BgG takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[0])
set Tv[0]=Tv[0]-25.
set V2=Location(-830.,-23730.)
call SetUnitVertexColor(GetTriggerUnit(),255,0,255,255)
set ST=GetUnitsInRangeOfLocMatching(1200.,V2,Condition(function Bf7))
call ForGroupBJ(ST,function Bf8)
call RemoveLocation(V2)
call DestroyGroup(ST)
call TriggerSleepAction(1.)
set V2=Location(-830.,-23730.)
set ST=GetUnitsInRangeOfLocMatching(1200.,V2,Condition(function Bf9))
call ForGroupBJ(ST,function BgB)
call RemoveLocation(V2)
call DestroyGroup(ST)
call TriggerSleepAction(1.)
set V2=Location(-830.,-23730.)
set ST=GetUnitsInRangeOfLocMatching(1200.,V2,Condition(function BgC))
call ForGroupBJ(ST,function BgD)
call RemoveLocation(V2)
call DestroyGroup(ST)
call TriggerSleepAction(1.)
set V2=Location(-830.,-23730.)
set ST=GetUnitsInRangeOfLocMatching(1200.,V2,Condition(function BgE))
call ForGroupBJ(ST,function BgF)
call RemoveLocation(V2)
call DestroyGroup(ST)
call SetUnitVertexColor(GetTriggerUnit(),255,255,255,255)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BgH takes nothing returns nothing
set dl=CreateTrigger()
call TriggerRegisterUnitEvent(dl,LH,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dl,Condition(function Bf6))
call TriggerAddAction(dl,function BgG)
endfunction
function BgI takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BgJ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(15.)
if BgI() then
set Ud=GetRectCenter(Fc)
call CreateNUnitsAtLoc(1,$6E30374D,Player(6),Ud,bj_UNIT_FACING)
call IssueTargetOrderBJ(LG,"attack",GetLastCreatedUnit())
call UnitApplyTimedLifeBJ(6.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Ud)
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BgK takes nothing returns nothing
set dm=CreateTrigger()
call TriggerRegisterUnitEvent(dm,LG,EVENT_UNIT_ATTACKED)
call TriggerAddAction(dm,function BgJ)
endfunction
function BgL takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E30374D) then
return false
endif
if not (GetUnitTypeId(GetAttacker())==$6E303749) then
return false
endif
return true
endfunction
function BgM takes nothing returns nothing
call RemoveUnit(GetTriggerUnit())
call SetUnitLifePercentBJ(GetAttacker(),100)
endfunction
function BgN takes nothing returns nothing
set dn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dn,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(dn,Condition(function BgL))
call TriggerAddAction(dn,function BgM)
endfunction
function BgO takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[2]) then
return false
endif
return true
endfunction
function BgP takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[2])
set Tv[2]=Tv[2]-25.
call SetUnitInvulnerable(LG,true)
call SetUnitOwner(LG,Player(10),true)
set Ud=GetRectCenter(FZ)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call SetUnitFacing(GetTriggerUnit(),I2R(GetRandomInt(1,360)))
call IssuePointOrderLocBJ(GetTriggerUnit(),"carrionswarm",Ud)
call RemoveLocation(Ud)
call TriggerSleepAction(2.)
set Ud=GetRectCenter(FZ)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call SetUnitFacing(GetTriggerUnit(),I2R(GetRandomInt(1,360)))
call IssuePointOrderLocBJ(GetTriggerUnit(),"carrionswarm",Ud)
call RemoveLocation(Ud)
call TriggerSleepAction(2.)
set Ud=GetRectCenter(FZ)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call SetUnitFacing(GetTriggerUnit(),I2R(GetRandomInt(1,360)))
call IssuePointOrderLocBJ(GetTriggerUnit(),"carrionswarm",Ud)
call RemoveLocation(Ud)
call TriggerSleepAction(2.)
set Ud=GetRectCenter(FZ)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call SetUnitFacing(GetTriggerUnit(),I2R(GetRandomInt(1,360)))
call IssuePointOrderLocBJ(GetTriggerUnit(),"carrionswarm",Ud)
call RemoveLocation(Ud)
call TriggerSleepAction(2.)
call SetUnitInvulnerable(LG,false)
call SetUnitOwner(LG,Player(11),true)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BgQ takes nothing returns nothing
set do=CreateTrigger()
call TriggerRegisterUnitEvent(do,LG,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(do,Condition(function BgO))
call TriggerAddAction(do,function BgP)
endfunction
function BgR takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=40) then
return false
endif
return true
endfunction
function BgS takes nothing returns nothing
if BgR() then
set Ud=GetRectCenter(FX)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ud,0)
call SetUnitLifePercentBJ(Lm,100)
call RemoveLocation(Ud)
else
call CreateTextTagUnitBJ("Вход с |c00ff000040|r уровня!",GetTriggerUnit(),0,15.,100.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
endfunction
function BgT takes nothing returns nothing
set Us=CreateTrigger()
call DisableTrigger(Us)
call TriggerRegisterEnterRectSimple(Us,GG)
call TriggerAddAction(Us,function BgS)
endfunction
function BgU takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
set Ud=GetUnitLoc(GetTriggerUnit())
call IssuePointOrderLocBJ(GetTriggerUnit(),"carrionswarm",Ud)
call RemoveLocation(Ud)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BgV takes nothing returns nothing
set dp=CreateTrigger()
call TriggerRegisterUnitEvent(dp,Lm,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dp,function BgU)
endfunction
function BgW takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BgX takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set ST=GetUnitsInRectMatching(FX,Condition(function BgW))
call IssueTargetOrderBJ(GroupPickRandomUnit(GetUnitsOfTypeIdAll($68303537)),"drain",GroupPickRandomUnit(ST))
call TriggerSleepAction(2)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BgY takes nothing returns nothing
set dq=CreateTrigger()
call TriggerRegisterUnitEvent(dq,Lm,EVENT_UNIT_ATTACKED)
call TriggerAddAction(dq,function BgX)
endfunction
function BgZ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bga takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Tf[0])) then
return false
endif
return true
endfunction
function Bgb takes nothing returns nothing
if Bga() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Tf[0]))
set Tf[0]=Tf[0]-5
call CreateTextTagUnitBJ("Печать!",GetTriggerUnit(),0,15.,0.,100.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set ST=GetUnitsInRectMatching(FL,Condition(function BgZ))
set ds=GroupPickRandomUnit(ST)
call SetUnitVertexColor(ds,0,255,255,100)
call DestroyGroup(ST)
call TriggerSleepAction(2)
set V1=GetUnitLoc(ds)
call CreateNUnitsAtLoc(1,$6E303737,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call IssueImmediateOrder(GetLastCreatedUnit(),"fanofknives")
call RemoveLocation(V1)
call TriggerSleepAction(2)
set V1=GetUnitLoc(ds)
call CreateNUnitsAtLoc(1,$6E303737,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call IssueImmediateOrder(GetLastCreatedUnit(),"fanofknives")
call RemoveLocation(V1)
call TriggerSleepAction(2)
set V1=GetUnitLoc(ds)
call CreateNUnitsAtLoc(1,$6E303737,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call IssueImmediateOrder(GetLastCreatedUnit(),"fanofknives")
call RemoveLocation(V1)
call TriggerSleepAction(2)
set V1=GetUnitLoc(ds)
call CreateNUnitsAtLoc(1,$6E303737,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call IssueImmediateOrder(GetLastCreatedUnit(),"fanofknives")
call RemoveLocation(V1)
call TriggerSleepAction(2)
set V1=GetUnitLoc(ds)
call CreateNUnitsAtLoc(1,$6E303737,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call IssueImmediateOrder(GetLastCreatedUnit(),"fanofknives")
call RemoveLocation(V1)
call SetUnitVertexColor(ds,255,255,255,255)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bgc takes nothing returns nothing
set dr=CreateTrigger()
call TriggerRegisterUnitEvent(dr,K2,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dr,function Bgb)
endfunction
function Bgd takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bge takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Tf[1])) then
return false
endif
return true
endfunction
function Bgf takes nothing returns nothing
if Bge() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Tf[1]))
set Tf[1]=Tf[1]-20
set ST=GetUnitsInRectMatching(FL,Condition(function Bgd))
set V1=GetUnitLoc(GroupPickRandomUnit(ST))
call CreateNUnitsAtLoc(1,$6E303734,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set V1=GetUnitLoc(GroupPickRandomUnit(ST))
call CreateNUnitsAtLoc(1,$6E303735,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set V1=GetUnitLoc(GroupPickRandomUnit(ST))
call CreateNUnitsAtLoc(1,$6E303733,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
set V1=GetUnitLoc(GroupPickRandomUnit(ST))
call CreateNUnitsAtLoc(1,$6E303732,Player(10),V1,bj_UNIT_FACING)
call RemoveLocation(V1)
call DestroyGroup(ST)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bgg takes nothing returns nothing
set dt=CreateTrigger()
call TriggerRegisterUnitEvent(dt,K2,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dt,function Bgf)
endfunction
function Bgh takes nothing returns boolean
if Tf[2]==35 then
return true
endif
if Tf[2]==20 then
return true
endif
if Tf[2]==5 then
return true
endif
return false
endfunction
function Bgi takes nothing returns boolean
if not Bgh() then
return false
endif
return true
endfunction
function Bgj takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Tf[2])) then
return false
endif
return true
endfunction
function Bgk takes nothing returns nothing
if Bgj() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Tf[2]))
set Tf[2]=Tf[2]-15
set V1=GetRandomLocInRect(FQ)
call CreateNUnitsAtLoc(1,$6E303736,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(5.,$42544C46,GetLastCreatedUnit())
call IssuePointOrderLoc(GetLastCreatedUnit(),"impale",GetUnitLoc(GetLastCreatedUnit()))
call RemoveLocation(V1)
if Bgi() then
set V1=GetRandomLocInRect(FQ)
call CreateNUnitsAtLoc(1,$6E303736,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(5.,$42544C46,GetLastCreatedUnit())
call IssuePointOrderLoc(GetLastCreatedUnit(),"impale",GetUnitLoc(GetLastCreatedUnit()))
call RemoveLocation(V1)
else
endif
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bgl takes nothing returns nothing
set du=CreateTrigger()
call TriggerRegisterUnitEvent(du,K2,EVENT_UNIT_DAMAGED)
call TriggerAddAction(du,function Bgk)
endfunction
function Bgm takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bgn takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6E303638
endfunction
function Bgo takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6E303639
endfunction
function Bgp takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6E303637
endfunction
function Bgq takes nothing returns boolean
return GetBooleanOr(Bgo(),Bgp())
endfunction
function Bgr takes nothing returns boolean
return GetBooleanOr(Bgn(),Bgq())
endfunction
function Bgs takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bgt takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=51) then
return false
endif
return true
endfunction
function Bgu takes nothing returns nothing
local location Me
if Bgt() then
set Me=GetRectCenter(Ed)
call SetUnitPositionLoc(GetTriggerUnit(),Me)
call RemoveLocation(Me)
call SetUnitOwner(L1,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L1,true)
call SetUnitLifePercentBJ(L1,100.)
set ST=GetUnitsInRectMatching(Ed,Condition(function Bgr))
call ForGroupBJ(ST,function Bgs)
call DestroyGroup(ST)
else
call DisplayTextToForce(GetPlayersAll(),"Для входа требуется 51 уровень!")
endif
set Me=null
endfunction
function Bgv takes nothing returns nothing
set Uz=CreateTrigger()
call DisableTrigger(Uz)
call TriggerRegisterEnterRectSimple(Uz,Ea)
call TriggerAddCondition(Uz,Condition(function Bgm))
call TriggerAddAction(Uz,function Bgu)
endfunction
function Bgw takes nothing returns nothing
local location dw
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
set dw=GetRandomLocInRect(Ed)
call CreateNUnitsAtLoc(1,$6E303641,Player(10),dw,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(25.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(dw)
call EnableTrigger(GetTriggeringTrigger())
set dw=null
endfunction
function Bgx takes nothing returns nothing
set dv=CreateTrigger()
call TriggerRegisterUnitEvent(dv,L1,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dv,function Bgw)
endfunction
function Bgy takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E303548 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303638 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303639 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303637 then
return true
endif
return false
endfunction
function Bgz takes nothing returns boolean
if not Bgy() then
return false
endif
return true
endfunction
function Bg0 takes nothing returns nothing
call IssuePointOrderLoc(GetAttackedUnitBJ(),"impale",GetUnitLoc(GetAttacker()))
endfunction
function Bg1 takes nothing returns nothing
set dx=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dx,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(dx,Condition(function Bgz))
call TriggerAddAction(dx,function Bg0)
endfunction
function Bg2 takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bg3 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
if Bg2() then
call ShowUnit(L1,false)
call CreateNUnitsAtLoc(1,$6E303638,Player(10),GetRandomLocInRect(Ed),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$6E303638,Player(10),GetRandomLocInRect(Ed),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$6E303638,Player(10),GetRandomLocInRect(Ed),bj_UNIT_FACING)
call TriggerSleepAction(10.)
call ShowUnit(L1,true)
else
endif
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bg4 takes nothing returns nothing
set dy=CreateTrigger()
call TriggerRegisterUnitEvent(dy,L1,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dy,function Bg3)
endfunction
function Bg5 takes nothing returns nothing
if RectContainsUnit(GW,MV[GetConvertedPlayerId(GetTriggerPlayer())-1])==true then
if GetOwningPlayer(Ll)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(Ll,false)
call SetUnitOwner(Ll,Player(11),true)
endif
endif
if RectContainsUnit(BS,MV[GetConvertedPlayerId(GetTriggerPlayer())-1])==true then
if GetOwningPlayer(LC)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(LC,false)
call SetUnitOwner(LC,Player(11),true)
endif
endif
if RectContainsUnit(BD,MV[GetConvertedPlayerId(GetTriggerPlayer())-1])==true then
if GetOwningPlayer(K7)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(K7,false)
call SetUnitOwner(K7,Player(11),true)
endif
endif
if RectContainsUnit(J,MV[GetConvertedPlayerId(GetTriggerPlayer())-1])==true then
if GetOwningPlayer(Kx)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(Kx,false)
call SetUnitOwner(Kx,Player(11),true)
endif
endif
if RectContainsUnit(Gd,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(K3)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(K3,false)
call SetUnitOwner(K3,Player(11),true)
endif
endif
if RectContainsUnit(GJ,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Ky)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Ky,Player(11),true)
call SetUnitInvulnerable(Ky,false)
endif
endif
if RectContainsUnit(FW,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Kz)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Kz,Player(11),true)
call SetUnitInvulnerable(Kz,false)
endif
endif
if RectContainsUnit(Fk,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Lv)==Player(PLAYER_NEUTRAL_PASSIVE) then
call ModifyGateBJ(bj_GATEOPERATION_CLOSE,HZ)
call ModifyGateBJ(bj_GATEOPERATION_CLOSE,HY)
call SetUnitOwner(Lv,Player(11),true)
call SetUnitInvulnerable(Lv,false)
endif
endif
if RectContainsUnit(EK,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Lt)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Lt,Player(11),true)
call SetUnitInvulnerable(Lt,false)
endif
endif
if RectContainsUnit(FH,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Lq)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Lq,Player(11),true)
call SetUnitInvulnerable(Lq,false)
endif
endif
if RectContainsUnit(Ey,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Lu)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Lu,Player(11),true)
call SetUnitInvulnerable(Lu,false)
endif
endif
if RectContainsUnit(FL,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(K2)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(K2,Player(11),true)
call SetUnitInvulnerable(K2,false)
endif
endif
if RectContainsUnit(Ed,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(L1)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(L1,Player(11),true)
call SetUnitInvulnerable(L1,false)
endif
endif
if RectContainsUnit(D6,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(L0)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(L0,false)
call SetUnitOwner(L0,Player(11),true)
endif
endif
if RectContainsUnit(D7,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(L7)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(L7,false)
call SetUnitOwner(L7,Player(11),true)
call CreateUnit(Player(10),$75303056,-15100,-21300,90)
call CreateUnit(Player(10),$75303057,-15100,-21300,90)
endif
endif
if RectContainsUnit(Cv,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LY)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(LY,Player(11),true)
call SetUnitInvulnerable(LY,false)
endif
endif
if RectContainsUnit(DP,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Ln)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(Ln,false)
call SetUnitOwner(Ln,Player(11),true)
endif
endif
if RectContainsUnit(D2,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(L6)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(L6,false)
call SetUnitOwner(L6,Player(11),true)
endif
endif
if RectContainsUnit(Gt,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LT)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(LT,false)
call SetUnitOwner(LT,Player(11),true)
endif
endif
if RectContainsUnit(DW,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Lw)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(Lw,false)
call SetUnitOwner(Lw,Player(11),true)
endif
endif
if RectContainsUnit(Cs,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LW)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(LW,false)
call SetUnitOwner(LW,Player(11),true)
endif
endif
if RectContainsUnit(EO,MV[GetPlayerId(GetTriggerPlayer())])==true then
call SetUnitInvulnerable(Lk,false)
call SetUnitOwner(Lk,Player(11),true)
call SetUnitInvulnerable(Vf[2],false)
call SetUnitOwner(Vf[2],Player(11),true)
endif
if RectContainsUnit(EN,MV[GetPlayerId(GetTriggerPlayer())])==true then
call SetUnitInvulnerable(Lj,false)
call SetUnitOwner(Lj,Player(11),true)
call SetUnitInvulnerable(Vf[1],false)
call SetUnitOwner(Vf[1],Player(11),true)
endif
if RectContainsUnit(Gz,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LB)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(LB,false)
call SetUnitOwner(LB,Player(11),true)
endif
endif
if RectContainsUnit(Gx,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(K5)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(K5,false)
call SetUnitOwner(K5,Player(11),true)
endif
endif
if RectContainsUnit(Gu,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LE)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(LE,Player(11),true)
call SetUnitInvulnerable(LE,false)
endif
endif
if RectContainsUnit(Dj,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LJ)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(LJ,Player(11),true)
call SetUnitInvulnerable(LJ,false)
endif
endif
if RectContainsUnit(B7,MV[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LS)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(LS,Player(11),true)
call SetUnitInvulnerable(LS,false)
endif
endif
endfunction
function Bg6 takes nothing returns nothing
local trigger dz=CreateTrigger()
call TriggerRegisterPlayerEvent(dz,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(dz,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(dz,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(dz,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(dz,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(dz,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(dz,Player(6),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(dz,Player(7),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(dz,function Bg5)
set dz=null
endfunction
function Bg7 takes nothing returns nothing
local integer MC=0
local integer Pf=0
loop
if GetPlayerSlotState(Player(MC))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(Player(MC))==MAP_CONTROL_USER then
set Pf=Pf+1
endif
set MC=MC+1
exitwhen MC>8
endloop
if Pf<2 then
endif
endfunction
function Bg8 takes nothing returns nothing
set d0=CreateTrigger()
call TriggerRegisterUnitEvent(d0,Ln,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d0,Lw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d0,K5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d0,LB,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d0,L6,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d0,L0,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d0,Lu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d0,Lt,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d0,Lq,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d0,LR,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d0,Lv,EVENT_UNIT_DEATH)
call TriggerAddAction(d0,function Bg7)
endfunction
function Bg9 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305A54) then
return false
endif
return true
endfunction
function BhB takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305A55) then
return false
endif
return true
endfunction
function BhC takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305652) then
return false
endif
return true
endfunction
function BhD takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305A53) then
return false
endif
return true
endfunction
function BhE takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305531) then
return false
endif
return true
endfunction
function BhF takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304A51) then
return false
endif
return true
endfunction
function BhG takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4930414C) then
return false
endif
return true
endfunction
function BhH takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4930414B) then
return false
endif
return true
endfunction
function BhI takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4930414A) then
return false
endif
return true
endfunction
function BhJ takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304149) then
return false
endif
return true
endfunction
function BhK takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304148) then
return false
endif
return true
endfunction
function BhL takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304132) then
return false
endif
return true
endfunction
function BhM takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303858) then
return false
endif
return true
endfunction
function BhN takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303859) then
return false
endif
return true
endfunction
function BhO takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4930344F) then
return false
endif
return true
endfunction
function BhP takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303450) then
return false
endif
return true
endfunction
function BhQ takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303257) then
return false
endif
return true
endfunction
function BhR takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303258) then
return false
endif
return true
endfunction
function BhS takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303255) then
return false
endif
return true
endfunction
function BhT takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303256) then
return false
endif
return true
endfunction
function BhU takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303251) then
return false
endif
return true
endfunction
function BhV takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303254) then
return false
endif
return true
endfunction
function BhW takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303252) then
return false
endif
return true
endfunction
function BhX takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303253) then
return false
endif
return true
endfunction
function BhY takes nothing returns nothing
if Bg9() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Джек|r")
call RemoveUnit(GetTriggerUnit())
call EnableTrigger(dd)
call AddSpecialEffectLocBJ(GetRectCenter(Ga),"war3mapImported\\Void Teleport To.mdx")
else
endif
if BhB() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса Джек|r")
call RemoveUnit(GetTriggerUnit())
call EnableTrigger(dd)
call AddSpecialEffectLocBJ(GetRectCenter(Ga),"war3mapImported\\Void Teleport To.mdx")
call SetPlayerTechResearchedSwap($52303043,2,Player(10))
call SetPlayerTechResearchedSwap($52303049,3,Player(11))
call UnitAddAbility(Kz,$41304456)
call SetUnitAbilityLevel(Kz,$41304456,2)
call UnitAddAbility(Kz,$4131345A)
call EnableTrigger(dY)
call EnableTrigger(da)
call EnableTrigger(db)
else
endif
if BhC() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Асмодеус|r")
call RemoveUnit(Id)
set d2[8]=1
else
endif
if BhD() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса Асмодеус|r")
call RemoveUnit(Id)
set d2[8]=2
call SetPlayerTechResearchedSwap($52303043,2,Player(10))
call SetPlayerTechResearchedSwap($52303032,5,Player(11))
call UnitAddAbility(Ky,$41304456)
call SetUnitAbilityLevel(Ky,$41304456,2)
call SetUnitAbilityLevel(Kz,$41304A43,2)
call SetUnitAbilityLevel(Kz,$41304A42,2)
call UnitAddAbility(Ky,$4131345A)
call EnableTrigger(d3)
else
endif
if BhE() then
call EnableTrigger(d4)
call EnableTrigger(d5)
call EnableTrigger(d6)
call EnableTrigger(d7)
call EnableTrigger(d8)
set TU[1]=80
set TU[2]=75
set TU[3]=10
set TU[4]=95
set TU[5]=90
call ShowUnit(Js,false)
call SetUnitInvulnerable(Js,true)
set V2=GetRectCenter(D6)
call SetUnitPositionLocFacingBJ(L0,V2,270.)
call SetUnitOwner(L0,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L0,true)
call ShowUnit(L0,true)
call RemoveLocation(V2)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса Ассир|r")
call RemoveUnit(JW)
call UnitAddAbilityBJ($41313748,L0)
call UnitAddAbilityBJ($41303435,L0)
call UnitAddAbilityBJ($41313644,L0)
call UnitAddAbilityBJ($41305937,L0)
call SetUnitAbilityLevel(L0,$41313451,2)
call SetUnitAbilityLevel(L0,$41313452,2)
call SetPlayerTechResearchedSwap($52303048,3,Player(11))
else
endif
if BhF() then
call EnableTrigger(d9)
call EnableTrigger(eB)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Ассир|r")
call RemoveUnit(JW)
set TU[1]=80
set TU[2]=75
set TU[3]=10
set TU[4]=95
set TU[5]=90
call ShowUnit(Js,false)
call SetUnitInvulnerable(Js,true)
set V2=GetRectCenter(D6)
call SetUnitPositionLocFacingBJ(L0,V2,270.)
call SetUnitOwner(L0,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L0,true)
call RemoveLocation(V2)
set YU[99]=GetRectCenter(Gs)
else
endif
if BhG() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Маркиз|r")
call UnitAddAbilityBJ($41436374,LS)
call UnitAddAbilityBJ($41304454,LS)
call UnitAddAbilityBJ($5330304A,LS)
call SetUnitAbilityLevel(LS,$41304452,3)
call UnitAddAbility(LS,$41304F4B)
call UnitAddAbility(LS,$4131394F)
call UnitAddAbility(LS,$41305655)
call UnitAddAbility(LS,$41313350)
call SetUnitAbilityLevel(LS,$4131394F,7)
call SetPlayerTechResearchedSwap($52303047,4,Player(11))
call SetPlayerTechResearchedSwap($52303046,1,Player(11))
call RemoveUnit(IN)
call EnableTrigger(eC)
call EnableTrigger(eD)
else
endif
if BhH() then
call SetUnitOwner(LJ,Player(11),true)
call EnableTrigger(eE)
call EnableTrigger(eF)
call SetUnitAbilityLevel(LJ,$41303647,2)
call UnitAddAbility(LJ,$41313350)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Кай|r")
call UnitAddAbilityBJ($41303648,LJ)
call UnitAddAbilityBJ($41304449,LJ)
call UnitAddAbilityBJ($4130444B,LJ)
call UnitAddAbilityBJ($41436365,LJ)
call UnitAddAbilityBJ($4130444C,LJ)
call UnitAddAbilityBJ($41436374,LJ)
call UnitAddAbilityBJ($5330304A,LJ)
call SetPlayerTechResearchedSwap($52303044,3,Player(11))
call SetPlayerTechResearchedSwap($52303035,1,Player(11))
call SetUnitVertexColor(LJ,255,0,0,150)
call CreateNUnitsAtLoc(1,$68303041,Player(11),GetRectCenter(Dj),bj_UNIT_FACING)
call RemoveUnit(H6)
call SetUnitInvulnerable(LJ,false)
call ShowUnitShow(LJ)
call PauseUnitBJ(false,LJ)
else
endif
if BhI() then
call EnableTrigger(eG)
call EnableTrigger(eH)
call EnableTrigger(eI)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Узуран|r")
call SetUnitAbilityLevelSwapped($4130314A,LC,3)
call UnitAddAbilityBJ($41304358,LC)
call UnitAddAbilityBJ($5330304A,LC)
call UnitAddAbilityBJ($41313350,LC)
call SetPlayerTechResearchedSwap($52303039,2,Player(11))
call SetPlayerTechResearchedSwap($52303038,1,Player(11))
call SetUnitVertexColor(LC,255,0,255,100)
call RemoveUnit(H4)
call SetUnitInvulnerable(LC,false)
call ShowUnitShow(LC)
call PauseUnitBJ(false,LC)
call SetUnitOwner(LC,Player(11),true)
else
endif
if BhJ() then
call EnableTrigger(eJ)
set d2[3]=3
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Ксерон|r")
call UnitAddAbilityBJ($4130384C,K7)
call UnitAddAbilityBJ($41304352,K7)
call UnitAddAbilityBJ($5330304A,K7)
call UnitAddAbilityBJ($41304D33,K7)
call SetPlayerTechResearchedSwap($52303041,2,Player(11))
call SetPlayerTechResearchedSwap($52303036,1,Player(11))
call SetUnitVertexColor(K7,0,0,0,100)
call CreateNUnitsAtLoc(1,$6E303139,Player(11),GetRectCenter(i),bj_UNIT_FACING)
call RemoveUnit(H3)
call SetUnitInvulnerable(K7,false)
call ShowUnitShow(K7)
call PauseUnitBJ(false,K7)
call SetUnitOwner(K7,Player(11),true)
else
endif
if BhK() then
set d2[2]=3
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Матерь Пауков|r")
call UnitAddAbilityBJ($4130434B,Kx)
call UnitAddAbilityBJ($4161736C,Kx)
call UnitAddAbilityBJ($41304D32,Kx)
call SetPlayerTechResearchedSwap($52303037,1,Player(11))
call SetPlayerTechResearchedSwap($52303042,2,Player(11))
call UnitAddAbilityBJ($41303050,Kx)
call UnitAddAbilityBJ($4130434C,Kx)
call UnitAddAbilityBJ($41303958,Kx)
call UnitAddAbilityBJ($4130504B,Kx)
call UnitAddAbilityBJ($53303046,Kx)
call RemoveUnit(H1)
call SetUnitVertexColorBJ(Kx,0.,0.,100,50.)
else
endif
if BhL() then
set d2[1]=3
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Разрушитель Природы|r")
call SetPlayerTechResearchedSwap($52303034,1,Player(11))
call SetPlayerTechResearchedSwap($52303043,2,Player(11))
call ne(K3,100)
call UnitAddAbility(K3,$41304D31)
call UnitAddAbility(K3,$41304E45)
call RemoveUnit(H0)
else
endif
if BhM() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Маркиз|r")
call RemoveUnit(IN)
call EnableTrigger(eK)
call EnableTrigger(eL)
else
endif
if BhN() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Маркиз|r")
call UnitAddAbilityBJ($4130384D,LS)
call UnitAddAbilityBJ($4130384F,LS)
call UnitAddAbilityBJ($41436374,LS)
call SetUnitAbilityLevel(LS,$41304452,2)
call RemoveUnit(IN)
call EnableTrigger(eM)
call EnableTrigger(eN)
else
endif
if BhO() then
call EnableTrigger(eO)
call EnableTrigger(eP)
call EnableTrigger(eQ)
call EnableTrigger(eR)
call SetUnitInvulnerable(LJ,false)
call ShowUnitShow(LJ)
call PauseUnitBJ(false,LJ)
call SetUnitOwner(LJ,Player(11),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Кай|r")
call RemoveUnit(H6)
else
endif
if BhP() then
call EnableTrigger(eS)
call EnableTrigger(eT)
call EnableTrigger(eU)
call EnableTrigger(eV)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Кай|r")
call UnitAddAbilityBJ($4130384D,LJ)
call UnitAddAbilityBJ($4130384E,LJ)
call UnitAddAbilityBJ($41303648,LJ)
call CreateNUnitsAtLoc(1,$68303041,Player(11),GetRectCenter(Dj),bj_UNIT_FACING)
call RemoveUnit(H6)
call SetUnitInvulnerable(LJ,false)
call ShowUnitShow(LJ)
call PauseUnitBJ(false,LJ)
call SetUnitOwner(LJ,Player(11),true)
else
endif
if BhQ() then
call EnableTrigger(eW)
call EnableTrigger(Zp)
call SetUnitInvulnerable(LC,false)
call ShowUnitShow(LC)
call PauseUnitBJ(false,LC)
call SetUnitOwner(LC,Player(11),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Узуран|r")
call RemoveUnit(H4)
else
endif
if BhR() then
call EnableTrigger(Zq)
call EnableTrigger(eX)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Узуран|r")
call UnitAddAbilityBJ($4130384D,LC)
call CreateNUnitsAtLoc(1,$6E303139,Player(11),GetRectCenter(x),bj_UNIT_FACING)
call RemoveUnit(H4)
call SetUnitInvulnerable(LC,false)
call ShowUnitShow(LC)
call PauseUnitBJ(false,LC)
call SetUnitOwner(LC,Player(11),true)
call SetUnitAbilityLevelSwapped($4130314A,LC,2)
else
endif
if BhS() then
set d2[3]=1
call SetUnitInvulnerable(K7,false)
call ShowUnitShow(K7)
call PauseUnitBJ(false,K7)
call SetUnitOwner(K7,Player(11),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Ксерон|r")
call RemoveUnit(H3)
else
endif
if BhT() then
set d2[3]=2
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Ксерон|r")
call UnitAddAbilityBJ($4130384C,K7)
call CreateNUnitsAtLoc(1,$6E303139,Player(11),GetRectCenter(i),bj_UNIT_FACING)
call RemoveUnit(H3)
call SetUnitInvulnerable(K7,false)
call ShowUnitShow(K7)
call PauseUnitBJ(false,K7)
call SetUnitOwner(K7,Player(11),true)
else
endif
if BhU() then
set d2[2]=1
call SetUnitInvulnerable(Kx,false)
call ShowUnitShow(Kx)
call PauseUnitBJ(false,Kx)
call SetUnitOwner(Kx,Player(11),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Матерь Пауков|r")
call RemoveUnit(H1)
else
endif
if BhV() then
set d2[2]=2
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Матерь Пауков|r")
call UnitAddAbilityBJ($4130384B,Kx)
call UnitAddAbilityBJ($41303050,Kx)
call UnitAddAbilityBJ($41303056,Kx)
call CreateNUnitsAtLoc(1,$6E303137,Player(11),GetRectCenter(a),bj_UNIT_FACING)
call RemoveUnit(H1)
call SetUnitInvulnerable(Kx,false)
call ShowUnitShow(Kx)
call PauseUnitBJ(false,Kx)
call SetUnitOwner(Kx,Player(11),true)
else
endif
if BhW() then
set d2[1]=2
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Разрушитель Природы|r")
call UnitAddAbilityBJ($4130384A,K3)
call UnitAddAbilityBJ($41437670,K3)
call UnitAddAbilityBJ($41436374,K3)
call CreateNUnitsAtLoc(1,$6E303135,Player(11),GetRectCenter(Gb),bj_UNIT_FACING)
call RemoveUnit(H0)
else
endif
if BhX() then
set d2[1]=1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Разрушитель Природы|r")
call RemoveUnit(H0)
else
endif
endfunction
function BhZ takes nothing returns nothing
set d1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d1,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(d1,function BhY)
endfunction
function Bha takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"fanofknives")
endfunction
function Bhb takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Te[0])) then
return false
endif
return true
endfunction
function Bhc takes nothing returns nothing
if Bhb() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Te[0]))
set Te[0]=Te[0]-25
set V1=GetRandomLocInRect(EK)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(EK)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(EK)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(EK)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(EK)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
call TriggerSleepAction(2)
set ST=GetUnitsOfTypeIdAll($68303459)
call ForGroupBJ(ST,function Bha)
call DestroyGroup(ST)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bhd takes nothing returns nothing
set eY=CreateTrigger()
call TriggerRegisterUnitEvent(eY,Lt,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eY,function Bhc)
endfunction
function Bhe takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"fanofknives")
endfunction
function Bhf takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Te[0])) then
return false
endif
return true
endfunction
function Bhg takes nothing returns nothing
if Bhf() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Te[0]))
set Te[0]=Te[0]-25
set V1=GetRandomLocInRect(Ey)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(Ey)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(Ey)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(Ey)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(Ey)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
call TriggerSleepAction(2)
set ST=GetUnitsOfTypeIdAll($68303459)
call ForGroupBJ(ST,function Bhe)
call DestroyGroup(ST)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bhh takes nothing returns nothing
set eZ=CreateTrigger()
call TriggerRegisterUnitEvent(eZ,Lu,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eZ,function Bhg)
endfunction
function Bhi takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"fanofknives")
endfunction
function Bhj takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Te[0])) then
return false
endif
return true
endfunction
function Bhk takes nothing returns nothing
if Bhj() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Te[0]))
set Te[0]=Te[0]-25
set V1=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
set V1=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303459,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
call TriggerSleepAction(2)
set ST=GetUnitsOfTypeIdAll($68303459)
call ForGroupBJ(ST,function Bhi)
call DestroyGroup(ST)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bhl takes nothing returns nothing
set ea=CreateTrigger()
call TriggerRegisterUnitEvent(ea,Lq,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ea,function Bhk)
endfunction
function Bhm takes nothing returns nothing
local location dw
call DisableTrigger(GetTriggeringTrigger())
set dw=GetUnitLoc(GetAttacker())
call CreateNUnitsAtLoc(1,$68303432,Player(10),dw,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(35.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(dw)
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
set dw=null
endfunction
function Bhn takes nothing returns nothing
set eb=CreateTrigger()
call TriggerRegisterUnitEvent(eb,Lt,EVENT_UNIT_ATTACKED)
call TriggerAddAction(eb,function Bhm)
endfunction
function Bho takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303432) then
return false
endif
if not (IsUnitAlly(GetKillingUnitBJ(),Player(0))==true) then
return false
endif
return true
endfunction
function Bhp takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(11))==true
endfunction
function Bhq takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),5.)
endfunction
function Bhr takes nothing returns nothing
local location dw
local group Xw
call RemoveUnit(GetTriggerUnit())
set dw=GetUnitLoc(GetTriggerUnit())
set Xw=GetUnitsInRangeOfLocMatching(550.,dw,Condition(function Bhp))
call ForGroupBJ(Xw,function Bhq)
call AddSpecialEffectLocBJ(dw,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call DestroyGroup(Xw)
call RemoveLocation(dw)
set Xw=null
set dw=null
endfunction
function Bhs takes nothing returns nothing
set ec=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ec,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ec,Condition(function Bho))
call TriggerAddAction(ec,function Bhr)
endfunction
function Bht takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303555
endfunction
function Bhu takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bhv takes nothing returns boolean
return GetBooleanAnd(Bht(),Bhu())
endfunction
function Bhw takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bhx takes nothing returns boolean
if not (IsUnitAliveBJ(Wi[5])==true) then
return false
endif
if not (IsUnitAliveBJ(Wi[6])==true) then
return false
endif
return true
endfunction
function Bhy takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303555
endfunction
function Bhz takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bh0 takes nothing returns boolean
return GetBooleanAnd(Bhy(),Bhz())
endfunction
function Bh1 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bh2 takes nothing returns boolean
if IsUnitAliveBJ(Wi[5])==true then
return true
endif
if IsUnitAliveBJ(Wi[6])==true then
return true
endif
return false
endfunction
function Bh3 takes nothing returns boolean
if not Bh2() then
return false
endif
return true
endfunction
function Bh4 takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Te[1])) then
return false
endif
return true
endfunction
function Bh5 takes nothing returns nothing
if Bh4() then
call DisableTrigger(GetTriggeringTrigger())
if Bhx() then
call RemoveUnit(Wi[6])
call RemoveUnit(Wi[5])
set ST=GetUnitsInRectMatching(Ey,Condition(function Bhv))
call ForGroupBJ(ST,function Bhw)
call DestroyGroup(ST)
call SetUnitLifePercentBJ(Lu,100)
set Te[0]=75
set Te[1]=80
set V2=GetRectCenter(Ey)
call SetUnitPositionLoc(Lu,V2)
call SetUnitOwner(Lu,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lu,true)
call RemoveLocation(V2)
else
call EnableTrigger(ee)
call EnableTrigger(ef)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Te[1]))
set Te[1]=Te[1]-40
set V1=GetRectCenter(Fy)
set Wi[5]=CreateUnitAtLoc(Player(10),$68303556,V1,270.)
call RemoveLocation(V1)
set V1=GetRectCenter(Fx)
set Wi[6]=CreateUnitAtLoc(Player(10),$68303557,V1,270.)
call RemoveLocation(V1)
call CreateTextTagLocBJ("Я Вас жду. Время пошло!",GetUnitLoc(GetTriggerUnit()),0,15.,100,0.,50.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
endif
call TriggerSleepAction(25.)
if Bh3() then
call RemoveUnit(Wi[6])
call RemoveUnit(Wi[5])
set ST=GetUnitsInRectMatching(Ey,Condition(function Bh0))
call ForGroupBJ(ST,function Bh1)
call DestroyGroup(ST)
call SetUnitLifePercentBJ(Lu,100)
set Te[0]=75
set Te[1]=80
set V2=GetRectCenter(Ey)
call SetUnitPositionLoc(Lu,V2)
call SetUnitOwner(Lu,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lu,true)
call RemoveLocation(V2)
else
endif
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bh6 takes nothing returns nothing
set ed=CreateTrigger()
call TriggerRegisterUnitEvent(ed,Lu,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ed,function Bh5)
endfunction
function Bh7 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bh8 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bh9 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303555
endfunction
function BiB takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BiC takes nothing returns boolean
return GetBooleanAnd(Bh9(),BiB())
endfunction
function BiD takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BiE takes nothing returns boolean
if not (CountUnitsInGroup(Tj)<1) then
return false
endif
return true
endfunction
function BiF takes nothing returns nothing
set V2=GetRandomLocInRect(Fy)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call RemoveLocation(V2)
set Tj=GetUnitsInRectMatching(Ey,Condition(function Bh8))
if BiE() then
set ST=GetUnitsInRectMatching(Ey,Condition(function BiC))
call ForGroupBJ(ST,function BiD)
call DestroyGroup(ST)
call SetUnitLifePercentBJ(Lu,100)
set Te[0]=75
set Te[1]=60
set V2=GetRectCenter(Ey)
call SetUnitPositionLoc(Lu,V2)
call SetUnitOwner(Lu,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lu,true)
else
endif
call DestroyGroup(Tj)
endfunction
function BiG takes nothing returns nothing
set ee=CreateTrigger()
call DisableTrigger(ee)
call TriggerRegisterEnterRectSimple(ee,Fq)
call TriggerAddCondition(ee,Condition(function Bh7))
call TriggerAddAction(ee,function BiF)
endfunction
function BiH takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BiI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BiJ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303555
endfunction
function BiK takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BiL takes nothing returns boolean
return GetBooleanAnd(BiJ(),BiK())
endfunction
function BiM takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BiN takes nothing returns boolean
if not (CountUnitsInGroup(Tj)<1) then
return false
endif
return true
endfunction
function BiO takes nothing returns nothing
set V2=GetRandomLocInRect(Fx)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call RemoveLocation(V2)
set Tj=GetUnitsInRectMatching(Ey,Condition(function BiI))
if BiN() then
set ST=GetUnitsInRectMatching(Ey,Condition(function BiL))
call ForGroupBJ(ST,function BiM)
call DestroyGroup(ST)
call SetUnitLifePercentBJ(Lu,100)
set Te[0]=75
set Te[1]=60
set V2=GetRectCenter(Ey)
call SetUnitPositionLoc(Lu,V2)
call SetUnitOwner(Lu,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lu,true)
else
endif
call DestroyGroup(Tj)
endfunction
function BiP takes nothing returns nothing
set ef=CreateTrigger()
call DisableTrigger(ef)
call TriggerRegisterEnterRectSimple(ef,Fr)
call TriggerAddCondition(ef,Condition(function BiH))
call TriggerAddAction(ef,function BiO)
endfunction
function BiQ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BiR takes nothing returns nothing
set V2=GetRectCenter(Ey)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call RemoveLocation(V2)
endfunction
function BiS takes nothing returns nothing
set eg=CreateTrigger()
call TriggerRegisterEnterRectSimple(eg,Fw)
call TriggerRegisterEnterRectSimple(eg,Fz)
call TriggerAddCondition(eg,Condition(function BiQ))
call TriggerAddAction(eg,function BiR)
endfunction
function BiT takes nothing returns nothing
call PauseUnit(GetEnumUnit(),false)
set V1=GetUnitLoc(GetTriggerUnit())
call IssuePointOrderLocBJ(GetEnumUnit(),"silence",V1)
call RemoveLocation(V1)
endfunction
function BiU takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Te[2])) then
return false
endif
return true
endfunction
function BiV takes nothing returns nothing
if BiU() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Te[2]))
set Te[2]=Te[2]-10
set V1=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303153,Player(10),V1,bj_UNIT_FACING)
call PauseUnit(GetLastCreatedUnit(),true)
call CreateNUnitsAtLoc(1,$68303349,Player(0),V1,bj_UNIT_FACING)
call SetUnitFlyHeight(GetLastCreatedUnit(),250.,99999.)
call SetUnitTimeScale(GetLastCreatedUnit(),.33)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
call TriggerSleepAction(3.)
set ST=GetUnitsOfTypeIdAll($68303153)
call ForGroupBJ(ST,function BiT)
call DestroyGroup(ST)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BiW takes nothing returns nothing
set eh=CreateTrigger()
call TriggerRegisterUnitEvent(eh,Lq,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eh,function BiV)
endfunction
function BiX takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BiY takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BiZ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bia takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bib takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bic takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bid takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bie takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bif takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Big takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bih takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bii takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bij takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bik takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bil takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bim takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bin takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bio takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bip takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Biq takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bir takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bis takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bit takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Biu takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Biv takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Biw takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bix takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Biy takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Biz takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bi0 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bi1 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bi2 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bi3 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bi4 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bi5 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bi6 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bi7 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bi8 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bi9 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjB takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjC takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjD takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjE takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjF takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjG takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjH takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjJ takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjK takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjL takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjM takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjN takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjO takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjP takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjQ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjR takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjS takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjT takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjU takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjV takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjW takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjX takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjY takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjZ takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bja takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjb takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjc takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjd takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bje takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjf takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjg takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjh takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bji takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Te[3])) then
return false
endif
return true
endfunction
function Bjj takes nothing returns nothing
if Bji() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Te[3]))
set Te[3]=Te[3]-20
set V2=GetRectCenter(FH)
call SetUnitPositionLocFacingBJ(GetTriggerUnit(),V2,bj_UNIT_FACING)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(Lq,true)
call RemoveLocation(V2)
call TriggerSleepAction(2.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BiX))
call ForGroupBJ(ST,function BiY)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BiZ))
call ForGroupBJ(ST,function Bia)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bib))
call ForGroupBJ(ST,function Bic)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bid))
call ForGroupBJ(ST,function Bie)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bif))
call ForGroupBJ(ST,function Big)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bih))
call ForGroupBJ(ST,function Bii)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bij))
call ForGroupBJ(ST,function Bik)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bil))
call ForGroupBJ(ST,function Bim)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bin))
call ForGroupBJ(ST,function Bio)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bip))
call ForGroupBJ(ST,function Biq)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bir))
call ForGroupBJ(ST,function Bis)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bit))
call ForGroupBJ(ST,function Biu)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Biv))
call ForGroupBJ(ST,function Biw)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bix))
call ForGroupBJ(ST,function Biy)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Biz))
call ForGroupBJ(ST,function Bi0)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bi1))
call ForGroupBJ(ST,function Bi2)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bi3))
call ForGroupBJ(ST,function Bi4)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bi5))
call ForGroupBJ(ST,function Bi6)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bi7))
call ForGroupBJ(ST,function Bi8)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bi9))
call ForGroupBJ(ST,function BjB)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjC))
call ForGroupBJ(ST,function BjD)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjE))
call ForGroupBJ(ST,function BjF)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjG))
call ForGroupBJ(ST,function BjH)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjI))
call ForGroupBJ(ST,function BjJ)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjK))
call ForGroupBJ(ST,function BjL)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjM))
call ForGroupBJ(ST,function BjN)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjO))
call ForGroupBJ(ST,function BjP)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjQ))
call ForGroupBJ(ST,function BjR)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjS))
call ForGroupBJ(ST,function BjT)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjU))
call ForGroupBJ(ST,function BjV)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjW))
call ForGroupBJ(ST,function BjX)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function BjY))
call ForGroupBJ(ST,function BjZ)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bja))
call ForGroupBJ(ST,function Bjb)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V2=GetUnitLoc(GetTriggerUnit())
set V1=PolarProjectionBJ(V2,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bjc))
call ForGroupBJ(ST,function Bjd)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bje))
call ForGroupBJ(ST,function Bjf)
call DestroyGroup(ST)
call RemoveLocation(V1)
set V1=PolarProjectionBJ(V2,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(V1,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bjg))
call ForGroupBJ(ST,function Bjh)
call DestroyGroup(ST)
call RemoveLocation(V1)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(Lq,false)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bjk takes nothing returns nothing
set ei=CreateTrigger()
call TriggerRegisterUnitEvent(ei,Lq,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ei,function Bjj)
endfunction
function Bjl takes nothing returns nothing
call PauseUnit(GetEnumUnit(),false)
set V1=GetUnitLoc(GetTriggerUnit())
call IssuePointOrderLocBJ(GetEnumUnit(),"dreadlordinferno",V1)
call RemoveLocation(V1)
endfunction
function Bjm takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Te[4])) then
return false
endif
return true
endfunction
function Bjn takes nothing returns nothing
if Bjm() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Te[4]))
set Te[4]=Te[4]-10
set V1=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303153,Player(10),V1,bj_UNIT_FACING)
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,255,255)
call PauseUnit(GetLastCreatedUnit(),true)
call CreateNUnitsAtLoc(1,$68303349,Player(0),V1,bj_UNIT_FACING)
call SetUnitFlyHeight(GetLastCreatedUnit(),250.,99999.)
call SetUnitTimeScale(GetLastCreatedUnit(),.33)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
call TriggerSleepAction(2.)
set ST=GetUnitsOfTypeIdAll($68303153)
call ForGroupBJ(ST,function Bjl)
call DestroyGroup(ST)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bjo takes nothing returns nothing
set ej=CreateTrigger()
call TriggerRegisterUnitEvent(ej,Lq,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ej,function Bjn)
endfunction
function Bjp takes nothing returns boolean
if not (GetKillingUnit()==L7) then
return false
endif
if not (IsUnitIllusion(GetTriggerUnit())==false) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bjq takes nothing returns boolean
if not (S6>=4) then
return false
endif
return true
endfunction
function Bjr takes nothing returns nothing
set S6=S6+1
call CreateTextTagUnitBJ("+"+I2S(S6),L7,0,20.,100,0.,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
if Bjq() then
call CreateItemLoc($4930595A,GetRectCenter(D7))
call KillUnit(L7)
else
endif
endfunction
function Bjs takes nothing returns nothing
set ek=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ek,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ek,Condition(function Bjp))
call TriggerAddAction(ek,function Bjr)
endfunction
function Bjt takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303055) then
return false
endif
return true
endfunction
function Bju takes nothing returns nothing
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
endfunction
function Bjv takes nothing returns nothing
set el=CreateTrigger()
call TriggerRegisterEnterRectSimple(el,D8)
call TriggerRegisterEnterRectSimple(el,D9)
call TriggerRegisterEnterRectSimple(el,EB)
call TriggerRegisterEnterRectSimple(el,EC)
call TriggerAddCondition(el,Condition(function Bjt))
call TriggerAddAction(el,function Bju)
endfunction
function Bjw takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[15]) then
return false
endif
return true
endfunction
function Bjx takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[15])
set Tv[15]=Tv[15]-5.
set V1=GetUnitLoc(GetTriggerUnit())
call IssuePointOrderLoc(GetTriggerUnit(),"silence",V1)
call RemoveLocation(V1)
set V2=GetRectCenter(D2)
set V1=PolarProjectionBJ(V2,600.,GetRandomReal(0,360.))
call CreateNUnitsAtLoc(1,$68303431,Player(10),V1,bj_UNIT_FACING)
call IssuePointOrderLoc(GetLastCreatedUnit(),"carrionswarm",V2)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call CreateTextTagUnitBJ("Ко дну!",GetLastCreatedUnit(),0,12.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call RemoveLocation(V2)
call RemoveLocation(V1)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bjy takes nothing returns nothing
set em=CreateTrigger()
call TriggerRegisterUnitEvent(em,L6,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(em,Condition(function Bjw))
call TriggerAddAction(em,function Bjx)
endfunction
function Bjz takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[16]) then
return false
endif
return true
endfunction
function Bj0 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[16])
set Tv[16]=Tv[16]-3.
set V1=GetRandomLocInRect(D2)
call CreateNUnitsAtLoc(1,$68303551,Player(10),V1,GetRandomReal(0,360.))
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bj1 takes nothing returns nothing
set en=CreateTrigger()
call TriggerRegisterUnitEvent(en,L6,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(en,Condition(function Bjz))
call TriggerAddAction(en,function Bj0)
endfunction
function Bj2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bj3 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-10000.)
endfunction
function Bj4 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303551) then
return false
endif
return true
endfunction
function Bj5 takes nothing returns nothing
if Bj4() then
set V1=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(300.,V1,Condition(function Bj2))
call ForGroupBJ(ST,function Bj3)
call DestroyGroup(ST)
call RemoveLocation(V1)
else
endif
endfunction
function Bj6 takes nothing returns nothing
set eo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(eo,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(eo,function Bj5)
endfunction
function Bj7 takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[17]) then
return false
endif
return true
endfunction
function Bj8 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[17])
set Tv[17]=Tv[17]-20.
set V1=GetRandomLocInRect(D2)
call CreateNUnitsAtLoc(1,$68303252,Player(10),V1,GetRandomReal(0,360.))
call UnitApplyTimedLifeBJ(2.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bj9 takes nothing returns nothing
set ep=CreateTrigger()
call TriggerRegisterUnitEvent(ep,L6,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(ep,Condition(function Bj7))
call TriggerAddAction(ep,function Bj8)
endfunction
function BkB takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(5.)
set ST=GetUnitsInRectAll(D2)
call SetUnitManaPercentBJ(GroupPickRandomUnit(ST),0.)
call DestroyGroup(ST)
call TriggerSleepAction(2.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BkC takes nothing returns nothing
set eq=CreateTrigger()
call TriggerRegisterUnitEvent(eq,L6,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eq,function BkB)
endfunction
function BkD takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BkE takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())<50) then
return false
endif
return true
endfunction
function BkF takes nothing returns nothing
local location Me
if BkE() then
call KillUnit(GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),"|c00ffffffУровень слишком мал!")
else
call SetUnitLifePercentBJ(L6,100)
set Me=GetRectCenter(D2)
call SetUnitPositionLoc(GetTriggerUnit(),Me)
call RemoveLocation(Me)
call SetUnitOwner(L6,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L6,true)
set Tv[15]=93.
set Tv[16]=95.
set Tv[17]=80.
endif
set Me=null
endfunction
function BkG takes nothing returns nothing
set Up=CreateTrigger()
call DisableTrigger(Up)
call TriggerRegisterEnterRectSimple(Up,Gv)
call TriggerAddCondition(Up,Condition(function BkD))
call TriggerAddAction(Up,function BkF)
endfunction
function BkH takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function BkI takes nothing returns nothing
if BkH() then
set V2=Location(-7777.,-22400.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call SetUnitLifePercentBJ(K5,100)
call SetUnitOwner(K5,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(K5,true)
call RemoveLocation(V2)
set Tv[100]=80.
else
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c00ff0000Для входа требуется 45 уровень.")
endif
endfunction
function BkJ takes nothing returns nothing
set U0=CreateTrigger()
call TriggerRegisterEnterRectSimple(U0,Ew)
call TriggerAddAction(U0,function BkI)
endfunction
function BkK takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[100]) then
return false
endif
return true
endfunction
function BkL takes nothing returns boolean
if IsUnitAliveBJ(Wi[5])==true then
return true
endif
if IsUnitAliveBJ(Wi[6])==true then
return true
endif
return false
endfunction
function BkM takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BkN takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BkO takes nothing returns boolean
if not BkL() then
return false
endif
return true
endfunction
function BkP takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[100])
if BkO() then
call SetUnitLifePercentBJ(K5,100)
call RemoveUnit(Wi[5])
call RemoveUnit(Wi[6])
call ForGroupBJ(GetUnitsInRectMatching(Gx,Condition(function BkM)),function BkN)
set Tv[100]=80.
else
set Tv[100]=Tv[100]-20.
set V2=GetRandomLocInRect(Gx)
set Wi[5]=CreateUnitAtLoc(Player(10),$68303553,V2,270.)
call RemoveLocation(V2)
set V2=GetRandomLocInRect(Gx)
set Wi[6]=CreateUnitAtLoc(Player(10),$68303552,V2,270.)
call RemoveLocation(V2)
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BkQ takes nothing returns nothing
set er=CreateTrigger()
call TriggerRegisterUnitEvent(er,K5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(er,Condition(function BkK))
call TriggerAddAction(er,function BkP)
endfunction
function BkR takes nothing returns boolean
if not (GetUnitTypeId(GetSpellTargetUnit())==$6E303539) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BkS takes nothing returns nothing
call IssueImmediateOrder(GetSpellTargetUnit(),"howlofterror")
call UnitDamageTargetBJ(GetTriggerUnit(),GetTriggerUnit(),15000.,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_NORMAL)
endfunction
function BkT takes nothing returns nothing
set es=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(es,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(es,Condition(function BkR))
call TriggerAddAction(es,function BkS)
endfunction
function BkU takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateNUnitsAtLoc(GetRandomInt(1,3),$6E303538,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call TriggerSleepAction(30.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BkV takes nothing returns nothing
set et=CreateTrigger()
call TriggerRegisterUnitEvent(et,LF,EVENT_UNIT_DAMAGED)
call TriggerAddAction(et,function BkU)
endfunction
function BkW takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function BkX takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetEnumUnit())/3.)
endfunction
function BkY takes nothing returns nothing
local location dw
local group Xw
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
set dw=GetUnitLoc(GetTriggerUnit())
set Xw=GetUnitsInRangeOfLocMatching(800.,dw,Condition(function BkW))
call ForGroupBJ(Xw,function BkX)
call RemoveLocation(dw)
call DestroyGroup(Xw)
call EnableTrigger(GetTriggeringTrigger())
set Xw=null
set dw=null
endfunction
function BkZ takes nothing returns nothing
set eu=CreateTrigger()
call TriggerRegisterUnitEvent(eu,LM,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eu,function BkY)
endfunction
function Bka takes nothing returns nothing
local location Me
local group Np
local boolexpr Nq
local integer Ns
local unit Nt
if GetUnitTypeId(GetTriggerUnit())==$6E6D6764 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(3)
call UnitRemoveAbility(Ly,$414F6878)
call UnitRemoveAbility(Ly,$41637269)
call UnitRemoveAbility(Ly,$41457362)
call UnitRemoveAbility(Ly,$41436362)
call UnitRemoveAbility(Ly,$416D6264)
set Me=GetUnitLoc(Ly)
set Np=CreateGroup()
set Nq=Condition(function mo)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),1500,Nq)
set Ns=GetRandomInt(1,5)
set Nt=GroupPickRandomUnit(Np)
if Ns==1 then
call na(Ly,"Полиморф!",.035,100,255,255)
call UnitAddAbility(Ly,$414F6878)
call SetUnitAbilityLevel(Ly,$414F6878,2)
call IssueTargetOrder(Ly,"hex",Nt)
elseif Ns==2 then
call na(Ly,"Увечье!",.035,100,255,255)
call UnitAddAbility(Ly,$41637269)
call IssueTargetOrder(Ly,"cripple",Nt)
elseif Ns==3 then
call na(Ly,"Звездопад!",.035,100,255,255)
call UnitAddAbility(Ly,$41457362)
call IssueImmediateOrder(Ly,"starfall")
elseif Ns==4 then
call na(Ly,"Ледяная звезда!",.035,100,255,255)
call UnitAddAbility(Ly,$41436362)
call IssueTargetOrder(Ly,"thunderbolt",Nt)
elseif Ns==5 then
call na(Ly,"Похищение маны!",.035,100,255,255)
call UnitAddAbility(Ly,$416D6264)
call IssueTargetOrder(Ly,"manaburn",Nt)
endif
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
set Np=null
set Nq=null
set Nt=null
call EnableTrigger(GetTriggeringTrigger())
endif
set Me=null
endfunction
function Bkb takes nothing returns nothing
local location Hv=GetUnitLoc(Ly)
call SetUnitPositionLoc(GetEnumUnit(),Hv)
call SetUnitLifePercentBJ(GetEnumUnit(),5)
call RemoveLocation(Hv)
set Hv=null
endfunction
function Bkc takes nothing returns nothing
local location Me
local group Np
local boolexpr Nq
if GetUnitTypeId(GetTriggerUnit())==$6E6D6764 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
set Me=GetUnitLoc(GetTriggerUnit())
set Np=CreateGroup()
set Nq=Condition(function mo)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),1500,Nq)
call ForGroup(Np,function Bkb)
call DestroyGroup(Np)
call DestroyBoolExpr(Nq)
call RemoveLocation(Me)
set Nq=null
set Np=null
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bkd takes nothing returns nothing
set ev=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ev,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(ev,function Bkc)
call TriggerAddAction(ev,function Bka)
endfunction
function Bke takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[110]) then
return false
endif
return true
endfunction
function Bkf takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bkg takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bkh takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bki takes nothing returns boolean
if not (CountUnitsInGroup(ST)>=1) then
return false
endif
return true
endfunction
function Bkj takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set ST=GetUnitsInRectOfPlayer(Gz,Player(10))
if Bki() then
call ForGroupBJ(ST,function Bkf)
call ForGroupBJ(GetUnitsInRectMatching(Gz,Condition(function Bkg)),function Bkh)
call SetUnitLifePercentBJ(LB,100)
set Tv[110]=80.
else
endif
call DestroyGroup(ST)
set Tv[110]=Tv[110]-20.
set V2=GetRandomLocInRect(Gz)
call CreateNUnitsAtLoc(3,$6E303342,Player(10),V2,bj_UNIT_FACING)
call RemoveLocation(V2)
set V2=GetRandomLocInRect(Gz)
call CreateNUnitsAtLoc(3,$6E30375A,Player(10),V2,bj_UNIT_FACING)
call RemoveLocation(V2)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bkk takes nothing returns nothing
set ew=CreateTrigger()
call TriggerRegisterUnitEvent(ew,LB,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(ew,Condition(function Bke))
call TriggerAddAction(ew,function Bkj)
endfunction
function Bkl takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303054) then
return false
endif
if not (IsUnitIllusionBJ(GetTriggerUnit())==false) then
return false
endif
return true
endfunction
function Bkm takes nothing returns boolean
if not (Sq>=10) then
return false
endif
return true
endfunction
function Bkn takes nothing returns nothing
call EnableTrigger(bH)
call DisableTrigger(ey)
call DestroyEffectBJ(Uu[37])
call AddSpecialEffectTargetUnitBJ("overhead",Ke,"Objects\\RandomObject\\RandomObject.mdl")
set Uu[37]=GetLastCreatedEffectBJ()
call DisplayTextToForce(GetPlayersAll(),"Смерть убита!")
if Bkm() then
call CreateTextTagUnitBJ("VICTORY",GetTriggerUnit(),0,30.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateItemLoc($49304832,GetUnitLoc(GetTriggerUnit()))
else
endif
endfunction
function Bko takes nothing returns nothing
set ex=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ex,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ex,Condition(function Bkl))
call TriggerAddAction(ex,function Bkn)
endfunction
function Bkp takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bkq takes nothing returns nothing
set V1=Location(-5700.,-22150.)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V1,0)
call SetUnitPositionLoc(GetTriggerUnit(),V1)
call RemoveLocation(V1)
call SetUnitInvulnerable(LB,true)
call SetUnitOwner(LB,Player(PLAYER_NEUTRAL_PASSIVE),true)
set Tv[1]=75.
call SetUnitLifePercentBJ(LB,100)
set Tv[110]=80.
endfunction
function Bkr takes nothing returns nothing
set ey=CreateTrigger()
call TriggerRegisterEnterRectSimple(ey,Fs)
call TriggerAddCondition(ey,Condition(function Bkp))
call TriggerAddAction(ey,function Bkq)
endfunction
function Bks takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[1]) then
return false
endif
return true
endfunction
function Bkt takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[1])
set Tv[1]=Tv[1]-25.
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Rv=Rv+36.
set WT[2]=GetUnitLoc(GetTriggerUnit())
set Ru[2]=GetRandomReal(Rv-2.,Rv+2.)
set Rw[2]=GetRandomReal(-5.,5.)
set Rt[2]=GetRandomReal(200.,200.)
call CreateNUnitsAtLoc(1,$68303458,Player(10),WT[2],Ru[2])
set WU[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(3.,$42544C46,WU[2])
set WT[2]=PolarProjectionBJ(WT[2],Rt[2],Ru[2])
call SetUnitPositionLoc(WU[2],WT[2])
call IssueImmediateOrder(WU[2],"fanofknives")
call RemoveLocation(WT[2])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(3.)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Rv=Rv+36.
set WT[2]=GetUnitLoc(GetTriggerUnit())
set Ru[2]=GetRandomReal(Rv-2.,Rv+2.)
set Rw[2]=GetRandomReal(-5.,5.)
set Rt[2]=GetRandomReal(600.,600.)
call CreateNUnitsAtLoc(1,$68303458,Player(10),WT[2],Ru[2])
set WU[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(3.,$42544C46,WU[2])
set WT[2]=PolarProjectionBJ(WT[2],Rt[2],Ru[2])
call SetUnitPositionLoc(WU[2],WT[2])
call IssueImmediateOrder(WU[2],"fanofknives")
call RemoveLocation(WT[2])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bku takes nothing returns nothing
set ez=CreateTrigger()
call TriggerRegisterUnitEvent(ez,LB,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(ez,Condition(function Bks))
call TriggerAddAction(ez,function Bkt)
endfunction
function Bkv takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bkw takes nothing returns nothing
local location Me
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
call SetUnitInvulnerable(GetTriggerUnit(),true)
if Bkv() then
set Me=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$75303053,Player(10),Me,bj_UNIT_FACING)
call RemoveLocation(Me)
else
endif
call TriggerSleepAction(5.)
call EnableTrigger(GetTriggeringTrigger())
set Me=null
endfunction
function Bkx takes nothing returns nothing
set e0=CreateTrigger()
call TriggerRegisterUnitEvent(e0,Ls,EVENT_UNIT_DAMAGED)
call TriggerAddAction(e0,function Bkw)
endfunction
function Bky takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303053) then
return false
endif
return true
endfunction
function Bkz takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303052) then
return false
endif
if not (So<=3) then
return false
endif
return true
endfunction
function Bk0 takes nothing returns nothing
if Bky() then
call SetUnitInvulnerable(Ls,false)
set So=So+1
else
endif
if Bkz() then
call CreateTextTagUnitBJ("VICTORY",GetTriggerUnit(),0,30.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю!!! Вы убили |c007d7d7dТемного Рыцаря|r особым способом, и в награду Вы получаете особую вещь.")
call CreateItemLoc($49304756,GetUnitLoc(GetTriggerUnit()))
else
endif
endfunction
function Bk1 takes nothing returns nothing
set e1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(e1,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(e1,function Bk0)
endfunction
function Bk2 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(35.)
call SetUnitVertexColor(Lr,0,0,0,100)
call UnitAddAbilityBJ($4130444A,GetTriggerUnit())
call TriggerSleepAction(15.)
call SetUnitVertexColor(Lr,255,255,255,255)
call UnitRemoveAbilityBJ($4130444A,GetTriggerUnit())
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bk3 takes nothing returns nothing
set e2=CreateTrigger()
call TriggerRegisterUnitEvent(e2,Lr,EVENT_UNIT_DAMAGED)
call TriggerAddAction(e2,function Bk2)
endfunction
function Bk4 takes nothing returns boolean
if not (GetRandomInt(1,5)==1) then
return false
endif
return true
endfunction
function Bk5 takes nothing returns boolean
if not (GetRandomInt(1,5)==2) then
return false
endif
return true
endfunction
function Bk6 takes nothing returns boolean
if not (GetRandomInt(1,5)==3) then
return false
endif
return true
endfunction
function Bk7 takes nothing returns nothing
if Bk4() then
call IssueTargetOrderBJ(GetTriggerUnit(),"banish",GetEventDamageSource())
else
endif
if Bk5() then
call IssueTargetOrderBJ(GetTriggerUnit(),"entanglingroots",GetEventDamageSource())
else
endif
if Bk6() then
call IssuePointOrderLoc(GetTriggerUnit(),"silence",GetUnitLoc(GetEventDamageSource()))
else
endif
endfunction
function Bk8 takes nothing returns nothing
set e3=CreateTrigger()
call TriggerRegisterUnitEvent(e3,Lr,EVENT_UNIT_DAMAGED)
call TriggerAddAction(e3,function Bk7)
endfunction
function Bk9 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303050) then
return false
endif
return true
endfunction
function BlB takes nothing returns boolean
if not (RectContainsUnit(Dc,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BlC takes nothing returns boolean
if not (RectContainsUnit(Dd,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BlD takes nothing returns boolean
if not (RectContainsUnit(De,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BlE takes nothing returns boolean
if not (RectContainsUnit(Df,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BlF takes nothing returns boolean
if not (RectContainsUnit(Dg,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BlG takes nothing returns nothing
if BlB() then
set Sn=Sn+1
call AddSpecialEffectLocBJ(GetRectCenter(Dc),"Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl")
call CreateNUnitsAtLoc(1,$75303051,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveRect(Dc)
else
endif
if BlC() then
set Sn=Sn+1
call AddSpecialEffectLocBJ(GetRectCenter(Dd),"Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl")
call CreateNUnitsAtLoc(1,$75303051,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveRect(Dd)
else
endif
if BlD() then
set Sn=Sn+1
call AddSpecialEffectLocBJ(GetRectCenter(De),"Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl")
call CreateNUnitsAtLoc(1,$75303051,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveRect(De)
else
endif
if BlE() then
set Sn=Sn+1
call AddSpecialEffectLocBJ(GetRectCenter(Df),"Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl")
call CreateNUnitsAtLoc(1,$75303051,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveRect(Df)
else
endif
if BlF() then
set Sn=Sn+1
call AddSpecialEffectLocBJ(GetRectCenter(Dg),"Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl")
call CreateNUnitsAtLoc(1,$75303051,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveRect(Dg)
else
endif
endfunction
function BlH takes nothing returns nothing
set e4=CreateTrigger()
call TriggerRegisterEnterRectSimple(e4,Dc)
call TriggerRegisterEnterRectSimple(e4,Dd)
call TriggerRegisterEnterRectSimple(e4,De)
call TriggerRegisterEnterRectSimple(e4,Df)
call TriggerRegisterEnterRectSimple(e4,Dg)
call TriggerAddCondition(e4,Condition(function Bk9))
call TriggerAddAction(e4,function BlG)
endfunction
function BlI takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303050) then
return false
endif
return true
endfunction
function BlJ takes nothing returns boolean
if not (Sn>=5) then
return false
endif
return true
endfunction
function BlK takes nothing returns nothing
call CreateItemLoc($49304752,GetUnitLoc(GetTriggerUnit()))
call CreateItemLoc($49304751,GetUnitLoc(GetTriggerUnit()))
call CreateItemLoc($49304750,GetUnitLoc(GetTriggerUnit()))
if BlJ() then
call CreateTextTagUnitBJ("VICTORY",GetTriggerUnit(),0,30.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю!!! Вы убили |c007d7d7dОракула|r особым способом, и в награду Вы получаете особую вещь.")
call CreateItemLoc($4930474F,GetUnitLoc(GetTriggerUnit()))
else
endif
endfunction
function BlL takes nothing returns nothing
set e5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(e5,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(e5,Condition(function BlI))
call TriggerAddAction(e5,function BlK)
endfunction
function BlM takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=30.) then
return false
endif
return true
endfunction
function BlN takes nothing returns nothing
local location e7=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(5,$6530304D,Player(10),e7,bj_UNIT_FACING)
call RemoveLocation(e7)
call DisableTrigger(GetTriggeringTrigger())
set e7=null
endfunction
function BlO takes nothing returns nothing
set e6=CreateTrigger()
call TriggerRegisterUnitEvent(e6,Lp,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(e6,Condition(function BlM))
call TriggerAddAction(e6,function BlN)
endfunction
function BlP takes nothing returns nothing
local location e7
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
set e7=GetUnitLoc(GetEventDamageSource())
call CreateItemLoc($4930474A,e7)
call RemoveLocation(e7)
call EnableTrigger(GetTriggeringTrigger())
set e7=null
endfunction
function BlQ takes nothing returns nothing
set e8=CreateTrigger()
call TriggerRegisterUnitEvent(e8,Lp,EVENT_UNIT_DAMAGED)
call TriggerAddAction(e8,function BlP)
endfunction
function BlR takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930474A) then
return false
endif
return true
endfunction
function BlS takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BlT takes nothing returns nothing
call SetUnitLifeBJ(Lp,GetUnitStateSwap(UNIT_STATE_LIFE,Lp)+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,Lp)*.3)
if BlS() then
call KillUnit(GetTriggerUnit())
else
endif
endfunction
function BlU takes nothing returns nothing
set e9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(e9,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(e9,Condition(function BlR))
call TriggerAddAction(e9,function BlT)
endfunction
function BlV takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6530304C) then
return false
endif
return true
endfunction
function BlW takes nothing returns nothing
local location dw=GetRectCenter(Gp)
local integer MC=0
call SetUnitPositionLoc(GetTriggerUnit(),dw)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(dw)
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),1,0)
loop
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
set dw=null
endfunction
function BlX takes nothing returns nothing
set fB=CreateTrigger()
call TriggerRegisterLeaveRectSimple(fB,Gp)
call TriggerAddCondition(fB,Condition(function BlV))
call TriggerAddAction(fB,function BlW)
endfunction
function BlY takes nothing returns boolean
if not (CountUnitsInGroup(ST)==0) then
return false
endif
return true
endfunction
function BlZ takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6530304C) then
return false
endif
return true
endfunction
function Bla takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6530304D) then
return false
endif
return true
endfunction
function Blb takes nothing returns nothing
local location Me
if BlZ() then
set Me=GetRectCenter(Gp)
call CreateItemLoc($4930474E,Me)
call CreateItemLoc($4930474D,Me)
call CreateItemLoc($4930474C,Me)
set ST=GetUnitsOfTypeIdAll($6530304D)
if BlY() then
call CreateTextTagUnitBJ("VICTORY",GetTriggerUnit(),0,30.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю!!! Вы убили |c007d7d7dГорного Камешка|r особым способом, и в награду Вы получаете особую вещь.")
call CreateItemLoc($4930474B,Me)
else
call DoNothing()
endif
call DestroyGroup(ST)
call RemoveLocation(Me)
else
endif
if Bla() then
call RemoveUnit(GetTriggerUnit())
else
endif
set Me=null
endfunction
function Blc takes nothing returns nothing
set fC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fC,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(fC,function Blb)
endfunction
function Bld takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Ble takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
if Bld() then
call CreateNUnitsAtLoc(1,$68303339,Player(10),GetRandomLocInRect(BO),bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(10.,$42544C46,GetLastCreatedUnit())
call TriggerSleepAction(25.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Blf takes nothing returns nothing
set fD=CreateTrigger()
call TriggerRegisterUnitEvent(fD,Lf,EVENT_UNIT_ATTACKED)
call TriggerAddAction(fD,function Ble)
endfunction
function Blg takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set V1=GetRandomLocInRect(BO)
call CreateNUnitsAtLoc(1,$6E676772,Player(10),V1,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(120.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V1)
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Blh takes nothing returns nothing
set fE=CreateTrigger()
call TriggerRegisterUnitEvent(fE,Lf,EVENT_UNIT_ATTACKED)
call TriggerAddAction(fE,function Blg)
endfunction
function Bli takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<60.) then
return false
endif
return true
endfunction
function Blj takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41303542,GetTriggerUnit())
endfunction
function Blk takes nothing returns nothing
set fF=CreateTrigger()
call TriggerRegisterUnitEvent(fF,K1,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(fF,Condition(function Bli))
call TriggerAddAction(fF,function Blj)
endfunction
function Bll takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Blm takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30.)
if Bll() then
call UnitAddAbilityBJ($41304F48,GetTriggerUnit())
call SetUnitVertexColor(Lw,255,0,255,100)
call TriggerSleepAction(15.)
call UnitRemoveAbilityBJ($41304F48,GetTriggerUnit())
call SetUnitVertexColor(Lw,255,255,255,255)
call TriggerSleepAction(15.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bln takes nothing returns nothing
set fG=CreateTrigger()
call TriggerRegisterUnitEvent(fG,Lw,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fG,function Blm)
endfunction
function Blo takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[4]) then
return false
endif
return true
endfunction
function Blp takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Blq takes nothing returns nothing
local location Me
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[4])
set Tv[4]=Tv[4]-25.
if Blp() then
call CreateTextTagUnitBJ("А вот и я!",Lw,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set Me=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303338,Player(10),Me,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(10.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Me)
call EnableTrigger(GetTriggeringTrigger())
else
endif
set Me=null
endfunction
function Blr takes nothing returns nothing
set fH=CreateTrigger()
call TriggerRegisterUnitEvent(fH,Lw,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(fH,Condition(function Blo))
call TriggerAddAction(fH,function Blq)
endfunction
function Bls takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[5]) then
return false
endif
return true
endfunction
function Blt takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Blu takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[5])
set Tv[5]=Tv[5]-15.
if Blt() then
call SetUnitVertexColor(Lw,255,0,0,200)
call EnableTrigger(fJ)
call TriggerSleepAction(15.)
call DisableTrigger(fJ)
call SetUnitVertexColor(Lw,255,255,255,255)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Blv takes nothing returns nothing
set fI=CreateTrigger()
call TriggerRegisterUnitEvent(fI,Lw,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(fI,Condition(function Bls))
call TriggerAddAction(fI,function Blu)
endfunction
function Blw takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303348)==true) then
return false
endif
return true
endfunction
function Blx takes nothing returns nothing
call SetUnitLifeBJ(GetTriggerUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())-GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())/4.)
endfunction
function Bly takes nothing returns nothing
set fK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fK,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(fK,Condition(function Blw))
call TriggerAddAction(fK,function Blx)
endfunction
function Blz takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[6]) then
return false
endif
return true
endfunction
function Bl0 takes nothing returns boolean
if not (IsUnitAliveBJ(fM)==true) then
return false
endif
return true
endfunction
function Bl1 takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bl2 takes nothing returns nothing
local location Me
local unit Np
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[6])
set Tv[6]=Tv[6]-20.
if Bl1() then
set Me=GetRandomLocInRect(DW)
set Np=CreateUnitAtLoc(Player(8),$68303337,Me,270.)
call RemoveLocation(Me)
call TriggerSleepAction(10.)
if Bl0() then
call RemoveUnit(Np)
else
set Me=GetUnitLoc(Np)
call CreateNUnitsAtLoc(15,$6E303458,Player(10),Me,bj_UNIT_FACING)
call RemoveUnit(Np)
call RemoveLocation(Me)
endif
call EnableTrigger(GetTriggeringTrigger())
else
endif
set Np=null
set Me=null
endfunction
function Bl3 takes nothing returns nothing
set fL=CreateTrigger()
call TriggerRegisterUnitEvent(fL,Lw,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(fL,Condition(function Blz))
call TriggerAddAction(fL,function Bl2)
endfunction
function Bl4 takes nothing returns boolean
if not (GetUnitTypeId(GetAttacker())==$6E303456) then
return false
endif
return true
endfunction
function Bl5 takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("chest",GetAttackedUnitBJ(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(GetAttacker(),GetAttackedUnitBJ(),GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())*.1,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
endfunction
function Bl6 takes nothing returns nothing
set fJ=CreateTrigger()
call DisableTrigger(fJ)
call TriggerRegisterAnyUnitEventBJ(fJ,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(fJ,Condition(function Bl4))
call TriggerAddAction(fJ,function Bl5)
endfunction
function Bl7 takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tv[3]) then
return false
endif
return true
endfunction
function Bl8 takes nothing returns boolean
if not (Sj[0]>6) then
return false
endif
return true
endfunction
function Bl9 takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BmB takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tv[3])
set Tv[3]=Tv[3]-30.
if Bl9() then
set Sj[0]=0
set fO[0]=GetRectCenter(DW)
call CreateNUnitsAtLoc(1,$6E303459,Player(PLAYER_NEUTRAL_PASSIVE),fO[0],bj_UNIT_FACING)
set fP[0]=GetLastCreatedUnit()
call UnitIgnoreAlarm(GetTriggerUnit(),true)
call SetUnitPositionLoc(GetTriggerUnit(),fO[0])
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
call RemoveLocation(fO[0])
call EnableTrigger(fQ)
call TriggerSleepAction(30.)
if Bl8() then
set Sj[0]=0
call RemoveUnit(fP[0])
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(GetTriggerUnit(),false)
call DisableTrigger(fQ)
else
set Sj[0]=0
call RemoveUnit(fP[0])
call UnitDamagePointLoc(GetTriggerUnit(),0,2000.,GetRectCenter(DW),999999.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(GetTriggerUnit(),false)
call DisableTrigger(fQ)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
set Tv[3]=70.
set Tv[4]=75.
set Tv[5]=85.
set Tv[6]=80.
endif
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BmC takes nothing returns nothing
set fN=CreateTrigger()
call TriggerRegisterUnitEvent(fN,Lw,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(fN,Condition(function Bl7))
call TriggerAddAction(fN,function BmB)
endfunction
function BmD takes nothing returns nothing
local location dw=GetRandomLocInRect(DW)
call CreateNUnitsAtLoc(1,$6E30345A,Player(10),dw,bj_UNIT_FACING)
call RemoveLocation(dw)
set dw=null
endfunction
function BmE takes nothing returns nothing
set fQ=CreateTrigger()
call DisableTrigger(fQ)
call TriggerRegisterTimerEventPeriodic(fQ,3.)
call TriggerAddAction(fQ,function BmD)
endfunction
function BmF takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E30345A) then
return false
endif
return true
endfunction
function BmG takes nothing returns nothing
set Sj[0]=Sj[0]+1
endfunction
function BmH takes nothing returns nothing
set fR=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fR,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(fR,Condition(function BmF))
call TriggerAddAction(fR,function BmG)
endfunction
function BmI takes nothing returns nothing
local location dw
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(70.)
set dw=GetUnitLoc(GetTriggerUnit())
set Sk=1
loop
exitwhen Sk>15
set fT[Sk]=GetUnitLoc(GetTriggerUnit())
set fU[Sk]=PolarProjectionBJ(fT[Sk],40.,GetUnitFacing(GetTriggerUnit()))
call SetUnitPositionLoc(GetTriggerUnit(),fU[Sk])
call CreateNUnitsAtLoc(1,$68303341,Player(10),fU[Sk],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(20.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(fT[Sk])
call RemoveLocation(fU[Sk])
set Sk=Sk+1
endloop
call SetUnitPositionLoc(GetTriggerUnit(),dw)
call RemoveLocation(dw)
call EnableTrigger(GetTriggeringTrigger())
set dw=null
endfunction
function BmJ takes nothing returns nothing
set fS=CreateTrigger()
call TriggerRegisterUnitEvent(fS,Lw,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fS,function BmI)
endfunction
function BmK takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303256) then
return false
endif
return true
endfunction
function BmL takes nothing returns nothing
call IssueImmediateOrder(GetTriggerUnit(),"fanofknives")
call TriggerSleepAction(1.)
call RemoveUnit(GetTriggerUnit())
call CreateNUnitsAtLoc(GetRandomInt(2,7),$6E303249,Player(10),GetRandomLocInRect(DP),bj_UNIT_FACING)
call SetUnitOwner(Ln,Player(11),true)
call SetUnitInvulnerable(GetTriggerUnit(),false)
endfunction
function BmM takes nothing returns nothing
set fV=CreateTrigger()
call TriggerRegisterEnterRectSimple(fV,DQ)
call TriggerAddCondition(fV,Condition(function BmK))
call TriggerAddAction(fV,function BmL)
endfunction
function BmN takes nothing returns nothing
call IssueTargetOrderBJ(GetEnumUnit(),"fingerofdeath",Ln)
endfunction
function BmO takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"move",GetRectCenter(DQ))
endfunction
function BmP takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BmQ takes nothing returns nothing
local location Me
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30.)
if BmP() then
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(DQ))
call SetUnitOwner(Ln,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
set Me=PolarProjectionBJ(GetRectCenter(DQ),800.,GetRandomDirectionDeg())
call CreateNUnitsAtLoc(1,$68303256,Player(10),Me,bj_UNIT_FACING)
call RemoveLocation(Me)
set ST=GetUnitsOfTypeIdAll($68303256)
call ForGroupBJ(ST,function BmN)
call DestroyGroup(ST)
call TriggerSleepAction(1.)
set ST=GetUnitsOfTypeIdAll($68303256)
call ForGroupBJ(ST,function BmO)
call DestroyGroup(ST)
call TriggerSleepAction(10.)
call SetUnitOwner(Ln,Player(11),true)
call SetUnitInvulnerable(GetTriggerUnit(),false)
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
set Me=null
endfunction
function BmR takes nothing returns nothing
set fW=CreateTrigger()
call TriggerRegisterUnitEvent(fW,Ln,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fW,function BmQ)
endfunction
function BmS takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"starfall")
endfunction
function BmT takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BmU takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
if BmT() then
call CreateUnitAtLoc(Player(10),$68303255,GetRandomLocInRect(DP),270.)
set ST=GetUnitsOfTypeIdAll($68303255)
call ForGroupBJ(ST,function BmS)
call DestroyGroup(ST)
call GroupClear(ST)
call DestroyGroup(ST)
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BmV takes nothing returns nothing
set fX=CreateTrigger()
call TriggerRegisterUnitEvent(fX,Ln,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fX,function BmU)
endfunction
function BmW takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BmX takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),YU[222])
endfunction
function BmY takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BmZ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
if BmY() then
set YU[222]=GetRandomLocInRect(DP)
call AddSpecialEffectLocBJ(YU[222],"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(2)
call SetUnitPositionLoc(Ln,YU[222])
call TriggerSleepAction(.5)
set ST=GetUnitsInRectMatching(DP,Condition(function BmW))
call ForGroupBJ(ST,function BmX)
call GroupClear(ST)
call DestroyGroup(ST)
call RemoveLocation(YU[222])
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
else
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bma takes nothing returns nothing
set fY=CreateTrigger()
call TriggerRegisterUnitEvent(fY,Ln,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fY,function BmZ)
endfunction
function Bmb takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D46) then
return false
endif
return true
endfunction
function Bmc takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetSpellTargetUnit()))+" "+"познает мой гнев!")
endfunction
function Bmd takes nothing returns nothing
set fZ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fZ,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(fZ,Condition(function Bmb))
call TriggerAddAction(fZ,function Bmc)
endfunction
function Bme takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local location Hv=Location(-9920,-21100)
local integer MC=LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)
local location Nl=nN(Hv,LoadInteger(PR,GetHandleId(GetExpiredTimer()),2),MC)
local group Me
local boolexpr Np
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),1,LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)>=1 then
call SetUnitPositionLoc(Hw,Nl)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\EnergyBurst.mdl",Nl))
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRangeOfLoc(Me,Nl,300,Np)
call DestroyBoolExpr(Np)
set Nw=25000
set Ps=LY
call ForGroup(Me,function m3)
call DestroyGroup(Me)
set Me=null
set Np=null
else
call RemoveUnit(Hw)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
endif
set Hw=null
call RemoveLocation(Hv)
set Hv=null
call RemoveLocation(Nl)
set Nl=null
endfunction
function Bmf takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local unit VD=LY
local location Hv=GetUnitLoc(VD)
local location Nl=GetUnitLoc(Hw)
call IssueTargetOrder(Hw,"smart",VD)
call SaveInteger(PR,GetHandleId(GetExpiredTimer()),1,LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)>=1 then
if DistanceBetweenPoints(Hv,Nl)<=150 then
call SetUnitLifePercentBJ(VD,100)
set fa[1]=80
set fa[2]=70
call RemoveUnit(Hw)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
endif
else
call RemoveUnit(Hw)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
endif
set Hw=null
set VD=null
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
endfunction
function Bmg takes nothing returns nothing
local unit Hw
local location Me
local timer Np
if GetUnitAbilityLevel(LY,$4131394B)>=1 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30)
set Me=Location(-9920,-21100)
set Hw=CreateUnitAtLoc(Player(11),$6E303843,Me,0)
call SetUnitVertexColor(Hw,255,0,255,255)
set Np=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Np),0,Hw)
call SaveInteger(PR,GetHandleId(Np),1,360)
call SaveInteger(PR,GetHandleId(Np),2,GetRandomInt(200,400))
call TimerStart(Np,.04,true,function Bme)
call EnableTrigger(GetTriggeringTrigger())
call RemoveLocation(Me)
set Me=null
set Np=null
endif
set Hw=null
endfunction
function Bmh takes nothing returns nothing
local location Hv
local unit Hw
local integer Me
local timer Np
if GetUnitLifePercent(LY)<=I2R(fa[2]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(LY,I2R(fa[2]))
call na(LY,"А вот и помощь!!",.028,50,50,255)
set fa[2]=fa[2]-30
set Me=GetRandomInt(1,4)
if Me==1 then
set Hv=Location(-10600,-20250)
elseif Me==2 then
set Hv=Location(-9200,-20250)
elseif Me==3 then
set Hv=Location(-10400,-21740)
elseif Me==4 then
set Hv=Location(-9330,-21680)
endif
set Hw=CreateUnit(Player(10),$6E303843,GetLocationX(Hv),GetLocationY(Hv),0)
set Np=CreateTimer()
call SaveUnitHandle(PR,GetHandleId(Np),0,Hw)
call SaveInteger(PR,GetHandleId(Np),1,45)
call TimerStart(Np,.3,true,function Bmf)
call EnableTrigger(GetTriggeringTrigger())
set Np=null
endif
set Hw=null
call RemoveLocation(Hv)
set Hv=null
endfunction
function Bmi takes nothing returns nothing
local unit NS
local location Hv
local unit Hw
local group Me
local boolexpr Np
local integer Nq
if GetUnitLifePercent(LY)<=I2R(fa[1]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(LY,I2R(fa[1]))
set fa[1]=fa[1]-7
if GetUnitState(LY,UNIT_STATE_LIFE)>.405 then
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,Rect(-10690,-22120,-9020,-19970),Np)
call DestroyBoolExpr(Np)
set NS=GroupPickRandomUnit(Me)
set Hv=GetUnitLoc(NS)
set Hw=CreateUnit(Player(10),$68303239,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
set NS=GroupPickRandomUnit(Me)
set Hv=GetUnitLoc(NS)
set Hw=CreateUnit(Player(10),$68303241,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
set NS=GroupPickRandomUnit(Me)
set Hv=GetUnitLoc(NS)
set Hw=CreateUnit(Player(10),$68303238,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call DestroyGroup(Me)
set Me=null
set Np=null
set Me=CreateGroup()
set Np=Condition(function mq)
call GroupEnumUnitsInRect(Me,Rect(-10690,-22120,-9020,-19970),Np)
call DestroyBoolExpr(Np)
set Nq=CountUnitsInGroup(Me)
if Nq>10 then
call SetUnitLifePercentBJ(LY,100)
set fa[1]=90
set fa[2]=70
call na(LY,"ООО, ну вот вы и доигрались!",.028,255,0,255)
call SetUnitVertexColor(LY,255,0,255,255)
call UnitAddAbility(LY,$4131394B)
call UnitAddAbility(LY,$4131345A)
call UnitAddAbility(LY,$41305655)
call SetUnitAbilityLevel(LY,$4131394B,10)
endif
call DestroyGroup(Me)
set Me=null
endif
endif
call EnableTrigger(GetTriggeringTrigger())
set NS=null
set Hw=null
call RemoveLocation(Hv)
set Hv=null
endfunction
function Bmj takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LY,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bmi)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LY,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bmh)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LY,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bmg)
set He=null
endfunction
function Bmk takes nothing returns boolean
if not (GetUnitLifePercent(LW)<=50.) then
return false
endif
return true
endfunction
function Bml takes nothing returns nothing
if Bmk() then
call DisableTrigger(GetTriggeringTrigger())
call ShowUnitHide(LW)
call PauseUnit(LW,true)
call CreateNUnitsAtLoc(1,$68303230,Player(11),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$6830315A,Player(11),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$68303232,Player(11),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$68303231,Player(11),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
else
endif
endfunction
function Bmm takes nothing returns nothing
set fb=CreateTrigger()
call TriggerRegisterUnitEvent(fb,LW,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fb,function Bml)
endfunction
function Bmn takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303231) then
return false
endif
return true
endfunction
function Bmo takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303230) then
return false
endif
return true
endfunction
function Bmp takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830315A) then
return false
endif
return true
endfunction
function Bmq takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303232) then
return false
endif
return true
endfunction
function Bmr takes nothing returns boolean
if not (SR==4) then
return false
endif
return true
endfunction
function Bms takes nothing returns nothing
if Bmn() then
set SR=SR+1
else
endif
if Bmo() then
set SR=SR+1
else
endif
if Bmp() then
set SR=SR+1
else
endif
if Bmq() then
set SR=SR+1
else
endif
if Bmr() then
call ShowUnitShow(LW)
call PauseUnit(LW,false)
set SR=0
else
endif
endfunction
function Bmt takes nothing returns nothing
set fc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fc,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(fc,function Bms)
endfunction
function Bmu takes nothing returns nothing
local unit VD=LoadUnitHandle(fd,GetHandleId(GetExpiredTimer()),0)
local unit Hw=LoadUnitHandle(fd,GetHandleId(GetExpiredTimer()),1)
local location fe=GetUnitLoc(VD)
local location Nl=GetUnitLoc(Hw)
if GetUnitState(Hw,UNIT_STATE_LIFE)>0 then
call IssuePointOrderLoc(Hw,"smart",fe)
else
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
if DistanceBetweenPoints(fe,Nl)<=100 then
call na(Hw,"Уничтожу!",.028,255,0,0)
call DestroyEffect(AddSpecialEffectLoc("Units\\NightElf\\Wisp\\WispExplode.mdl",Nl))
if d2[1]==3 then
call UnitAddAbility(VD,$4131394B)
else
call UnitAddAbility(VD,$4131394A)
endif
call SetUnitAbilityLevel(VD,$4131394B,GetUnitAbilityLevel(VD,$4131394B)+1)
call SetUnitAbilityLevel(VD,$4131394A,GetUnitAbilityLevel(VD,$4131394A)+1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call KillUnit(Hw)
call RemoveUnit(Hw)
endif
call RemoveLocation(fe)
call RemoveLocation(Nl)
set fe=null
set Nl=null
set Hw=null
set VD=null
endfunction
function Bmv takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local location Hv=GetUnitLoc(Hw)
local location Nl
local integer MC=GetRandomInt(1,4)
local unit Nx
local unit Me
local timer He
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(8.)
call na(Hw,"Иди сюда!",.028,0,255,255)
if MC==1 then
set Nl=Location(684,-23033)
elseif MC==2 then
set Nl=Location(2006,-23033)
elseif MC==3 then
set Nl=Location(2006,-24282)
elseif MC==4 then
set Nl=Location(684,-24282)
endif
set Nx=CreateUnitAtLoc(Player(10),$6E303131,Nl,0)
if d2[1]==3 then
call UnitAddAbility(Nx,$4130384C)
set Me=CreateUnitAtLoc(Player(10),$6530304A,Hv,0)
set Me=null
endif
set He=CreateTimer()
call SaveUnitHandle(fd,GetHandleId(He),0,Hw)
call SaveUnitHandle(fd,GetHandleId(He),1,Nx)
call TimerStart(He,.5,true,function Bmu)
set He=null
set Hw=null
set Nx=null
call RemoveLocation(Hv)
call RemoveLocation(Nl)
set Hv=null
set Nl=null
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bmw takes nothing returns nothing
local location Me
local unit Np
if GetUnitLifePercent(K3)<=I2R(TM[1]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TM[1]))
set Me=GetRandomLocInRect(Gd)
set Np=CreateUnitAtLoc(Player(10),$6E303132,Me,0)
call UnitApplyTimedLife(Np,$42544C46,5)
if d2[1]==3 then
call SetUnitAbilityLevel(Np,$41303057,2)
endif
call IssuePointOrderLoc(Np,"rainoffire",Me)
set TM[1]=TM[1]-10
set Np=null
call RemoveLocation(Me)
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bmx takes nothing returns nothing
local location Me
local unit Np
if d2[1]==3 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
if GetOwningPlayer(GetTriggerUnit())==Player(11) and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>=.405 then
set Me=GetRandomLocInRect(Gd)
set Np=CreateUnitAtLoc(Player(10),$68303148,Me,bj_UNIT_FACING)
call IssuePointOrderLoc(Np,"flamestrike",Me)
call m5(Np,5)
call RemoveLocation(Me)
set Me=null
set Np=null
call TriggerSleepAction(5.)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
endfunction
function Bmy takes nothing returns nothing
local group Me
local boolexpr Np
local unit Nq
local location Ns
local unit Nt
local boolean Ov
if d2[1]==3 then
if GetUnitLifePercent(GetTriggerUnit())<=I2R(TM[2]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TM[2]))
set TM[2]=TM[2]-10
if GetUnitAbilityLevel(GetTriggerUnit(),$41436D33)>=1 then
call SetUnitVertexColor(K3,255,0,0,100)
call na(K3,"|c00ff0000Я физичесий ублюдок!",.028,255,255,255)
call UnitAddAbility(K3,$41313753)
call UnitRemoveAbility(K3,$41436D33)
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,Gd,Np)
set Ov=false
loop
exitwhen not not Ov
set Nq=FirstOfGroup(Me)
if Nq==null then
set Ov=true
else
set Ns=GetUnitLoc(Nq)
set Nt=CreateUnitAtLoc(Player(10),$6530304A,Ns,0)
call SetUnitVertexColor(Nt,255,0,0,100)
call UnitAddAbility(Nt,$41313753)
set Nt=null
call RemoveLocation(Ns)
set Ns=null
call GroupRemoveUnit(Me,Nq)
endif
endloop
call DestroyGroup(Me)
call DestroyBoolExpr(Np)
set Me=null
set Np=null
else
call SetUnitVertexColor(K3,0,0,255,100)
call na(K3,"|c000000ffЯ магический ублюдок!",.028,255,255,255)
call UnitAddAbility(K3,$41436D33)
call UnitRemoveAbility(K3,$41313753)
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,Gd,Np)
set Ov=false
loop
exitwhen not not Ov
set Nq=FirstOfGroup(Me)
if Nq==null then
set Ov=true
else
set Ns=GetUnitLoc(Nq)
set Nt=CreateUnitAtLoc(Player(10),$6530304A,Ns,0)
call SetUnitVertexColor(Nt,0,0,255,100)
call UnitAddAbility(Nt,$41436D33)
set Nt=null
call RemoveLocation(Ns)
set Ns=null
call GroupRemoveUnit(Me,Nq)
endif
endloop
call DestroyGroup(Me)
call DestroyBoolExpr(Np)
set Me=null
set Np=null
endif
call EnableTrigger(GetTriggeringTrigger())
else
endif
endif
set Nq=null
endfunction
function Bmz takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterUnitEvent(He,K3,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bmv)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,K3,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bmw)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,K3,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bmx)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,K3,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bmy)
set He=null
endfunction
function Bm0 takes nothing returns nothing
local location Hv
local unit NR
call DisableTrigger(GetTriggeringTrigger())
set Hv=GetRandomLocInRect(a)
set NR=CreateUnitAtLoc(Player(10),$6E303050,Hv,bj_UNIT_FACING)
call m5(NR,60)
call RemoveLocation(Hv)
set Hv=null
set NR=null
call TriggerSleepAction(15.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bm1 takes nothing returns nothing
local location Me
local unit Np
if GetUnitLifePercent(GetTriggerUnit())<=I2R(TN[0]) and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>=.405 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TN[0]))
set TN[0]=TN[0]-15
set Me=GetRandomLocInRect(a)
set Np=CreateUnitAtLoc(Player(10),$7530304D,Me,bj_UNIT_FACING)
call m5(Np,35)
if d2[2]==3 then
call SetUnitAbilityLevel(Np,$41556464,2)
endif
call IssuePointOrderLoc(Np,"deathanddecay",Me)
call RemoveLocation(Me)
set Me=null
set Np=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bm2 takes nothing returns nothing
local location Hv
local unit NR
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(GetTriggeringTrigger())
set Hv=Location(3500,-21700)
call na(Kx,"|c00ff00ffСкрррр..",.028,255,255,255)
set NR=CreateUnitAtLoc(Player(10),$6E303049,Hv,bj_UNIT_FACING)
if d2[2]==3 then
call nd(NR,20000)
call ne(NR,150)
call UnitAddAbility(NR,$41304E45)
endif
call IssueTargetOrder(NR,"smart",Kx)
call RemoveLocation(Hv)
set Hv=null
set NR=null
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bm3 takes nothing returns nothing
local location Me
if GetUnitTypeId(GetTriggerUnit())==$6E303050 then
set Me=GetUnitLoc(GetTriggerUnit())
if d2[2]==1 then
call CreateUnitAtLoc(Player(10),$6E303046,Me,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(10),$6E303045,Me,bj_UNIT_FACING)
elseif d2[2]==2 then
call CreateUnitAtLoc(Player(10),$6E303046,Me,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(10),$6E303045,Me,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(10),$6E303044,Me,bj_UNIT_FACING)
elseif d2[2]==3 then
call CreateUnitAtLoc(Player(10),$7530304F,Me,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(10),$7530304F,Me,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(10),$7530304F,Me,bj_UNIT_FACING)
endif
call RemoveLocation(Me)
set Me=null
endif
endfunction
function Bm4 takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(ff,GetHandleId(GetExpiredTimer()),0),$4130434E)
call DestroyEffect(LoadEffectHandle(ff,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(ff,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(ff,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function Bm5 takes nothing returns nothing
local effect Me
local timer Np
if d2[2]==3 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30)
call UnitAddAbility(GetTriggerUnit(),$4130434E)
set Me=AddSpecialEffectTarget("war3mapImported\\BlessedField.mdx",GetTriggerUnit(),"origin")
set Np=CreateTimer()
call SaveUnitHandle(ff,GetHandleId(Np),0,GetTriggerUnit())
call SaveEffectHandle(ff,GetHandleId(Np),1,Me)
call TimerStart(Np,8,false,function Bm4)
set Np=null
call EnableTrigger(GetTriggeringTrigger())
endif
set Me=null
endfunction
function Bm6 takes nothing returns nothing
if d2[2]==3 then
if GetUnitTypeId(GetAttacker())==$6E30304F and GetUnitAbilityLevel(GetAttacker(),$4130434E)>=1 and GetUnitState(Kx,UNIT_STATE_LIFE)>.405 then
call ms(GetAttacker(),GetTriggerUnit(),15000)
endif
endif
endfunction
function Bm7 takes nothing returns nothing
local group Me
local boolexpr Np
local unit Nq
local effect Ns
local location Nt
if d2[2]==3 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25)
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,J,Np)
set Nq=GroupPickRandomUnit(Me)
set Ns=AddSpecialEffectTarget("war3mapImported\\BlightwalkerAura.mdl",Nq,"origin")
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Nature.mdl",Nq,"origin"))
call SetUnitInvulnerable(Nq,true)
call DestroyGroup(Me)
call DestroyBoolExpr(Np)
set Me=null
set Np=null
call TriggerSleepAction(3)
set Nt=GetUnitLoc(Nq)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Stormfall Nature.mdl",Nt))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Stormfall Red.mdl",Nt))
set Me=CreateGroup()
set Np=Condition(function mr)
call GroupEnumUnitsInRangeOfLoc(Me,Nt,600,Np)
set Nw=80000
call ForGroup(Me,function m3)
call DestroyEffect(Ns)
call SetUnitInvulnerable(Nq,false)
call DestroyGroup(Me)
call DestroyBoolExpr(Np)
set Me=null
set Np=null
call RemoveLocation(Nt)
set Nt=null
set Ns=null
set Nq=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bm8 takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bm0)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bm1)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bm2)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(He,function Bm3)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bm5)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(He,function Bm6)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bm7)
set He=null
endfunction
function Bm9 takes nothing returns nothing
local unit VD=GetTriggerUnit()
local location Hv=GetUnitLoc(VD)
local unit Me
local unit Np
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if IsUnitAliveBJ(VD)==true then
if GetOwningPlayer(VD)==Player(11) then
set Me=CreateUnitAtLoc(Player(10),$6E303054,Hv,0)
call UnitApplyTimedLife(Me,$42544C46,50)
set Np=CreateUnitAtLoc(Player(10),$6E303053,Hv,0)
call UnitApplyTimedLife(Np,$42544C46,50)
if d2[3]==3 then
call UnitAddAbility(Me,$4130414B)
call UnitAddAbility(Me,$41304456)
call UnitAddAbility(Np,$4130414B)
call UnitAddAbility(Np,$41304456)
endif
set Me=null
set Np=null
endif
endif
set VD=null
call RemoveLocation(Hv)
set Hv=null
call TriggerSleepAction(25.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BnB takes nothing returns nothing
local trigger fg=CreateTrigger()
call TriggerRegisterUnitEvent(fg,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fg,function Bm9)
set fg=null
endfunction
function BnC takes nothing returns nothing
local unit VD=GetTriggerUnit()
local group Me
local boolexpr Np
local unit Nq
local unit Ns
local effect Nt
local real Ov
local real Ow
local real Ox
local group Oy
local boolexpr Oz
if GetUnitLifePercent(VD)<=I2R(fi[1]) then
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(fi[1]))
set fi[1]=fi[1]-17
call DisableTrigger(GetTriggeringTrigger())
if IsUnitAliveBJ(VD)==true then
if GetOwningPlayer(VD)==Player(11) then
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,Rect(5712,-24222,7070,-23000),Np)
call DestroyBoolExpr(Np)
set Nq=GroupPickRandomUnit(Me)
set Ns=CreateUnitAtLoc(Player(11),$68303739,GetUnitLoc(Nq),0)
call m5(Ns,1)
call UnitAddAbility(Ns,$4131324E)
call UnitApplyTimedLife(Ns,$42544C46,1)
call IssueTargetOrder(Ns,"creepthunderbolt",Nq)
set Ns=null
call PauseUnit(Nq,true)
set Nt=AddSpecialEffectTarget("war3mapImported\\Chain Prison.mdx",Nq,"origin")
call DestroyGroup(Me)
set Np=null
set Me=null
call TriggerSleepAction(4.)
set Ov=GetUnitX(Nq)
set Ow=GetUnitY(Nq)
set Ox=300.
set Oy=CreateGroup()
set Oz=Condition(function mo)
call GroupEnumUnitsInRange(Oy,Ov,Ow,Ox,Oz)
call DestroyBoolExpr(Oz)
call DestroyEffect(Nt)
call PauseUnit(Nq,false)
if CountUnitsInGroup(Oy)==1 then
call KillUnit(Nq)
endif
call DestroyGroup(Oy)
set Oz=null
set Oy=null
endif
endif
call EnableTrigger(GetTriggeringTrigger())
endif
set VD=null
set Nt=null
set Nq=null
endfunction
function BnD takes nothing returns nothing
local trigger fh=CreateTrigger()
call TriggerRegisterUnitEvent(fh,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fh,function BnC)
set fh=null
endfunction
function BnE takes nothing returns nothing
local unit Hw=GetEnumUnit()
if d2[3]==1 then
call UnitDamageTarget(Hw,Hw,1000,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
elseif d2[3]==2 then
call UnitDamageTarget(Hw,Hw,2000,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
elseif d2[3]==3 then
call UnitDamageTarget(Hw,Hw,5000,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
set Hw=null
endfunction
function BnF takes nothing returns nothing
local unit VD=LoadUnitHandle(ff,GetHandleId(GetExpiredTimer()),0)
local location fk=GetUnitLoc(VD)
local integer Nb
local integer Me
local location Np
local group Nq
local boolexpr Ns
call SaveInteger(ff,GetHandleId(GetExpiredTimer()),1,LoadInteger(ff,GetHandleId(GetExpiredTimer()),1)-1)
set Nb=LoadInteger(ff,GetHandleId(GetExpiredTimer()),3)
call SaveInteger(ff,GetHandleId(GetExpiredTimer()),3,LoadInteger(ff,GetHandleId(GetExpiredTimer()),3)+30)
if LoadInteger(ff,GetHandleId(GetExpiredTimer()),1)!=0 then
set Me=100
loop
set Np=PolarProjectionBJ(fk,Me,I2R(Nb))
call DestroyEffect(AddSpecialEffect("war3mapImported\\Singularity I Purple.mdl",GetLocationX(Np),GetLocationY(Np)))
set Nq=CreateGroup()
set Ns=Condition(function mr)
call GroupEnumUnitsInRange(Nq,GetLocationX(Np),GetLocationY(Np),100,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function BnE)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
call RemoveLocation(Np)
set Np=null
set Me=Me+100
exitwhen Me>700
endloop
else
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set VD=null
call RemoveLocation(fk)
set fk=null
endfunction
function BnG takes nothing returns nothing
local unit VD=GetTriggerUnit()
local timer Me
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(18.)
call na(VD,"|c00ff9696Сейчас будет весело!",.028,255,255,255)
call TriggerSleepAction(1.5)
if IsUnitAliveBJ(VD)==true then
if GetOwningPlayer(VD)==Player(11) then
set Me=CreateTimer()
call SaveUnitHandle(ff,GetHandleId(Me),0,VD)
call SaveInteger(ff,GetHandleId(Me),1,12)
call TimerStart(Me,.8,true,function BnF)
set Me=null
endif
endif
set VD=null
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BnH takes nothing returns nothing
local trigger fj=CreateTrigger()
call TriggerRegisterUnitEvent(fj,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fj,function BnG)
set fj=null
endfunction
function BnI takes nothing returns nothing
local unit NS=LoadUnitHandle(ff,GetHandleId(GetExpiredTimer()),0)
local unit fm=LoadUnitHandle(ff,GetHandleId(GetExpiredTimer()),1)
local location Me
local group Np
local boolexpr Nq
if IsUnitAliveBJ(NS)==true then
if IsUnitAliveBJ(fm)==true then
call IssueTargetOrder(fm,"smart",NS)
set Me=GetUnitLoc(fm)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Singularity II Red.mdl",GetLocationX(Me),GetLocationY(Me)))
set Np=CreateGroup()
set Nq=Condition(function mr)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),100,Nq)
call DestroyBoolExpr(Nq)
call ForGroup(Np,function BnE)
call DestroyGroup(Np)
set Nq=null
set Np=null
call RemoveLocation(Me)
set Me=null
else
call RemoveSavedHandle(ff,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(ff,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endif
set NS=null
set fm=null
endfunction
function BnJ takes nothing returns nothing
local unit VD=GetTriggerUnit()
local location fk=GetUnitLoc(VD)
local group Me
local boolexpr Np
local unit Nq
local unit Ns
local timer Nt
if GetUnitLifePercent(VD)<=I2R(fi[2]) then
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(fi[2]))
set fi[2]=fi[2]-17
call DisableTrigger(GetTriggeringTrigger())
if IsUnitAliveBJ(VD)==true then
if GetOwningPlayer(VD)==Player(11) then
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,Rect(5752,-24230,7081,-22967),Np)
call DestroyBoolExpr(Np)
set Nq=GroupPickRandomUnit(Me)
set Ns=CreateUnitAtLoc(Player(10),$6E303839,fk,0)
call UnitApplyTimedLife(Ns,$42544C46,8)
set Nt=CreateTimer()
call SaveUnitHandle(ff,GetHandleId(Nt),0,Nq)
call SaveUnitHandle(ff,GetHandleId(Nt),1,Ns)
call TimerStart(Nt,.5,true,function BnI)
set Nt=null
call DestroyGroup(Me)
set Np=null
set Me=null
call na(VD,"|c00ff0000"+GetPlayerName(GetOwningPlayer(Nq))+", беги!",.028,255,255,255)
endif
endif
endif
set VD=null
call RemoveLocation(fk)
set fk=null
call EnableTrigger(GetTriggeringTrigger())
set Ns=null
set Nq=null
endfunction
function BnK takes nothing returns nothing
local trigger fl=CreateTrigger()
call TriggerRegisterUnitEvent(fl,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fl,function BnJ)
set fl=null
endfunction
function BnL takes nothing returns boolean
if not (GetUnitLifePercent(K7)<=85.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BnM takes nothing returns nothing
if BnL() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Стоять на месте - равносильно смерти!",K7,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set fo[GetForLoopIndexA()]=GetRandomLocInRect(i)
set fp[GetForLoopIndexA()]=GetRandomLocInRect(i)
call CreateNUnitsAtLocFacingLocBJ(1,$6E303441,Player(10),fp[GetForLoopIndexA()],fo[GetForLoopIndexA()])
set fq[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(4.,$42544C46,fq[GetForLoopIndexA()])
call IssuePointOrderLocBJ(fq[GetForLoopIndexA()],"carrionswarm",fo[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function BnN takes nothing returns nothing
set fn=CreateTrigger()
call DisableTrigger(fn)
call TriggerRegisterUnitEvent(fn,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fn,function BnM)
endfunction
function BnO takes nothing returns boolean
if not (GetUnitLifePercent(K7)<=58.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BnP takes nothing returns nothing
if BnO() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Стоять на месте - равносильно смерти!",K7,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set fo[GetForLoopIndexA()]=GetRandomLocInRect(i)
set fp[GetForLoopIndexA()]=GetRandomLocInRect(i)
call CreateNUnitsAtLocFacingLocBJ(1,$6E303441,Player(10),fp[GetForLoopIndexA()],fo[GetForLoopIndexA()])
set fq[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(4.,$42544C46,fq[GetForLoopIndexA()])
call IssuePointOrderLocBJ(fq[GetForLoopIndexA()],"carrionswarm",fo[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function BnQ takes nothing returns nothing
set fr=CreateTrigger()
call DisableTrigger(fr)
call TriggerRegisterUnitEvent(fr,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fr,function BnP)
endfunction
function BnR takes nothing returns boolean
if not (GetUnitLifePercent(K7)<=42.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BnS takes nothing returns nothing
if BnR() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Стоять на месте - равносильно смерти!",K7,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set fo[GetForLoopIndexA()]=GetRandomLocInRect(i)
set fp[GetForLoopIndexA()]=GetRandomLocInRect(i)
call CreateNUnitsAtLocFacingLocBJ(1,$6E303441,Player(10),fp[GetForLoopIndexA()],fo[GetForLoopIndexA()])
set fq[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(4.,$42544C46,fq[GetForLoopIndexA()])
call IssuePointOrderLocBJ(fq[GetForLoopIndexA()],"carrionswarm",fo[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function BnT takes nothing returns nothing
set fs=CreateTrigger()
call DisableTrigger(fs)
call TriggerRegisterUnitEvent(fs,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fs,function BnS)
endfunction
function BnU takes nothing returns boolean
if not (GetUnitLifePercent(K7)<=30.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BnV takes nothing returns nothing
if BnU() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Стоять на месте - равносильно смерти!",K7,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set fo[GetForLoopIndexA()]=GetRandomLocInRect(i)
set fp[GetForLoopIndexA()]=GetRandomLocInRect(i)
call CreateNUnitsAtLocFacingLocBJ(1,$6E303441,Player(10),fp[GetForLoopIndexA()],fo[GetForLoopIndexA()])
set fq[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(4.,$42544C46,fq[GetForLoopIndexA()])
call IssuePointOrderLocBJ(fq[GetForLoopIndexA()],"carrionswarm",fo[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function BnW takes nothing returns nothing
set ft=CreateTrigger()
call DisableTrigger(ft)
call TriggerRegisterUnitEvent(ft,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ft,function BnV)
endfunction
function BnX takes nothing returns boolean
if not (GetUnitLifePercent(K7)<=15.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BnY takes nothing returns nothing
if BnX() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Стоять на месте - равносильно смерти!",K7,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set fo[GetForLoopIndexA()]=GetRandomLocInRect(i)
set fp[GetForLoopIndexA()]=GetRandomLocInRect(i)
call CreateNUnitsAtLocFacingLocBJ(1,$6E303441,Player(10),fp[GetForLoopIndexA()],fo[GetForLoopIndexA()])
set fq[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(4.,$42544C46,fq[GetForLoopIndexA()])
call IssuePointOrderLocBJ(fq[GetForLoopIndexA()],"carrionswarm",fo[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function BnZ takes nothing returns nothing
set fu=CreateTrigger()
call DisableTrigger(fu)
call TriggerRegisterUnitEvent(fu,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fu,function BnY)
endfunction
function Bna takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bnb takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bnc takes nothing returns nothing
if Bnb() then
call SetUnitManaPercentBJ(GetEnumUnit(),0.)
call CreateTextTagUnitBJ("MP: 0%",GetEnumUnit(),0,20.,0.,0.,100.,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function Bnd takes nothing returns boolean
if not (SE[GetForLoopIndexA()]>=2) then
return false
endif
return true
endfunction
function Bne takes nothing returns boolean
if not (SE[GetForLoopIndexA()]==1) then
return false
endif
return true
endfunction
function Bnf takes nothing returns boolean
if not (SE[GetForLoopIndexA()]==0) then
return false
endif
return true
endfunction
function Bng takes nothing returns nothing
call RemoveUnit(GetFilterUnit())
endfunction
function Bnh takes nothing returns boolean
if not (GetUnitLifePercent(K7)<=70.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bni takes nothing returns nothing
if Bnh() then
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set fw[GetForLoopIndexA()]=GetRandomLocInRect(BD)
set fx[GetForLoopIndexA()]=CreateUnitAtLoc(Player(10),$6830314A,fw[GetForLoopIndexA()],270.)
call UnitApplyTimedLifeBJ(4.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(fw[GetForLoopIndexA()])
call TriggerSleepAction(2.5)
set fy[GetForLoopIndexA()]=GetUnitLoc(fx[GetForLoopIndexA()])
set SE[GetForLoopIndexA()]=CountUnitsInGroup(GetUnitsInRangeOfLocMatching(200.,fy[GetForLoopIndexA()],Condition(function Bna)))
if Bnf() then
call RemoveUnit(fx[GetForLoopIndexA()])
call SetUnitLifeBJ(K7,GetUnitState(K7,UNIT_STATE_LIFE)+200000.)
call CreateTextTagUnitBJ("+200000",K7,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
if Bne() then
call RemoveUnit(fx[GetForLoopIndexA()])
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Пронесло...")
else
if Bnd() then
call RemoveUnit(fx[GetForLoopIndexA()])
call ForGroupBJ(GetUnitsInRectAll(BD),function Bnc)
else
endif
endif
endif
call RemoveLocation(fy[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set ST=GetUnitsOfTypeIdAll($6830314A)
call ForGroupBJ(ST,function Bng)
call DestroyGroup(ST)
else
endif
endfunction
function Bnj takes nothing returns nothing
set fv=CreateTrigger()
call DisableTrigger(fv)
call TriggerRegisterUnitEvent(fv,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fv,function Bni)
endfunction
function Bnk takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bnl takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bnm takes nothing returns nothing
if Bnl() then
call SetUnitManaPercentBJ(GetEnumUnit(),0.)
call CreateTextTagUnitBJ("MP: 0%",GetEnumUnit(),0,20.,0.,0.,100.,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function Bnn takes nothing returns boolean
if not (SE[GetForLoopIndexA()]>=2) then
return false
endif
return true
endfunction
function Bno takes nothing returns boolean
if not (SE[GetForLoopIndexA()]==1) then
return false
endif
return true
endfunction
function Bnp takes nothing returns boolean
if not (SE[GetForLoopIndexA()]==0) then
return false
endif
return true
endfunction
function Bnq takes nothing returns nothing
call RemoveUnit(GetFilterUnit())
endfunction
function Bnr takes nothing returns boolean
if not (GetUnitLifePercent(K7)<=37.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bns takes nothing returns nothing
if Bnr() then
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set fw[GetForLoopIndexA()]=GetRandomLocInRect(BD)
set fx[GetForLoopIndexA()]=CreateUnitAtLoc(Player(10),$6830314A,fw[GetForLoopIndexA()],270.)
call UnitApplyTimedLifeBJ(4.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(fw[GetForLoopIndexA()])
call TriggerSleepAction(2.5)
set fy[GetForLoopIndexA()]=GetUnitLoc(fx[GetForLoopIndexA()])
set SE[GetForLoopIndexA()]=CountUnitsInGroup(GetUnitsInRangeOfLocMatching(200.,fy[GetForLoopIndexA()],Condition(function Bnk)))
if Bnp() then
call RemoveUnit(fx[GetForLoopIndexA()])
call SetUnitLifeBJ(K7,GetUnitState(K7,UNIT_STATE_LIFE)+200000.)
call CreateTextTagUnitBJ("+200000",K7,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
if Bno() then
call RemoveUnit(fx[GetForLoopIndexA()])
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Пронесло...")
else
if Bnn() then
call RemoveUnit(fx[GetForLoopIndexA()])
call ForGroupBJ(GetUnitsInRectAll(BD),function Bnm)
else
endif
endif
endif
call RemoveLocation(fy[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set ST=GetUnitsOfTypeIdAll($6830314A)
call ForGroupBJ(ST,function Bnq)
call DestroyGroup(ST)
else
endif
endfunction
function Bnt takes nothing returns nothing
set fz=CreateTrigger()
call DisableTrigger(fz)
call TriggerRegisterUnitEvent(fz,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fz,function Bns)
endfunction
function Bnu takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bnv takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bnw takes nothing returns nothing
if Bnv() then
call SetUnitManaPercentBJ(GetEnumUnit(),0.)
call CreateTextTagUnitBJ("MP: 0%",GetEnumUnit(),0,20.,0.,0.,100.,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function Bnx takes nothing returns boolean
if not (SE[GetForLoopIndexA()]>=2) then
return false
endif
return true
endfunction
function Bny takes nothing returns boolean
if not (SE[GetForLoopIndexA()]==1) then
return false
endif
return true
endfunction
function Bnz takes nothing returns boolean
if not (SE[GetForLoopIndexA()]==0) then
return false
endif
return true
endfunction
function Bn0 takes nothing returns nothing
call RemoveUnit(GetFilterUnit())
endfunction
function Bn1 takes nothing returns boolean
if not (GetUnitLifePercent(K7)<=25.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bn2 takes nothing returns nothing
if Bn1() then
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set fw[GetForLoopIndexA()]=GetRandomLocInRect(BD)
set fx[GetForLoopIndexA()]=CreateUnitAtLoc(Player(10),$6830314A,fw[GetForLoopIndexA()],270.)
call UnitApplyTimedLifeBJ(4.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(fw[GetForLoopIndexA()])
call TriggerSleepAction(2.)
set fy[GetForLoopIndexA()]=GetUnitLoc(fx[GetForLoopIndexA()])
set SE[GetForLoopIndexA()]=CountUnitsInGroup(GetUnitsInRangeOfLocMatching(200.,fy[GetForLoopIndexA()],Condition(function Bnu)))
if Bnz() then
call RemoveUnit(fx[GetForLoopIndexA()])
call SetUnitLifeBJ(K7,GetUnitState(K7,UNIT_STATE_LIFE)+200000.)
call CreateTextTagUnitBJ("+200000",K7,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
if Bny() then
call RemoveUnit(fx[GetForLoopIndexA()])
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Пронесло...")
else
if Bnx() then
call RemoveUnit(fx[GetForLoopIndexA()])
call ForGroupBJ(GetUnitsInRectAll(BD),function Bnw)
else
endif
endif
endif
call RemoveLocation(fy[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set ST=GetUnitsOfTypeIdAll($6830314A)
call ForGroupBJ(ST,function Bn0)
call DestroyGroup(ST)
else
endif
endfunction
function Bn3 takes nothing returns nothing
set f0=CreateTrigger()
call DisableTrigger(f0)
call TriggerRegisterUnitEvent(f0,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f0,function Bn2)
endfunction
function Bn4 takes nothing returns boolean
if not (CountUnitsInGroup(ST)<=1) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bn5 takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TO[0])) then
return false
endif
return true
endfunction
function Bn6 takes nothing returns nothing
local location Me
if Bn5() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TO[0]))
set TO[0]=TO[0]-10
set ST=GetUnitsOfTypeIdAll($6E303454)
if Bn4() then
call DestroyGroup(ST)
set Me=GetRandomLocInRect(i)
call CreateNUnitsAtLoc(1,$6E303454,Player(10),Me,bj_UNIT_FACING)
call RemoveLocation(Me)
call UnitAddAbility(K7,$41436D33)
call UnitAddAbility(K7,$41303736)
call CreateTextTagUnitBJ("СЮРПРИЗ!",K7,0,20.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
call DestroyGroup(ST)
call EnableTrigger(GetTriggeringTrigger())
else
endif
set Me=null
endfunction
function Bn7 takes nothing returns nothing
set eJ=CreateTrigger()
call DisableTrigger(eJ)
call TriggerRegisterUnitEvent(eJ,K7,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eJ,function Bn6)
endfunction
function Bn8 takes nothing returns boolean
if not (GetUnitTypeId(GetAttackedUnitBJ())==$6E303130) then
return false
endif
return true
endfunction
function Bn9 takes nothing returns nothing
if Bn8() then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
call CreateTextTagUnitBJ("|c007d7d7dМоскиты|r",LC,0,10,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c007d7d7dМоскиты|r",15.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call IssueImmediateOrderBJ(GetAttackedUnitBJ(),"locustswarm")
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BoB takes nothing returns nothing
set f1=CreateTrigger()
call DisableTrigger(f1)
call TriggerRegisterUnitEvent(f1,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f1,function Bn9)
endfunction
function BoC takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BoD takes nothing returns nothing
if BoC() then
call CreateTextTagUnitBJ("|c00FF0000-40%|r",LC,0,10,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000-40%|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call AddSpecialEffectTargetUnitBJ("origin",GetEnumUnit(),"Abilities\\Spells\\Undead\\Darksummoning\\DarkSummonTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())*.6)
else
endif
endfunction
function BoE takes nothing returns boolean
if not (GetUnitLifePercent(LC)<=I2R(TP[0])) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BoF takes nothing returns nothing
if BoE() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TP[0]))
set TP[0]=TP[0]-25
call ForGroupBJ(GetUnitsInRectAll(x),function BoD)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BoG takes nothing returns nothing
set f2=CreateTrigger()
call DisableTrigger(f2)
call TriggerRegisterUnitEvent(f2,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f2,function BoF)
endfunction
function BoH takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BoI takes nothing returns nothing
if BoH() then
call CreateTextTagUnitBJ("|c00FF0000-30%|r",LC,0,10,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000-30%|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call AddSpecialEffectTargetUnitBJ("origin",GetEnumUnit(),"Abilities\\Spells\\Undead\\Darksummoning\\DarkSummonTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())*.7)
else
endif
endfunction
function BoJ takes nothing returns boolean
if not (GetUnitLifePercent(LC)<=I2R(TP[0])) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BoK takes nothing returns nothing
if BoJ() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TP[0]))
set TP[0]=TP[0]-25
call ForGroupBJ(GetUnitsInRectAll(x),function BoI)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BoL takes nothing returns nothing
set f3=CreateTrigger()
call DisableTrigger(f3)
call TriggerRegisterUnitEvent(f3,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f3,function BoK)
endfunction
function BoM takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BoN takes nothing returns nothing
if BoM() then
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-100000.)
else
endif
endfunction
function BoO takes nothing returns boolean
if not (GetUnitLifePercent(LC)<=I2R(TP[1])) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BoP takes nothing returns nothing
if BoO() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TP[1]))
set TP[1]=TP[1]-15
call CreateTextTagUnitBJ("|c00FF0000Все умрут|r",LC,0,10,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000Все умрут|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitInvulnerable(LC,true)
call PauseUnit(GetTriggerUnit(),true)
call TriggerSleepAction(3.)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(LC,false)
call ForGroupBJ(GetUnitsInRangeOfLocAll(512,GetUnitLoc(GetTriggerUnit())),function BoN)
call AddSpecialEffectTargetUnitBJ("overhead",LC,"Units\\NightElf\\Wisp\\WispExplode.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BoQ takes nothing returns nothing
set f4=CreateTrigger()
call DisableTrigger(f4)
call TriggerRegisterUnitEvent(f4,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f4,function BoP)
endfunction
function BoR takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$5330304A)>=1) then
return false
endif
return true
endfunction
function BoS takes nothing returns boolean
if not (IsUnitAliveBJ(Wi[5])==true) then
return false
endif
return true
endfunction
function BoT takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BoU takes nothing returns nothing
if BoT() then
call SetUnitLifePercentBJ(GetEnumUnit(),5.)
else
endif
endfunction
function BoV takes nothing returns boolean
if not (IsUnitAliveBJ(Wi[6])==true) then
return false
endif
return true
endfunction
function BoW takes nothing returns boolean
if not (GetUnitLifePercent(LC)<=I2R(TP[2])) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BoX takes nothing returns nothing
local location Me
local location Np
if BoW() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TP[2]))
set TP[2]=TP[2]-30
call AddSpecialEffectLocBJ(GetRectCenter(GetPlayableMapRect()),"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call CreateTextTagUnitBJ("|c006969FFЯ разорву вас на куски!|r",LC,0,15.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set Me=Location(8233.,-23225.)
set Wi[5]=CreateUnitAtLoc(Player(10),$6E303154,Me,270.)
call UnitApplyTimedLifeBJ(5.,$42544C46,Wi[5])
call RemoveLocation(Me)
set Np=Location(9367.,-24173.)
set Wi[6]=CreateUnitAtLoc(Player(10),$6E303153,Np,270.)
call UnitApplyTimedLifeBJ(5.,$42544C46,Wi[6])
call RemoveLocation(Np)
call TriggerSleepAction(4.)
if BoS() then
call SetUnitLifePercentBJ(LC,100)
call RemoveUnit(Wi[5])
set TP[0]=75
set TP[1]=85
set TP[2]=80
if BoR() then
call EnableTrigger(f5)
call EnableTrigger(f1)
call EnableTrigger(f2)
call EnableTrigger(f4)
call EnableTrigger(f6)
call EnableTrigger(f7)
call EnableTrigger(f8)
call EnableTrigger(f9)
call EnableTrigger(gB)
else
endif
else
endif
call RemoveUnit(Wi[5])
if BoV() then
call ForGroupBJ(GetUnitsInRectAll(x),function BoU)
call RemoveUnit(Wi[6])
else
endif
call RemoveUnit(Wi[6])
call EnableTrigger(GetTriggeringTrigger())
else
endif
set Np=null
set Me=null
endfunction
function BoY takes nothing returns nothing
set f5=CreateTrigger()
call TriggerRegisterUnitEvent(f5,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f5,function BoX)
endfunction
function BoZ takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830314D) then
return false
endif
return true
endfunction
function Boa takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bob takes nothing returns nothing
if Boa() then
call SetUnitLifePercentBJ(GetEnumUnit(),2.)
else
endif
endfunction
function Boc takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830314C) then
return false
endif
return true
endfunction
function Bod takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Boe takes nothing returns nothing
if Bod() then
call SetUnitManaPercentBJ(GetEnumUnit(),0.)
else
endif
endfunction
function Bof takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830314E) then
return false
endif
return true
endfunction
function Bog takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830314F) then
return false
endif
return true
endfunction
function Boh takes nothing returns nothing
if BoZ() then
call SetUnitLifeBJ(LC,GetUnitStateSwap(UNIT_STATE_LIFE,LC)+350000.)
call RemoveUnit(GetTriggerUnit())
call CreateTextTagUnitBJ("|c0000FF00+350000!|r",LC,0,20.,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000Все умрут|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
endif
if Boc() then
call RemoveUnit(GetTriggerUnit())
call CreateTextTagUnitBJ("|c00FF0000АХХАА!|r",LC,0,20.,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000Все умрут|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call ForGroupBJ(GetUnitsInRectAll(x),function Bob)
else
endif
if Bof() then
call RemoveUnit(GetTriggerUnit())
call CreateTextTagUnitBJ("|c000000FFАХХАА!|r",LC,0,20.,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000Все умрут|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call ForGroupBJ(GetUnitsInRectAll(x),function Boe)
else
endif
if Bog() then
call RemoveUnit(GetTriggerUnit())
call CreateTextTagUnitBJ("|c00FF0000АХХАА!|r",LC,0,20.,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000Все умрут|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set YU[124]=GetRectCenter(Ce)
call CreateNUnitsAtLoc(1,$68303151,Player(10),YU[124],bj_UNIT_FACING)
call RemoveLocation(YU[124])
else
endif
endfunction
function Boi takes nothing returns nothing
set gC=CreateTrigger()
call TriggerRegisterEnterRectSimple(gC,Ce)
call TriggerAddAction(gC,function Boh)
endfunction
function Boj takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv=GetUnitLoc(LC)
call SetUnitPositionLoc(Hw,Hv)
call UnitDamageTarget(LC,Hw,20000,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call RemoveLocation(Hv)
set Hv=null
set Hw=null
endfunction
function Bok takes nothing returns nothing
local unit Hw=LoadUnitHandle(ff,GetHandleId(GetExpiredTimer()),1)
local location Me
local location Np
local group Nq
local boolexpr Ns
call SaveInteger(ff,GetHandleId(GetExpiredTimer()),2,LoadInteger(ff,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(ff,GetHandleId(GetExpiredTimer()),2)>=1 then
set Me=GetUnitLoc(Hw)
set Np=nN(Me,10,GetUnitFacing(Hw))
call SetUnitPositionLoc(Hw,Np)
set Nq=CreateGroup()
set Ns=Condition(function mr)
call GroupEnumUnitsInRange(Nq,GetLocationX(Me),GetLocationY(Me),70,Ns)
call DestroyBoolExpr(Ns)
set Ps=Hw
set Nw=50000
call ForGroup(Nq,function m3)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
call RemoveLocation(Me)
set Me=null
call RemoveLocation(Np)
set Np=null
else
call RemoveUnit(Hw)
call RemoveSavedHandle(ff,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(ff,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function Bol takes nothing returns nothing
local unit Hw=CreateUnit(Player(10),$68303739,8820,-23684,30*LoadInteger(ff,GetHandleId(GetExpiredTimer()),2))
local timer He
call AddSpecialEffectTarget("war3mapImported\\Firebrand Shot Red.mdl",Hw,"chest")
call SetUnitScale(Hw,4,4,4)
set He=CreateTimer()
call SaveUnitHandle(ff,GetHandleId(He),1,Hw)
call SaveInteger(ff,GetHandleId(He),2,200)
call TimerStart(He,.07,true,function Bok)
set He=null
set Hw=null
call SaveInteger(ff,GetHandleId(GetExpiredTimer()),2,LoadInteger(ff,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(ff,GetHandleId(GetExpiredTimer()),2)<1 then
call RemoveSavedInteger(ff,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Bom takes nothing returns nothing
local timer Me
if GetUnitAbilityLevel(LC,$4130314A)==3 and GetUnitLifePercent(LC)<=I2R(TP[3]) and GetOwningPlayer(LC)!=Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitLifePercentBJ(LC,I2R(TP[3]))
set TP[3]=TP[3]-15
call DisableTrigger(GetTriggeringTrigger())
call na(LC,"|c00000000Смерть? Легко!",.031,255,255,255)
call TriggerSleepAction(2.)
set Me=CreateTimer()
call SaveInteger(ff,GetHandleId(Me),2,13)
call TimerStart(Me,.5,true,function Bol)
set Me=null
if TP[3]<35 then
set Me=CreateTimer()
call SaveInteger(ff,GetHandleId(Me),2,13)
call TimerStart(Me,.5,true,function Bol)
set Me=null
endif
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bon takes nothing returns nothing
local group Me
local boolexpr Np
if GetUnitAbilityLevel(LC,$4130314A)==3 and GetOwningPlayer(LC)!=Player(PLAYER_NEUTRAL_PASSIVE) and GetUnitLifePercent(LC)<=I2R(TP[4]) then
call SetUnitLifePercentBJ(LC,I2R(TP[4]))
set TP[4]=TP[4]-15
call DisableTrigger(GetTriggeringTrigger())
call na(LC,"|c00ff9696Идите сюда",.028,255,255,255)
call TriggerSleepAction(1.5)
set Me=CreateGroup()
set Np=Condition(function mr)
call GroupEnumUnitsInRange(Me,GetUnitX(LC),GetUnitY(LC),1000,Np)
call DestroyBoolExpr(Np)
call ForGroup(Me,function Boj)
call DestroyGroup(Me)
set Np=null
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Boo takes nothing returns nothing
local location Me
local location Np
local unit Nq
if GetUnitAbilityLevel(LC,$4130314A)==3 and GetOwningPlayer(LC)!=Player(PLAYER_NEUTRAL_PASSIVE) then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30.)
call na(LC,"|c00ff00ffМёртвые придут!",.028,255,255,255)
set Me=Location(8191,-23142)
set Np=Location(8816,-23697)
set Nq=CreateUnitAtLoc(Player(10),$6830314D,Me,0)
call IssuePointOrderLoc(Nq,"move",Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
set Me=Location(9469,-23173)
set Nq=CreateUnitAtLoc(Player(10),$6830314C,Me,0)
call IssuePointOrderLoc(Nq,"move",Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
set Me=Location(9410,-24237)
set Nq=CreateUnitAtLoc(Player(10),$6830314E,Me,0)
call IssuePointOrderLoc(Nq,"move",Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
set Me=Location(8201,-24245)
set Nq=CreateUnitAtLoc(Player(10),$6830314F,Me,0)
call IssuePointOrderLoc(Nq,"move",Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
call RemoveLocation(Np)
set Np=null
set Nq=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bop takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Boo)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bon)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bom)
set He=null
endfunction
function Boq takes nothing returns boolean
if not (GetUnitLifePercent(LC)<=50.) then
return false
endif
return true
endfunction
function Bor takes nothing returns nothing
if Boq() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),50.)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
call EnableTrigger(Uw)
call ShowUnit(KI,true)
call CreateNUnitsAtLoc(1,$6830334F,Player(10),GetRectCenter(Ce),bj_UNIT_FACING)
else
endif
endfunction
function Bos takes nothing returns nothing
set f7=CreateTrigger()
call DisableTrigger(f7)
call TriggerRegisterUnitEvent(f7,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f7,function Bor)
endfunction
function Bot takes nothing returns boolean
if not (GetUnitLifePercent(LC)<=35.) then
return false
endif
return true
endfunction
function Bou takes nothing returns nothing
if Bot() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),35.)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
call EnableTrigger(Uw)
call SetUnitPosition(LC,8837,-23140)
call CreateNUnitsAtLoc(1,$68303350,Player(10),GetRectCenter(Ce),bj_UNIT_FACING)
call ShowUnit(KI,true)
else
endif
endfunction
function Bov takes nothing returns nothing
set gB=CreateTrigger()
call DisableTrigger(gB)
call TriggerRegisterUnitEvent(gB,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gB,function Bou)
endfunction
function Bow takes nothing returns boolean
if not (GetUnitLifePercent(LC)<=20.) then
return false
endif
return true
endfunction
function Box takes nothing returns nothing
if Bow() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),20.)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
call EnableTrigger(Uw)
call SetUnitPosition(LC,8837,-23140)
call CreateNUnitsAtLoc(1,$68303351,Player(10),GetRectCenter(Ce),bj_UNIT_FACING)
call ShowUnit(KI,true)
else
endif
endfunction
function Boy takes nothing returns nothing
set f8=CreateTrigger()
call DisableTrigger(f8)
call TriggerRegisterUnitEvent(f8,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f8,function Box)
endfunction
function Boz takes nothing returns boolean
if not (GetUnitLifePercent(LC)<=5.) then
return false
endif
return true
endfunction
function Bo0 takes nothing returns nothing
if Boz() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),5.)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
call EnableTrigger(Uw)
call SetUnitPosition(LC,8837,-23140)
call CreateNUnitsAtLoc(1,$68303352,Player(10),GetRectCenter(Ce),bj_UNIT_FACING)
call ShowUnit(KI,true)
else
endif
endfunction
function Bo1 takes nothing returns nothing
set f9=CreateTrigger()
call DisableTrigger(f9)
call TriggerRegisterUnitEvent(f9,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f9,function Bo0)
endfunction
function Bo2 takes nothing returns nothing
local location e7
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(15.)
set e7=GetRandomLocInRect(BS)
call CreateNUnitsAtLoc(1,$75303059,Player(10),e7,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(4.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(e7)
call EnableTrigger(GetTriggeringTrigger())
set e7=null
endfunction
function Bo3 takes nothing returns nothing
set eI=CreateTrigger()
call DisableTrigger(eI)
call TriggerRegisterUnitEvent(eI,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eI,function Bo2)
endfunction
function Bo4 takes nothing returns nothing
local group WC
local boolexpr gD
local location Me
local location Np
local location Nq
local integer Ns
local location Nt
local boolexpr Ov
call na(KI,"|c00ff9696А вот тут мы и позабавимся",.023,255,255,255)
call TriggerSleepAction(1.6)
set WC=CreateGroup()
set gD=Condition(function mr)
call GroupEnumUnitsInRect(WC,x,gD)
call DestroyBoolExpr(gD)
if CountUnitsInGroup(WC)!=0 then
call ForGroup(WC,function Boj)
call DestroyGroup(WC)
set gD=null
set WC=null
set Me=GetUnitLoc(KI)
set Np=Location(GetRandomReal(8140,9550),-24170)
call SetUnitFacingTimed(KI,AngleBetweenPoints(Me,Np),0)
call RemoveLocation(Me)
call RemoveLocation(Np)
call TriggerSleepAction(2.1)
set Nq=GetUnitLoc(KI)
set Ns=50
loop
set Nt=nN(Nq,Ns,GetUnitFacing(KI))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",Nt))
set WC=CreateGroup()
set Ov=Condition(function mr)
call GroupEnumUnitsInRange(WC,GetLocationX(Nt),GetLocationY(Nt),80,Ov)
call DestroyBoolExpr(Ov)
set Ps=KI
set Nw=95000
call ForGroup(WC,function m3)
call DestroyGroup(WC)
set Ov=null
set WC=null
call RemoveLocation(Nt)
set Nt=null
set Ns=Ns+50
exitwhen Ns>=2300
endloop
call RemoveLocation(Nq)
set Nq=null
else
call DisableTrigger(Uw)
endif
set Np=null
set Me=null
set WC=null
endfunction
function Bo5 takes nothing returns nothing
set Uw=CreateTrigger()
call DisableTrigger(Uw)
call TriggerRegisterTimerEventPeriodic(Uw,9.)
call TriggerAddAction(Uw,function Bo4)
endfunction
function Bo6 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303059) then
return false
endif
return true
endfunction
function Bo7 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bo8 takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),5.)
endfunction
function Bo9 takes nothing returns nothing
local location dw=GetUnitLoc(GetTriggerUnit())
local group Xw=GetUnitsInRangeOfLocMatching(400.,dw,Condition(function Bo7))
call ForGroupBJ(Xw,function Bo8)
call RemoveLocation(dw)
call DestroyGroup(Xw)
set Xw=null
set dw=null
endfunction
function BpB takes nothing returns nothing
set gE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gE,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gE,Condition(function Bo6))
call TriggerAddAction(gE,function Bo9)
endfunction
function BpC takes nothing returns nothing
local unit VD=GetTriggerUnit()
local location Me
local location Np
local unit Nq
local location Ns
local unit Nt
local integer Ov
local location Ow
local location Ox
local real Oy
local real Oz
local real O1
local group O2
local boolexpr O3
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(15)
if GetOwningPlayer(VD)==Player(11) then
set Me=GetUnitLoc(VD)
set Np=Location(10404,-22708)
set Nq=CreateUnitAtLoc(Player(11),$6E303234,Np,270)
call SetUnitFacingToFaceLocTimed(Nq,Me,1)
set Ns=Location(12644,-22708)
set Nt=CreateUnitAtLoc(Player(11),$6E303234,Ns,270)
call SetUnitFacingToFaceLocTimed(Nt,Me,1)
call TriggerSleepAction(3)
set Ov=80
loop
set Ow=nN(Np,Ov,GetUnitFacing(Nq))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\AquaSpike.mdx",Ow))
set Oy=GetLocationX(Ow)
set Oz=GetLocationY(Ow)
set O1=100.
set O2=CreateGroup()
set O3=Condition(function mr)
call GroupEnumUnitsInRange(O2,Oy,Oz,O1,O3)
call DestroyBoolExpr(O3)
set Ps=Nq
set Nw=200000
call ForGroup(O2,function m3)
call DestroyGroup(O2)
set O3=null
set O2=null
call RemoveLocation(Ow)
set Ow=null
set Ov=Ov+80
exitwhen Ov>=2000
endloop
set Ov=80
loop
set Ox=nN(Ns,Ov,GetUnitFacing(Nt))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\AquaSpike.mdx",Ox))
set Oy=GetLocationX(Ox)
set Oz=GetLocationY(Ox)
set O1=100.
set O2=CreateGroup()
set O3=Condition(function mr)
call GroupEnumUnitsInRange(O2,Oy,Oz,O1,O3)
call DestroyBoolExpr(O3)
set Ps=Nt
set Nw=200000
call ForGroup(O2,function m3)
call DestroyGroup(O2)
set O3=null
set O2=null
call RemoveLocation(Ox)
set Ox=null
set Ov=Ov+80
exitwhen Ov>=2000
endloop
call RemoveLocation(Np)
call RemoveLocation(Ns)
call RemoveLocation(Me)
call RemoveUnit(Nq)
call RemoveUnit(Nt)
set Np=null
set Ns=null
set Me=null
set Nq=null
set Nt=null
endif
call EnableTrigger(GetTriggeringTrigger())
set VD=null
endfunction
function BpD takes nothing returns nothing
local trigger gF=CreateTrigger()
call TriggerRegisterUnitEvent(gF,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gF,function BpC)
set gF=null
endfunction
function BpE takes nothing returns nothing
local unit Hw=GetEnumUnit()
if Nw==1 then
if RectContainsUnit(Rect(11517,-24457,12600,-23420),Hw)!=true then
call KillUnit(Hw)
endif
elseif Nw==2 then
if RectContainsUnit(Rect(11517,-24457,10440,-23420),Hw)!=true then
call KillUnit(Hw)
endif
elseif Nw==3 then
if RectContainsUnit(Rect(10440,-23420,15517,-22380),Hw)!=true then
call KillUnit(Hw)
endif
elseif Nw==4 then
if RectContainsUnit(Rect(11517,-23380,12600,-22420),Hw)!=true then
call KillUnit(Hw)
endif
endif
set Hw=null
endfunction
function BpF takes nothing returns nothing
local unit Me
local location Np
local region Nq
local region Ns
local region Nt
local region Ov
local integer Ow
local effect Ox
local group Oy
local boolexpr Oz
if GetUnitAbilityLevel(LJ,$41303647)==2 and GetUnitLifePercent(LJ)<=I2R(UR[1]) then
call SetUnitLifePercentBJ(LJ,I2R(UR[1]))
set UR[1]=UR[1]-10
call DisableTrigger(GetTriggeringTrigger())
set Me=GetTriggerUnit()
set Np=GetUnitLoc(Me)
if GetUnitAbilityLevel(Me,$5330304A)>=1 then
if GetOwningPlayer(Me)==Player(11) then
set Nq=CreateRegion()
set Ns=CreateRegion()
set Nt=CreateRegion()
set Ov=CreateRegion()
call RegionAddRect(Nq,Rect(11517,-24457,12600,-23420))
call RegionAddRect(Ns,Rect(11517,-24457,10440,-23420))
call RegionAddRect(Nt,Rect(10440,-23420,15517,-22380))
call RegionAddRect(Ov,Rect(11517,-23380,12600,-22420))
set Ow=GetRandomInt(1,4)
if Ow==1 then
set Ox=AddSpecialEffect("war3mapImported\\Void Disc.mdx",11950,-23874)
elseif Ow==2 then
set Ox=AddSpecialEffect("war3mapImported\\Void Disc.mdx",11103,-23874)
elseif Ow==3 then
set Ox=AddSpecialEffect("war3mapImported\\Void Disc.mdx",11103,-22955)
elseif Ow==4 then
set Ox=AddSpecialEffect("war3mapImported\\Void Disc.mdx",11950,-22955)
endif
call TriggerSleepAction(4)
call DestroyEffect(Ox)
set Oy=CreateGroup()
set Oz=Condition(function mr)
call GroupEnumUnitsInRange(Oy,GetLocationX(Np),GetLocationY(Np),2000,Oz)
call DestroyBoolExpr(Oz)
set Nw=Ow
call ForGroup(Oy,function BpE)
call DestroyGroup(Oy)
set Oz=null
set Oy=null
set Ox=null
call RemoveRegion(Nq)
call RemoveRegion(Ns)
call RemoveRegion(Nt)
call RemoveRegion(Ov)
set Nq=null
set Ns=null
set Nt=null
set Ov=null
endif
endif
call RemoveLocation(Np)
set Np=null
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function BpG takes nothing returns nothing
local trigger gG=CreateTrigger()
call TriggerRegisterUnitEvent(gG,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gG,function BpF)
set gG=null
endfunction
function BpH takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BpI takes nothing returns boolean
if not (IsUnitAliveBJ(LJ)==true) then
return false
endif
if not (GetOwningPlayer(LJ)==Player(11)) then
return false
endif
return true
endfunction
function BpJ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if BpI() then
set YU[70]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303235,Player(10),YU[70],bj_UNIT_FACING)
set Wi[10]=GetLastCreatedUnit()
call na(Wi[10],"|c00ff0000Беги!",.025,255,255,255)
call TriggerSleepAction(1.)
call AddSpecialEffectTargetUnitBJ("overhead",Wi[10],"Units\\NightElf\\Wisp\\WispExplode.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call TriggerSleepAction(2.)
call UnitDamagePointLoc(Wi[10],0,400.,GetUnitLoc(Wi[10]),5000.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
call TriggerSleepAction(1.)
set ST=GetUnitsOfTypeIdAll($6E303235)
call ForGroupBJ(ST,function BpH)
call DestroyGroup(ST)
call RemoveLocation(YU[70])
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BpK takes nothing returns nothing
set eQ=CreateTrigger()
call DisableTrigger(eQ)
call TriggerRegisterUnitEvent(eQ,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eQ,function BpJ)
endfunction
function BpL takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BpM takes nothing returns boolean
if not (IsUnitAliveBJ(LJ)==true) then
return false
endif
if not (GetOwningPlayer(LJ)==Player(11)) then
return false
endif
return true
endfunction
function BpN takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if BpM() then
set YU[70]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303235,Player(10),YU[70],bj_UNIT_FACING)
set Wi[10]=GetLastCreatedUnit()
call na(Wi[10],"|c00ff0000Беги!",.025,255,255,255)
call TriggerSleepAction(1.)
call AddSpecialEffectTargetUnitBJ("overhead",Wi[10],"Units\\NightElf\\Wisp\\WispExplode.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call TriggerSleepAction(2.)
call UnitDamagePointLoc(Wi[10],0,700.,GetUnitLoc(Wi[10]),10000.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
call TriggerSleepAction(1.)
set ST=GetUnitsOfTypeIdAll($6E303235)
call ForGroupBJ(ST,function BpL)
call DestroyGroup(ST)
call RemoveLocation(YU[70])
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BpO takes nothing returns nothing
set eU=CreateTrigger()
call DisableTrigger(eU)
call TriggerRegisterUnitEvent(eU,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eU,function BpN)
endfunction
function BpP takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BpQ takes nothing returns boolean
if not (IsUnitAliveBJ(LJ)==true) then
return false
endif
if not (GetOwningPlayer(LJ)==Player(11)) then
return false
endif
return true
endfunction
function BpR takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(15.)
if BpQ() then
set YU[71]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$68303037,Player(10),YU[71],bj_UNIT_FACING)
set Wi[11]=GetLastCreatedUnit()
call na(Wi[11],"|c00ff00ffЯ здесь",.025,255,255,255)
call TriggerSleepAction(3.)
set ST=GetUnitsOfTypeIdAll($68303037)
call ForGroupBJ(ST,function BpP)
call DestroyGroup(ST)
call RemoveLocation(YU[71])
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BpS takes nothing returns nothing
set eR=CreateTrigger()
call DisableTrigger(eR)
call TriggerRegisterUnitEvent(eR,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eR,function BpR)
endfunction
function BpT takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BpU takes nothing returns boolean
if not (IsUnitAliveBJ(LJ)==true) then
return false
endif
if not (GetOwningPlayer(LJ)==Player(11)) then
return false
endif
return true
endfunction
function BpV takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(8.)
if BpU() then
set YU[71]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$68303037,Player(10),YU[71],bj_UNIT_FACING)
set Wi[11]=GetLastCreatedUnit()
call na(Wi[11],"|c00ff00ffЯ здесь",.025,255,255,255)
call TriggerSleepAction(3.)
set ST=GetUnitsOfTypeIdAll($68303037)
call ForGroupBJ(ST,function BpT)
call DestroyGroup(ST)
call RemoveLocation(YU[71])
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BpW takes nothing returns nothing
set eV=CreateTrigger()
call DisableTrigger(eV)
call TriggerRegisterUnitEvent(eV,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eV,function BpV)
endfunction
function BpX takes nothing returns boolean
if not (GetUnitLifePercent(LJ)<=75.) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303647)==1) then
return false
endif
return true
endfunction
function BpY takes nothing returns nothing
if BpX() then
call DisableTrigger(GetTriggeringTrigger())
set YU[73]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303233,Player(10),YU[73],bj_UNIT_FACING)
call RemoveLocation(YU[73])
else
endif
endfunction
function BpZ takes nothing returns nothing
set gH=CreateTrigger()
call DisableTrigger(gH)
call TriggerRegisterUnitEvent(gH,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gH,function BpY)
endfunction
function Bpa takes nothing returns boolean
if not (GetUnitLifePercent(LJ)<=60.) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303647)==1) then
return false
endif
return true
endfunction
function Bpb takes nothing returns nothing
if Bpa() then
call DisableTrigger(GetTriggeringTrigger())
set YU[73]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303233,Player(10),YU[73],bj_UNIT_FACING)
call RemoveLocation(YU[73])
else
endif
endfunction
function Bpc takes nothing returns nothing
set gI=CreateTrigger()
call DisableTrigger(gI)
call TriggerRegisterUnitEvent(gI,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gI,function Bpb)
endfunction
function Bpd takes nothing returns boolean
if not (GetUnitLifePercent(LJ)<=25.) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303647)==1) then
return false
endif
return true
endfunction
function Bpe takes nothing returns nothing
if Bpd() then
call DisableTrigger(GetTriggeringTrigger())
set YU[73]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303236,Player(10),YU[73],bj_UNIT_FACING)
call RemoveLocation(YU[73])
else
endif
endfunction
function Bpf takes nothing returns nothing
set gJ=CreateTrigger()
call DisableTrigger(gJ)
call TriggerRegisterUnitEvent(gJ,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gJ,function Bpe)
endfunction
function Bpg takes nothing returns boolean
if not (GetUnitLifePercent(LJ)<=45.) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303647)==1) then
return false
endif
return true
endfunction
function Bph takes nothing returns nothing
if Bpg() then
call DisableTrigger(GetTriggeringTrigger())
set YU[73]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303236,Player(10),YU[73],bj_UNIT_FACING)
call RemoveLocation(YU[73])
else
endif
endfunction
function Bpi takes nothing returns nothing
set gK=CreateTrigger()
call DisableTrigger(gK)
call TriggerRegisterUnitEvent(gK,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gK,function Bph)
endfunction
function Bpj takes nothing returns nothing
local unit Hw=LoadUnitHandle(ff,GetHandleId(GetExpiredTimer()),1)
local unit Me
if GetUnitState(Hw,UNIT_STATE_LIFE)>.405 then
set Me=CreateUnitAtLoc(Player(10),$6E303157,Location(11500,-23400),0)
call UnitAddAbility(Me,$41304356)
call UnitAddAbility(Me,$4131394F)
call SetUnitAbilityLevel(Me,$4131394F,4)
call UnitAddAbility(Me,$41313643)
call UnitAddAbility(Me,$41305655)
set Me=null
set Me=CreateUnitAtLoc(Player(10),$6E303159,Location(11500,-23400),0)
call UnitAddAbility(Me,$41304356)
call UnitAddAbility(Me,$4131394F)
call SetUnitAbilityLevel(Me,$4131394F,4)
call UnitAddAbility(Me,$41313643)
call UnitAddAbility(Me,$41305655)
set Me=null
set Me=CreateUnitAtLoc(Player(10),$6E303155,Location(11500,-23400),0)
call UnitAddAbility(Me,$41304356)
call UnitAddAbility(Me,$4131394F)
call SetUnitAbilityLevel(Me,$4131394F,4)
call UnitAddAbility(Me,$41313643)
call UnitAddAbility(Me,$41305655)
set Me=null
call SaveInteger(ff,GetHandleId(GetExpiredTimer()),2,LoadInteger(ff,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(ff,GetHandleId(GetExpiredTimer()),2)<1 then
call KillUnit(Hw)
call RemoveUnit(Hw)
call RemoveSavedHandle(ff,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(ff,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
else
call RemoveUnit(Hw)
call RemoveSavedHandle(ff,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(ff,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function Bpk takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv=GetRandomLocInRect(Dj)
call SetUnitPositionLoc(Hw,Hv)
call RemoveLocation(Hv)
set Hv=null
set Hw=null
endfunction
function Bpl takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv=GetUnitLoc(Hw)
local integer Pf=50
local location Nl
local group Me
local boolexpr Np
loop
set Nl=nN(Hv,Pf,GetUnitFacing(Hw))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\AquaSpike.mdx",Nl))
set Me=CreateGroup()
set Np=Condition(function mr)
call GroupEnumUnitsInRange(Me,GetLocationX(Nl),GetLocationY(Nl),80,Np)
call DestroyBoolExpr(Np)
set Ps=LJ
set Nw=15000
call ForGroup(Me,function m3)
call DestroyGroup(Me)
set Np=null
set Me=null
call RemoveLocation(Nl)
set Nl=null
set Pf=Pf+50
exitwhen Pf>=1200
endloop
call RemoveLocation(Hv)
set Hv=null
set Hw=null
endfunction
function Bpm takes nothing returns nothing
local unit Hw=LoadUnitHandle(ff,GetHandleId(GetExpiredTimer()),1)
local location Me
local location Np
local group Nq
local boolexpr Ns
call SaveInteger(ff,GetHandleId(GetExpiredTimer()),2,LoadInteger(ff,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(ff,GetHandleId(GetExpiredTimer()),2)>=1 then
set Me=GetUnitLoc(Hw)
set Np=nN(Me,13,GetUnitFacing(Hw))
call SetUnitPositionLoc(Hw,Np)
set Nq=CreateGroup()
set Ns=Condition(function mr)
call GroupEnumUnitsInRange(Nq,GetLocationX(Me),GetLocationY(Me),45,Ns)
call DestroyBoolExpr(Ns)
set Ps=Hw
set Nw=10000
call ForGroup(Nq,function m3)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
call RemoveLocation(Me)
set Me=null
call RemoveLocation(Np)
set Np=null
else
call RemoveUnit(Hw)
call RemoveSavedHandle(ff,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(ff,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function Bpn takes nothing returns nothing
local group Me
local boolexpr Np
local location Nq
local integer Ns
local unit Nt
local timer Ov
if GetUnitAbilityLevel(LJ,$41303647)==2 and GetUnitLifePercent(LJ)<=I2R(UR[0]) then
call SetUnitLifePercentBJ(LJ,I2R(UR[0]))
set UR[0]=UR[0]-10
call DisableTrigger(GetTriggeringTrigger())
call na(LJ,"|c00ffff00Вы больше не друзья",.03,255,255,255)
call TriggerSleepAction(1)
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,Dj,Np)
call ForGroup(Me,function Bpk)
call DestroyBoolExpr(Np)
call DestroyGroup(Me)
set Np=null
set Me=null
set Nq=GetRandomLocInRect(Dj)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl",Nq))
call TriggerSleepAction(2)
set Ns=1
loop
set Nt=CreateUnitAtLoc(Player(10),$68303739,Nq,30*Ns)
call AddSpecialEffectTarget("war3mapImported\\Firebrand Shot Blue.mdl",Nt,"chest")
call SetUnitScale(Nt,2,2,2)
set Ov=CreateTimer()
call SaveUnitHandle(ff,GetHandleId(Ov),1,Nt)
call SaveInteger(ff,GetHandleId(Ov),2,200)
call TimerStart(Ov,.07,true,function Bpm)
set Ov=null
set Nt=null
set Ns=Ns+1
exitwhen Ns>12
endloop
call RemoveLocation(Nq)
set Nq=null
set Me=CreateGroup()
set Np=Condition(function mr)
call GroupEnumUnitsInRect(Me,Dj,Np)
call ForGroup(Me,function Bpl)
call DestroyBoolExpr(Np)
call DestroyGroup(Me)
set Np=null
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bpo takes nothing returns nothing
local unit Me
local timer Np
if GetUnitAbilityLevel(LJ,$41303647)==2 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(76)
call na(LJ,"|c00ff7f00Производство налажено!",.03,255,255,255)
set Me=CreateUnitAtLoc(Player(10),$68303354,Location(11500,-23400),0)
set Np=CreateTimer()
call SaveUnitHandle(ff,GetHandleId(Np),1,Me)
call SaveInteger(ff,GetHandleId(Np),2,5)
call TimerStart(Np,10,true,function Bpj)
set Np=null
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bpp takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bpn)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function Bpo)
set He=null
endfunction
function Bpq takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bpr takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bps takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
if Bpr() then
call CreateTextTagUnitBJ("Этого Вы не ожидали точно!",LJ,0,15.,0.,100,100,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call PauseUnit(GetTriggerUnit(),true)
call TriggerSleepAction(1.5)
call PauseUnit(GetTriggerUnit(),false)
set V2=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRectMatching(Di,Condition(function Bpq))
set gM=GroupPickRandomUnit(ST)
call CreateNUnitsAtLoc(1,$68303346,Player(10),V2,bj_UNIT_FACING)
call SetUnitVertexColor(GetLastCreatedUnit(),0,0,0,100)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"attack",gM)
call UnitApplyTimedLifeBJ(5.,$42544C46,GetLastCreatedUnit())
call CreateTextTagUnitBJ(GetPlayerName(GetOwningPlayer(gM))+" держись!",LJ,0,15.,100.,0.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set gM=null
call DestroyGroup(ST)
call RemoveLocation(V2)
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bpt takes nothing returns nothing
set gL=CreateTrigger()
call TriggerRegisterUnitEvent(gL,LJ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gL,function Bps)
endfunction
function Bpu takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bpv takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-20.)
endfunction
function Bpw takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bpx takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if Bpw() then
set SV[68]=GetUnitsInRectMatching(B7,Condition(function Bpu))
call ForGroupBJ(SV[68],function Bpv)
call DestroyGroup(SV[68])
else
endif
set YU[87]=GetRandomLocInRect(B7)
call CreateNUnitsAtLoc(1,$68303049,Player(10),YU[87],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(7.,$42544C46,GetLastCreatedUnit())
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bpy takes nothing returns nothing
set gN=CreateTrigger()
call TriggerRegisterUnitEvent(gN,LS,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gN,function Bpx)
endfunction
function Bpz takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bp0 takes nothing returns boolean
return GetFilterUnit()!=gP[2]
endfunction
function Bp1 takes nothing returns boolean
return GetFilterUnit()!=gP[3]
endfunction
function Bp2 takes nothing returns boolean
return GetBooleanAnd(Bp0(),Bp1())
endfunction
function Bp3 takes nothing returns boolean
return GetBooleanAnd(Bpz(),Bp2())
endfunction
function Bp4 takes nothing returns nothing
local unit Me
local unit Np
local unit Nq
local unit Ns
if GetUnitLifePercent(LS)<=I2R(US[0]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(US[0]))
set US[0]=US[0]-15
call SetUnitPositionLoc(GetTriggerUnit(),Location(14093.,-23219.))
call SetUnitOwner(LS,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LS,true)
set gP[1]=GroupPickRandomUnit(GetUnitsInRectMatching(B7,Condition(function Bp3)))
call SetUnitVertexColor(gP[1],0,0,255,255)
set gQ[0]=GetRectCenter(B7)
set gQ[1]=PolarProjectionBJ(gQ[0],200.,GetRandomReal(1.,360.))
call SetUnitPositionLoc(Ja,gQ[1])
call TriggerSleepAction(3.)
set gQ[4]=GetUnitLoc(gP[1])
if DistanceBetweenPoints(gQ[1],gQ[4])>=80. then
call KillUnit(gP[1])
endif
call SetUnitVertexColor(gP[1],255,255,255,255)
call SetUnitPositionLoc(Ja,GetRectCenter(Ez))
if GetUnitAbilityLevel(GetTriggerUnit(),$41304452)>=2 then
set Me=CreateUnit(Player(10),$6E303258,13510.,-23200.,270.)
set Np=CreateUnit(Player(10),$6E30325A,14640.,-23200.,270.)
set Nq=CreateUnit(Player(10),$6E303259,14640.,-24300.,270.)
set Ns=CreateUnit(Player(10),$6E303330,13500.,-24300.,270.)
if GetUnitAbilityLevel(GetTriggerUnit(),$41304452)==3 then
call UnitAddAbility(Me,$41304638)
call UnitAddAbility(Np,$41304638)
call UnitAddAbility(Nq,$41304638)
call UnitAddAbility(Ns,$41304638)
call UnitAddAbility(Me,$41313643)
call UnitAddAbility(Np,$41313643)
call UnitAddAbility(Nq,$41313643)
call UnitAddAbility(Ns,$41313643)
call UnitAddAbility(Np,$41313644)
call UnitAddAbility(Nq,$41313644)
call SetUnitAbilityLevel(Me,$41303737,2)
call SetUnitAbilityLevel(Np,$41636874,2)
call SetUnitAbilityLevel(Np,$41436365,2)
call SetUnitAbilityLevel(Nq,$41437266,2)
call SetUnitAbilityLevel(Ns,$41436463,2)
endif
set US[12]=0
else
call SetUnitOwner(LS,Player(11),true)
call SetUnitInvulnerable(LS,false)
endif
call RemoveLocation(gQ[0])
call RemoveLocation(gQ[1])
call RemoveLocation(gQ[3])
call EnableTrigger(GetTriggeringTrigger())
endif
set Ns=null
set Nq=null
set Np=null
set Me=null
endfunction
function Bp5 takes nothing returns nothing
set gO=CreateTrigger()
call TriggerRegisterUnitEvent(gO,LS,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gO,function Bp4)
endfunction
function Bp6 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bp7 takes nothing returns boolean
if not (GetUnitFacing(GetEnumUnit())>=GetUnitFacing(Wi[212])-30.) then
return false
endif
if not (GetUnitFacing(GetEnumUnit())<=GetUnitFacing(Wi[212])+30.) then
return false
endif
return true
endfunction
function Bp8 takes nothing returns nothing
if Bp7() then
call DoNothing()
else
call KillUnit(GetEnumUnit())
endif
endfunction
function Bp9 takes nothing returns boolean
if not (GetUnitLifePercent(LS)<=I2R(US[1])) then
return false
endif
return true
endfunction
function BqB takes nothing returns nothing
if Bp9() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(US[1]))
set US[1]=US[1]-15
call SetUnitOwner(LS,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LS,true)
call SetUnitPositionLoc(GetTriggerUnit(),Location(14093.,-23219.))
call CreateTextTagUnitBJ("Смотрите, Птичка!",LS,0,30.,100.,50.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set YU[212]=GetRandomLocInRect(Ch)
call CreateNUnitsAtLoc(1,$6E303442,Player(8),YU[212],GetRandomReal(31.,329.))
set Wi[212]=GetLastCreatedUnit()
call TriggerSleepAction(3.)
set SV[67]=GetUnitsInRectMatching(B7,Condition(function Bp6))
call ForGroupBJ(SV[67],function Bp8)
call DestroyGroup(SV[67])
call RemoveUnit(Wi[212])
call TriggerSleepAction(1.)
call SetUnitOwner(LS,Player(11),true)
call SetUnitInvulnerable(LS,false)
call RemoveLocation(YU[115])
call RemoveLocation(YU[212])
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BqC takes nothing returns nothing
set gR=CreateTrigger()
call TriggerRegisterUnitEvent(gR,LS,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gR,function BqB)
endfunction
function BqD takes nothing returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
if GetLocalPlayer()==Player(Mc) then
call CameraSetSourceNoise(0,0)
call CameraSetTargetNoise(0,0)
call ResetToGameCamera(0)
endif
endif
endfunction
function BqE takes nothing returns nothing
local group WC=CreateGroup()
local boolexpr gD=Condition(function mo)
local integer Me
call GroupEnumUnitsInRect(WC,B7,gD)
if CountUnitsInGroup(WC)==0 or GetUnitLifePercent(LS)>=90 then
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
else
set Me=0
loop
if RectContainsUnit(B7,MV[Me]) then
call SetCameraFieldForPlayer(Player(Me),CAMERA_FIELD_ROTATION,CameraSetupGetFieldSwap(CAMERA_FIELD_ROTATION,GetCurrentCameraSetup())+15.,2.)
endif
set Me=Me+1
exitwhen Me==8
endloop
endif
call DestroyBoolExpr(gD)
call DestroyGroup(WC)
set gD=null
set WC=null
endfunction
function BqF takes nothing returns nothing
local unit Hw=GetTriggerUnit()
if IsUnitType(Hw,UNIT_TYPE_HERO) and RectContainsUnit(B7,Hw) and GetUnitAbilityLevel(LS,$41313947)>=2 then
call SetUnitLifePercentBJ(Hw,GetUnitLifePercent(Hw)-8)
endif
set Hw=null
endfunction
function BqG takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv=Location(-15500,2211)
call SetUnitPositionLoc(Hw,Hv)
call RemoveLocation(Hv)
set Hv=null
set Hw=null
endfunction
function BqH takes nothing returns nothing
local integer Pf
local location dL
local location Hv
local group WC
local boolexpr Nc
local unit Hw
local integer MC=0
loop
set Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),1+MC)
set Pf=150
loop
set Hv=GetUnitLoc(Hw)
set dL=nN(Hv,Pf,GetUnitFacing(Hw))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Singularity II Red.mdx",dL))
set WC=CreateGroup()
set Nc=Condition(function mr)
call GroupEnumUnitsInRange(WC,GetLocationX(dL),GetLocationY(dL),130,Nc)
call DestroyBoolExpr(Nc)
call ForGroup(WC,function BqG)
call DestroyGroup(WC)
set Nc=null
set WC=null
call RemoveLocation(dL)
set dL=null
set Pf=Pf+150
exitwhen Pf>=2200
endloop
call RemoveLocation(Hv)
set Hv=null
call RemoveUnit(Hw)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),1+MC)
set MC=MC+1
exitwhen MC>=9
endloop
set Hw=null
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function BqI takes nothing returns nothing
local location Me
local location Np
local location Nq
local unit Ns
local unit Nt
local unit Ov
local unit Ow
local unit Ox
local unit Oy
local unit Oz
local unit O1
local unit O2
local timer O3
call SaveInteger(Nr,GetHandleId(GetExpiredTimer()),0,LoadInteger(Nr,GetHandleId(GetExpiredTimer()),0)-1)
if LoadInteger(Nr,GetHandleId(GetExpiredTimer()),0)>=1 then
set Me=Location(GetRandomReal(13533,14600),-22980)
set Np=Location(13390,GetRandomReal(-23100,-23600))
set Nq=Location(13390,GetRandomReal(-23750,-24220))
set Ns=CreateUnitAtLoc(Player(10),$6E303646,Me,270)
set Nt=CreateUnitAtLoc(Player(10),$6E303646,nN(Me,150,0),270)
set Ov=CreateUnitAtLoc(Player(10),$6E303646,nN(Me,150,180),270)
set Ow=CreateUnitAtLoc(Player(10),$6E303646,Np,0)
set Ox=CreateUnitAtLoc(Player(10),$6E303646,Nq,0)
set Oy=CreateUnitAtLoc(Player(10),$6E303646,nN(Np,150,90),0)
set Oz=CreateUnitAtLoc(Player(10),$6E303646,nN(Np,150,270),0)
set O1=CreateUnitAtLoc(Player(10),$6E303646,nN(Nq,150,90),0)
set O2=CreateUnitAtLoc(Player(10),$6E303646,nN(Nq,150,270),0)
set O3=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(O3),1,Ns)
call SaveUnitHandle(Nr,GetHandleId(O3),2,Ow)
call SaveUnitHandle(Nr,GetHandleId(O3),3,Ox)
call SaveUnitHandle(Nr,GetHandleId(O3),4,Nt)
call SaveUnitHandle(Nr,GetHandleId(O3),5,Ov)
call SaveUnitHandle(Nr,GetHandleId(O3),6,Oy)
call SaveUnitHandle(Nr,GetHandleId(O3),7,Oz)
call SaveUnitHandle(Nr,GetHandleId(O3),8,O1)
call SaveUnitHandle(Nr,GetHandleId(O3),9,O2)
call TimerStart(O3,3,false,function BqH)
set O3=null
call RemoveLocation(Me)
call RemoveLocation(Np)
call RemoveLocation(Nq)
set Me=null
set Np=null
set Nq=null
set Ns=null
set Ow=null
set Ox=null
set Nt=null
set Ov=null
set Oy=null
set Oz=null
set O1=null
set O2=null
else
call SetUnitOwner(LS,Player(11),true)
call SetUnitInvulnerable(LS,false)
call ShowUnit(LS,true)
call RemoveSavedInteger(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function BqJ takes nothing returns nothing
local unit Hw=LoadUnitHandle(Nr,GetHandleId(GetExpiredTimer()),0)
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local integer MC=0
loop
if Mc!=MC then
call SetPlayerAlliance(Player(Mc),Player(MC),ALLIANCE_SHARED_VISION,true)
endif
set MC=MC+1
exitwhen MC==8
endloop
call UnitRemoveAbility(Hw,$4130454C)
call RemoveSavedHandle(Nr,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hw=null
endfunction
function BqK takes nothing returns nothing
local unit Hw=GetEnumUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local integer MC=0
local timer He
loop
if Mc!=MC then
call SetPlayerAlliance(Player(Mc),Player(MC),ALLIANCE_SHARED_VISION,false)
endif
set MC=MC+1
exitwhen MC==8
endloop
call UnitAddAbility(Hw,$4130454C)
set He=CreateTimer()
call SaveUnitHandle(Nr,GetHandleId(He),0,Hw)
call TimerStart(He,8,false,function BqJ)
set Hw=null
set He=null
endfunction
function BqL takes nothing returns nothing
if GetItemTypeId(GetEnumItem())==$49313032 then
call RemoveItem(GetEnumItem())
endif
endfunction
function BqM takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local location Me
local real Np
local real Nq
local location Ns
local group Nt
local boolexpr Ov
if GetUnitAbilityLevel(Hw,$41304452)==3 and GetUnitState(LS,UNIT_STATE_LIFE)>.405 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20)
if GetOwningPlayer(Hw)==Player(11) then
if GetRandomInt(1,2)==1 then
call na(Hw,"|c000000ffВозмездие",.035,255,255,255)
call SetUnitVertexColor(Hw,0,0,255,255)
call PauseUnit(Hw,true)
set Me=GetUnitLoc(Hw)
call TriggerSleepAction(2)
set Np=150
set Nq=0
loop
set Ns=nN(Me,Np,Nq)
set Nt=CreateGroup()
set Ov=Condition(function mr)
call GroupEnumUnitsInRange(Nt,GetLocationX(Ns),GetLocationY(Ns),300,Ov)
call DestroyBoolExpr(Ov)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl",Ns))
call ForGroup(Nt,function Bd3)
call DestroyGroup(Nt)
set Ov=null
set Nt=null
call RemoveLocation(Ns)
set Ns=null
set Nq=Nq+30
exitwhen Nq>=360
endloop
call RemoveLocation(Me)
set Me=null
call PauseUnit(Hw,false)
elseif GetRandomInt(1,1)==1 then
call SetUnitVertexColor(Hw,0,0,0,255)
call na(Hw,"|c00000000Возмездие",.035,255,255,255)
call PauseUnit(Hw,true)
set Me=GetUnitLoc(Hw)
call TriggerSleepAction(2.2)
set Np=700
loop
set Nq=0
loop
set Ns=nN(Me,Np,Nq)
set Nt=CreateGroup()
set Ov=Condition(function mr)
call GroupEnumUnitsInRange(Nt,GetLocationX(Ns),GetLocationY(Ns),300,Ov)
call DestroyBoolExpr(Ov)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl",Ns))
call ForGroup(Nt,function Bd3)
call DestroyGroup(Nt)
set Ov=null
set Nt=null
call RemoveLocation(Ns)
set Ns=null
set Nq=Nq+20
exitwhen Nq>=360
endloop
set Np=Np+300
exitwhen Np>=1000
endloop
call RemoveLocation(Me)
set Me=null
call PauseUnit(Hw,false)
endif
call TriggerSleepAction(5)
call SetUnitVertexColor(Hw,255,255,255,255)
endif
call EnableTrigger(GetTriggeringTrigger())
endif
set Hw=null
endfunction
function BqN takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local timer Me
if GetUnitLifePercent(Hw)<=I2R(US[4]) and GetUnitAbilityLevel(Hw,$41304452)==3 and GetUnitState(LS,UNIT_STATE_LIFE)>.405 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(Hw,I2R(US[4]))
set US[4]=US[4]-20
call SetUnitOwner(Hw,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Hw,true)
call ShowUnit(Hw,false)
set Me=CreateTimer()
call SaveInteger(Nr,GetHandleId(Me),0,7)
call TimerStart(Me,3.2,true,function BqI)
set Me=null
call EnableTrigger(GetTriggeringTrigger())
endif
set Hw=null
endfunction
function BqO takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer Me
local timer Np
local group Nq
local boolexpr Ns
if GetUnitLifePercent(Hw)<=I2R(US[3]) and GetUnitAbilityLevel(Hw,$41304452)==3 and GetUnitState(LS,UNIT_STATE_LIFE)>.405 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(Hw,I2R(US[3]))
if US[3]==90 then
set Me=0
loop
if RectContainsUnit(B7,MV[Me]) then
call CameraSetTargetNoiseForPlayer(Player(Me),120.,2.5)
endif
set Me=Me+1
exitwhen Me==8
endloop
elseif US[3]==45 then
set Np=CreateTimer()
call TimerStart(Np,2,true,function BqE)
set Np=null
endif
set US[3]=US[3]-15
set Me=0
loop
call CreateItem($49313032,GetRandomReal(13350,14830),GetRandomReal(-24400,-22970))
set Me=Me+1
exitwhen Me==27
endloop
set gU[111]=675000
call TriggerSleepAction(8)
call EnumItemsInRect(B7,null,function BqL)
set Nq=CreateGroup()
set Ns=Condition(function mr)
call GroupEnumUnitsInRect(Nq,B7,Ns)
set Ps=LS
set Nw=gU[111]
call na(LS,I2S(gU[111]),.033,255,0,0)
call ForGroup(Nq,function m3)
call DestroyBoolExpr(Ns)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
call EnableTrigger(GetTriggeringTrigger())
endif
set Hw=null
endfunction
function BqP takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local group Me
local boolexpr Np
if GetUnitAbilityLevel(Hw,$41304452)==3 and GetUnitState(LS,UNIT_STATE_LIFE)>.405 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25)
if GetOwningPlayer(Hw)==Player(11) then
call UnitRemoveAbility(Hw,$41313947)
if GetRandomInt(1,2)==1 then
call UnitAddAbility(Hw,$41313947)
call na(Hw,"|c00000000Затмение",.033,255,255,255)
call SetUnitVertexColor(Hw,0,0,0,100)
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,B7,Np)
call ForGroup(Me,function BqK)
call DestroyBoolExpr(Np)
call DestroyGroup(Me)
set Np=null
set Me=null
elseif GetRandomInt(1,1)==1 then
call UnitAddAbility(Hw,$41313947)
call SetUnitAbilityLevel(Hw,$41313947,3)
call EnableTrigger(gT)
call na(Hw,"|c00ff00ffВаши амбиции - ничто",.03,255,255,255)
call SetUnitVertexColor(Hw,255,0,255,100)
endif
call TriggerSleepAction(8)
call DisableTrigger(gT)
call na(Hw,"|c00ffff00Ладно, проехали.",.03,255,255,255)
call SetUnitVertexColor(Hw,255,255,255,255)
endif
call EnableTrigger(GetTriggeringTrigger())
endif
set Hw=null
endfunction
function BqQ takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer Me
if GetUnitLifePercent(Hw)<=I2R(US[2]) and GetUnitAbilityLevel(Hw,$41304452)==3 and GetUnitState(LS,UNIT_STATE_LIFE)>.405 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(Hw,I2R(US[2]))
set US[2]=US[2]-15
call SetUnitOwner(Hw,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Hw,true)
call na(Hw,"|c00ff6969Смотрите, птички!!",.03,255,255,255)
call SetUnitPositionLoc(Hw,Location(14093.,-23219.))
call TriggerSleepAction(2)
set Me=0
loop
if RectContainsUnit(B7,MV[Me]) then
set gS[Me]=CreateUnitAtLoc(Player(Me),$6E303442,GetUnitLoc(MV[Me]),GetRandomReal(31.,329.))
endif
set Me=Me+1
exitwhen Me==8
endloop
call TriggerSleepAction(2)
set Me=0
loop
if RectContainsUnit(B7,MV[Me]) then
if GetUnitFacing(MV[Me])>=GetUnitFacing(gS[Me])-30. and GetUnitFacing(MV[Me])<=GetUnitFacing(gS[Me])+30. then
call RemoveUnit(gS[Me])
else
call KillUnit(MV[Me])
call RemoveUnit(gS[Me])
endif
endif
set Me=Me+1
exitwhen Me==8
endloop
call SetUnitOwner(Hw,Player(11),true)
call SetUnitInvulnerable(Hw,false)
call EnableTrigger(GetTriggeringTrigger())
endif
set Hw=null
endfunction
function BqR takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LS,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function BqQ)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LS,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function BqP)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LS,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function BqO)
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LS,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function BqN)
set He=null
set He=null
set He=CreateTrigger()
call TriggerRegisterUnitEvent(He,LS,EVENT_UNIT_DAMAGED)
call TriggerAddAction(He,function BqM)
set He=null
set He=CreateTrigger()
call TriggerRegisterLeaveRectSimple(He,B7)
call TriggerAddAction(He,function BqD)
set He=null
set gT=CreateTrigger()
call DisableTrigger(gT)
call TriggerRegisterAnyUnitEventBJ(gT,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterAnyUnitEventBJ(gT,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerAddAction(gT,function BqF)
endfunction
function BqS takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BqT takes nothing returns boolean
if not (GetOwningPlayer(L0)==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BqU takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30.)
if BqT() then
set ST=GetUnitsInRectMatching(D6,Condition(function BqS))
set V2=GetUnitLoc(GroupPickRandomUnit(ST))
call SetUnitPositionLoc(L0,V2)
call CreateTextTagUnitBJ("А вот и я!
",L0,0,30.,0.,100.,100.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call DestroyGroup(ST)
call RemoveLocation(V2)
call TriggerSleepAction(1.)
call IssueImmediateOrder(GetTriggerUnit(),"fanofknives")
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BqV takes nothing returns nothing
set gV=CreateTrigger()
call TriggerRegisterUnitEvent(gV,L0,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gV,function BqU)
endfunction
function BqW takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BqX takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BqY takes nothing returns boolean
if not (GetOwningPlayer(L0)==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BqZ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if BqY() then
call CreateTextTagUnitBJ("Ваши кости - прах!",L0,0,30.,100.,0.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set V2=GetRandomLocInRect(D6)
set ST=GetUnitsInRectMatching(D6,Condition(function BqW))
call CreateNUnitsAtLoc(1,$65303052,Player(10),V2,bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"move",GroupPickRandomUnit(ST))
call DestroyGroup(ST)
call RemoveLocation(V2)
call TriggerSleepAction(15.)
set ST=GetUnitsOfTypeIdAll($65303052)
call ForGroupBJ(ST,function BqX)
call DestroyGroup(ST)
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bqa takes nothing returns nothing
set gW=CreateTrigger()
call TriggerRegisterUnitEvent(gW,L0,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gW,function BqZ)
endfunction
function Bqb takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bqc takes nothing returns boolean
if not (GetOwningPlayer(L0)==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bqd takes nothing returns nothing
if Bqc() then
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("А вот и они",L0,0,30.,0.,100.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set V2=GetRandomLocInRect(D6)
call CreateNUnitsAtLoc(1,$6E30354C,Player(10),V2,bj_UNIT_FACING)
call RemoveLocation(V2)
set V2=GetRandomLocInRect(D6)
call CreateNUnitsAtLoc(1,$6E30354C,Player(10),V2,bj_UNIT_FACING)
call RemoveLocation(V2)
set V2=GetRandomLocInRect(D6)
call CreateNUnitsAtLoc(1,$6E30354C,Player(10),V2,bj_UNIT_FACING)
call RemoveLocation(V2)
call TriggerSleepAction(15.)
set ST=GetUnitsOfTypeIdAll($6E30354C)
call ForGroupBJ(ST,function Bqb)
call DestroyGroup(ST)
call TriggerSleepAction(45.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bqe takes nothing returns nothing
set gX=CreateTrigger()
call TriggerRegisterUnitEvent(gX,L0,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gX,function Bqd)
endfunction
function Bqf takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E30354C) then
return false
endif
return true
endfunction
function Bqg takes nothing returns nothing
call SetUnitLifePercentBJ(L0,GetUnitLifePercent(L0)+15.)
call UnitDamageTargetBJ(GetTriggerUnit(),GetKillingUnitBJ(),10000.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call CreateTextTagUnitBJ("+15%",L0,0,30.,100.,0.,100.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endfunction
function Bqh takes nothing returns nothing
set gY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gY,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gY,Condition(function Bqf))
call TriggerAddAction(gY,function Bqg)
endfunction
function Bqi takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bqj takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bqk takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303547
endfunction
function Bql takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bqm takes nothing returns boolean
return GetBooleanAnd(Bqk(),Bql())
endfunction
function Bqn takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bqo takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41313452)==2) then
return false
endif
return true
endfunction
function Bqp takes nothing returns boolean
if not (GetUnitLifePercent(Js)>=99.) then
return false
endif
return true
endfunction
function Bqq takes nothing returns boolean
if not (GetOwningPlayer(L0)==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TU[1])) then
return false
endif
return true
endfunction
function Bqr takes nothing returns nothing
if Bqq() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TU[1]))
set TU[1]=TU[1]-35
call CreateTextTagUnitBJ("Духовное Око",L0,0,30.,100.,100.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call ShowUnit(Js,true)
call SetUnitOwner(Js,Player(8),true)
call SetUnitLifePercentBJ(Js,5.)
call TriggerSleepAction(10.)
if Bqp() then
call ShowUnit(Js,false)
call SetUnitOwner(Js,Player(PLAYER_NEUTRAL_PASSIVE),true)
call CreateTextTagUnitBJ("Исцелили? Ну-ну",L0,0,30.,0.,100.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
call CreateTextTagUnitBJ("АХА-ХА-ХА",L0,0,30.,100.,0.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call ShowUnit(Js,false)
call SetUnitOwner(Js,Player(PLAYER_NEUTRAL_PASSIVE),true)
set ST=GetUnitsInRectMatching(D6,Condition(function Bqi))
call ForGroupBJ(ST,function Bqj)
call DestroyGroup(ST)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
set TU[1]=80
set TU[2]=75
set TU[3]=10
set TU[4]=95
set TU[5]=90
set V2=GetRectCenter(D6)
call SetUnitPositionLocFacingBJ(L0,V2,270.)
call SetUnitOwner(L0,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L0,true)
set ST=GetUnitsInRectMatching(D6,Condition(function Bqm))
call ForGroupBJ(ST,function Bqn)
call DestroyGroup(ST)
if Bqo() then
call EnableTrigger(d6)
call EnableTrigger(d7)
call EnableTrigger(d8)
else
endif
endif
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bqs takes nothing returns nothing
set gZ=CreateTrigger()
call TriggerRegisterUnitEvent(gZ,L0,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gZ,function Bqr)
endfunction
function Bqt takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TU[4])) then
return false
endif
return true
endfunction
function Bqu takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bqv takes nothing returns boolean
if not (UnitHasBuffBJ(Wi[200],$4230344B)==true) then
return false
endif
return true
endfunction
function Bqw takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bqx takes nothing returns boolean
if not (GetOwningPlayer(L0)==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bqy takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TU[4]))
set TU[4]=TU[4]-5
if Bqx() then
set ST=GetUnitsInRectMatching(D6,Condition(function Bqu))
set Wi[200]=GroupPickRandomUnit(ST)
set V2=GetUnitLoc(Wi[200])
call CreateNUnitsAtLoc(1,$68303146,Player(10),V2,bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"magicleash",Wi[200])
call RemoveLocation(V2)
call DestroyGroup(ST)
call TriggerSleepAction(5.)
if Bqv() then
call KillUnit(Wi[200])
set Wi[200]=null
else
endif
set ST=GetUnitsOfTypeIdAll($68303146)
call ForGroupBJ(ST,function Bqw)
call DestroyGroup(ST)
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bqz takes nothing returns nothing
set ga=CreateTrigger()
call TriggerRegisterUnitEvent(ga,L0,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(ga,Condition(function Bqt))
call TriggerAddAction(ga,function Bqy)
endfunction
function Bq0 takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TU[2])) then
return false
endif
return true
endfunction
function Bq1 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bq2 takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnumUnit()),V2,0)
endfunction
function Bq3 takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnumUnit()),V2,0)
endfunction
function Bq4 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Прыжок в яму!",L0,0,30.,100.,0.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call TriggerSleepAction(2)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TU[2]))
set TU[2]=TU[2]-25
call SetUnitOwner(L0,Player(10),true)
call UnitAddAbilityBJ($41305353,L0)
set ST=GetUnitsInRectMatching(D6,Condition(function Bq1))
set V2=GetRectCenter(ED)
call ForGroupBJ(ST,function Bq2)
call SetUnitPositionLoc(L0,V2)
call DestroyGroup(ST)
call RemoveLocation(V2)
call TriggerSleepAction(15.)
set V2=GetRectCenter(D6)
call ForGroupBJ(GetUnitsInRectAll(ED),function Bq3)
call RemoveLocation(V2)
call SetUnitOwner(L0,Player(11),true)
call UnitRemoveAbilityBJ($41305353,L0)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bq5 takes nothing returns nothing
set gb=CreateTrigger()
call TriggerRegisterUnitEvent(gb,L0,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(gb,Condition(function Bq0))
call TriggerAddAction(gb,function Bq4)
endfunction
function Bq6 takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TU[3])) then
return false
endif
return true
endfunction
function Bq7 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bq8 takes nothing returns boolean
if GetOwningPlayer(L0)==Player(11) then
return true
endif
if GetOwningPlayer(L0)==Player(10) then
return true
endif
return false
endfunction
function Bq9 takes nothing returns boolean
if not Bq8() then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BrB takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TU[3]))
set TU[3]=0
if Bq9() then
set V2=GetRectCenter(D6)
call CreateNUnitsAtLoc(1,$68303157,Player(10),V2,bj_UNIT_FACING)
call RemoveLocation(V2)
call TriggerSleepAction(5.)
set ST=GetUnitsOfTypeIdAll($68303157)
call ForGroupBJ(ST,function Bq7)
call DestroyGroup(ST)
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BrC takes nothing returns nothing
set gc=CreateTrigger()
call TriggerRegisterUnitEvent(gc,L0,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(gc,Condition(function Bq6))
call TriggerAddAction(gc,function BrB)
endfunction
function BrD takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=70.) then
return false
endif
return true
endfunction
function BrE takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),70.)
call ShowUnit(GetTriggerUnit(),false)
call SetUnitOwner(L0,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L0,true)
call SetUnitPositionLoc(L0,GetRectCenter(ED))
set Wi[21]=CreateUnitAtLoc(Player(11),$6E30364C,GetRectCenter(D6),270.)
set TU[6]=95
set TU[7]=75
set TU[8]=90
set TU[9]=85
set TU[10]=70
endfunction
function BrF takes nothing returns nothing
set d6=CreateTrigger()
call DisableTrigger(d6)
call TriggerRegisterUnitEvent(d6,L0,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(d6,Condition(function BrD))
call TriggerAddAction(d6,function BrE)
endfunction
function BrG takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364C then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
return false
endfunction
function BrH takes nothing returns boolean
if not BrG() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TU[6])) then
return false
endif
return true
endfunction
function BrI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BrJ takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),5.)
call SetUnitManaBJ(GetEnumUnit(),1000.)
endfunction
function BrK takes nothing returns nothing
local location Hv
local unit NR
call DisableTrigger(GetTriggeringTrigger())
call na(GetTriggerUnit(),"|c00ff9696Успеете?",.03,255,255,255)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TU[6]))
set TU[6]=TU[6]-15
set ST=GetUnitsInRectMatching(D6,Condition(function BrI))
call ForGroupBJ(ST,function BrJ)
call DestroyGroup(ST)
set Hv=GetRandomLocInRect(F0)
set NR=CreateUnitAtLoc(Player(10),$68303430,Hv,0)
call SetUnitAbilityLevel(NR,$41303057,2)
call m5(NR,5)
call PauseUnit(NR,true)
call TriggerSleepAction(1.5)
call PauseUnit(NR,false)
call IssuePointOrderLoc(NR,"rainoffire",Hv)
call RemoveLocation(Hv)
call EnableTrigger(GetTriggeringTrigger())
set NR=null
set Hv=null
endfunction
function BrL takes nothing returns nothing
set gd=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gd,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gd,Condition(function BrH))
call TriggerAddAction(gd,function BrK)
endfunction
function BrM takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364C then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
return false
endfunction
function BrN takes nothing returns boolean
if not BrM() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TU[7])) then
return false
endif
return true
endfunction
function BrO takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BrP takes nothing returns nothing
call KillUnit(GetEnumUnit())
call SetUnitLifePercentBJ(GetTriggerUnit(),100.)
set TU[6]=95
set TU[7]=75
set TU[8]=90
set TU[9]=85
set TU[10]=70
set TU[11]=90
endfunction
function BrQ takes nothing returns boolean
if not (RectContainsUnit(RectFromCenterSizeBJ(V1,500.,500.),GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BrR takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call UnitRemoveAbility(GetTriggerUnit(),$41303937)
call UnitRemoveAbility(GetTriggerUnit(),$41304336)
call CreateTextTagLocBJ("Смерть уже близко!",GetUnitLoc(GetTriggerUnit()),0,13.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TU[7]))
set TU[7]=TU[7]-30
set V1=GetRandomLocInRect(F0)
set Wi[31]=CreateUnitAtLoc(Player(10),$68303335,V1,270.)
call UnitApplyTimedLifeBJ(5.,$42544C46,Wi[31])
call RemoveLocation(V1)
call TriggerSleepAction(4.)
set V1=GetUnitLoc(Wi[31])
if BrQ() then
else
set ST=GetUnitsInRectMatching(D6,Condition(function BrO))
call ForGroupBJ(ST,function BrP)
call DestroyGroup(ST)
endif
call RemoveLocation(V1)
call EnableTrigger(GetTriggeringTrigger())
call UnitAddAbility(GetTriggerUnit(),$41303937)
call UnitAddAbility(GetTriggerUnit(),$41304336)
endfunction
function BrS takes nothing returns nothing
set ge=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ge,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(ge,Condition(function BrN))
call TriggerAddAction(ge,function BrR)
endfunction
function BrT takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364C then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
return false
endfunction
function BrU takes nothing returns boolean
if not BrT() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TU[8])) then
return false
endif
return true
endfunction
function BrV takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BrW takes nothing returns boolean
if not (RectContainsUnit(RectFromCenterSizeBJ(V1,650.,650.),GetEnumUnit())==true) then
return false
endif
return true
endfunction
function BrX takes nothing returns nothing
if BrW() then
else
call KillUnit(GetEnumUnit())
endif
endfunction
function BrY takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagLocBJ("Сила - в единстве!",GetUnitLoc(GetTriggerUnit()),0,13.,100,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TU[8]))
set TU[8]=TU[8]-30
set V1=GetRandomLocInRect(F0)
set Wi[32]=CreateUnitAtLoc(Player(10),$68303558,V1,0.)
call UnitApplyTimedLifeBJ(5.,$42544C46,Wi[32])
call RemoveLocation(V1)
call TriggerSleepAction(4.)
set V1=GetUnitLoc(Wi[32])
set ST=GetUnitsInRectMatching(D6,Condition(function BrV))
call ForGroupBJ(ST,function BrX)
call DestroyGroup(ST)
call RemoveLocation(V1)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BrZ takes nothing returns nothing
set gf=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gf,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gf,Condition(function BrU))
call TriggerAddAction(gf,function BrY)
endfunction
function Bra takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=40.) then
return false
endif
return true
endfunction
function Brb takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),40.)
call ShowUnit(GetTriggerUnit(),false)
call SetUnitOwner(L0,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L0,true)
call SetUnitPositionLoc(L0,GetRectCenter(ED))
set Wi[22]=CreateUnitAtLoc(Player(11),$6E30364D,GetRectCenter(D6),270.)
set TU[6]=95
set TU[7]=75
set TU[8]=90
set TU[9]=85
set TU[10]=70
endfunction
function Brc takes nothing returns nothing
set d7=CreateTrigger()
call DisableTrigger(d7)
call TriggerRegisterUnitEvent(d7,L0,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(d7,Condition(function Bra))
call TriggerAddAction(d7,function Brb)
endfunction
function Brd takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
return false
endfunction
function Bre takes nothing returns boolean
if not Brd() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TU[9])) then
return false
endif
return true
endfunction
function Brf takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagLocBJ("Помощь уже тут!",GetUnitLoc(GetTriggerUnit()),0,12.,100.,50.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TU[9]))
set TU[9]=TU[9]-40
set V1=GetRandomLocInRect(F0)
set Wi[33]=CreateUnitAtLoc(Player(10),$6830355A,V1,270.)
call UnitApplyTimedLifeBJ(15.,$42544C46,Wi[33])
call PauseUnit(Wi[33],true)
call RemoveLocation(V1)
set V1=GetRandomLocInRect(F0)
set Wi[34]=CreateUnitAtLoc(Player(10),$68303559,V1,270.)
call UnitApplyTimedLifeBJ(15.,$42544C46,Wi[34])
call PauseUnit(Wi[34],true)
call RemoveLocation(V1)
call TriggerSleepAction(6.)
call PauseUnit(Wi[33],false)
call PauseUnit(Wi[34],false)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Brg takes nothing returns nothing
set gg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg,Condition(function Bre))
call TriggerAddAction(gg,function Brf)
endfunction
function Brh takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
return false
endfunction
function Bri takes nothing returns boolean
if not Brh() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TU[10])) then
return false
endif
return true
endfunction
function Brj takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagLocBJ("Иллюзия",GetUnitLoc(GetTriggerUnit()),0,15.,50.,50.,50.,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TU[10]))
set TU[10]=TU[10]-30
set V1=GetRandomLocInRect(F0)
set Wi[35]=CreateUnitAtLoc(Player(10),$6E303836,V1,270.)
call UnitApplyTimedLifeBJ(12.,$42544C46,Wi[35])
call SetUnitVertexColor(Wi[35],255,255,255,120)
call RemoveLocation(V1)
call TriggerSleepAction(10.)
set V1=GetUnitLoc(Wi[35])
call SetUnitPositionLoc(GetTriggerUnit(),V1)
call RemoveUnit(Wi[35])
call RemoveLocation(V1)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Brk takes nothing returns nothing
set gh=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gh,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gh,Condition(function Bri))
call TriggerAddAction(gh,function Brj)
endfunction
function Brl takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=15.) then
return false
endif
return true
endfunction
function Brm takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),15.)
call ShowUnit(GetTriggerUnit(),false)
call SetUnitOwner(L0,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L0,true)
call SetUnitPositionLoc(L0,GetRectCenter(ED))
set Wi[22]=CreateUnitAtLoc(Player(11),$6E30364E,GetRectCenter(D6),270.)
set TU[6]=95
set TU[7]=75
set TU[8]=90
set TU[9]=85
set TU[10]=70
set TU[11]=90
endfunction
function Brn takes nothing returns nothing
set d8=CreateTrigger()
call DisableTrigger(d8)
call TriggerRegisterUnitEvent(d8,L0,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(d8,Condition(function Brl))
call TriggerAddAction(d8,function Brm)
endfunction
function Bro takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
return false
endfunction
function Brp takes nothing returns boolean
if not Bro() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TU[11])) then
return false
endif
return true
endfunction
function Brq takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagLocBJ("Темная Тварь
",GetUnitLoc(GetTriggerUnit()),0,15.,0.,0.,0.,30.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TU[11]))
set TU[11]=TU[11]-10
set V1=GetRectCenter(D6)
set Wi[36]=CreateUnitAtLoc(Player(10),$68303630,V1,GetRandomReal(0,360.))
call UnitApplyTimedLifeBJ(3.5,$42544C46,Wi[36])
call IssuePointOrderLoc(Wi[36],"carrionswarm",V1)
call RemoveLocation(V1)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Brr takes nothing returns nothing
set gi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gi,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gi,Condition(function Brp))
call TriggerAddAction(gi,function Brq)
endfunction
function Brs takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364C then
return true
endif
return false
endfunction
function Brt takes nothing returns boolean
if not Brs() then
return false
endif
return true
endfunction
function Bru takes nothing returns nothing
call ShowUnit(L0,true)
call SetUnitOwner(L0,Player(11),true)
call SetUnitInvulnerable(L0,false)
call SetUnitPositionLocFacingBJ(L0,GetRectCenter(F0),270.)
endfunction
function Brv takes nothing returns nothing
set gj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gj,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gj,Condition(function Brt))
call TriggerAddAction(gj,function Bru)
endfunction
function Brw takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303631) then
return false
endif
return true
endfunction
function Brx takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bry takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-15000.)
endfunction
function Brz takes nothing returns nothing
set V1=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(400.,V1,Condition(function Brx))
call ForGroupBJ(ST,function Bry)
call DestroyGroup(ST)
call RemoveLocation(V1)
endfunction
function Br0 takes nothing returns nothing
set gk=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gk,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gk,Condition(function Brw))
call TriggerAddAction(gk,function Brz)
endfunction
function Br1 takes nothing returns nothing
local unit VD=GetTriggerUnit()
local location Me
local unit Np
if GetUnitLifePercent(VD)<=I2R(UN[2]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(VD,I2R(UN[2]))
set UN[2]=UN[2]-20
call na(VD,"Цунами!",.035,0,255,255)
set Me=Location(18600,-23200)
set Np=CreateUnit(Player(10),$68303451,GetLocationX(Me),GetLocationY(Me),270.)
call UnitApplyTimedLife(Np,$42544C46,15.)
if d2[8]==2 then
call SetUnitAbilityLevel(Np,$4130355A,2)
endif
call IssuePointOrder(Np,"stampede",GetLocationX(Me),GetLocationY(Me))
call RemoveLocation(Me)
set Me=null
set Np=null
call EnableTrigger(GetTriggeringTrigger())
endif
set VD=null
endfunction
function Br2 takes nothing returns nothing
local unit VD=GetTriggerUnit()
local unit Hw
local location Hv
local location Nl
local integer Pf
local group WC
local boolexpr Nc
local integer Me
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(27)
call na(VD,"Ууууух, повеселимся",.035,100,255,255)
call PauseUnit(VD,true)
call TriggerSleepAction(1.5)
set Hv=GetUnitLoc(VD)
set Pf=50
loop
set Nl=nN(Hv,Pf,GetUnitFacing(VD))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",Nl))
set WC=CreateGroup()
set Nc=Condition(function mo)
call GroupEnumUnitsInRange(WC,GetLocationX(Nl),GetLocationY(Nl),80,Nc)
call DestroyBoolExpr(Nc)
set Ps=VD
set Nw=45000
call ForGroup(WC,function m3)
call DestroyGroup(WC)
set Nc=null
set WC=null
call RemoveLocation(Nl)
set Nl=null
set Pf=Pf+50
exitwhen Pf>=1000
endloop
call RemoveLocation(Hv)
set Hv=null
call PauseUnit(VD,false)
set Hw=CreateUnit(Player(10),$6E736E70,GetRandomReal(17980,19100),GetRandomReal(-24280,-22000),270.)
call na(Hw,"Я тут!",.035,100,255,255)
call PauseUnit(Hw,true)
call UnitApplyTimedLife(Hw,$42544C46,50.)
call UnitAddAbility(Hw,$41303541)
call SetUnitVertexColor(Hw,GetRandomInt(0,255),GetRandomInt(0,255),GetRandomInt(0,255),255)
call TriggerSleepAction(1.5)
set Hv=GetUnitLoc(Hw)
set Pf=50
loop
set Nl=nN(Hv,Pf,GetUnitFacing(Hw))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",Nl))
set WC=CreateGroup()
set Nc=Condition(function mo)
call GroupEnumUnitsInRange(WC,GetLocationX(Nl),GetLocationY(Nl),80,Nc)
call DestroyBoolExpr(Nc)
set Ps=VD
set Nw=45000
call ForGroup(WC,function m3)
call DestroyGroup(WC)
set Nc=null
set WC=null
call RemoveLocation(Nl)
set Nl=null
set Pf=Pf+50
exitwhen Pf>=1000
endloop
call RemoveLocation(Hv)
set Hv=null
call PauseUnit(Hw,false)
if d2[8]==2 then
set Me=1
loop
set Hw=CreateUnit(Player(10),$6E736E70,GetRandomReal(17980,19100),GetRandomReal(-24280,-22000),270.)
call UnitAddAbility(Hw,$41637269)
call UnitAddAbility(Hw,$41304451)
call UnitAddAbility(Hw,$4131394B)
call UnitAddAbility(Hw,$41303541)
call SetUnitAbilityLevel(Hw,$4131394B,4)
call UnitApplyTimedLife(Hw,$42544C46,100.)
call SetUnitVertexColor(Hw,GetRandomInt(0,255),GetRandomInt(0,255),GetRandomInt(0,255),255)
set Me=Me+1
exitwhen Me>3
endloop
endif
call EnableTrigger(GetTriggeringTrigger())
set VD=null
set Hw=null
endfunction
function Br3 takes nothing returns nothing
local unit VD=GetTriggerUnit()
local unit Hw
local location Hv
local integer Pf=50
local location Nl
local group Me
local boolexpr Np
call DisableTrigger(GetTriggeringTrigger())
if d2[8]==2 then
call TriggerSleepAction(15)
else
call TriggerSleepAction(25)
endif
set Hw=CreateUnit(Player(10),$6E736E70,GetRandomReal(18140,18950),-22050,270.)
call PauseUnit(Hw,true)
call SetUnitVertexColor(Hw,0,0,0,120)
call m5(Hw,4)
call TriggerSleepAction(2)
set Hv=GetUnitLoc(Hw)
loop
set Nl=nN(Hv,Pf,GetUnitFacing(Hw))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",Nl))
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRange(Me,GetLocationX(Nl),GetLocationY(Nl),80,Np)
call DestroyBoolExpr(Np)
set Ps=VD
set Nw=95000
call ForGroup(Me,function m3)
call DestroyGroup(Me)
set Np=null
set Me=null
call RemoveLocation(Nl)
set Nl=null
set Pf=Pf+50
exitwhen Pf>=2300
endloop
call RemoveLocation(Hv)
set Hv=null
call EnableTrigger(GetTriggeringTrigger())
set VD=null
set Hw=null
endfunction
function Br4 takes nothing returns nothing
local trigger gl=CreateTrigger()
call TriggerRegisterUnitEvent(gl,Ky,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gl,function Br2)
set gl=null
set gl=CreateTrigger()
call TriggerRegisterUnitEvent(gl,Ky,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gl,function Br1)
set gl=null
set gl=CreateTrigger()
call TriggerRegisterUnitEvent(gl,Ky,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gl,function Br3)
set gl=null
endfunction
function Br5 takes nothing returns nothing
local unit VD=LoadUnitHandle(gn,GetHandleId(GetExpiredTimer()),0)
local unit Hw=LoadUnitHandle(gn,GetHandleId(GetExpiredTimer()),1)
local location fe=GetUnitLoc(VD)
local location Nl=GetUnitLoc(Hw)
call IssuePointOrderLoc(Hw,"smart",fe)
call SaveInteger(gn,GetHandleId(GetExpiredTimer()),2,LoadInteger(gn,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(gn,GetHandleId(GetExpiredTimer()),2)==0 then
if GetUnitState(Hw,UNIT_STATE_LIFE)>0 then
call SetUnitLifePercentBJ(VD,100)
set UN[0]=98
set UN[1]=75
set UN[2]=80
set UN[3]=75
set UN[4]=90
set UN[5]=97
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call KillUnit(Hw)
call RemoveUnit(Hw)
endif
endif
if GetUnitState(Hw,UNIT_STATE_LIFE)>0 then
if DistanceBetweenPoints(fe,Nl)<=200 then
call SetUnitLifePercentBJ(VD,100)
set UN[0]=98
set UN[1]=75
set UN[2]=80
set UN[3]=75
set UN[4]=90
set UN[5]=97
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call KillUnit(Hw)
call RemoveUnit(Hw)
endif
else
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveUnit(Hw)
endif
call RemoveLocation(Nl)
call RemoveLocation(fe)
set fe=null
set Nl=null
set Hw=null
set VD=null
endfunction
function Br6 takes nothing returns nothing
local unit VD=GetTriggerUnit()
local unit Me
local unit Np
local unit Nq
local unit Ns
local unit Nt
local timer Ov
if GetUnitLifePercent(VD)<=I2R(UN[3]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(VD,I2R(UN[3]))
set UN[3]=UN[3]-25
call na(VD,"Братишка",.035,100,255,255)
set Me=CreateUnit(Player(10),$6E303845,18556,-24200,90.)
set Np=CreateUnit(Player(10),$6E303846,18000,-22600,90.)
set Nq=CreateUnit(Player(10),$6E303846,19090,-22600,90.)
set Ns=CreateUnit(Player(10),$6E303846,18000,-23900,90.)
set Nt=CreateUnit(Player(10),$6E303846,19090,-23900,90.)
call UnitApplyTimedLife(Np,$42544C46,60.)
call UnitApplyTimedLife(Nq,$42544C46,60.)
call UnitApplyTimedLife(Ns,$42544C46,60.)
call UnitApplyTimedLife(Nt,$42544C46,60.)
set Ov=CreateTimer()
call SaveUnitHandle(gn,GetHandleId(Ov),0,VD)
call SaveUnitHandle(gn,GetHandleId(Ov),1,Me)
call SaveInteger(gn,GetHandleId(Ov),2,36)
set go[1]=4
call TimerStart(Ov,.5,true,function Br5)
call EnableTrigger(GetTriggeringTrigger())
set Me=null
set Np=null
set Nq=null
set Ns=null
set Nt=null
set Ov=null
endif
set VD=null
endfunction
function Br7 takes nothing returns nothing
set gm=CreateTrigger()
call TriggerRegisterUnitEvent(gm,Ky,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gm,function Br6)
endfunction
function Br8 takes nothing returns nothing
local unit X0=GetEnumUnit()
call KillUnit(X0)
set X0=null
endfunction
function Br9 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==$6E303845 then
return true
endif
return false
endfunction
function BsB takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local group Me
local boolexpr Np
if GetUnitTypeId(Hw)==$6E303846 then
call RemoveUnit(Hw)
set go[1]=go[1]-1
if go[1]==0 then
set Me=CreateGroup()
set Np=Condition(function Br9)
call GroupEnumUnitsInRect(Me,GJ,Np)
call DestroyBoolExpr(Np)
call ForGroup(Me,function Br8)
call DestroyGroup(Me)
set Np=null
set Me=null
endif
endif
set Hw=null
endfunction
function BsC takes nothing returns nothing
set gp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gp,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gp,function BsB)
endfunction
function BsD takes nothing returns nothing
local unit gr=LoadUnitHandle(gn,GetHandleId(GetExpiredTimer()),0)
local unit Nx=LoadUnitHandle(gn,GetHandleId(GetExpiredTimer()),1)
local location Hv=GetUnitLoc(gr)
local location Nl=GetUnitLoc(Nx)
local location dL=Location(18555,-23650)
local location gs=Location(18555,-22800)
call IssuePointOrderLoc(Nx,"smart",Hv)
call SaveInteger(gn,GetHandleId(GetExpiredTimer()),2,LoadInteger(gn,GetHandleId(GetExpiredTimer()),2)-1)
if DistanceBetweenPoints(Hv,Nl)<=150 or LoadInteger(gn,GetHandleId(GetExpiredTimer()),2)==0 then
call DestroyEffect(LoadEffectHandle(gn,GetHandleId(GetExpiredTimer()),3))
call KillUnit(gr)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl",Nl))
call KillUnit(Nx)
call RemoveUnit(Nx)
call RemoveSavedHandle(gn,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(gn,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(gn,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(gn,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
else
if DistanceBetweenPoints(dL,Nl)<=100 or DistanceBetweenPoints(gs,Nl)<=100 then
call DestroyEffect(LoadEffectHandle(gn,GetHandleId(GetExpiredTimer()),3))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl",Nl))
call KillUnit(Nx)
call RemoveUnit(Nx)
call RemoveSavedHandle(gn,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(gn,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(gn,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(gn,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endif
call RemoveLocation(Hv)
call RemoveLocation(Nl)
call RemoveLocation(dL)
call RemoveLocation(gs)
set gr=null
set Nx=null
set Nl=null
set Hv=null
set dL=null
set gs=null
endfunction
function BsE takes nothing returns nothing
local unit VD=GetTriggerUnit()
local group Me
local boolexpr Np
local unit Nq
local location Ns
local integer Nt
local unit Ov
local timer Ow
local effect Ox
if GetUnitLifePercent(VD)<=I2R(UN[4]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(VD,I2R(UN[4]))
set UN[4]=UN[4]-10
call na(VD,"На абордаж!",.035,255,100,100)
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,GJ,Np)
set Nq=GroupPickRandomUnit(Me)
set Nt=GetRandomInt(1,4)
if Nt==1 then
set Ns=Location(18130,-22130)
elseif Nt==2 then
set Ns=Location(18912,-22130)
elseif Nt==3 then
set Ns=Location(18130,-24070)
elseif Nt==4 then
set Ns=Location(18912,-24070)
endif
set Ov=CreateUnit(Player(10),$686D746D,GetLocationX(Ns),GetLocationY(Ns),90.)
set Ow=CreateTimer()
set Ox=AddSpecialEffectTarget("war3mapImported\\ScannerSweep.mdl",Nq,"origin")
call SaveUnitHandle(gn,GetHandleId(Ow),0,Nq)
call SaveUnitHandle(gn,GetHandleId(Ow),1,Ov)
call SaveEffectHandle(gn,GetHandleId(Ow),3,Ox)
call SaveInteger(gn,GetHandleId(Ow),2,90)
call TimerStart(Ow,.1,true,function BsD)
call DestroyGroup(Me)
call EnableTrigger(GetTriggeringTrigger())
call DestroyBoolExpr(Np)
set Me=null
set Np=null
set Nq=null
set Ov=null
set Ow=null
set Ox=null
endif
set VD=null
set Ns=null
endfunction
function BsF takes nothing returns nothing
set gq=CreateTrigger()
call TriggerRegisterUnitEvent(gq,Ky,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gq,function BsE)
endfunction
function BsG takes nothing returns nothing
local unit X0=GetEnumUnit()
if d2[8]==1 then
call SetUnitLifeBJ(X0,GetUnitStateSwap(UNIT_STATE_LIFE,X0)-7000)
elseif d2[8]==2 then
call SetUnitLifeBJ(X0,GetUnitStateSwap(UNIT_STATE_LIFE,X0)-15000)
endif
set X0=null
endfunction
function BsH takes nothing returns nothing
local unit Hw=LoadUnitHandle(gn,GetHandleId(GetExpiredTimer()),1)
local real MF=GetUnitX(Hw)
local real MG=GetUnitY(Hw)
local real NU=300.
local group WC=CreateGroup()
local boolexpr dZ=Condition(function mo)
call GroupEnumUnitsInRange(WC,MF,MG,NU,dZ)
call DestroyBoolExpr(dZ)
call ForGroup(WC,function BsG)
call DestroyGroup(WC)
set dZ=null
set WC=null
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",Location(MF,MG)))
call SaveInteger(gn,GetHandleId(GetExpiredTimer()),2,LoadInteger(gn,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(gn,GetHandleId(GetExpiredTimer()),2)==0 then
call KillUnit(Hw)
call RemoveUnit(Hw)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hw=null
endfunction
function BsI takes nothing returns nothing
local unit VD=GetTriggerUnit()
local unit Me
local timer Np
if GetUnitLifePercent(VD)<=I2R(UN[5]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(VD,I2R(UN[5]))
set UN[5]=UN[5]-1
call na(VD,"Хлюп",.035,255,100,0)
set Me=CreateUnit(Player(10),$6E303846,GetRandomReal(17980,19100),GetRandomReal(-24280,-22000),90.)
call UnitAddAbility(Me,$416C6F63)
call SetUnitVertexColor(Me,10,10,255,150)
set Np=CreateTimer()
call SaveUnitHandle(gn,GetHandleId(Np),1,Me)
call SaveInteger(gn,GetHandleId(Np),2,5)
call TimerStart(Np,1.,true,function BsH)
call EnableTrigger(GetTriggeringTrigger())
set Me=null
endif
set VD=null
set Np=null
endfunction
function BsJ takes nothing returns nothing
set gt=CreateTrigger()
call TriggerRegisterUnitEvent(gt,Ky,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gt,function BsI)
endfunction
function BsK takes nothing returns nothing
local location Hv=LoadLocationHandle(gn,GetHandleId(GetExpiredTimer()),4)
local group WC
local boolexpr Nc
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",Hv))
set WC=CreateGroup()
set Nc=Condition(function mo)
call GroupEnumUnitsInRange(WC,GetLocationX(Hv),GetLocationY(Hv),200,Nc)
set Ps=Ky
set Nw=80000
call ForGroup(WC,function m2)
call DestroyGroup(WC)
call DestroyBoolExpr(Nc)
call RemoveLocation(Hv)
set Hv=null
set WC=null
set Nc=null
call RemoveSavedHandle(gn,GetHandleId(GetExpiredTimer()),4)
endfunction
function BsL takes nothing returns nothing
local unit Hw=GetEnumUnit()
local location Hv=GetUnitLoc(Hw)
local timer He
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",Hv))
set He=CreateTimer()
call SaveLocationHandle(gn,GetHandleId(He),4,Hv)
call TimerStart(He,1,false,function BsK)
set Hw=null
set He=null
set Hv=null
endfunction
function BsM takes nothing returns nothing
local group WC=LoadGroupHandle(gv,GetHandleId(GetExpiredTimer()),5)
call ForGroup(WC,function BsL)
call SaveInteger(gv,GetHandleId(GetExpiredTimer()),2,LoadInteger(gv,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(gv,GetHandleId(GetExpiredTimer()),2)==0 then
call DestroyGroup(WC)
set WC=null
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(gv,GetHandleId(GetExpiredTimer()),5)
call RemoveSavedInteger(gv,GetHandleId(GetExpiredTimer()),2)
endif
set WC=null
endfunction
function BsN takes nothing returns nothing
local unit VD=GetTriggerUnit()
local group Me
local boolexpr Np
local timer Nq
if GetUnitLifePercent(VD)<=I2R(UN[6]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(VD,I2R(UN[6]))
set UN[6]=UN[6]-20
call na(VD,"Стоите? Ну стойте",.035,255,100,100)
set Me=CreateGroup()
set Np=Condition(function mo)
call GroupEnumUnitsInRect(Me,GJ,Np)
set Nq=CreateTimer()
call SaveGroupHandle(gv,GetHandleId(Nq),5,Me)
call SaveInteger(gv,GetHandleId(Nq),2,5)
call TimerStart(Nq,2,true,function BsM)
set Np=null
endif
set Nq=null
set Me=null
set VD=null
endfunction
function BsO takes nothing returns nothing
set gu=CreateTrigger()
call TriggerRegisterUnitEvent(gu,Ky,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gu,function BsN)
endfunction
function BsP takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-8)
endfunction
function BsQ takes nothing returns nothing
local group WC=CreateGroup()
local boolexpr dZ=Condition(function mo)
call GroupEnumUnitsInRect(WC,GJ,dZ)
call ForGroup(WC,function BsP)
call DestroyGroup(WC)
call DestroyBoolExpr(dZ)
set WC=null
set dZ=null
endfunction
function BsR takes nothing returns nothing
set d3=CreateTrigger()
call DisableTrigger(d3)
call TriggerRegisterTimerEventPeriodic(d3,5.)
call TriggerAddAction(d3,function BsQ)
endfunction
function BsS takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit NS=GetEnumUnit()
if GetUnitState(NS,UNIT_STATE_LIFE)>.45 then
if GetUnitTypeId(Hw)==$6E303353 and GetUnitAbilityLevel(NS,$41305045)==0 then
call UnitAddAbility(NS,$41305045)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E303445 and GetUnitAbilityLevel(NS,$41305045)==1 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$68303045 and GetUnitAbilityLevel(NS,$41305045)==2 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E303456 and GetUnitAbilityLevel(NS,$41305045)==3 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6830324F and GetUnitAbilityLevel(NS,$41305045)==4 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$75303054 and GetUnitAbilityLevel(NS,$41305045)==5 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E687963 and GetUnitAbilityLevel(NS,$41305045)==6 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E303537 and GetUnitAbilityLevel(NS,$41305045)==7 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E303539 and GetUnitAbilityLevel(NS,$41305045)==8 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E303654 and GetUnitAbilityLevel(NS,$41305045)==9 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E303548 and GetUnitAbilityLevel(NS,$41305045)==10 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E303547 and GetUnitAbilityLevel(NS,$41305045)==11 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E303630 and GetUnitAbilityLevel(NS,$41305045)==12 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E303844 and GetUnitAbilityLevel(NS,$41305045)==13 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hw)==$6E303754 and GetUnitAbilityLevel(NS,$41305045)==14 then
call SetUnitAbilityLevel(NS,$41305045,GetUnitAbilityLevel(NS,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NS),0,0,100,"|c00ff00ffВы улучшили наклейку!")
call BJDebugMsg(GetPlayerName(GetOwningPlayer(NS))+" получил достижение |c0000ff00\"Коллекционер\"")
call UnitAddAbility(NS,$41304736)
endif
endif
set Hw=null
set NS=null
endfunction
function BsT takes nothing returns nothing
local location Me
local group Np
local boolexpr Nq
if GetOwningPlayer(GetTriggerUnit())==Player(11) and GetRandomInt(1,5)==1 then
set Me=GetUnitLoc(GetTriggerUnit())
set Np=CreateGroup()
set Nq=Condition(function mo)
call GroupEnumUnitsInRange(Np,GetLocationX(Me),GetLocationY(Me),1500,Nq)
call ForGroup(Np,function BsS)
call DestroyBoolExpr(Nq)
call DestroyGroup(Np)
call RemoveLocation(Me)
set Me=null
set Nq=null
set Np=null
endif
endfunction
function BsU takes nothing returns nothing
local integer MC=S2I(SubString(GetEventPlayerChatString(),3,5))
local integer Mc=GetPlayerId(GetTriggerPlayer())
if MC>=1 then
if GetUnitAbilityLevel(MV[Mc],$41305045)>=1 then
call UnitAddAbility(MV[Mc],$41305046)
call SetUnitAbilityLevel(MV[Mc],$41305046,MC)
call DisplayTextToPlayer(Player(Mc),0,0,"|c00ff00ffУстановлена наклейка|r: "+I2S(MC))
else
call DisplayTextToPlayer(Player(Mc),0,0,"|c00ff0000У вас недостаточный уровень наклейки!")
endif
endif
endfunction
function BsV takes nothing returns nothing
call DestroyImage(LoadImageHandle(PR,GetHandleId(GetExpiredTimer()),0))
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function BsW takes nothing returns nothing
local integer Mc=GetPlayerId(GetTriggerPlayer())
local string Me
local integer Np
local timer Nq
set gU[Mc]=gU[Mc]+1
if gU[Mc]>=2 and GetUnitAbilityLevel(MV[Mc],$41305046)>=1 then
call DestroyImage(gw[Mc])
set Np=1
loop
if GetUnitAbilityLevel(MV[Mc],$41305046)==Np then
set Me="war3mapImported\\N"+I2S(Np)+".blp"
endif
set Np=Np+1
exitwhen Np>15
endloop
set gw[Mc]=CreateImage(Me,200,200,200,GetUnitX(MV[Mc]),GetUnitY(MV[Mc]),0,0,0,0,2)
call SetImageConstantHeight(gw[Mc],true,5)
call SetImageRender(gw[Mc],true)
call SetImageRenderAlways(gw[Mc],true)
call ShowImage(gw[Mc],true)
set Nq=CreateTimer()
call SaveImageHandle(PR,GetHandleId(Nq),0,gw[Mc])
call TimerStart(Nq,5,false,function BsV)
set Nq=null
endif
endfunction
function BsX takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(He,function BsT)
set He=null
set He=CreateTrigger()
call TriggerRegisterPlayerChatEvent(He,Player(0),"-n",false)
call TriggerRegisterPlayerChatEvent(He,Player(1),"-n",false)
call TriggerRegisterPlayerChatEvent(He,Player(2),"-n",false)
call TriggerRegisterPlayerChatEvent(He,Player(3),"-n",false)
call TriggerRegisterPlayerChatEvent(He,Player(4),"-n",false)
call TriggerRegisterPlayerChatEvent(He,Player(5),"-n",false)
call TriggerRegisterPlayerChatEvent(He,Player(6),"-n",false)
call TriggerRegisterPlayerChatEvent(He,Player(7),"-n",false)
call TriggerAddAction(He,function BsU)
set He=null
set He=CreateTrigger()
call TriggerRegisterPlayerEvent(He,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(He,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(He,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(He,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(He,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(He,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(He,Player(6),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(He,Player(7),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(He,function BsW)
set He=null
endfunction
function BsY takes nothing returns nothing
local item gy=GetManipulatedItem()
local unit gz=GetTriggerUnit()
local integer g0=GetPlayerId(GetOwningPlayer(gz))+1
if IsUnitType(gz,UNIT_TYPE_HERO)==true then
if GetItemTypeId(gy)==$49304F58 then
if GetUnitAbilityLevel(gz,$41305A37)<1 then
call RemoveItem(nI(gz,$49304F58))
call UnitAddAbility(gz,$41305A37)
call UnitAddAbility(gz,$41304D42)
call nX(gz,"Вы приобрели талисман!",.023,255,255,0)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+100,false)
set TS[g0]=TS[g0]+.06
set UL[g0]=UL[g0]+6
set g1[g0-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(gz,$41304D42))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41304D42))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41304D42))+"% Жизни|r"
endif
endif
if GetItemTypeId(gy)==$49304836 then
if GetUnitAbilityLevel(gz,$41305A37)<1 then
call RemoveItem(nI(gz,$49304836))
call UnitAddAbility(gz,$41305A37)
call UnitAddAbility(gz,$41305A4A)
call nX(gz,"Вы приобрели талисман!",.023,255,255,0)
set Ng[g0]=Ng[g0]+.06
set UM[g0]=UM[g0]+6
set g1[g0-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4A))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4A))+" Защиты|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4A))+"% Защиты|r"
endif
endif
if GetItemTypeId(gy)==$49304835 then
if GetUnitAbilityLevel(gz,$41305A37)<1 then
call RemoveItem(nI(gz,$49304835))
call UnitAddAbility(gz,$41305A37)
call UnitAddAbility(gz,$41313433)
call nX(gz,"Вы приобрели талисман!",.023,255,255,0)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+100,false)
set N1[g0]=N1[g0]+.06
set UK[g0]=UK[g0]+6
set g1[g0-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(gz,$41313433))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41313433))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41313433))+"% Магии|r"
endif
endif
if GetItemTypeId(gy)==$49304837 then
if GetUnitAbilityLevel(gz,$41305A37)<1 then
call RemoveItem(nI(gz,$49304837))
call UnitAddAbility(gz,$41305A37)
call UnitAddAbility(gz,$41305A4C)
call nX(gz,"Вы приобрели талисман!",.023,255,255,0)
call SetHeroAgi(gz,GetHeroAgi(gz,true)-(GetHeroAgi(gz,true)-GetHeroAgi(gz,false))+100,false)
set Ne[g0]=Ne[g0]+.06
set UJ[g0]=UJ[g0]+6
set g1[g0-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4C))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4C))+" Ловкости|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4C))+"% Разрушения|r"
endif
endif
if GetItemTypeId(gy)==$49304838 then
if GetUnitAbilityLevel(gz,$41305A37)<1 then
call RemoveItem(nI(gz,$49304838))
call UnitAddAbility(gz,$41305A37)
call UnitAddAbility(gz,$41305A4B)
call nX(gz,"Вы приобрели талисман!",.023,255,255,0)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+100,false)
set Nh[g0]=Nh[g0]+.06
set UI[g0]=UI[g0]+6
set g1[g0-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4B))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4B))+" Силы|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4B))+"% Силы|r"
endif
endif
if GetItemTypeId(gy)==$49304F57 then
if GetUnitAbilityLevel(gz,$41305A37)<1 then
call RemoveItem(nI(gz,$49304F57))
call UnitAddAbility(gz,$41305A37)
call UnitAddAbility(gz,$41305035)
call nX(gz,"Вы приобрели талисман!",.023,255,255,0)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+50,false)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+50,false)
set UO[g0]=UO[g0]+4
set g1[g0-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(gz,$41305035))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(gz,$41305035))+" Силы и Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(gz,$41305035))+"% Помощи|r"
endif
endif
if GetItemTypeId(gy)==$49304F59 then
if GetItemUserData(gy)==10 or GetItemUserData(gy)==GetPlayerId(GetOwningPlayer(gz))+1 then
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4C)==1 then
call RemoveItem(nI(gz,$49304F59))
call SetUnitAbilityLevel(gz,$41305A4C,2)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroAgi(gz,GetHeroAgi(gz,true)-(GetHeroAgi(gz,true)-GetHeroAgi(gz,false))+50,false)
set Ne[g0]=Ne[g0]+.03
set UJ[g0]=UJ[g0]+3
set g1[g0-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4C))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4C))+" Ловкости|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4C))+"% Разрушения|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41304D42)==1 then
call RemoveItem(nI(gz,$49304F59))
call SetUnitAbilityLevel(gz,$41304D42,2)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+50,false)
set TS[g0]=TS[g0]+.03
set UL[g0]=UL[g0]+3
set g1[g0-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(gz,$41304D42))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41304D42))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41304D42))+"% Жизни|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4A)==1 then
call RemoveItem(nI(gz,$49304F59))
call SetUnitAbilityLevel(gz,$41305A4A,2)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
set Ng[g0]=Ng[g0]+.03
set UM[g0]=UM[g0]+3
set g1[g0-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4A))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4A))+" Защиты|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4A))+"% Защиты|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41313433)==1 then
call RemoveItem(nI(gz,$49304F59))
call SetUnitAbilityLevel(gz,$41313433,2)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+50,false)
set N1[g0]=N1[g0]+.03
set UK[g0]=UK[g0]+3
set g1[g0-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(gz,$41313433))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41313433))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41313433))+"% Магии|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4B)==1 then
call RemoveItem(nI(gz,$49304F59))
call SetUnitAbilityLevel(gz,$41305A4B,2)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+50,false)
set Nh[g0]=Nh[g0]+.03
set UI[g0]=UI[g0]+3
set g1[g0-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4B))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4B))+" Силы|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4B))+"% Силы|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305035)==1 then
call RemoveItem(nI(gz,$49304F59))
call SetUnitAbilityLevel(gz,$41305035,2)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+25,false)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+25,false)
set UO[g0]=UO[g0]+2
set g1[g0-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(gz,$41305035))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(gz,$41305035))+" Силы и Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(gz,$41305035))+"% Помощи|r"
endif
endif
endif
endif
if GetItemTypeId(gy)==$49304953 then
if GetItemUserData(gy)==10 or GetItemUserData(gy)==GetPlayerId(GetOwningPlayer(gz))+1 then
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41304D42)==2 then
call RemoveItem(nI(gz,$49304953))
call SetUnitAbilityLevel(gz,$41304D42,3)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+50,false)
set TS[g0]=TS[g0]+.03
set UL[g0]=UL[g0]+3
set g1[g0-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(gz,$41304D42))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41304D42))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41304D42))+"% Жизни|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4A)==2 then
call RemoveItem(nI(gz,$49304953))
call SetUnitAbilityLevel(gz,$41305A4A,3)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
set Ng[g0]=Ng[g0]+.03
set UM[g0]=UM[g0]+3
set g1[g0-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4A))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4A))+" Защиты|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4A))+"% Защиты|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41313433)==2 then
call RemoveItem(nI(gz,$49304953))
call SetUnitAbilityLevel(gz,$41313433,3)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+50,false)
set N1[g0]=N1[g0]+.03
set UK[g0]=UK[g0]+3
set g1[g0-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(gz,$41313433))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41313433))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41313433))+"% Магии|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4C)==2 then
call RemoveItem(nI(gz,$49304953))
call SetUnitAbilityLevel(gz,$41305A4C,3)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroAgi(gz,GetHeroAgi(gz,true)-(GetHeroAgi(gz,true)-GetHeroAgi(gz,false))+50,false)
set Ne[g0]=Ne[g0]+.03
set UJ[g0]=UJ[g0]+3
set g1[g0-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4C))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4C))+" Ловкости|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4C))+"% Разрушения|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4B)==2 then
call RemoveItem(nI(gz,$49304953))
call SetUnitAbilityLevel(gz,$41305A4B,3)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+50,false)
set Nh[g0]=Nh[g0]+.03
set UI[g0]=UI[g0]+3
set g1[g0-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4B))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4B))+" Силы|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4B))+"% Силы|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305035)==2 then
call RemoveItem(nI(gz,$49304953))
call SetUnitAbilityLevel(gz,$41305035,3)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+25,false)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+25,false)
set UO[g0]=UO[g0]+2
set g1[g0-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(gz,$41305035))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(gz,$41305035))+" Силы и Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(gz,$41305035))+"% Помощи|r"
endif
endif
endif
endif
if GetItemTypeId(gy)==$49305435 then
if GetItemUserData(gy)==10 or GetItemUserData(gy)==GetPlayerId(GetOwningPlayer(gz))+1 then
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41304D42)==3 then
call RemoveItem(nI(gz,$49305435))
call SetUnitAbilityLevel(gz,$41304D42,4)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+50,false)
set TS[g0]=TS[g0]+.03
set UL[g0]=UL[g0]+3
set g1[g0-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(gz,$41304D42))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41304D42))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41304D42))+"% Жизни|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4A)==3 then
call RemoveItem(nI(gz,$49305435))
call SetUnitAbilityLevel(gz,$41305A4A,4)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
set Ng[g0]=Ng[g0]+.03
set UM[g0]=UM[g0]+3
set g1[g0-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4A))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4A))+" Защиты|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4A))+"% Защиты|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41313433)==3 then
call RemoveItem(nI(gz,$49305435))
call SetUnitAbilityLevel(gz,$41313433,4)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+50,false)
set N1[g0]=N1[g0]+.03
set UK[g0]=UK[g0]+3
set g1[g0-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(gz,$41313433))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41313433))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41313433))+"% Магии|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4C)==3 then
call RemoveItem(nI(gz,$49305435))
call SetUnitAbilityLevel(gz,$41305A4C,4)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroAgi(gz,GetHeroAgi(gz,true)-(GetHeroAgi(gz,true)-GetHeroAgi(gz,false))+50,false)
set Ne[g0]=Ne[g0]+.03
set UJ[g0]=UJ[g0]+3
set g1[g0-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4C))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4C))+" Ловкости|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4C))+"% Разрушения|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4B)==3 then
call RemoveItem(nI(gz,$49305435))
call SetUnitAbilityLevel(gz,$41305A4B,4)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+50,false)
set Nh[g0]=Nh[g0]+.03
set UI[g0]=UI[g0]+3
set g1[g0-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4B))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4B))+" Силы|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4B))+"% Силы|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305035)==3 then
call RemoveItem(nI(gz,$49305435))
call SetUnitAbilityLevel(gz,$41305035,4)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+25,false)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+25,false)
set UO[g0]=UO[g0]+2
set g1[g0-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(gz,$41305035))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(gz,$41305035))+" Силы и Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(gz,$41305035))+"% Помощи|r"
endif
endif
endif
endif
if GetItemTypeId(gy)==$49305A52 then
if GetItemUserData(gy)==10 or GetItemUserData(gy)==GetPlayerId(GetOwningPlayer(gz))+1 then
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41304D42)==4 then
call RemoveItem(nI(gz,$49305435))
call SetUnitAbilityLevel(gz,$41304D42,5)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+50,false)
set TS[g0]=TS[g0]+.03
set UL[g0]=UL[g0]+3
set g1[g0-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(gz,$41304D42))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41304D42))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41304D42))+"% Жизни|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4A)==4 then
call RemoveItem(nI(gz,$49305A52))
call SetUnitAbilityLevel(gz,$41305A4A,5)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
set Ng[g0]=Ng[g0]+.03
set UM[g0]=UM[g0]+3
set g1[g0-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4A))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4A))+" Защиты|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4A))+"% Защиты|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41313433)==4 then
call RemoveItem(nI(gz,$49305A52))
call SetUnitAbilityLevel(gz,$41313433,5)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+50,false)
set N1[g0]=N1[g0]+.03
set UK[g0]=UK[g0]+3
set g1[g0-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(gz,$41313433))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41313433))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41313433))+"% Магии|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4C)==4 then
call RemoveItem(nI(gz,$49305A52))
call SetUnitAbilityLevel(gz,$41305A4C,5)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroAgi(gz,GetHeroAgi(gz,true)-(GetHeroAgi(gz,true)-GetHeroAgi(gz,false))+50,false)
set Ne[g0]=Ne[g0]+.03
set UJ[g0]=UJ[g0]+3
set g1[g0-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4C))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4C))+" Ловкости|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4C))+"% Разрушения|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305A4B)==4 then
call RemoveItem(nI(gz,$49305A52))
call SetUnitAbilityLevel(gz,$41305A4B,5)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+50,false)
set Nh[g0]=Nh[g0]+.03
set UI[g0]=UI[g0]+3
set g1[g0-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4B))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4B))+" Силы|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4B))+"% Силы|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A37)==1 then
if GetUnitAbilityLevel(gz,$41305035)==4 then
call RemoveItem(nI(gz,$49305A52))
call SetUnitAbilityLevel(gz,$41305035,5)
call nX(gz,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+25,false)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+25,false)
set UO[g0]=UO[g0]+2
set g1[g0-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(gz,$41305035))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(gz,$41305035))+" Силы и Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(gz,$41305035))+"% Помощи|r"
endif
endif
endif
endif
endif
set gy=null
set gz=null
endfunction
function BsZ takes nothing returns nothing
local trigger gx=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gx,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(gx,function BsY)
set gx=null
endfunction
function Bsa takes nothing returns nothing
local unit gz=GetTriggerUnit()
local integer g0=GetPlayerId(GetOwningPlayer(gz))+1
if IsUnitType(gz,UNIT_TYPE_HERO)==true then
if GetUnitAbilityLevel(gz,$41304D42)>=1 then
if GetUnitAbilityLevel(gz,$41305A37)!=1 then
call UnitAddAbility(gz,$41305A37)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+(50+GetUnitAbilityLevel(gz,$41304D42)*50),false)
set TS[g0]=TS[g0]+(.03+.03*GetUnitAbilityLevel(gz,$41304D42))
set UL[g0]=UL[g0]+(3+3*GetUnitAbilityLevel(gz,$41304D42))
set g1[g0-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(gz,$41304D42))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41304D42))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41304D42))+"% Жизни|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A4A)>=1 then
if GetUnitAbilityLevel(gz,$41305A37)!=1 then
call UnitAddAbility(gz,$41305A37)
set Ng[g0]=Ng[g0]+(.03+.03*GetUnitAbilityLevel(gz,$41305A4A))
set UM[g0]=UM[g0]+(3+3*GetUnitAbilityLevel(gz,$41305A4A))
set g1[g0-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4A))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4A))+" Защиты|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4A))+"% Защиты|r"
endif
endif
if GetUnitAbilityLevel(gz,$41313433)>=1 then
if GetUnitAbilityLevel(gz,$41305A37)!=1 then
call UnitAddAbility(gz,$41305A37)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+(50+GetUnitAbilityLevel(gz,$41313433)*50),false)
set N1[g0]=N1[g0]+(.03+.03*GetUnitAbilityLevel(gz,$41313433))
set UK[g0]=UK[g0]+(3+3*GetUnitAbilityLevel(gz,$41313433))
set g1[g0-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(gz,$41313433))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41313433))+" Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41313433))+"% Магии|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A4C)>=1 then
if GetUnitAbilityLevel(gz,$41305A37)!=1 then
call UnitAddAbility(gz,$41305A37)
call SetHeroAgi(gz,GetHeroAgi(gz,true)-(GetHeroAgi(gz,true)-GetHeroAgi(gz,false))+(50+GetUnitAbilityLevel(gz,$41305A4C)*50),false)
set Ne[g0]=Ne[g0]+(.03+.03*GetUnitAbilityLevel(gz,$41305A4C))
set UJ[g0]=UJ[g0]+(3+3*GetUnitAbilityLevel(gz,$41305A4C))
set g1[g0-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4C))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4C))+" Ловкости|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4C))+"% Разрушения|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305A4B)>=1 then
if GetUnitAbilityLevel(gz,$41305A37)!=1 then
call UnitAddAbility(gz,$41305A37)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+(50+GetUnitAbilityLevel(gz,$41305A4B)*50),false)
set Nh[g0]=Nh[g0]+(.03+.03*GetUnitAbilityLevel(gz,$41305A4B))
set UI[g0]=UI[g0]+(3+3*GetUnitAbilityLevel(gz,$41305A4B))
set g1[g0-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(gz,$41305A4B))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(gz,$41305A4B))+" Силы|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(gz,$41305A4B))+"% Силы|r"
endif
endif
if GetUnitAbilityLevel(gz,$41305035)>=1 then
if GetUnitAbilityLevel(gz,$41305A37)!=1 then
call UnitAddAbility(gz,$41305A37)
call SetHeroStr(gz,GetHeroStr(gz,true)-(GetHeroStr(gz,true)-GetHeroStr(gz,false))+(25+GetUnitAbilityLevel(gz,$41305035)*25),false)
call SetHeroInt(gz,GetHeroInt(gz,true)-(GetHeroInt(gz,true)-GetHeroInt(gz,false))+(25+GetUnitAbilityLevel(gz,$41305035)*25),false)
set UO[g0]=UO[g0]+(2+2*GetUnitAbilityLevel(gz,$41305035))
set g1[g0-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(gz,$41305035))+"]"
set g1[g0-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(gz,$41305035))+" Силы и Разума|r"
set g1[g0-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(gz,$41305035))+"% Помощи|r"
endif
endif
endif
set gz=null
endfunction
function Bsb takes nothing returns nothing
local trigger g2=CreateTrigger()
call TriggerRegisterEnterRectSimple(g2,GR)
call TriggerAddAction(g2,function Bsa)
set g2=null
endfunction
function Bsc takes nothing returns nothing
local unit Hw=LoadUnitHandle(PR,GetHandleId(GetExpiredTimer()),0)
local integer MC=LoadInteger(PR,GetHandleId(GetExpiredTimer()),1)
local integer Vn=LoadInteger(PR,GetHandleId(GetExpiredTimer()),2)
call DestroyEffect(LoadEffectHandle(PR,GetHandleId(GetExpiredTimer()),3))
if Vn==1 then
call SetHeroStr(Hw,GetHeroStr(Hw,false)-MC,false)
elseif Vn==2 then
call SetHeroAgi(Hw,GetHeroAgi(Hw,false)-MC,false)
elseif Vn==3 then
call SetHeroInt(Hw,GetHeroInt(Hw,false)-MC,false)
endif
call UnitRemoveAbility(Hw,$41305044)
set Hw=null
call RemoveSavedHandle(PR,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PR,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function Bsd takes nothing returns nothing
local item gy=GetManipulatedItem()
local unit gz=GetTriggerUnit()
local integer Mc=GetItemTypeId(gy)
local integer N4=0
local integer g8=0
local integer g0=GetPlayerId(GetOwningPlayer(gz))+1
local boolean hB=false
local integer g9
local integer Me
local integer Np
local integer Nq
local item Ns
local timer Nt
if GetItemTypeId(gy)==$49313032 then
call RemoveItem(gy)
set gU[111]=gU[111]-25000
endif
if GetItemType(gy)!=ITEM_TYPE_UNKNOWN then
if GetItemUserData(gy)==0 then
call SetItemUserData(gy,g0)
elseif GetItemUserData(gy)==10 then
call SetItemUserData(gy,g0)
elseif GetItemUserData(gy)!=10 and GetItemUserData(gy)!=g0 then
call UnitRemoveItem(gz,gy)
call nX(gz,"Предмет не ваш!",.023,0,255,255)
endif
if GetItemTypeId(gy)!=$4930554B and GetItemTypeId(gy)!=$49303856 and GetItemTypeId(gy)!=$49303854 and GetItemTypeId(gy)!=$49305549 and GetItemTypeId(gy)!=$49304C44 and GetItemTypeId(gy)!=$49303855 then
loop
if UnitItemInSlot(gz,N4)!=null and GetItemTypeId(UnitItemInSlot(gz,N4))==Mc then
set g8=g8+1
endif
set N4=N4+1
exitwhen N4>=6
endloop
endif
if g8>=2 then
call UnitRemoveItem(gz,gy)
call nX(gz,"НЕА!!",.023,255,0,0)
endif
if GetItemLevel(gy)==100 then
set Me=GetItemLevel(gy)
set Np=0
set Nq=0
loop
if UnitItemInSlot(gz,Np)!=null and GetItemLevel(UnitItemInSlot(gz,Np))==Me then
set Nq=Nq+1
endif
set Np=Np+1
exitwhen Np>=6
endloop
if Nq>=2 then
call UnitRemoveItem(gz,gy)
call nX(gz,"Не больше 1 кровавой вещи",.023,0,255,255)
endif
endif
if GetItemLevel(gy)==77 then
set Me=GetItemLevel(gy)
set Np=0
set Nq=0
loop
if UnitItemInSlot(gz,Np)!=null and GetItemLevel(UnitItemInSlot(gz,Np))==Me then
set Nq=Nq+1
endif
set Np=Np+1
exitwhen Np>=6
endloop
if Nq>=2 then
call UnitRemoveItem(gz,gy)
call nX(gz,"Не больше 1 Сета!",.023,255,255,0)
endif
endif
if GetItemLevel(gy)==80 then
set Me=GetItemLevel(gy)
set Np=0
set Nq=0
loop
if UnitItemInSlot(gz,Np)!=null and GetItemLevel(UnitItemInSlot(gz,Np))==Me then
set Nq=Nq+1
endif
set Np=Np+1
exitwhen Np>=6
endloop
if Nq>=2 then
call UnitRemoveItem(gz,gy)
call nX(gz,"Не больше 1 Черной вещи высокого уровня!",.023,100,100,100)
endif
endif
if GetItemLevel(gy)==50 then
set Me=GetItemLevel(gy)
set Np=0
set Nq=0
loop
if UnitItemInSlot(gz,Np)!=null and GetItemLevel(UnitItemInSlot(gz,Np))==Me then
set Nq=Nq+1
endif
set Np=Np+1
exitwhen Np>=6
endloop
if Nq>=3 then
call UnitRemoveItem(gz,gy)
call nX(gz,"Не больше 2-х Сокровищ!",.023,255,0,255)
endif
endif
if GetItemType(gy)==ITEM_TYPE_PURCHASABLE then
set Me=0
set Np=0
loop
if UnitItemInSlot(gz,Me)!=null and GetItemType(UnitItemInSlot(gz,Me))==ITEM_TYPE_PURCHASABLE then
set Np=Np+1
endif
set Me=Me+1
exitwhen Me>=6
endloop
if Np>=2 then
call UnitRemoveItem(gz,gy)
call nX(gz,"Не сегодня",.023,255,0,255)
endif
endif
if GetItemLevel(gy)==88 then
set Me=0
set Np=0
loop
if UnitItemInSlot(gz,Me)!=null and GetItemLevel(UnitItemInSlot(gz,Me))==88 then
set Np=Np+1
endif
set Me=Me+1
exitwhen Me>=6
endloop
if Np>=2 then
call UnitRemoveItem(gz,gy)
call nX(gz,"Не больше 1 Аква предмета!",.023,100,100,100)
endif
endif
endif
if nH(gz,$74666172) and nH(gz,$7372746C) then
call RemoveItem(nI(gz,$74666172))
call RemoveItem(nI(gz,$7372746C))
set Ns=nJ($6B79626C,gz)
call SetItemUserData(Ns,GetPlayerId(GetOwningPlayer(gz))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",gz,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",gz,"chest"))
set Ns=null
elseif nH(gz,$6B79626C) and nH(gz,$6573617A) then
call RemoveItem(nI(gz,$6B79626C))
call RemoveItem(nI(gz,$6573617A))
set Ns=nJ($6B796D6E,gz)
call SetItemUserData(Ns,GetPlayerId(GetOwningPlayer(gz))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",gz,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",gz,"chest"))
set Ns=null
elseif nH(gz,$736F756C) and nH(gz,$7363686C) and nH(gz,$74626172) then
call RemoveItem(nI(gz,$736F756C))
call RemoveItem(nI(gz,$7363686C))
call RemoveItem(nI(gz,$74626172))
set Ns=nJ($6B336D31,gz)
call SetItemUserData(Ns,GetPlayerId(GetOwningPlayer(gz))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",gz,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",gz,"chest"))
set Ns=null
elseif nH(gz,$6B336D31) and nH(gz,$4930594C) then
call RemoveItem(nI(gz,$6B336D31))
call RemoveItem(nI(gz,$4930594C))
set Ns=nJ($77746C67,gz)
call SetItemUserData(Ns,GetPlayerId(GetOwningPlayer(gz))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",gz,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",gz,"chest"))
set Ns=null
elseif nH(gz,$73726264) and nH(gz,$6E737069) and nH(gz,$72656A31) and nH(gz,$736B7274) then
call RemoveItem(nI(gz,$73726264))
call RemoveItem(nI(gz,$6E737069))
call RemoveItem(nI(gz,$72656A31))
call RemoveItem(nI(gz,$736B7274))
set Ns=nJ($73747265,gz)
call SetItemUserData(Ns,GetPlayerId(GetOwningPlayer(gz))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",gz,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",gz,"chest"))
set Ns=null
elseif nH(gz,$49304D50) and nH(gz,$49305239) and nH(gz,$73626F6B) then
call RemoveItem(nI(gz,$49304D50))
call RemoveItem(nI(gz,$49305239))
call RemoveItem(nI(gz,$73626F6B))
set Ns=nJ($73666F67,gz)
call SetItemUserData(Ns,GetPlayerId(GetOwningPlayer(gz))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",gz,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",gz,"chest"))
set Ns=null
elseif nH(gz,$49303046) and nH(gz,$49303045) then
call RemoveItem(nI(gz,$49303046))
call RemoveItem(nI(gz,$49303045))
set Ns=nJ($49303047,gz)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",gz,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",gz,"chest"))
set Ns=null
endif
if IsUnitType(gz,UNIT_TYPE_HERO)==true then
if GetUnitAbilityLevel(gz,$41305044)==0 and GetUnitLevel(gz)>=52 then
set Nt=CreateTimer()
if GetItemTypeId(gy)==$72616D33 then
call UnitAddAbility(gz,$41305044)
set Me=200+GetHeroStr(gz,true)/10
call SetHeroStr(gz,GetHeroStr(gz,false)+Me,false)
call SaveUnitHandle(PR,GetHandleId(Nt),0,gz)
call SaveInteger(PR,GetHandleId(Nt),1,Me)
call SaveInteger(PR,GetHandleId(Nt),2,1)
call SaveEffectHandle(PR,GetHandleId(Nt),3,AddSpecialEffectTarget("war3mapImported\\Radiance Crimson.mdx",gz,"chest"))
call TimerStart(Nt,150,false,function Bsc)
elseif GetItemTypeId(gy)==$72616D32 then
call UnitAddAbility(gz,$41305044)
set Me=200+GetHeroAgi(gz,true)/10
call SetHeroAgi(gz,GetHeroAgi(gz,false)+Me,false)
call SaveUnitHandle(PR,GetHandleId(Nt),0,gz)
call SaveInteger(PR,GetHandleId(Nt),1,Me)
call SaveInteger(PR,GetHandleId(Nt),2,2)
call SaveEffectHandle(PR,GetHandleId(Nt),3,AddSpecialEffectTarget("war3mapImported\\Radiance Nature.mdx",gz,"chest"))
call TimerStart(Nt,150,false,function Bsc)
elseif GetItemTypeId(gy)==$72616D31 then
call UnitAddAbility(gz,$41305044)
set Me=200+GetHeroInt(gz,true)/10
call SetHeroInt(gz,GetHeroInt(gz,false)+Me,false)
call SaveUnitHandle(PR,GetHandleId(Nt),0,gz)
call SaveInteger(PR,GetHandleId(Nt),1,Me)
call SaveInteger(PR,GetHandleId(Nt),2,3)
call SaveEffectHandle(PR,GetHandleId(Nt),3,AddSpecialEffectTarget("war3mapImported\\Radiance Royal.mdx",gz,"chest"))
call TimerStart(Nt,150,false,function Bsc)
endif
set Nt=null
endif
if GetItemUserData(gy)==g0 or GetItemUserData(gy)==0 then
if GetItemTypeId(gy)==$49305847 or GetItemTypeId(gy)==$49305956 or GetItemTypeId(gy)==$49305958 then
set g9=50
set hB=true
elseif GetItemTypeId(gy)==$49305331 or GetItemTypeId(gy)==$49304834 or GetItemTypeId(gy)==$4930525A or GetItemTypeId(gy)==$49304D38 or GetItemTypeId(gy)==$49303048 or GetItemTypeId(gy)==$49305A30 then
set g9=100
set hB=true
elseif GetItemTypeId(gy)==$49305639 or GetItemTypeId(gy)==$49305A38 or GetItemTypeId(gy)==$49304E5A or GetItemTypeId(gy)==$49305A39 or GetItemTypeId(gy)==$49304D34 or GetItemTypeId(gy)==$49305333 or GetItemTypeId(gy)==$49305332 or GetItemTypeId(gy)==$49305638 or GetItemTypeId(gy)==$49304D35 or GetItemTypeId(gy)==$49304D36 or GetItemTypeId(gy)==$49305050 or GetItemTypeId(gy)==$49305053 then
set g9=150
set hB=true
elseif GetItemTypeId(gy)==$49313057 or GetItemTypeId(gy)==$49313134 or GetItemTypeId(gy)==$49313145 or GetItemTypeId(gy)==$49313055 or GetItemTypeId(gy)==$49313141 or GetItemTypeId(gy)==$49313138 or GetItemTypeId(gy)==$49313130 or GetItemTypeId(gy)==$49313132 or GetItemTypeId(gy)==$49313143 or GetItemTypeId(gy)==$49313059 or GetItemTypeId(gy)==$49313136 or GetItemTypeId(gy)==$49313147 then
set g9=250
set hB=true
endif
if hB==true then
if GetHeroStr(gz,true)>GetHeroAgi(gz,true) and GetHeroStr(gz,true)>GetHeroInt(gz,true) then
call SetHeroStr(gz,GetHeroStr(gz,false)+g9,false)
set hC[g0]=1
elseif GetHeroInt(gz,true)>GetHeroAgi(gz,true) and GetHeroInt(gz,true)>GetHeroStr(gz,true) then
call SetHeroInt(gz,GetHeroInt(gz,false)+g9,false)
set hC[g0]=3
elseif GetHeroAgi(gz,true)>GetHeroInt(gz,true) and GetHeroAgi(gz,true)>GetHeroStr(gz,true) then
call SetHeroAgi(gz,GetHeroAgi(gz,false)+g9,false)
set hC[g0]=2
endif
endif
endif
endif
if GetItemType(gy)==ITEM_TYPE_PURCHASABLE then
call UnitAddAbility(gz,$41303853)
endif
set gy=null
set gz=null
endfunction
function Bse takes integer g3,real M7,real Nf,real NU,real g4,real Nn,integer Hv returns nothing
set g5=g5+1
set g6[g5]=g3
set g7[g5*6+0]=M7
set g7[g5*6+1]=Nf
set g7[g5*6+2]=NU
set g7[g5*6+3]=g4
set g7[g5*6+4]=Nn
set g7[g5*6+5]=Hv
endfunction
function Bsf takes unit Hw,real M7,real Nf,real NU,real g4,real Nn,integer Hv returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))+1
set Nh[Mc]=Nh[Mc]+M7
set UI[Mc]=UI[Mc]+R2I(M7*100)
set Ng[Mc]=Ng[Mc]+Nf
set UM[Mc]=UM[Mc]+R2I(Nf*100)
set Ne[Mc]=Ne[Mc]+NU
set UJ[Mc]=UJ[Mc]+R2I(NU*100)
set N1[Mc]=N1[Mc]+g4
set UK[Mc]=UK[Mc]+R2I(g4*100)
set TS[Mc]=TS[Mc]+Nn
set UL[Mc]=UL[Mc]+R2I(Nn*100)
set UO[Mc]=UO[Mc]+Hv
endfunction
function Bsg takes unit Hw,real M7,real Nf,real NU,real g4,real Nn,integer Hv returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))+1
set Nh[Mc]=Nh[Mc]-M7
set UI[Mc]=UI[Mc]-R2I(M7*100)
set Ng[Mc]=Ng[Mc]-Nf
set UM[Mc]=UM[Mc]-R2I(Nf*100)
set Ne[Mc]=Ne[Mc]-NU
set UJ[Mc]=UJ[Mc]-R2I(NU*100)
set N1[Mc]=N1[Mc]-g4
set UK[Mc]=UK[Mc]-R2I(g4*100)
set TS[Mc]=TS[Mc]-Nn
set UL[Mc]=UL[Mc]-R2I(Nn*100)
set UO[Mc]=UO[Mc]-Hv
endfunction
function Bsh takes nothing returns nothing
local unit QH=GetTriggerUnit()
local item MQ=GetManipulatedItem()
local integer Mc=GetItemTypeId(MQ)
local integer MC=1
if IsUnitType(QH,UNIT_TYPE_HERO) then
if GetItemUserData(MQ)==GetPlayerId(GetOwningPlayer(QH))+1 then
loop
if g6[MC]==Mc then
call Bsg(QH,g7[MC*6+0],g7[MC*6+1],g7[MC*6+2],g7[MC*6+3],g7[MC*6+4],R2I(g7[MC*6+5]))
endif
exitwhen MC==g5
set MC=MC+1
endloop
endif
endif
set QH=null
set MQ=null
endfunction
function Bsi takes nothing returns nothing
local unit QH=GetTriggerUnit()
local item MQ=GetManipulatedItem()
local integer Mc=GetItemTypeId(MQ)
local integer MC=1
if IsUnitType(QH,UNIT_TYPE_HERO) then
if GetItemUserData(MQ)==0 or GetItemUserData(MQ)==GetPlayerId(GetOwningPlayer(QH))+1 then
loop
if g6[MC]==Mc then
call Bsf(QH,g7[MC*6+0],g7[MC*6+1],g7[MC*6+2],g7[MC*6+3],g7[MC*6+4],R2I(g7[MC*6+5]))
endif
exitwhen MC==g5
set MC=MC+1
endloop
endif
endif
set QH=null
set MQ=null
endfunction
function Bsj takes nothing returns nothing
call Bse($49313050,.12,.12,.12,.12,.12,0)
call Bse($49313049,.04,.04,.04,.04,.04,0)
call Bse($4931304D,.1,.1,.1,.1,.1,0)
call Bse($4931304C,.07,.07,.07,.07,.07,0)
call Bse($49305A46,.15,0,0,0,0,9)
call Bse($49305942,.21,0,0,0,0,12)
call Bse($49305551,.06,.06,.06,.06,.06,6)
call Bse($49305553,.06,.06,.06,.06,.06,6)
call Bse($4930554F,.06,.06,.06,.06,.06,6)
call Bse($49304454,0,.03,0,0,0,3)
call Bse($49304356,0,.03,0,0,0,3)
call Bse($49304641,0,.06,0,0,0,6)
call Bse($49304653,0,.09,0,0,0,6)
call Bse($49304748,0,.09,0,0,0,6)
call Bse($49304E47,.06,.06,.06,.06,.06,6)
call Bse($49304E45,.06,.06,.06,.06,.06,6)
call Bse($49304E48,.06,.06,.06,.06,.06,6)
call Bse($49304E4A,.06,.06,.06,.06,.06,6)
call Bse($49304E49,.06,.06,.06,.06,.06,6)
call Bse($49304E46,.03,.03,.03,.03,.03,3)
call Bse($49304E44,.03,.03,.03,.03,.03,3)
call Bse($49304E43,.03,.03,.03,.03,.03,3)
call Bse($49304739,.03,.03,.03,.03,.03,3)
call Bse($4930304C,.03,.03,.03,.03,.03,3)
call Bse($49303634,.03,.03,.03,.03,.03,3)
call Bse($49303645,.03,.03,.03,.03,.03,3)
call Bse($49303557,.03,.03,.03,.03,.03,3)
call Bse($49304542,0,.06,0,0,0,3)
call Bse($49304358,0,.03,0,0,.03,0)
call Bse($49304446,0,.03,0,0,.03,0)
call Bse($4930464C,0,.09,0,0,.09,0)
call Bse($49304741,0,.09,0,0,.09,0)
call Bse($49304458,0,.06,0,0,.06,0)
call Bse($49304633,0,.06,0,0,.06,0)
call Bse($49304353,.03,.03,0,0,0,0)
call Bse($49304448,.03,.03,0,0,0,0)
call Bse($4930445A,.03,.06,0,0,0,0)
call Bse($49304634,.03,.06,0,0,0,0)
call Bse($4930464D,.06,.09,0,0,0,0)
call Bse($49304742,.06,.09,0,0,0,0)
call Bse($49304355,.03,0,0,0,0,0)
call Bse($4930444A,.03,0,0,0,0,0)
call Bse($49304531,.06,0,0,0,0,0)
call Bse($49304635,.06,0,0,0,0,0)
call Bse($4930464E,.09,0,0,0,0,0)
call Bse($49304743,.09,0,0,0,0,0)
call Bse($49304359,0,0,0,.03,0,0)
call Bse($4930444C,0,0,0,.03,0,0)
call Bse($49304533,0,0,0,.06,0,0)
call Bse($49304636,0,0,0,.06,0,0)
call Bse($4930464F,0,0,0,.09,0,0)
call Bse($49304744,0,0,0,.09,0,0)
call Bse($49304430,0,0,.03,0,0,0)
call Bse($4930444E,0,0,.03,0,0,0)
call Bse($49304535,0,0,.06,0,0,0)
call Bse($49304637,0,0,.06,0,0,0)
call Bse($49304650,0,0,.09,0,0,0)
call Bse($49304745,0,0,.09,0,0,0)
call Bse($4930435A,0,0,.03,0,0,0)
call Bse($49304450,0,0,.03,0,0,0)
call Bse($49304537,0,0,.06,0,0,0)
call Bse($49304638,0,0,.06,0,0,0)
call Bse($49304651,0,0,.09,0,0,0)
call Bse($49304746,0,0,.09,0,0,0)
call Bse($49304354,0,0,0,0,.03,0)
call Bse($49304452,0,0,0,0,.03,0)
call Bse($49304539,0,0,0,0,.06,0)
call Bse($49304639,0,0,0,0,.06,0)
call Bse($49304652,0,0,0,0,.09,0)
call Bse($49304747,0,0,0,0,.09,0)
call Bse($49304357,0,0,0,.03,.03,0)
call Bse($49304456,0,0,0,.03,.03,0)
call Bse($49304544,0,0,0,.06,.06,0)
call Bse($49304642,0,0,0,.06,.06,0)
call Bse($49304654,0,0,0,.09,.09,0)
call Bse($49304749,0,0,0,.09,.09,0)
call Bse($49305039,0,0,0,0,.12,0)
call Bse($49305430,0,0,0,.09,0,0)
call Bse($49304755,0,0,0,0,.09,0)
call Bse($49305031,0,0,0,0,.06,0)
call Bse($49304943,0,.06,0,0,0,0)
call Bse($49305156,0,.09,0,0,0,0)
call Bse($49305157,0,0,.09,0,0,0)
call Bse($49304942,0,0,.06,0,0,0)
call Bse($49305158,.09,0,0,0,0,0)
call Bse($49304F5A,.06,0,0,0,0,0)
call Bse($49305033,.09,0,0,0,0,0)
call Bse($49305159,0,0,0,.06,0,0)
call Bse($49304941,0,0,0,.09,0,0)
call Bse($49305355,0,.09,0,0,0,0)
call Bse($49305432,0,0,0,0,.09,0)
call Bse($49305035,0,0,0,0,.09,0)
call Bse($4930515A,0,0,0,0,.09,0)
call Bse($49305048,0,0,0,0,.06,0)
call Bse($49304C41,0,.12,0,0,0,0)
call Bse($49304C37,0,0,0,.12,0,0)
call Bse($49304931,.09,0,0,0,0,0)
call Bse($49305230,.09,0,0,0,0,0)
call Bse($49305232,0,0,.06,0,0,0)
call Bse($49304933,0,0,.09,0,0,0)
call Bse($49305231,0,0,0,.09,0,0)
call Bse($49305046,0,0,0,.06,0,0)
call Bse($49304A4F,0,.09,0,0,0,0)
call Bse($49305037,.12,0,0,0,0,0)
call Bse($49304B46,0,0,0,.09,0,0)
call Bse($49305359,0,0,.09,0,0,0)
call Bse($49305357,.09,0,0,0,0,0)
call Bse($49305044,0,.06,0,0,0,0)
call Bse($49305233,0,.09,0,0,0,0)
call Bse($49305534,0,.12,0,0,0,0)
call Bse($49305532,0,0,0,0,.12,0)
call Bse($49305538,.12,0,0,0,0,0)
call Bse($49305536,0,0,0,.12,0,0)
call Bse($49305541,0,0,.12,0,0,0)
call Bse($49304C42,0,0,.12,0,0,0)
call Bse($49305631,0,0,.15,0,0,0)
call Bse($49305633,0,0,.15,.15,0,0)
call Bse($49305A56,0,0,.18,.18,0,0)
call Bse($49305637,0,0,0,0,.15,0)
call Bse($4930594F,0,0,.21,0,0,0)
call Bse($49313030,0,0,0,.21,0,0)
call Bse($49305635,0,0,0,.15,0,0)
call Bse($49305951,.21,0,0,0,0,0)
call Bse($4930555A,.15,0,0,0,0,0)
call Bse($49305A59,0,0,0,0,.21,0)
call Bse($49305555,0,.15,0,0,0,0)
call Bse($49313031,0,.21,0,0,0,0)
call Bse($49305953,0,.21,0,0,0,0)
call Bse($49305558,0,.15,0,0,0,0)
call Bse($49305A4B,.06,.06,.06,.06,.06,0)
call Bse($49305A4C,.09,.09,.09,.09,.09,0)
call Bse($49305A4E,.11,.11,.11,.11,.11,0)
call Bse($49305A4E,.14,.14,.14,.14,.14,0)
call Bse($49305A4F,.16,.16,.16,.16,.16,0)
call Bse($49305A50,.22,.22,.22,.22,.22,0)
call Bse($49304154,0,.06,0,0,0,0)
call Bse($49304336,0,.06,0,0,0,0)
call Bse($4930544B,0,.06,0,0,0,0)
call Bse($49304550,0,.06,0,0,0,0)
call Bse($4930434E,0,.06,0,0,0,0)
call Bse($49304B53,0,.09,0,0,0,0)
call Bse($4930564E,0,.15,0,0,0,0)
call Bse($4930565A,0,.15,0,0,0,0)
call Bse($49305655,0,.12,0,0,0,0)
call Bse($49304156,0,0,.06,0,0,0)
call Bse($49304339,0,0,.06,0,0,0)
call Bse($49304552,0,0,.06,0,0,0)
call Bse($4930544C,0,0,.06,0,0,0)
call Bse($4930434C,0,0,.06,0,0,0)
call Bse($49304B54,0,0,.09,0,0,0)
call Bse($49305651,0,0,.15,0,0,0)
call Bse($49305657,0,0,.15,0,0,0)
call Bse($49305653,0,0,.12,0,0,0)
call Bse($49304437,.06,0,0,0,0,0)
call Bse($49304438,.06,0,0,0,0,0)
call Bse($49304553,.06,0,0,0,0,0)
call Bse($4930544D,.06,0,0,0,0,0)
call Bse($49304439,.06,0,0,0,0,0)
call Bse($49304B55,.09,0,0,0,0,0)
call Bse($49305650,.15,0,0,0,0,0)
call Bse($49305658,.15,0,0,0,0,0)
call Bse($49305654,.12,0,0,0,0,0)
call Bse($49304152,0,0,0,.06,.06,0)
call Bse($49304342,0,0,0,.06,.06,0)
call Bse($4930544E,0,0,0,.06,.06,0)
call Bse($49304551,0,0,0,.06,.06,0)
call Bse($4930434D,0,0,0,.06,.06,0)
call Bse($49304B52,0,0,0,.09,.09,0)
call Bse($4930564F,0,0,0,.15,.15,0)
call Bse($49305659,0,0,0,.15,.15,0)
call Bse($49305656,0,0,0,.12,.12,0)
call Bse($49305847,.02,.02,.02,.02,.02,2)
call Bse($49305956,.02,.02,.02,.02,.02,2)
call Bse($49305958,.02,.02,.02,.02,.02,2)
call Bse($49305A30,.04,.04,.04,.04,.04,4)
call Bse($49303048,.04,.04,.04,.04,.04,4)
call Bse($49304D38,.04,.04,.04,.04,.04,4)
call Bse($4930525A,.04,.04,.04,.04,.04,4)
call Bse($49305331,.04,.04,.04,.04,.04,4)
call Bse($49304834,.04,.04,.04,.04,.04,4)
call Bse($49304D36,.06,0,0,0,0,4)
call Bse($49305638,.06,0,0,0,0,4)
call Bse($49304D35,0,.06,0,0,0,4)
call Bse($49305332,0,.06,0,0,0,4)
call Bse($49305333,0,0,.06,0,0,4)
call Bse($49305639,.06,0,0,0,0,4)
call Bse($49304E5A,0,0,.06,0,0,4)
call Bse($49304D34,.06,0,0,0,0,4)
call Bse($49305A39,0,0,0,0,.06,4)
call Bse($49305A38,0,0,0,.06,0,4)
call Bse($49305053,0,0,0,0,.06,4)
call Bse($49305050,0,0,0,.06,0,4)
call Bse($49313057,0,.07,0,0,0,5)
call Bse($49313055,.07,0,0,0,0,5)
call Bse($49313130,0,.07,0,0,0,5)
call Bse($49313059,.07,0,0,0,0,5)
call Bse($49313132,.07,0,0,0,0,5)
call Bse($49313134,0,0,.07,0,0,5)
call Bse($49313136,.07,0,0,0,0,5)
call Bse($49313138,0,0,.07,0,0,5)
call Bse($49313141,0,0,0,0,.07,5)
call Bse($49313143,0,0,0,.07,0,5)
call Bse($49313147,0,0,0,0,.07,5)
call Bse($49313145,0,0,0,.07,0,5)
call Bse($49304937,0,0,.07,0,0,0)
call Bse($49313150,0,0,.03,0,0,0)
call Bse($4931314C,0,0,.03,0,0,0)
call Bse($49313151,0,0,.06,0,0,0)
call Bse($4931314D,0,0,.06,0,0,0)
call Bse($4931314E,0,0,.09,0,0,0)
call Bse($4931314F,0,0,.09,0,0,0)
call Bse($49305343,.03,.03,.03,.03,.03,3)
call Bse($49305344,.06,.06,.06,.06,.06,6)
endfunction
function Bsk takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterTimerEventSingle(He,.01)
call TriggerAddAction(He,function Bsj)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(He,function Bsd)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(He,function Bsi)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddAction(He,function Bsh)
set He=null
endfunction
function Bsl takes nothing returns nothing
local unit hD=GetTriggerUnit()
local item gy=GetManipulatedItem()
local integer g0=GetPlayerId(GetOwningPlayer(hD))+1
local boolean hB=false
local integer g9
if IsUnitType(hD,UNIT_TYPE_HERO)==true then
if GetItemUserData(gy)==g0 then
if GetItemTypeId(gy)==$49305847 or GetItemTypeId(gy)==$49305956 or GetItemTypeId(gy)==$49305958 then
set g9=50
set hB=true
elseif GetItemTypeId(gy)==$49305331 or GetItemTypeId(gy)==$49304834 or GetItemTypeId(gy)==$4930525A or GetItemTypeId(gy)==$49304D38 or GetItemTypeId(gy)==$49303048 or GetItemTypeId(gy)==$49305A30 then
set g9=100
set hB=true
elseif GetItemTypeId(gy)==$49305639 or GetItemTypeId(gy)==$49305A38 or GetItemTypeId(gy)==$49304E5A or GetItemTypeId(gy)==$49305A39 or GetItemTypeId(gy)==$49304D34 or GetItemTypeId(gy)==$49305333 or GetItemTypeId(gy)==$49305332 or GetItemTypeId(gy)==$49305638 or GetItemTypeId(gy)==$49304D35 or GetItemTypeId(gy)==$49304D36 or GetItemTypeId(gy)==$49305050 or GetItemTypeId(gy)==$49305053 then
set g9=150
set hB=true
elseif GetItemTypeId(gy)==$49313057 or GetItemTypeId(gy)==$49313134 or GetItemTypeId(gy)==$49313145 or GetItemTypeId(gy)==$49313055 or GetItemTypeId(gy)==$49313141 or GetItemTypeId(gy)==$49313138 or GetItemTypeId(gy)==$49313130 or GetItemTypeId(gy)==$49313132 or GetItemTypeId(gy)==$49313143 or GetItemTypeId(gy)==$49313059 or GetItemTypeId(gy)==$49313136 or GetItemTypeId(gy)==$49313147 then
set g9=250
set hB=true
endif
if hB==true then
if hC[g0]==1 then
call SetHeroStr(hD,GetHeroStr(hD,false)-g9,false)
elseif hC[g0]==3 then
call SetHeroInt(hD,GetHeroInt(hD,false)-g9,false)
elseif hC[g0]==2 then
call SetHeroAgi(hD,GetHeroAgi(hD,false)-g9,false)
endif
endif
endif
endif
set gy=null
set hD=null
endfunction
function Bsm takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddAction(He,function Bsl)
set He=null
endfunction
function Bsn takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$5530304B then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$55303133 then
return true
endif
return false
endfunction
function Bso takes nothing returns boolean
if not Bsn() then
return false
endif
return true
endfunction
function Bsp takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==11) then
return false
endif
return true
endfunction
function Bsq takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303036 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303052 then
return true
endif
return false
endfunction
function Bsr takes nothing returns boolean
if not Bsq() then
return false
endif
return true
endfunction
function Bss takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==12) then
return false
endif
return true
endfunction
function Bst takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303034 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F30304A then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303053 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303055 then
return true
endif
return false
endfunction
function Bsu takes nothing returns boolean
if not Bst() then
return false
endif
return true
endfunction
function Bsv takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==13) then
return false
endif
return true
endfunction
function Bsw takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303147 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303656 then
return true
endif
return false
endfunction
function Bsx takes nothing returns boolean
if not Bsw() then
return false
endif
return true
endfunction
function Bsy takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==14) then
return false
endif
return true
endfunction
function Bsz takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303131 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303652 then
return true
endif
return false
endfunction
function Bs0 takes nothing returns boolean
if not Bsz() then
return false
endif
return true
endfunction
function Bs1 takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==15) then
return false
endif
return true
endfunction
function Bs2 takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303032 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303054 then
return true
endif
return false
endfunction
function Bs3 takes nothing returns boolean
if not Bs2() then
return false
endif
return true
endfunction
function Bs4 takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==16) then
return false
endif
return true
endfunction
function Bs5 takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303058 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303651 then
return true
endif
return false
endfunction
function Bs6 takes nothing returns boolean
if not Bs5() then
return false
endif
return true
endfunction
function Bs7 takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==17) then
return false
endif
return true
endfunction
function Bs8 takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$45303057 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$45303133 then
return true
endif
return false
endfunction
function Bs9 takes nothing returns boolean
if not Bs8() then
return false
endif
return true
endfunction
function BtB takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==18) then
return false
endif
return true
endfunction
function BtC takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830304C then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303659 then
return true
endif
return false
endfunction
function BtD takes nothing returns boolean
if not BtC() then
return false
endif
return true
endfunction
function BtE takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==19) then
return false
endif
return true
endfunction
function BtF takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303034 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830364E then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303733 then
return true
endif
return false
endfunction
function BtG takes nothing returns boolean
if not BtF() then
return false
endif
return true
endfunction
function BtH takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==20) then
return false
endif
return true
endfunction
function BtI takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303046 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303653 then
return true
endif
return false
endfunction
function BtJ takes nothing returns boolean
if not BtI() then
return false
endif
return true
endfunction
function BtK takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==21) then
return false
endif
return true
endfunction
function BtL takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$45303033 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$45303055 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4530304B then
return true
endif
return false
endfunction
function BtM takes nothing returns boolean
if not BtL() then
return false
endif
return true
endfunction
function BtN takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==22) then
return false
endif
return true
endfunction
function BtO takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303030 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303051 then
return true
endif
return false
endfunction
function BtP takes nothing returns boolean
if not BtO() then
return false
endif
return true
endfunction
function BtQ takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==23) then
return false
endif
return true
endfunction
function BtR takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303033 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830344A then
return true
endif
return false
endfunction
function BtS takes nothing returns boolean
if not BtR() then
return false
endif
return true
endfunction
function BtT takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==24) then
return false
endif
return true
endfunction
function BtU takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303036 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830364F then
return true
endif
return false
endfunction
function BtV takes nothing returns boolean
if not BtU() then
return false
endif
return true
endfunction
function BtW takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==25) then
return false
endif
return true
endfunction
function BtX takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303032 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303655 then
return true
endif
return false
endfunction
function BtY takes nothing returns boolean
if not BtX() then
return false
endif
return true
endfunction
function BtZ takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==26) then
return false
endif
return true
endfunction
function Bta takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303031 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303650 then
return true
endif
return false
endfunction
function Btb takes nothing returns boolean
if not Bta() then
return false
endif
return true
endfunction
function Btc takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==27) then
return false
endif
return true
endfunction
function Btd takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303259 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303736 then
return true
endif
return false
endfunction
function Bte takes nothing returns boolean
if not Btd() then
return false
endif
return true
endfunction
function Btf takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==28) then
return false
endif
return true
endfunction
function Btg takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303344 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303657 then
return true
endif
return false
endfunction
function Bth takes nothing returns boolean
if not Btg() then
return false
endif
return true
endfunction
function Bti takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==29) then
return false
endif
return true
endfunction
function Btj takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303356 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303532 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303744 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303748 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303749 then
return true
endif
return false
endfunction
function Btk takes nothing returns boolean
if not Btj() then
return false
endif
return true
endfunction
function Btl takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==30) then
return false
endif
return true
endfunction
function Btm takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830314B then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303735 then
return true
endif
return false
endfunction
function Btn takes nothing returns boolean
if not Btm() then
return false
endif
return true
endfunction
function Bto takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==32) then
return false
endif
return true
endfunction
function Btp takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303443 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303654 then
return true
endif
return false
endfunction
function Btq takes nothing returns boolean
if not Btp() then
return false
endif
return true
endfunction
function Btr takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==31) then
return false
endif
return true
endfunction
function Bts takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303353 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303734 then
return true
endif
return false
endfunction
function Btt takes nothing returns boolean
if not Bts() then
return false
endif
return true
endfunction
function Btu takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==33) then
return false
endif
return true
endfunction
function Btv takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303534 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303738 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303752 then
return true
endif
return false
endfunction
function Btw takes nothing returns boolean
if not Btv() then
return false
endif
return true
endfunction
function Btx takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==34) then
return false
endif
return true
endfunction
function Bty takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303550 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303730 then
return true
endif
return false
endfunction
function Btz takes nothing returns boolean
if not Bty() then
return false
endif
return true
endfunction
function Bt0 takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==35) then
return false
endif
return true
endfunction
function Bt1 takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303437 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303737 then
return true
endif
return false
endfunction
function Bt2 takes nothing returns boolean
if not Bt1() then
return false
endif
return true
endfunction
function Bt3 takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==36) then
return false
endif
return true
endfunction
function Bt4 takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303030 then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830374B then
return true
endif
return false
endfunction
function Bt5 takes nothing returns boolean
if not Bt4() then
return false
endif
return true
endfunction
function Bt6 takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==37) then
return false
endif
return true
endfunction
function Bt7 takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830354D then
return true
endif
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830374F then
return true
endif
return false
endfunction
function Bt8 takes nothing returns boolean
if not Bt7() then
return false
endif
return true
endfunction
function Bt9 takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==38) then
return false
endif
return true
endfunction
function BuB takes nothing returns boolean
if GetUnitTypeId(MV[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303049 then
return true
endif
return false
endfunction
function BuC takes nothing returns boolean
if not BuB() then
return false
endif
return true
endfunction
function BuD takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==39) then
return false
endif
return true
endfunction
function BuE takes nothing returns nothing
local unit gz=GetTriggerUnit()
local item gy=GetManipulatedItem()
if Bsp() then
if Bso() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bss() then
if Bsr() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bsv() then
if Bsu() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bsy() then
if Bsx() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bs1() then
if Bs0() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bs4() then
if Bs3() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bs7() then
if Bs6() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtB() then
if Bs9() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtE() then
if BtD() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtH() then
if BtG() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtK() then
if BtJ() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtN() then
if BtM() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtQ() then
if BtP() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtT() then
if BtS() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtW() then
if BtV() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtZ() then
if BtY() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btc() then
if Btb() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btf() then
if Bte() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bti() then
if Bth() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btl() then
if Btk() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bto() then
if Btn() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btr() then
if Btq() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btu() then
if Btt() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btx() then
if Btw() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bt0() then
if Btz() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bt3() then
if Bt2() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bt6() then
if Bt5() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bt9() then
if Bt8() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if BuD() then
if BuC() then
else
call UnitRemoveItem(gz,gy)
call nX(gz,"Не твоё!!!",.023,255,0,0)
endif
endif
if GetItemTypeId(gy)==$49305039 and GetUnitTypeId(gz)==$4830354D then
call UnitRemoveItem(gz,gy)
call nX(gz,"Ты же смерть! Какая жизнь?",.023,255,0,0)
endif
set gz=null
set gy=null
endfunction
function BuF takes nothing returns nothing
set hE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hE,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(hE,function BuE)
endfunction
function BuG takes nothing returns nothing
local item MQ=GetManipulatedItem()
local unit Hw=GetTriggerUnit()
local boolean Nn=false
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
local integer MC=1
loop
set hG[MC]=GetItemTypeId(UnitItemInSlot(NM[2*(Mc+1)],MC-1))
set MC=MC+1
exitwhen MC>6
endloop
if GetItemTypeId(MQ)==$49305846 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303835 or GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303834 or GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303833 then
set Nn=true
call RemoveUnit(NM[2*(Mc+1)])
call UnitAddAbility(MV[Mc],$4131374F)
call UnitAddAbility(MV[Mc],$41303458)
call UnitAddAbility(MV[Mc],$41305050)
call nb(Hw,0,0,0,0,0,0,"+100 стат, 4000 МР, 450 атк, 70 зщ.",100,100,100)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E30384B,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49305452 then
set Nn=true
call RemoveUnit(NM[2*(Mc+1)])
set hJ[GetPlayerId(GetOwningPlayer(Hw))+1]="+2000 МР"
call UnitAddAbility(MV[Mc],$4131374F)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303832,GetUnitX(Hw),GetUnitY(Hw),0.)
elseif GetItemTypeId(MQ)==$49305450 then
set Nn=true
call RemoveUnit(NM[2*(Mc+1)])
set hJ[GetPlayerId(GetOwningPlayer(Hw))+1]="+35 защиты"
call UnitAddAbility(MV[Mc],$4131374E)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303830,GetUnitX(Hw),GetUnitY(Hw),0.)
elseif GetItemTypeId(MQ)==$49305451 then
set Nn=true
call RemoveUnit(NM[2*(Mc+1)])
set hJ[GetPlayerId(GetOwningPlayer(Hw))+1]="+200 атаки"
call UnitAddAbility(MV[Mc],$4131374D)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303831,GetUnitX(Hw),GetUnitY(Hw),0.)
elseif GetItemTypeId(MQ)==$4930544F then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303533 then
set Nn=true
call RemoveUnit(NM[2*(Mc+1)])
call nb(Hw,.03,.03,.03,.03,.03,3,"+200 стат, 3% Экстрактов",200,200,200)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303746,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$4930504F then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303746 then
set Nn=true
call nb(Hw,0,0,0,.04,.04,0,"+300 разума, 4% Магии, Жизни",0,0,300)
call RemoveUnit(NM[2*(Mc+1)])
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303743,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49305051 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303746 then
set Nn=true
call nb(Hw,0,0,.05,0,0,0,"+300 ловкости, 5% Разрушения",0,300,0)
call RemoveUnit(NM[2*(Mc+1)])
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303742,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49305052 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303746 then
set Nn=true
call nb(Hw,.04,.04,0,0,0,0,"+300 силы, 4% Силы, Защиты",300,0,0)
call RemoveUnit(NM[2*(Mc+1)])
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303741,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49304832 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303532 then
set Nn=true
call nb(Hw,0,0,0,0,0,0,"+120 стат",120,120,120)
call RemoveUnit(NM[2*(Mc+1)])
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303533,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49304753 and IsUnitType(Hw,UNIT_TYPE_HERO)==true then
set Nn=true
call nb(Hw,0,0,0,0,0,0,"+50 стат",50,50,50)
call RemoveUnit(NM[2*(Mc+1)])
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303531,GetUnitX(Hw),GetUnitY(Hw),0.)
elseif GetItemTypeId(MQ)==$49305458 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303830 then
set Nn=true
call RemoveUnit(NM[2*(Mc+1)])
set hJ[GetPlayerId(GetOwningPlayer(Hw))+1]="+70 защиты"
call UnitAddAbility(MV[Mc],$41303458)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303834,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49305459 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303831 then
set Nn=true
call RemoveUnit(NM[2*(Mc+1)])
set hJ[GetPlayerId(GetOwningPlayer(Hw))+1]="+450 атаки"
call UnitAddAbility(MV[Mc],$41305050)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303833,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$4930545A then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303832 then
set Nn=true
call RemoveUnit(NM[2*(Mc+1)])
set hJ[GetPlayerId(GetOwningPlayer(Hw))+1]="+4000 МР"
call UnitAddAbility(MV[Mc],$41304F57)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303835,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49304830 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303531 then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,0,0,0,0,0,0,"+50 стат, +2000 НР, МР",50,50,50)
call UnitAddAbility(MV[Mc],$41304339)
call UnitAddAbility(MV[Mc],$41304337)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303532,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49305855 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E30384B then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.06,.06,.06,.06,.06,6,"+200 стат, 6% Экстрактов",200,200,200)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E30384D,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49305856 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E30384D then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.08,.08,.08,.08,.08,8,"+250 стат, 8% Экстрактов",250,250,250)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E30384E,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49305857 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E30384E then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.11,.11,.11,.11,.11,11,"+300 стат, 11% Экстрактов",300,300,300)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E30384F,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$6667756E then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E30384F then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.13,.13,.13,.13,.13,13,"+350 стат, 13% Экстрактов",350,350,350)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303449,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49305858 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303741 then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.07,.07,0,0,0,0,"+400 Силы, 7% Силы, защиты",400,0,0)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303850,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49305859 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303743 then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,0,0,0,.07,.07,0,"+400 разума, 7% Магии, Жизни",0,0,400)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303851,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$4930585A then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303742 then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,0,0,.09,0,0,0,"+400 ловкости, 9% разрушения",300,300,300)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303852,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$49305930 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303851 or GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303852 or GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303850 then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.09,.09,.09,.09,.09,9,"+450 стат, 9% Экстрактов",450,450,450)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303853,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$72656A32 and GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])!=$6E30364F then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,0,0,0,0,0,0,"+25 стат",25,25,25)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E30364F,GetUnitX(Hw),GetUnitY(Hw),0.)
elseif GetItemTypeId(MQ)==$66726867 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E30364F then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,0,0,0,0,0,0,"+60 стат",60,60,60)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303632,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$6776736D then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303632 then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.03,.03,.03,.03,.03,3,"+80 стат, 3% к Экстрактам",80,80,80)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303349,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$64757374 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303349 then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.06,.06,.06,.06,.06,6,"+130 стат, 6% к Экстрактам",130,130,130)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E30334B,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$73707265 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E30334B then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.1,.1,.1,.1,.1,10,"+160 стат, 10% к Экстрактам",160,160,160)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303348,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$6D6E7366 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303348 then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.14,.14,.14,.14,.14,14,"+200 стат, 14% к Экстрактам",200,200,200)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E303752,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
elseif GetItemTypeId(MQ)==$61786173 then
if GetUnitTypeId(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)])==$6E303752 then
call RemoveUnit(NM[2*(Mc+1)])
set Nn=true
call nb(Hw,.17,.17,.17,.17,.17,17,"+250 стат, 17% к Экстрактам",250,250,250)
set NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hw))),$6E30344A,GetUnitX(Hw),GetUnitY(Hw),0.)
endif
endif
if Nn==true then
set MC=1
loop
call UnitAddItemById(NM[2*(Mc+1)],hG[MC])
set MC=MC+1
exitwhen MC>6
endloop
call UnitAddAbility(NM[2*(GetPlayerId(GetOwningPlayer(Hw))+1)],$41314136)
endif
set MQ=null
set Hw=null
endfunction
function BuH takes nothing returns nothing
local trigger hF=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hF,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(hF,function BuG)
set hF=null
endfunction
function BuI takes nothing returns boolean
if not (IsUnitType(GetBuyingUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BuJ takes nothing returns boolean
if not (Tt==100) then
return false
endif
return true
endfunction
function BuK takes nothing returns boolean
if not (Tt==99) then
return false
endif
return true
endfunction
function BuL takes nothing returns boolean
if not (Tt>90) then
return false
endif
if not (Tt<=98) then
return false
endif
return true
endfunction
function BuM takes nothing returns boolean
if not (Tt>80) then
return false
endif
if not (Tt<=90) then
return false
endif
return true
endfunction
function BuN takes nothing returns boolean
if not (Tt>70) then
return false
endif
if not (Tt<=80) then
return false
endif
return true
endfunction
function BuO takes nothing returns boolean
if not (Tt>60) then
return false
endif
if not (Tt<=70) then
return false
endif
return true
endfunction
function BuP takes nothing returns boolean
if not (Tt>50) then
return false
endif
if not (Tt<=60) then
return false
endif
return true
endfunction
function BuQ takes nothing returns boolean
if not (Tt>40) then
return false
endif
if not (Tt<=50) then
return false
endif
return true
endfunction
function BuR takes nothing returns boolean
if not (Tt>30) then
return false
endif
if not (Tt<=40) then
return false
endif
return true
endfunction
function BuS takes nothing returns boolean
if not (Tt>20) then
return false
endif
if not (Tt<=30) then
return false
endif
return true
endfunction
function BuT takes nothing returns boolean
if not (Tt>10) then
return false
endif
if not (Tt<=20) then
return false
endif
return true
endfunction
function BuU takes nothing returns boolean
if not (Tt<=10) then
return false
endif
return true
endfunction
function BuV takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305253) then
return false
endif
return true
endfunction
function BuW takes nothing returns boolean
if not (Tt==100) then
return false
endif
return true
endfunction
function BuX takes nothing returns boolean
if not (Tt==99) then
return false
endif
return true
endfunction
function BuY takes nothing returns boolean
if not (Tt>90) then
return false
endif
if not (Tt<=98) then
return false
endif
return true
endfunction
function BuZ takes nothing returns boolean
if not (Tt>80) then
return false
endif
if not (Tt<=90) then
return false
endif
return true
endfunction
function Bua takes nothing returns boolean
if not (Tt>70) then
return false
endif
if not (Tt<=80) then
return false
endif
return true
endfunction
function Bub takes nothing returns boolean
if not (Tt>60) then
return false
endif
if not (Tt<=70) then
return false
endif
return true
endfunction
function Buc takes nothing returns boolean
if not (Tt>50) then
return false
endif
if not (Tt<=60) then
return false
endif
return true
endfunction
function Bud takes nothing returns boolean
if not (Tt>40) then
return false
endif
if not (Tt<=50) then
return false
endif
return true
endfunction
function Bue takes nothing returns boolean
if not (Tt>30) then
return false
endif
if not (Tt<=40) then
return false
endif
return true
endfunction
function Buf takes nothing returns boolean
if not (Tt>20) then
return false
endif
if not (Tt<=30) then
return false
endif
return true
endfunction
function Bug takes nothing returns boolean
if not (Tt>10) then
return false
endif
if not (Tt<=20) then
return false
endif
return true
endfunction
function Buh takes nothing returns boolean
if not (Tt<=10) then
return false
endif
return true
endfunction
function Bui takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305254) then
return false
endif
return true
endfunction
function Buj takes nothing returns boolean
if not (Tt==100) then
return false
endif
return true
endfunction
function Buk takes nothing returns boolean
if not (Tt==99) then
return false
endif
return true
endfunction
function Bul takes nothing returns boolean
if not (Tt>90) then
return false
endif
if not (Tt<=98) then
return false
endif
return true
endfunction
function Bum takes nothing returns boolean
if not (Tt>80) then
return false
endif
if not (Tt<=90) then
return false
endif
return true
endfunction
function Bun takes nothing returns boolean
if not (Tt>70) then
return false
endif
if not (Tt<=80) then
return false
endif
return true
endfunction
function Buo takes nothing returns boolean
if not (Tt>60) then
return false
endif
if not (Tt<=70) then
return false
endif
return true
endfunction
function Bup takes nothing returns boolean
if not (Tt>50) then
return false
endif
if not (Tt<=60) then
return false
endif
return true
endfunction
function Buq takes nothing returns boolean
if not (Tt>40) then
return false
endif
if not (Tt<=50) then
return false
endif
return true
endfunction
function Bur takes nothing returns boolean
if not (Tt>30) then
return false
endif
if not (Tt<=40) then
return false
endif
return true
endfunction
function Bus takes nothing returns boolean
if not (Tt>20) then
return false
endif
if not (Tt<=30) then
return false
endif
return true
endfunction
function But takes nothing returns boolean
if not (Tt>10) then
return false
endif
if not (Tt<=20) then
return false
endif
return true
endfunction
function Buu takes nothing returns boolean
if not (Tt<=10) then
return false
endif
return true
endfunction
function Buv takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305255) then
return false
endif
return true
endfunction
function Buw takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305754) then
return false
endif
return true
endfunction
function Bux takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305756) then
return false
endif
return true
endfunction
function Buy takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4931314B) then
return false
endif
return true
endfunction
function Buz takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305757) then
return false
endif
return true
endfunction
function Bu0 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4931314A) then
return false
endif
return true
endfunction
function Bu1 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305755) then
return false
endif
return true
endfunction
function Bu2 takes nothing returns nothing
if BuV() then
set Tt=GetRandomInt(1,100)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваше число: "+("|c0000ffff"+I2S(Tt)))
if BuU() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ff0000ничего")
else
if BuT() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0010|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+30
else
if BuS() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0015|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+45
else
if BuR() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0020|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+60
else
if BuQ() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0025|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+75
else
if BuP() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0035|R золота и 2 |c00ff9696Кровавых Метки")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+105
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+6
else
if BuO() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00100|R золота и 2 |c00ff9696Кровавых Метки")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+300
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+6
else
if BuN() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00200|R золота
")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+600
else
if BuM() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 3 |c00ff9696Кровавых Метки")
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+9
else
if BuL() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00350|R золота и Элемент Лесной Чащи.")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+1050
call UnitAddItemByIdSwapped($73656872,GetBuyingUnit())
else
if BuK() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 5 |c00ff9696Кровавых Меток|r и Амулет Леса!")
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+15
call UnitAddItemByIdSwapped($77696C64,GetBuyingUnit())
else
if BuJ() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00350|R золота и Кольцо Паука!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+1050
call UnitAddItemByIdSwapped($7370726E,GetBuyingUnit())
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
else
endif
if Bui() then
set Tt=GetRandomInt(1,100)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваше число: "+("|c0000ffff"+I2S(Tt)))
if Buh() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ff0000ничего")
else
if Bug() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0030|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+90
else
if Buf() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0050|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+150
else
if Bue() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00100|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+300
else
if Bud() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00150|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+450
else
if Buc() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00200|R золота и 10 |c00ff9696Кровавых Меток")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+600
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+30
else
if Bub() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00300|R золота ")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+900
else
if Bua() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 20 |c00ff9696Кровавых Меток")
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+60
else
if BuZ() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00800|R золота ")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+2400
else
if BuY() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 25 |c00ff9696Кровавых Меток|r и Кольцо Паука.")
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+75
call UnitAddItemByIdSwapped($7370726E,GetBuyingUnit())
else
if BuX() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00800|R золота, и Жезл!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+2400
call UnitAddItemByIdSwapped($776E6575,GetBuyingUnit())
else
if BuW() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff001000|R золота, 35 |c00ff9696Кровавых Меток|r ")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+3000
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+105
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
else
endif
if Buv() then
set Tt=GetRandomInt(1,100)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваше число: "+("|c0000ffff"+I2S(Tt)))
if Buu() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ff0000ничего")
else
if But() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00100|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+300
else
if Bus() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00150|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+450
else
if Bur() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00200|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+600
else
if Buq() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00250|R золота!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+750
else
if Bup() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00500|R золота и 10 |c00ff9696Кровавых Меток")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+1500
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+30
else
if Buo() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00800|R золота ")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+2400
else
if Bun() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 20 |c00ff9696Кровавых Меток")
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+60
else
if Bum() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff001500|R золота ")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+4500
else
if Bul() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 35 |c00ff9696Кровавых Меток|r и Жезл.")
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+105
call UnitAddItemByIdSwapped($776E6575,GetBuyingUnit())
else
if Buk() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: Бронированый Шлем!")
call UnitAddItemByIdSwapped($72737431,GetBuyingUnit())
else
if Buj() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff001800|R золота, 35 |c00ff9696Кровавых Меток|r")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+5400
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+105
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
else
endif
if Buw() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-450
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+30
else
endif
if Bux() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-4500
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+300
else
endif
if Buy() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-45000
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+3000
else
endif
if Buz() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+4500
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-300
else
endif
if Bu0() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+45000
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-3000
else
endif
if Bu1() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+450
set NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-30
else
endif
endfunction
function Bu3 takes nothing returns nothing
set hK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hK,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(hK,Condition(function BuI))
call TriggerAddAction(hK,function Bu2)
endfunction
function Bu4 takes nothing returns nothing
local item hM=GetSoldItem()
local unit QH=GetBuyingUnit()
if GetItemTypeId(hM)==$49305730 then
if nH(QH,$4930564E) then
call RemoveItem(nI(QH,$4930564E))
set NG=false
call nJ($49304B53,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305650) then
call RemoveItem(nI(QH,$49305650))
set NG=false
call nJ($49304B55,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305651) then
call RemoveItem(nI(QH,$49305651))
set NG=false
call nJ($49304B54,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930564F) then
call RemoveItem(nI(QH,$4930564F))
set NG=false
call nJ($49304B52,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if GetItemTypeId(hM)==$4930564C then
if nH(QH,$49305655) then
if nH(QH,$49303231) then
call RemoveItem(nI(QH,$49305655))
call RemoveItem(nI(QH,$49303231))
set NG=false
call nJ($4930565A,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if nH(QH,$49305654) then
if nH(QH,$49303231) then
call RemoveItem(nI(QH,$49305654))
call RemoveItem(nI(QH,$49303231))
set NG=false
call nJ($49305658,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if nH(QH,$49305653) then
if nH(QH,$49303155) then
call RemoveItem(nI(QH,$49305653))
call RemoveItem(nI(QH,$49303155))
set NG=false
call nJ($49305657,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if nH(QH,$49305656) then
if nH(QH,$49303834) then
call RemoveItem(nI(QH,$49305656))
call RemoveItem(nI(QH,$49303834))
set NG=false
call nJ($49305659,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if nH(QH,$49304B53) then
if nH(QH,$49303231) then
call RemoveItem(nI(QH,$49304B53))
call RemoveItem(nI(QH,$49303231))
set NG=false
call nJ($4930564E,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if nH(QH,$49304B55) then
if nH(QH,$49303231) then
call RemoveItem(nI(QH,$49304B55))
call RemoveItem(nI(QH,$49303231))
set NG=false
call nJ($49305650,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if nH(QH,$49304B54) then
if nH(QH,$49303155) then
call RemoveItem(nI(QH,$49304B54))
call RemoveItem(nI(QH,$49303155))
set NG=false
call nJ($49305651,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if nH(QH,$49304B52) then
if nH(QH,$49303834) then
call RemoveItem(nI(QH,$49304B52))
call RemoveItem(nI(QH,$49303834))
set NG=false
call nJ($4930564F,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
endif
if GetItemTypeId(hM)==$4930564D then
if nH(QH,$49303845) then
if nH(QH,$49303156) then
call RemoveItem(nI(QH,$49303845))
call RemoveItem(nI(QH,$49303156))
set NG=false
call nJ($49303155,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if nH(QH,$49303845) then
if nH(QH,$49303158) then
call RemoveItem(nI(QH,$49303845))
call RemoveItem(nI(QH,$49303158))
set NG=false
call nJ($49303231,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if nH(QH,$49303845) then
if nH(QH,$49303459) then
call RemoveItem(nI(QH,$49303845))
call RemoveItem(nI(QH,$49303459))
set NG=false
call nJ($49303834,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
endif
if GetItemTypeId(hM)==$49305151 then
if nH(QH,$49313158) then
call RemoveItem(nI(QH,$49313158))
set NG=false
call nJ($49313038,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49313054) then
call RemoveItem(nI(QH,$49313054))
set NG=false
call nJ($49305845,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$72616D34) then
call RemoveItem(nI(QH,$72616D34))
set NG=false
call nJ($746C756D,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$73686377) then
call RemoveItem(nI(QH,$73686377))
set NG=false
call nJ($6F666C67,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305352) then
call RemoveItem(nI(QH,$49305352))
set NG=false
call nJ($49305245,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305351) then
call RemoveItem(nI(QH,$49305351))
set NG=false
call nJ($49305241,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305350) then
call RemoveItem(nI(QH,$49305350))
set NG=false
call nJ($49305243,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930534D) then
call RemoveItem(nI(QH,$4930534D))
set NG=false
call nJ($49304255,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930534C) then
call RemoveItem(nI(QH,$4930534C))
set NG=false
call nJ($49304254,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930534A) then
call RemoveItem(nI(QH,$4930534A))
set NG=false
call nJ($49304252,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305346) then
call RemoveItem(nI(QH,$49305346))
set NG=false
call nJ($4930424F,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305347) then
call RemoveItem(nI(QH,$49305347))
set NG=false
call nJ($4930424D,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305233) then
call RemoveItem(nI(QH,$49305233))
set NG=false
call nJ($49305044,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305232) then
call RemoveItem(nI(QH,$49305232))
set NG=false
call nJ($49304933,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305231) then
call RemoveItem(nI(QH,$49305231))
set NG=false
call nJ($49305046,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305230) then
call RemoveItem(nI(QH,$49305230))
set NG=false
call nJ($49304931,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930515A) then
call RemoveItem(nI(QH,$4930515A))
set NG=false
call nJ($49305048,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305159) then
call RemoveItem(nI(QH,$49305159))
set NG=false
call nJ($49304941,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305158) then
call RemoveItem(nI(QH,$49305158))
set NG=false
call nJ($49304F5A,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305157) then
call RemoveItem(nI(QH,$49305157))
set NG=false
call nJ($49304942,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305156) then
call RemoveItem(nI(QH,$49305156))
set NG=false
call nJ($49304943,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305155) then
call RemoveItem(nI(QH,$49305155))
set NG=false
call nJ($49305031,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305154) then
call RemoveItem(nI(QH,$49305154))
set NG=false
call nJ($49304951,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305153) then
call RemoveItem(nI(QH,$49305153))
set NG=false
call nJ($4930494D,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305152) then
call RemoveItem(nI(QH,$49305152))
set NG=false
call nJ($4930494F,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930544E) then
call RemoveItem(nI(QH,$4930544E))
set NG=false
call nJ($49304551,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930544C) then
call RemoveItem(nI(QH,$4930544C))
set NG=false
call nJ($49304552,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930544D) then
call RemoveItem(nI(QH,$4930544D))
set NG=false
call nJ($49304553,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930544B) then
call RemoveItem(nI(QH,$4930544B))
set NG=false
call nJ($49304550,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930564A) then
call RemoveItem(nI(QH,$4930564A))
set NG=false
call nJ($49304258,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930564B) then
call RemoveItem(nI(QH,$4930564B))
set NG=false
call nJ($4930425A,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930524F) then
call RemoveItem(nI(QH,$4930524F))
set NG=false
call nJ($49304331,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305249) then
call RemoveItem(nI(QH,$49305249))
set NG=false
call nJ($49304258,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930524A) then
call RemoveItem(nI(QH,$4930524A))
set NG=false
call nJ($49304252,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305250) then
call RemoveItem(nI(QH,$49305250))
set NG=false
call nJ($4930425A,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305251) then
call RemoveItem(nI(QH,$49305251))
set NG=false
call nJ($49304333,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930524B) then
call RemoveItem(nI(QH,$4930524B))
set NG=false
call nJ($49304254,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$4930524C) then
call RemoveItem(nI(QH,$4930524C))
set NG=false
call nJ($49304255,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
if nH(QH,$49305252) then
call RemoveItem(nI(QH,$49305252))
set NG=false
call nJ($49304334,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QH,"origin"))
endif
endif
if GetItemTypeId(hM)==$49305150 then
if nH(QH,$49313038) and nH(QH,$4930534F) then
call RemoveItem(nI(QH,$49313038))
call RemoveItem(nI(QH,$4930534F))
set NG=false
call nJ($49313158,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
if nH(QH,$73626F6B) and nH(QH,$49305845) then
call RemoveItem(nI(QH,$73626F6B))
call RemoveItem(nI(QH,$49305845))
set NG=false
call nJ($49313054,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
if nH(QH,$73626F6B) and nH(QH,$746C756D) then
call RemoveItem(nI(QH,$73626F6B))
call RemoveItem(nI(QH,$746C756D))
set NG=false
call nJ($72616D34,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
if nH(QH,$73626F6B) and nH(QH,$6F666C67) then
call RemoveItem(nI(QH,$73626F6B))
call RemoveItem(nI(QH,$6F666C67))
set NG=false
call nJ($73686377,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
if nH(QH,$49305245) and nH(QH,$4930534F) then
call RemoveItem(nI(QH,$49305245))
call RemoveItem(nI(QH,$4930534F))
set NG=false
call nJ($49305352,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
if nH(QH,$49305241) then
if nH(QH,$4930534F) then
call RemoveItem(nI(QH,$49305241))
call RemoveItem(nI(QH,$4930534F))
set NG=false
call nJ($49305351,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49305243) then
if nH(QH,$4930534F) then
call RemoveItem(nI(QH,$49305243))
call RemoveItem(nI(QH,$4930534F))
set NG=false
call nJ($49305350,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304254) then
if nH(QH,$4930534B) then
call RemoveItem(nI(QH,$49304254))
call RemoveItem(nI(QH,$4930534B))
set NG=false
call nJ($4930534C,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304255) then
if nH(QH,$4930534B) then
call RemoveItem(nI(QH,$49304255))
call RemoveItem(nI(QH,$4930534B))
set NG=false
call nJ($4930534D,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304252) then
if nH(QH,$49305349) then
call RemoveItem(nI(QH,$49304252))
call RemoveItem(nI(QH,$49305349))
set NG=false
call nJ($4930534A,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$4930424D) then
if nH(QH,$49305345) then
call RemoveItem(nI(QH,$4930424D))
call RemoveItem(nI(QH,$49305345))
set NG=false
call nJ($49305347,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$4930424F) then
if nH(QH,$49305345) then
call RemoveItem(nI(QH,$4930424F))
call RemoveItem(nI(QH,$49305345))
set NG=false
call nJ($49305346,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304334) then
if nH(QH,$4930524E) then
call RemoveItem(nI(QH,$49304334))
call RemoveItem(nI(QH,$4930524E))
set NG=false
call nJ($49305252,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304333) then
if nH(QH,$4930524E) then
call RemoveItem(nI(QH,$49304333))
call RemoveItem(nI(QH,$4930524E))
set NG=false
call nJ($49305251,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$4930425A) then
if nH(QH,$4930524E) then
call RemoveItem(nI(QH,$4930425A))
call RemoveItem(nI(QH,$4930524E))
set NG=false
call nJ($49305250,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304331) then
if nH(QH,$4930524E) then
call RemoveItem(nI(QH,$49304331))
call RemoveItem(nI(QH,$4930524E))
set NG=false
call nJ($4930524F,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304255) then
if nH(QH,$73687764) then
call RemoveItem(nI(QH,$49304255))
call RemoveItem(nI(QH,$73687764))
set NG=false
call nJ($4930524C,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304254) then
if nH(QH,$73687764) then
call RemoveItem(nI(QH,$49304254))
call RemoveItem(nI(QH,$73687764))
set NG=false
call nJ($4930524B,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304252) then
if nH(QH,$73687764) then
call RemoveItem(nI(QH,$49304252))
call RemoveItem(nI(QH,$73687764))
set NG=false
call nJ($4930524A,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304258) then
if nH(QH,$73687764) then
call RemoveItem(nI(QH,$49304258))
call RemoveItem(nI(QH,$73687764))
set NG=false
call nJ($49305249,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49305044) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49305044))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305233,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304933) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49304933))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305232,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49305046) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49305046))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305231,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304931) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49304931))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305230,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49305048) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49305048))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($4930515A,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304941) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49304941))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305159,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304F5A) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49304F5A))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305158,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304942) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49304942))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305157,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304943) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49304943))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305156,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49305031) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49305031))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305155,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304951) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$49304951))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305154,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$4930494D) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$4930494D))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305153,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$4930494F) then
if nH(QH,$4930514F) then
call RemoveItem(nI(QH,$4930494F))
call RemoveItem(nI(QH,$4930514F))
set NG=false
call nJ($49305152,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304551) then
if nH(QH,$4930544A) then
call RemoveItem(nI(QH,$49304551))
call RemoveItem(nI(QH,$4930544A))
set NG=false
call nJ($4930544E,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304552) then
if nH(QH,$4930544A) then
call RemoveItem(nI(QH,$49304552))
call RemoveItem(nI(QH,$4930544A))
set NG=false
call nJ($4930544C,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304553) then
if nH(QH,$4930544A) then
call RemoveItem(nI(QH,$49304553))
call RemoveItem(nI(QH,$4930544A))
set NG=false
call nJ($4930544D,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304553) then
if nH(QH,$4930544A) then
call RemoveItem(nI(QH,$49304553))
call RemoveItem(nI(QH,$4930544A))
set NG=false
call nJ($4930544D,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49304550) then
if nH(QH,$4930544A) then
call RemoveItem(nI(QH,$49304550))
call RemoveItem(nI(QH,$4930544A))
set NG=false
call nJ($4930544B,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49303456) then
if nH(QH,$49304258) then
call RemoveItem(nI(QH,$49303456))
call RemoveItem(nI(QH,$49304258))
set NG=false
call nJ($4930564A,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
if nH(QH,$49303456) then
if nH(QH,$4930425A) then
call RemoveItem(nI(QH,$49303456))
call RemoveItem(nI(QH,$4930425A))
set NG=false
call nJ($4930564B,QH)
set NG=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QH,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QH,"chest"))
endif
endif
endif
set hM=null
set QH=null
endfunction
function Bu5 takes nothing returns nothing
local trigger hL=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hL,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(hL,function Bu4)
set hL=null
endfunction
function Bu6 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303356) then
return false
endif
return true
endfunction
function Bu7 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304131) then
return false
endif
return true
endfunction
function Bu8 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303753) then
return false
endif
return true
endfunction
function Bu9 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303357) then
return false
endif
return true
endfunction
function BvB takes nothing returns boolean
if not (Tp==90) then
return false
endif
return true
endfunction
function BvC takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930514E) then
return false
endif
return true
endfunction
function BvD takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BvE takes nothing returns nothing
call SetUnitManaBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_MANA,GetEnumUnit())+GetUnitStateSwap(UNIT_STATE_MAX_MANA,GetEnumUnit())/5.)
endfunction
function BvF takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930354B) then
return false
endif
return true
endfunction
function BvG takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BvH takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetEnumUnit())/5.)
endfunction
function BvI takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930354A) then
return false
endif
return true
endfunction
function BvJ takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A30) then
return false
endif
return true
endfunction
function BvK takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930495A) then
return false
endif
return true
endfunction
function BvL takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304959) then
return false
endif
return true
endfunction
function BvM takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A31) then
return false
endif
return true
endfunction
function BvN takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304839) then
return false
endif
return true
endfunction
function BvO takes nothing returns nothing
if Bu9() then
call SelectUnitForPlayerSingle(VT[5],GetTriggerPlayer())
else
if Bu8() then
call SelectUnitForPlayerSingle(VT[6],GetTriggerPlayer())
else
if Bu7() then
call SelectUnitForPlayerSingle(VT[7],GetTriggerPlayer())
else
if Bu6() then
call SelectUnitForPlayerSingle(VT[4],GetTriggerPlayer())
else
endif
endif
endif
endif
if BvC() then
set Tp=Tp+3
call DisplayTextToForce(GetPlayersAll(),"Осколки |c00969696Обсидиана: |r"+(I2S(Tp/3)+"/|c0000ff0030|r"+". |c00ff9696Награду получит лишь тот, кто возьмет последний осколок!"))
if BvB() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffУДАЧА!!! Все осколки Обсидиана собраны! Получите награду.")
call UnitAddItemByIdSwapped($4930514F,GetTriggerUnit())
call SetItemUserData(GetLastCreatedItem(),GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())))
else
endif
else
endif
if BvF() then
set V1=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(800.,V1,Condition(function BvD))
call ForGroupBJ(ST,function BvE)
call RemoveLocation(V1)
call DestroyGroup(ST)
else
endif
if BvI() then
set V1=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(800.,V1,Condition(function BvG))
call ForGroupBJ(ST,function BvH)
call RemoveLocation(V1)
call DestroyGroup(ST)
else
endif
if BvJ() then
set NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+75
else
endif
if BvK() then
set NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+45
else
endif
if BvL() then
set NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+24
else
endif
if BvM() then
set NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+105
else
endif
if BvN() then
set NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+15
else
endif
endfunction
function BvP takes nothing returns nothing
set hN=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hN,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(hN,function BvO)
endfunction
function BvQ takes nothing returns boolean
if not (GetIssuedOrderIdBJ()==String2OrderIdBJ("smart")) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetItemUserData(GetOrderTargetItem())>=0) then
return false
endif
return true
endfunction
function BvR takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41304B54)>=1) then
return false
endif
return true
endfunction
function BvS takes nothing returns boolean
if not (Sx[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]>=6) then
return false
endif
return true
endfunction
function BvT takes nothing returns boolean
if not (UnitHasItem(GetTriggerUnit(),UnitItemInSlotBJ(GetTriggerUnit(),GetForLoopIndexB()))==true) then
return false
endif
return true
endfunction
function BvU takes nothing returns nothing
set Sx[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=0
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BvT() then
set Sx[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Sx[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+1
if BvS() then
if BvR() then
call IssueTargetItemOrder(NM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))*2],"smart",GetOrderTargetItem())
else
endif
else
endif
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BvV takes nothing returns nothing
set hO=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hO,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(hO,Condition(function BvQ))
call TriggerAddAction(hO,function BvU)
endfunction
function BvW takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49305130) then
return false
endif
return true
endfunction
function BvX takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49305059) then
return false
endif
return true
endfunction
function BvY takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49305131) then
return false
endif
return true
endfunction
function BvZ takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930505A) then
return false
endif
return true
endfunction
function Bva takes nothing returns nothing
if BvW() then
set NG=false
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305130))
call UnitAddItemByIdSwapped($4930505A,GetTriggerUnit())
set NG=true
else
endif
if BvX() then
set NG=false
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305059))
call UnitAddItemByIdSwapped($49305130,GetTriggerUnit())
set NG=true
else
endif
if BvY() then
set NG=false
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305131))
call UnitAddItemByIdSwapped($49305059,GetTriggerUnit())
set NG=true
else
endif
if BvZ() then
set NG=false
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930505A))
call UnitAddItemByIdSwapped($49305131,GetTriggerUnit())
set NG=true
else
endif
endfunction
function Bvb takes nothing returns nothing
set hP=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hP,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(hP,function Bva)
endfunction
function Bvc takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local item Me
local integer Np
local integer Nq
local integer Ns
if GetSpellAbilityId()==$41303831 then
set Me=GetSpellTargetItem()
set Np=GetItemTypeId(Me)
set Nq=1
loop
set Ns=1
loop
if QD[Nq*6+Ns]==0 then
set Ns=6
elseif QD[Nq*6+Ns]==Np then
call DisplayTimedTextToPlayer(GetOwningPlayer(Hw),0.,0.,30.,"|cffff0000"+GetObjectName(QC[Nq])+"|r = "+QF[Nq])
set Ns=6
endif
exitwhen Ns==6
set Ns=Ns+1
endloop
exitwhen Nq==QB
set Nq=Nq+1
endloop
set Me=null
endif
set Hw=null
endfunction
function Bvd takes unit Hw,integer Oh,integer P4,integer P5,integer P6,integer P7,integer P8,integer P9 returns nothing
local item MQ
call RemoveItem(nI(Hw,P4))
call RemoveItem(nI(Hw,P5))
call RemoveItem(nI(Hw,P6))
call RemoveItem(nI(Hw,P7))
call RemoveItem(nI(Hw,P8))
call RemoveItem(nI(Hw,P9))
set MQ=nJ(Oh,Hw)
call SetItemUserData(MQ,GetPlayerId(GetOwningPlayer(Hw))+1)
set MQ=null
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",Hw,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",Hw,"chest"))
call nX(Hw,GetObjectName(Oh)+" собран!",.032,255,255,255)
endfunction
function Bve takes integer Oh,integer P4,integer P5,integer P6,integer P7,integer P8,integer P9 returns nothing
local string QE=""
local integer MC=1
set QB=QB+1
set QC[QB]=Oh
set QD[QB*6+1]=P4
set QD[QB*6+2]=P5
set QD[QB*6+3]=P6
set QD[QB*6+4]=P7
set QD[QB*6+5]=P8
set QD[QB*6+6]=P9
loop
if QD[QB*6+MC]>0 then
set QE=QE+GetObjectName(QD[QB*6+MC])+" "
endif
exitwhen MC==6
set MC=MC+1
endloop
set QF[QB]=QE
endfunction
function Bvf takes unit Hw,integer Oh,integer P4,integer P5,integer P6,integer P7,integer P8,integer P9 returns nothing
if nH(Hw,P4) then
if nH(Hw,P5) then
if P6!=0 then
if nH(Hw,P6) then
if P7!=0 then
if nH(Hw,P7) then
if P8!=0 then
if nH(Hw,P8) then
if P9!=0 then
if nH(Hw,P9) then
call Bvd(Hw,Oh,P4,P5,P6,P7,P8,P9)
endif
else
call Bvd(Hw,Oh,P4,P5,P6,P7,P8,0)
endif
endif
else
call Bvd(Hw,Oh,P4,P5,P6,P7,0,0)
endif
endif
else
call Bvd(Hw,Oh,P4,P5,P6,0,0,0)
endif
endif
else
call Bvd(Hw,Oh,P4,P5,0,0,0,0)
endif
endif
endif
endfunction
function Bvg takes nothing returns nothing
local unit QH=GetTriggerUnit()
local item MQ=GetManipulatedItem()
local integer Mc=GetItemTypeId(MQ)
local integer MC=1
local integer PE
if GetItemUserData(MQ)==0 or GetItemUserData(MQ)==GetPlayerId(GetOwningPlayer(QH))+1 then
loop
set PE=1
loop
if QD[MC*6+PE]==0 then
set PE=6
elseif QD[MC*6+PE]==Mc then
call Bvf(QH,QC[MC],QD[MC*6+1],QD[MC*6+2],QD[MC*6+3],QD[MC*6+4],QD[MC*6+5],QD[MC*6+6])
set PE=6
endif
exitwhen PE==6
set PE=PE+1
endloop
exitwhen MC==QB
set MC=MC+1
endloop
endif
call Bvf(QH,$49305247,$77696C64,$73656872,$7370726E,0,0,0)
call Bvf(QH,$49303049,$49303647,$49303359,$49303551,$4930354D,$49303552,0)
call Bvf(QH,$49304737,$636E6F62,$72687468,$72617439,$49303358,0,0)
call Bvf(QH,$49305248,$6B70696E,$616A656E,$77637963,0,0,0)
call Bvf(QH,$49304738,$49303732,$49303348,$49303144,0,0,0)
call Bvf(QH,$49303150,$49304545,$49305235,$49304939,$49304850,0,0)
call Bvf(QH,$74666172,$4930534E,$61727368,$49304930,0,0,0)
call Bvf(QH,$7462736D,$62747374,$4930454F,0,0,0,0)
call Bvf(QH,$746C756D,$7462736D,$49303452,0,0,0,0)
call Bvf(QH,$75666C67,$49304F4B,$72617433,$49303848,0,0,0)
call Bvf(QH,$6E666C67,$75666C67,$49304738,0,0,0,0)
call Bvf(QH,$6F666C67,$6E666C67,$49305234,0,0,0,0)
call Bvf(QH,$656E6773,$49303346,$49305056,$49305055,0,0,0)
call Bvf(QH,$62747374,$49305731,$4930424C,$4930424B,$4930424A,0,0)
set QH=null
set MQ=null
endfunction
function Bvh takes nothing returns nothing
call Bve($49304353,$49304431,$726C6966,$49304230,$4930424D,$49303550,$49303554)
call Bve($49304355,$49304432,$726C6966,$49304157,$4930424D,$49303550,$49303554)
call Bve($49304359,$49304444,$726C6966,$49304158,$4930424D,$49303550,$49303554)
call Bve($49304430,$49304435,$726C6966,$4930415A,$4930424D,$49303550,$49303554)
call Bve($4930435A,$49304434,$726C6966,$49304159,$4930424D,$49303550,$49303554)
call Bve($49304356,$49304433,$726C6966,$49304231,$4930424D,$49303550,$49303554)
call Bve($49304357,$49304443,$726C6966,$49304231,$4930424D,$49303550,$49303554)
call Bve($49304354,$49304436,$726C6966,$49304158,$4930424D,$49303550,$49303554)
call Bve($49304446,$49304445,$686C7374,$49304358,$49304252,$70727674,$49303631)
call Bve($49304448,$49304447,$686C7374,$49304353,$49304252,$6576746C,$49303631)
call Bve($49313039,$6B74726D,$4930324E,0,0,0,0)
call Bve($4930444A,$49304449,$686C7374,$49304355,$49304252,$62737064,$49303631)
call Bve($4930444C,$4930444B,$686C7374,$49304359,$49304252,$6C676468,$49303631)
call Bve($4930444E,$4930444D,$686C7374,$49304430,$49304252,$6F646566,$49303631)
call Bve($49304450,$4930444F,$686C7374,$4930435A,$49304252,$62737064,$49303631)
call Bve($49304454,$49304453,$686C7374,$49304356,$49304252,$6576746C,$49303631)
call Bve($49304452,$49304451,$686C7374,$49304354,$49304252,$6C676468,$49303631)
call Bve($49304456,$49304455,$686C7374,$49304357,$49304252,$72616731,$49303631)
call Bve($49304458,$49304457,$6C656467,$49304446,$49304254,$49304237,$49303638)
call Bve($4930445A,$49304459,$6C656467,$49304448,$49304254,$49304237,$49303638)
call Bve($49304531,$49304530,$6C656467,$4930444A,$49304254,$49304235,$49303638)
call Bve($49304533,$49304532,$6C656467,$4930444C,$49304254,$49304236,$49303638)
call Bve($49304535,$49304534,$6C656467,$4930444E,$49304254,$49304232,$49303638)
call Bve($49304537,$49304536,$6C656467,$49304450,$49304254,$49304232,$49303638)
call Bve($49304542,$49304541,$6C656467,$49304454,$49304254,$49304234,$49303638)
call Bve($49304539,$49304538,$6C656467,$49304452,$49304254,$49304236,$49303638)
call Bve($49304544,$49304543,$6C656467,$49304456,$49304254,$49304233,$49303638)
call Bve($4930434D,$49304351,$49304342,$4930434B,$49304352,$49304345,$49303942)
call Bve($49304550,$4930434E,$49304547,$4930454F,0,0,0)
call Bve($49304551,$4930434D,$49304545,$4930454F,0,0,0)
call Bve($49304552,$4930434C,$49304546,$4930454F,0,0,0)
call Bve($49304553,$49304439,$49304546,$4930454F,0,0,0)
call Bve($49304633,$49304458,$49304555,$67666F72,$49304258,$49303352,$49304248)
call Bve($49304634,$4930445A,$49304556,$67666F72,$49304258,$49303352,$49304246)
call Bve($49304635,$49304531,$49304557,$67666F72,$49304258,$49303352,$49304246)
call Bve($49304636,$49304533,$49304632,$74647832,$49304247,$49304258,$49303354)
call Bve($49304637,$49304535,$49304558,$74706F77,$49304245,$49304258,$49303353)
call Bve($49304638,$49304537,$49304559,$74706F77,$49304244,$49304258,$49303353)
call Bve($49304641,$49304542,$4930455A,$67666F72,$49304246,$49304258,$49303352)
call Bve($49304639,$49304539,$49304631,$74647832,$49304249,$49304258,$49303354)
call Bve($49304642,$49304544,$49304630,$74647832,$49304247,$49304258,$49303354)
call Bve($4930464C,$49304633,$49304643,$49304241,$4930424A,$4930425A,$49303545)
call Bve($4930464D,$49304634,$49304644,$49304241,$4930424A,$4930425A,$49303543)
call Bve($4930464E,$49304635,$49304645,$49304241,$4930424A,$4930425A,$49303543)
call Bve($4930464F,$49304636,$49304646,$49304243,$4930424C,$4930425A,$49303544)
call Bve($49304650,$49304637,$49304647,$49304242,$4930424B,$4930425A,$49303542)
call Bve($49304651,$49304638,$49304648,$49304242,$4930424B,$4930425A,$49303542)
call Bve($49304653,$49304641,$4930464A,$49304241,$4930424A,$4930425A,$49303546)
call Bve($49304652,$49304639,$49304649,$49304243,$4930424C,$49303544,$4930425A)
call Bve($49304654,$49304642,$4930464B,$49304243,$4930424C,$49303544,$4930425A)
call Bve($49304741,$4930464C,$49304659,$49305344,$49304545,$49304333,$49305350)
call Bve($49304742,$4930464D,$4930465A,$49305344,$49304547,$49304333,$49305350)
call Bve($49304743,$4930464E,$49304730,$49305344,$49304547,$49304333,$49305350)
call Bve($49304744,$4930464F,$49304731,$49304546,$49305344,$49304333,$49305352)
call Bve($49304745,$49304650,$49304732,$49304546,$49305344,$49304333,$49305351)
call Bve($49304746,$49304651,$49304733,$49304546,$49305344,$49304333,$49305351)
call Bve($49304748,$49304653,$49304735,$49305344,$49304545,$49304333,$49305350)
call Bve($49304747,$49304652,$49304734,$49305344,$49304545,$49304333,$49305352)
call Bve($49304749,$49304654,$49304736,$49305344,$49304545,$49304333,$49305352)
call Bve($49304655,$49303935,$49304143,$49304344,0,0,0)
call Bve($49304758,$49304754,$49304757,$49304755,$49304759,$49304756,0)
call Bve($49304830,$4930475A,$4930474B,$49304758,$4930474F,0,0)
call Bve($49305555,$49305556,$49305355,$4930554F,$4930464D,0,0)
call Bve($49305558,$49305557,$4930554F,$49305355,$4930464C,0,0)
call Bve($4930555A,$49305559,$4930554F,$49305357,$4930464E,0,0)
call Bve($49305631,$49305630,$49305359,$49305551,$49304651,0,0)
call Bve($49305635,$49305634,$49305553,$49305430,$49304654,0,0)
call Bve($49305637,$49305636,$49305553,$49305432,$49304652,0,0)
call Bve($49304931,$49304932,$49305043,$4930384A,$49305042,$4930424A,0)
call Bve($49304A4F,$49304936,$49304939,$49304943,$49304C36,$49305235,0)
call Bve($49305033,$49305034,$49304F5A,$49304939,$49304C36,$49305235,0)
call Bve($49304937,$49304938,$49304939,$49304942,$49304C36,$49305235,0)
call Bve($4931304C,$4931304B,$49304939,$49313049,$49304C36,$49305235,0)
call Bve($49305035,$49305036,$49304939,$49305031,$49304C36,$49305235,0)
call Bve($49304943,$49304944,$49304852,$49304831,0,0,0)
call Bve($49304F5A,$49305030,$49304852,$49304831,0,0,0)
call Bve($49304942,$49304945,$49304855,$49304831,0,0,0)
call Bve($49304941,$49304946,$49304851,$49304831,0,0,0)
call Bve($49305031,$49305032,$49304851,$49304831,0,0,0)
call Bve($49313049,$4931304A,$49304851,$49304831,0,0,0)
call Bve($49304947,$4930494A,$49304241,$49304758,0,0,0)
call Bve($49304948,$4930494B,$49304242,$49304758,0,0,0)
call Bve($49304949,$4930494C,$49304243,$49304758,0,0,0)
call Bve($4930494D,$4930494E,$49304947,$4930485A,$49305238,$49305042,$49305043)
call Bve($4930494F,$49304950,$49304948,$4930485A,$49305238,$49305042,$49305043)
call Bve($49304951,$49304952,$49304949,$4930485A,$49305238,$49305042,$49305043)
call Bve($49305243,$49305244,$4930494D,$49305239,$4930424A,$49304657,0)
call Bve($49305241,$49305242,$4930494F,$49305239,$4930424B,$49304658,0)
call Bve($49305245,$49305246,$49304951,$49305239,$4930424C,$49304656,0)
call Bve($49304A52,$49303731,$49303732,$49303748,$49303934,$4930395A,$74726574)
call Bve($49304B4E,$49304B4C,$49303844,$49303846,$49303849,$49303848,0)
call Bve($49304B4F,$49304B4B,$4930384B,$4930384D,$4930384C,$49303935,0)
call Bve($49304B50,$49304B4D,$49304B48,$49304B4A,$49304B49,0,0)
call Bve($49304B53,$49304B51,$49304B4E,$49304B4F,$49304B50,$49304550,$49304B56)
call Bve($49304B52,$49304B51,$49304B4E,$49304B4F,$49304B50,$49304551,$49304B56)
call Bve($49304B54,$49304B51,$49304B4E,$49304B4F,$49304B50,$49304552,$49304B56)
call Bve($49304B55,$49304B51,$49304B4E,$49304B4F,$49304B50,$49304553,$49304B56)
call Bve($49304C41,$49304C38,$49304A4F,$49304C33,$49304C32,$49304C36,$49305234)
call Bve($49305037,$49305038,$49305033,$49304C33,$49304C32,$49304C36,$49305234)
call Bve($49304C42,$49304C39,$49304937,$49304C35,$49304C32,$49304C36,$49305234)
call Bve($49304C37,$49304C43,$49304B46,$49304C34,$49304C32,$49304C36,$49305234)
call Bve($4931304D,$4931304E,$4931304C,$49304C34,$49304C32,$49304C36,$49305234)
call Bve($49305039,$49305041,$49305035,$49304C34,$49304C32,$49304C36,$49305234)
call Bve($49304B46,$49304B47,$49304939,$49304941,$49304C36,$49305235,0)
call Bve($49304D38,$49304D35,$49304D37,$49304D36,0,0,0)
call Bve($49304E55,$49304E4F,$49304E54,$4930474D,$49303430,0,0)
call Bve($49304E53,$49304E4B,$49304E56,$4930474E,$4930335A,0,0)
call Bve($49304E51,$49304E4E,$49304E58,$4930474C,$49303434,0,0)
call Bve($49304E52,$49304E57,$49304E4C,$49303435,$49303147,$49303139,0)
call Bve($49304E50,$49304E59,$49304E4D,$49303142,$49303432,$49303149,0)
call Bve($49304F53,$49304F54,$49304F46,$49304F4C,$49304F4B,0,0)
call Bve($49304F4D,$49304F4E,$49304F30,$49304F4C,$49304F4B,0,0)
call Bve($49304F4F,$49304F50,$49304F34,$49304F4C,$49304F4B,0,0)
call Bve($49304F34,$49304E53,$49304F35,0,0,0,0)
call Bve($49304F55,$49304F56,$49304F32,$49304F4C,$49304F4B,0,0)
call Bve($49304F51,$49304F52,$49304F49,$49304F4C,$49304F4B,0,0)
call Bve($49305044,$49305045,$49305043,$49303230,$49305042,$4930424A,0)
call Bve($49305046,$49305047,$49303843,$49305042,$49305043,$4930424C,0)
call Bve($49305048,$49305049,$49303159,$49305042,$49305043,$4930424C,0)
call Bve($4930504A,$4930504D,$4930504C,$4930504B,$6863756E,0,0)
call Bve($49305057,$4930474B,$49304D47,0,0,0,0)
call Bve($49305058,$49305055,$49305057,0,0,0,0)
call Bve($4930505A,$49305056,$49305058,0,0,0,0)
call Bve($49305133,$49305132,$726C6966,$686C7374,0,0,0)
call Bve($49305134,$49305135,$49304F51,$49305131,$4930474F,0,0)
call Bve($49305139,$49305138,$49304F55,$49305059,$4930474F,0,0)
call Bve($49305136,$49305137,$49304F4F,$49305059,$4930474F,0,0)
call Bve($49305143,$49305144,$49304F4D,$49305130,$4930474F,0,0)
call Bve($49305142,$49305141,$49304F53,$4930505A,$4930474F,0,0)
call Bve($49305633,$49305632,$49305551,$49304650,$49305359,0,0)
call Bve($49305355,$49305354,$49305243,$49305044,$49305235,$49304A52,0)
call Bve($49305357,$49305356,$49305243,$49304931,$49305235,$49304A52,0)
call Bve($49305359,$49305358,$49305241,$49304933,$49305235,$49304A52,0)
call Bve($49305430,$4930535A,$49305245,$49305046,$49305235,$49304A52,0)
call Bve($49305432,$49305431,$49305245,$49305048,$49305235,$49304A52,0)
call Bve($4930544A,$676D6672,$4930524E,$4930514F,$73687764,0,0)
call Bve($49305457,$49305456,$49305455,$49305454,0,0,0)
call Bve($49305534,$49305535,$49305544,$4930534F,$4930544A,$49304C41,0)
call Bve($49305544,$49305546,$49304C33,$49304C34,$49304C35,$4930534E,$49305234)
call Bve($49305538,$49305539,$49305544,$4930534F,$4930544A,$49305037,0)
call Bve($49305541,$49305542,$49305545,$4930534F,$4930544A,$49304C42,0)
call Bve($49305532,$49305533,$49305543,$4930534F,$4930544A,$49305039,0)
call Bve($49305A46,$49305A45,$49305357,$4930554F,$49304653,0,0)
call Bve($49305A48,$49305A47,$49303731,0,0,0,0)
call Bve($49305A49,$49305A48,$49303732,0,0,0,0)
call Bve($49305A4A,$49305A49,$49303748,0,0,0,0)
call Bve($49305A4B,$49305A4A,$49303934,0,0,0,0)
call Bve($49305A4C,$49305A4B,$4930395A,0,0,0,0)
call Bve($49305A4D,$49305A4C,$74726574,0,0,0,0)
call Bve($49305A4E,$49305A4D,$49304A55,0,0,0,0)
call Bve($49305A4F,$49305A4E,$49304D50,0,0,0,0)
call Bve($49305A50,$49305A4F,$4930324E,0,0,0,0)
call Bve($49304E34,$49304B35,$49304D50,0,0,0,0)
call Bve($4930365A,$4930364F,$49303731,0,0,0,0)
call Bve($49303745,$4930365A,$49303732,0,0,0,0)
call Bve($4930374F,$49303745,$49303748,0,0,0,0)
call Bve($4930394E,$4930374F,$49303934,0,0,0,0)
call Bve($49303956,$4930394E,$4930395A,0,0,0,0)
call Bve($74677268,$49303956,$74726574,0,0,0,0)
call Bve($49304B36,$74677268,$49304A55,0,0,0,0)
call Bve($49304E35,$49304B36,$49304D50,0,0,0,0)
call Bve($49303730,$4930364D,$49303731,0,0,0,0)
call Bve($49303746,$49303730,$49303732,0,0,0,0)
call Bve($49303750,$49303746,$49303748,0,0,0,0)
call Bve($4930394F,$49303750,$49303934,0,0,0,0)
call Bve($49303957,$4930394F,$4930395A,0,0,0,0)
call Bve($646B6677,$49303957,$74726574,0,0,0,0)
call Bve($49304B41,$646B6677,$49304A55,0,0,0,0)
call Bve($49304E36,$49304B41,$49304D50,0,0,0,0)
call Bve($49304549,$49304548,$49303731,0,0,0,0)
call Bve($4930454A,$49304549,$49303732,0,0,0,0)
call Bve($4930454B,$4930454A,$49303748,0,0,0,0)
call Bve($4930454C,$4930454B,$49303934,0,0,0,0)
call Bve($4930454D,$4930454C,$4930395A,0,0,0,0)
call Bve($4930454E,$4930454D,$74726574,0,0,0,0)
call Bve($49304B44,$4930454E,$49304A55,0,0,0,0)
call Bve($49304D58,$49304B44,$49304D50,0,0,0,0)
call Bve($4930484A,$49304849,$49303731,0,0,0,0)
call Bve($4930484B,$4930484A,$49303732,0,0,0,0)
call Bve($4930484C,$4930484B,$49303748,0,0,0,0)
call Bve($4930484D,$4930484C,$49303934,0,0,0,0)
call Bve($4930484E,$4930484D,$4930395A,0,0,0,0)
call Bve($4930484F,$4930484E,$74726574,0,0,0,0)
call Bve($49304B43,$4930484F,$49304A55,0,0,0,0)
call Bve($49304D56,$49304B43,$49304D50,0,0,0,0)
call Bve($49304A38,$49304A37,$49303731,0,0,0,0)
call Bve($49304A39,$49304A38,$49303732,0,0,0,0)
call Bve($49304A41,$49304A39,$49303748,0,0,0,0)
call Bve($49304A42,$49304A41,$49303934,0,0,0,0)
call Bve($49304A43,$49304A42,$4930395A,0,0,0,0)
call Bve($49304A44,$49304A43,$74726574,0,0,0,0)
call Bve($49304B45,$49304A44,$49304A55,0,0,0,0)
call Bve($49304E39,$49304B45,$49304D50,0,0,0,0)
call Bve($49304C47,$49304C46,$49303731,0,0,0,0)
call Bve($49304C48,$49304C47,$49303732,0,0,0,0)
call Bve($49304C49,$49304C48,$49303748,0,0,0,0)
call Bve($49304C4A,$49304C49,$49303934,0,0,0,0)
call Bve($49304C4B,$49304C4A,$4930395A,0,0,0,0)
call Bve($49304C4C,$49304C4B,$74726574,0,0,0,0)
call Bve($49304C4D,$49304C4C,$49304A55,0,0,0,0)
call Bve($49304E37,$49304C4D,$49304D50,0,0,0,0)
call Bve($49304D49,$49304D48,$49303731,0,0,0,0)
call Bve($49304D4A,$49304D49,$49303732,0,0,0,0)
call Bve($49304D4B,$49304D4A,$49303748,0,0,0,0)
call Bve($49304D4C,$49304D4B,$49303934,0,0,0,0)
call Bve($49304D4D,$49304D4C,$4930395A,0,0,0,0)
call Bve($49304D4E,$49304D4D,$74726574,0,0,0,0)
call Bve($49304D4F,$49304D4E,$49304A55,0,0,0,0)
call Bve($49304E42,$49304D4F,$49304D50,0,0,0,0)
call Bve($49304F36,$49304F42,$49303731,0,0,0,0)
call Bve($49304F37,$49304F36,$49303732,0,0,0,0)
call Bve($49304F38,$49304F37,$49303748,0,0,0,0)
call Bve($49304F39,$49304F38,$49303934,0,0,0,0)
call Bve($49304F41,$49304F39,$4930395A,0,0,0,0)
call Bve($49304F43,$49304F41,$74726574,0,0,0,0)
call Bve($49304F44,$49304F43,$49304A55,0,0,0,0)
call Bve($49304F45,$49304F44,$49304D50,0,0,0,0)
call Bve($49305146,$49305145,$49303731,0,0,0,0)
call Bve($49305147,$49305146,$49303732,0,0,0,0)
call Bve($49305148,$49305147,$49303748,0,0,0,0)
call Bve($49305149,$49305148,$49303934,0,0,0,0)
call Bve($4930514A,$49305149,$4930395A,0,0,0,0)
call Bve($4930514B,$4930514A,$74726574,0,0,0,0)
call Bve($4930514C,$4930514B,$49304A55,0,0,0,0)
call Bve($4930514D,$4930514C,$49304D50,0,0,0,0)
call Bve($49305442,$49305441,$49303731,0,0,0,0)
call Bve($49305443,$49305442,$49303732,0,0,0,0)
call Bve($49305444,$49305443,$49303748,0,0,0,0)
call Bve($49305445,$49305444,$49303934,0,0,0,0)
call Bve($49305446,$49305445,$4930395A,0,0,0,0)
call Bve($49305447,$49305446,$74726574,0,0,0,0)
call Bve($49305448,$49305447,$49304A55,0,0,0,0)
call Bve($49305449,$49305448,$49304D50,0,0,0,0)
call Bve($49303550,$4930354F,$49303145,$49303143,$49303141,$49303146,0)
call Bve($49303554,$49303553,$49303436,$49303431,$49303433,0,0)
call Bve($49303556,$49303555,$49303332,$49303331,$49303330,0,0)
call Bve($49303557,$49303558,$4930414E,$49303550,$49303554,$49303556,0)
call Bve($4930355A,$49303559,$49303151,$49303153,$4930314C,$49303152,0)
call Bve($49303633,$49303632,$49303341,$49303344,0,0,0)
call Bve($49303634,$49303635,$4930414D,$49303633,$4930355A,$49303631,$49303557)
call Bve($49303643,$49303642,$4930334A,$49303349,$49303348,0,0)
call Bve($49303641,$49303639,$49303444,$49303445,$49303446,0,0)
call Bve($49303638,$49303637,$49303232,$49303233,$49303234,$49303235,0)
call Bve($49303645,$49303644,$49303636,$49303641,$49303638,$49303643,$49303634)
call Bve($49303647,$49303646,$49303358,$49303146,0,0,0)
call Bve($49303654,$49303650,$49303651,$49303652,$49303653,0,0)
call Bve($49303934,$49303931,$49303932,$49303933,0,0,0)
call Bve($4930395A,$49303959,$49303958,0,0,0,0)
call Bve($72646532,$72617439,$6863756E,$6473756D,0,0,0)
call Bve($72646531,$636E6F62,$6863756E,$6473756D,0,0,0)
call Bve($62656C76,$72687468,$6863756E,$6473756D,0,0,0)
call Bve($726C6966,$72646533,$62656C76,$72646531,$72646532,0,0)
call Bve($706E7675,$776C7364,$77637963,$77696C6C,0,0,0)
call Bve($72656A33,$776F6D73,$77637963,$77696C6C,0,0,0)
call Bve($66677267,$77736873,$77637963,$77696C6C,0,0,0)
call Bve($686C7374,$706F6D6E,$66677267,$72656A33,$706E7675,0,0)
call Bve($67666F72,$676F6D6E,$49303355,$49303248,$49303249,0,0)
call Bve($74706F77,$676F6D6E,$4930334F,$4930324F,$49303454,0,0)
call Bve($49304242,$74706F77,$49304239,0,0,0,0)
call Bve($74647832,$676F6D6E,$49303350,$4930324C,$49303247,0,0)
call Bve($49304243,$74647832,$49304239,0,0,0,0)
call Bve($49303754,$49303755,$49303147,$4930314C,$49303232,0,0)
call Bve($49303758,$49303759,$49303149,$4930315A,$4930314E,0,0)
call Bve($49303756,$49303757,$49303148,$49303233,$4930314F,0,0)
call Bve($49304147,$49304146,$49304143,$49303756,$49303238,$49303245,0)
call Bve($49304142,$49304141,$49304143,$49303754,$49303244,$49303237,0)
call Bve($49304145,$49304144,$49304143,$49303758,$49303239,$49303246,0)
call Bve($70656E72,$77617264,$49304143,$49304147,$4930324F,$4930324D,0)
call Bve($73707368,$706D6E61,$49304143,$49304142,$49303249,$49303250,0)
call Bve($72617463,$72617436,$49304143,$49304145,$4930324A,$4930324C,0)
call Bve($49303159,$49303847,$49304758,$49305142,0,0,0)
call Bve($49303157,$49303847,$49304758,$49305136,0,0,0)
call Bve($49303230,$49303847,$49304758,$49305134,0,0,0)
call Bve($49303843,$49303847,$49304758,$49305143,0,0,0)
call Bve($49304A54,$49304A52,$49304A53,0,0,0,0)
call Bve($49303458,$49303236,$49304833,0,0,0,0)
call Bve($63686573,$49304A55,$6B79736E,0,0,0,0)
call Bve($6B79736E,$74726574,$617A6872,0,0,0,0)
call Bve($617A6872,$4930395A,$73636C70,0,0,0,0)
call Bve($73636C70,$49303934,$636E686E,0,0,0,0)
call Bve($636E686E,$49303748,$627A6265,0,0,0,0)
call Bve($627A6265,$49303732,$627A6266,0,0,0,0)
call Bve($627A6266,$49303731,$6A706E74,0,0,0,0)
call Bve($4930534F,$4930534E,$4930514F,0,0,0,0)
call Bve($49304F46,$49304F47,$49304E55,0,0,0,0)
call Bve($49304F49,$49304F48,$49304E52,0,0,0,0)
call Bve($49304F32,$49304F33,$49304E51,0,0,0,0)
call Bve($49304F30,$49304F31,$49304E50,0,0,0,0)
call Bve($49304855,$49304854,$49304930,0,0,0,0)
call Bve($49304854,$49304853,$4930485A,0,0,0,0)
call Bve($49304852,$49304857,$49304930,0,0,0,0)
call Bve($49304857,$4930485A,$49304856,0,0,0,0)
call Bve($49304851,$49304930,$49304859,0,0,0,0)
call Bve($49304859,$4930485A,$49304858,0,0,0,0)
call Bve($4930554F,$49304E45,$49305550,0,0,0,0)
call Bve($49305553,$49304E45,$49305554,0,0,0,0)
call Bve($49305551,$49304E45,$49305552,0,0,0,0)
call Bve($49305334,$49305335,$49305055,0,0,0,0)
call Bve($49305336,$49305334,$49303138,$49303737,0,0,0)
call Bve($49305337,$49305336,$4930534B,$49305349,$49305345,0,0)
call Bve($49305338,$49305337,$49304F4C,$49304F4B,0,0,0)
call Bve($49305339,$49305338,$49305043,$49305042,0,0,0)
call Bve($49305341,$49305339,$49304C36,0,0,0,0)
call Bve($49305342,$49305341,$49304A52,0,0,0,0)
call Bve($49305343,$49305342,$49304831,$4930485A,0,0,0)
call Bve($49305344,$49305343,$49304939,$72617433,0,0,0)
call Bve($6C656467,$6C6D6272,$746F7477,$73727263,$706E766C,0,0)
call Bve($49304A4A,$6B336D32,$61727368,$73747761,$72617433,0,0)
call Bve($49304A4D,$676C736B,$61727368,$73747761,$72617433,0,0)
call Bve($49304A4B,$74686C65,$61727368,$73747761,$72617433,0,0)
call Bve($49304A4C,$616D7263,$61727368,$73747761,$72617433,0,0)
call Bve($4930584A,$64706865,$61727368,$73747761,$72617433,0,0)
call Bve($4930584C,$70616D73,$61727368,$73747761,$72617433,0,0)
call Bve($49304D44,$6B67616C,$7468646D,$7372746C,$626C6261,$616E6667,0)
call Bve($49304D43,$62726167,$7468646D,$7372746C,$626C6261,$616E6667,0)
call Bve($49304D42,$69776272,$7468646D,$7372746C,$626C6261,$616E6667,0)
call Bve($49304D41,$656E766C,$7468646D,$7372746C,$626C6261,$616E6667,0)
call Bve($4930584B,$676F626D,$7468646D,$7372746C,$626C6261,$616E6667,0)
call Bve($4930584D,$74656C73,$7468646D,$7372746C,$626C6261,$616E6667,0)
call Bve($4930584F,$726F7473,$736F756C,$6573617A,$7363686C,0,0)
call Bve($49305850,$73747067,$736F756C,$6573617A,$7363686C,0,0)
call Bve($49305851,$7368656E,$736F756C,$6573617A,$7363686C,0,0)
call Bve($49305852,$70737064,$736F756C,$6573617A,$7363686C,0,0)
call Bve($49305853,$736B7368,$736F756C,$6573617A,$7363686C,0,0)
call Bve($49305854,$666C6167,$736F756C,$6573617A,$7363686C,0,0)
call Bve($49313038,$64747362,$67656D74,$7462616B,0,0,0)
call Bve($49305954,$49305941,$49303731,0,0,0,0)
call Bve($49305A31,$49305954,$49303732,0,0,0,0)
call Bve($49305955,$49305A31,$49303748,0,0,0,0)
call Bve($49305939,$49305955,$49303934,0,0,0,0)
call Bve($49305A32,$49305939,$4930395A,0,0,0,0)
call Bve($49305A33,$49305A32,$74726574,0,0,0,0)
call Bve($49305938,$49305A33,$49304A55,0,0,0,0)
call Bve($49305A35,$49305938,$49304D50,0,0,0,0)
call Bve($49305A44,$49305A35,$4930324E,0,0,0,0)
call Bve($49305335,$49303654,$49303059,0,0,0,0)
call Bve($49304A55,$4930595A,$49304A54,0,0,0,0)
call Bve($73626F6B,$6772736C,$4930544A,$72617433,$61727368,0,0)
call Bve($49305847,$49304C59,$49305457,$49303533,$49303530,0,0)
call Bve($49305956,$49305957,$49305457,$49303532,$49303535,0,0)
call Bve($49305958,$49304C58,$49305457,$49303534,$49303531,0,0)
call Bve($49305A30,$49305A34,$49305847,$49303539,$49303545,0,0)
call Bve($49303048,$49304958,$49305847,$49303537,$49303543,0,0)
call Bve($49305331,$49304C5A,$49305958,$49303536,$49303542,0,0)
call Bve($49304834,$49305A36,$49305958,$49303536,$49303542,0,0)
call Bve($49304D38,$49305259,$49305956,$49303544,$49303541,0,0)
call Bve($4930525A,$49305330,$49305956,$49303538,$49303546,0,0)
call Bve($49304D36,$49305959,$49303048,$49304239,$49305043,$73747761,$49304248)
call Bve($49304D35,$49305054,$49303048,$49304239,$49305043,$73747761,$49304246)
call Bve($49305638,$49304D37,$49305A30,$49304239,$49305043,$73747761,$49304248)
call Bve($49305332,$49304554,$49305A30,$49304239,$49305043,$73747761,$49304246)
call Bve($49305639,$49305933,$49305331,$49304239,$49305043,$73747761,$49304244)
call Bve($49305333,$49305348,$49305331,$49304239,$49305043,$73747761,$49304245)
call Bve($49304D34,$49305A42,$49304834,$49304239,$49305043,$73747761,$49304244)
call Bve($49304E5A,$49305A37,$49304834,$49304239,$49305043,$73747761,$49304245)
call Bve($49305A39,$49305A43,$4930525A,$49304239,$49305043,$73747761,$49304247)
call Bve($49305A38,$49305A41,$4930525A,$49304239,$49305043,$73747761,$49304249)
call Bve($49305050,$4930554A,$49304D38,$49304239,$49305043,$73747761,$49304247)
call Bve($49305053,$49313051,$49304D38,$49304239,$49305043,$73747761,$49304249)
call Bve($6C6E726E,$72646530,$49303731,0,0,0,0)
call Bve($726E7370,$6C6E726E,$49303732,0,0,0,0)
call Bve($6A64726E,$726E7370,$49303748,0,0,0,0)
call Bve($63726474,$6A64726E,$49303934,0,0,0,0)
call Bve($6B6C6D6D,$63726474,$4930395A,0,0,0,0)
call Bve($7664646C,$6B6C6D6D,$74726574,0,0,0,0)
call Bve($66726764,$7664646C,$49304A55,0,0,0,0)
call Bve($64727068,$66726764,$49304D50,0,0,0,0)
call Bve($6D6C7374,$64727068,$4930324E,0,0,0,0)
call Bve($49313055,$49313056,$49304D36,$4930314B,$72656A31,$61727368,$49304939)
call Bve($49313057,$49313058,$49304D35,$4930314B,$72656A31,$61727368,$49304939)
call Bve($49313059,$4931305A,$49305638,$49303833,$72656A31,$61727368,$49304939)
call Bve($49313130,$49313131,$49305332,$49303833,$72656A31,$61727368,$49304939)
call Bve($49313132,$49313133,$49305639,$4930314B,$73726264,$61727368,$49304939)
call Bve($49313134,$49313135,$49305333,$4930314B,$73726264,$61727368,$49304939)
call Bve($49313136,$49313137,$49304D34,$49303833,$73726264,$61727368,$49304939)
call Bve($49313138,$49313139,$49304E5A,$49303833,$73726264,$61727368,$49304939)
call Bve($49313141,$49313142,$49305A39,$4930314B,$6E737069,$61727368,$49304939)
call Bve($49313143,$49313144,$49305A38,$4930314B,$6E737069,$61727368,$49304939)
call Bve($49313145,$49313146,$49305050,$49303833,$6E737069,$61727368,$49304939)
call Bve($49313147,$49313148,$49305053,$49303833,$6E737069,$61727368,$49304939)
call Bve($49313150,$49313154,$726C6966,$4930415A,$4930424D,$49303550,$49303554)
call Bve($4931314C,$49313152,$686C7374,$49313150,$49304252,$6F646566,$49303631)
call Bve($49313151,$49313157,$6C656467,$4931314C,$49304254,$49304232,$49303638)
call Bve($4931314D,$49313151,$49313156,$74706F77,$49304245,$49304258,$49303353)
call Bve($4931314E,$4931314D,$49313153,$49304242,$4930424B,$4930425A,$49303542)
call Bve($4931314F,$4931314E,$49313155,$49304546,$49305344,$49304333,$49305351)
endfunction
function Bvi takes nothing returns nothing
local trigger QG
call Bve($64747362,$746D7363,$6C656467,$49305133,0,0,0)
call Bve($67656D74,$6173626C,$6C656467,$49305133,0,0,0)
call Bve($7462616B,$67736F75,$6C656467,$49305133,0,0,0)
call Bve($4930384A,$49303847,$49304758,$49305139,0,0,0)
call Bve($49305A52,$49305A51,$7363686C,$6573617A,$736F756C,0,0)
call Bve($49305536,$49305537,$49305543,$4930534F,$4930544A,$49304C37,0)
call Bve($49313050,$4931304F,$49305543,$4930534F,$4930544A,$4931304D,0)
call Bve($49305545,$49305547,$49304C33,$49304C34,$49304C35,$4930534E,$49305234)
call Bve($49305543,$49305548,$49304C33,$49304C34,$49304C35,$4930534E,$49305234)
call Bve($49305044,$49305045,$49305043,$49305042,$49303230,$4930424A,0)
call Bve($49305046,$49305047,$49305043,$49305042,$49303843,$4930424C,0)
call Bve($49304933,$49304934,$49305043,$49305042,$49303157,$4930424B,0)
call Bve($49305048,$49305049,$49305043,$49305042,$49303159,$4930424C,0)
call Bve($49304931,$49304932,$49305043,$49305042,$4930384A,$4930424A,0)
call Bve($49303448,$4930324B,$49303453,$4930345A,$49303452,$49303154,0)
call Bve($49303831,$49303830,$49303833,$4930314B,$49303853,$49303852,0)
call Bve($49305655,$4930375A,$4930314D,$49303448,$49303831,$49304B53,0)
call Bve($49305653,$4930375A,$4930314D,$49303448,$49303831,$49304B54,0)
call Bve($49305654,$4930375A,$4930314D,$49303448,$49303831,$49304B55,0)
call Bve($49305656,$4930375A,$4930314D,$49303448,$49303831,$49304B52,0)
call Bve($49304F59,$49305436,$49304957,$49305043,$49305042,0,0)
call Bve($49304953,$49304955,$49304A32,$49304831,$49304939,0,0)
call Bve($49305435,$49304956,$49305433,$49305234,$49303833,0,0)
call Bve($49305734,$4930324E,$4930514D,0,0,0,0)
call Bve($49305735,$4930324E,$49304D51,0,0,0,0)
call Bve($49305736,$4930324E,$49304D52,0,0,0,0)
call Bve($49305737,$4930324E,$49304E36,0,0,0,0)
call Bve($49305738,$4930324E,$49304D53,0,0,0,0)
call Bve($49305739,$4930324E,$49304F45,0,0,0,0)
call Bve($49305741,$4930324E,$49304D54,0,0,0,0)
call Bve($49305742,$4930324E,$49304D55,0,0,0,0)
call Bve($49305743,$4930324E,$49304D56,0,0,0,0)
call Bve($49305744,$4930324E,$49304D57,0,0,0,0)
call Bve($49305745,$4930324E,$49304D58,0,0,0,0)
call Bve($49305746,$4930324E,$49304D59,0,0,0,0)
call Bve($49305747,$4930324E,$49304D5A,0,0,0,0)
call Bve($49305748,$4930324E,$49304E30,0,0,0,0)
call Bve($49305749,$4930324E,$49304E31,0,0,0,0)
call Bve($4930574A,$4930324E,$49304E32,0,0,0,0)
call Bve($4930574B,$4930324E,$49304E33,0,0,0,0)
call Bve($4930574C,$4930324E,$49304E34,0,0,0,0)
call Bve($4930574D,$4930324E,$49304E35,0,0,0,0)
call Bve($4930574E,$4930324E,$49304E37,0,0,0,0)
call Bve($4930574F,$4930324E,$49304E38,0,0,0,0)
call Bve($49305750,$4930324E,$49305449,0,0,0,0)
call Bve($49305751,$4930324E,$49304E39,0,0,0,0)
call Bve($49305752,$4930324E,$49304E41,0,0,0,0)
call Bve($49305753,$4930324E,$49304E42,0,0,0,0)
call Bve($4930414E,$49304A36,$49305434,$4930474B,$6863756E,$6473756D,0)
call Bve($4930414D,$49304A34,$49304A35,$706F6D6E,$49303437,$49303438,$49303439)
call Bve($49303636,$49304143,$49303447,$49304954,$49305438,$49303737,$49305437)
call Bve($4930414F,$4930304B,$49304A33,$49304F4C,$49304F4B,$49304150,0)
call Bve($49304338,$49303455,$49303458,$49305043,$49303535,$49303534,$49303533)
call Bve($49304352,$49303449,$49303241,$49303451,$49304831,0,0)
call Bve($49304B56,$49303243,$49304939,$49304930,$4930485A,$49303242,0)
call Bve($49305833,$49303049,$49305832,$49305831,0,0,0)
call Bve($49305834,$49304737,$49305832,$49305831,0,0,0)
call Bve($49305835,$49305247,$49305832,$49305831,0,0,0)
call Bve($49305836,$49305835,$49305758,$49305831,0,0,0)
call Bve($49305837,$49305833,$49305758,$49305831,0,0,0)
call Bve($49305838,$49305834,$49305758,$49305831,0,0,0)
call Bve($49305841,$49305248,$49305758,$49305831,0,0,0)
call Bve($49305839,$49305841,$49305758,$4930575A,0,0,0)
call Bve($49305842,$49304738,$49305830,$4930575A,0,0,0)
call Bve($49305843,$49305842,$49305830,$49305759,0,0,0)
call Bve($49305845,$49305844,$49305831,$49305759,$4930575A,$49305758,$49305830)
call Bve($49305844,$49305836,$49305837,$49305839,$49305838,$49305843,0)
call Bve($4930594D,$4930594E,$49303833,$49303448,$4930314D,0,0)
call Bve($4930594A,$4930594B,$4930594C,$49305243,$4930554F,0,0)
call Bve($49305947,$49305949,$4930594C,$49305241,$49305551,0,0)
call Bve($49305946,$49305948,$4930594C,$49305245,$49305553,0,0)
call Bve($49305942,$49305944,$4930594A,$4930594D,$49305A46,0,0)
call Bve($4930594F,$49305950,$49305947,$4930594D,$49305631,0,0)
call Bve($49305A56,$49305A57,$49305947,$4930594D,$49305633,0,0)
call Bve($49313030,$49305A5A,$49305946,$4930594D,$49305635,0,0)
call Bve($49305A59,$49305A58,$49305946,$4930594D,$49305637,0,0)
call Bve($49305951,$49305952,$4930594A,$4930594D,$4930555A,0,0)
call Bve($49313031,$49305937,$4930594A,$4930594D,$49305558,0,0)
call Bve($49305953,$49305945,$4930594A,$4930594D,$49305555,0,0)
call Bve($72726573,$72686531,$49303731,0,0,0,0)
call Bve($72737073,$72726573,$49303732,0,0,0,0)
call Bve($72686532,$72737073,$49303748,0,0,0,0)
call Bve($726D616E,$72686532,$49303934,0,0,0,0)
call Bve($72726562,$726D616E,$4930395A,0,0,0,0)
call Bve($6D6F7274,$72726562,$74726574,0,0,0,0)
call Bve($49304B42,$6D6F7274,$49304A55,0,0,0,0)
call Bve($49304E41,$49304B42,$49304D50,0,0,0,0)
call Bve($72737064,$72646973,$49303731,0,0,0,0)
call Bve($72776174,$72737064,$49303732,0,0,0,0)
call Bve($7273706C,$72776174,$49303748,0,0,0,0)
call Bve($72726532,$7273706C,$49303934,0,0,0,0)
call Bve($72686533,$72726532,$4930395A,0,0,0,0)
call Bve($776F6C67,$72686533,$74726574,0,0,0,0)
call Bve($49304B38,$776F6C67,$49304A55,0,0,0,0)
call Bve($49304D52,$49304B38,$49304D50,0,0,0,0)
call Bve($636C7364,$6763656C,$49303731,0,0,0,0)
call Bve($7373696C,$636C7364,$49303732,0,0,0,0)
call Bve($7374656C,$7373696C,$49303748,0,0,0,0)
call Bve($62677374,$7374656C,$49303934,0,0,0,0)
call Bve($6C687374,$62677374,$4930395A,0,0,0,0)
call Bve($70686561,$6C687374,$74726574,0,0,0,0)
call Bve($49304A58,$70686561,$49304A55,0,0,0,0)
call Bve($49304D55,$49304A58,$49304D50,0,0,0,0)
call Bve($72696E31,$73626368,$49303731,0,0,0,0)
call Bve($7277697A,$72696E31,$49303732,0,0,0,0)
call Bve($6D636F75,$7277697A,$49303748,0,0,0,0)
call Bve($636C666D,$6D636F75,$49303934,0,0,0,0)
call Bve($63697269,$636C666D,$4930395A,0,0,0,0)
call Bve($68736C76,$63697269,$74726574,0,0,0,0)
call Bve($49304A5A,$68736C76,$49304A55,0,0,0,0)
call Bve($49304D59,$49304A5A,$49304D50,0,0,0,0)
call Bve($776E6567,$746B6E6F,$49303731,0,0,0,0)
call Bve($726E6563,$776E6567,$49303732,0,0,0,0)
call Bve($6D637269,$726E6563,$49303748,0,0,0,0)
call Bve($736B756C,$6D637269,$49303934,0,0,0,0)
call Bve($76616D70,$736B756C,$4930395A,0,0,0,0)
call Bve($706C636C,$76616D70,$74726574,0,0,0,0)
call Bve($49304B37,$706C636C,$49304A55,0,0,0,0)
call Bve($49304E38,$49304B37,$49304D50,0,0,0,0)
call Bve($70696E76,$706D616E,$49303731,0,0,0,0)
call Bve($70636C72,$70696E76,$49303732,0,0,0,0)
call Bve($74736374,$70636C72,$49303748,0,0,0,0)
call Bve($74636173,$74736374,$49303934,0,0,0,0)
call Bve($6D6F6F6E,$74636173,$4930395A,0,0,0,0)
call Bve($73696C6B,$6D6F6F6E,$74726574,0,0,0,0)
call Bve($49304A57,$73696C6B,$49304A55,0,0,0,0)
call Bve($49304D53,$49304A57,$49304D50,0,0,0,0)
call Bve($74657870,$74696E32,$49303731,0,0,0,0)
call Bve($74737472,$74657870,$49303732,0,0,0,0)
call Bve($74737432,$74737472,$49303748,0,0,0,0)
call Bve($6D616E68,$74737432,$49303934,0,0,0,0)
call Bve($72726531,$6D616E68,$4930395A,0,0,0,0)
call Bve($6D67746B,$72726531,$74726574,0,0,0,0)
call Bve($49304B39,$6D67746B,$49304A55,0,0,0,0)
call Bve($49304D54,$49304B39,$49304D50,0,0,0,0)
call Bve($49303033,$49303032,$49303731,0,0,0,0)
call Bve($49303034,$49303033,$49303732,0,0,0,0)
call Bve($49303036,$49303034,$49303748,0,0,0,0)
call Bve($49303442,$49303036,$49303934,0,0,0,0)
call Bve($49303443,$49303442,$4930395A,0,0,0,0)
call Bve($736E6567,$49303443,$74726574,0,0,0,0)
call Bve($49304A56,$736E6567,$49304A55,0,0,0,0)
call Bve($49304D51,$49304A56,$49304D50,0,0,0,0)
call Bve($49303655,$4930354C,$49303731,0,0,0,0)
call Bve($49303738,$49303655,$49303732,0,0,0,0)
call Bve($49303749,$49303738,$49303748,0,0,0,0)
call Bve($49303948,$49303749,$49303934,0,0,0,0)
call Bve($49303950,$49303948,$4930395A,0,0,0,0)
call Bve($7373616E,$49303950,$74726574,0,0,0,0)
call Bve($49304A59,$7373616E,$49304A55,0,0,0,0)
call Bve($49304D57,$49304A59,$49304D50,0,0,0,0)
call Bve($49303656,$4930364A,$49303731,0,0,0,0)
call Bve($49303739,$49303656,$49303732,0,0,0,0)
call Bve($4930374A,$49303739,$49303748,0,0,0,0)
call Bve($49303949,$4930374A,$49303934,0,0,0,0)
call Bve($49303951,$49303949,$4930395A,0,0,0,0)
call Bve($73747770,$49303951,$74726574,0,0,0,0)
call Bve($49304B30,$73747770,$49304A55,0,0,0,0)
call Bve($49304D5A,$49304B30,$49304D50,0,0,0,0)
call Bve($4930364E,$49303733,$49303731,0,0,0,0)
call Bve($49303741,$4930364E,$49303732,0,0,0,0)
call Bve($4930374B,$49303741,$49303748,0,0,0,0)
call Bve($4930394A,$4930374B,$49303934,0,0,0,0)
call Bve($49303952,$4930394A,$4930395A,0,0,0,0)
call Bve($7370726F,$49303952,$74726574,0,0,0,0)
call Bve($49304B31,$7370726F,$49304A55,0,0,0,0)
call Bve($49304E30,$49304B31,$49304D50,0,0,0,0)
call Bve($49304134,$49304133,$49303731,0,0,0,0)
call Bve($49304135,$49304134,$49303732,0,0,0,0)
call Bve($49304136,$49304135,$49303748,0,0,0,0)
call Bve($49304137,$49304136,$49303934,0,0,0,0)
call Bve($49304138,$49304137,$4930395A,0,0,0,0)
call Bve($73686561,$49304138,$74726574,0,0,0,0)
call Bve($49304B32,$73686561,$49304A55,0,0,0,0)
call Bve($49304E31,$49304B32,$49304D50,0,0,0,0)
call Bve($49303657,$49303649,$49303731,0,0,0,0)
call Bve($49303742,$49303657,$49303732,0,0,0,0)
call Bve($4930374C,$49303742,$49303748,0,0,0,0)
call Bve($4930394B,$4930374C,$49303934,0,0,0,0)
call Bve($49303953,$4930394B,$4930395A,0,0,0,0)
call Bve($736D616E,$49303953,$74726574,0,0,0,0)
call Bve($49304B33,$736D616E,$49304A55,0,0,0,0)
call Bve($49304E32,$49304B33,$49304D50,0,0,0,0)
call Bve($49303658,$4930364B,$49303731,0,0,0,0)
call Bve($49303743,$49303658,$49303732,0,0,0,0)
call Bve($4930374D,$49303743,$49303748,0,0,0,0)
call Bve($4930394C,$4930374D,$49303934,0,0,0,0)
call Bve($49303954,$4930394C,$4930395A,0,0,0,0)
call Bve($73726567,$49303954,$74726574,0,0,0,0)
call Bve($49304B34,$73726567,$49304A55,0,0,0,0)
call Bve($49304E33,$49304B34,$49304D50,0,0,0,0)
call Bve($49303659,$4930364C,$49303731,0,0,0,0)
call Bve($49303744,$49303659,$49303732,0,0,0,0)
call Bve($4930374E,$49303744,$49303748,0,0,0,0)
call Bve($4930394D,$4930374E,$49303934,0,0,0,0)
call Bve($49303955,$4930394D,$4930395A,0,0,0,0)
call Bve($73686173,$49303955,$74726574,0,0,0,0)
call Bve($49304B35,$73686173,$49304A55,0,0,0,0)
call Bve($49304154,$49304153,$4930414F,$49304150,$73707368,$49303352,$49303645)
call Bve($49304156,$49304155,$4930414F,$49304150,$70656E72,$49303353,$49303645)
call Bve($49304152,$49304151,$4930414F,$49304150,$72617463,$49303354,$49303645)
call Bve($49303631,$49303630,$49303437,$49303438,$49303439,0,0)
call Bve($49304241,$67666F72,$49304239,0,0,0,0)
call Bve($49304242,$74706F77,$49304239,0,0,0,0)
call Bve($49304243,$74647832,$49304239,0,0,0,0)
call Bve($4930424D,$4930424E,$73656872,$4930335A,$49303435,$49303434,0)
call Bve($4930424F,$49304250,$77696C64,$49303436,$49303433,$49303431,0)
call Bve($49304252,$49304251,$7370726E,$49303438,$49303437,$49303439,0)
call Bve($49304254,$49304253,$776E6575,$49303444,$49303446,$49303445,0)
call Bve($49304255,$49304256,$72737431,$49303447,$49303737,$49304143,0)
call Bve($49304258,$49304257,$62726163,$49303932,$49303930,$49304150,0)
call Bve($4930425A,$49304259,$61666163,$49303532,$49303533,$49303959,0)
call Bve($49304331,$49304330,$6876616C,$49303852,$49303835,$49303832,0)
call Bve($49304333,$49304332,$77737764,$4930384E,$49303836,$49303841,0)
call Bve($49304334,$49304335,$77687764,$4930384D,$49303935,0,0)
call Bve($49304336,$49304337,$49304154,$49303959,$49303543,$49304338,$6F66726F)
call Bve($49304339,$49304341,$49304156,$49303959,$49303542,$49304338,$6F66726F)
call Bve($49304342,$49304343,$49304152,$49303959,$49303544,$49304338,$6F66726F)
call Bve($49304347,$49304348,$49303836,$49303839,$4930384E,0,0)
call Bve($49304345,$49304349,$49303850,$49303841,$49303842,0,0)
call Bve($49304346,$4930434A,$4930384F,$49303837,$49303838,0,0)
call Bve($4930434E,$4930434F,$49304336,$4930434B,$49304352,$49304347,$49303939)
call Bve($4930434C,$49304350,$49304339,$4930434B,$49304352,$49304346,$49303941)
call Bve($4930434D,$49304351,$49304342,$4930434B,$49304352,$49304345,$49303942)
call Bve($49304358,$49304442,$726C6966,$49304231,$4930424D,$49303550,$49303554)
call Bve($70686C74,$6B796D6E,$77746C67,0,0,0,0)
set QG=CreateTrigger()
call TriggerRegisterTimerEventSingle(QG,.01)
call TriggerAddAction(QG,function Bvh)
set QG=null
set QG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(QG,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(QG,function Bvg)
set QG=null
set QG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(QG,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(QG,function Bvc)
set QG=null
endfunction
function Bvj takes nothing returns nothing
call DisableTrigger(Zp)
call DisableTrigger(Zq)
call ShowUnitShow(H8)
call CreateItemLoc($4930495A,GetRectCenter(Ce))
endfunction
function Bvk takes nothing returns nothing
set eW=CreateTrigger()
call DisableTrigger(eW)
call TriggerRegisterUnitEvent(eW,LC,EVENT_UNIT_DEATH)
call TriggerAddAction(eW,function Bvj)
endfunction
function Bvl takes nothing returns nothing
call DisableTrigger(Zp)
call DisableTrigger(Zq)
call ShowUnitShow(H9)
call CreateItemLoc($4930495A,GetRectCenter(Ce))
endfunction
function Bvm takes nothing returns nothing
set eX=CreateTrigger()
call DisableTrigger(eX)
call TriggerRegisterUnitEvent(eX,LC,EVENT_UNIT_DEATH)
call TriggerAddAction(eX,function Bvl)
endfunction
function Bvn takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bvo takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=35
endfunction
function Bvp takes nothing returns boolean
return GetBooleanAnd(Bvn(),Bvo())
endfunction
function Bvq takes nothing returns nothing
local integer Me
local integer Np
set ST=GetUnitsInRectMatching(GetWorldBounds(),Condition(function Bvp))
if CountUnitsInGroup(ST)>=2 then
call DisableTrigger(Zp)
call DisableTrigger(Zq)
call DisableTrigger(eG)
call ShowUnitShow(IJ)
set Me=1
loop
set Np=GetRandomInt(1,13)
if Np==1 then
call AddItemToStock(IJ,$49304555,1,1)
elseif Np==2 then
call AddItemToStock(IJ,$49304556,1,1)
elseif Np==3 then
call AddItemToStock(IJ,$49304557,1,1)
elseif Np==4 then
call AddItemToStock(IJ,$49304632,1,1)
elseif Np==5 then
call AddItemToStock(IJ,$49304558,1,1)
elseif Np==6 then
call AddItemToStock(IJ,$49304559,1,1)
elseif Np==7 then
call AddItemToStock(IJ,$49304631,1,1)
elseif Np==8 then
call AddItemToStock(IJ,$4930455A,1,1)
elseif Np==9 then
call AddItemToStock(IJ,$49304630,1,1)
elseif Np==10 then
call AddItemToStock(IJ,$49313156,1,1)
endif
set Me=Me+1
exitwhen Me>MM
endloop
if GetRandomInt(1,100)<=MM*4 then
call na(GetTriggerUnit(),"Удача! Вам выпал курьер!",.035,255,0,255)
call CreateItem($73707265,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
else
call RemoveUnit(MV[0])
call RemoveUnit(MV[1])
call RemoveUnit(MV[2])
call RemoveUnit(MV[3])
call RemoveUnit(MV[4])
call RemoveUnit(MV[5])
endif
endfunction
function Bvr takes nothing returns nothing
set eH=CreateTrigger()
call DisableTrigger(eH)
call TriggerRegisterUnitEvent(eH,LC,EVENT_UNIT_DEATH)
call TriggerAddAction(eH,function Bvq)
endfunction
function Bvs takes nothing returns boolean
return GetItemTypeId(GetFilterItem())!=$49303958
endfunction
function Bvt takes nothing returns nothing
call SetItemPositionLoc(GetEnumItem(),GetRectCenter(Bl))
endfunction
function Bvu takes nothing returns nothing
set YU[90]=GetUnitLoc(GetTriggerUnit())
call DisableTrigger(eP)
call DisableTrigger(eS)
call ShowUnitShow(IC)
call CreateItemLoc($49303958,YU[90])
call CreateItemLoc($49304A30,YU[90])
call DisableTrigger(hQ)
call DisableTrigger(eQ)
call DisableTrigger(eR)
call RemoveLocation(YU[90])
call EnumItemsInRect(Dj,Condition(function Bvs),function Bvt)
endfunction
function Bvv takes nothing returns nothing
set eO=CreateTrigger()
call DisableTrigger(eO)
call TriggerRegisterUnitEvent(eO,LJ,EVENT_UNIT_DEATH)
call TriggerAddAction(eO,function Bvu)
endfunction
function Bvw takes nothing returns boolean
return GetItemTypeId(GetFilterItem())!=$49303958
endfunction
function Bvx takes nothing returns nothing
call SetItemPositionLoc(GetEnumItem(),GetRectCenter(Bl))
endfunction
function Bvy takes nothing returns nothing
set YU[90]=GetUnitLoc(GetTriggerUnit())
call DisableTrigger(eP)
call DisableTrigger(eS)
call ShowUnitShow(ID)
call CreateItemLoc($49303958,YU[90])
call CreateItemLoc($49304A30,YU[90])
call DisableTrigger(eU)
call DisableTrigger(eV)
call RemoveLocation(YU[90])
call EnumItemsInRect(Dj,Condition(function Bvw),function Bvx)
endfunction
function Bvz takes nothing returns nothing
set eT=CreateTrigger()
call DisableTrigger(eT)
call TriggerRegisterUnitEvent(eT,LJ,EVENT_UNIT_DEATH)
call TriggerAddAction(eT,function Bvy)
endfunction
function Bv0 takes nothing returns boolean
return GetItemTypeId(GetFilterItem())!=$49303958
endfunction
function Bv1 takes nothing returns nothing
call SetItemPositionLoc(GetEnumItem(),GetRectCenter(Bl))
endfunction
function Bv2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bv3 takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=35
endfunction
function Bv4 takes nothing returns boolean
return GetBooleanAnd(Bv2(),Bv3())
endfunction
function Bv5 takes nothing returns nothing
local integer Me
local integer Np
call EnumItemsInRect(Dj,Condition(function Bv0),function Bv1)
set ST=GetUnitsInRectMatching(GetWorldBounds(),Condition(function Bv4))
if CountUnitsInGroup(ST)>=2 then
call DisableTrigger(eP)
call DisableTrigger(eS)
call DisableTrigger(eE)
set YU[90]=GetRandomLocInRect(Dj)
call CreateItemLoc($49303958,YU[90])
call CreateItemLoc($49304A30,YU[90])
call RemoveLocation(YU[90])
call DisableTrigger(eU)
call DisableTrigger(eV)
call ShowUnitShow(IK)
set Me=1
loop
set Np=GetRandomInt(1,13)
if Np==1 then
call AddItemToStock(IK,$49304643,1,1)
elseif Np==2 then
call AddItemToStock(IK,$49304644,1,1)
elseif Np==3 then
call AddItemToStock(IK,$49304645,1,1)
elseif Np==4 then
call AddItemToStock(IK,$49304646,1,1)
elseif Np==5 then
call AddItemToStock(IK,$49304647,1,1)
elseif Np==6 then
call AddItemToStock(IK,$49304648,1,1)
elseif Np==7 then
call AddItemToStock(IK,$49304649,1,1)
elseif Np==8 then
call AddItemToStock(IK,$4930464A,1,1)
elseif Np==9 then
call AddItemToStock(IK,$4930464B,1,1)
elseif Np==10 then
call AddItemToStock(IK,$49313153,1,1)
endif
set Me=Me+1
exitwhen Me>MM
endloop
if GetRandomInt(1,100)<=MM*4 then
call na(GetTriggerUnit(),"Удача! Вам выпал курьер!",.035,255,0,255)
call CreateItem($6D6E7366,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
else
call RemoveUnit(MV[0])
call RemoveUnit(MV[1])
call RemoveUnit(MV[2])
call RemoveUnit(MV[3])
call RemoveUnit(MV[4])
call RemoveUnit(MV[5])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00ff0000ЧИТЕРЫ!!!!!")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00ff0000ЧИТЕРЫ!!!!!")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00ff0000ЧИТЕРЫ!!!!!")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00ff0000ЧИТЕРЫ!!!!!")
endif
endfunction
function Bv6 takes nothing returns nothing
set eF=CreateTrigger()
call DisableTrigger(eF)
call TriggerRegisterUnitEvent(eF,LJ,EVENT_UNIT_DEATH)
call TriggerAddAction(eF,function Bv5)
endfunction
function Bv7 takes nothing returns nothing
call CreateUnit(Player(8),$6E303336,14060.,-23740.,270.)
call DisableTrigger(eK)
call DisableTrigger(eM)
call CreateItemLoc($49304A30,GetRectCenter(Ch))
endfunction
function Bv8 takes nothing returns nothing
set eL=CreateTrigger()
call DisableTrigger(eL)
call TriggerRegisterUnitEvent(eL,LS,EVENT_UNIT_DEATH)
call TriggerAddAction(eL,function Bv7)
endfunction
function Bv9 takes nothing returns nothing
call CreateUnit(Player(8),$6E303337,14060.,-23740.,270.)
call DisableTrigger(eM)
call DisableTrigger(eK)
call CreateItemLoc($49304A30,GetRectCenter(Ch))
endfunction
function BwB takes nothing returns nothing
set eN=CreateTrigger()
call DisableTrigger(eN)
call TriggerRegisterUnitEvent(eN,LS,EVENT_UNIT_DEATH)
call TriggerAddAction(eN,function Bv9)
endfunction
function BwC takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BwD takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=35
endfunction
function BwE takes nothing returns boolean
return GetBooleanAnd(BwC(),BwD())
endfunction
function BwF takes nothing returns nothing
local unit Me
local integer Np
local integer Nq
set ST=GetUnitsInRectMatching(GetWorldBounds(),Condition(function BwE))
if CountUnitsInGroup(ST)>=2 then
call DisableTrigger(eM)
call DisableTrigger(eK)
call DisableTrigger(eC)
call CreateItemLoc($49304A30,GetRectCenter(Ch))
set Me=CreateUnit(Player(8),$6E30365A,14060.,-23740.,270.)
set Np=1
loop
set Nq=GetRandomInt(1,13)
if Nq==1 then
call AddItemToStock(Me,$49304659,1,1)
elseif Nq==2 then
call AddItemToStock(Me,$4930465A,1,1)
elseif Nq==3 then
call AddItemToStock(Me,$49304730,1,1)
elseif Nq==4 then
call AddItemToStock(Me,$49304731,1,1)
elseif Nq==5 then
call AddItemToStock(Me,$49304732,1,1)
elseif Nq==6 then
call AddItemToStock(Me,$49304733,1,1)
elseif Nq==7 then
call AddItemToStock(Me,$49304734,1,1)
elseif Nq==8 then
call AddItemToStock(Me,$49304735,1,1)
elseif Nq==9 then
call AddItemToStock(Me,$49304736,1,1)
elseif Nq==10 then
call AddItemToStock(Me,$49313155,1,1)
endif
set Np=Np+1
exitwhen Np>MM
endloop
set Me=null
if GetRandomInt(1,100)<=MM*4 then
call na(GetTriggerUnit(),"Удача! Вам выпал курьер!",.035,255,0,255)
call CreateItem($61786173,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
else
call RemoveUnit(MV[0])
call RemoveUnit(MV[1])
call RemoveUnit(MV[2])
call RemoveUnit(MV[3])
call RemoveUnit(MV[4])
call RemoveUnit(MV[5])
endif
endfunction
function BwG takes nothing returns nothing
set eD=CreateTrigger()
call DisableTrigger(eD)
call TriggerRegisterUnitEvent(eD,LS,EVENT_UNIT_DEATH)
call TriggerAddAction(eD,function BwF)
endfunction
function BwH takes nothing returns nothing
call RemoveUnit(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354D,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(D6),bj_UNIT_FACING)
call DisableTrigger(d9)
call CreateItemLoc($49304A30,GetRectCenter(Ch))
endfunction
function BwI takes nothing returns nothing
set eB=CreateTrigger()
call DisableTrigger(eB)
call TriggerRegisterUnitEvent(eB,L0,EVENT_UNIT_DEATH)
call TriggerAddAction(eB,function BwH)
endfunction
function BwJ takes nothing returns nothing
local integer MC
local location Hv=GetRectCenter(D6)
local unit NR=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303837,Hv,0)
local integer hR=0
call RemoveLocation(Hv)
set Hv=null
loop
set MC=GetRandomInt(1,13)
if MC==1 then
call AddItemToStock(NR,$49305535,1,1)
elseif MC==2 then
call AddItemToStock(NR,$49305533,1,1)
elseif MC==3 then
call AddItemToStock(NR,$49305539,1,1)
elseif MC==4 then
call AddItemToStock(NR,$49305537,1,1)
elseif MC==5 then
call AddItemToStock(NR,$49305542,1,1)
elseif MC==6 then
call AddItemToStock(NR,$49305548,1,1)
elseif MC==7 then
call AddItemToStock(NR,$49305547,1,1)
elseif MC==8 then
call AddItemToStock(NR,$49305546,1,1)
elseif MC==9 then
call AddItemToStock(NR,$4931304F,1,1)
endif
set hR=hR+1
exitwhen hR>1+MM
endloop
set NR=null
if GetRandomInt(1,100)<=MM*4 then
call na(GetTriggerUnit(),"Удача! Вам выпал курьер!",.035,255,0,255)
call CreateItem($6667756E,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
call RemoveUnit(GetTriggerUnit())
call DisableTrigger(d4)
endfunction
function BwK takes nothing returns nothing
set d5=CreateTrigger()
call DisableTrigger(d5)
call TriggerRegisterUnitEvent(d5,L0,EVENT_UNIT_DEATH)
call TriggerAddAction(d5,function BwJ)
endfunction
function BwL takes nothing returns nothing
local unit hT=GetTriggerUnit()
local integer MC
local unit Me
local integer Np
if GetUnitTypeId(hT)==$6E303844 then
if d2[8]==1 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303847,18555,-23200,270)
call AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",18555,-24200)
set Me=null
set d2[8]=4
call EnableTrigger(cx)
elseif d2[8]==2 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303847,18555,-23200,270)
set Np=1
loop
set MC=GetRandomInt(1,13)
if MC==1 then
call AddItemToStock(Me,$49305944,1,1)
elseif MC==2 then
call AddItemToStock(Me,$49305950,1,1)
elseif MC==3 then
call AddItemToStock(Me,$49305A57,1,1)
elseif MC==4 then
call AddItemToStock(Me,$49305A5A,1,1)
elseif MC==5 then
call AddItemToStock(Me,$49305952,1,1)
elseif MC==6 then
call AddItemToStock(Me,$49305A58,1,1)
elseif MC==7 then
call AddItemToStock(Me,$49305937,1,1)
elseif MC==8 then
call AddItemToStock(Me,$49305945,1,1)
elseif MC==9 then
call AddItemToStock(Me,$4930594E,1,1)
endif
set Np=Np+1
exitwhen Np>MM
endloop
set Me=null
set d2[8]=4
call EnableTrigger(cx)
endif
endif
if GetUnitTypeId(hT)==$6E30304A then
if d2[1]==1 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303143,1317,-23728,90.)
set Me=null
endif
if d2[1]==2 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303144,1317,-23728,90.)
set Me=null
endif
if d2[1]==3 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303655,1317,-23728,90.)
set Np=1
loop
set MC=GetRandomInt(1,13)
if MC==1 then
call AddItemToStock(Me,$49304442,1,1)
elseif MC==2 then
call AddItemToStock(Me,$49304431,1,1)
elseif MC==3 then
call AddItemToStock(Me,$49304432,1,1)
elseif MC==4 then
call AddItemToStock(Me,$49304444,1,1)
elseif MC==5 then
call AddItemToStock(Me,$49304435,1,1)
elseif MC==6 then
call AddItemToStock(Me,$49304434,1,1)
elseif MC==7 then
call AddItemToStock(Me,$49304436,1,1)
elseif MC==8 then
call AddItemToStock(Me,$49304433,1,1)
elseif MC==9 then
call AddItemToStock(Me,$49304443,1,1)
elseif MC==10 then
call AddItemToStock(Me,$49313154,1,1)
endif
set Np=Np+1
exitwhen Np>MM
endloop
set Me=null
endif
call CreateItem($49303731,1517,-23728)
call CreateItem($49303731,1517,-23728)
call CreateItem($49303731,1517,-23728)
call CreateItem($49304839,1517,-23728)
set d2[1]=5
endif
if GetUnitTypeId(hT)==$6E30304F then
if d2[2]==1 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303145,3598,-22487,90.)
set Me=null
endif
if d2[2]==2 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303146,3598,-22487,90.)
set Me=null
endif
if d2[2]==3 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303656,3598,-22487,90.)
set Np=1
loop
set MC=GetRandomInt(1,13)
if MC==1 then
call AddItemToStock(Me,$49304445,1,1)
elseif MC==2 then
call AddItemToStock(Me,$49304447,1,1)
elseif MC==3 then
call AddItemToStock(Me,$49304449,1,1)
elseif MC==4 then
call AddItemToStock(Me,$4930444B,1,1)
elseif MC==5 then
call AddItemToStock(Me,$4930444D,1,1)
elseif MC==6 then
call AddItemToStock(Me,$4930444F,1,1)
elseif MC==7 then
call AddItemToStock(Me,$49304451,1,1)
elseif MC==8 then
call AddItemToStock(Me,$49304453,1,1)
elseif MC==9 then
call AddItemToStock(Me,$49304455,1,1)
elseif MC==10 then
call AddItemToStock(Me,$49313152,1,1)
endif
set Np=Np+1
exitwhen Np>MM
endloop
set Me=null
endif
call CreateItem($49303732,3698,-22487)
call CreateItem($49303732,3698,-22487)
call CreateItem($49303732,3698,-22487)
call CreateItem($49304959,3698,-22487)
call KillDestructable(HK)
call KillDestructable(HL)
set d2[2]=5
endif
if GetUnitTypeId(hT)==$6E303052 then
if d2[3]==1 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303147,6402,-23600,90.)
set Me=null
endif
if d2[3]==2 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303148,6402,-23600,90.)
set Me=null
endif
if d2[3]==3 then
set Me=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303657,6402,-23600,90.)
set Np=1
loop
set MC=GetRandomInt(1,13)
if MC==1 then
call AddItemToStock(Me,$49304457,1,1)
elseif MC==2 then
call AddItemToStock(Me,$49304459,1,1)
elseif MC==3 then
call AddItemToStock(Me,$49304530,1,1)
elseif MC==4 then
call AddItemToStock(Me,$49304532,1,1)
elseif MC==5 then
call AddItemToStock(Me,$49304534,1,1)
elseif MC==6 then
call AddItemToStock(Me,$49304536,1,1)
elseif MC==7 then
call AddItemToStock(Me,$49304538,1,1)
elseif MC==8 then
call AddItemToStock(Me,$49304541,1,1)
elseif MC==9 then
call AddItemToStock(Me,$49304543,1,1)
elseif MC==10 then
call AddItemToStock(Me,$49313157,1,1)
endif
set Np=Np+1
exitwhen Np>MM
endloop
set Me=null
endif
call CreateItem($49303747,6302,-23600)
call CreateItem($49303747,6322,-23600)
call CreateItem($49303747,6342,-23600)
call CreateItem($4930495A,6302,-23600)
set d2[3]=5
endif
set hT=null
endfunction
function BwM takes nothing returns nothing
local trigger hS=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hS,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(hS,function BwL)
set hS=null
endfunction
function BwN takes nothing returns nothing
local unit gz=GetTriggerUnit()
local item Me
if nH(gz,$49305051) and nH(gz,$49305052) and nH(gz,$4930504F) then
call RemoveItem(nI(gz,$49305051))
call RemoveItem(nI(gz,$49305052))
call RemoveItem(nI(gz,$4930504F))
set Me=nJ($72756D70,gz)
call SetItemUserData(Me,GetPlayerId(GetOwningPlayer(gz))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",gz,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",gz,"chest"))
set Me=null
endif
set gz=null
endfunction
function BwO takes nothing returns nothing
set hU=CreateTrigger()
call TriggerRegisterEnterRectSimple(hU,Gw)
call TriggerAddAction(hU,function BwN)
endfunction
function BwP takes nothing returns nothing
local unit X0=GetEnumUnit()
call RemoveUnit(X0)
set X0=null
endfunction
function BwQ takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())!=$68303141 then
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
return true
endif
endif
return false
endfunction
function BwR takes nothing returns nothing
local integer Me
local group Np
local boolexpr Nq
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
if GetUnitLevel(GetEnteringUnit())>=32 then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FK)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call SetUnitLifePercentBJ(LE,100)
call SetUnitOwner(LE,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LE,true)
call SetUnitPosition(LE,-5180,15700)
call SaveInteger(NZ,GetHandleId(LE),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LE),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
set Np=CreateGroup()
set Nq=Condition(function BwQ)
call GroupEnumUnitsInRect(Np,Gu,Nq)
call DestroyBoolExpr(Nq)
call ForGroup(Np,function BwP)
call DestroyGroup(Np)
set Nq=null
set Np=null
else
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(BW))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),GetRectCenter(BW),0.)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c00ff0000Вход с 32 уровня!")
endif
endif
endfunction
function BwS takes nothing returns nothing
set hV=CreateTrigger()
call TriggerRegisterEnterRectSimple(hV,Gu)
call TriggerAddAction(hV,function BwR)
endfunction
function BwT takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68646573) then
return false
endif
return true
endfunction
function BwU takes nothing returns boolean
if not (RectContainsUnit(GM,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BwV takes nothing returns boolean
if not (RectContainsUnit(GN,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BwW takes nothing returns nothing
if BwU() then
call SetUnitPositionLoc(GetEnteringUnit(),Location(15007.,6452.))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Location(15007.,6452.),0)
else
endif
if BwV() then
call SetUnitPositionLoc(GetEnteringUnit(),Location(5265.,4000.))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Location(5265.,4000.),0)
else
endif
endfunction
function BwX takes nothing returns nothing
set hW=CreateTrigger()
call TriggerRegisterEnterRectSimple(hW,GN)
call TriggerRegisterEnterRectSimple(hW,GM)
call TriggerAddCondition(hW,Condition(function BwT))
call TriggerAddAction(hW,function BwW)
endfunction
function BwY takes nothing returns boolean
if GetUnitTypeId(GetLeavingUnit())==$6E303246 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E303247 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E303245 then
return true
endif
return false
endfunction
function BwZ takes nothing returns boolean
if not BwY() then
return false
endif
return true
endfunction
function Bwa takes nothing returns boolean
if GetUnitTypeId(GetLeavingUnit())==$6E303244 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E303243 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E303242 then
return true
endif
return false
endfunction
function Bwb takes nothing returns boolean
if not Bwa() then
return false
endif
return true
endfunction
function Bwc takes nothing returns boolean
if GetUnitTypeId(GetLeavingUnit())==$65303038 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$65303039 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$65303041 then
return true
endif
return false
endfunction
function Bwd takes nothing returns boolean
if not Bwc() then
return false
endif
return true
endfunction
function Bwe takes nothing returns boolean
if GetUnitTypeId(GetLeavingUnit())==$6E30354F then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E30354E then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E303550 then
return true
endif
return false
endfunction
function Bwf takes nothing returns boolean
if not Bwe() then
return false
endif
return true
endfunction
function Bwg takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E687963) then
return false
endif
return true
endfunction
function Bwh takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303230) then
return false
endif
return true
endfunction
function Bwi takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303334) then
return false
endif
return true
endfunction
function Bwj takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303537) then
return false
endif
return true
endfunction
function Bwk takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303052) then
return false
endif
return true
endfunction
function Bwl takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303250) then
return false
endif
return true
endfunction
function Bwm takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303231) then
return false
endif
return true
endfunction
function Bwn takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303252) then
return false
endif
return true
endfunction
function Bwo takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303141) then
return false
endif
return true
endfunction
function Bwp takes nothing returns nothing
local integer Me
if BwZ() then
call SetUnitPositionLoc(GetLeavingUnit(),GetRectCenter(Bp))
call SetUnitLifePercentBJ(GetLeavingUnit(),100)
else
endif
if Bwb() then
call SetUnitPositionLoc(GetLeavingUnit(),GetRectCenter(Bo))
call SetUnitLifePercentBJ(GetLeavingUnit(),100)
else
endif
if Bwd() then
call SetUnitPositionLoc(GetLeavingUnit(),GetRectCenter(Bn))
call SetUnitLifePercentBJ(GetLeavingUnit(),100)
else
endif
if Bwf() then
call SetUnitPositionLoc(GetLeavingUnit(),GetRectCenter(EE))
call SetUnitLifePercentBJ(GetLeavingUnit(),100)
else
endif
if Bwg() then
set V2=GetRectCenter(GL)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call SetUnitAbilityLevelSwapped($4131394B,GetTriggerUnit(),1)
call SetUnitAbilityLevelSwapped($4131394F,GetTriggerUnit(),1)
call RemoveLocation(V2)
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
endif
if Bwh() then
set V2=GetRectCenter(CX)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V2)
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
endif
if Bwi() then
set V2=GetRectCenter(EY)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V2)
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
endif
if Bwj() then
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(D2))
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
endif
if Bwk() then
set V2=GetRectCenter(Fe)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V2)
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
endif
if Bwl() then
set V2=GetRectCenter(Fm)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V2)
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
endif
if Bwm() then
set V2=GetRectCenter(CY)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V2)
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
endif
if Bwn() then
set V2=Location(5870.,-7620.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V2)
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
endif
if Bwo() then
set V2=Location(-5200.,15700.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V2)
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(GetTriggerUnit()),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
endif
endfunction
function Bwq takes nothing returns nothing
set hX=CreateTrigger()
call TriggerRegisterLeaveRectSimple(hX,CY)
call TriggerRegisterLeaveRectSimple(hX,Fm)
call TriggerRegisterLeaveRectSimple(hX,Fe)
call TriggerRegisterLeaveRectSimple(hX,D2)
call TriggerRegisterLeaveRectSimple(hX,EY)
call TriggerRegisterLeaveRectSimple(hX,CX)
call TriggerRegisterLeaveRectSimple(hX,GL)
call TriggerRegisterLeaveRectSimple(hX,Bq)
call TriggerRegisterLeaveRectSimple(hX,Bt)
call TriggerRegisterLeaveRectSimple(hX,EF)
call TriggerRegisterLeaveRectSimple(hX,j)
call TriggerRegisterLeaveRectSimple(hX,CN)
call TriggerRegisterLeaveRectSimple(hX,Gu)
call TriggerAddAction(hX,function Bwp)
endfunction
function Bwr takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B5A))==true) then
return false
endif
return true
endfunction
function Bws takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B5A))
call EnableTrigger(U3)
call AddSpecialEffectLocBJ(GetRectCenter(FU),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call SetUnitInvulnerable(Lt,false)
endfunction
function Bwt takes nothing returns nothing
set hY=CreateTrigger()
call TriggerRegisterEnterRectSimple(hY,FU)
call TriggerAddCondition(hY,Condition(function Bwr))
call TriggerAddAction(hY,function Bws)
endfunction
function Bwu takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bwv takes nothing returns nothing
local location dw=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),dw)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),dw,0.)
call RemoveLocation(dw)
set dw=null
endfunction
function Bww takes nothing returns nothing
set hZ=CreateTrigger()
call TriggerRegisterEnterRectSimple(hZ,Ev)
call TriggerAddCondition(hZ,Condition(function Bwu))
call TriggerAddAction(hZ,function Bwv)
endfunction
function Bwx takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bwy takes nothing returns nothing
set V1=Location(4820.,14110.)
call SetUnitPositionLoc(GetTriggerUnit(),V1)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V1,0.)
call RemoveLocation(V1)
endfunction
function Bwz takes nothing returns nothing
set ha=CreateTrigger()
call TriggerRegisterEnterRectSimple(ha,Eu)
call TriggerAddCondition(ha,Condition(function Bwx))
call TriggerAddAction(ha,function Bwy)
endfunction
function Bw0 takes nothing returns boolean
if not (RectContainsUnit(GL,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bw1 takes nothing returns boolean
if not (RectContainsUnit(EY,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bw2 takes nothing returns boolean
if not (RectContainsUnit(Fm,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bw3 takes nothing returns boolean
if not (RectContainsUnit(CY,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bw4 takes nothing returns boolean
if not (RectContainsUnit(CX,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bw5 takes nothing returns boolean
if not (RectContainsUnit(CM,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bw6 takes nothing returns boolean
if not (RectContainsUnit(Gq,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bw7 takes nothing returns boolean
if not (RectContainsUnit(Gz,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bw8 takes nothing returns boolean
if not (RectContainsUnit(D2,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bw9 takes nothing returns boolean
if not (RectContainsUnit(EJ,GetTriggerUnit())==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304C30))==true) then
return false
endif
return true
endfunction
function BxB takes nothing returns boolean
if not (RectContainsUnit(EI,GetTriggerUnit())==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304C31))==true) then
return false
endif
return true
endfunction
function BxC takes nothing returns nothing
local integer Me
if Bw0() then
call SetUnitLifePercentBJ(K8,100)
call SaveInteger(NZ,GetHandleId(K8),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(K8),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
endif
if Bw1() then
call SetUnitLifePercentBJ(Kw,100)
call SaveInteger(NZ,GetHandleId(Kw),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(Kw),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
endif
if Bw2() then
call SetUnitLifePercentBJ(LM,100)
call SaveInteger(NZ,GetHandleId(LM),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LM),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
endif
if Bw3() then
call SetUnitLifePercentBJ(K6,100)
call SetUnitLifePercentBJ(Vf[3],100)
call SaveInteger(NZ,GetHandleId(K6),1,0)
call SaveInteger(NZ,GetHandleId(Vf[3]),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(K6),2+Me,0)
call SaveInteger(NZ,GetHandleId(Vf[3]),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
endif
if Bw4() then
call SetUnitLifePercentBJ(LI,100)
call SaveInteger(NZ,GetHandleId(LI),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LI),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
endif
if Bw5() then
call SetUnitLifePercentBJ(LF,100)
call SaveInteger(NZ,GetHandleId(LF),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LF),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
endif
if Bw6() then
set YU[110]=GetRectCenter(Cf)
call SetUnitPositionLoc(GetTriggerUnit(),YU[110])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[110],0.)
call SetUnitLifePercentBJ(LU,100)
call RemoveLocation(YU[110])
call SaveInteger(NZ,GetHandleId(LU),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LU),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
endif
if Bw7() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call SetUnitOwner(LB,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LB,true)
call SetUnitLifePercentBJ(LB,100)
call SaveInteger(NZ,GetHandleId(LB),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LB),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
endif
if Bw8() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call SetUnitOwner(L6,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L6,true)
call SetUnitLifePercentBJ(L6,100)
call SaveInteger(NZ,GetHandleId(L6),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(L6),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
endif
if Bw9() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304C30))
call SetUnitInvulnerable(Lq,false)
call EnableTrigger(U4)
call AddSpecialEffectLocBJ(GetRectCenter(EJ),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
endif
if BxB() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304C31))
call SetUnitInvulnerable(Lu,false)
call EnableTrigger(U2)
call AddSpecialEffectLocBJ(GetRectCenter(EI),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
endif
endfunction
function BxD takes nothing returns nothing
set hb=CreateTrigger()
call TriggerRegisterEnterRectSimple(hb,EI)
call TriggerRegisterEnterRectSimple(hb,EJ)
call TriggerRegisterEnterRectSimple(hb,Gq)
call TriggerRegisterEnterRectSimple(hb,CM)
call TriggerRegisterEnterRectSimple(hb,CX)
call TriggerRegisterEnterRectSimple(hb,CY)
call TriggerRegisterEnterRectSimple(hb,Fm)
call TriggerRegisterEnterRectSimple(hb,EY)
call TriggerRegisterEnterRectSimple(hb,GL)
call TriggerAddAction(hb,function BxC)
endfunction
function BxE takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BxF takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303555
endfunction
function BxG takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BxH takes nothing returns boolean
return GetBooleanAnd(BxF(),BxG())
endfunction
function BxI takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BxJ takes nothing returns nothing
set ST=GetUnitsInRectMatching(Ey,Condition(function BxH))
call ForGroupBJ(ST,function BxI)
call DestroyGroup(ST)
set V2=Location(4246.,9210.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call RemoveLocation(V2)
call SetUnitLifePercentBJ(Lu,100)
set Te[0]=75
set Te[1]=80
set V2=GetRectCenter(Ey)
call SetUnitPositionLoc(Lu,V2)
call SetUnitOwner(Lu,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lu,true)
call RemoveLocation(V2)
endfunction
function BxK takes nothing returns nothing
set U2=CreateTrigger()
call DisableTrigger(U2)
call TriggerRegisterEnterRectSimple(U2,EI)
call TriggerAddCondition(U2,Condition(function BxE))
call TriggerAddAction(U2,function BxJ)
endfunction
function BxL takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BxM takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303553
endfunction
function BxN takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BxO takes nothing returns boolean
return GetBooleanAnd(BxM(),BxN())
endfunction
function BxP takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BxQ takes nothing returns nothing
set ST=GetUnitsInRectMatching(Ey,Condition(function BxO))
call ForGroupBJ(ST,function BxP)
call DestroyGroup(ST)
set V2=Location(6690.,9170.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call RemoveLocation(V2)
call SetUnitLifePercentBJ(Lq,100)
set Te[0]=75
set Te[2]=85
set Te[3]=80
set Te[4]=85
set V2=GetRectCenter(FH)
call SetUnitPositionLoc(Lq,V2)
call SetUnitOwner(Lq,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lq,true)
call RemoveLocation(V2)
endfunction
function BxR takes nothing returns nothing
set U4=CreateTrigger()
call DisableTrigger(U4)
call TriggerRegisterEnterRectSimple(U4,EJ)
call TriggerAddCondition(U4,Condition(function BxL))
call TriggerAddAction(U4,function BxQ)
endfunction
function BxS takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BxT takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303554
endfunction
function BxU takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BxV takes nothing returns boolean
return GetBooleanAnd(BxT(),BxU())
endfunction
function BxW takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BxX takes nothing returns nothing
set ST=GetUnitsInRectMatching(EK,Condition(function BxV))
call ForGroupBJ(ST,function BxW)
call DestroyGroup(ST)
set V2=Location(9500.,9070.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call RemoveLocation(V2)
call SetUnitLifePercentBJ(Lt,100)
set Te[0]=75
set V2=GetRectCenter(EK)
call SetUnitPositionLoc(Lt,V2)
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
call RemoveLocation(V2)
endfunction
function BxY takes nothing returns nothing
set U3=CreateTrigger()
call DisableTrigger(U3)
call TriggerRegisterEnterRectSimple(U3,FU)
call TriggerAddCondition(U3,Condition(function BxS))
call TriggerAddAction(U3,function BxX)
endfunction
function BxZ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxa takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=39) then
return false
endif
return true
endfunction
function Bxb takes nothing returns nothing
if Bxa() then
else
set YU[98]=GetRectCenter(CQ)
call SetUnitPositionLoc(GetEnteringUnit(),YU[98])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 39 уровень!|r")
call RemoveLocation(YU[98])
endif
endfunction
function Bxc takes nothing returns nothing
set hc=CreateTrigger()
call TriggerRegisterEnterRectSimple(hc,CT)
call TriggerAddCondition(hc,Condition(function BxZ))
call TriggerAddAction(hc,function Bxb)
endfunction
function Bxd takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxe takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=42) then
return false
endif
return true
endfunction
function Bxf takes nothing returns nothing
if Bxe() then
else
set YU[98]=GetRectCenter(CQ)
call SetUnitPositionLoc(GetEnteringUnit(),YU[98])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 42 уровень!|r")
call RemoveLocation(YU[98])
endif
endfunction
function Bxg takes nothing returns nothing
set hd=CreateTrigger()
call TriggerRegisterEnterRectSimple(hd,CU)
call TriggerAddCondition(hd,Condition(function Bxd))
call TriggerAddAction(hd,function Bxf)
endfunction
function Bxh takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxi takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=45) then
return false
endif
return true
endfunction
function Bxj takes nothing returns nothing
if Bxi() then
else
set YU[98]=GetRectCenter(CQ)
call SetUnitPositionLoc(GetEnteringUnit(),YU[98])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 45 уровень!|r")
call RemoveLocation(YU[98])
endif
endfunction
function Bxk takes nothing returns nothing
set he=CreateTrigger()
call TriggerRegisterEnterRectSimple(he,CS)
call TriggerAddCondition(he,Condition(function Bxh))
call TriggerAddAction(he,function Bxj)
endfunction
function Bxl takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxm takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=17) then
return false
endif
return true
endfunction
function Bxn takes nothing returns nothing
if Bxm() then
call CreateTextTagLocBJ("|c00FF9696~Терраса Творцов~",GetRectCenter(BM),0,10,100,100,100,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set YU[8]=GetRectCenter(BQ)
call SetUnitPositionLoc(GetEnteringUnit(),YU[8])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 17 уровень!|r")
call RemoveLocation(YU[8])
endif
endfunction
function Bxo takes nothing returns nothing
set hf=CreateTrigger()
call TriggerRegisterEnterRectSimple(hf,BM)
call TriggerAddCondition(hf,Condition(function Bxl))
call TriggerAddAction(hf,function Bxn)
endfunction
function Bxp takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxq takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=13) then
return false
endif
return true
endfunction
function Bxr takes nothing returns nothing
if Bxq() then
else
set YU[7]=GetRectCenter(BP)
call SetUnitPositionLoc(GetEnteringUnit(),YU[7])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 13 уровень!|r")
call RemoveLocation(YU[7])
endif
endfunction
function Bxs takes nothing returns nothing
set hg=CreateTrigger()
call TriggerRegisterEnterRectSimple(hg,BL)
call TriggerAddCondition(hg,Condition(function Bxp))
call TriggerAddAction(hg,function Bxr)
endfunction
function Bxt takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxu takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=22) then
return false
endif
return true
endfunction
function Bxv takes nothing returns nothing
if Bxu() then
else
set YU[9]=GetRectCenter(BR)
call SetUnitPositionLoc(GetEnteringUnit(),YU[9])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 22 уровень!|r")
call RemoveLocation(YU[9])
endif
endfunction
function Bxw takes nothing returns nothing
set hh=CreateTrigger()
call TriggerRegisterEnterRectSimple(hh,BN)
call TriggerAddCondition(hh,Condition(function Bxt))
call TriggerAddAction(hh,function Bxv)
endfunction
function Bxx takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxy takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6E30345A
endfunction
function Bxz takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bx0 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304655))==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function Bx1 takes nothing returns nothing
local integer Me
if Bx0() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Ну что ж, смотрите, сами захотели...")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Uv)
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FI)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set V2=GetRectCenter(DX)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call RemoveUnit(fP[0])
call PauseUnit(Lw,false)
call DisableTrigger(fQ)
call SetUnitLifePercentBJ(Lw,100)
call SetUnitOwner(Lw,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lw,true)
set ST=GetUnitsInRectMatching(DW,Condition(function Bxy))
call ForGroupBJ(ST,function Bxz)
call RemoveLocation(V2)
call DestroyGroup(ST)
set Tv[3]=70.
set Tv[4]=75.
set Tv[5]=85.
set Tv[6]=80.
call SaveInteger(NZ,GetHandleId(Lw),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(Lw),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000ff00Секреты тайные хранятся.
Не всем доступны, ой не всем.
Прийдется очень постараться
Что б всё проделать без проблем.
Возьмите вы частичку трупа,
Красивый ключик от замков.
И драгоценность, не попутав
Сложите вместе - путь готов.")
endif
endfunction
function Bx2 takes nothing returns nothing
set hi=CreateTrigger()
call TriggerRegisterEnterRectSimple(hi,DV)
call TriggerAddCondition(hi,Condition(function Bxx))
call TriggerAddAction(hi,function Bx1)
endfunction
function Bx3 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bx4 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6E30345A
endfunction
function Bx5 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bx6 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function Bx7 takes nothing returns nothing
local integer Me
if Bx6() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FI)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set V2=GetRectCenter(DX)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call RemoveUnit(fP[0])
call PauseUnit(Lw,false)
call DisableTrigger(fQ)
call SetUnitLifePercentBJ(Lw,100)
call SetUnitOwner(Lw,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lw,true)
set ST=GetUnitsInRectMatching(DW,Condition(function Bx4))
call ForGroupBJ(ST,function Bx5)
call RemoveLocation(V2)
call DestroyGroup(ST)
set Tv[3]=70.
set Tv[4]=75.
set Tv[5]=85.
set Tv[6]=80.
call SaveInteger(NZ,GetHandleId(Lw),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(Lw),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
else
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для входа требуется 45 уровень.")
endif
endfunction
function Bx8 takes nothing returns nothing
set Uv=CreateTrigger()
call DisableTrigger(Uv)
call TriggerRegisterEnterRectSimple(Uv,DV)
call TriggerAddCondition(Uv,Condition(function Bx3))
call TriggerAddAction(Uv,function Bx7)
endfunction
function Bx9 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetEnteringUnit())>=43) then
return false
endif
return true
endfunction
function ByB takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function ByC takes nothing returns nothing
local integer MC=0
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FK)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set YU[221]=GetRectCenter(DN)
call SetUnitPositionLoc(GetTriggerUnit(),YU[221])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[221],0.)
call SetUnitLifePercentBJ(Ln,100)
call SetUnitOwner(Ln,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ln,true)
set ST=GetUnitsOfTypeIdAll($68303255)
call ForGroupBJ(ST,function ByB)
call DestroyGroup(ST)
call RemoveLocation(YU[221])
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"Босс |c00ffff00Феникс Интеграла|r. |c0000ffffРезист к магии|r: "+(I2S(GetUnitAbilityLevel(Ln,$41313756)*3)+"%"))
call SaveInteger(NZ,GetHandleId(Ln),1,0)
loop
call SaveInteger(NZ,GetHandleId(Ln),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function ByD takes nothing returns nothing
set Uj=CreateTrigger()
call TriggerRegisterEnterRectSimple(Uj,DM)
call TriggerAddCondition(Uj,Condition(function Bx9))
call TriggerAddAction(Uj,function ByC)
endfunction
function ByE takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetEnteringUnit())>=38) then
return false
endif
return true
endfunction
function ByF takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function ByG takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303233
endfunction
function ByH takes nothing returns boolean
return GetBooleanAnd(ByF(),ByG())
endfunction
function ByI takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function ByJ takes nothing returns nothing
local integer MC=0
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set YU[142]=GetRectCenter(Cx)
call SetUnitPositionLoc(GetTriggerUnit(),YU[142])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[142],0.)
call SetUnitLifePercentBJ(LY,100)
call SetUnitOwner(LY,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LY,true)
set ST=GetUnitsInRectMatching(DL,Condition(function ByH))
call ForGroupBJ(ST,function ByI)
call DestroyGroup(ST)
call RemoveLocation(YU[142])
set fa[1]=93
set fa[2]=70
call SetUnitVertexColor(LY,255,255,255,255)
call UnitRemoveAbility(LY,$4131394B)
call UnitRemoveAbility(LY,$4131345A)
call UnitRemoveAbility(LY,$41305655)
call SaveInteger(NZ,GetHandleId(LY),1,0)
loop
call SaveInteger(NZ,GetHandleId(LY),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function ByK takes nothing returns nothing
set Ux=CreateTrigger()
call DisableTrigger(Ux)
call TriggerRegisterEnterRectSimple(Ux,Cw)
call TriggerAddCondition(Ux,Condition(function ByE))
call TriggerAddAction(Ux,function ByJ)
endfunction
function ByL takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930504E) then
return false
endif
return true
endfunction
function ByM takes nothing returns boolean
if not (SS==7) then
return false
endif
return true
endfunction
function ByN takes nothing returns nothing
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c00ff9696Секретных книг найдено: |r"+(I2S(SS)+"/7"))
if ByM() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff9696Теперь вы можете попасть в Древнюю библиотеку и сразиться с Хранительницей. Вход с 38 уровня!")
call EnableTrigger(Ux)
else
endif
endfunction
function ByO takes nothing returns nothing
set hj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hj,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(hj,Condition(function ByL))
call TriggerAddAction(hj,function ByN)
endfunction
function ByP takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetEnteringUnit())>=40) then
return false
endif
return true
endfunction
function ByQ takes nothing returns boolean
if GetUnitTypeId(GetEnumUnit())==$68303231 then
return true
endif
if GetUnitTypeId(GetEnumUnit())==$68303230 then
return true
endif
if GetUnitTypeId(GetEnumUnit())==$6830315A then
return true
endif
if GetUnitTypeId(GetEnumUnit())==$68303232 then
return true
endif
return false
endfunction
function ByR takes nothing returns boolean
if not ByQ() then
return false
endif
return true
endfunction
function ByS takes nothing returns nothing
if ByR() then
call RemoveUnit(GetEnumUnit())
else
endif
endfunction
function ByT takes nothing returns nothing
local integer MC=0
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set YU[124]=GetRectCenter(Cq)
call SetUnitPositionLoc(GetTriggerUnit(),YU[124])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[124],0.)
call SetUnitLifePercentBJ(LW,100)
call ShowUnitShow(LW)
call PauseUnit(LW,false)
call SetUnitOwner(LW,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LW,true)
set SR=0
call EnableTrigger(fb)
call ForGroupBJ(GetUnitsInRectAll(Cs),function ByS)
call RemoveLocation(YU[124])
call SaveInteger(NZ,GetHandleId(LW),1,0)
loop
call SaveInteger(NZ,GetHandleId(LW),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function ByU takes nothing returns nothing
set Uy=CreateTrigger()
call TriggerRegisterEnterRectSimple(Uy,Cr)
call TriggerAddCondition(Uy,Condition(function ByP))
call TriggerAddAction(Uy,function ByT)
endfunction
function ByV takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"Завалы разрушены!")
call KillDestructable(HJ)
call KillDestructable(HR)
call KillDestructable(HS)
call KillDestructable(HP)
call KillDestructable(HN)
call KillDestructable(HM)
call KillDestructable(HQ)
call KillDestructable(HO)
endfunction
function ByW takes nothing returns nothing
set hk=CreateTrigger()
call TriggerRegisterDeathEvent(hk,Hc)
call TriggerAddAction(hk,function ByV)
endfunction
function ByX takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303737))==true) then
return false
endif
return true
endfunction
function ByY takes nothing returns nothing
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303737))
call EnableTrigger(hm)
call DisplayTextToForce(GetPlayersAll(),"|c00ff00ffВы открыли проход к секретному боссу!!!")
endfunction
function ByZ takes nothing returns nothing
set hl=CreateTrigger()
call TriggerRegisterEnterRectSimple(hl,Cm)
call TriggerAddCondition(hl,Condition(function ByX))
call TriggerAddAction(hl,function ByY)
endfunction
function Bya takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Byb takes nothing returns nothing
local integer MC=0
call SetUnitLifePercentBJ(LT,100)
call SetUnitAbilityLevel(LT,$4130484C,1)
call SetUnitOwner(LT,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LT,true)
set YU[121]=GetRectCenter(Cn)
call SetUnitPositionLoc(GetTriggerUnit(),YU[121])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[121],0.)
call RemoveLocation(YU[121])
call SaveInteger(NZ,GetHandleId(LT),1,0)
loop
call SaveInteger(NZ,GetHandleId(LT),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function Byc takes nothing returns nothing
set hm=CreateTrigger()
call DisableTrigger(hm)
call TriggerRegisterEnterRectSimple(hm,Cm)
call TriggerAddCondition(hm,Condition(function Bya))
call TriggerAddAction(hm,function Byb)
endfunction
function Byd takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bye takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if Byd() then
set YU[122]=GetRandomLocInRect(Co)
set YU[123]=GetRectCenter(Cp)
call DisplayTextToForce(GetPlayersAll(),"|c006969ffА вот и я!")
call CreateNUnitsAtLoc(1,$6E303446,Player(PLAYER_NEUTRAL_AGGRESSIVE),YU[122],bj_UNIT_FACING)
call IssuePointOrderLoc(GetLastCreatedUnit(),"move",YU[123])
call RemoveLocation(YU[122])
call RemoveLocation(YU[123])
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Byf takes nothing returns nothing
set hn=CreateTrigger()
call TriggerRegisterUnitEvent(hn,LT,EVENT_UNIT_DAMAGED)
call TriggerAddAction(hn,function Bye)
endfunction
function Byg takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303446) then
return false
endif
return true
endfunction
function Byh takes nothing returns nothing
call RemoveUnit(GetTriggerUnit())
call IncUnitAbilityLevelSwapped($4130484C,LT)
call AddSpecialEffectTargetUnitBJ("overhead",LT,"Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function Byi takes nothing returns nothing
set ho=CreateTrigger()
call TriggerRegisterEnterRectSimple(ho,Cp)
call TriggerAddCondition(ho,Condition(function Byg))
call TriggerAddAction(ho,function Byh)
endfunction
function Byj takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Byk takes nothing returns nothing
local integer MC=0
call SetUnitPositionLoc(GetTriggerUnit(),Location(-15745.,9570.))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Location(-15745.,9570.),0.)
call SetUnitLifePercentBJ(Lj,100)
call SetUnitOwner(Lj,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lj,true)
call SetUnitLifePercentBJ(Vf[1],100)
call SetUnitOwner(Vf[1],Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Vf[1],true)
call SaveInteger(NZ,GetHandleId(Lj),1,0)
call SaveInteger(NZ,GetHandleId(Vf[1]),1,0)
loop
call SaveInteger(NZ,GetHandleId(Lj),2+MC,0)
call SaveInteger(NZ,GetHandleId(Vf[1]),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function Byl takes nothing returns nothing
set Vi=CreateTrigger()
call TriggerRegisterEnterRectSimple(Vi,Ck)
call TriggerAddCondition(Vi,Condition(function Byj))
call TriggerAddAction(Vi,function Byk)
endfunction
function Bym takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Byn takes nothing returns nothing
local integer MC=0
call SetUnitPositionLoc(GetTriggerUnit(),Location(-15745.,11440.))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Location(-15745.,11440.),0.)
call SetUnitLifePercentBJ(Lk,100)
call SetUnitOwner(Lk,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lk,true)
call SetUnitLifePercentBJ(Vf[2],100)
call SetUnitOwner(Vf[2],Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Vf[2],true)
call SaveInteger(NZ,GetHandleId(Lk),1,0)
call SaveInteger(NZ,GetHandleId(Vf[2]),1,0)
loop
call SaveInteger(NZ,GetHandleId(Lk),2+MC,0)
call SaveInteger(NZ,GetHandleId(Vf[2]),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function Byo takes nothing returns nothing
set Vj=CreateTrigger()
call TriggerRegisterEnterRectSimple(Vj,Cl)
call TriggerAddCondition(Vj,Condition(function Bym))
call TriggerAddAction(Vj,function Byn)
endfunction
function Byp takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Byq takes nothing returns nothing
set YU[111]=GetRectCenter(N)
call SetUnitPositionLoc(GetTriggerUnit(),YU[111])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[111],0.)
call RemoveLocation(YU[111])
endfunction
function Byr takes nothing returns nothing
set Ui=CreateTrigger()
call DisableTrigger(Ui)
call TriggerRegisterEnterRectSimple(Ui,Cg)
call TriggerAddCondition(Ui,Condition(function Byp))
call TriggerAddAction(Ui,function Byq)
endfunction
function Bys takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Byt takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00ff7f00Давно я ждал гостей. Тех, кто не испугается моего облика, кто будет со мной дружить... Я так одинок. Никто, никто не хочет со мной общаться!!! Разве я так много прошу? Давайте поиграем?|r")
call TriggerSleepAction(8.)
call ShowUnitShow(LD)
endfunction
function Byu takes nothing returns nothing
set hp=CreateTrigger()
call TriggerRegisterEnterRectSimple(hp,Ge)
call TriggerAddCondition(hp,Condition(function Bys))
call TriggerAddAction(hp,function Byt)
endfunction
function Byv takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Byw takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303130
endfunction
function Byx takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Byy takes nothing returns boolean
return GetBooleanAnd(Byw(),Byx())
endfunction
function Byz takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function By0 takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=28) then
return false
endif
return true
endfunction
function By1 takes nothing returns nothing
local integer Me
if By0() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,x)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set TP[0]=75
set TP[2]=85
set V2=GetRectCenter(Ce)
call SetUnitPositionLocFacingBJ(LC,V2,270.)
call SetUnitOwner(LC,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LC,true)
call RemoveLocation(V2)
set YU[92]=Location(8816.,-24071.)
call SetUnitPositionLoc(GetEnteringUnit(),YU[92])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YU[92],0)
call SetUnitLifePercentBJ(LC,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call ShowUnit(KI,false)
call ShowUnit(LC,true)
call EnableTrigger(f5)
call EnableTrigger(f3)
call SaveInteger(NZ,GetHandleId(LC),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LC),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
set ST=GetUnitsInRectMatching(x,Condition(function Byy))
call ForGroupBJ(ST,function Byz)
call DestroyGroup(ST)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 28 уровень!|r")
endif
call RemoveLocation(YU[92])
endfunction
function By2 takes nothing returns nothing
set Zp=CreateTrigger()
call DisableTrigger(Zp)
call TriggerRegisterEnterRectSimple(Zp,y)
call TriggerAddCondition(Zp,Condition(function Byv))
call TriggerAddAction(Zp,function By1)
endfunction
function By3 takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function By4 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303130
endfunction
function By5 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function By6 takes nothing returns boolean
return GetBooleanAnd(By4(),By5())
endfunction
function By7 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function By8 takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=28) then
return false
endif
return true
endfunction
function By9 takes nothing returns nothing
local integer Me
if By8() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,x)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set TP[0]=75
set TP[1]=90
set TP[2]=85
set V2=GetRectCenter(Ce)
call SetUnitPositionLocFacingBJ(LC,V2,270.)
call SetUnitOwner(LC,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LC,true)
call RemoveLocation(V2)
set YU[92]=Location(8816.,-24071.)
call SetUnitPositionLoc(GetEnteringUnit(),YU[92])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YU[92],0)
call SetUnitLifePercentBJ(LC,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call ShowUnit(KI,false)
call ShowUnit(LC,true)
call EnableTrigger(f5)
call EnableTrigger(f1)
call EnableTrigger(f2)
call EnableTrigger(f4)
call SaveInteger(NZ,GetHandleId(LC),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LC),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
set ST=GetUnitsInRectMatching(x,Condition(function By6))
call ForGroupBJ(ST,function By7)
call DestroyGroup(ST)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 28 уровень!|r")
endif
call RemoveLocation(YU[92])
endfunction
function BzB takes nothing returns nothing
set Zq=CreateTrigger()
call DisableTrigger(Zq)
call TriggerRegisterEnterRectSimple(Zq,y)
call TriggerAddCondition(Zq,Condition(function By3))
call TriggerAddAction(Zq,function By9)
endfunction
function BzC takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BzD takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BzE takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=43
endfunction
function BzF takes nothing returns boolean
return GetBooleanAnd(BzD(),BzE())
endfunction
function BzG takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303130
endfunction
function BzH takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BzI takes nothing returns boolean
return GetBooleanAnd(BzG(),BzH())
endfunction
function BzJ takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BzK takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=43) then
return false
endif
if not (GetPlayerState(GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)>=2700) then
return false
endif
return true
endfunction
function BzL takes nothing returns boolean
if not (CountUnitsInGroup(ST)>=4) then
return false
endif
return true
endfunction
function BzM takes nothing returns nothing
local integer Me
set ST=GetUnitsInRectMatching(GetWorldBounds(),Condition(function BzF))
if BzL() then
if BzK() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,x)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set TP[0]=75
set TP[1]=90
set TP[2]=82
set TP[3]=75
set TP[4]=85
set V2=GetRectCenter(Ce)
call SetUnitPositionLocFacingBJ(LC,V2,270.)
call SetUnitOwner(LC,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LC,true)
call RemoveLocation(V2)
set YU[92]=Location(8816.,-24071.)
call SetUnitPositionLoc(GetEnteringUnit(),YU[92])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YU[92],0)
call SetUnitLifePercentBJ(LC,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call PauseUnit(LC,false)
call SetUnitInvulnerable(LC,true)
call ShowUnit(KI,false)
call ShowUnit(LC,true)
call EnableTrigger(f5)
call EnableTrigger(f1)
call EnableTrigger(f2)
call EnableTrigger(f4)
call EnableTrigger(f7)
call EnableTrigger(f8)
call EnableTrigger(f9)
call EnableTrigger(gB)
call SaveInteger(NZ,GetHandleId(LC),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LC),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_ALWAYSHINT,"|c00ff0000ВНИМАНИЕ: если в момент смерти Босса в игре будет лишь один игрок, Вам засчитают поражение.")
set ST=GetUnitsInRectMatching(x,Condition(function BzI))
call ForGroupBJ(ST,function BzJ)
call DestroyGroup(ST)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 43 уровень и звание \"Капитан ТСоМ\"(2700 очков)!|r")
endif
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Слишком мало Героев выше 43 уровня!|r")
endif
call RemoveLocation(YU[92])
call DestroyGroup(ST)
endfunction
function BzN takes nothing returns nothing
set eG=CreateTrigger()
call DisableTrigger(eG)
call TriggerRegisterEnterRectSimple(eG,y)
call TriggerAddCondition(eG,Condition(function BzC))
call TriggerAddAction(eG,function BzM)
endfunction
function BzO takes nothing returns nothing
local unit X0=GetEnumUnit()
call RemoveUnit(X0)
set X0=null
endfunction
function BzP takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())!=$6E30304A then
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
return true
endif
endif
return false
endfunction
function BzQ takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Me
local integer Np
local group Nq
local boolexpr Ns
if IsUnitType(Hw,UNIT_TYPE_HERO)==true then
if GetUnitLevel(Hw)>=11 then
set Me=K3
call EnableTrigger(hr)
call UnitRemoveAbility(Me,$4131394B)
call UnitRemoveAbility(Me,$4131394A)
call SaveInteger(NZ,GetHandleId(Me),1,0)
set Np=0
loop
call SaveInteger(NZ,GetHandleId(Me),2+Np,0)
set Np=Np+1
exitwhen Np==7
endloop
if d2[1]==1 then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Gd)
call SetUnitFacing(Me,90.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
call SetUnitPosition(Me,1338,-23726)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(1338,-23051,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hw,1338,-23051)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Nq=CreateGroup()
set Ns=Condition(function BzP)
call GroupEnumUnitsInRect(Nq,Gd,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function BzO)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
endif
if d2[1]==2 then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Gd)
call SetUnitFacing(Me,90.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
call SetUnitPosition(Me,1338,-23726)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(1338,-23051,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hw,1338,-23051.)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Nq=CreateGroup()
set Ns=Condition(function BzP)
call GroupEnumUnitsInRect(Nq,Gd,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function BzO)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
endif
if d2[1]==3 then
if GetUnitLevel(Hw)>=35 then
if GetPlayerState(GetOwningPlayer(Hw),PLAYER_STATE_RESOURCE_LUMBER)>=0 then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Gd)
set TM[2]=99
call SetUnitVertexColor(Me,255,0,255,200)
call SetUnitFacing(Me,90.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
call SetUnitPosition(Me,1338,-23726)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(1338,-23051,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hw,1338,-23051.)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Nq=CreateGroup()
set Ns=Condition(function BzP)
call GroupEnumUnitsInRect(Nq,Gd,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function BzO)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
endif
endif
endif
set Me=null
endif
endif
set Hw=null
endfunction
function BzR takes nothing returns nothing
local trigger hq=CreateTrigger()
call TriggerRegisterEnterRectSimple(hq,GP)
call TriggerAddAction(hq,function BzQ)
set hq=null
endfunction
function BzS takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())!=$6E30304F then
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
return true
endif
endif
return false
endfunction
function BzT takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Me
local integer Np
local group Nq
local boolexpr Ns
if IsUnitType(Hw,UNIT_TYPE_HERO)==true then
if GetUnitLevel(Hw)>=14 then
set Me=Kx
call SaveInteger(NZ,GetHandleId(Me),1,0)
set Np=0
loop
call SaveInteger(NZ,GetHandleId(Me),2+Np,0)
set Np=Np+1
exitwhen Np==7
endloop
if d2[2]==1 then
set TN[0]=90
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,J)
call SetUnitPosition(Me,3598,-22487)
call SetUnitFacing(Me,90.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(3598,-21727,0)
endif
call SetUnitPosition(Hw,3598,-21727)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Nq=CreateGroup()
set Ns=Condition(function BzS)
call GroupEnumUnitsInRect(Nq,J,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function BzO)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
endif
if d2[2]==2 then
set TN[0]=90
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,J)
call SetUnitPosition(Me,3598,-22487)
call SetUnitFacing(Me,90.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(3598,-21727,0)
endif
call SetUnitPosition(Hw,3598,-21727)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Nq=CreateGroup()
set Ns=Condition(function BzS)
call GroupEnumUnitsInRect(Nq,J,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function BzO)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
endif
if d2[2]==3 then
if GetUnitLevel(Hw)>=38 then
if GetPlayerState(GetOwningPlayer(Hw),PLAYER_STATE_RESOURCE_LUMBER)>=0 then
set TN[0]=90
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,J)
call SetUnitPosition(Me,3598,-22487)
call SetUnitFacing(Me,90.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(3598,-21727,0)
endif
call SetUnitPosition(Hw,3598,-21727)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Nq=CreateGroup()
set Ns=Condition(function BzS)
call GroupEnumUnitsInRect(Nq,J,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function BzO)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
endif
endif
endif
set Me=null
endif
endif
set Hw=null
endfunction
function BzU takes nothing returns nothing
local trigger hs=CreateTrigger()
call TriggerRegisterEnterRectSimple(hs,b)
call TriggerAddAction(hs,function BzT)
set hs=null
endfunction
function BzV takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())!=$6E303052 then
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
return true
endif
endif
return false
endfunction
function BzW takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Me
local integer Np
local group Nq
local boolexpr Ns
if IsUnitType(Hw,UNIT_TYPE_HERO)==true then
if GetUnitLevel(Hw)>=22 then
set Me=K7
call SaveInteger(NZ,GetHandleId(Me),1,0)
set Np=0
loop
call SaveInteger(NZ,GetHandleId(Me),2+Np,0)
set Np=Np+1
exitwhen Np==7
endloop
if d2[3]==1 then
set TO[0]=90
set fi[1]=95
set fi[2]=90
call UnitRemoveAbility(K7,$41303736)
call UnitRemoveAbility(K7,$41436D33)
call EnableTrigger(hu)
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,BD)
call SetUnitPosition(Me,6402,-23633)
call SetUnitFacing(Me,90.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(6402,-23108,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hw,6402,-23108)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Nq=CreateGroup()
set Ns=Condition(function BzV)
call GroupEnumUnitsInRect(Nq,BD,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function BzO)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
endif
if d2[3]==2 then
set fi[1]=95
set fi[2]=90
call UnitRemoveAbility(K7,$41303736)
call UnitRemoveAbility(K7,$41436D33)
call EnableTrigger(hv)
call EnableTrigger(hu)
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,BD)
call SetUnitPosition(Me,6402,-23633)
call SetUnitFacing(Me,90.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(6402,-23108,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hw,6402,-23108)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Nq=CreateGroup()
set Ns=Condition(function BzV)
call GroupEnumUnitsInRect(Nq,BD,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function BzO)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
endif
if d2[3]==3 then
if GetUnitLevel(Hw)>=40 then
if GetPlayerState(GetOwningPlayer(Hw),PLAYER_STATE_RESOURCE_LUMBER)>=1900 then
set fi[1]=95
set fi[2]=90
call UnitRemoveAbility(K7,$41303736)
call UnitRemoveAbility(K7,$41436D33)
set TO[0]=90
call EnableTrigger(hv)
call EnableTrigger(hu)
call EnableTrigger(fn)
call EnableTrigger(fs)
call EnableTrigger(ft)
call EnableTrigger(fu)
call EnableTrigger(fr)
call EnableTrigger(fv)
call EnableTrigger(f0)
call EnableTrigger(fz)
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,BD)
call SetUnitPosition(Me,6402,-23633)
call SetUnitFacing(Me,90.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(6402,-23108,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hw,6402,-23108.)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Nq=CreateGroup()
set Ns=Condition(function BzV)
call GroupEnumUnitsInRect(Nq,BD,Ns)
call DestroyBoolExpr(Ns)
call ForGroup(Nq,function BzO)
call DestroyGroup(Nq)
set Ns=null
set Nq=null
endif
endif
endif
set Me=null
endif
endif
set Hw=null
endfunction
function BzX takes nothing returns nothing
local trigger ht=CreateTrigger()
call TriggerRegisterEnterRectSimple(ht,l)
call TriggerAddAction(ht,function BzW)
set ht=null
endfunction
function BzY takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BzZ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303232
endfunction
function Bza takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bzb takes nothing returns boolean
return GetBooleanAnd(BzZ(),Bza())
endfunction
function Bzc takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bzd takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=33) then
return false
endif
return true
endfunction
function Bze takes nothing returns nothing
local integer Me
if Bzd() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Dj)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set V2=GetRectCenter(Dj)
call SetUnitPositionLocFacingBJ(LJ,V2,270.)
call SetUnitOwner(LJ,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LJ,true)
call RemoveLocation(V2)
set YU[101]=Location(11520.,-24200.)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[101],0)
call RemoveUnit(Wi[17])
call RemoveUnit(Wi[18])
call SetUnitPositionLoc(GetEnteringUnit(),YU[101])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YU[101],0)
call SetUnitLifePercentBJ(LJ,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call EnableTrigger(gH)
call EnableTrigger(gJ)
call RemoveLocation(YU[101])
call SaveInteger(NZ,GetHandleId(LJ),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LJ),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
set ST=GetUnitsInRectMatching(Di,Condition(function Bzb))
call ForGroupBJ(ST,function Bzc)
call DestroyGroup(ST)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 33 уровень!|r")
endif
endfunction
function Bzf takes nothing returns nothing
set eP=CreateTrigger()
call DisableTrigger(eP)
call TriggerRegisterEnterRectSimple(eP,Bl)
call TriggerAddCondition(eP,Condition(function BzY))
call TriggerAddAction(eP,function Bze)
endfunction
function Bzg takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bzh takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303232
endfunction
function Bzi takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bzj takes nothing returns boolean
return GetBooleanAnd(Bzh(),Bzi())
endfunction
function Bzk takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bzl takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=33) then
return false
endif
return true
endfunction
function Bzm takes nothing returns nothing
local integer Me
if Bzl() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Dj)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set V2=GetRectCenter(Dj)
call SetUnitPositionLocFacingBJ(LJ,V2,270.)
call SetUnitOwner(LJ,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LJ,true)
call RemoveLocation(V2)
set YU[101]=Location(11520.,-24200.)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[101],0)
call RemoveUnit(Wi[17])
call RemoveUnit(Wi[18])
call SetUnitPositionLoc(GetEnteringUnit(),YU[101])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YU[101],0)
call SetUnitLifePercentBJ(LJ,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call EnableTrigger(gH)
call EnableTrigger(gJ)
call EnableTrigger(gI)
call EnableTrigger(gK)
call RemoveLocation(YU[101])
call RemoveLocation(YU[101])
call SaveInteger(NZ,GetHandleId(LJ),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LJ),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
set ST=GetUnitsInRectMatching(Di,Condition(function Bzj))
call ForGroupBJ(ST,function Bzk)
call DestroyGroup(ST)
else
call SetUnitPositionLoc(GetEnteringUnit(),GetRectCenter(Bm))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 33 уровень!|r")
endif
endfunction
function Bzn takes nothing returns nothing
set eS=CreateTrigger()
call DisableTrigger(eS)
call TriggerRegisterEnterRectSimple(eS,Bl)
call TriggerAddCondition(eS,Condition(function Bzg))
call TriggerAddAction(eS,function Bzm)
endfunction
function Bzo takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bzp takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bzq takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=46
endfunction
function Bzr takes nothing returns boolean
return GetBooleanAnd(Bzp(),Bzq())
endfunction
function Bzs takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303232
endfunction
function Bzt takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bzu takes nothing returns boolean
return GetBooleanAnd(Bzs(),Bzt())
endfunction
function Bzv takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bzw takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=46) then
return false
endif
if not (GetPlayerState(GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)>=3200) then
return false
endif
return true
endfunction
function Bzx takes nothing returns boolean
if not (CountUnitsInGroup(ST)>=4) then
return false
endif
return true
endfunction
function Bzy takes nothing returns nothing
local integer Me
set ST=GetUnitsInRectMatching(GetWorldBounds(),Condition(function Bzr))
if Bzx() then
if Bzw() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Dj)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set V2=GetRectCenter(Dj)
call SetUnitPositionLocFacingBJ(LJ,V2,270.)
call SetUnitOwner(LJ,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LJ,true)
call RemoveLocation(V2)
set YU[101]=Location(11520.,-24200.)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YU[101],0)
call RemoveUnit(Wi[17])
call RemoveUnit(Wi[18])
call SetUnitPositionLoc(GetEnteringUnit(),YU[101])
call SetUnitLifePercentBJ(LJ,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call EnableTrigger(gI)
call EnableTrigger(gK)
call EnableTrigger(hw)
set UR[0]=90
set UR[1]=95
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_ALWAYSHINT,"|c00ff0000ВНИМАНИЕ: если в момент смерти Босса в игре будет лишь один игрок, Вам засчитают поражение.")
call RemoveLocation(YU[101])
call RemoveLocation(YU[101])
call SaveInteger(NZ,GetHandleId(LJ),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LJ),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
set ST=GetUnitsInRectMatching(Di,Condition(function Bzu))
call ForGroupBJ(ST,function Bzv)
call DestroyGroup(ST)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 46 уровень и звание \"Мастер\"(3200 очков)!|r")
endif
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Слишком мало Героев выше 46 уровня!|r")
endif
call DestroyGroup(ST)
endfunction
function Bzz takes nothing returns nothing
set eE=CreateTrigger()
call DisableTrigger(eE)
call TriggerRegisterEnterRectSimple(eE,Bl)
call TriggerAddCondition(eE,Condition(function Bzo))
call TriggerAddAction(eE,function Bzy)
endfunction
function Bz0 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303331
endfunction
function Bz1 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bz2 takes nothing returns boolean
return GetBooleanAnd(Bz0(),Bz1())
endfunction
function Bz3 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bz4 takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=40) then
return false
endif
return true
endfunction
function Bz5 takes nothing returns nothing
local integer Me
if Bz4() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,B7)
set V2=Location(14080.,-23200.)
call SetUnitPositionLocFacingBJ(LS,V2,270.)
call SetUnitOwner(LS,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LS,true)
call RemoveLocation(V2)
set YU[89]=GetRectCenter(Ch)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[89],0)
call SetUnitPositionLoc(GetEnteringUnit(),YU[89])
set US[0]=70
call SetUnitLifePercentBJ(LS,100)
call RemoveLocation(YU[89])
call RemoveLocation(YU[101])
call SaveInteger(NZ,GetHandleId(LS),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LS),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
set ST=GetUnitsInRectMatching(B7,Condition(function Bz2))
call ForGroupBJ(ST,function Bz3)
call DestroyGroup(ST)
else
set YU[89]=GetRandomLocInRect(B9)
call SetUnitPositionLoc(GetEnteringUnit(),YU[89])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 40 уровень!|r")
call RemoveLocation(YU[89])
endif
endfunction
function Bz6 takes nothing returns nothing
set eK=CreateTrigger()
call DisableTrigger(eK)
call TriggerRegisterEnterRectSimple(eK,B8)
call TriggerAddAction(eK,function Bz5)
endfunction
function Bz7 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303331
endfunction
function Bz8 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bz9 takes nothing returns boolean
return GetBooleanAnd(Bz7(),Bz8())
endfunction
function B0B takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B0C takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=40) then
return false
endif
return true
endfunction
function B0D takes nothing returns nothing
local integer Me
if B0C() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,B7)
set V2=Location(14080.,-23200.)
call SetUnitPositionLocFacingBJ(LS,V2,270.)
set YU[89]=GetRectCenter(Ch)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[89],0)
call SetUnitPositionLoc(GetEnteringUnit(),YU[89])
call SetUnitOwner(LS,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LS,true)
set US[0]=70
set US[1]=80
call SetUnitLifePercentBJ(LS,100)
call RemoveLocation(YU[89])
call SaveInteger(NZ,GetHandleId(LS),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LS),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
set ST=GetUnitsInRectMatching(B7,Condition(function Bz9))
call ForGroupBJ(ST,function B0B)
call DestroyGroup(ST)
else
set YU[89]=GetRandomLocInRect(B9)
call SetUnitPositionLoc(GetEnteringUnit(),YU[89])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 40 уровень!|r")
call RemoveLocation(YU[89])
endif
endfunction
function B0E takes nothing returns nothing
set eM=CreateTrigger()
call DisableTrigger(eM)
call TriggerRegisterEnterRectSimple(eM,B8)
call TriggerAddAction(eM,function B0D)
endfunction
function B0F takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B0G takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B0H takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=50
endfunction
function B0I takes nothing returns boolean
return GetBooleanAnd(B0G(),B0H())
endfunction
function B0J takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303331
endfunction
function B0K takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B0L takes nothing returns boolean
return GetBooleanAnd(B0J(),B0K())
endfunction
function B0M takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B0N takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=50) then
return false
endif
if not (GetPlayerState(GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)>=4500) then
return false
endif
return true
endfunction
function B0O takes nothing returns boolean
if not (CountUnitsInGroup(ST)>=4) then
return false
endif
return true
endfunction
function B0P takes nothing returns nothing
local integer Me
set ST=GetUnitsInRectMatching(GetWorldBounds(),Condition(function B0I))
if B0O() then
if B0N() then
set V2=Location(14080.,-23200.)
call SetUnitPositionLocFacingBJ(LS,V2,270.)
set YU[89]=GetRectCenter(Ch)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[89],0)
call SetUnitPositionLoc(GetEnteringUnit(),YU[89])
call SetUnitOwner(LS,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LS,true)
set US[0]=70
set US[2]=80
set US[3]=90
set US[4]=74
call SetUnitLifePercentBJ(LS,100)
call DisableTrigger(hx)
call RemoveLocation(YU[89])
call SaveInteger(NZ,GetHandleId(LS),1,0)
set Me=0
loop
call SaveInteger(NZ,GetHandleId(LS),2+Me,0)
set Me=Me+1
exitwhen Me==7
endloop
set ST=GetUnitsInRectMatching(B7,Condition(function B0L))
call ForGroupBJ(ST,function B0M)
call DestroyGroup(ST)
else
set YU[89]=GetRandomLocInRect(B9)
call SetUnitPositionLoc(GetEnteringUnit(),YU[89])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 50 уровень и звание \"СверхМастер\"(4200 очков)!|r")
call RemoveLocation(YU[89])
endif
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Слишком мало Героев 50 уровня!|r")
endif
call DestroyGroup(ST)
endfunction
function B0Q takes nothing returns nothing
set eC=CreateTrigger()
call DisableTrigger(eC)
call TriggerRegisterEnterRectSimple(eC,B8)
call TriggerAddCondition(eC,Condition(function B0F))
call TriggerAddAction(eC,function B0P)
endfunction
function B0R takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=50) then
return false
endif
return true
endfunction
function B0S takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303547
endfunction
function B0T takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B0U takes nothing returns boolean
return GetBooleanAnd(B0S(),B0T())
endfunction
function B0V takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B0W takes nothing returns nothing
local integer MC=0
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set TU[1]=80
set TU[2]=72
set TU[3]=10
set TU[4]=95
set TU[5]=90
call ShowUnit(Js,false)
call SetUnitInvulnerable(Js,true)
set V2=GetRectCenter(D6)
call SetUnitPositionLocFacingBJ(L0,V2,270.)
call SetUnitOwner(L0,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L0,true)
call RemoveLocation(V2)
set YU[99]=GetRectCenter(Gs)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[99],0)
call SetUnitPositionLoc(GetEnteringUnit(),YU[99])
call RemoveLocation(YU[99])
call SetUnitLifePercentBJ(L0,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"Босс |c00ffff00Ассир|r. |c0000ffffРезист к магии|r: "+(I2S(GetUnitAbilityLevel(L0,$41313756)*3)+"%"))
call SaveInteger(NZ,GetHandleId(L0),1,0)
loop
call SaveInteger(NZ,GetHandleId(L0),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
set ST=GetUnitsInRectMatching(D6,Condition(function B0U))
call ForGroupBJ(ST,function B0V)
call DestroyGroup(ST)
endfunction
function B0X takes nothing returns nothing
set d9=CreateTrigger()
call DisableTrigger(d9)
call TriggerRegisterEnterRectSimple(d9,D4)
call TriggerAddCondition(d9,Condition(function B0R))
call TriggerAddAction(d9,function B0W)
endfunction
function B0Y takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=50) then
return false
endif
return true
endfunction
function B0Z takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303547
endfunction
function B0a takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B0b takes nothing returns boolean
return GetBooleanAnd(B0Z(),B0a())
endfunction
function B0c takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B0d takes nothing returns nothing
local integer MC=0
call EnableTrigger(d6)
call EnableTrigger(d7)
call EnableTrigger(d8)
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,D6)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set TU[1]=80
set TU[2]=75
set TU[3]=10
set TU[4]=95
set TU[5]=90
call ShowUnit(Js,false)
call SetUnitInvulnerable(Js,true)
set V2=GetRectCenter(D6)
call SetUnitPositionLocFacingBJ(L0,V2,270.)
call SetUnitOwner(L0,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L0,true)
call ShowUnit(L0,true)
call RemoveLocation(V2)
set YU[99]=GetRectCenter(Gs)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YU[99],0)
call SetUnitPositionLoc(GetEnteringUnit(),YU[99])
call RemoveLocation(YU[99])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),GetRectCenter(Gs),.5)
call SetUnitLifePercentBJ(L0,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call SaveInteger(NZ,GetHandleId(L0),1,0)
loop
call SaveInteger(NZ,GetHandleId(L0),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
set ST=GetUnitsInRectMatching(D6,Condition(function B0b))
call ForGroupBJ(ST,function B0c)
call DestroyGroup(ST)
endfunction
function B0e takes nothing returns nothing
set d4=CreateTrigger()
call DisableTrigger(d4)
call TriggerRegisterEnterRectSimple(d4,D4)
call TriggerAddCondition(d4,Condition(function B0Y))
call TriggerAddAction(d4,function B0d)
endfunction
function B0f takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Me
local integer Np
if IsUnitType(Hw,UNIT_TYPE_HERO)==true then
if GetUnitLevel(Hw)>=51 then
set Me=Ky
call SaveInteger(NZ,GetHandleId(Me),1,0)
set Np=0
loop
call SaveInteger(NZ,GetHandleId(Me),2+Np,0)
set Np=Np+1
exitwhen Np==7
endloop
if d2[8]==1 then
set UN[0]=98
set UN[2]=80
set UN[3]=75
set UN[4]=90
set UN[5]=99
call SetUnitPosition(Me,18555,-22530)
call SetUnitFacing(Me,270.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(18555,-23930,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hw,18555,-23930)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"Босс |c00ffff00Асмодеус|r. |c0000ffffРезист к магии|r: "+(I2S(GetUnitAbilityLevel(Ky,$41313756)*3)+"%"))
elseif d2[8]==2 then
set UN[0]=98
set UN[1]=99
set UN[2]=80
set UN[3]=75
set UN[4]=90
set UN[5]=99
set UN[6]=95
call SetUnitPosition(Me,18555,-22530)
call SetUnitFacing(Me,270.)
call SetUnitOwner(Me,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Me,true)
if GetLocalPlayer()==GetOwningPlayer(Hw) then
call PanCameraToTimed(18555,-23930,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hw,18555,-23930)
call SetUnitState(Me,UNIT_STATE_LIFE,GetUnitState(Me,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_LIFE,GetUnitState(Hw,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hw,UNIT_STATE_MANA,GetUnitState(Hw,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"Босс |c00ffff00Асмодеус|r. |c0000ffffРезист к магии|r: "+(I2S(GetUnitAbilityLevel(Ky,$41313756)*3)+"%"))
endif
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,D6)
set Me=null
endif
endif
set Hw=null
endfunction
function B0g takes nothing returns nothing
local trigger hy=CreateTrigger()
call TriggerRegisterEnterRectSimple(hy,GK)
call TriggerAddAction(hy,function B0f)
set hy=null
endfunction
function B0h takes nothing returns nothing
set QS=false
set QT=0
set QU=0
set QV=0.
set QW=0.
set QX=0.
set QY=0.
set QZ=false
set Qa=0
set Qb=0
set Qc=0.
set Qd=0.
set Qe=""
set Qf=false
set h0[0]=h0[0]
set Qg=false
set Qh[0]=0.
set Qi=false
set Qj[0]=0
set Qk=0
set Ql=0.
set Qm=Qm
set Qn[0]=0
set Qo[0]=0
set Qp[0]=0
set QZ=false
set Qc=0.
set Qd=0.
set Qq=false
set Qr=false
set h1[0]=null
set Qs[0]=0
set Qt[0]=0.
set Qu[0]=0
set Qv[0]=0
set Qw=0
set Qx[0]=0
set Qy[0]=0.
set Qz[0]=0.
set Q0[0]=0
set Q1[0]=0.
set Q2[0]=false
set Q3[0]=0
set Q4[0]=0
set Q5=0
set Q6[0]=0.
set Q7[0]=false
set Q8[0]=0
set h2[0]=null
set Q9[0]=0
set RB=0
set RC[0]=0.
set RD[0]=false
set RE[0]=0
set RF[0]=RF[0]
set RG[0]=0
set RH[0]=0
set RI[0]=0
set RJ=0
set RK=0
set RL=0
set RM[0]=0
set RN[0]=0.
set RO[0]=0
set RP[0]=0
set RQ[0]=0
endfunction
function B0i takes nothing returns nothing
set hz=CreateTrigger()
call DisableTrigger(hz)
call TriggerAddAction(hz,function B0h)
endfunction
function B0j takes unit Hw returns integer
local integer MC=0
loop
exitwhen MC>RB
if h2[MC]==Hw then
return MC
endif
set MC=MC+1
endloop
return -1
endfunction
function B0k takes integer Mc returns integer
local integer MC=0
loop
exitwhen MC>Q5
if Q3[MC]==Mc then
return MC
endif
set MC=MC+1
endloop
return -1
endfunction
function B0m takes unit Hw returns integer
local integer MC=0
loop
exitwhen MC>Qw
if Hw==h1[MC] then
return MC
endif
set MC=MC+1
endloop
return -1
endfunction
function B0n takes unit Hw returns integer
local integer MC=B0m(Hw)
if MC>=0 then
return Qu[MC]
endif
return -1
endfunction
function B0o takes timer iP returns integer
local integer MC=0
loop
if iP==RF[MC] then
return MC
endif
set MC=MC+1
exitwhen MC>RJ
endloop
return -1
endfunction
function B0p takes unit Hw returns nothing
set Qw=Qw+1
set h1[Qw]=Hw
set Qu[Qw]=-1
if Hw!=null then
set Qy[Qw]=GetUnitX(Hw)
set Qz[Qw]=GetUnitY(Hw)
set Qt[Qw]=GetUnitFacing(Hw)
set Qs[Qw]=GetUnitTypeId(Hw)
set Qv[Qw]=Qs[Qw]
set Qx[Qw]=GetPlayerId(GetOwningPlayer(Hw))
endif
endfunction
function B0q takes integer MC returns nothing
call DestroyTimer(RF[MC])
set RF[MC]=RF[RJ]
set RI[MC]=RI[RJ]
set RG[MC]=RG[RJ]
set RH[MC]=RH[RJ]
set RJ=RJ-1
endfunction
function B0r takes nothing returns integer
set RJ=RJ+1
set RF[RJ]=CreateTimer()
set RI[RJ]=-1
set RG[RJ]=-1
set RH[RJ]=-1
return RJ
endfunction
function B0s takes integer Nb returns integer
local integer MC=0
local integer cz=-1
local integer array iM
local integer iL=Qn[Nb]
loop
exitwhen MC>Qa
if Qn[MC]>=iL-QU and Qn[MC]<=iL+QU and MC!=Qo[Nb] and Q0[MC]==-1 then
set cz=cz+1
set iM[cz]=MC
endif
set MC=MC+1
endloop
if cz==-1 then
return -1
endif
return iM[GetRandomInt(0,cz)]
endfunction
function B0t takes unit Hw,integer iE returns nothing
local integer h4=RP[iE]
local integer iG=RQ[iE]
local integer MC=0
local integer WC=0
local real iF=0.
local real NU=0.
local item OW
local boolean h7=false
loop
exitwhen h7
set h7=true
set iF=GetRandomReal(0.,100.)
set NU=0.
set MC=h4
loop
exitwhen MC>h4+iG
if RO[MC]==WC then
if iF>NU and iF<=NU+RN[MC] then
set OW=CreateItem(RM[MC],GetUnitX(Hw),GetUnitY(Hw))
endif
set NU=RN[MC]
set h7=false
endif
set MC=MC+1
endloop
set WC=WC+1
endloop
set OW=null
endfunction
function B0u takes nothing returns nothing
endfunction
function B0v takes nothing returns nothing
set Qg=false
set Qf=true
set Qr=true
set h0[0]=Player(PLAYER_NEUTRAL_AGGRESSIVE)
set QX=450.
set QY=50.
set QV=2.
set QW=2.
set Qe="Abilities\\Spells\\Other\\ANsa\\ANsaTarget.mdl"
set QZ=true
set Qq=true
set Qc=500.
set Qd=6.
set QS=false
set QT=75
set QU=1
set Qi=true
set Ql=1
endfunction
function B0w takes nothing returns nothing
endfunction
function B0x takes nothing returns nothing
endfunction
function B0y takes nothing returns nothing
endfunction
function B0z takes nothing returns nothing
endfunction
function B00 takes player Hv returns boolean
return Hv==h0[0] or Hv==h0[1] or Hv==h0[2] or Hv==h0[3] or Hv==h0[4] or Hv==h0[5] or Hv==h0[6] or Hv==h0[7] or Hv==h0[8] or Hv==h0[9] or Hv==h0[10] or Hv==h0[11] or Hv==h0[12] or Hv==h0[13] or Hv==h0[14] or Hv==h0[15]
endfunction
function B01 takes nothing returns boolean
return B0m(GetTriggerUnit())!=-1
endfunction
function B02 takes nothing returns boolean
return B00(GetOwningPlayer(GetFilterUnit()))
endfunction
function B03 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER and GetWidgetLife(GetFilterUnit())>0.
endfunction
function B04 takes nothing returns boolean
local integer h5
local integer h6
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and B00(GetOwningPlayer(GetFilterUnit())) and B0n(GetFilterUnit())==-1 then
set h5=B0j(GetFilterUnit())
set h6=B0k(GetUnitTypeId(GetFilterUnit()))
return Q9[h5]==-1 or h5==-1 and Q4[h6]==-1 or h6==-1
endif
return false
endfunction
function B05 takes integer MC returns nothing
call PauseUnit(h1[Qj[MC]],false)
call SetUnitInvulnerable(h1[Qj[MC]],false)
set Qj[MC]=Qj[Qk]
set Qh[MC]=Qh[Qk]
set Qk=Qk-1
if Qk==-1 then
call DestroyTimer(Qm)
endif
endfunction
function B06 takes nothing returns nothing
local integer MC=0
loop
set Qh[MC]=Qh[MC]+Ql
if Qh[MC]>=240 then
call B05(MC)
set MC=MC-1
endif
set MC=MC+1
exitwhen MC>Qk
endloop
endfunction
function B07 takes nothing returns nothing
local integer iB=B0o(GetExpiredTimer())
local integer iH=-1
local integer MC=0
local integer PE=0
local integer PD=-1
local group Nb
local boolexpr h8
local boolean iR=true
local boolean array iQ
local integer array iI
local player Hv
local real Hd
local real MF
local real MG
local real Vz
local integer iS=0
set iQ[0]=true
set iQ[1]=true
set iQ[2]=true
if RI[iB]==0 then
set iH=RG[iB]
set MC=0
loop
if Qu[MC]==iH then
set PD=PD+1
set iI[PD]=MC
endif
set MC=MC+1
exitwhen MC>Qw
endloop
elseif RI[iB]==1 then
set PD=0
set iI[PD]=RG[iB]
endif
if QZ and Q2[iH]==false then
if Qc>0. then
set Nb=CreateGroup()
set h8=Filter(function B03)
endif
set MC=0
loop
if Qc>0. then
call GroupEnumUnitsInRange(Nb,Qy[iI[MC]],Qz[iI[MC]],Qc,h8)
if FirstOfGroup(Nb)!=null then
set iQ[0]=false
endif
endif
if Qq then
set PE=0
loop
set Hv=Player(PE)
if GetPlayerController(Hv)==MAP_CONTROL_USER then
if Qq and iQ[1] then
if IsVisibleToPlayer(Qy[iI[MC]],Qz[iI[MC]],Hv) then
set iQ[1]=false
endif
endif
endif
set PE=PE+1
exitwhen PE>11
endloop
endif
set MC=MC+1
exitwhen MC>PD
endloop
set iR=iQ[0] and iQ[1] and iQ[2]
if Qc>0. then
call DestroyGroup(Nb)
call DestroyBoolExpr(h8)
set Nb=null
set h8=null
endif
endif
if iR then
set MC=0
loop
if Qv[iI[MC]]!=0 then
set MF=Qy[iI[MC]]
set MG=Qz[iI[MC]]
set Vz=Qt[iI[MC]]
if RI[iB]==1 and QW>0. then
set Hd=GetRandomReal(0.,QW)
set Vz=GetRandomReal(0.,360.)
set MF=MF+Hd*Cos(bj_DEGTORAD*Vz)
set MG=MG+Hd*Sin(bj_DEGTORAD*Vz)
set Vz=GetRandomReal(0.,360.)
endif
set h1[iI[MC]]=CreateUnit(Player(Qx[iI[MC]]),Qv[iI[MC]],MF,MG,GetRandomReal(0.,360.))
set iS=GetRandomInt(1,100)
if iS==1 then
call SetUnitVertexColor(h1[iI[MC]],10,10,10,180)
call AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",h1[iI[MC]],"overhead")
call AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",h1[iI[MC]],"chest")
call AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",h1[iI[MC]],"origin")
call AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",h1[iI[MC]],"weapon")
call UnitAddAbility(h1[iI[MC]],$41436168)
elseif iS==2 then
call SetUnitVertexColor(h1[iI[MC]],255,0,0,170)
call AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",h1[iI[MC]],"overhead")
call AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",h1[iI[MC]],"chest")
call AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",h1[iI[MC]],"origin")
call AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",h1[iI[MC]],"weapon")
call UnitAddAbility(h1[iI[MC]],$41305159)
elseif iS==3 then
call SetUnitVertexColor(h1[iI[MC]],255,255,0,180)
call AddSpecialEffectTarget("Objects\\InventoryItems\\PotofGold\\PotofGold.mdl",h1[iI[MC]],"overhead")
call UnitAddAbility(h1[iI[MC]],$41305858)
elseif iS==4 then
call SetUnitVertexColor(h1[iI[MC]],255,50,50,120)
call AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",h1[iI[MC]],"overhead")
call AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",h1[iI[MC]],"chest")
call AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",h1[iI[MC]],"origin")
call AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",h1[iI[MC]],"weapon")
call UnitAddAbility(h1[iI[MC]],$41305859)
elseif iS==5 then
call SetUnitVertexColor(h1[iI[MC]],0,0,255,200)
call AddSpecialEffectTarget("war3mapImported\\EmpathicBond.mdx",h1[iI[MC]],"chest")
call UnitAddAbility(h1[iI[MC]],$41436D33)
endif
if Qe!="" then
call DestroyEffect(AddSpecialEffectTarget(Qe,h1[iI[MC]],"origin"))
endif
if Qi then
call PauseUnit(h1[iI[MC]],true)
call SetUnitInvulnerable(h1[iI[MC]],true)
if Qk==-1 then
set Qm=CreateTimer()
call TimerStart(Qm,.04,true,function B06)
endif
set Qk=Qk+1
set Qj[Qk]=iI[MC]
set Qh[Qk]=0.
endif
if RH[iB]!=-1 then
set h2[RH[iB]]=h1[iI[MC]]
endif
endif
set MC=MC+1
exitwhen MC>PD
endloop
call B0q(iB)
else
call TimerStart(RF[iB],Qd,false,function B07)
endif
set Hv=null
set Nb=null
endfunction
function B08 takes nothing returns nothing
local unit He=GetTriggerUnit()
local integer h4=B0m(He)
local integer iH=-1
local integer iK
local real MF
local real MG
local real Vz
local integer MC=0
local integer PE=0
local integer PD=-1
local integer iN=0
local real iO=-1.
local boolean h7=false
local integer array iI
local boolean iJ=true
local integer h5=B0j(He)
local integer h6=B0k(GetUnitTypeId(He))
local integer iB=B0r()
local integer iC
local integer iD
if h5==-1 then
set iC=-1
else
set iC=Q9[h5]
endif
if h6==-1 then
set iD=-1
else
set iD=Q4[h6]
endif
if h5>-1 and RE[h5]>-1 then
call B0t(He,RE[h5])
endif
if h6>-1 and Q8[h6]>-1 then
call B0t(He,Q8[h6])
endif
if Qr==false and iC==-1 and iD==-1 then
set h1[h4]=null
set iH=Qu[h4]
set RI[iB]=0
set RG[iB]=iH
set MC=0
loop
if Qu[MC]==iH then
set PD=PD+1
set iI[PD]=MC
if iJ and GetWidgetLife(h1[MC])>0. then
set iJ=false
endif
endif
set MC=MC+1
exitwhen MC>Qw
endloop
if h4!=-1 and iJ then
set iK=B0s(iH)
if QS and GetRandomInt(1,100)<=QT and iK!=-1 and Q0[iH]!=1 then
set Qo[iH]=iK
set MC=0
set PE=0
set iN=Qw
loop
if MC==0 then
set MF=Qy[iI[PE]]
set MG=Qz[iI[PE]]
set Vz=Qt[iI[PE]]
set MC=1
endif
set h1[iI[PE]]=null
set Qv[iI[PE]]=0
set PE=PE+1
exitwhen PE>PD
endloop
set MC=0
set PE=-1
loop
exitwhen MC>iN
if Qu[MC]==iK and Qs[MC]!=0 then
set h7=false
loop
exitwhen h7 or PE>=PD
set PE=PE+1
set h7=true
endloop
if h7 then
set Qv[iI[PE]]=Qs[MC]
else
call B0p(null)
set Qv[Qw]=Qs[MC]
set Qu[Qw]=iH
set Qy[Qw]=MF+GetRandomReal(-50.,50.)
set Qz[Qw]=MG+GetRandomReal(-50.,50.)
set Qt[Qw]=Vz
set Qx[Qw]=Qx[MC]
set PD=PD+1
set iI[PD]=Qw
set PE=PD
endif
endif
set MC=MC+1
endloop
endif
set MC=0
loop
set PE=B0k(Qv[MC])
if PE!=-1 then
set iO=Q6[PE]
endif
set MC=MC+1
exitwhen MC>PD or iO!=-1.
endloop
if Q1[Qo[iH]]!=-1. then
set iO=Q1[Qo[iH]]
endif
endif
elseif (Qr and iC!=0 and iD!=0) or iC==1 or iD==1 then
set RI[iB]=1
set RH[iB]=h5
set RG[iB]=h4
if h5!=-1 and RC[h5]!=-1. then
set iO=RC[h5]
endif
if iO==-1. and h6!=-1 and Q6[h6]!=-1. then
set iO=Q6[h6]
endif
endif
if iC!=0 and iD!=0 and iH==-1 or Q0[iH]!=0 and iJ then
if iO==-1. then
set iO=QY
endif
set iO=RAbsBJ(iO+GetRandomReal(-QV,QV))
call TimerStart(RF[iB],iO,false,function B07)
else
call B0q(iB)
endif
set He=null
endfunction
function B09 takes nothing returns nothing
local unit Vm=GetEnumUnit()
local integer h4=B0m(Vm)
if h4==-1 then
call B0p(Vm)
set h4=Qw
endif
set Qu[h4]=Qb
set Qn[Qb]=Qn[Qb]+GetUnitLevel(Vm)
set Qp[Qb]=Qp[Qb]+1
set Vm=null
endfunction
function B1B takes nothing returns nothing
local unit Vm=GetEnumUnit()
local integer h4=B0m(Vm)
local texttag NY
local group Nb
local boolexpr h8
local integer h5
local integer h6
local boolean h7
if h4==-1 then
set h5=B0j(Vm)
set h6=B0k(GetUnitTypeId(Vm))
set h7=Q9[h5]==-1 or h5==-1 and Q4[h6]==-1 or h6==-1
if Qr==false and B0n(Vm)==-1 and h7 then
set Nb=CreateGroup()
set h8=Filter(function B04)
set Qa=Qa+1
set Q0[Qa]=-1
set Q1[Qa]=-1.
if Qg then
set NY=CreateTextTag()
call SetTextTagText(NY,"Creep camp "+I2S(Qa),.03)
call SetTextTagColor(NY,255,0,0,255)
call SetTextTagPos(NY,GetUnitX(Vm)-50.,GetUnitY(Vm),10.)
endif
set Qo[Qa]=Qa
call GroupEnumUnitsInRange(Nb,GetUnitX(Vm),GetUnitY(Vm),QX,h8)
set Qb=Qa
call ForGroup(Nb,function B09)
call DestroyGroup(Nb)
call DestroyBoolExpr(h8)
set Nb=null
set h8=null
elseif Qr or Q9[h5]==1 or Q4[h6]==1 then
call B0p(Vm)
endif
endif
set Vm=null
endfunction
function B1C takes nothing returns nothing
local group Nb=CreateGroup()
if Qf then
call GroupEnumUnitsInRect(Nb,GetPlayableMapRect(),Filter(function B02))
call ForGroup(Nb,function B1B)
if Qg then
call BJDebugMsg("NCSS report:\nTotal creeps: "+I2S(Qw+1)+"\nTotal groups: "+I2S(Qa+1))
endif
endif
call B0y()
call DestroyGroup(Nb)
set Nb=null
endfunction
function B1D takes nothing returns nothing
local trigger h9=CreateTrigger()
local integer MC=0
set Qa=-1
set Qw=-1
set Qk=-1
set RJ=-1
call TriggerAddAction(h9,function B08)
call TriggerAddCondition(h9,Condition(function B01))
loop
call TriggerRegisterPlayerUnitEvent(h9,Player(MC),EVENT_PLAYER_UNIT_DEATH,null)
set MC=MC+1
exitwhen MC>15
endloop
set h9=null
endfunction
function B1E takes nothing returns nothing
set h3=CreateTrigger()
call TriggerRegisterTimerEventSingle(h3,0.)
call TriggerAddAction(h3,function B1C)
set RB=-1
set Q5=-1
set RK=-1
set RL=-1
call B0v()
call B1D()
call B0w()
call B0x()
endfunction
function B1F takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
call SetUnitVertexColorBJ(K1,100,0.,0.,0)
call EnableTrigger(iU)
call TriggerSleepAction(10.)
call DisableTrigger(iU)
call SetUnitVertexColorBJ(K1,100,100.,100.,0)
call TriggerSleepAction(10.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function B1G takes nothing returns nothing
set iT=CreateTrigger()
call TriggerRegisterUnitEvent(iT,K1,EVENT_UNIT_DAMAGED)
call TriggerAddAction(iT,function B1F)
endfunction
function B1H takes nothing returns nothing
call SetUnitLifeBJ(K1,GetUnitStateSwap(UNIT_STATE_LIFE,K1)+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,K1)*.05)
endfunction
function B1I takes nothing returns nothing
set iU=CreateTrigger()
call DisableTrigger(iU)
call TriggerRegisterUnitEvent(iU,K1,EVENT_UNIT_DAMAGED)
call TriggerAddAction(iU,function B1H)
endfunction
function B1J takes nothing returns boolean
if not (IsUnitAliveBJ(LX)==true) then
return false
endif
return true
endfunction
function B1K takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("|c00ff000020|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000019|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000018|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000017|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000016|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000015|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000014|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000013|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000012|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000011|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000010|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00009|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00008|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00007|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00006|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00005|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00004|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00003|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00002|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00001|r",LX,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
if B1J() then
call SetUnitLifePercentBJ(LX,100)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function B1L takes nothing returns nothing
set iV=CreateTrigger()
call TriggerRegisterUnitLifeEvent(iV,LX,LESS_THAN,60000.)
call TriggerAddAction(iV,function B1K)
endfunction
function B1M takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B1N takes nothing returns nothing
set Ud=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ud,0)
call RemoveLocation(Ud)
endfunction
function B1O takes nothing returns nothing
set Um=CreateTrigger()
call DisableTrigger(Um)
call TriggerRegisterEnterRectSimple(Um,CV)
call TriggerAddCondition(Um,Condition(function B1M))
call TriggerAddAction(Um,function B1N)
endfunction
function B1P takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B1Q takes nothing returns nothing
set Ud=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ud,0)
call RemoveLocation(Ud)
endfunction
function B1R takes nothing returns nothing
set Ul=CreateTrigger()
call DisableTrigger(Ul)
call TriggerRegisterEnterRectSimple(Ul,BF)
call TriggerAddCondition(Ul,Condition(function B1P))
call TriggerAddAction(Ul,function B1Q)
endfunction
function B1S takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B1T takes nothing returns nothing
set Ud=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ud,0)
call RemoveLocation(Ud)
endfunction
function B1U takes nothing returns nothing
set Uk=CreateTrigger()
call DisableTrigger(Uk)
call TriggerRegisterEnterRectSimple(Uk,Cb)
call TriggerAddCondition(Uk,Condition(function B1S))
call TriggerAddAction(Uk,function B1T)
endfunction
function B1V takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B1W takes nothing returns nothing
set Ud=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ud,0)
call RemoveLocation(Ud)
endfunction
function B1X takes nothing returns nothing
set Ur=CreateTrigger()
call DisableTrigger(Ur)
call TriggerRegisterEnterRectSimple(Ur,Cc)
call TriggerAddCondition(Ur,Condition(function B1V))
call TriggerAddAction(Ur,function B1W)
endfunction
function B1Y takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B1Z takes nothing returns nothing
set Ud=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ud,0)
call RemoveLocation(Ud)
endfunction
function B1a takes nothing returns nothing
set Uq=CreateTrigger()
call DisableTrigger(Uq)
call TriggerRegisterEnterRectSimple(Uq,Cu)
call TriggerAddCondition(Uq,Condition(function B1Y))
call TriggerAddAction(Uq,function B1Z)
endfunction
function B1b takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B1c takes nothing returns nothing
set Ud=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ud,0)
call RemoveLocation(Ud)
endfunction
function B1d takes nothing returns nothing
set Uo=CreateTrigger()
call DisableTrigger(Uo)
call TriggerRegisterEnterRectSimple(Uo,FY)
call TriggerAddCondition(Uo,Condition(function B1b))
call TriggerAddAction(Uo,function B1c)
endfunction
function B1e takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B1f takes nothing returns nothing
set Ud=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ud)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ud,0)
call RemoveLocation(Ud)
endfunction
function B1g takes nothing returns nothing
set Un=CreateTrigger()
call DisableTrigger(Un)
call TriggerRegisterEnterRectSimple(Un,Fa)
call TriggerAddCondition(Un,Condition(function B1e))
call TriggerAddAction(Un,function B1f)
endfunction
function B1h takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304139) then
return false
endif
return true
endfunction
function B1i takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303037) then
return false
endif
return true
endfunction
function B1j takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303038) then
return false
endif
return true
endfunction
function B1k takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4930325A) then
return false
endif
return true
endfunction
function B1l takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304238) then
return false
endif
return true
endfunction
function B1m takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305236) then
return false
endif
return true
endfunction
function B1n takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305237) then
return false
endif
return true
endfunction
function B1o takes nothing returns nothing
if B1h() then
call RemoveUnit(IB)
call SetUnitInvulnerable(K0,false)
call PauseUnitBJ(false,K0)
call SetUnitOwner(K0,Player(11),true)
else
endif
if B1i() then
call RemoveUnit(H5)
call SetUnitInvulnerable(Lf,false)
call ShowUnitShow(Lf)
call PauseUnitBJ(false,Lf)
call SetUnitOwner(Lf,Player(11),true)
else
endif
if B1j() then
call RemoveUnit(IE)
call SetUnitInvulnerable(LV,false)
call ShowUnitShow(LV)
call PauseUnitBJ(false,LV)
call SetUnitOwner(LV,Player(11),true)
else
endif
if B1k() then
call RemoveUnit(II)
call SetUnitInvulnerable(LX,false)
call ShowUnitShow(LX)
call PauseUnitBJ(false,LX)
call SetUnitOwner(LX,Player(11),true)
else
endif
if B1l() then
call RemoveUnit(Hx)
call SetUnitInvulnerable(K1,false)
call PauseUnitBJ(false,K1)
else
endif
if B1m() then
call RemoveUnit(GetSellingUnit())
call SetUnitInvulnerable(LG,false)
call PauseUnitBJ(false,LG)
set Tv[2]=75.
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FZ)
else
endif
if B1n() then
call RemoveUnit(GetSellingUnit())
call SetUnitInvulnerable(LH,false)
call PauseUnitBJ(false,LH)
set Tv[0]=75.
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Fd)
else
endif
endfunction
function B1p takes nothing returns nothing
set iW=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(iW,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(iW,function B1o)
endfunction
function B1q takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local unit Nf=GetKillingUnit()
if IsUnitType(Hw,UNIT_TYPE_HERO) then
if IsUnitIllusion(Hw)==false then
set Rq[GetPlayerId(GetOwningPlayer(Hw))+1]=Rq[GetPlayerId(GetOwningPlayer(Hw))+1]+1
endif
endif
if GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE) then
set Rr[GetPlayerId(GetOwningPlayer(Nf))+1]=Rr[GetPlayerId(GetOwningPlayer(Nf))+1]+1
endif
set Hw=null
set Nf=null
endfunction
function B1r takes nothing returns nothing
local trigger iX=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(iX,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(iX,function B1q)
set iX=null
endfunction
function B1s takes nothing returns nothing
local integer Hv=1
call nC(Pd,1,1,"|c00ff9696Игроки|r")
call nC(Pd,2,1,"|c00ff7f00LVL|r")
call nC(Pd,3,1,"|c00ffff00Gold|r")
call nC(Pd,4,1,"|c00ff9696Метки|r")
call nC(Pd,5,1,"|c00ffff00Наигранное время|r")
call nC(Pd,6,1,"|c00ffff00Трофей|r")
call nC(Pd,1,11,"|c006969ffВремя:|r")
call nB(Pd,1,11,true,true)
call nB(Pd,2,11,true,false)
call nB(Pd,3,11,true,false)
call nB(Pd,4,11,true,false)
call nB(Pd,5,11,true,false)
call nB(Pd,2,12,true,false)
call nB(Pd,3,12,true,false)
call nB(Pd,4,12,true,false)
call nB(Pd,5,12,true,false)
call nB(Pd,2,13,true,false)
call nB(Pd,3,13,true,false)
call nB(Pd,4,13,true,false)
call nC(Pd,1,12,"|c00ff7f00Заданий выполнено:|r ")
call nC(Pd,2,11,"00")
call nC(Pd,3,11,":")
call nC(Pd,4,11,"00")
call m8(Pd,1,11,5.)
call m8(Pd,2,11,1.5)
call m8(Pd,3,11,.7)
call m8(Pd,4,11,1.5)
call m8(Pd,1,12,50.)
call m8(Pd,1,13,50.)
call nC(Pd,1,13,"|c006969ffСложность:|r "+I2S(MM))
call m9(Pd,1,11,"war3mapImported\\BTNTimeAll.blp")
call m9(Pd,1,12,"war3mapImported\\BTNQuestComplete.blp")
call m9(Pd,1,13,"war3mapImported\\BTNHardLvl.blp")
set Rs[1]=Rs[1]+1
if Rs[1]>=60 then
set Rs[1]=0
set Rs[2]=Rs[2]+1
endif
call nC(Pd,2,11,I2S(Rs[2]))
call nC(Pd,4,11,I2S(Rs[1]))
loop
call nC(Pd,1,Hv+1,OF[Hv-1]+OG[Hv-1])
call nC(Pd,1,12,"|c00ff7f00Заданий выполнено:|r "+I2S(Sh))
if MV[Hv-1]!=null then
call nC(Pd,2,Hv+1,"|c00ff7f00"+I2S(GetUnitLevel(MV[Hv-1])))
call nC(Pd,3,Hv+1,"|c00ffff00"+I2S(GetPlayerState(Player(Hv-1),PLAYER_STATE_RESOURCE_GOLD)))
call nC(Pd,4,Hv+1,"|c00ff9696"+I2S(GetPlayerState(Player(Hv-1),PLAYER_STATE_RESOURCE_LUMBER)))
call nC(Pd,5,Hv+1,I2S(GetUnitAbilityLevel(MV[Hv-1],$41496434))+"|c00ff0000д|r "+I2S(GetUnitAbilityLevel(MV[Hv-1],$41496433))+"|c00ff7f00ч|r "+I2S(GetUnitAbilityLevel(MV[Hv-1],$41496432))+"|c00ffff00м|r")
call nB(Pd,2,Hv+1,true,true)
call nB(Pd,3,Hv+1,true,true)
call nB(Pd,4,Hv+1,true,true)
call nB(Pd,5,Hv+1,true,true)
call nB(Pd,6,Hv+1,true,true)
call m9(Pd,2,Hv+1,"war3mapImported\\BTNLVLhero.blp")
call m9(Pd,3,Hv+1,"war3mapImported\\BTNGoldHero.blp")
call m9(Pd,4,Hv+1,"war3mapImported\\BTNBloodMetk.blp")
call m9(Pd,5,Hv+1,"war3mapImported\\BTNTimerHero.blp")
call m9(Pd,6,Hv+1,"war3mapImported\\BTNTrofei.blp")
else
call nB(Pd,2,Hv+1,false,false)
call nB(Pd,3,Hv+1,false,false)
call nB(Pd,4,Hv+1,false,false)
call nB(Pd,5,Hv+1,false,false)
call nB(Pd,6,Hv+1,false,false)
endif
set gU[Hv-1]=0
set Hv=Hv+1
exitwhen Hv>8
endloop
endfunction
function B1t takes nothing returns nothing
local integer Hv=1
local integer MC
loop
if Vy[Hv]==false and MV[Hv-1]!=null then
set MC=1
loop
call m8(OE[Hv],1,MC,13.)
call m8(OE[Hv],2,MC,14.)
call m8(OE[Hv],3,MC,14.)
call m9(OE[Hv],2,MC+1,"war3mapImported\\BTNBlockAchiv.blp")
call m9(OE[Hv],3,MC+1,"war3mapImported\\BTNBlockAchiv.blp")
set MC=MC+1
exitwhen MC>24
endloop
call nB(OE[Hv],1,2,false,false)
call nB(OE[Hv],2,1,true,false)
call nB(OE[Hv],3,1,true,false)
call m9(OE[Hv],1,3,"war3mapImported\\BTNLVLhero.blp")
call m9(OE[Hv],1,4,"war3mapImported\\BTNGoldHero.blp")
call m9(OE[Hv],1,5,"war3mapImported\\BTNBloodMetk.blp")
call m9(OE[Hv],1,12,"war3mapImported\\BTNExHero.blp")
call m9(OE[Hv],1,13,"war3mapImported\\BTNExHero.blp")
call m9(OE[Hv],1,14,"war3mapImported\\BTNExHero.blp")
call m9(OE[Hv],1,15,"war3mapImported\\BTNExHero.blp")
call m9(OE[Hv],1,16,"war3mapImported\\BTNExHero.blp")
call m9(OE[Hv],1,17,"war3mapImported\\BTNExHero.blp")
call m9(OE[Hv],1,8,"war3mapImported\\BTNDeathHero.blp")
call m9(OE[Hv],1,9,"war3mapImported\\BTNTarget.blp")
call m9(OE[Hv],1,6,"war3mapImported\\BTNZvanie.blp")
call m9(OE[Hv],1,7,"war3mapImported\\BTNZvanie.blp")
call m9(OE[Hv],1,10,"war3mapImported\\BTNStats.blp")
call nC(OE[Hv],1,3,"|c00505099Уровень|r: "+I2S(GetUnitLevel(MV[Hv-1])))
call nC(OE[Hv],1,4,"|c00ffff00Золото|r: "+I2S(GetPlayerState(Player(Hv-1),PLAYER_STATE_RESOURCE_GOLD)))
call nC(OE[Hv],1,5,"|c00ff9696Кровавые Метки|r: "+I2S(GetPlayerState(Player(Hv-1),PLAYER_STATE_RESOURCE_LUMBER)))
call nC(OE[Hv],1,6,"|c009696ffЗвание:")
call nC(OE[Hv],1,7,VP[Hv])
call nC(OE[Hv],1,8,"|c007d7d7dСмертей|r: "+I2S(Rq[Hv]))
call nC(OE[Hv],1,9,"|c00ff0000Убийств|r: "+I2S(Rr[Hv]))
call nC(OE[Hv],1,10,"|c0000ffffПараметры|r: "+I2S(GetHeroAgi(MV[Hv-1],true)+GetHeroStr(MV[Hv-1],true)+GetHeroInt(MV[Hv-1],true)))
call nC(OE[Hv],1,12,"|c00ff7f00Сила|r: "+I2S(UI[Hv])+"%")
call nC(OE[Hv],1,13,"|c006969ffРазрушение|r: "+I2S(UJ[Hv])+"%")
call nC(OE[Hv],1,14,"|c007004ccМагия|r: "+I2S(UK[Hv])+"%")
call nC(OE[Hv],1,15,"|c0000ff00Жизнь|r: "+I2S(UL[Hv])+"%")
call nC(OE[Hv],1,16,"|c00865405Защита|r: "+I2S(UM[Hv])+"%")
call nC(OE[Hv],1,17,"|c00ffff00Помощь|r: "+I2S(UO[Hv])+"%")
call nC(OE[Hv],1,19,g1[Hv-1])
call nB(OE[Hv],1,20,true,true)
call nB(OE[Hv],1,21,true,true)
call nB(OE[Hv],1,11,false,false)
call nB(OE[Hv],1,18,false,false)
call m9(OE[Hv],1,19,"war3mapImported\\BTNTalikHero.blp")
call m9(OE[Hv],1,20,"war3mapImported\\BTNTalikHero.blp")
call m9(OE[Hv],1,21,"war3mapImported\\BTNTalikHero.blp")
call nC(OE[Hv],1,20,g1[Hv-1+10])
call nC(OE[Hv],1,21,g1[Hv-1+20])
call nB(OE[Hv],1,22,true,true)
call m9(OE[Hv],1,22,"war3mapImported\\BTNCourier.blp")
call nB(OE[Hv],1,23,true,true)
call m9(OE[Hv],1,23,"war3mapImported\\BTNCourier.blp")
call nC(OE[Hv],1,22,"|c0000FF80"+GetUnitName(NM[2*Hv]))
call nC(OE[Hv],1,23,"|c0000FF80"+hJ[Hv])
if GetUnitAbilityLevel(MV[Hv-1],$41305A50)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41313037)>=1 then
call nC(OE[Hv],2,2,"|c0000ff00Я так просто не сдамся|r(|c00ffff00+10 стат|r)")
call m9(OE[Hv],2,2,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305A51)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41313037)>=1 then
call nC(OE[Hv],2,3,"|c0000ff00Праздничный настрой|r(|c00ffff00+15 стат|r)")
call m9(OE[Hv],2,3,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313038)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41305A52)>=1 then
call nC(OE[Hv],2,4,"|c0000ff00Максимум|r(|c00ffff00+30 стат|r)")
call m9(OE[Hv],2,4,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305A53)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41313043)>=1 then
call nC(OE[Hv],2,5,"|c0000ff00Гладиатор|r(|c00ffff00+500 НР|r)")
call m9(OE[Hv],2,5,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305444)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41305557)>=1 then
call nC(OE[Hv],2,6,"|c0000ff00Вместе веселее|r(|c00ffff00+20 стат|r)")
call m9(OE[Hv],2,6,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305052)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41305247)>=1 then
call nC(OE[Hv],2,7,"|c0000ff00Играть, играть, играть!|r(|c00ffff00+20 стат|r)")
call m9(OE[Hv],2,7,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305A56)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41313039)>=1 then
call nC(OE[Hv],2,8,"|c0000ff00Убей их всех|r(|c00ffff00+100 атаки|r)")
call m9(OE[Hv],2,8,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305A57)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41313039)>=1 then
call nC(OE[Hv],2,9,"|c0000ff00Добытчик|r(|c00ffff00+70 атаки|r)")
call m9(OE[Hv],2,9,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305A58)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41313042)>=1 then
call nC(OE[Hv],2,10,"|c0000ff00Смерть - лишь начало|r(|c00ffff00+15 защиты|r)")
call m9(OE[Hv],2,10,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305A59)>=1 then
call nC(OE[Hv],2,11,"|c0000ff00Деньги - зло|r(|c00ffff00+200 атаки|r)")
call m9(OE[Hv],2,11,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$4130545A)>=1 then
call nC(OE[Hv],2,12,"|c0000ff00Знаток|r(|c00ffff00+20 стат|r)")
call m9(OE[Hv],2,12,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305A5A)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41313043)>=1 then
call nC(OE[Hv],2,13,"|c0000ff00Кровоносная Тварь|r(|c00ffff00+1000 НР|r)")
call m9(OE[Hv],2,13,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305235)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41305247)>=1 then
call nC(OE[Hv],2,14,"|c0000ff00Стать бы гробовщиком|r(|c00ffff00+40 стат|r)")
call m9(OE[Hv],2,14,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305138)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41305557)>=1 then
call nC(OE[Hv],2,15,"|c0000ff00Скорострел|r(|c00ffff00+20 стат|r)")
call m9(OE[Hv],2,15,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313032)>=1 then
call nC(OE[Hv],2,16,"|c0000ff00Вождь Арахнидов|r(|c00ffff00+40 стат|r)")
call m9(OE[Hv],2,16,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313033)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41313038)>=1 then
call nC(OE[Hv],2,17,"|c0000ff00Прелестный читатель|r(|c00ffff00+25 стат|r)")
call m9(OE[Hv],2,17,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313034)>=1 then
call nC(OE[Hv],2,18,"|c0000ff00На пути разрушения|r(|c00ffff00+100 атаки|r)")
call m9(OE[Hv],2,18,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313035)>=1 then
call nC(OE[Hv],2,19,"|c0000ff00Сквозь воду|r(|c00ffff00+20 стат|r)")
call m9(OE[Hv],2,19,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313036)>=1 or GetUnitAbilityLevel(MV[Hv-1],$41313042)>=1 then
call nC(OE[Hv],2,20,"|c0000ff00Растения во благо|r(|c00ffff00+10 защиты|r)")
call m9(OE[Hv],2,20,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313058)>=1 then
call nC(OE[Hv],2,21,"|c0000ff00Новогодний корпоратив|r(|c00ffff00+99 стат|r)")
call m9(OE[Hv],2,21,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41304B4E)>=1 then
call nC(OE[Hv],2,22,"|c0000ff00Несущий смерть|r(|c00ffff00+100 стат|r)")
call m9(OE[Hv],2,22,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41304B51)>=1 then
call nC(OE[Hv],2,23,"|c0000ff00Всезнающий|r(|c00ffff00+80 стат|r)")
call m9(OE[Hv],2,23,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41304C4B)>=1 then
call nC(OE[Hv],3,2,"|c0000ff00Свиточек|r(|c00ffff00+10 стат|r)")
call m9(OE[Hv],3,2,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41305556)>=1 then
call nC(OE[Hv],3,3,"|c0000ff00Проклятый|r(|c00ffff00+15 стат|r)")
call m9(OE[Hv],3,3,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313733)>=1 then
call nC(OE[Hv],3,4,"|c0000ff00Каменный|r(|c00ffff00+25 стат|r)")
call m9(OE[Hv],3,4,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$4131354C)>=1 then
call nC(OE[Hv],3,5,"|c0000ff00Целитель|r(|c00ffff00+20 стат|r)")
call m9(OE[Hv],3,5,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41314149)>=1 then
call nC(OE[Hv],3,6,"|c0000ff00Ловкость|r(|c00ffff00+30 стат|r)")
call m9(OE[Hv],3,6,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$4131414A)>=1 then
call nC(OE[Hv],3,7,"|c0000ff00Неуловимый|r(|c00ffff00+50 стат|r)")
call m9(OE[Hv],3,7,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41314431)>=1 then
call nC(OE[Hv],3,8,"|c0000ff00Нас не оглушить!|r(|c00ffff00+50 стат|r)")
call m9(OE[Hv],3,8,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41314430)>=1 then
call nC(OE[Hv],3,9,"|c0000ff00Магия? Не, не слышали|r(|c00ffff00+50 стат|r)")
call m9(OE[Hv],3,9,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41314450)>=1 then
call nC(OE[Hv],3,10,"|c0000ff00Ниндзя|r(|c00ffff00+60 стат|r)")
call m9(OE[Hv],3,10,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41314451)>=1 then
call nC(OE[Hv],3,11,"|c0000ff00Звёздочет|r(|c00ffff00+60 стат|r)")
call m9(OE[Hv],3,11,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$4131424E)>=1 then
call nC(OE[Hv],3,12,"|c0000ff00Море по колено|r(|c00ffff00+77 стат|r)")
call m9(OE[Hv],3,12,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313141)>=1 then
call nC(OE[Hv],3,13,"|c0000ff00Повелитель снега|r(|c00ffff00+133 стат|r)")
call m9(OE[Hv],3,13,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41304736)>=1 then
call nC(OE[Hv],3,14,"|c0000ff00Коллекционер|r(|c00ffff00+82 стат|r)")
call m9(OE[Hv],3,14,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41304D4A)>=1 then
call nC(OE[Hv],3,15,"|c0000ff00Мы незахлебнёмся|r(|c00ffff00+155 стат|r)")
call m9(OE[Hv],3,15,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41314254)>=1 then
call nC(OE[Hv],3,16,"|c0000ff00Сон для слабых|r(|c00ffff00+103 стат|r)")
call m9(OE[Hv],3,16,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41304D44)>=1 then
call nC(OE[Hv],3,17,"|c0000ff00Рассечь!|r(|c00ffff00+55 стат|r)")
call m9(OE[Hv],3,17,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313745)>=1 then
call nC(OE[Hv],3,18,"|c0000ff00Темный ветер|r(|c00ffff00+55 стат|r)")
call m9(OE[Hv],3,18,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313746)>=1 then
call nC(OE[Hv],3,19,"|c0000ff00Возмездие|r(|c00ffff00+55 стат|r)")
call m9(OE[Hv],3,19,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313747)>=1 then
call nC(OE[Hv],3,20,"|c0000ff00Неприкаянный|r(|c00ffff00+55 стат|r)")
call m9(OE[Hv],3,20,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MV[Hv-1],$41313954)>=1 then
call nC(OE[Hv],3,21,"|c0000ff00Повелитель песка|r(|c00ffff00+144 стат|r)")
call m9(OE[Hv],3,21,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
endif
call TriggerSleepAction(.1)
set Hv=Hv+1
exitwhen Hv>8
endloop
endfunction
function B1u takes nothing returns nothing
local integer MC
local trigger He
set MC=1
loop
set OE[MC]=m7(3,23,"Ваша Статистика")
call nC(OE[MC],1,1,"|c00ff7f00"+GetPlayerName(Player(MC-1)))
call nC(OE[MC],1,19,"|c007d7d7dНет талисмана|r")
call nC(OE[MC],2,1,"|c006969ffДостижения|r")
call nC(OE[MC],2,2,"[1]|c007d7d7dЯ так просто не сдамся|r")
call nC(OE[MC],2,3,"[2]|c007d7d7dПраздничный настрой|r")
call nC(OE[MC],2,4,"[3]|c007d7d7dМаксимум|r")
call nC(OE[MC],2,5,"[4]|c007d7d7dГладиатор|r")
call nC(OE[MC],2,6,"[5]|c007d7d7dВместе веселее|r")
call nC(OE[MC],2,7,"[6]|c007d7d7dИграть, играть, играть!|r")
call nC(OE[MC],2,8,"[7]|c007d7d7dУбей их всех|r")
call nC(OE[MC],2,9,"[8]|c007d7d7dДобытчик|r")
call nC(OE[MC],2,10,"[9]|c007d7d7dСмерть - лишь начало|r")
call nC(OE[MC],2,11,"[10]|c007d7d7dДеньги - зло|r")
call nC(OE[MC],2,12,"[11]|c007d7d7dЗнаток|r")
call nC(OE[MC],2,13,"[12]|c007d7d7dКровоносная Тварь|r")
call nC(OE[MC],2,14,"[13]|c007d7d7dСтать бы гробовщиком|r")
call nC(OE[MC],2,15,"[14]|c007d7d7dСкорострел|r")
call nC(OE[MC],2,16,"[15]|c007d7d7dВождь Арахнидов|r")
call nC(OE[MC],2,17,"[16]|c007d7d7dПрелестный читатель|r")
call nC(OE[MC],2,18,"[17]|c007d7d7dНа пути разрушения|r")
call nC(OE[MC],2,19,"[18]|c007d7d7dСквозь воду|r")
call nC(OE[MC],2,20,"[19]|c007d7d7dРастения во благо|r")
call nC(OE[MC],2,21,"[20]|c007d7d7dНовогодний корпоратив|r")
call nC(OE[MC],2,22,"[21]|c007d7d7dНесущий смерть|r")
call nC(OE[MC],2,23,"[22]|c007d7d7dВсезнающий|r")
call nC(OE[MC],3,2,"[23]|c007d7d7dСвиточек|r")
call nC(OE[MC],3,3,"[24]|c007d7d7dПроклятый|r")
call nC(OE[MC],3,4,"[25]|c007d7d7dКаменный|r")
call nC(OE[MC],3,5,"[26]|c007d7d7dЦелитель|r")
call nC(OE[MC],3,6,"[27]|c007d7d7dЛовкость|r")
call nC(OE[MC],3,7,"[28]|c007d7d7dНеуловимый|r")
call nC(OE[MC],3,8,"[29]|c007d7d7dНас не оглушить!|r")
call nC(OE[MC],3,9,"[30]|c007d7d7dМагия? Не, не слышали|r")
call nC(OE[MC],3,10,"[31]|c007d7d7dНиндзя|r")
call nC(OE[MC],3,11,"[32]|c007d7d7dЗвёздочет|r")
call nC(OE[MC],3,12,"[33]|c007d7d7dМоре по колено|r")
call nC(OE[MC],3,13,"[34]|c007d7d7dПовелитель снега|r")
call nC(OE[MC],3,14,"[35]|c007d7d7dКоллекционер|r")
call nC(OE[MC],3,15,"[36]|c007d7d7dМы не захлебнёмся|r")
call nC(OE[MC],3,16,"[37]|c007d7d7dСон для слабых|r")
call nC(OE[MC],3,17,"[38]|c007d7d7dРассечь!|r")
call nC(OE[MC],3,18,"[39]|c007d7d7dТемный ветер|r")
call nC(OE[MC],3,19,"[40]|c007d7d7dВозмездие|r")
call nC(OE[MC],3,20,"[41]|c007d7d7dНеприкаянный|r")
call nC(OE[MC],3,21,"[42]|c007d7d7dПовелитель песка|r")
set MC=MC+1
exitwhen MC>8
endloop
set He=CreateTrigger()
call TriggerRegisterTimerEvent(He,1.,true)
call TriggerAddAction(He,function B1t)
set He=null
set Vy[1]=true
set Vy[2]=true
set Vy[3]=true
set Vy[4]=true
set Vy[5]=true
set Vy[6]=true
set Vy[7]=true
set Vy[8]=true
endfunction
function B1v takes nothing returns nothing
local integer NY=1
local trigger He
set Pd=m7(6,13,"TCoM ORPG v7.12a")
set OE[10]=m7(3,21,"Статистика боя")
loop
call m8(Pd,1,NY,8.)
call m8(Pd,2,NY,3.)
call m8(Pd,3,NY,6.)
call m8(Pd,4,NY,6.)
call m8(Pd,5,NY,9.)
call m8(Pd,6,NY,10.)
call nB(Pd,1,NY,true,false)
call nB(Pd,2,NY,true,false)
call nB(Pd,3,NY,true,false)
call nB(Pd,4,NY,true,false)
call nB(Pd,5,NY,true,false)
call nB(Pd,6,NY,true,false)
call nB(OE[10],1,NY,true,false)
call nB(OE[10],2,NY,true,false)
call nB(OE[10],3,NY,true,false)
call m8(OE[10],3,NY,3)
call nB(OE[10],1,10+NY,true,false)
call nB(OE[10],2,10+NY,true,false)
call nB(OE[10],3,10+NY,true,false)
call nB(Pd,2,1,true,true)
call nB(Pd,3,1,true,true)
call nB(Pd,4,1,true,true)
call nB(Pd,5,1,true,true)
call nB(Pd,6,1,true,true)
call m9(Pd,2,1,"war3mapImported\\BTNLVLhero.blp")
call m9(Pd,3,1,"war3mapImported\\BTNGoldHero.blp")
call m9(Pd,4,1,"war3mapImported\\BTNBloodMetk.blp")
call m9(Pd,5,1,"war3mapImported\\BTNTimerHero.blp")
call m9(Pd,6,1,"war3mapImported\\BTNTrofei.blp")
set NY=NY+1
exitwhen NY>11
endloop
call MultiboardDisplay(Pd,true)
set He=CreateTrigger()
call TriggerRegisterTimerEvent(He,1.,true)
call TriggerAddAction(He,function B1s)
set He=null
call m8(OE[10],1,1,8.)
call m8(OE[10],1,2,8.)
call m8(OE[10],2,1,15.)
call m8(OE[10],2,2,8.)
call nC(OE[10],1,1,"|c00ffff00Босс|r: ")
call nC(OE[10],1,2,"|c00ff9696Общий урон|r: ")
call nC(OE[10],1,12,"|c00ff9696Дроп|r: ")
call nB(OE[10],1,3,false,false)
call nB(OE[10],2,3,false,false)
call nB(OE[10],3,3,false,false)
call nB(OE[10],1,11,true,false)
call nB(OE[10],2,11,false,false)
call nB(OE[10],3,11,false,false)
call nB(OE[10],2,1,true,true)
call nB(OE[10],2,2,true,true)
call m9(OE[10],2,1,"war3mapImported\\BTNTarget.blp")
call m9(OE[10],2,2,"war3mapImported\\BTNHP.blp")
endfunction
function B1w takes nothing returns nothing
local unit ij=GetTriggerUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(ij))+1
if GetUnitTypeId(ij)==$48303033 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNcenarius.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNcenarius.blp")
elseif GetUnitTypeId(ij)==$48303344 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTN24.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTN24.blp")
elseif GetUnitTypeId(ij)==$48303550 or GetUnitTypeId(ij)==$48303730 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTN429.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTN429.blp")
elseif GetUnitTypeId(ij)==$48303147 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"ReplaceableTextures\\CommandButtons\\BTNInfernal.blp")
call m9(OE[Mc],1,1,"ReplaceableTextures\\CommandButtons\\BTNInfernal.blp")
elseif GetUnitTypeId(ij)==$48303437 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"ReplaceableTextures\\CommandButtons\\BTNNagaMyrmidon.blp")
call m9(OE[Mc],1,1,"ReplaceableTextures\\CommandButtons\\BTNNagaMyrmidon.blp")
elseif GetUnitTypeId(ij)==$48303738 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNLichKing.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNLichKing.blp")
elseif GetUnitTypeId(ij)==$48303534 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTN93894-96b7d71a1b4cbb9ce64a90518f6139932.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTN93894-96b7d71a1b4cbb9ce64a90518f6139932.blp")
elseif GetUnitTypeId(ij)==$48303032 or GetUnitTypeId(ij)==$48303655 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNability6 (13).blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNability6 (13).blp")
elseif GetUnitTypeId(ij)==$48303443 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNHeroMagni.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNHeroMagni.blp")
elseif GetUnitTypeId(ij)==$48303046 or GetUnitTypeId(ij)==$48303653 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTN Warrior.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTN Warrior.blp")
elseif GetUnitTypeId(ij)==$48303131 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\Ability_Mount_WhiteTiger.blp")
call m9(OE[Mc],1,1,"war3mapImported\\Ability_Mount_WhiteTiger.blp")
elseif GetUnitTypeId(ij)==$48303058 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"ReplaceableTextures\\CommandButtons\\BTNSorceress.blp")
call m9(OE[Mc],1,1,"ReplaceableTextures\\CommandButtons\\BTNSorceress.blp")
elseif GetUnitTypeId(ij)==$48303034 or GetUnitTypeId(ij)==$48303733 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNAlgalon.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNAlgalon.blp")
elseif GetUnitTypeId(ij)==$48303749 or GetUnitTypeId(ij)==$48303356 or GetUnitTypeId(ij)==$48303744 or GetUnitTypeId(ij)==$48303532 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNability2 (16).blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNability2 (16).blp")
elseif GetUnitTypeId(ij)==$48303036 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"ReplaceableTextures\\CommandButtons\\BTNNecromancer.blp")
call m9(OE[Mc],1,1,"ReplaceableTextures\\CommandButtons\\BTNNecromancer.blp")
elseif GetUnitTypeId(ij)==$48303031 or GetUnitTypeId(ij)==$48303650 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"BTNLevelQQDSJaina.blp")
call m9(OE[Mc],1,1,"BTNLevelQQDSJaina.blp")
elseif GetUnitTypeId(ij)==$48303353 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNicon1171.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNicon1171.blp")
elseif GetUnitTypeId(ij)==$4830304C then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNMeiqEiaVU4M.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNMeiqEiaVU4M.blp")
elseif GetUnitTypeId(ij)==$4F303032 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"ReplaceableTextures\\CommandButtons\\BTNGuldan.blp")
call m9(OE[Mc],1,1,"ReplaceableTextures\\CommandButtons\\BTNGuldan.blp")
elseif GetUnitTypeId(ij)==$4F303036 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNability3-10.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNability3-10.blp")
elseif GetUnitTypeId(ij)==$4F303052 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNLightingElemental.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNLightingElemental.blp")
elseif GetUnitTypeId(ij)==$4F303034 or GetUnitTypeId(ij)==$4F303053 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNAkama.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNAkama.blp")
elseif GetUnitTypeId(ij)==$5530304B then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp")
call m9(OE[Mc],1,1,"ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp")
elseif GetUnitTypeId(ij)==$55303133 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNDeathKnight.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNDeathKnight.blp")
elseif GetUnitTypeId(ij)==$45303057 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"ReplaceableTextures\\CommandButtons\\BTNDemoness.blp")
call m9(OE[Mc],1,1,"ReplaceableTextures\\CommandButtons\\BTNDemoness.blp")
elseif GetUnitTypeId(ij)==$4830314B or GetUnitTypeId(ij)==$48303735 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNnatisk-korolevy.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNnatisk-korolevy.blp")
elseif GetUnitTypeId(ij)==$4F303030 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"BTNGrommy.blp")
call m9(OE[Mc],1,1,"BTNGrommy.blp")
elseif GetUnitTypeId(ij)==$48303259 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"ReplaceableTextures\\CommandButtons\\BTNJaina.blp")
call m9(OE[Mc],1,1,"ReplaceableTextures\\CommandButtons\\BTNJaina.blp")
elseif GetUnitTypeId(ij)==$45303033 or GetUnitTypeId(ij)==$4530304B or GetUnitTypeId(ij)==$45303055 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"BTNBloodElfRanger_by67chrome.blp")
call m9(OE[Mc],1,1,"BTNBloodElfRanger_by67chrome.blp")
elseif GetUnitTypeId(ij)==$4F303049 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNScreenshot_2.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNScreenshot_2.blp")
elseif GetUnitTypeId(ij)==$48303030 or GetUnitTypeId(ij)==$4830374B then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNElfWarlock.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNElfWarlock.blp")
if GetUnitAbilityLevel(ij,$41314132)==0 and GetUnitAbilityLevel(ij,$41314130)==0 and GetUnitAbilityLevel(ij,$41314131)==0 then
call UnitAddAbility(ij,$41314130)
call SetPlayerAbilityAvailable(GetOwningPlayer(ij),$41314130,false)
call DestroyEffect(V6[GetPlayerId(GetOwningPlayer(ij))])
set V6[GetPlayerId(GetOwningPlayer(ij))]=AddSpecialEffectTarget("war3mapImported\\MagicCircle_Fire.mdx",ij,"origin")
endif
elseif GetUnitTypeId(ij)==$4F303051 then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNEmberKnight.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNEmberKnight.blp")
elseif GetUnitTypeId(ij)==$4830354D or GetUnitTypeId(ij)==$4830374F then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNDeath.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNDeath.blp")
elseif GetUnitTypeId(ij)==$4830364E then
call nB(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,true,true)
call m9(Pd,1,GetPlayerId(GetOwningPlayer(ij))+2,"war3mapImported\\BTNAllll.blp")
call m9(OE[Mc],1,1,"war3mapImported\\BTNAllll.blp")
endif
set ij=null
endfunction
function B1x takes nothing returns nothing
local trigger iY
local trigger ii
local region NN
local rect NO
set iY=CreateTrigger()
call TriggerRegisterTimerEventSingle(iY,.1)
call TriggerAddAction(iY,function B1u)
set iY=null
set iY=CreateTrigger()
call TriggerRegisterTimerEventSingle(iY,.1)
call TriggerAddAction(iY,function B1v)
set iY=null
set ii=CreateTrigger()
set NN=CreateRegion()
set NO=GR
call RegionAddRect(NN,NO)
call TriggerRegisterEnterRegion(ii,NN,null)
call TriggerAddAction(ii,function B1w)
set ii=null
set NO=null
set NN=null
endfunction
function B1y takes nothing returns boolean
if GetSpellAbilityId()==$41314156 then
return true
endif
return false
endfunction
function B1z takes nothing returns boolean
if not B1y() then
return false
endif
return true
endfunction
function B10 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function B11 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314153)*2)+I2R(GetHeroStr(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+(GetHeroAgi(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+GetHeroInt(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true))),ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function B12 takes nothing returns boolean
if GetSpellAbilityId()==$41314230 then
return true
endif
if GetSpellAbilityId()==$4131415A then
return true
endif
return false
endfunction
function B13 takes nothing returns boolean
if not B12() then
return false
endif
return true
endfunction
function B14 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function B15 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305336)*2)+I2R(GetHeroStr(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+(GetHeroAgi(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+GetHeroInt(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true))),ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function B16 takes nothing returns boolean
if GetSpellAbilityId()==$41314159 then
return true
endif
return false
endfunction
function B17 takes nothing returns boolean
if not B16() then
return false
endif
return true
endfunction
function B18 takes nothing returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if B1z() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305335)*2)+I2R(GetHeroStr(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+(GetHeroAgi(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+GetHeroInt(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true))),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314154)*2)+I2R(GetHeroStr(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+(GetHeroAgi(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+GetHeroInt(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true))),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
else
endif
if B13() then
set V2=GetSpellTargetLoc()
set ST=GetUnitsInRangeOfLocMatching(400.,V2,Condition(function B10))
call ForGroupBJ(ST,function B11)
call DestroyGroup(ST)
call RemoveLocation(V2)
else
endif
if B17() then
set V2=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(900.,V2,Condition(function B14))
call ForGroupBJ(ST,function B15)
call DestroyGroup(ST)
call RemoveLocation(V2)
else
endif
if GetSpellAbilityId()==$41313952 and GetUnitTypeId(GetTriggerUnit())==$6F303044 then
call mt(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(MV[Mc],$41305334)*2*(GetHeroStr(MV[Mc],true)+GetHeroAgi(MV[Mc],true)+GetHeroInt(MV[Mc],true)))
if GetRandomInt(1,7)==1 then
call SetUnitState(MV[Mc],UNIT_STATE_LIFE,GetUnitState(MV[Mc],UNIT_STATE_LIFE)+GetUnitState(MV[Mc],UNIT_STATE_MAX_LIFE)*(.04+.01*I2R(GetUnitAbilityLevel(MV[Mc],$41305334))))
call SetUnitState(MV[Mc],UNIT_STATE_MANA,GetUnitState(MV[Mc],UNIT_STATE_MANA)+GetUnitState(MV[Mc],UNIT_STATE_MAX_MANA)*(.04+.01*I2R(GetUnitAbilityLevel(MV[Mc],$41305334))))
endif
endif
endfunction
function B19 takes nothing returns nothing
set ik=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ik,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(ik,function B18)
endfunction
function B2B takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49305849) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2C takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49305848) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2D takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A46) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2E takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A47) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2F takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A48) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2G takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A45) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2H takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=40) then
return false
endif
return true
endfunction
function B2I takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930584C)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303135) then
return false
endif
return true
endfunction
function B2J takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930584A)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303136) then
return false
endif
return true
endfunction
function B2K takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304A4A)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E30354A) then
return false
endif
return true
endfunction
function B2L takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304A4D)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E303549) then
return false
endif
return true
endfunction
function B2M takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304A4C)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303050) then
return false
endif
return true
endfunction
function B2N takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304A4B)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6F303044) then
return false
endif
return true
endfunction
function B2O takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=51) then
return false
endif
if not (GetItemTypeId(GetManipulatedItem())==$49304A49) then
return false
endif
return true
endfunction
function B2P takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930584D)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303135) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==2) then
return false
endif
return true
endfunction
function B2Q takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930584B)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303136) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==2) then
return false
endif
return true
endfunction
function B2R takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D44)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E30354A) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==2) then
return false
endif
return true
endfunction
function B2S takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D43)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E303549) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==2) then
return false
endif
return true
endfunction
function B2T takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D41)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303050) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==2) then
return false
endif
return true
endfunction
function B2U takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D42)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6F303044) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==2) then
return false
endif
return true
endfunction
function B2V takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=52) then
return false
endif
if not (GetItemTypeId(GetManipulatedItem())==$49304D45) then
return false
endif
return true
endfunction
function B2W takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930584F)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303135) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==3) then
return false
endif
return true
endfunction
function B2X takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305850)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303136) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==3) then
return false
endif
return true
endfunction
function B2Y takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305854)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E30354A) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==3) then
return false
endif
return true
endfunction
function B2Z takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305853)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E303549) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==3) then
return false
endif
return true
endfunction
function B2a takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305851)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303050) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==3) then
return false
endif
return true
endfunction
function B2b takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305852)==true) then
return false
endif
if not (GetUnitTypeId(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6F303044) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==3) then
return false
endif
return true
endfunction
function B2c takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=55) then
return false
endif
if not (GetItemTypeId(GetManipulatedItem())==$4930584E) then
return false
endif
return true
endfunction
function B2d takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())==50) then
return false
endif
if not (GetItemTypeId(GetManipulatedItem())==$49304A4E) then
return false
endif
return true
endfunction
function B2e takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())==51) then
return false
endif
if not (GetItemTypeId(GetManipulatedItem())==$49304D39) then
return false
endif
return true
endfunction
function B2f takes nothing returns nothing
if B2H() then
if B2B() then
set UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305849))
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303135,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41314154)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41314154)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2C() then
set N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305848))
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303136,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41314153)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41314153)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2D() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A46))
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6F303044,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41305334)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305334)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2E() then
set Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A47))
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E303549,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41305335)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305335)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2F() then
set Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A48))
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354A,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41305333)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305333)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2G() then
set TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A45))
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303050,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41305336)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305336)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
else
endif
if B2O() then
if B2I() then
set UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584C))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314154,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,2)
else
endif
if B2J() then
set N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584A))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314153,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,2)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
else
endif
if B2K() then
set Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A4A))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305333,2)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,2)
else
endif
if B2L() then
set Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A4D))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305335,2)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,2)
else
endif
if B2M() then
set TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A4C))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305336,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,2)
else
endif
if B2N() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A4B))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305334,2)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
else
endif
else
endif
if B2V() then
if B2P() then
set UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584D))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314154,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,3)
else
endif
if B2Q() then
set N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584B))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314153,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,3)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
else
endif
if B2R() then
set Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D44))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305333,3)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,3)
else
endif
if B2S() then
set Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D43))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305335,3)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,3)
else
endif
if B2T() then
set TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D41))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305336,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,3)
else
endif
if B2U() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D42))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305334,3)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
else
endif
else
endif
if B2c() then
if B2W() then
set UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584F))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314154,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,4)
else
endif
if B2X() then
set N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305850))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314153,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,4)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
else
endif
if B2Y() then
set Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305854))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305333,4)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313631)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,4)
else
endif
if B2Z() then
set Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305853))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305335,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,4)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313631)
else
endif
if B2a() then
set TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D41))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305336,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,4)
else
endif
if B2b() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305852))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305334,4)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
else
endif
else
endif
if B2d() then
call SuspendHeroXPBJ(true,GetTriggerUnit())
set S4[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
call SetHeroLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],51,false)
set S4[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
call SuspendHeroXPBJ(false,GetTriggerUnit())
else
endif
if B2e() then
call SuspendHeroXPBJ(true,GetTriggerUnit())
set S4[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
call SetHeroLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],52,false)
set S4[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
call SuspendHeroXPBJ(false,GetTriggerUnit())
else
endif
endfunction
function B2g takes nothing returns nothing
set il=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(il,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(il,function B2f)
endfunction
function B2h takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B2i takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==4) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2j takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==3) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2k takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==4) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2l takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==3) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2m takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==4) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2n takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==3) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2o takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==4) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2p takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==3) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2q takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==2) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2r takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==2) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2s takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==2) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2t takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==2) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2u takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==1) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2v takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==1) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2w takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==1) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2x takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==1) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2y takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==1) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2z takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==2) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B20 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==3) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B21 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==4) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B22 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==1) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B23 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==2) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B24 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==3) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B25 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==4) then
return false
endif
if not (S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B26 takes nothing returns nothing
if B2i() then
set Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.12
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354A,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313631)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,4)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2j() then
set Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.09
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354A,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,3)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2k() then
set Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.12
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E303549,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,4)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313631)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2l() then
set Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.09
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E303549,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,3)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2m() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.12
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6F303044,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call RemoveLocation(V2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$53303059,4)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2n() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.09
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6F303044,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call RemoveLocation(V2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$53303059,3)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2o() then
set TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.12
set UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303050,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,4)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2p() then
set TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.09
set UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303050,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,3)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2q() then
set Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.06
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354A,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,2)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2r() then
set Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.06
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E303549,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,2)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2s() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.06
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6F303044,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$53303059,2)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2t() then
set TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.06
set UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303050,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,2)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2u() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6F303044,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2v() then
set Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nh[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E303549,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2w() then
set TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TS[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303050,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2x() then
set Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ne[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354A,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2y() then
set N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303136,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2z() then
set N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.06
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303136,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,2)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B20() then
set N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.09
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303136,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,3)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B21() then
set N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.12
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303136,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,4)
call UnitAddAbility(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B22() then
set UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303135,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B23() then
set UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303135,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,2)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,2)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B24() then
set UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303135,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,3)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,3)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B25() then
set UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V2=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303135,GetOwningPlayer(GetTriggerUnit()),V2,bj_UNIT_FACING)
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,4)
call SetUnitAbilityLevel(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,4)
call RemoveLocation(V2)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
endfunction
function B27 takes nothing returns nothing
set im=CreateTrigger()
call TriggerRegisterEnterRectSimple(im,z)
call TriggerAddCondition(im,Condition(function B2h))
call TriggerAddAction(im,function B26)
endfunction
function B28 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B29 takes nothing returns nothing
call IssueTargetOrderBJ(Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],"smart",GetOrderTargetUnit())
endfunction
function B3B takes nothing returns nothing
set in=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(in,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(in,Condition(function B28))
call TriggerAddAction(in,function B29)
endfunction
function B3C takes nothing returns boolean
if UnitHasBuffBJ(MV[GetPlayerId(GetOwningPlayer(GetKillingUnit()))],$42303446)==true then
return true
endif
if UnitHasBuffBJ(MV[GetPlayerId(GetOwningPlayer(GetKillingUnit()))],$42303852)==true then
return true
endif
return false
endfunction
function B3D takes nothing returns boolean
if not B3C() then
return false
endif
return true
endfunction
function B3E takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function B3F takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())/20.)
endfunction
function B3G takes nothing returns nothing
set V2=GetUnitLoc(GetTriggerUnit())
set ST=GetUnitsInRangeOfLocMatching(600.,V2,Condition(function B3E))
call ForGroupBJ(ST,function B3F)
call AddSpecialEffectLocBJ(V2,"Units\\NightElf\\Wisp\\WispExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(V2)
call DestroyGroup(ST)
endfunction
function B3H takes nothing returns nothing
set io=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(io,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(io,Condition(function B3D))
call TriggerAddAction(io,function B3G)
endfunction
function B3I takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B3J takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D30)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D33)==true) then
return false
endif
return true
endfunction
function B3K takes nothing returns nothing
if B3J() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D30))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D33))
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Душа Чака нашла свой покой. В награду Духи отдали вам какой-то ржавый ключ..
")
call CreateItemLoc($49304D31,GetRectCenter(EW))
else
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Отличное место для похорон.")
endif
endfunction
function B3L takes nothing returns nothing
set ip=CreateTrigger()
call TriggerRegisterEnterRectSimple(ip,EW)
call TriggerAddCondition(ip,Condition(function B3I))
call TriggerAddAction(ip,function B3K)
endfunction
function B3M takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D31)==true) then
return false
endif
return true
endfunction
function B3N takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D31))
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Добро пожаловать в |c00ff6969рунную долину!")
call ModifyGateBJ(bj_GATEOPERATION_OPEN,Hr)
endfunction
function B3O takes nothing returns nothing
set iq=CreateTrigger()
call TriggerRegisterEnterRectSimple(iq,EX)
call TriggerAddCondition(iq,Condition(function B3M))
call TriggerAddAction(iq,function B3N)
endfunction
function B3P takes nothing returns boolean
if not (GetSpellAbilityId()==$41305459) then
return false
endif
return true
endfunction
function B3Q takes nothing returns boolean
if not (TH==1) then
return false
endif
return true
endfunction
function B3R takes nothing returns boolean
if not (RectContainsUnit(ES,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3S takes nothing returns boolean
if not (TH==2) then
return false
endif
return true
endfunction
function B3T takes nothing returns boolean
if not (RectContainsUnit(EP,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3U takes nothing returns boolean
if not (TH==3) then
return false
endif
return true
endfunction
function B3V takes nothing returns boolean
if not (RectContainsUnit(EU,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3W takes nothing returns boolean
if not (TH==4) then
return false
endif
return true
endfunction
function B3X takes nothing returns boolean
if not (RectContainsUnit(EQ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3Y takes nothing returns boolean
if not (TH==5) then
return false
endif
return true
endfunction
function B3Z takes nothing returns boolean
if not (RectContainsUnit(ER,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3a takes nothing returns boolean
if not (TH==6) then
return false
endif
return true
endfunction
function B3b takes nothing returns boolean
if not (RectContainsUnit(EV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3c takes nothing returns boolean
if not (TH==7) then
return false
endif
return true
endfunction
function B3d takes nothing returns boolean
if not (RectContainsUnit(ET,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3e takes nothing returns nothing
if B3R() then
if B3Q() then
set TH=2
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ES),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3T() then
if B3S() then
set TH=3
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EP),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3V() then
if B3U() then
set TH=4
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EU),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3X() then
if B3W() then
set TH=5
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EQ),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3Z() then
if B3Y() then
set TH=6
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ER),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3b() then
if B3a() then
set TH=7
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EV),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3d() then
if B3c() then
set TH=8
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ET),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Мои поздравления. Готовтесь!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateNUnitsAtLoc(1,$6E303856,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(Ga),bj_UNIT_FACING)
call RemoveUnit(JZ)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
endfunction
function B3f takes nothing returns nothing
set VU=CreateTrigger()
call DisableTrigger(VU)
call TriggerRegisterAnyUnitEventBJ(VU,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VU,Condition(function B3P))
call TriggerAddAction(VU,function B3e)
endfunction
function B3g takes nothing returns boolean
if not (GetSpellAbilityId()==$41305459) then
return false
endif
return true
endfunction
function B3h takes nothing returns boolean
if not (TH==1) then
return false
endif
return true
endfunction
function B3i takes nothing returns boolean
if not (RectContainsUnit(EV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3j takes nothing returns boolean
if not (TH==2) then
return false
endif
return true
endfunction
function B3k takes nothing returns boolean
if not (RectContainsUnit(ES,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3l takes nothing returns boolean
if not (TH==3) then
return false
endif
return true
endfunction
function B3m takes nothing returns boolean
if not (RectContainsUnit(ET,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3n takes nothing returns boolean
if not (TH==4) then
return false
endif
return true
endfunction
function B3o takes nothing returns boolean
if not (RectContainsUnit(EP,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3p takes nothing returns boolean
if not (TH==5) then
return false
endif
return true
endfunction
function B3q takes nothing returns boolean
if not (RectContainsUnit(EU,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3r takes nothing returns boolean
if not (TH==6) then
return false
endif
return true
endfunction
function B3s takes nothing returns boolean
if not (RectContainsUnit(EQ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3t takes nothing returns boolean
if not (TH==7) then
return false
endif
return true
endfunction
function B3u takes nothing returns boolean
if not (RectContainsUnit(ER,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B3v takes nothing returns nothing
if B3i() then
if B3h() then
set TH=2
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EV),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3k() then
if B3j() then
set TH=3
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ES),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3m() then
if B3l() then
set TH=4
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ET),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3o() then
if B3n() then
set TH=5
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EP),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3q() then
if B3p() then
set TH=6
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EU),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3s() then
if B3r() then
set TH=7
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EQ),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B3u() then
if B3t() then
set TH=8
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ER),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Мои поздравления. Готовтесь!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateNUnitsAtLoc(1,$6E303856,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(Ga),bj_UNIT_FACING)
call RemoveUnit(JZ)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
endfunction
function B3w takes nothing returns nothing
set VY=CreateTrigger()
call DisableTrigger(VY)
call TriggerRegisterAnyUnitEventBJ(VY,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VY,Condition(function B3g))
call TriggerAddAction(VY,function B3v)
endfunction
function B3x takes nothing returns boolean
if not (GetSpellAbilityId()==$41305459) then
return false
endif
return true
endfunction
function B3y takes nothing returns boolean
if not (TH==1) then
return false
endif
return true
endfunction
function B3z takes nothing returns boolean
if not (RectContainsUnit(EV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B30 takes nothing returns boolean
if not (TH==2) then
return false
endif
return true
endfunction
function B31 takes nothing returns boolean
if not (RectContainsUnit(EP,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B32 takes nothing returns boolean
if not (TH==3) then
return false
endif
return true
endfunction
function B33 takes nothing returns boolean
if not (RectContainsUnit(EQ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B34 takes nothing returns boolean
if not (TH==4) then
return false
endif
return true
endfunction
function B35 takes nothing returns boolean
if not (RectContainsUnit(EU,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B36 takes nothing returns boolean
if not (TH==5) then
return false
endif
return true
endfunction
function B37 takes nothing returns boolean
if not (RectContainsUnit(ES,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B38 takes nothing returns boolean
if not (TH==6) then
return false
endif
return true
endfunction
function B39 takes nothing returns boolean
if not (RectContainsUnit(ET,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4B takes nothing returns boolean
if not (TH==7) then
return false
endif
return true
endfunction
function B4C takes nothing returns boolean
if not (RectContainsUnit(ER,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4D takes nothing returns nothing
if B3z() then
if B3y() then
set TH=2
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EV),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B31() then
if B30() then
set TH=3
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EP),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B33() then
if B32() then
set TH=4
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EQ),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B35() then
if B34() then
set TH=5
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EU),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B37() then
if B36() then
set TH=6
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ES),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B39() then
if B38() then
set TH=7
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ET),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4C() then
if B4B() then
set TH=8
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ER),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Мои поздравления. Готовтесь!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateNUnitsAtLoc(1,$6E303856,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(Ga),bj_UNIT_FACING)
call RemoveUnit(JZ)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
endfunction
function B4E takes nothing returns nothing
set VV=CreateTrigger()
call DisableTrigger(VV)
call TriggerRegisterAnyUnitEventBJ(VV,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VV,Condition(function B3x))
call TriggerAddAction(VV,function B4D)
endfunction
function B4F takes nothing returns boolean
if not (GetSpellAbilityId()==$41305459) then
return false
endif
return true
endfunction
function B4G takes nothing returns boolean
if not (TH==1) then
return false
endif
return true
endfunction
function B4H takes nothing returns boolean
if not (RectContainsUnit(EP,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4I takes nothing returns boolean
if not (TH==2) then
return false
endif
return true
endfunction
function B4J takes nothing returns boolean
if not (RectContainsUnit(ET,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4K takes nothing returns boolean
if not (TH==3) then
return false
endif
return true
endfunction
function B4L takes nothing returns boolean
if not (RectContainsUnit(ER,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4M takes nothing returns boolean
if not (TH==4) then
return false
endif
return true
endfunction
function B4N takes nothing returns boolean
if not (RectContainsUnit(EU,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4O takes nothing returns boolean
if not (TH==5) then
return false
endif
return true
endfunction
function B4P takes nothing returns boolean
if not (RectContainsUnit(ES,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4Q takes nothing returns boolean
if not (TH==6) then
return false
endif
return true
endfunction
function B4R takes nothing returns boolean
if not (RectContainsUnit(EV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4S takes nothing returns boolean
if not (TH==7) then
return false
endif
return true
endfunction
function B4T takes nothing returns boolean
if not (RectContainsUnit(EQ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4U takes nothing returns nothing
if B4H() then
if B4G() then
set TH=2
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EP),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4J() then
if B4I() then
set TH=3
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ET),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4L() then
if B4K() then
set TH=4
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ER),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4N() then
if B4M() then
set TH=5
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EU),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4P() then
if B4O() then
set TH=6
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ES),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4R() then
if B4Q() then
set TH=7
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EV),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4T() then
if B4S() then
set TH=8
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EQ),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Мои поздравления. Готовтесь!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateNUnitsAtLoc(1,$6E303856,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(Ga),bj_UNIT_FACING)
call RemoveUnit(JZ)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
endfunction
function B4V takes nothing returns nothing
set VW=CreateTrigger()
call DisableTrigger(VW)
call TriggerRegisterAnyUnitEventBJ(VW,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VW,Condition(function B4F))
call TriggerAddAction(VW,function B4U)
endfunction
function B4W takes nothing returns boolean
if not (GetSpellAbilityId()==$41305459) then
return false
endif
return true
endfunction
function B4X takes nothing returns boolean
if not (TH==1) then
return false
endif
return true
endfunction
function B4Y takes nothing returns boolean
if not (RectContainsUnit(EP,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4Z takes nothing returns boolean
if not (TH==2) then
return false
endif
return true
endfunction
function B4a takes nothing returns boolean
if not (RectContainsUnit(EV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4b takes nothing returns boolean
if not (TH==3) then
return false
endif
return true
endfunction
function B4c takes nothing returns boolean
if not (RectContainsUnit(EQ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4d takes nothing returns boolean
if not (TH==4) then
return false
endif
return true
endfunction
function B4e takes nothing returns boolean
if not (RectContainsUnit(ES,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4f takes nothing returns boolean
if not (TH==5) then
return false
endif
return true
endfunction
function B4g takes nothing returns boolean
if not (RectContainsUnit(ER,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4h takes nothing returns boolean
if not (TH==6) then
return false
endif
return true
endfunction
function B4i takes nothing returns boolean
if not (RectContainsUnit(ET,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4j takes nothing returns boolean
if not (TH==7) then
return false
endif
return true
endfunction
function B4k takes nothing returns boolean
if not (RectContainsUnit(EU,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4l takes nothing returns nothing
if B4Y() then
if B4X() then
set TH=2
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EP),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4a() then
if B4Z() then
set TH=3
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EV),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4c() then
if B4b() then
set TH=4
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EQ),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4e() then
if B4d() then
set TH=5
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ES),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4g() then
if B4f() then
set TH=6
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ER),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4i() then
if B4h() then
set TH=7
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ET),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4k() then
if B4j() then
set TH=8
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EU),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JZ)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Мои поздравления. Готовтесь!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateNUnitsAtLoc(1,$6E303856,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(Ga),bj_UNIT_FACING)
call RemoveUnit(JZ)
else
set TH=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JZ,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
endfunction
function B4m takes nothing returns nothing
set VX=CreateTrigger()
call DisableTrigger(VX)
call TriggerRegisterAnyUnitEventBJ(VX,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VX,Condition(function B4W))
call TriggerAddAction(VX,function B4l)
endfunction
function B4n takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B4o takes nothing returns nothing
local integer MC=0
set V2=Location(5888.,11600.)
call SetUnitPositionLoc(GetTriggerUnit(),V2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V2,0)
call RemoveLocation(V2)
call SetUnitOwner(Kz,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitPositionLoc(Kz,GetRectCenter(FW))
call ShowUnit(Kz,true)
call SetUnitInvulnerable(Kz,true)
call SetUnitLifePercentBJ(Kz,100)
set Tv[10]=90.
set Tv[11]=85.
set Tv[12]=75.
set Tv[13]=98.
set Tv[14]=90.
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"Босс |c00ffff00Джек|r. |c0000ffffРезист к магии|r: "+(I2S(GetUnitAbilityLevel(Kz,$41313756)*3)+"%"))
if GetUnitAbilityLevel(Kz,$41304456)>=1 then
set Tv[15]=97.
endif
call SaveInteger(NZ,GetHandleId(Kz),1,0)
loop
call SaveInteger(NZ,GetHandleId(Kz),2+MC,0)
set MC=MC+1
exitwhen MC==7
endloop
endfunction
function B4p takes nothing returns nothing
set dd=CreateTrigger()
call DisableTrigger(dd)
call TriggerRegisterEnterRectSimple(dd,Ga)
call TriggerAddCondition(dd,Condition(function B4n))
call TriggerAddAction(dd,function B4o)
endfunction
function B4q takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B4r takes nothing returns nothing
call RemoveItem(GetEnumItem())
endfunction
function B4s takes nothing returns nothing
call RemoveItem(GetEnumItem())
endfunction
function B4t takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=TT[1]) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())<=TT[2]) then
return false
endif
return true
endfunction
function B4u takes nothing returns nothing
if B4t() then
call EnumItemsInRectBJ(DU,function B4r)
call EnumItemsInRectBJ(FT,function B4s)
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(FC))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),GetRectCenter(FC),0)
else
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c00ff9696Ваш Уровень не соответствует боссу Арены!")
endif
endfunction
function B4v takes nothing returns nothing
set ir=CreateTrigger()
call TriggerRegisterEnterRectSimple(ir,DS)
call TriggerAddCondition(ir,Condition(function B4q))
call TriggerAddAction(ir,function B4u)
endfunction
function B4w takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B4x takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(BB))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),GetRectCenter(BB),0)
endfunction
function B4y takes nothing returns nothing
set is=CreateTrigger()
call TriggerRegisterEnterRectSimple(is,DR)
call TriggerAddCondition(is,Condition(function B4w))
call TriggerAddAction(is,function B4x)
endfunction
function B4z takes nothing returns boolean
if not (RectContainsUnit(E0,MV[GetConvertedPlayerId(GetTriggerPlayer())-1])==true) then
return false
endif
return true
endfunction
function B40 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B41 takes nothing returns nothing
local location Hv=Location(-15500,2290)
call SetUnitPositionLoc(GetEnumUnit(),Hv)
call RemoveLocation(Hv)
set Hv=null
endfunction
function B42 takes nothing returns nothing
local location Hv
local group Nb=CreateGroup()
local boolexpr iu
if GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=1 and GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])<=5 then
set TT[1]=1
set TT[2]=5
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$65303044,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Treant|r. Уровень входа: |c0000ff001-5|r")
elseif GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=6 and GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])<=10 then
set TT[1]=6
set TT[2]=10
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$6E30334D,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Вождь Беорнов|r. Уровень входа: |c0000ff006-10|r")
elseif GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=11 and GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])<=15 then
set TT[1]=11
set TT[2]=15
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$6E30334F,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Паук|r. Уровень входа: |c0000ff0011-15|r")
elseif GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=16 and GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])<=20 then
set TT[1]=16
set TT[2]=20
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$6E303350,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Серинокс|r. Уровень входа: |c0000ff0016-20|r")
elseif GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=21 and GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])<=25 then
set TT[1]=21
set TT[2]=25
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$6E303351,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Осадный Голем|r. Уровень входа: |c0000ff0021-25|r")
elseif GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=26 and GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])<=30 then
set TT[1]=26
set TT[2]=30
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$75303048,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступна |c00ff7f00Обсидиановая Статуя|r. Уровень входа: |c0000ff0026-30|r")
elseif GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=31 and GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])<=35 then
set TT[1]=31
set TT[2]=35
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$68303056,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Краб-отшельник|r. Уровень входа: |c0000ff0031-35|r")
elseif GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=36 and GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])<=40 then
set TT[1]=36
set TT[2]=40
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$6830305A,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Fire Boss|r. Уровень входа: |c0000ff0036-40|r")
elseif GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=41 and GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])<=45 then
set TT[1]=41
set TT[2]=45
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$68303130,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Venom Boss|r. Уровень входа: |c0000ff0041-45|r")
elseif GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=46 and GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])<=50 then
set TT[1]=46
set TT[2]=50
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$68303059,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Water Boss|r. Уровень входа: |c0000ff0046-50|r")
elseif GetUnitLevel(MV[GetPlayerId(GetTriggerPlayer())])>=51 then
set TT[1]=51
set TT[2]=60
set Hv=Location(-15700,-130)
call SetUnitPositionLoc(Ju,Hv)
set iu=Condition(function mq)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B40)
set iu=Condition(function mp)
call GroupEnumUnitsInRect(Nb,FC,iu)
call ForGroup(Nb,function B41)
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=Location(-13900,14770)
call CreateUnit(Player(10),$68303554,GetLocationX(Hv),GetLocationY(Hv),0)
call RemoveLocation(Hv)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Темный Феникс|r. Уровень входа: |c0000ff0051+|r")
endif
call DestroyBoolExpr(iu)
call DestroyGroup(Nb)
call RemoveLocation(Hv)
set Hv=null
set iu=null
set Nb=null
endfunction
function B43 takes nothing returns nothing
set it=CreateTrigger()
call TriggerRegisterPlayerChatEvent(it,Player(0),"-бой",true)
call TriggerRegisterPlayerChatEvent(it,Player(1),"-бой",true)
call TriggerRegisterPlayerChatEvent(it,Player(2),"-бой",true)
call TriggerRegisterPlayerChatEvent(it,Player(3),"-бой",true)
call TriggerRegisterPlayerChatEvent(it,Player(4),"-бой",true)
call TriggerRegisterPlayerChatEvent(it,Player(5),"-бой",true)
call TriggerRegisterPlayerChatEvent(it,Player(6),"-бой",true)
call TriggerRegisterPlayerChatEvent(it,Player(7),"-бой",true)
call TriggerRegisterPlayerChatEvent(it,Player(0),"-fight",true)
call TriggerRegisterPlayerChatEvent(it,Player(1),"-fight",true)
call TriggerRegisterPlayerChatEvent(it,Player(2),"-fight",true)
call TriggerRegisterPlayerChatEvent(it,Player(3),"-fight",true)
call TriggerRegisterPlayerChatEvent(it,Player(4),"-fight",true)
call TriggerRegisterPlayerChatEvent(it,Player(5),"-fight",true)
call TriggerRegisterPlayerChatEvent(it,Player(6),"-fight",true)
call TriggerRegisterPlayerChatEvent(it,Player(7),"-fight",true)
call TriggerRegisterPlayerChatEvent(it,Player(0),"-,jq",true)
call TriggerRegisterPlayerChatEvent(it,Player(1),"-,jq",true)
call TriggerRegisterPlayerChatEvent(it,Player(2),"-,jq",true)
call TriggerRegisterPlayerChatEvent(it,Player(3),"-,jq",true)
call TriggerRegisterPlayerChatEvent(it,Player(4),"-,jq",true)
call TriggerRegisterPlayerChatEvent(it,Player(5),"-,jq",true)
call TriggerRegisterPlayerChatEvent(it,Player(6),"-,jq",true)
call TriggerRegisterPlayerChatEvent(it,Player(7),"-,jq",true)
call TriggerAddCondition(it,Condition(function B4z))
call TriggerAddAction(it,function B42)
endfunction
function B44 takes nothing returns boolean
if not (RectContainsUnit(FC,GetTriggerUnit())==true) then
return false
endif
if not (GetUnitTypeId(GetTriggerUnit())!=$68303555) then
return false
endif
return true
endfunction
function B45 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B46 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==0) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=5) then
return false
endif
return true
endfunction
function B47 takes nothing returns nothing
if B46() then
call UnitAddAbility(GetEnumUnit(),$41314452)
set NG=false
call UnitAddItemByIdSwapped($4930304C,GetEnumUnit())
call SetItemUserData(GetLastCreatedItem(),GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit())))
set NG=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+600
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+30
else
endif
endfunction
function B48 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$65303044) then
return false
endif
return true
endfunction
function B49 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5B takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$4930304C)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==1) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=6) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=10) then
return false
endif
return true
endfunction
function B5C takes nothing returns nothing
if B5B() then
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),2)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$4930304C))
set NG=false
call UnitAddItemByIdSwapped($49304739,GetEnumUnit())
set NG=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+900
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+45
else
endif
endfunction
function B5D takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E30334D) then
return false
endif
return true
endfunction
function B5E takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5F takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304739)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==2) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=11) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=15) then
return false
endif
return true
endfunction
function B5G takes nothing returns nothing
if B5F() then
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),3)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304739))
set NG=false
call UnitAddItemByIdSwapped($49304E43,GetEnumUnit())
set NG=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1200
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+60
else
endif
endfunction
function B5H takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E30334F) then
return false
endif
return true
endfunction
function B5I takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5J takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E43)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==3) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=16) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=20) then
return false
endif
return true
endfunction
function B5K takes nothing returns nothing
if B5J() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E43))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),4)
set NG=false
call UnitAddItemByIdSwapped($49304E44,GetEnumUnit())
set NG=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1800
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+90
else
endif
endfunction
function B5L takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303350) then
return false
endif
return true
endfunction
function B5M takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5N takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E44)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==4) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=21) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=25) then
return false
endif
return true
endfunction
function B5O takes nothing returns nothing
if B5N() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E44))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),5)
set NG=false
call UnitAddItemByIdSwapped($49304E46,GetEnumUnit())
set NG=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2100
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+120
else
endif
endfunction
function B5P takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303351) then
return false
endif
return true
endfunction
function B5Q takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5R takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E46)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==5) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=26) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=30) then
return false
endif
return true
endfunction
function B5S takes nothing returns nothing
if B5R() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E46))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),6)
set NG=false
call UnitAddItemByIdSwapped($49304E47,GetEnumUnit())
set NG=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3000
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+150
else
endif
endfunction
function B5T takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303048) then
return false
endif
return true
endfunction
function B5U takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5V takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E47)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==6) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=31) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=35) then
return false
endif
return true
endfunction
function B5W takes nothing returns nothing
if B5V() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E47))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),7)
set NG=false
call UnitAddItemByIdSwapped($49304E48,GetEnumUnit())
set NG=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+4500
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+180
else
endif
endfunction
function B5X takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303056) then
return false
endif
return true
endfunction
function B5Y takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5Z takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E48)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==7) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=36) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=40) then
return false
endif
return true
endfunction
function B5a takes nothing returns nothing
if B5Z() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E48))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),8)
set NG=false
call UnitAddItemByIdSwapped($49304E4A,GetEnumUnit())
set NG=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+6000
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+210
else
endif
endfunction
function B5b takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830305A) then
return false
endif
return true
endfunction
function B5c takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5d takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E4A)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==8) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=41) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=45) then
return false
endif
return true
endfunction
function B5e takes nothing returns nothing
if B5d() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E4A))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),9)
set NG=false
call UnitAddItemByIdSwapped($49304E49,GetEnumUnit())
set NG=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+7500
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+300
else
endif
endfunction
function B5f takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303130) then
return false
endif
return true
endfunction
function B5g takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5h takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())<50) then
return false
endif
return true
endfunction
function B5i takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())<49) then
return false
endif
return true
endfunction
function B5j takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E49)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==9) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=46) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=50) then
return false
endif
return true
endfunction
function B5k takes nothing returns nothing
if B5j() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E49))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),10)
set NG=false
call UnitAddItemByIdSwapped($49304E45,GetEnumUnit())
set NG=true
if B5i() then
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
else
if B5h() then
call SetHeroLevel(GetEnumUnit(),50,false)
set To[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=50
else
endif
endif
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+9000
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+450
else
endif
endfunction
function B5l takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303059) then
return false
endif
return true
endfunction
function B5m takes nothing returns boolean
if not (GetRandomInt(1,4)==1) then
return false
endif
return true
endfunction
function B5n takes nothing returns boolean
if not (GetRandomInt(1,4)==1) then
return false
endif
return true
endfunction
function B5o takes nothing returns boolean
if not (GetRandomInt(1,4)==1) then
return false
endif
return true
endfunction
function B5p takes nothing returns boolean
if not (GetRandomInt(1,20)==1) then
return false
endif
return true
endfunction
function B5q takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5r takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==10) then
return false
endif
return true
endfunction
function B5s takes nothing returns nothing
if B5r() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+12000
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),11)
set NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NL[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+600
else
endif
endfunction
function B5t takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303554) then
return false
endif
return true
endfunction
function B5u takes nothing returns nothing
call SetUnitPositionLoc(Ju,GetRectCenter(Ez))
if B48() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($73656872,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff700|r опыта, |c00ffff00200|r золота, |c00ff969610|r кровавых меток.")
set ST=GetUnitsInRectMatching(FC,Condition(function B45))
call ForGroupBJ(ST,function B47)
call DestroyGroup(ST)
else
endif
if B5D() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($77696C64,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff1000|r опыта, |c00ffff00300|r золота, |c00ff969615|r кровавых меток.")
set ST=GetUnitsInRectMatching(FC,Condition(function B49))
call ForGroupBJ(ST,function B5C)
call DestroyGroup(ST)
else
endif
if B5H() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($7370726E,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff1500|r опыта, |c00ffff00400|r золота, |c00ff969620|r кровавых меток.")
set ST=GetUnitsInRectMatching(FC,Condition(function B5E))
call ForGroupBJ(ST,function B5G)
call DestroyGroup(ST)
else
endif
if B5L() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($776E6575,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff1800|r опыта, |c00ffff00600|r золота, |c00ff969630|r кровавых меток.")
set ST=GetUnitsInRectMatching(FC,Condition(function B5I))
call ForGroupBJ(ST,function B5K)
call DestroyGroup(ST)
else
endif
if B5P() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($72737431,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff2200|r опыта, |c00ffff00700|r золота, |c00ff969640|r кровавых меток.")
set ST=GetUnitsInRectMatching(FC,Condition(function B5M))
call ForGroupBJ(ST,function B5O)
call DestroyGroup(ST)
else
endif
if B5T() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($62726163,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff2900|r опыта, |c00ffff001000|r золота, |c00ff969650|r кровавых меток.")
set ST=GetUnitsInRectMatching(FC,Condition(function B5Q))
call ForGroupBJ(ST,function B5S)
call DestroyGroup(ST)
else
endif
if B5X() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($61666163,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff3500|r опыта, |c00ffff001500|r золота, |c00ff969660|r кровавых меток.")
set ST=GetUnitsInRectMatching(FC,Condition(function B5U))
call ForGroupBJ(ST,function B5W)
call DestroyGroup(ST)
else
endif
if B5b() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($77737764,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff4500|r опыта, |c00ffff002000|r золота, |c00ff969670|r кровавые метки.")
set ST=GetUnitsInRectMatching(FC,Condition(function B5Y))
call ForGroupBJ(ST,function B5a)
call DestroyGroup(ST)
else
endif
if B5f() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($77687764,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff6000|r опыта, |c00ffff002500|r золота, |c00ff9696100|r кровавые метки.")
set ST=GetUnitsInRectMatching(FC,Condition(function B5c))
call ForGroupBJ(ST,function B5e)
call DestroyGroup(ST)
else
endif
if B5l() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($6876616C,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff10000|r опыта, |c00ffff003000|r золота, |c00ff9696150|r кровавых меток.")
set ST=GetUnitsInRectMatching(FC,Condition(function B5g))
call ForGroupBJ(ST,function B5k)
call DestroyGroup(ST)
else
endif
if B5t() then
call EnableTrigger(cn)
set TT[1]=0
set TT[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Uu[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ku,"war3mapImported\\QuestYellow1.mdx")
set Uu[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($676D6672,GetRectCenter(FC))
call SetItemUserData(GetLastCreatedItem(),10)
if B5m() then
call CreateItemLoc($49305552,GetRectCenter(FC))
call SetItemUserData(GetLastCreatedItem(),10)
else
endif
if B5n() then
call CreateItemLoc($49305554,GetRectCenter(FC))
call SetItemUserData(GetLastCreatedItem(),10)
else
endif
if B5o() then
call CreateItemLoc($49305550,GetRectCenter(FC))
call SetItemUserData(GetLastCreatedItem(),10)
else
endif
if B5p() then
call CreateItemLoc($4930544F,GetRectCenter(FC))
call SetItemUserData(GetLastCreatedItem(),10)
call CreateTextTagUnitBJ("Удача! Вам выпал |c00ff9696\"Bomb\"",GetTriggerUnit(),0,15.,100.,100.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
endif
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ffff004000|r золота, |c00ff9696200|r кровавых меток.")
set ST=GetUnitsInRectMatching(FC,Condition(function B5q))
call ForGroupBJ(ST,function B5s)
call DestroyGroup(ST)
else
endif
endfunction
function B5v takes nothing returns nothing
set iv=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(iv,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(iv,Condition(function B44))
call TriggerAddAction(iv,function B5u)
endfunction
function B5w takes unit Hw returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
if GetPlayerName(Player(Mc))=="LTz.V" and Nd[Mc+11]==null then
set Nd[Mc+11]=CreateUnitAtLoc(Player(Mc),$6E303838,GetUnitLoc(Hw),0)
call AddSpecialEffectTarget("war3mapImported\\Windwalk Blue Soul.mdl",Nd[Mc+11],"origin")
endif
endfunction
function B5x takes nothing returns nothing
local unit Hw=GetEnumUnit()
local integer MC
if GetOwningPlayer(Hw)==Player(11) then
call UnitAddAbility(Hw,$41313756)
set MC=GetUnitLevel(Hw)*3+GetUnitAbilityLevel(Hw,$42303232)
call SetUnitAbilityLevel(Hw,$41313756,MC)
endif
set Hw=null
endfunction
function B5y takes nothing returns nothing
local group Nb=CreateGroup()
local boolexpr Nc=Condition(function mq)
call GroupEnumUnitsInRect(Nb,GetPlayableMapRect(),Nc)
call DestroyBoolExpr(Nc)
call ForGroup(Nb,function B5x)
call DestroyGroup(Nb)
set Nc=null
set Nb=null
endfunction
function B5z takes unit Hw returns nothing
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
if GetUnitTypeId(NM[2+2*Mc])==$6E30384B then
call nb(Hw,0,0,0,0,0,0,"+100 стат, 4000 МР, 450 атк, 70 зщ.",100,100,100)
call UnitAddAbility(MV[Mc],$4131374F)
call UnitAddAbility(MV[Mc],$41303458)
call UnitAddAbility(MV[Mc],$41305050)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303835 then
set hJ[Mc+1]="+4000 МР"
call UnitAddAbility(MV[Mc],$41304F57)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303834 then
set hJ[Mc+1]="+70 защиты"
call UnitAddAbility(MV[Mc],$41303458)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303833 then
set hJ[Mc+1]="+450 атаки"
call UnitAddAbility(MV[Mc],$41305050)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303532 then
set hJ[Mc+1]="+50 стат, +2000 НР, МР"
call UnitAddAbility(MV[Mc],$41304337)
call UnitAddAbility(MV[Mc],$41304339)
call nb(Hw,0,0,0,0,0,0,"+50 стат, +2000 НР, МР",50,50,50)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303531 then
call nb(Hw,0,0,0,0,0,0,"+50 стат",50,50,50)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303832 then
set hJ[Mc+1]="+2000 МР"
call UnitAddAbility(MV[Mc],$4131374F)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303830 then
set hJ[Mc+1]="+35 защиты"
call UnitAddAbility(MV[Mc],$4131374E)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303831 then
set hJ[Mc+1]="+200 атаки"
call UnitAddAbility(MV[Mc],$4131374D)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303746 then
call nb(Hw,.03,.03,.03,.03,.03,3,"+200 стат, 3% Экстрактов",200,200,200)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303743 then
call nb(Hw,0,0,0,.04,.04,0,"+300 разума, 4% Магии, Жизни",0,0,300)
call SetUnitAbilityLevel(NM[2+2*Mc],$41313536,2)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303742 then
call nb(Hw,0,0,.05,0,0,0,"+300 ловкости, 5% Разрушения",0,300,0)
call SetUnitAbilityLevel(NM[2+2*Mc],$41313536,2)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303741 then
call nb(Hw,.04,.04,0,0,0,0,"+300 силы, 4% Силы, Защиты",300,0,0)
call SetUnitAbilityLevel(NM[2+2*Mc],$41313536,2)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E30384D then
call nb(Hw,.06,.06,.06,.06,.06,6,"+200 стат, 6% Экстрактов",200,200,200)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E30384E then
call nb(Hw,.08,.08,.08,.08,.08,8,"+250 стат, 8% Экстрактов",250,250,250)
call SetUnitAbilityLevel(NM[2+2*Mc],$41304347,2)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E30384F then
call nb(Hw,.11,.11,.11,.11,.11,11,"+300 стат, 11% Экстрактов",300,300,300)
call SetUnitAbilityLevel(NM[2+2*Mc],$41304347,3)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303449 then
call nb(Hw,.13,.13,.13,.13,.13,13,"+350 стат, 13% Экстрактов",350,350,350)
call SetUnitAbilityLevel(NM[2+2*Mc],$41304347,4)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303850 then
call nb(Hw,.07,.07,0,0,0,0,"+400 Силы, 7% Силы, защиты",400,0,0)
call SetUnitAbilityLevel(NM[2+2*Mc],$41313536,3)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303851 then
call nb(Hw,0,0,0,.07,.07,0,"+400 разума, 7% Магии, Жизни",0,0,400)
call SetUnitAbilityLevel(NM[2+2*Mc],$41313536,3)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303852 then
call nb(Hw,0,0,.09,0,0,0,"+400 ловкости, 9% разрушения",300,300,300)
call SetUnitAbilityLevel(NM[2+2*Mc],$41313536,3)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303853 then
call nb(Hw,.09,.09,.09,.09,.09,9,"+450 стат, 9% Экстрактов",450,450,450)
call SetUnitAbilityLevel(NM[2+2*Mc],$41313536,4)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303533 then
call nb(Hw,0,0,0,0,0,0,"+120 стат",120,120,120)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E30364F then
call nb(Hw,0,0,0,0,0,0,"+25 стат",25,25,25)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303632 then
call nb(Hw,0,0,0,0,0,0,"+60 стат",60,60,60)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303349 then
call nb(Hw,.03,.03,.03,.03,.03,3,"+80 стат, 3% к Экстрактам",80,80,80)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E30334B then
call nb(Hw,.06,.06,.06,.06,.06,6,"+130 стат, 6% к Экстрактам",130,130,130)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303348 then
call nb(Hw,.1,.1,.1,.1,.1,10,"+160 стат, 10% к Экстрактам",160,160,160)
call SetUnitAbilityLevel(NM[2+2*Mc],$41313944,2)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E303752 then
call nb(Hw,.14,.14,.14,.14,.14,14,"+200 стат, 14% к Экстрактам",200,200,200)
call SetUnitAbilityLevel(NM[2+2*Mc],$41313944,3)
elseif GetUnitTypeId(NM[2+2*Mc])==$6E30344A or GetUnitTypeId(NM[2+2*Mc])==$6E303452 then
call nb(Hw,.17,.17,.17,.17,.17,17,"+250 стат, 17% к Экстрактам",250,250,250)
call SetUnitAbilityLevel(NM[2+2*Mc],$41313944,4)
endif
call UnitAddAbility(MV[Mc],$41304648)
endfunction
function B50 takes nothing returns nothing
local unit ij=GetTriggerUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(ij))
local string iw=SubString(PJ,32,33)+SubString(PJ,39,40)+SubString(PJ,47,48)+SubString(PJ,49,50)+SubString(PJ,0,1)+SubString(PJ,7,8)+SubString(PJ,0,1)
local string ix=SubString(PJ,47,48)+SubString(PJ,39,40)+SubString(PJ,47,48)+SubString(PJ,27,28)+SubString(PJ,47,48)+SubString(PJ,39,40)+SubString(PJ,3,4)+SubString(PJ,31,32)+SubString(PJ,11,12)+SubString(PJ,63,64)+SubString(PJ,63,64)
local string iy=SubString(PJ,22,23)+SubString(PJ,11,12)+SubString(PJ,45,46)+SubString(PJ,23,24)+SubString(PJ,51,52)+SubString(PJ,33,34)+SubString(PJ,27,28)+SubString(PJ,39,40)
local unit Me
local location Np
if OG[Mc]==iw or OG[Mc]==ix or OG[Mc]==iy then
call RemoveUnit(ij)
endif
if IsUnitType(ij,UNIT_TYPE_HERO) then
if GetLocalPlayer()==GetOwningPlayer(ij) then
call Preloader("TCoM_ORPG\\anickname\\nick.sav")
if GetPlayerName(Player(15))=="noname" then
call PreloadGenClear()
call Preload("\")\ncall SetPlayerName(Player(15),\""+GetPlayerName(GetOwningPlayer(ij))+"\")\n//")
call PreloadGenEnd("TCoM_ORPG\\anickname\\nick.sav")
else
if GetPlayerName(Player(15))==OG[Mc] then
call SetPlayerName(Player(15),"noname")
else
call SetPlayerName(Player(15),"noname")
endif
endif
endif
if GetUnitLevel(ij)<=2 then
call DisplayTextToPlayer(Player(Mc),.5,0,"Новенький в карте? Введите в чат |c00ffff00–help|r дабы пройти получить краткую информацию о основных системах TCoM ORPG")
endif
endif
if GetPlayerName(GetOwningPlayer(ij))=="Jeka_Pycckuu" then
set OF[Mc]="|c005a24f8"
endif
if IsUnitType(ij,UNIT_TYPE_HERO)==true then
set MV[Mc]=ij
call B5w(ij)
if iz[Mc]!=true then
set iz[Mc]=true
call UnitAddAbility(ij,$41313041)
set MM=MM+1
call SetPlayerHandicapXP(Player(Mc),0.*.01)
if MM>=4 then
if not (GetPlayerName(Player(8))=="TCOM") then
endif
endif
call SetUnitAbilityLevel(IO,$41304243,MM)
call SetUnitAbilityLevel(IO,$41304244,MM)
call SetUnitAbilityLevel(IO,$53303050,MM)
call B5y()
call TriggerRegisterUnitEvent(X1,ij,EVENT_UNIT_DAMAGED)
set Me=CreateUnitAtLoc(Player(Mc),$65777370,OffsetLocation(Location(-15610,1555),0,-(100*Mc)),0)
if GetUnitLevel(ij)>=6 and GetUnitAbilityLevel(ij,$41314452)<1 then
call UnitAddAbility(ij,$41314452)
call SetUnitAbilityLevel(ij,$41314452,GetUnitLevel(ij)/5)
endif
set MV[Mc]=ij
call UnitAddAbility(MV[Mc],$41305839)
call SetPlayerAbilityAvailable(Player(Mc),$41305839,false)
set Np=GetUnitLoc(MV[Mc])
if NM[2+2*Mc]==null then
set NM[2+2*Mc]=CreateUnitAtLoc(GetOwningPlayer(MV[Mc]),$6E303133,Np,270.)
endif
call RemoveLocation(Np)
set Np=null
set To[Mc+1]=GetUnitLevel(MV[Mc])
set NK[Mc+1]=GetPlayerState(Player(Mc),PLAYER_STATE_RESOURCE_GOLD)*3
set NL[Mc+1]=GetPlayerState(Player(Mc),PLAYER_STATE_RESOURCE_LUMBER)*3
set Tu[Mc+1]=true
set S4[Mc+1]=false
set S4[Mc+11]=true
set TF[Mc+1]=true
set Sy[Mc+1]=true
set S2[Mc+1]=true
call UnitAddAbility(ij,$41496432)
if GetUnitAbilityLevel(MV[Mc],$41313357)>=1 then
call nQ(MV[Mc],$41313357,GetUnitAbilityLevel(MV[Mc],$41313357),false)
elseif GetUnitAbilityLevel(MV[Mc],$41314330)>=1 then
call nQ(MV[Mc],$41314330,GetUnitAbilityLevel(MV[Mc],$41314330),false)
elseif GetUnitAbilityLevel(MV[Mc],$41314332)>=1 then
call nQ(MV[Mc],$41314332,GetUnitAbilityLevel(MV[Mc],$41314332),false)
elseif GetUnitAbilityLevel(MV[Mc],$41314341)>=1 then
call nQ(MV[Mc],$41314341,GetUnitAbilityLevel(MV[Mc],$41314341),false)
elseif GetUnitAbilityLevel(ij,$41313234)>=1 then
call nQ(MV[Mc],$41313234,GetUnitAbilityLevel(MV[Mc],$41313234),false)
elseif GetUnitAbilityLevel(MV[Mc],$41313247)>=1 then
call nQ(MV[Mc],$41313247,GetUnitAbilityLevel(MV[Mc],$41313247),false)
elseif GetUnitAbilityLevel(MV[Mc],$41314335)>=1 then
call nQ(MV[Mc],$41314335,GetUnitAbilityLevel(MV[Mc],$41314335),false)
endif
endif
endif
if GetUnitLevel(ij)==75 then
set NM[2+2*Mc]=ij
endif
if GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(ij))],$41304648)<1 then
call B5z(ij)
endif
set ij=null
set Me=null
endfunction
function B51 takes nothing returns nothing
local trigger ii=CreateTrigger()
local region NN=CreateRegion()
local rect NO=GR
local timer He
local integer PM
call RegionAddRect(NN,NO)
call TriggerRegisterEnterRegion(ii,NN,null)
call TriggerAddAction(ii,function B50)
set ii=null
set NO=null
set NN=null
set He=CreateTimer()
set PM=GetHandleId(He)
if PM!=$10579E then
endif
set He=null
endfunction
function B52 takes nothing returns nothing
local integer MC=0
loop
if GetPlayerSlotState(Player(MC))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(Player(MC))==MAP_CONTROL_USER then
if GetUnitAbilityLevel(MV[MC],$41305052)>=1 or GetUnitAbilityLevel(MV[MC],$41305247)>=1 then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(MV[MC]))+"получил достижение |c0000ff00\"Играть, играть, играть!\"")
if GetUnitAbilityLevel(MV[MC],$41305235)>=1 then
call UnitRemoveAbility(MV[MC],$41305235)
call UnitAddAbility(MV[MC],$41305247)
else
call UnitAddAbility(MV[MC],$41305052)
endif
endif
endif
set MC=MC+1
exitwhen MC>7
endloop
endfunction
function B53 takes nothing returns nothing
local integer MC=0
local integer i0=0
loop
if GetPlayerSlotState(Player(MC))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(Player(MC))==MAP_CONTROL_USER then
set i0=i0+1
endif
set MC=MC+1
exitwhen MC>7
endloop
if i0>=7 then
set MC=0
loop
if GetUnitAbilityLevel(MV[MC],$41305444)>=1 or GetUnitAbilityLevel(MV[MC],$41305557)>=1 then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(MV[MC]))+"получил достижение |c0000ff00\"Вместе веселей\"")
if GetUnitAbilityLevel(MV[MC],$41305138)>=1 then
call UnitRemoveAbility(MV[MC],$41305138)
call UnitAddAbility(MV[MC],$41305557)
else
call UnitAddAbility(MV[MC],$41305444)
endif
endif
set MC=MC+1
exitwhen MC>7
endloop
endif
endfunction
function B54 takes nothing returns nothing
local unit Nx=GetTriggerUnit()
local unit Hw=MV[GetPlayerId(GetOwningPlayer(Nx))]
local item MQ=GetManipulatedItem()
if IsUnitType(Hw,UNIT_TYPE_HERO)==true then
if GetItemUserData(MQ)==0 or GetItemUserData(MQ)==GetPlayerId(GetOwningPlayer(Hw))+1 then
if GetItemTypeId(MQ)==$74626172 and GetUnitAbilityLevel(Hw,$41314451)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Звездочёт\"")
call UnitAddAbility(Hw,$41314451)
elseif GetItemTypeId(MQ)==$74666172 and GetUnitAbilityLevel(Hw,$41314450)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Ниндзя\"")
call UnitAddAbility(Hw,$41314450)
elseif GetItemTypeId(MQ)==$6F666C67 and GetUnitAbilityLevel(Hw,$41314431)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Нас не оглушить!\"")
call UnitAddAbility(Hw,$41314431)
elseif GetItemTypeId(MQ)==$746C756D and GetUnitAbilityLevel(Hw,$41314430)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Магия? Не, не слышали\"")
call UnitAddAbility(Hw,$41314430)
elseif GetItemTypeId(MQ)==$49305845 and GetUnitAbilityLevel(Hw,$4131414A)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Неуловимый\"")
call UnitAddAbility(Hw,$4131414A)
elseif GetItemTypeId(MQ)==$49305837 and GetUnitAbilityLevel(Hw,$41304C4B)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Свиточек\"")
call UnitAddAbility(Hw,$41304C4B)
elseif GetItemTypeId(MQ)==$49305836 and GetUnitAbilityLevel(Hw,$41305556)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Проклятый\"")
call UnitAddAbility(Hw,$41305556)
elseif GetItemTypeId(MQ)==$49305838 and GetUnitAbilityLevel(Hw,$41313733)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Каменнный\"")
call UnitAddAbility(Hw,$41313733)
elseif GetItemTypeId(MQ)==$49305839 and GetUnitAbilityLevel(Hw,$4131354C)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Целитель\"")
call UnitAddAbility(Hw,$4131354C)
elseif GetItemTypeId(MQ)==$49305843 and GetUnitAbilityLevel(Hw,$41314149)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Ловкость\"")
call UnitAddAbility(Hw,$41314149)
elseif GetItemTypeId(MQ)==$49305133 and GetUnitAbilityLevel(Hw,$41305A51)<1 and GetUnitAbilityLevel(Hw,$41313037)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Праздничный настрой\"")
if GetUnitAbilityLevel(Hw,$41305A50)>=1 then
call UnitRemoveAbility(Hw,$41305A50)
call UnitAddAbility(Hw,$41313037)
else
call UnitAddAbility(Hw,$41305A51)
endif
elseif GetItemTypeId(MQ)==$49304E45 and GetUnitAbilityLevel(Hw,$41305A53)<1 and GetUnitAbilityLevel(Hw,$41313043)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Гладиатор\"")
if GetUnitAbilityLevel(Hw,$41305A5A)>=1 then
call UnitRemoveAbility(Hw,$41305A5A)
call UnitAddAbility(Hw,$41313043)
else
call UnitAddAbility(Hw,$41305A53)
endif
elseif GetItemTypeId(MQ)==$4930504A and GetUnitAbilityLevel(Hw,$41313036)<1 and GetUnitAbilityLevel(Hw,$41313042)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Растения во благо\"")
if GetUnitAbilityLevel(Hw,$41305A58)>=1 then
call UnitRemoveAbility(Hw,$41305A58)
call UnitAddAbility(Hw,$41313042)
else
call UnitAddAbility(Hw,$41313036)
endif
elseif IsUnitType(Hw,UNIT_TYPE_HERO)==true and GetItemTypeId(MQ)==$4930474A then
set Ta[GetPlayerId(GetOwningPlayer(Hw))]=Ta[GetPlayerId(GetOwningPlayer(Hw))]+1
if Ta[GetPlayerId(GetOwningPlayer(Hw))]>=3 and GetUnitAbilityLevel(Hw,$41305A50)<1 and GetUnitAbilityLevel(Hw,$41313037)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Я так просто не сдамся\"")
if GetUnitAbilityLevel(GetTriggerUnit(),$41305A51)>=1 then
call UnitRemoveAbility(Hw,$41305A51)
call UnitAddAbility(Hw,$41313037)
else
call UnitAddAbility(Hw,$41305A50)
endif
endif
elseif GetItemTypeId(MQ)==$4930504E and GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$41313033)<1 and GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$41313038)<1 then
set Td[GetPlayerId(GetOwningPlayer(Hw))]=Td[GetPlayerId(GetOwningPlayer(Hw))]+1
if Td[GetPlayerId(GetOwningPlayer(Hw))]>=7 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Прелестный читатель\"")
if GetUnitAbilityLevel(MV[GetPlayerId(GetOwningPlayer(Hw))],$41305A52)>=1 then
call UnitRemoveAbility(MV[GetPlayerId(GetOwningPlayer(Hw))],$41305A52)
call UnitAddAbility(MV[GetPlayerId(GetOwningPlayer(Hw))],$41313038)
else
call UnitAddAbility(MV[GetPlayerId(GetOwningPlayer(Hw))],$41313033)
endif
endif
elseif GetItemTypeId(MQ)==$70686C74 then
if GetUnitAbilityLevel(Hw,$41314254)<1 then
call UnitAddAbility(Hw,$41314254)
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Сон для слабых\"")
endif
elseif GetItemTypeId(MQ)==$73747265 then
if GetUnitAbilityLevel(Hw,$41304D44)<1 then
call UnitAddAbility(Hw,$41304D44)
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Рассечь!\"")
endif
elseif GetItemTypeId(MQ)==$6C757265 then
if GetUnitAbilityLevel(Hw,$41313745)<1 then
call UnitAddAbility(Hw,$41313745)
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Темный ветер\"")
endif
elseif GetItemTypeId(MQ)==$72756D70 then
if GetUnitAbilityLevel(Hw,$41313746)<1 then
call UnitAddAbility(Hw,$41313746)
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Возмездие\"")
endif
elseif GetItemTypeId(MQ)==$73666F67 then
if GetUnitAbilityLevel(Hw,$41313747)<1 then
call UnitAddAbility(Hw,$41313747)
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"Неприкаянный\"")
endif
endif
endif
endif
set Hw=null
set MQ=null
set Nx=null
endfunction
function B55 takes nothing returns nothing
if GetUnitLevel(GetTriggerUnit())==55 and GetUnitAbilityLevel(GetTriggerUnit(),$41313038)<1 and GetUnitAbilityLevel(GetTriggerUnit(),$41305A52)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил достижение |c0000ff00\"Максимум\"")
if GetUnitAbilityLevel(GetTriggerUnit(),$41313033)>=1 then
call UnitRemoveAbility(GetTriggerUnit(),$41313033)
call UnitAddAbility(GetTriggerUnit(),$41313038)
else
call UnitAddAbility(GetTriggerUnit(),$41305A52)
endif
endif
endfunction
function B56 takes nothing returns nothing
local trigger He=CreateTrigger()
call TriggerRegisterTimerEventSingle(He,3600.)
call TriggerAddAction(He,function B53)
set He=null
set He=CreateTrigger()
call TriggerRegisterTimerEventSingle(He,10800.)
call TriggerAddAction(He,function B52)
set He=null
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(He,function B54)
set He=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(He,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddAction(He,function B55)
set He=null
endfunction
function B57 takes nothing returns boolean
if not (GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41305A57)>=1) then
return false
endif
return true
endfunction
function B58 takes nothing returns boolean
if GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41305A56)>=1 then
return true
endif
if GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41313039)>=1 then
return true
endif
return false
endfunction
function B59 takes nothing returns boolean
if not B58() then
return false
endif
return true
endfunction
function B6B takes nothing returns boolean
if not (Rr[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))]>=1000) then
return false
endif
return true
endfunction
function B6C takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE)) then
return false
endif
return true
endfunction
function B6D takes nothing returns boolean
if not (GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41305A56)>=1) then
return false
endif
return true
endfunction
function B6E takes nothing returns boolean
if GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41305A57)>=1 then
return true
endif
if GetUnitAbilityLevel(MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41313039)>=1 then
return true
endif
return false
endfunction
function B6F takes nothing returns boolean
if not B6E() then
return false
endif
return true
endfunction
function B6G takes nothing returns boolean
if not (Rr[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))+20]>=10) then
return false
endif
return true
endfunction
function B6H takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305858)>=1) then
return false
endif
return true
endfunction
function B6I takes nothing returns nothing
if B6C() then
if B6B() then
if B59() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnit()))+" получил достижение |c0000ff00\"Убей их\"")
if B57() then
call UnitRemoveAbilityBJ($41305A57,MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitAddAbilityBJ($41313039,MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitMakeAbilityPermanent(MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],true,$41313039)
else
call UnitAddAbilityBJ($41305A56,MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitMakeAbilityPermanent(MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],true,$41305A56)
endif
endif
else
endif
else
endif
if B6H() then
set Rr[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))+20]=Rr[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))+20]+1
if B6G() then
if B6F() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnit()))+" получил достижение |c0000ff00\"Добытчик\"")
if B6D() then
call UnitRemoveAbilityBJ($41305A56,MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitAddAbilityBJ($41313039,MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitMakeAbilityPermanent(MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],true,$41313039)
else
call UnitAddAbilityBJ($41305A57,MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitMakeAbilityPermanent(MV[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],true,$41305A57)
endif
endif
else
endif
else
endif
endfunction
function B6J takes nothing returns nothing
set i1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(i1,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(i1,function B6I)
endfunction
function B6K takes nothing returns nothing
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c00ffff00Убито врагов c монетой: |r"+I2S(Rr[GetConvertedPlayerId(GetTriggerPlayer())+20]))
set MM=MM+1
if MM>10  then
set MM=1
endif
if MM==5  then
set MM=10
endif
call SetUnitAbilityLevelSwapped($41304243,IO,MM)
call SetUnitAbilityLevelSwapped($41304244,IO,MM)
call SetUnitAbilityLevelSwapped($53303050,IO,MM)
call MultiboardSetItemValueBJ(Pd,1,13,"|c006969ffСложность: |r"+I2S(MM)+".")
endfunction
function B6L takes nothing returns nothing
set i2=CreateTrigger()
call TriggerRegisterPlayerChatEvent(i2,Player(0),"-gk",true)
call TriggerRegisterPlayerChatEvent(i2,Player(1),"-gk",true)
call TriggerRegisterPlayerChatEvent(i2,Player(2),"-gk",true)
call TriggerRegisterPlayerChatEvent(i2,Player(3),"-gk",true)
call TriggerRegisterPlayerChatEvent(i2,Player(4),"-gk",true)
call TriggerRegisterPlayerChatEvent(i2,Player(5),"-gk",true)
call TriggerRegisterPlayerChatEvent(i2,Player(6),"-gk",true)
call TriggerRegisterPlayerChatEvent(i2,Player(7),"-gk",true)
call TriggerAddAction(i2,function B6K)
endfunction
function B6M takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_PASSIVE)) then
return false
endif
return true
endfunction
function B6N takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41313036)>=1) then
return false
endif
return true
endfunction
function B6O takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),$41305A58)>=1 then
return true
endif
if GetUnitAbilityLevel(GetTriggerUnit(),$41313042)>=1 then
return true
endif
return false
endfunction
function B6P takes nothing returns boolean
if not B6O() then
return false
endif
return true
endfunction
function B6Q takes nothing returns boolean
if not (Rq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]>=50) then
return false
endif
return true
endfunction
function B6R takes nothing returns nothing
if B6Q() then
if B6P() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил достижение |c0000ff00\"Смерть - лишь начало\"")
if B6N() then
call UnitRemoveAbilityBJ($41313036,GetTriggerUnit())
call UnitAddAbilityBJ($41313042,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41313042)
else
call UnitAddAbilityBJ($41305A58,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305A58)
endif
endif
else
endif
endfunction
function B6S takes nothing returns nothing
set i3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(i3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(i3,Condition(function B6M))
call TriggerAddAction(i3,function B6R)
endfunction
function B6T takes nothing returns boolean
if not (GetUnitAbilityLevel(MV[Tb-1],$41305A59)>=1) then
return false
endif
return true
endfunction
function B6U takes nothing returns boolean
if not (GetPlayerState(ConvertedPlayer(Tb),PLAYER_STATE_RESOURCE_GOLD)>=140000) then
return false
endif
if not (GetPlayerSlotState(ConvertedPlayer(Tb))==PLAYER_SLOT_STATE_PLAYING) then
return false
endif
return true
endfunction
function B6V takes nothing returns boolean
if not (GetUnitAbilityLevel(MV[Tb-1],$41305A53)>=1) then
return false
endif
return true
endfunction
function B6W takes nothing returns boolean
if GetUnitAbilityLevel(MV[Tb-1],$41305A5A)>=1 then
return true
endif
if GetUnitAbilityLevel(MV[Tb-1],$41313043)>=1 then
return true
endif
return false
endfunction
function B6X takes nothing returns boolean
if not B6W() then
return false
endif
return true
endfunction
function B6Y takes nothing returns boolean
if not (GetPlayerState(ConvertedPlayer(Tb),PLAYER_STATE_RESOURCE_LUMBER)>=9000) then
return false
endif
if not (GetPlayerSlotState(ConvertedPlayer(Tb))==PLAYER_SLOT_STATE_PLAYING) then
return false
endif
return true
endfunction
function B6Z takes nothing returns nothing
set Tb=1
loop
exitwhen Tb>8
if B6U() then
if B6T() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(ConvertedPlayer(Tb))+" получил достижение |c0000ff00\"Деньги - зло\"")
call UnitAddAbilityBJ($41305A59,MV[Tb-1])
endif
else
endif
if B6Y() then
if B6X() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(ConvertedPlayer(Tb))+" получил достижение |c0000ff00\"Кровоносная Тварь\"")
if B6V() then
call UnitRemoveAbilityBJ($41305A53,MV[Tb-1])
call UnitAddAbilityBJ($41313043,MV[Tb-1])
call UnitMakeAbilityPermanent(MV[Tb-1],true,$41313043)
else
call UnitAddAbilityBJ($41305A5A,MV[Tb-1])
call UnitMakeAbilityPermanent(MV[Tb-1],true,$41305A5A)
endif
endif
else
endif
set Tb=Tb+1
endloop
endfunction
function B6a takes nothing returns nothing
set i4=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(i4,5.)
call TriggerAddAction(i4,function B6Z)
endfunction
function B6b takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D30)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D33)==true) then
return false
endif
return true
endfunction
function B6c takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305052)>=1) then
return false
endif
return true
endfunction
function B6d takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),$41305235)>=1 then
return true
endif
if GetUnitAbilityLevel(GetTriggerUnit(),$41305247)>=1 then
return true
endif
return false
endfunction
function B6e takes nothing returns boolean
if not B6d() then
return false
endif
return true
endfunction
function B6f takes nothing returns nothing
if B6e() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил достижение |c0000ff00\"Стать бы гробовщиком\"")
if B6c() then
call UnitRemoveAbilityBJ($41305052,GetTriggerUnit())
call UnitAddAbilityBJ($41305247,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305247)
else
call UnitAddAbilityBJ($41305235,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305235)
endif
endif
endfunction
function B6g takes nothing returns nothing
set i5=CreateTrigger()
call TriggerRegisterEnterRectSimple(i5,EW)
call TriggerAddCondition(i5,Condition(function B6b))
call TriggerAddAction(i5,function B6f)
endfunction
function B6h takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304344)==true) then
return false
endif
if not (SU>=20) then
return false
endif
return true
endfunction
function B6i takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305444)>=1) then
return false
endif
return true
endfunction
function B6j takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),$41305138)>=1 then
return true
endif
if GetUnitAbilityLevel(GetTriggerUnit(),$41305557)>=1 then
return true
endif
return false
endfunction
function B6k takes nothing returns boolean
if not B6j() then
return false
endif
return true
endfunction
function B6l takes nothing returns nothing
if B6k() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил достижение |c0000ff00\"Скорострел\"")
if B6i() then
call UnitRemoveAbilityBJ($41305444,GetTriggerUnit())
call UnitAddAbilityBJ($41305557,GetTriggerUnit())
else
call UnitAddAbilityBJ($41305138,GetTriggerUnit())
endif
endif
endfunction
function B6m takes nothing returns nothing
set ax=CreateTrigger()
call TriggerRegisterEnterRectSimple(ax,Cy)
call TriggerAddCondition(ax,Condition(function B6h))
call TriggerAddAction(ax,function B6l)
endfunction
function B6n takes nothing returns nothing
local integer MC=0
loop
if RectContainsUnit(Ed,MV[MC])==true then
if not (GetUnitAbilityLevel(MV[MC],$41313032)>=1) then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(MV[MC]))+" получил достижение |c0000ff00\"Вождь Арахнидов\"")
call UnitAddAbility(MV[MC],$41313032)
endif
endif
set MC=MC+1
exitwhen MC>7
endloop
endfunction
function B6o takes nothing returns nothing
set i6=CreateTrigger()
call TriggerRegisterUnitEvent(i6,L1,EVENT_UNIT_DEATH)
call TriggerAddAction(i6,function B6n)
endfunction
function B6p takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6830334A then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6830334B then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6830334E then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6830334C then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6830334D then
return true
endif
return false
endfunction
function B6q takes nothing returns boolean
if not B6p() then
return false
endif
return true
endfunction
function B6r takes nothing returns nothing
local unit Hw=GetKillingUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))
set Tc[Mc]=Tc[Mc]+1
if Tc[Mc]>=5 then
if not (GetUnitAbilityLevel(MV[Mc],$41313034)>=1) then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hw))+" получил достижение |c0000ff00\"На пути разрушения\"")
call UnitAddAbility(MV[Mc],$41313034)
endif
endif
set Hw=null
endfunction
function B6s takes nothing returns nothing
set i7=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(i7,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(i7,Condition(function B6q))
call TriggerAddAction(i7,function B6r)
endfunction
function B6t takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41313035)>=1) then
return false
endif
return true
endfunction
function B6u takes nothing returns boolean
if not (RectContainsUnit(Gm,GetTriggerUnit())==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304655)==true) then
return false
endif
return true
endfunction
function B6v takes nothing returns boolean
if not (RectContainsUnit(Gn,GetTriggerUnit())==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304C33)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304C35)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304C34)==true) then
return false
endif
return true
endfunction
function B6w takes nothing returns nothing
if B6u() then
if B6t() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил достижение |c0000ff00\"Сквозь воду\"")
call UnitAddAbilityBJ($41313035,GetTriggerUnit())
endif
else
endif
if B6v() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304C33))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304C35))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304C34))
call UnitAddItemByIdSwapped($74626172,GetTriggerUnit())
else
endif
endfunction
function B6x takes nothing returns nothing
set i8=CreateTrigger()
call TriggerRegisterEnterRectSimple(i8,Gm)
call TriggerRegisterEnterRectSimple(i8,Gn)
call TriggerAddAction(i8,function B6w)
endfunction
function B6y takes nothing returns nothing
local integer Me
if Sh>=10 then
call DisableTrigger(GetTriggeringTrigger())
if Rs[2]<15 then
set Me=0
loop
if GetUnitAbilityLevel(MV[Me],$4130545A)<1 and GetUnitState(MV[Me],UNIT_STATE_LIFE)>.405 then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(Player(Me))+" получил достижение |c0000ff00\"Знаток\"")
call UnitAddAbility(MV[Me],$4130545A)
endif
set Me=Me+1
exitwhen Me>7
endloop
endif
endif
endfunction
function B6z takes nothing returns nothing
set i9=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(i9,2)
call TriggerAddAction(i9,function B6y)
endfunction
function B60 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B61 takes nothing returns boolean
if GetUnitAbilityLevel(GetEnumUnit(),$41313058)>=1 then
return true
endif
return false
endfunction
function B62 takes nothing returns boolean
if not B61() then
return false
endif
return true
endfunction
function B63 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41313141)>=1) then
return false
endif
return true
endfunction
function B64 takes nothing returns nothing
if B62() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Новогодний корпоратив\"")
call UnitAddAbilityBJ($41313058,GetEnumUnit())
endif
if Xp[999]<1 then
if B63() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Повелитель снега\"")
call UnitAddAbilityBJ($41313141,GetEnumUnit())
endif
endif
endfunction
function B65 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303654) then
return false
endif
return true
endfunction
function B66 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B67 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41304D4A)>=1) then
return false
endif
return true
endfunction
function B68 takes nothing returns nothing
if Xp[888]<1 then
if B67() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Мы не захлебнёмся\"")
call UnitAddAbilityBJ($41304D4A,GetEnumUnit())
endif
endif
endfunction
function B69 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303844) then
return false
endif
return true
endfunction
function B7B takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B7C takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41313954)>=1) then
return false
endif
return true
endfunction
function B7D takes nothing returns nothing
if Xp[777]<1 then
if B7C() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Повелитель песка\"")
call UnitAddAbilityBJ($41313954,GetEnumUnit())
endif
endif
endfunction
function B7E takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303754) then
return false
endif
return true
endfunction
function B7F takes nothing returns nothing
if B65() then
call ForGroupBJ(GetUnitsInRectMatching(FL,Condition(function B60)),function B64)
else
endif
if B69() then
call ForGroupBJ(GetUnitsInRectMatching(GJ,Condition(function B66)),function B68)
else
endif
if B7E() then
call ForGroupBJ(GetUnitsInRectMatching(GW,Condition(function B7B)),function B7D)
else
endif
endfunction
function B7G takes nothing returns nothing
set jB=CreateTrigger()
call TriggerRegisterUnitEvent(jB,K2,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(jB,Ky,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(jB,Ll,EVENT_UNIT_DEATH)
call TriggerAddAction(jB,function B7F)
endfunction
function B7H takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30304A then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30304F then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303052 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303130 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303232 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303331 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303547 then
return true
endif
return false
endfunction
function B7I takes nothing returns boolean
if not (GetUnitAbilityLevel(MV[GetForLoopIndexA()-1],$41304B4E)>=1) then
return false
endif
return true
endfunction
function B7J takes nothing returns boolean
if not (T7[GetForLoopIndexA()]>=7) then
return false
endif
return true
endfunction
function B7K takes nothing returns boolean
if not B7H() then
return false
endif
return true
endfunction
function B7L takes nothing returns nothing
if B7K() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set T7[GetForLoopIndexA()]=T7[GetForLoopIndexA()]+1
if B7J() then
if B7I() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(ConvertedPlayer(GetForLoopIndexA()))+" получил достижение |c0000ff00\"Несущий смерть\"")
call UnitAddAbilityBJ($41304B4E,MV[GetForLoopIndexA()-1])
endif
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function B7M takes nothing returns nothing
set jC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(jC,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(jC,function B7L)
endfunction
function B7N takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$4131394B)>=10) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$4131394F)>=10) then
return false
endif
return true
endfunction
function B7O takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B7P takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$4131424E)>=1) then
return false
endif
return true
endfunction
function B7Q takes nothing returns nothing
if B7P() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Море по колено\"")
call UnitAddAbilityBJ($4131424E,GetEnumUnit())
endif
endfunction
function B7R takes nothing returns nothing
call ForGroupBJ(GetUnitsInRectMatching(GL,Condition(function B7O)),function B7Q)
endfunction
function B7S takes nothing returns nothing
set jD=CreateTrigger()
call TriggerRegisterUnitEvent(jD,K8,EVENT_UNIT_DEATH)
call TriggerAddCondition(jD,Condition(function B7N))
call TriggerAddAction(jD,function B7R)
endfunction
function B7T takes nothing returns nothing
local unit Hw=GetTriggerUnit()
local integer Mc=GetPlayerId(GetOwningPlayer(Hw))+1
local unit Nx
local group Nb
local location Hv
local location Nl
local boolexpr Vz
local real Hd
if GetSpellAbilityId()==$4130544B then
set Nx=GetSpellTargetUnit()
set Nw=R2I(I2R((500+GetHeroInt(Hw,true))*GetUnitAbilityLevel(Hw,$4130544B))*N1[Mc])
call ms(Hw,Nx,Nw)
elseif GetSpellAbilityId()==$41305449 then
set Nx=GetSpellTargetUnit()
set Nw=R2I(I2R((100+GetHeroInt(Hw,true))*GetUnitAbilityLevel(Hw,$41305449))*N1[Mc])
call ms(Hw,Nx,Nw)
elseif GetSpellAbilityId()==$41305451 then
set Nx=GetSpellTargetUnit()
set Nw=R2I(I2R(5000+GetHeroInt(Hw,true)*12)*N1[Mc])
call ms(Hw,Nx,Nw)
elseif GetSpellAbilityId()==$41305448 then
set Hv=GetUnitLoc(GetTriggerUnit())
set Nl=nN(Hv,450.,GetUnitFacing(Hw))
set Nb=CreateGroup()
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Nl),GetLocationY(Nl),450,Vz)
call DestroyBoolExpr(Vz)
set Ps=Hw
set Hd=I2R(100*GetUnitAbilityLevel(Hw,$41305448)+GetHeroInt(Hw,true)*4)*N1[Mc]
set Nw=R2I(Hd)
call ForGroup(Nb,function m3)
call DestroyGroup(Nb)
set Vz=null
set Nb=null
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Nl),GetLocationY(Nl),450,Vz)
call DestroyBoolExpr(Vz)
set Ps=Hw
set Hd=I2R(100*GetUnitAbilityLevel(Hw,$41305448)+GetHeroInt(Hw,true)*2)*N1[Mc]
set Nw=R2I(Hd)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
set Vz=null
set Nb=null
call RemoveLocation(Hv)
set Hv=null
call RemoveLocation(Nl)
set Nl=null
elseif GetSpellAbilityId()==$41305452 then
set Hv=GetUnitLoc(GetTriggerUnit())
set Nl=nN(Hv,450.,GetUnitFacing(Hw))
set Nb=CreateGroup()
set Vz=Condition(function mq)
call GroupEnumUnitsInRange(Nb,GetLocationX(Nl),GetLocationY(Nl),450,Vz)
call DestroyBoolExpr(Vz)
set Ps=Hw
set Hd=I2R(2000+GetHeroInt(Hw,true)*7)*N1[Mc]
set Nw=R2I(Hd)
call ForGroup(Nb,function m3)
call DestroyGroup(Nb)
set Vz=null
set Nb=null
set Nb=CreateGroup()
set Vz=Condition(function mp)
call GroupEnumUnitsInRange(Nb,GetLocationX(Nl),GetLocationY(Nl),450,Vz)
call DestroyBoolExpr(Vz)
set Ps=Hw
set Hd=I2R(1500+GetHeroInt(Hw,true)*3)*N1[Mc]
set Nw=R2I(Hd)
call ForGroup(Nb,function mx)
call DestroyGroup(Nb)
set Vz=null
set Nb=null
call RemoveLocation(Hv)
set Hv=null
call RemoveLocation(Nl)
set Nl=null
endif
set Nx=null
set Hw=null
endfunction
function B7U takes nothing returns nothing
set jE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(jE,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(jE,function B7T)
endfunction
function B7V takes nothing returns nothing
call nk()
call nu()
call nw()
call n0()
call n2()
call n5()
call oD()
call oI()
call oP()
call ok()
call oz()
call o2()
call pH()
call pO()
call pe()
call pj()
call pt()
call px()
call p3()
call qB()
call qF()
call qN()
call qS()
call qo()
call qx()
call q3()
call q5()
call rD()
call rH()
call rP()
call rm()
call sL()
call sW()
call sY()
call s2()
call tB()
call tJ()
call tM()
call tV()
call tY()
call tb()
call tf()
call tn()
call tq()
call t1()
call t4()
call t9()
call ue()
call uk()
call uo()
call u6()
call vE()
call vL()
call ve()
call vl()
call vy()
call v6()
call wG()
call wS()
call wb()
call wn()
call wq()
call wt()
call wy()
call w3()
call xB()
call xH()
call xL()
call xQ()
call xU()
call xi()
call xn()
call xq()
call xu()
call xx()
call x1()
call x8()
call yE()
call yH()
call yP()
call yS()
call yY()
call yd()
call yf()
call yh()
call yl()
call yr()
call yw()
call yz()
call y2()
call zP()
call z7()
call BBF()
call BBI()
call BBK()
call BBP()
call BBR()
call BBV()
call BBZ()
call BBd()
call BBh()
call BBl()
call BBp()
call BB1()
call BB5()
call BB8()
call BCL()
call BCP()
call BCS()
call BCe()
call BCi()
call BCl()
call BCo()
call BC0()
call BC4()
call BC7()
call BDB()
call BDE()
call BDG()
call BDS()
call BDV()
call BDe()
call BDp()
call BDt()
call BDv()
call BD7()
call BEB()
call BEF()
call BEJ()
call BEN()
call BER()
call BEV()
call BEZ()
call BEk()
call BEn()
call BEu()
call BE5()
call BE9()
call BFC()
call BFO()
call BFS()
call BFW()
call BFZ()
call BFc()
call BFf()
call BFi()
call BFl()
call BFp()
call BF0()
call BF4()
call BF7()
call BGJ()
call BGN()
call BGP()
call BGb()
call BGf()
call BGj()
call BG5()
call BHS()
call BHd()
call BHh()
call BHk()
call BHv()
call BHz()
call BH4()
call BH9()
call BIF()
call BIK()
call BIW()
call BIZ()
call BIc()
call BIf()
call BIi()
call BIl()
call BIo()
call BIr()
call BI2()
call BI6()
call BI8()
call BJL()
call BJO()
call BJd()
call BJh()
call BJl()
call BJp()
call BJt()
call BJ4()
call BKD()
call BKF()
call BKH()
call BKJ()
call BKL()
call BKN()
call BKQ()
call BKS()
call BKc()
call BKf()
call BKj()
call BKl()
call BKx()
call BK1()
call BK3()
call BLG()
call BLK()
call BLM()
call BLY()
call BLb()
call BLf()
call BLh()
call BLt()
call BLw()
call BLz()
call BMB()
call BMF()
call BMH()
call BMT()
call BMX()
call BMa()
call BMc()
call BMe()
call BMg()
call BMi()
call BMk()
call BMw()
call BMz()
call BM3()
call BNF()
call BNQ()
call BNU()
call BNf()
call BNj()
call BNv()
call BNz()
call BOC()
call BOG()
call BOJ()
call BOU()
call BOY()
call BOb()
call BOd()
call BOp()
call BOs()
call BPa()
call BPd()
call BPg()
call BPm()
call BPq()
call BPt()
call BPx()
call BP0()
call BP4()
call BP8()
call BQL()
call BQO()
call BQS()
call BQd()
call BQg()
call BQi()
call BQt()
call BQx()
call BQ0()
call BRD()
call BRH()
call BRJ()
call BRV()
call BRZ()
call BRb()
call BRd()
call BRg()
call BRi()
call BRl()
call BRx()
call BR0()
call BR4()
call BR7()
call BSt()
call BSx()
call BSz()
call BTC()
call BTJ()
call BTN()
call BTZ()
call BTc()
call BTf()
call BTj()
call BTo()
call BUa()
call BVM()
call BVP()
call BVS()
call BVW()
call BVZ()
call BVe()
call BVh()
call BVk()
call BVn()
call BVq()
call BVt()
call BVx()
call BV1()
call BV4()
call BV7()
call BWT()
call BWV()
call BWg()
call BWj()
call BWm()
call BWp()
call BWr()
call BWu()
call BWx()
call BW0()
call BW3()
call BW6()
call BW8()
call BXM()
call BXQ()
call BXT()
call BXW()
call BXZ()
call BXc()
call BXf()
call BXi()
call BXm()
call BXp()
call BX1()
call BX4()
call BX8()
call BYM()
call BYY()
call BYc()
call BYe()
call BYg()
call BYi()
call BYl()
call BYp()
call BYs()
call BYz()
call BY4()
call BY8()
call BZC()
call BZO()
call BZS()
call BZW()
call BZa()
call BZe()
call BZi()
call BZm()
call BZy()
call BZ1()
call BZ4()
call BZ7()
call BaD()
call BaQ()
call BbI()
call BbP()
call BbS()
call BbW()
call Bba()
call Bbi()
call Bbm()
call Bbq()
call Bbt()
call Bbw()
call Bb0()
call BcD()
call BcG()
call BcK()
call BcM()
call BcP()
call BcT()
call Bcg()
call Bcm()
call Bcp()
call Bcu()
call Bcz()
call Bc4()
call Bc6()
call BdB()
call BdH()
call BdM()
call BdP()
call BdT()
call BdX()
call Bdj()
call Bdn()
call Bdr()
call Bdv()
call Bd2()
call BeF()
call BeK()
call BeW()
call Beb()
call Beg()
call Bel()
call Beq()
call Bev()
call Bey()
call Be1()
call BfH()
call BfN()
call Bfc()
call Bff()
call Bfi()
call Bfl()
call Bfn()
call Bfq()
call Bft()
call Bfw()
call Bfz()
call Bf1()
call Bf3()
call Bf5()
call BgH()
call BgK()
call BgN()
call BgQ()
call BgT()
call BgV()
call BgY()
call Bgc()
call Bgg()
call Bgl()
call Bgv()
call Bgx()
call Bg1()
call Bg4()
call Bg6()
call Bg8()
call BhZ()
call Bhd()
call Bhh()
call Bhl()
call Bhn()
call Bhs()
call Bh6()
call BiG()
call BiP()
call BiS()
call BiW()
call Bjk()
call Bjo()
call Bjs()
call Bjv()
call Bjy()
call Bj1()
call Bj6()
call Bj9()
call BkC()
call BkG()
call BkJ()
call BkQ()
call BkT()
call BkV()
call BkZ()
call Bkd()
call Bkk()
call Bko()
call Bkr()
call Bku()
call Bkx()
call Bk1()
call Bk3()
call Bk8()
call BlH()
call BlL()
call BlO()
call BlQ()
call BlU()
call BlX()
call Blc()
call Blf()
call Blh()
call Blk()
call Bln()
call Blr()
call Blv()
call Bly()
call Bl3()
call Bl6()
call BmC()
call BmE()
call BmH()
call BmJ()
call BmM()
call BmR()
call BmV()
call Bma()
call Bmd()
call Bmj()
call Bmm()
call Bmt()
call Bmz()
call Bm8()
call BnB()
call BnD()
call BnH()
call BnK()
call BnN()
call BnQ()
call BnT()
call BnW()
call BnZ()
call Bnj()
call Bnt()
call Bn3()
call Bn7()
call BoB()
call BoG()
call BoL()
call BoQ()
call BoY()
call Boi()
call Bop()
call Bos()
call Bov()
call Boy()
call Bo1()
call Bo3()
call Bo5()
call BpB()
call BpD()
call BpG()
call BpK()
call BpO()
call BpS()
call BpW()
call BpZ()
call Bpc()
call Bpf()
call Bpi()
call Bpp()
call Bpt()
call Bpy()
call Bp5()
call BqC()
call BqR()
call BqV()
call Bqa()
call Bqe()
call Bqh()
call Bqs()
call Bqz()
call Bq5()
call BrC()
call BrF()
call BrL()
call BrS()
call BrZ()
call Brc()
call Brg()
call Brk()
call Brn()
call Brr()
call Brv()
call Br0()
call Br4()
call Br7()
call BsC()
call BsF()
call BsJ()
call BsO()
call BsR()
call BsX()
call BsZ()
call Bsb()
call Bsk()
call Bsm()
call BuF()
call BuH()
call Bu3()
call Bu5()
call BvP()
call BvV()
call Bvb()
call Bvk()
call Bvm()
call Bvr()
call Bvv()
call Bvz()
call Bv6()
call Bv8()
call BwB()
call BwG()
call BwI()
call BwK()
call BwM()
call BwO()
call BwS()
call BwX()
call Bwq()
call Bwt()
call Bww()
call Bwz()
call BxD()
call BxK()
call BxR()
call BxY()
call Bxc()
call Bxg()
call Bxk()
call Bxo()
call Bxs()
call Bxw()
call Bx2()
call Bx8()
call ByD()
call ByK()
call ByO()
call ByU()
call ByW()
call ByZ()
call Byc()
call Byf()
call Byi()
call Byl()
call Byo()
call Byr()
call Byu()
call By2()
call BzB()
call BzN()
call BzR()
call BzU()
call BzX()
call Bzf()
call Bzn()
call Bzz()
call Bz6()
call B0E()
call B0Q()
call B0X()
call B0e()
call B0g()
call B0i()
call B0u()
call B0z()
call B1E()
call B1G()
call B1I()
call B1L()
call B1O()
call B1R()
call B1U()
call B1X()
call B1a()
call B1d()
call B1g()
call B1p()
call B1r()
call B1x()
call B19()
call B2g()
call B27()
call B3B()
call B3H()
call B3L()
call B3O()
call B3f()
call B3w()
call B4E()
call B4V()
call B4m()
call B4p()
call B4v()
call B4y()
call B43()
call B5v()
call B51()
call B56()
call B6J()
call B6L()
call B6S()
call B6a()
call B6g()
call B6m()
call B6o()
call B6s()
call B6x()
call B6z()
call B7G()
call B7M()
call B7S()
call B7U()
endfunction
function B7W takes nothing returns nothing
call ConditionalTriggerExecute(jF)
call ConditionalTriggerExecute(hr)
call ConditionalTriggerExecute(jG)
call ConditionalTriggerExecute(jH)
call ConditionalTriggerExecute(jI)
call ConditionalTriggerExecute(jJ)
endfunction
function B7X takes nothing returns nothing
call SetPlayerStartLocation(Player(0),0)
call ForcePlayerStartLocation(Player(0),0)
call SetPlayerColor(Player(0),ConvertPlayerColor(0))
call SetPlayerRacePreference(Player(0),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(0),false)
call SetPlayerController(Player(0),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(1),1)
call ForcePlayerStartLocation(Player(1),1)
call SetPlayerColor(Player(1),ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(1),false)
call SetPlayerController(Player(1),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2),2)
call ForcePlayerStartLocation(Player(2),2)
call SetPlayerColor(Player(2),ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(2),false)
call SetPlayerController(Player(2),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3),3)
call ForcePlayerStartLocation(Player(3),3)
call SetPlayerColor(Player(3),ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(3),false)
call SetPlayerController(Player(3),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(4),4)
call ForcePlayerStartLocation(Player(4),4)
call SetPlayerColor(Player(4),ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(4),false)
call SetPlayerController(Player(4),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(5),5)
call ForcePlayerStartLocation(Player(5),5)
call SetPlayerColor(Player(5),ConvertPlayerColor(5))
call SetPlayerRacePreference(Player(5),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(5),false)
call SetPlayerController(Player(5),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(6),6)
call ForcePlayerStartLocation(Player(6),6)
call SetPlayerColor(Player(6),ConvertPlayerColor(6))
call SetPlayerRacePreference(Player(6),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(6),false)
call SetPlayerController(Player(6),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(7),7)
call ForcePlayerStartLocation(Player(7),7)
call SetPlayerColor(Player(7),ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(7),false)
call SetPlayerController(Player(7),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(8),8)
call ForcePlayerStartLocation(Player(8),8)
call SetPlayerColor(Player(8),ConvertPlayerColor(8))
call SetPlayerRacePreference(Player(8),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(8),false)
call SetPlayerController(Player(8),MAP_CONTROL_COMPUTER)
call SetPlayerStartLocation(Player(9),9)
call SetPlayerColor(Player(9),ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9),RACE_PREF_ORC)
call SetPlayerRaceSelectable(Player(9),false)
call SetPlayerController(Player(9),MAP_CONTROL_COMPUTER)
endfunction
function B7Y takes nothing returns nothing
call SetPlayerTeam(Player(0),0)
call SetPlayerState(Player(0),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(1),0)
call SetPlayerState(Player(1),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(2),0)
call SetPlayerState(Player(2),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(3),0)
call SetPlayerState(Player(3),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(4),0)
call SetPlayerState(Player(4),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(5),0)
call SetPlayerState(Player(5),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(6),0)
call SetPlayerState(Player(6),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(7),0)
call SetPlayerState(Player(7),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(8),0)
call SetPlayerState(Player(8),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(7),true)
call SetPlayerTeam(Player(9),1)
endfunction
function B7Z takes nothing returns nothing
call SetStartLocPrioCount(0,7)
call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,6,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(1,5)
call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(2,5)
call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(3,5)
call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(4,5)
call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(5,5)
call SetStartLocPrio(5,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(6,7)
call SetStartLocPrio(6,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(7,2)
call SetStartLocPrio(7,0,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,1,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(8,1)
call SetStartLocPrio(8,0,7,MAP_LOC_PRIO_HIGH)
endfunction
function main takes nothing returns nothing
local weathereffect B
call SetCameraBounds(-16384.+GetCameraMargin(CAMERA_MARGIN_LEFT),-24576.+GetCameraMargin(CAMERA_MARGIN_BOTTOM),24576.-GetCameraMargin(CAMERA_MARGIN_RIGHT),16000.-GetCameraMargin(CAMERA_MARGIN_TOP),-16384.+GetCameraMargin(CAMERA_MARGIN_LEFT),16000.-GetCameraMargin(CAMERA_MARGIN_TOP),24576.-GetCameraMargin(CAMERA_MARGIN_RIGHT),-24576.+GetCameraMargin(CAMERA_MARGIN_BOTTOM))
call SetDayNightModels("Environment\\DNC\\DNCAshenvale\\DNCAshenvaleTerrain\\DNCAshenvaleTerrain.mdl","Environment\\DNC\\DNCAshenvale\\DNCAshenvaleUnit\\DNCAshenvaleUnit.mdl")
set B=AddWeatherEffect(Rect(-16384.,-24576.,24576.,16384.),$534E6C73)
call EnableWeatherEffect(B,true)
call NewSoundEnvironment("Dungeon")
call SetAmbientDaySound("VillageDay")
call SetAmbientNightSound("VillageNight")
call SetMapMusic("Music",true,0)
call mP()
call mm()
call mn()
call mQ()
call mR()
call ml()
call InitBlizzard()
call ExecuteFunc("B7a")
call ExecuteFunc("jP")
call ExecuteFunc("jb")
call ExecuteFunc("jc")
call ExecuteFunc("jp")
call ExecuteFunc("jz")
call ExecuteFunc("j6")
call ExecuteFunc("kE")
call ExecuteFunc("lR")
call ExecuteFunc("lq")
call nU()
call nh()
call vr()
call Bvi()
call lr()
call B7V()
call B7W()
set B=null
endfunction
function config takes nothing returns nothing
call SetMapName("|cFF69ff69TCoM ORPG |c006969ffv7.12a")
call SetMapDescription("|c00ffff00I-IntegraL|r presents
")
call SetPlayers(10)
call SetTeams(10)
call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
call DefineStartLocation(0,-15616.,14528.)
call DefineStartLocation(1,-15616.,14592.)
call DefineStartLocation(2,-15616.,14528.)
call DefineStartLocation(3,-15616.,14592.)
call DefineStartLocation(4,-15616.,14528.)
call DefineStartLocation(5,-15616.,14528.)
call DefineStartLocation(6,-15616.,14592.)
call DefineStartLocation(7,-15616.,14528.)
call DefineStartLocation(8,-768.,-23680.)
call DefineStartLocation(9,19328.,14656.)
call B7X()
call B7Y()
call B7Z()
endfunction
function B7a takes nothing returns nothing
endfunction
